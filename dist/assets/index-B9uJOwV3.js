(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=o(l);fetch(l.href,c)}})();function Fm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wu={exports:{}},hs={},Uu={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function f0(){if(hp)return Me;hp=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),m=Symbol.iterator;function y(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function N(E,P,Z){this.props=E,this.context=P,this.refs=C,this.updater=Z||w}N.prototype.isReactComponent={},N.prototype.setState=function(E,P){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,P,"setState")},N.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function b(){}b.prototype=N.prototype;function O(E,P,Z){this.props=E,this.context=P,this.refs=C,this.updater=Z||w}var k=O.prototype=new b;k.constructor=O,S(k,N.prototype),k.isPureReactComponent=!0;var T=Array.isArray,M=Object.prototype.hasOwnProperty,L={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Y(E,P,Z){var J,oe={},ie=null,le=null;if(P!=null)for(J in P.ref!==void 0&&(le=P.ref),P.key!==void 0&&(ie=""+P.key),P)M.call(P,J)&&!B.hasOwnProperty(J)&&(oe[J]=P[J]);var se=arguments.length-2;if(se===1)oe.children=Z;else if(1<se){for(var G=Array(se),ne=0;ne<se;ne++)G[ne]=arguments[ne+2];oe.children=G}if(E&&E.defaultProps)for(J in se=E.defaultProps,se)oe[J]===void 0&&(oe[J]=se[J]);return{$$typeof:t,type:E,key:ie,ref:le,props:oe,_owner:L.current}}function q(E,P){return{$$typeof:t,type:E.type,key:P,ref:E.ref,props:E.props,_owner:E._owner}}function F(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function z(E){var P={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Z){return P[Z]})}var H=/\/+/g;function X(E,P){return typeof E=="object"&&E!==null&&E.key!=null?z(""+E.key):P.toString(36)}function $(E,P,Z,J,oe){var ie=typeof E;(ie==="undefined"||ie==="boolean")&&(E=null);var le=!1;if(E===null)le=!0;else switch(ie){case"string":case"number":le=!0;break;case"object":switch(E.$$typeof){case t:case r:le=!0}}if(le)return le=E,oe=oe(le),E=J===""?"."+X(le,0):J,T(oe)?(Z="",E!=null&&(Z=E.replace(H,"$&/")+"/"),$(oe,P,Z,"",function(ne){return ne})):oe!=null&&(F(oe)&&(oe=q(oe,Z+(!oe.key||le&&le.key===oe.key?"":(""+oe.key).replace(H,"$&/")+"/")+E)),P.push(oe)),1;if(le=0,J=J===""?".":J+":",T(E))for(var se=0;se<E.length;se++){ie=E[se];var G=J+X(ie,se);le+=$(ie,P,Z,G,oe)}else if(G=y(E),typeof G=="function")for(E=G.call(E),se=0;!(ie=E.next()).done;)ie=ie.value,G=J+X(ie,se++),le+=$(ie,P,Z,G,oe);else if(ie==="object")throw P=String(E),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return le}function Q(E,P,Z){if(E==null)return E;var J=[],oe=0;return $(E,J,"","",function(ie){return P.call(Z,ie,oe++)}),J}function W(E){if(E._status===-1){var P=E._result;P=P(),P.then(function(Z){(E._status===0||E._status===-1)&&(E._status=1,E._result=Z)},function(Z){(E._status===0||E._status===-1)&&(E._status=2,E._result=Z)}),E._status===-1&&(E._status=0,E._result=P)}if(E._status===1)return E._result.default;throw E._result}var _={current:null},D={transition:null},j={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:D,ReactCurrentOwner:L};function R(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:Q,forEach:function(E,P,Z){Q(E,function(){P.apply(this,arguments)},Z)},count:function(E){var P=0;return Q(E,function(){P++}),P},toArray:function(E){return Q(E,function(P){return P})||[]},only:function(E){if(!F(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Me.Component=N,Me.Fragment=o,Me.Profiler=l,Me.PureComponent=O,Me.StrictMode=i,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,Me.act=R,Me.cloneElement=function(E,P,Z){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var J=S({},E.props),oe=E.key,ie=E.ref,le=E._owner;if(P!=null){if(P.ref!==void 0&&(ie=P.ref,le=L.current),P.key!==void 0&&(oe=""+P.key),E.type&&E.type.defaultProps)var se=E.type.defaultProps;for(G in P)M.call(P,G)&&!B.hasOwnProperty(G)&&(J[G]=P[G]===void 0&&se!==void 0?se[G]:P[G])}var G=arguments.length-2;if(G===1)J.children=Z;else if(1<G){se=Array(G);for(var ne=0;ne<G;ne++)se[ne]=arguments[ne+2];J.children=se}return{$$typeof:t,type:E.type,key:oe,ref:ie,props:J,_owner:le}},Me.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},Me.createElement=Y,Me.createFactory=function(E){var P=Y.bind(null,E);return P.type=E,P},Me.createRef=function(){return{current:null}},Me.forwardRef=function(E){return{$$typeof:f,render:E}},Me.isValidElement=F,Me.lazy=function(E){return{$$typeof:x,_payload:{_status:-1,_result:E},_init:W}},Me.memo=function(E,P){return{$$typeof:g,type:E,compare:P===void 0?null:P}},Me.startTransition=function(E){var P=D.transition;D.transition={};try{E()}finally{D.transition=P}},Me.unstable_act=R,Me.useCallback=function(E,P){return _.current.useCallback(E,P)},Me.useContext=function(E){return _.current.useContext(E)},Me.useDebugValue=function(){},Me.useDeferredValue=function(E){return _.current.useDeferredValue(E)},Me.useEffect=function(E,P){return _.current.useEffect(E,P)},Me.useId=function(){return _.current.useId()},Me.useImperativeHandle=function(E,P,Z){return _.current.useImperativeHandle(E,P,Z)},Me.useInsertionEffect=function(E,P){return _.current.useInsertionEffect(E,P)},Me.useLayoutEffect=function(E,P){return _.current.useLayoutEffect(E,P)},Me.useMemo=function(E,P){return _.current.useMemo(E,P)},Me.useReducer=function(E,P,Z){return _.current.useReducer(E,P,Z)},Me.useRef=function(E){return _.current.useRef(E)},Me.useState=function(E){return _.current.useState(E)},Me.useSyncExternalStore=function(E,P,Z){return _.current.useSyncExternalStore(E,P,Z)},Me.useTransition=function(){return _.current.useTransition()},Me.version="18.3.1",Me}var gp;function Os(){return gp||(gp=1,Uu.exports=f0()),Uu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function p0(){if(xp)return hs;xp=1;var t=Os(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,h,g){var x,m={},y=null,w=null;g!==void 0&&(y=""+g),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(w=h.ref);for(x in h)i.call(h,x)&&!c.hasOwnProperty(x)&&(m[x]=h[x]);if(f&&f.defaultProps)for(x in h=f.defaultProps,h)m[x]===void 0&&(m[x]=h[x]);return{$$typeof:r,type:f,key:y,ref:w,props:m,_owner:l.current}}return hs.Fragment=o,hs.jsx=d,hs.jsxs=d,hs}var yp;function m0(){return yp||(yp=1,Wu.exports=p0()),Wu.exports}var u=m0(),A=Os();const vs=Fm(A);var il={},Yu={exports:{}},St={},Xu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function h0(){return vp||(vp=1,(function(t){function r(D,j){var R=D.length;D.push(j);e:for(;0<R;){var E=R-1>>>1,P=D[E];if(0<l(P,j))D[E]=j,D[R]=P,R=E;else break e}}function o(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var j=D[0],R=D.pop();if(R!==j){D[0]=R;e:for(var E=0,P=D.length,Z=P>>>1;E<Z;){var J=2*(E+1)-1,oe=D[J],ie=J+1,le=D[ie];if(0>l(oe,R))ie<P&&0>l(le,oe)?(D[E]=le,D[ie]=R,E=ie):(D[E]=oe,D[J]=R,E=J);else if(ie<P&&0>l(le,R))D[E]=le,D[ie]=R,E=ie;else break e}}return j}function l(D,j){var R=D.sortIndex-j.sortIndex;return R!==0?R:D.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var h=[],g=[],x=1,m=null,y=3,w=!1,S=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(D){for(var j=o(g);j!==null;){if(j.callback===null)i(g);else if(j.startTime<=D)i(g),j.sortIndex=j.expirationTime,r(h,j);else break;j=o(g)}}function T(D){if(C=!1,k(D),!S)if(o(h)!==null)S=!0,W(M);else{var j=o(g);j!==null&&_(T,j.startTime-D)}}function M(D,j){S=!1,C&&(C=!1,b(Y),Y=-1),w=!0;var R=y;try{for(k(j),m=o(h);m!==null&&(!(m.expirationTime>j)||D&&!z());){var E=m.callback;if(typeof E=="function"){m.callback=null,y=m.priorityLevel;var P=E(m.expirationTime<=j);j=t.unstable_now(),typeof P=="function"?m.callback=P:m===o(h)&&i(h),k(j)}else i(h);m=o(h)}if(m!==null)var Z=!0;else{var J=o(g);J!==null&&_(T,J.startTime-j),Z=!1}return Z}finally{m=null,y=R,w=!1}}var L=!1,B=null,Y=-1,q=5,F=-1;function z(){return!(t.unstable_now()-F<q)}function H(){if(B!==null){var D=t.unstable_now();F=D;var j=!0;try{j=B(!0,D)}finally{j?X():(L=!1,B=null)}}else L=!1}var X;if(typeof O=="function")X=function(){O(H)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=H,X=function(){Q.postMessage(null)}}else X=function(){N(H,0)};function W(D){B=D,L||(L=!0,X())}function _(D,j){Y=N(function(){D(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,W(M))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return o(h)},t.unstable_next=function(D){switch(y){case 1:case 2:case 3:var j=3;break;default:j=y}var R=y;y=j;try{return D()}finally{y=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var R=y;y=D;try{return j()}finally{y=R}},t.unstable_scheduleCallback=function(D,j,R){var E=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?E+R:E):R=E,D){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=R+P,D={id:x++,callback:j,priorityLevel:D,startTime:R,expirationTime:P,sortIndex:-1},R>E?(D.sortIndex=R,r(g,D),o(h)===null&&D===o(g)&&(C?(b(Y),Y=-1):C=!0,_(T,R-E))):(D.sortIndex=P,r(h,D),S||w||(S=!0,W(M))),D},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(D){var j=y;return function(){var R=y;y=j;try{return D.apply(this,arguments)}finally{y=R}}}})(Gu)),Gu}var wp;function g0(){return wp||(wp=1,Xu.exports=h0()),Xu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function x0(){if(Sp)return St;Sp=1;var t=Os(),r=g0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},m={};function y(e){return h.call(m,e)?!0:h.call(x,e)?!1:g.test(e)?m[e]=!0:(x[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function C(e,n,s,a,p,v,I){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=I}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];N[n]=new C(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(b,O);N[n]=new C(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(b,O);N[n]=new C(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(b,O);N[n]=new C(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function k(e,n,s,a){var p=N.hasOwnProperty(n)?N[n]:null;(p!==null?p.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,p,a)&&(s=null),a||p===null?y(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):p.mustUseProperty?e[p.propertyName]=s===null?p.type===3?!1:"":s:(n=p.attributeName,a=p.attributeNamespace,s===null?e.removeAttribute(n):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),L=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),D=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var R=Object.assign,E;function P(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var Z=!1;function J(e,n){if(!e||Z)return"";Z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(re){var a=re}Reflect.construct(e,[],n)}else{try{n.call()}catch(re){a=re}e.call(n.prototype)}else{try{throw Error()}catch(re){a=re}e()}}catch(re){if(re&&a&&typeof re.stack=="string"){for(var p=re.stack.split(`
`),v=a.stack.split(`
`),I=p.length-1,V=v.length-1;1<=I&&0<=V&&p[I]!==v[V];)V--;for(;1<=I&&0<=V;I--,V--)if(p[I]!==v[V]){if(I!==1||V!==1)do if(I--,V--,0>V||p[I]!==v[V]){var U=`
`+p[I].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=I&&0<=V);break}}}finally{Z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?P(e):""}function oe(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1),e;case 11:return e=J(e.type.render,!1),e;case 1:return e=J(e.type,!0),e;default:return""}}function ie(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case L:return"Portal";case q:return"Profiler";case Y:return"StrictMode";case X:return"Suspense";case $:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case F:return(e._context.displayName||"Context")+".Provider";case H:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:ie(e.type)||"Memo";case W:n=e._payload,e=e._init;try{return ie(e(n))}catch{}}return null}function le(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(n);case 8:return n===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function G(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ne(e){var n=G(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(I){a=""+I,v.call(this,I)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(I){a=""+I},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function pe(e){e._valueTracker||(e._valueTracker=ne(e))}function he(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=G(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function me(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ke(e,n){var s=n.checked;return R({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Ie(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=se(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ee(e,n){n=n.checked,n!=null&&k(e,"checked",n,!1)}function Le(e,n){Ee(e,n);var s=se(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?at(e,n.type,s):n.hasOwnProperty("defaultValue")&&at(e,n.type,se(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function et(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function at(e,n,s){(n!=="number"||me(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Xe=Array.isArray;function Ke(e,n,s,a){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&a&&(e[s].defaultSelected=!0)}else{for(s=""+se(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function ot(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return R({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dt(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(Xe(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:se(s)}}function Tt(e,n){var s=se(n.value),a=se(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Bt(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hn(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?st(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tr,Vs=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,p){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,p)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(tr=tr||document.createElement("div"),tr.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=tr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function gn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zl=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(e){Zl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),nr[n]=nr[e]})});function Bs(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||nr.hasOwnProperty(e)&&nr[e]?(""+n).trim():n+"px"}function Ws(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,p=Bs(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,p):e[s]=p}}var Jl=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bo(e,n){if(n){if(Jl[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Co(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function Eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mo=null,Mn=null,_n=null;function Us(e){if(e=es(e)){if(typeof Mo!="function")throw Error(o(280));var n=e.stateNode;n&&(n=Si(n),Mo(e.stateNode,e.type,n))}}function Ys(e){Mn?_n?_n.push(e):_n=[e]:Mn=e}function Xs(){if(Mn){var e=Mn,n=_n;if(_n=Mn=null,Us(e),n)for(e=0;e<n.length;e++)Us(n[e])}}function Gs(e,n){return e(n)}function Ks(){}var _o=!1;function Qs(e,n,s){if(_o)return e(n,s);_o=!0;try{return Gs(e,n,s)}finally{_o=!1,(Mn!==null||_n!==null)&&(Ks(),Xs())}}function rr(e,n){var s=e.stateNode;if(s===null)return null;var a=Si(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Po=!1;if(f)try{var or={};Object.defineProperty(or,"passive",{get:function(){Po=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Po=!1}function ea(e,n,s,a,p,v,I,V,U){var re=Array.prototype.slice.call(arguments,3);try{n.apply(s,re)}catch(ue){this.onError(ue)}}var sr=!1,Lr=null,Ar=!1,Do=null,ta={onError:function(e){sr=!0,Lr=e}};function na(e,n,s,a,p,v,I,V,U){sr=!1,Lr=null,ea.apply(ta,arguments)}function ra(e,n,s,a,p,v,I,V,U){if(na.apply(this,arguments),sr){if(sr){var re=Lr;sr=!1,Lr=null}else throw Error(o(198));Ar||(Ar=!0,Do=re)}}function rn(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function To(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Oo(e){if(rn(e)!==e)throw Error(o(188))}function oa(e){var n=e.alternate;if(!n){if(n=rn(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var p=s.return;if(p===null)break;var v=p.alternate;if(v===null){if(a=p.return,a!==null){s=a;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===s)return Oo(p),e;if(v===a)return Oo(p),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=p,a=v;else{for(var I=!1,V=p.child;V;){if(V===s){I=!0,s=p,a=v;break}if(V===a){I=!0,a=p,s=v;break}V=V.sibling}if(!I){for(V=v.child;V;){if(V===s){I=!0,s=v,a=p;break}if(V===a){I=!0,a=v,s=p;break}V=V.sibling}if(!I)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function qs(e){return e=oa(e),e!==null?Zs(e):null}function Zs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Zs(e);if(n!==null)return n;e=e.sibling}return null}var Js=r.unstable_scheduleCallback,ei=r.unstable_cancelCallback,sa=r.unstable_shouldYield,ti=r.unstable_requestPaint,Be=r.unstable_now,ia=r.unstable_getCurrentPriorityLevel,Lo=r.unstable_ImmediatePriority,ni=r.unstable_UserBlockingPriority,$r=r.unstable_NormalPriority,la=r.unstable_LowPriority,ri=r.unstable_IdlePriority,ir=null,Ot=null;function aa(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(ir,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:da,ua=Math.log,ca=Math.LN2;function da(e){return e>>>=0,e===0?32:31-(ua(e)/ca|0)|0}var zr=64,Rr=4194304;function on(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,p=e.suspendedLanes,v=e.pingedLanes,I=s&268435455;if(I!==0){var V=I&~p;V!==0?a=on(V):(v&=I,v!==0&&(a=on(v)))}else I=s&~p,I!==0?a=on(I):v!==0&&(a=on(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&p)===0&&(p=a&-a,v=n&-n,p>=v||p===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-jt(n),p=1<<s,a|=e[s],n&=~p;return a}function oi(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fa(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,v=e.pendingLanes;0<v;){var I=31-jt(v),V=1<<I,U=p[I];U===-1?((V&s)===0||(V&a)!==0)&&(p[I]=oi(V,n)):U<=n&&(e.expiredLanes|=V),v&=~V}}function Ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hr(){var e=zr;return zr<<=1,(zr&4194240)===0&&(zr=64),e}function $o(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function lr(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-jt(n),e[n]=s}function si(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var p=31-jt(s),v=1<<p;n[p]=0,a[p]=-1,e[p]=-1,s&=~v}}function pa(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-jt(s),p=1<<a;p&n|e[a]&n&&(e[a]|=n),s&=~p}}var Te=0;function Yc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Xc,ma,Gc,Kc,Qc,ha=!1,ii=[],Pn=null,Dn=null,Tn=null,zo=new Map,Ro=new Map,On=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qc(e,n){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":zo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(n.pointerId)}}function Fo(e,n,s,a,p,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[p]},n!==null&&(n=es(n),n!==null&&ma(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Lg(e,n,s,a,p){switch(n){case"focusin":return Pn=Fo(Pn,e,n,s,a,p),!0;case"dragenter":return Dn=Fo(Dn,e,n,s,a,p),!0;case"mouseover":return Tn=Fo(Tn,e,n,s,a,p),!0;case"pointerover":var v=p.pointerId;return zo.set(v,Fo(zo.get(v)||null,e,n,s,a,p)),!0;case"gotpointercapture":return v=p.pointerId,Ro.set(v,Fo(Ro.get(v)||null,e,n,s,a,p)),!0}return!1}function Zc(e){var n=ar(e.target);if(n!==null){var s=rn(n);if(s!==null){if(n=s.tag,n===13){if(n=To(s),n!==null){e.blockedOn=n,Qc(e.priority,function(){Gc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function li(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=xa(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);Io=a,s.target.dispatchEvent(a),Io=null}else return n=es(s),n!==null&&ma(n),e.blockedOn=s,!1;n.shift()}return!0}function Jc(e,n,s){li(e)&&s.delete(n)}function Ag(){ha=!1,Pn!==null&&li(Pn)&&(Pn=null),Dn!==null&&li(Dn)&&(Dn=null),Tn!==null&&li(Tn)&&(Tn=null),zo.forEach(Jc),Ro.forEach(Jc)}function Ho(e,n){e.blockedOn===n&&(e.blockedOn=null,ha||(ha=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ag)))}function Vo(e){function n(p){return Ho(p,e)}if(0<ii.length){Ho(ii[0],e);for(var s=1;s<ii.length;s++){var a=ii[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Pn!==null&&Ho(Pn,e),Dn!==null&&Ho(Dn,e),Tn!==null&&Ho(Tn,e),zo.forEach(n),Ro.forEach(n),s=0;s<On.length;s++)a=On[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<On.length&&(s=On[0],s.blockedOn===null);)Zc(s),s.blockedOn===null&&On.shift()}var Vr=T.ReactCurrentBatchConfig,ai=!0;function $g(e,n,s,a){var p=Te,v=Vr.transition;Vr.transition=null;try{Te=1,ga(e,n,s,a)}finally{Te=p,Vr.transition=v}}function zg(e,n,s,a){var p=Te,v=Vr.transition;Vr.transition=null;try{Te=4,ga(e,n,s,a)}finally{Te=p,Vr.transition=v}}function ga(e,n,s,a){if(ai){var p=xa(e,n,s,a);if(p===null)Oa(e,n,a,ui,s),qc(e,a);else if(Lg(p,e,n,s,a))a.stopPropagation();else if(qc(e,a),n&4&&-1<Og.indexOf(e)){for(;p!==null;){var v=es(p);if(v!==null&&Xc(v),v=xa(e,n,s,a),v===null&&Oa(e,n,a,ui,s),v===p)break;p=v}p!==null&&a.stopPropagation()}else Oa(e,n,a,null,s)}}var ui=null;function xa(e,n,s,a){if(ui=null,e=Eo(a),e=ar(e),e!==null)if(n=rn(e),n===null)e=null;else if(s=n.tag,s===13){if(e=To(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ui=e,null}function ed(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ia()){case Lo:return 1;case ni:return 4;case $r:case la:return 16;case ri:return 536870912;default:return 16}default:return 16}}var Ln=null,ya=null,ci=null;function td(){if(ci)return ci;var e,n=ya,s=n.length,a,p="value"in Ln?Ln.value:Ln.textContent,v=p.length;for(e=0;e<s&&n[e]===p[e];e++);var I=s-e;for(a=1;a<=I&&n[s-a]===p[v-a];a++);return ci=p.slice(e,1<a?1-a:void 0)}function di(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fi(){return!0}function nd(){return!1}function bt(e){function n(s,a,p,v,I){this._reactName=s,this._targetInst=p,this.type=a,this.nativeEvent=v,this.target=I,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(s=e[V],this[V]=s?s(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?fi:nd,this.isPropagationStopped=nd,this}return R(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),n}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=bt(Br),Bo=R({},Br,{view:0,detail:0}),Rg=bt(Bo),wa,Sa,Wo,pi=R({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wo&&(Wo&&e.type==="mousemove"?(wa=e.screenX-Wo.screenX,Sa=e.screenY-Wo.screenY):Sa=wa=0,Wo=e),wa)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),rd=bt(pi),Fg=R({},pi,{dataTransfer:0}),Hg=bt(Fg),Vg=R({},Bo,{relatedTarget:0}),Na=bt(Vg),Bg=R({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Wg=bt(Bg),Ug=R({},Br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yg=bt(Ug),Xg=R({},Br,{data:0}),od=bt(Xg),Gg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Qg[e])?!!n[e]:!1}function ka(){return qg}var Zg=R({},Bo,{key:function(e){if(e.key){var n=Gg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ka,charCode:function(e){return e.type==="keypress"?di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jg=bt(Zg),ex=R({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=bt(ex),tx=R({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ka}),nx=bt(tx),rx=R({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),ox=bt(rx),sx=R({},pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ix=bt(sx),lx=[9,13,27,32],ja=f&&"CompositionEvent"in window,Uo=null;f&&"documentMode"in document&&(Uo=document.documentMode);var ax=f&&"TextEvent"in window&&!Uo,id=f&&(!ja||Uo&&8<Uo&&11>=Uo),ld=" ",ad=!1;function ud(e,n){switch(e){case"keyup":return lx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wr=!1;function ux(e,n){switch(e){case"compositionend":return cd(n);case"keypress":return n.which!==32?null:(ad=!0,ld);case"textInput":return e=n.data,e===ld&&ad?null:e;default:return null}}function cx(e,n){if(Wr)return e==="compositionend"||!ja&&ud(e,n)?(e=td(),ci=ya=Ln=null,Wr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return id&&n.locale!=="ko"?null:n.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!dx[e.type]:n==="textarea"}function fd(e,n,s,a){Ys(a),n=yi(n,"onChange"),0<n.length&&(s=new va("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Yo=null,Xo=null;function fx(e){_d(e,0)}function mi(e){var n=Kr(e);if(he(n))return e}function px(e,n){if(e==="change")return n}var pd=!1;if(f){var ba;if(f){var Ca="oninput"in document;if(!Ca){var md=document.createElement("div");md.setAttribute("oninput","return;"),Ca=typeof md.oninput=="function"}ba=Ca}else ba=!1;pd=ba&&(!document.documentMode||9<document.documentMode)}function hd(){Yo&&(Yo.detachEvent("onpropertychange",gd),Xo=Yo=null)}function gd(e){if(e.propertyName==="value"&&mi(Xo)){var n=[];fd(n,Xo,e,Eo(e)),Qs(fx,n)}}function mx(e,n,s){e==="focusin"?(hd(),Yo=n,Xo=s,Yo.attachEvent("onpropertychange",gd)):e==="focusout"&&hd()}function hx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mi(Xo)}function gx(e,n){if(e==="click")return mi(n)}function xx(e,n){if(e==="input"||e==="change")return mi(n)}function yx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Wt=typeof Object.is=="function"?Object.is:yx;function Go(e,n){if(Wt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var p=s[a];if(!h.call(n,p)||!Wt(e[p],n[p]))return!1}return!0}function xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,n){var s=xd(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=xd(s)}}function vd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?vd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function wd(){for(var e=window,n=me();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=me(e.document)}return n}function Ia(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function vx(e){var n=wd(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&vd(s.ownerDocument.documentElement,s)){if(a!==null&&Ia(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var p=s.textContent.length,v=Math.min(a.start,p);a=a.end===void 0?v:Math.min(a.end,p),!e.extend&&v>a&&(p=a,a=v,v=p),p=yd(s,v);var I=yd(s,a);p&&I&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(I.node,I.offset)):(n.setEnd(I.node,I.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wx=f&&"documentMode"in document&&11>=document.documentMode,Ur=null,Ea=null,Ko=null,Ma=!1;function Sd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ma||Ur==null||Ur!==me(a)||(a=Ur,"selectionStart"in a&&Ia(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ko&&Go(Ko,a)||(Ko=a,a=yi(Ea,"onSelect"),0<a.length&&(n=new va("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Ur)))}function hi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Yr={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionend:hi("Transition","TransitionEnd")},_a={},Nd={};f&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function gi(e){if(_a[e])return _a[e];if(!Yr[e])return e;var n=Yr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Nd)return _a[e]=n[s];return e}var kd=gi("animationend"),jd=gi("animationiteration"),bd=gi("animationstart"),Cd=gi("transitionend"),Id=new Map,Ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,n){Id.set(e,n),c(n,[e])}for(var Pa=0;Pa<Ed.length;Pa++){var Da=Ed[Pa],Sx=Da.toLowerCase(),Nx=Da[0].toUpperCase()+Da.slice(1);An(Sx,"on"+Nx)}An(kd,"onAnimationEnd"),An(jd,"onAnimationIteration"),An(bd,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(Cd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function Md(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,ra(a,n,void 0,e),e.currentTarget=null}function _d(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],p=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var I=a.length-1;0<=I;I--){var V=a[I],U=V.instance,re=V.currentTarget;if(V=V.listener,U!==v&&p.isPropagationStopped())break e;Md(p,V,re),v=U}else for(I=0;I<a.length;I++){if(V=a[I],U=V.instance,re=V.currentTarget,V=V.listener,U!==v&&p.isPropagationStopped())break e;Md(p,V,re),v=U}}}if(Ar)throw e=Do,Ar=!1,Do=null,e}function ze(e,n){var s=n[Fa];s===void 0&&(s=n[Fa]=new Set);var a=e+"__bubble";s.has(a)||(Pd(n,e,2,!1),s.add(a))}function Ta(e,n,s){var a=0;n&&(a|=4),Pd(s,e,a,n)}var xi="_reactListening"+Math.random().toString(36).slice(2);function qo(e){if(!e[xi]){e[xi]=!0,i.forEach(function(s){s!=="selectionchange"&&(kx.has(s)||Ta(s,!1,e),Ta(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[xi]||(n[xi]=!0,Ta("selectionchange",!1,n))}}function Pd(e,n,s,a){switch(ed(n)){case 1:var p=$g;break;case 4:p=zg;break;default:p=ga}s=p.bind(null,n,s,e),p=void 0,!Po||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function Oa(e,n,s,a,p){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var I=a.tag;if(I===3||I===4){var V=a.stateNode.containerInfo;if(V===p||V.nodeType===8&&V.parentNode===p)break;if(I===4)for(I=a.return;I!==null;){var U=I.tag;if((U===3||U===4)&&(U=I.stateNode.containerInfo,U===p||U.nodeType===8&&U.parentNode===p))return;I=I.return}for(;V!==null;){if(I=ar(V),I===null)return;if(U=I.tag,U===5||U===6){a=v=I;continue e}V=V.parentNode}}a=a.return}Qs(function(){var re=v,ue=Eo(s),de=[];e:{var ae=Id.get(e);if(ae!==void 0){var xe=va,ve=e;switch(e){case"keypress":if(di(s)===0)break e;case"keydown":case"keyup":xe=Jg;break;case"focusin":ve="focus",xe=Na;break;case"focusout":ve="blur",xe=Na;break;case"beforeblur":case"afterblur":xe=Na;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=nx;break;case kd:case jd:case bd:xe=Wg;break;case Cd:xe=ox;break;case"scroll":xe=Rg;break;case"wheel":xe=ix;break;case"copy":case"cut":case"paste":xe=Yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=sd}var we=(n&4)!==0,Ge=!we&&e==="scroll",ee=we?ae!==null?ae+"Capture":null:ae;we=[];for(var K=re,te;K!==null;){te=K;var fe=te.stateNode;if(te.tag===5&&fe!==null&&(te=fe,ee!==null&&(fe=rr(K,ee),fe!=null&&we.push(Zo(K,fe,te)))),Ge)break;K=K.return}0<we.length&&(ae=new xe(ae,ve,null,s,ue),de.push({event:ae,listeners:we}))}}if((n&7)===0){e:{if(ae=e==="mouseover"||e==="pointerover",xe=e==="mouseout"||e==="pointerout",ae&&s!==Io&&(ve=s.relatedTarget||s.fromElement)&&(ar(ve)||ve[xn]))break e;if((xe||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,xe?(ve=s.relatedTarget||s.toElement,xe=re,ve=ve?ar(ve):null,ve!==null&&(Ge=rn(ve),ve!==Ge||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(xe=null,ve=re),xe!==ve)){if(we=rd,fe="onMouseLeave",ee="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&(we=sd,fe="onPointerLeave",ee="onPointerEnter",K="pointer"),Ge=xe==null?ae:Kr(xe),te=ve==null?ae:Kr(ve),ae=new we(fe,K+"leave",xe,s,ue),ae.target=Ge,ae.relatedTarget=te,fe=null,ar(ue)===re&&(we=new we(ee,K+"enter",ve,s,ue),we.target=te,we.relatedTarget=Ge,fe=we),Ge=fe,xe&&ve)t:{for(we=xe,ee=ve,K=0,te=we;te;te=Xr(te))K++;for(te=0,fe=ee;fe;fe=Xr(fe))te++;for(;0<K-te;)we=Xr(we),K--;for(;0<te-K;)ee=Xr(ee),te--;for(;K--;){if(we===ee||ee!==null&&we===ee.alternate)break t;we=Xr(we),ee=Xr(ee)}we=null}else we=null;xe!==null&&Dd(de,ae,xe,we,!1),ve!==null&&Ge!==null&&Dd(de,Ge,ve,we,!0)}}e:{if(ae=re?Kr(re):window,xe=ae.nodeName&&ae.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ae.type==="file")var Se=px;else if(dd(ae))if(pd)Se=xx;else{Se=hx;var je=mx}else(xe=ae.nodeName)&&xe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=gx);if(Se&&(Se=Se(e,re))){fd(de,Se,s,ue);break e}je&&je(e,ae,re),e==="focusout"&&(je=ae._wrapperState)&&je.controlled&&ae.type==="number"&&at(ae,"number",ae.value)}switch(je=re?Kr(re):window,e){case"focusin":(dd(je)||je.contentEditable==="true")&&(Ur=je,Ea=re,Ko=null);break;case"focusout":Ko=Ea=Ur=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,Sd(de,s,ue);break;case"selectionchange":if(wx)break;case"keydown":case"keyup":Sd(de,s,ue)}var be;if(ja)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Wr?ud(e,s)&&(Ce="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ce="onCompositionStart");Ce&&(id&&s.locale!=="ko"&&(Wr||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Wr&&(be=td()):(Ln=ue,ya="value"in Ln?Ln.value:Ln.textContent,Wr=!0)),je=yi(re,Ce),0<je.length&&(Ce=new od(Ce,e,null,s,ue),de.push({event:Ce,listeners:je}),be?Ce.data=be:(be=cd(s),be!==null&&(Ce.data=be)))),(be=ax?ux(e,s):cx(e,s))&&(re=yi(re,"onBeforeInput"),0<re.length&&(ue=new od("onBeforeInput","beforeinput",null,s,ue),de.push({event:ue,listeners:re}),ue.data=be))}_d(de,n)})}function Zo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function yi(e,n){for(var s=n+"Capture",a=[];e!==null;){var p=e,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=rr(e,s),v!=null&&a.unshift(Zo(e,v,p)),v=rr(e,n),v!=null&&a.push(Zo(e,v,p))),e=e.return}return a}function Xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dd(e,n,s,a,p){for(var v=n._reactName,I=[];s!==null&&s!==a;){var V=s,U=V.alternate,re=V.stateNode;if(U!==null&&U===a)break;V.tag===5&&re!==null&&(V=re,p?(U=rr(s,v),U!=null&&I.unshift(Zo(s,U,V))):p||(U=rr(s,v),U!=null&&I.push(Zo(s,U,V)))),s=s.return}I.length!==0&&e.push({event:n,listeners:I})}var jx=/\r\n?/g,bx=/\u0000|\uFFFD/g;function Td(e){return(typeof e=="string"?e:""+e).replace(jx,`
`).replace(bx,"")}function vi(e,n,s){if(n=Td(n),Td(e)!==n&&s)throw Error(o(425))}function wi(){}var La=null,Aa=null;function $a(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var za=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,Ix=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(e){return Od.resolve(null).then(e).catch(Ex)}:za;function Ex(e){setTimeout(function(){throw e})}function Ra(e,n){var s=n,a=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(a===0){e.removeChild(p),Vo(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=p}while(s);Vo(n)}function $n(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ld(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),sn="__reactFiber$"+Gr,Jo="__reactProps$"+Gr,xn="__reactContainer$"+Gr,Fa="__reactEvents$"+Gr,Mx="__reactListeners$"+Gr,_x="__reactHandles$"+Gr;function ar(e){var n=e[sn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[xn]||s[sn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Ld(e);e!==null;){if(s=e[sn])return s;e=Ld(e)}return n}e=s,s=e.parentNode}return null}function es(e){return e=e[sn]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Si(e){return e[Jo]||null}var Ha=[],Qr=-1;function zn(e){return{current:e}}function Re(e){0>Qr||(e.current=Ha[Qr],Ha[Qr]=null,Qr--)}function Ae(e,n){Qr++,Ha[Qr]=e.current,e.current=n}var Rn={},ut=zn(Rn),gt=zn(!1),ur=Rn;function qr(e,n){var s=e.type.contextTypes;if(!s)return Rn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in s)p[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=p),p}function xt(e){return e=e.childContextTypes,e!=null}function Ni(){Re(gt),Re(ut)}function Ad(e,n,s){if(ut.current!==Rn)throw Error(o(168));Ae(ut,n),Ae(gt,s)}function $d(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var p in a)if(!(p in n))throw Error(o(108,le(e)||"Unknown",p));return R({},s,a)}function ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rn,ur=ut.current,Ae(ut,e),Ae(gt,gt.current),!0}function zd(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=$d(e,n,ur),a.__reactInternalMemoizedMergedChildContext=e,Re(gt),Re(ut),Ae(ut,e)):Re(gt),Ae(gt,s)}var yn=null,ji=!1,Va=!1;function Rd(e){yn===null?yn=[e]:yn.push(e)}function Px(e){ji=!0,Rd(e)}function Fn(){if(!Va&&yn!==null){Va=!0;var e=0,n=Te;try{var s=yn;for(Te=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}yn=null,ji=!1}catch(p){throw yn!==null&&(yn=yn.slice(e+1)),Js(Lo,Fn),p}finally{Te=n,Va=!1}}return null}var Zr=[],Jr=0,bi=null,Ci=0,Lt=[],At=0,cr=null,vn=1,wn="";function dr(e,n){Zr[Jr++]=Ci,Zr[Jr++]=bi,bi=e,Ci=n}function Fd(e,n,s){Lt[At++]=vn,Lt[At++]=wn,Lt[At++]=cr,cr=e;var a=vn;e=wn;var p=32-jt(a)-1;a&=~(1<<p),s+=1;var v=32-jt(n)+p;if(30<v){var I=p-p%5;v=(a&(1<<I)-1).toString(32),a>>=I,p-=I,vn=1<<32-jt(n)+p|s<<p|a,wn=v+e}else vn=1<<v|s<<p|a,wn=e}function Ba(e){e.return!==null&&(dr(e,1),Fd(e,1,0))}function Wa(e){for(;e===bi;)bi=Zr[--Jr],Zr[Jr]=null,Ci=Zr[--Jr],Zr[Jr]=null;for(;e===cr;)cr=Lt[--At],Lt[At]=null,wn=Lt[--At],Lt[At]=null,vn=Lt[--At],Lt[At]=null}var Ct=null,It=null,Fe=!1,Ut=null;function Hd(e,n){var s=Ft(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Vd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ct=e,It=$n(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ct=e,It=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=cr!==null?{id:vn,overflow:wn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Ft(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Ct=e,It=null,!0):!1;default:return!1}}function Ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ya(e){if(Fe){var n=It;if(n){var s=n;if(!Vd(e,n)){if(Ua(e))throw Error(o(418));n=$n(s.nextSibling);var a=Ct;n&&Vd(e,n)?Hd(a,s):(e.flags=e.flags&-4097|2,Fe=!1,Ct=e)}}else{if(Ua(e))throw Error(o(418));e.flags=e.flags&-4097|2,Fe=!1,Ct=e}}}function Bd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function Ii(e){if(e!==Ct)return!1;if(!Fe)return Bd(e),Fe=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!$a(e.type,e.memoizedProps)),n&&(n=It)){if(Ua(e))throw Wd(),Error(o(418));for(;n;)Hd(e,n),n=$n(n.nextSibling)}if(Bd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){It=$n(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}It=null}}else It=Ct?$n(e.stateNode.nextSibling):null;return!0}function Wd(){for(var e=It;e;)e=$n(e.nextSibling)}function eo(){It=Ct=null,Fe=!1}function Xa(e){Ut===null?Ut=[e]:Ut.push(e)}var Dx=T.ReactCurrentBatchConfig;function ts(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var p=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(I){var V=p.refs;I===null?delete V[v]:V[v]=I},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function Ei(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Ud(e){var n=e._init;return n(e._payload)}function Yd(e){function n(ee,K){if(e){var te=ee.deletions;te===null?(ee.deletions=[K],ee.flags|=16):te.push(K)}}function s(ee,K){if(!e)return null;for(;K!==null;)n(ee,K),K=K.sibling;return null}function a(ee,K){for(ee=new Map;K!==null;)K.key!==null?ee.set(K.key,K):ee.set(K.index,K),K=K.sibling;return ee}function p(ee,K){return ee=Gn(ee,K),ee.index=0,ee.sibling=null,ee}function v(ee,K,te){return ee.index=te,e?(te=ee.alternate,te!==null?(te=te.index,te<K?(ee.flags|=2,K):te):(ee.flags|=2,K)):(ee.flags|=1048576,K)}function I(ee){return e&&ee.alternate===null&&(ee.flags|=2),ee}function V(ee,K,te,fe){return K===null||K.tag!==6?(K=zu(te,ee.mode,fe),K.return=ee,K):(K=p(K,te),K.return=ee,K)}function U(ee,K,te,fe){var Se=te.type;return Se===B?ue(ee,K,te.props.children,fe,te.key):K!==null&&(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===W&&Ud(Se)===K.type)?(fe=p(K,te.props),fe.ref=ts(ee,K,te),fe.return=ee,fe):(fe=Zi(te.type,te.key,te.props,null,ee.mode,fe),fe.ref=ts(ee,K,te),fe.return=ee,fe)}function re(ee,K,te,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=Ru(te,ee.mode,fe),K.return=ee,K):(K=p(K,te.children||[]),K.return=ee,K)}function ue(ee,K,te,fe,Se){return K===null||K.tag!==7?(K=vr(te,ee.mode,fe,Se),K.return=ee,K):(K=p(K,te),K.return=ee,K)}function de(ee,K,te){if(typeof K=="string"&&K!==""||typeof K=="number")return K=zu(""+K,ee.mode,te),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case M:return te=Zi(K.type,K.key,K.props,null,ee.mode,te),te.ref=ts(ee,null,K),te.return=ee,te;case L:return K=Ru(K,ee.mode,te),K.return=ee,K;case W:var fe=K._init;return de(ee,fe(K._payload),te)}if(Xe(K)||j(K))return K=vr(K,ee.mode,te,null),K.return=ee,K;Ei(ee,K)}return null}function ae(ee,K,te,fe){var Se=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Se!==null?null:V(ee,K,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case M:return te.key===Se?U(ee,K,te,fe):null;case L:return te.key===Se?re(ee,K,te,fe):null;case W:return Se=te._init,ae(ee,K,Se(te._payload),fe)}if(Xe(te)||j(te))return Se!==null?null:ue(ee,K,te,fe,null);Ei(ee,te)}return null}function xe(ee,K,te,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ee=ee.get(te)||null,V(K,ee,""+fe,Se);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return ee=ee.get(fe.key===null?te:fe.key)||null,U(K,ee,fe,Se);case L:return ee=ee.get(fe.key===null?te:fe.key)||null,re(K,ee,fe,Se);case W:var je=fe._init;return xe(ee,K,te,je(fe._payload),Se)}if(Xe(fe)||j(fe))return ee=ee.get(te)||null,ue(K,ee,fe,Se,null);Ei(K,fe)}return null}function ve(ee,K,te,fe){for(var Se=null,je=null,be=K,Ce=K=0,rt=null;be!==null&&Ce<te.length;Ce++){be.index>Ce?(rt=be,be=null):rt=be.sibling;var De=ae(ee,be,te[Ce],fe);if(De===null){be===null&&(be=rt);break}e&&be&&De.alternate===null&&n(ee,be),K=v(De,K,Ce),je===null?Se=De:je.sibling=De,je=De,be=rt}if(Ce===te.length)return s(ee,be),Fe&&dr(ee,Ce),Se;if(be===null){for(;Ce<te.length;Ce++)be=de(ee,te[Ce],fe),be!==null&&(K=v(be,K,Ce),je===null?Se=be:je.sibling=be,je=be);return Fe&&dr(ee,Ce),Se}for(be=a(ee,be);Ce<te.length;Ce++)rt=xe(be,ee,Ce,te[Ce],fe),rt!==null&&(e&&rt.alternate!==null&&be.delete(rt.key===null?Ce:rt.key),K=v(rt,K,Ce),je===null?Se=rt:je.sibling=rt,je=rt);return e&&be.forEach(function(Kn){return n(ee,Kn)}),Fe&&dr(ee,Ce),Se}function we(ee,K,te,fe){var Se=j(te);if(typeof Se!="function")throw Error(o(150));if(te=Se.call(te),te==null)throw Error(o(151));for(var je=Se=null,be=K,Ce=K=0,rt=null,De=te.next();be!==null&&!De.done;Ce++,De=te.next()){be.index>Ce?(rt=be,be=null):rt=be.sibling;var Kn=ae(ee,be,De.value,fe);if(Kn===null){be===null&&(be=rt);break}e&&be&&Kn.alternate===null&&n(ee,be),K=v(Kn,K,Ce),je===null?Se=Kn:je.sibling=Kn,je=Kn,be=rt}if(De.done)return s(ee,be),Fe&&dr(ee,Ce),Se;if(be===null){for(;!De.done;Ce++,De=te.next())De=de(ee,De.value,fe),De!==null&&(K=v(De,K,Ce),je===null?Se=De:je.sibling=De,je=De);return Fe&&dr(ee,Ce),Se}for(be=a(ee,be);!De.done;Ce++,De=te.next())De=xe(be,ee,Ce,De.value,fe),De!==null&&(e&&De.alternate!==null&&be.delete(De.key===null?Ce:De.key),K=v(De,K,Ce),je===null?Se=De:je.sibling=De,je=De);return e&&be.forEach(function(d0){return n(ee,d0)}),Fe&&dr(ee,Ce),Se}function Ge(ee,K,te,fe){if(typeof te=="object"&&te!==null&&te.type===B&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case M:e:{for(var Se=te.key,je=K;je!==null;){if(je.key===Se){if(Se=te.type,Se===B){if(je.tag===7){s(ee,je.sibling),K=p(je,te.props.children),K.return=ee,ee=K;break e}}else if(je.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===W&&Ud(Se)===je.type){s(ee,je.sibling),K=p(je,te.props),K.ref=ts(ee,je,te),K.return=ee,ee=K;break e}s(ee,je);break}else n(ee,je);je=je.sibling}te.type===B?(K=vr(te.props.children,ee.mode,fe,te.key),K.return=ee,ee=K):(fe=Zi(te.type,te.key,te.props,null,ee.mode,fe),fe.ref=ts(ee,K,te),fe.return=ee,ee=fe)}return I(ee);case L:e:{for(je=te.key;K!==null;){if(K.key===je)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){s(ee,K.sibling),K=p(K,te.children||[]),K.return=ee,ee=K;break e}else{s(ee,K);break}else n(ee,K);K=K.sibling}K=Ru(te,ee.mode,fe),K.return=ee,ee=K}return I(ee);case W:return je=te._init,Ge(ee,K,je(te._payload),fe)}if(Xe(te))return ve(ee,K,te,fe);if(j(te))return we(ee,K,te,fe);Ei(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,K!==null&&K.tag===6?(s(ee,K.sibling),K=p(K,te),K.return=ee,ee=K):(s(ee,K),K=zu(te,ee.mode,fe),K.return=ee,ee=K),I(ee)):s(ee,K)}return Ge}var to=Yd(!0),Xd=Yd(!1),Mi=zn(null),_i=null,no=null,Ga=null;function Ka(){Ga=no=_i=null}function Qa(e){var n=Mi.current;Re(Mi),e._currentValue=n}function qa(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function ro(e,n){_i=e,Ga=no=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(yt=!0),e.firstContext=null)}function $t(e){var n=e._currentValue;if(Ga!==e)if(e={context:e,memoizedValue:n,next:null},no===null){if(_i===null)throw Error(o(308));no=e,_i.dependencies={lanes:0,firstContext:e}}else no=no.next=e;return n}var fr=null;function Za(e){fr===null?fr=[e]:fr.push(e)}function Gd(e,n,s,a){var p=n.interleaved;return p===null?(s.next=s,Za(n)):(s.next=p.next,p.next=s),n.interleaved=s,Sn(e,a)}function Sn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Hn=!1;function Ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Vn(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Pe&2)!==0){var p=a.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),a.pending=n,Sn(e,s)}return p=a.interleaved,p===null?(n.next=n,Za(a)):(n.next=p.next,p.next=n),a.interleaved=n,Sn(e,s)}function Pi(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,pa(e,s)}}function Qd(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var p=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var I={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?p=v=I:v=v.next=I,s=s.next}while(s!==null);v===null?p=v=n:v=v.next=n}else p=v=n;s={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Di(e,n,s,a){var p=e.updateQueue;Hn=!1;var v=p.firstBaseUpdate,I=p.lastBaseUpdate,V=p.shared.pending;if(V!==null){p.shared.pending=null;var U=V,re=U.next;U.next=null,I===null?v=re:I.next=re,I=U;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,V=ue.lastBaseUpdate,V!==I&&(V===null?ue.firstBaseUpdate=re:V.next=re,ue.lastBaseUpdate=U))}if(v!==null){var de=p.baseState;I=0,ue=re=U=null,V=v;do{var ae=V.lane,xe=V.eventTime;if((a&ae)===ae){ue!==null&&(ue=ue.next={eventTime:xe,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var ve=e,we=V;switch(ae=n,xe=s,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){de=ve.call(xe,de,ae);break e}de=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,ae=typeof ve=="function"?ve.call(xe,de,ae):ve,ae==null)break e;de=R({},de,ae);break e;case 2:Hn=!0}}V.callback!==null&&V.lane!==0&&(e.flags|=64,ae=p.effects,ae===null?p.effects=[V]:ae.push(V))}else xe={eventTime:xe,lane:ae,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ue===null?(re=ue=xe,U=de):ue=ue.next=xe,I|=ae;if(V=V.next,V===null){if(V=p.shared.pending,V===null)break;ae=V,V=ae.next,ae.next=null,p.lastBaseUpdate=ae,p.shared.pending=null}}while(!0);if(ue===null&&(U=de),p.baseState=U,p.firstBaseUpdate=re,p.lastBaseUpdate=ue,n=p.shared.interleaved,n!==null){p=n;do I|=p.lane,p=p.next;while(p!==n)}else v===null&&(p.shared.lanes=0);hr|=I,e.lanes=I,e.memoizedState=de}}function qd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],p=a.callback;if(p!==null){if(a.callback=null,a=s,typeof p!="function")throw Error(o(191,p));p.call(a)}}}var ns={},ln=zn(ns),rs=zn(ns),os=zn(ns);function pr(e){if(e===ns)throw Error(o(174));return e}function eu(e,n){switch(Ae(os,n),Ae(rs,e),Ae(ln,ns),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:hn(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=hn(n,e)}Re(ln),Ae(ln,n)}function oo(){Re(ln),Re(rs),Re(os)}function Zd(e){pr(os.current);var n=pr(ln.current),s=hn(n,e.type);n!==s&&(Ae(rs,e),Ae(ln,s))}function tu(e){rs.current===e&&(Re(ln),Re(rs))}var We=zn(0);function Ti(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var nu=[];function ru(){for(var e=0;e<nu.length;e++)nu[e]._workInProgressVersionPrimary=null;nu.length=0}var Oi=T.ReactCurrentDispatcher,ou=T.ReactCurrentBatchConfig,mr=0,Ue=null,Ze=null,tt=null,Li=!1,ss=!1,is=0,Tx=0;function ct(){throw Error(o(321))}function su(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Wt(e[s],n[s]))return!1;return!0}function iu(e,n,s,a,p,v){if(mr=v,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Oi.current=e===null||e.memoizedState===null?$x:zx,e=s(a,p),ss){v=0;do{if(ss=!1,is=0,25<=v)throw Error(o(301));v+=1,tt=Ze=null,n.updateQueue=null,Oi.current=Rx,e=s(a,p)}while(ss)}if(Oi.current=zi,n=Ze!==null&&Ze.next!==null,mr=0,tt=Ze=Ue=null,Li=!1,n)throw Error(o(300));return e}function lu(){var e=is!==0;return is=0,e}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ue.memoizedState=tt=e:tt=tt.next=e,tt}function zt(){if(Ze===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var n=tt===null?Ue.memoizedState:tt.next;if(n!==null)tt=n,Ze=e;else{if(e===null)throw Error(o(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},tt===null?Ue.memoizedState=tt=e:tt=tt.next=e}return tt}function ls(e,n){return typeof n=="function"?n(e):n}function au(e){var n=zt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Ze,p=a.baseQueue,v=s.pending;if(v!==null){if(p!==null){var I=p.next;p.next=v.next,v.next=I}a.baseQueue=p=v,s.pending=null}if(p!==null){v=p.next,a=a.baseState;var V=I=null,U=null,re=v;do{var ue=re.lane;if((mr&ue)===ue)U!==null&&(U=U.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),a=re.hasEagerState?re.eagerState:e(a,re.action);else{var de={lane:ue,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};U===null?(V=U=de,I=a):U=U.next=de,Ue.lanes|=ue,hr|=ue}re=re.next}while(re!==null&&re!==v);U===null?I=a:U.next=V,Wt(a,n.memoizedState)||(yt=!0),n.memoizedState=a,n.baseState=I,n.baseQueue=U,s.lastRenderedState=a}if(e=s.interleaved,e!==null){p=e;do v=p.lane,Ue.lanes|=v,hr|=v,p=p.next;while(p!==e)}else p===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function uu(e){var n=zt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,p=s.pending,v=n.memoizedState;if(p!==null){s.pending=null;var I=p=p.next;do v=e(v,I.action),I=I.next;while(I!==p);Wt(v,n.memoizedState)||(yt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function Jd(){}function ef(e,n){var s=Ue,a=zt(),p=n(),v=!Wt(a.memoizedState,p);if(v&&(a.memoizedState=p,yt=!0),a=a.queue,cu(rf.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||tt!==null&&tt.memoizedState.tag&1){if(s.flags|=2048,as(9,nf.bind(null,s,a,p,n),void 0,null),nt===null)throw Error(o(349));(mr&30)!==0||tf(s,n,p)}return p}function tf(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ue.updateQueue,n===null?(n={lastEffect:null,stores:null},Ue.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function nf(e,n,s,a){n.value=s,n.getSnapshot=a,of(n)&&sf(e)}function rf(e,n,s){return s(function(){of(n)&&sf(e)})}function of(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Wt(e,s)}catch{return!0}}function sf(e){var n=Sn(e,1);n!==null&&Kt(n,e,1,-1)}function lf(e){var n=an();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:e},n.queue=e,e=e.dispatch=Ax.bind(null,Ue,e),[n.memoizedState,e]}function as(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Ue.updateQueue,n===null?(n={lastEffect:null,stores:null},Ue.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function af(){return zt().memoizedState}function Ai(e,n,s,a){var p=an();Ue.flags|=e,p.memoizedState=as(1|n,s,void 0,a===void 0?null:a)}function $i(e,n,s,a){var p=zt();a=a===void 0?null:a;var v=void 0;if(Ze!==null){var I=Ze.memoizedState;if(v=I.destroy,a!==null&&su(a,I.deps)){p.memoizedState=as(n,s,v,a);return}}Ue.flags|=e,p.memoizedState=as(1|n,s,v,a)}function uf(e,n){return Ai(8390656,8,e,n)}function cu(e,n){return $i(2048,8,e,n)}function cf(e,n){return $i(4,2,e,n)}function df(e,n){return $i(4,4,e,n)}function ff(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function pf(e,n,s){return s=s!=null?s.concat([e]):null,$i(4,4,ff.bind(null,n,e),s)}function du(){}function mf(e,n){var s=zt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&su(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function hf(e,n){var s=zt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&su(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function gf(e,n,s){return(mr&21)===0?(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=s):(Wt(s,n)||(s=Hr(),Ue.lanes|=s,hr|=s,e.baseState=!0),n)}function Ox(e,n){var s=Te;Te=s!==0&&4>s?s:4,e(!0);var a=ou.transition;ou.transition={};try{e(!1),n()}finally{Te=s,ou.transition=a}}function xf(){return zt().memoizedState}function Lx(e,n,s){var a=Yn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},yf(e))vf(n,s);else if(s=Gd(e,n,s,a),s!==null){var p=mt();Kt(s,e,a,p),wf(s,n,a)}}function Ax(e,n,s){var a=Yn(e),p={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(yf(e))vf(n,p);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var I=n.lastRenderedState,V=v(I,s);if(p.hasEagerState=!0,p.eagerState=V,Wt(V,I)){var U=n.interleaved;U===null?(p.next=p,Za(n)):(p.next=U.next,U.next=p),n.interleaved=p;return}}catch{}finally{}s=Gd(e,n,p,a),s!==null&&(p=mt(),Kt(s,e,a,p),wf(s,n,a))}}function yf(e){var n=e.alternate;return e===Ue||n!==null&&n===Ue}function vf(e,n){ss=Li=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function wf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,pa(e,s)}}var zi={readContext:$t,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},$x={readContext:$t,useCallback:function(e,n){return an().memoizedState=[e,n===void 0?null:n],e},useContext:$t,useEffect:uf,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Ai(4194308,4,ff.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Ai(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ai(4,2,e,n)},useMemo:function(e,n){var s=an();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=an();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Lx.bind(null,Ue,e),[a.memoizedState,e]},useRef:function(e){var n=an();return e={current:e},n.memoizedState=e},useState:lf,useDebugValue:du,useDeferredValue:function(e){return an().memoizedState=e},useTransition:function(){var e=lf(!1),n=e[0];return e=Ox.bind(null,e[1]),an().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Ue,p=an();if(Fe){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),nt===null)throw Error(o(349));(mr&30)!==0||tf(a,n,s)}p.memoizedState=s;var v={value:s,getSnapshot:n};return p.queue=v,uf(rf.bind(null,a,v,e),[e]),a.flags|=2048,as(9,nf.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=an(),n=nt.identifierPrefix;if(Fe){var s=wn,a=vn;s=(a&~(1<<32-jt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=is++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Tx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},zx={readContext:$t,useCallback:mf,useContext:$t,useEffect:cu,useImperativeHandle:pf,useInsertionEffect:cf,useLayoutEffect:df,useMemo:hf,useReducer:au,useRef:af,useState:function(){return au(ls)},useDebugValue:du,useDeferredValue:function(e){var n=zt();return gf(n,Ze.memoizedState,e)},useTransition:function(){var e=au(ls)[0],n=zt().memoizedState;return[e,n]},useMutableSource:Jd,useSyncExternalStore:ef,useId:xf,unstable_isNewReconciler:!1},Rx={readContext:$t,useCallback:mf,useContext:$t,useEffect:cu,useImperativeHandle:pf,useInsertionEffect:cf,useLayoutEffect:df,useMemo:hf,useReducer:uu,useRef:af,useState:function(){return uu(ls)},useDebugValue:du,useDeferredValue:function(e){var n=zt();return Ze===null?n.memoizedState=e:gf(n,Ze.memoizedState,e)},useTransition:function(){var e=uu(ls)[0],n=zt().memoizedState;return[e,n]},useMutableSource:Jd,useSyncExternalStore:ef,useId:xf,unstable_isNewReconciler:!1};function Yt(e,n){if(e&&e.defaultProps){n=R({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function fu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:R({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ri={isMounted:function(e){return(e=e._reactInternals)?rn(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=mt(),p=Yn(e),v=Nn(a,p);v.payload=n,s!=null&&(v.callback=s),n=Vn(e,v,p),n!==null&&(Kt(n,e,p,a),Pi(n,e,p))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=mt(),p=Yn(e),v=Nn(a,p);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=Vn(e,v,p),n!==null&&(Kt(n,e,p,a),Pi(n,e,p))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=mt(),a=Yn(e),p=Nn(s,a);p.tag=2,n!=null&&(p.callback=n),n=Vn(e,p,a),n!==null&&(Kt(n,e,a,s),Pi(n,e,a))}};function Sf(e,n,s,a,p,v,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,I):n.prototype&&n.prototype.isPureReactComponent?!Go(s,a)||!Go(p,v):!0}function Nf(e,n,s){var a=!1,p=Rn,v=n.contextType;return typeof v=="object"&&v!==null?v=$t(v):(p=xt(n)?ur:ut.current,a=n.contextTypes,v=(a=a!=null)?qr(e,p):Rn),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ri,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=v),n}function kf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&Ri.enqueueReplaceState(n,n.state,null)}function pu(e,n,s,a){var p=e.stateNode;p.props=s,p.state=e.memoizedState,p.refs={},Ja(e);var v=n.contextType;typeof v=="object"&&v!==null?p.context=$t(v):(v=xt(n)?ur:ut.current,p.context=qr(e,v)),p.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(fu(e,n,v,s),p.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&Ri.enqueueReplaceState(p,p.state,null),Di(e,s,p,a),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function so(e,n){try{var s="",a=n;do s+=oe(a),a=a.return;while(a);var p=s}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:p,digest:null}}function mu(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function hu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Fx=typeof WeakMap=="function"?WeakMap:Map;function jf(e,n,s){s=Nn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){Yi||(Yi=!0,_u=a),hu(e,n)},s}function bf(e,n,s){s=Nn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var p=n.value;s.payload=function(){return a(p)},s.callback=function(){hu(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){hu(e,n),typeof a!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var I=n.stack;this.componentDidCatch(n.value,{componentStack:I!==null?I:""})}),s}function Cf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Fx;var p=new Set;a.set(n,p)}else p=a.get(n),p===void 0&&(p=new Set,a.set(n,p));p.has(s)||(p.add(s),e=e0.bind(null,e,n,s),n.then(e,e))}function If(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Ef(e,n,s,a,p){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Nn(-1,1),n.tag=2,Vn(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var Hx=T.ReactCurrentOwner,yt=!1;function pt(e,n,s,a){n.child=e===null?Xd(n,null,s,a):to(n,e.child,s,a)}function Mf(e,n,s,a,p){s=s.render;var v=n.ref;return ro(n,p),a=iu(e,n,s,a,v,p),s=lu(),e!==null&&!yt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,kn(e,n,p)):(Fe&&s&&Ba(n),n.flags|=1,pt(e,n,a,p),n.child)}function _f(e,n,s,a,p){if(e===null){var v=s.type;return typeof v=="function"&&!$u(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,Pf(e,n,v,a,p)):(e=Zi(s.type,null,a,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&p)===0){var I=v.memoizedProps;if(s=s.compare,s=s!==null?s:Go,s(I,a)&&e.ref===n.ref)return kn(e,n,p)}return n.flags|=1,e=Gn(v,a),e.ref=n.ref,e.return=n,n.child=e}function Pf(e,n,s,a,p){if(e!==null){var v=e.memoizedProps;if(Go(v,a)&&e.ref===n.ref)if(yt=!1,n.pendingProps=a=v,(e.lanes&p)!==0)(e.flags&131072)!==0&&(yt=!0);else return n.lanes=e.lanes,kn(e,n,p)}return gu(e,n,s,a,p)}function Df(e,n,s){var a=n.pendingProps,p=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(lo,Et),Et|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ae(lo,Et),Et|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Ae(lo,Et),Et|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Ae(lo,Et),Et|=a;return pt(e,n,p,s),n.child}function Tf(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function gu(e,n,s,a,p){var v=xt(s)?ur:ut.current;return v=qr(n,v),ro(n,p),s=iu(e,n,s,a,v,p),a=lu(),e!==null&&!yt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,kn(e,n,p)):(Fe&&a&&Ba(n),n.flags|=1,pt(e,n,s,p),n.child)}function Of(e,n,s,a,p){if(xt(s)){var v=!0;ki(n)}else v=!1;if(ro(n,p),n.stateNode===null)Hi(e,n),Nf(n,s,a),pu(n,s,a,p),a=!0;else if(e===null){var I=n.stateNode,V=n.memoizedProps;I.props=V;var U=I.context,re=s.contextType;typeof re=="object"&&re!==null?re=$t(re):(re=xt(s)?ur:ut.current,re=qr(n,re));var ue=s.getDerivedStateFromProps,de=typeof ue=="function"||typeof I.getSnapshotBeforeUpdate=="function";de||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==a||U!==re)&&kf(n,I,a,re),Hn=!1;var ae=n.memoizedState;I.state=ae,Di(n,a,I,p),U=n.memoizedState,V!==a||ae!==U||gt.current||Hn?(typeof ue=="function"&&(fu(n,s,ue,a),U=n.memoizedState),(V=Hn||Sf(n,s,V,a,ae,U,re))?(de||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(n.flags|=4194308)):(typeof I.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=U),I.props=a,I.state=U,I.context=re,a=V):(typeof I.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{I=n.stateNode,Kd(e,n),V=n.memoizedProps,re=n.type===n.elementType?V:Yt(n.type,V),I.props=re,de=n.pendingProps,ae=I.context,U=s.contextType,typeof U=="object"&&U!==null?U=$t(U):(U=xt(s)?ur:ut.current,U=qr(n,U));var xe=s.getDerivedStateFromProps;(ue=typeof xe=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==de||ae!==U)&&kf(n,I,a,U),Hn=!1,ae=n.memoizedState,I.state=ae,Di(n,a,I,p);var ve=n.memoizedState;V!==de||ae!==ve||gt.current||Hn?(typeof xe=="function"&&(fu(n,s,xe,a),ve=n.memoizedState),(re=Hn||Sf(n,s,re,a,ae,ve,U)||!1)?(ue||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(a,ve,U),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(a,ve,U)),typeof I.componentDidUpdate=="function"&&(n.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof I.componentDidUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=ve),I.props=a,I.state=ve,I.context=U,a=re):(typeof I.componentDidUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),a=!1)}return xu(e,n,s,a,v,p)}function xu(e,n,s,a,p,v){Tf(e,n);var I=(n.flags&128)!==0;if(!a&&!I)return p&&zd(n,s,!1),kn(e,n,v);a=n.stateNode,Hx.current=n;var V=I&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&I?(n.child=to(n,e.child,null,v),n.child=to(n,null,V,v)):pt(e,n,V,v),n.memoizedState=a.state,p&&zd(n,s,!0),n.child}function Lf(e){var n=e.stateNode;n.pendingContext?Ad(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ad(e,n.context,!1),eu(e,n.containerInfo)}function Af(e,n,s,a,p){return eo(),Xa(p),n.flags|=256,pt(e,n,s,a),n.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function vu(e){return{baseLanes:e,cachePool:null,transitions:null}}function $f(e,n,s){var a=n.pendingProps,p=We.current,v=!1,I=(n.flags&128)!==0,V;if((V=I)||(V=e!==null&&e.memoizedState===null?!1:(p&2)!==0),V?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),Ae(We,p&1),e===null)return Ya(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(I=a.children,e=a.fallback,v?(a=n.mode,v=n.child,I={mode:"hidden",children:I},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=I):v=Ji(I,a,0,null),e=vr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=vu(s),n.memoizedState=yu,e):wu(n,I));if(p=e.memoizedState,p!==null&&(V=p.dehydrated,V!==null))return Vx(e,n,I,a,V,p,s);if(v){v=a.fallback,I=n.mode,p=e.child,V=p.sibling;var U={mode:"hidden",children:a.children};return(I&1)===0&&n.child!==p?(a=n.child,a.childLanes=0,a.pendingProps=U,n.deletions=null):(a=Gn(p,U),a.subtreeFlags=p.subtreeFlags&14680064),V!==null?v=Gn(V,v):(v=vr(v,I,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,I=e.child.memoizedState,I=I===null?vu(s):{baseLanes:I.baseLanes|s,cachePool:null,transitions:I.transitions},v.memoizedState=I,v.childLanes=e.childLanes&~s,n.memoizedState=yu,a}return v=e.child,e=v.sibling,a=Gn(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function wu(e,n){return n=Ji({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Fi(e,n,s,a){return a!==null&&Xa(a),to(n,e.child,null,s),e=wu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Vx(e,n,s,a,p,v,I){if(s)return n.flags&256?(n.flags&=-257,a=mu(Error(o(422))),Fi(e,n,I,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,p=n.mode,a=Ji({mode:"visible",children:a.children},p,0,null),v=vr(v,p,I,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&to(n,e.child,null,I),n.child.memoizedState=vu(I),n.memoizedState=yu,v);if((n.mode&1)===0)return Fi(e,n,I,null);if(p.data==="$!"){if(a=p.nextSibling&&p.nextSibling.dataset,a)var V=a.dgst;return a=V,v=Error(o(419)),a=mu(v,a,void 0),Fi(e,n,I,a)}if(V=(I&e.childLanes)!==0,yt||V){if(a=nt,a!==null){switch(I&-I){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(a.suspendedLanes|I))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,Sn(e,p),Kt(a,e,p,-1))}return Au(),a=mu(Error(o(421))),Fi(e,n,I,a)}return p.data==="$?"?(n.flags|=128,n.child=e.child,n=t0.bind(null,e),p._reactRetry=n,null):(e=v.treeContext,It=$n(p.nextSibling),Ct=n,Fe=!0,Ut=null,e!==null&&(Lt[At++]=vn,Lt[At++]=wn,Lt[At++]=cr,vn=e.id,wn=e.overflow,cr=n),n=wu(n,a.children),n.flags|=4096,n)}function zf(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),qa(e.return,n,s)}function Su(e,n,s,a,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=p)}function Rf(e,n,s){var a=n.pendingProps,p=a.revealOrder,v=a.tail;if(pt(e,n,a.children,s),a=We.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zf(e,s,n);else if(e.tag===19)zf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ae(We,a),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&Ti(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),Su(n,!1,p,s,v);break;case"backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&Ti(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}Su(n,!0,s,null,v);break;case"together":Su(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hi(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function kn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),hr|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Gn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Gn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Bx(e,n,s){switch(n.tag){case 3:Lf(n),eo();break;case 5:Zd(n);break;case 1:xt(n.type)&&ki(n);break;case 4:eu(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,p=n.memoizedProps.value;Ae(Mi,a._currentValue),a._currentValue=p;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Ae(We,We.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?$f(e,n,s):(Ae(We,We.current&1),e=kn(e,n,s),e!==null?e.sibling:null);Ae(We,We.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return Rf(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ae(We,We.current),a)break;return null;case 22:case 23:return n.lanes=0,Df(e,n,s)}return kn(e,n,s)}var Ff,Nu,Hf,Vf;Ff=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Nu=function(){},Hf=function(e,n,s,a){var p=e.memoizedProps;if(p!==a){e=n.stateNode,pr(ln.current);var v=null;switch(s){case"input":p=ke(e,p),a=ke(e,a),v=[];break;case"select":p=R({},p,{value:void 0}),a=R({},a,{value:void 0}),v=[];break;case"textarea":p=ot(e,p),a=ot(e,a),v=[];break;default:typeof p.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=wi)}bo(s,a);var I;s=null;for(re in p)if(!a.hasOwnProperty(re)&&p.hasOwnProperty(re)&&p[re]!=null)if(re==="style"){var V=p[re];for(I in V)V.hasOwnProperty(I)&&(s||(s={}),s[I]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(l.hasOwnProperty(re)?v||(v=[]):(v=v||[]).push(re,null));for(re in a){var U=a[re];if(V=p!=null?p[re]:void 0,a.hasOwnProperty(re)&&U!==V&&(U!=null||V!=null))if(re==="style")if(V){for(I in V)!V.hasOwnProperty(I)||U&&U.hasOwnProperty(I)||(s||(s={}),s[I]="");for(I in U)U.hasOwnProperty(I)&&V[I]!==U[I]&&(s||(s={}),s[I]=U[I])}else s||(v||(v=[]),v.push(re,s)),s=U;else re==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,V=V?V.__html:void 0,U!=null&&V!==U&&(v=v||[]).push(re,U)):re==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(re,""+U):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(l.hasOwnProperty(re)?(U!=null&&re==="onScroll"&&ze("scroll",e),v||V===U||(v=[])):(v=v||[]).push(re,U))}s&&(v=v||[]).push("style",s);var re=v;(n.updateQueue=re)&&(n.flags|=4)}},Vf=function(e,n,s,a){s!==a&&(n.flags|=4)};function us(e,n){if(!Fe)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function dt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags&14680064,a|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function Wx(e,n,s){var a=n.pendingProps;switch(Wa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(n),null;case 1:return xt(n.type)&&Ni(),dt(n),null;case 3:return a=n.stateNode,oo(),Re(gt),Re(ut),ru(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ii(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ut!==null&&(Tu(Ut),Ut=null))),Nu(e,n),dt(n),null;case 5:tu(n);var p=pr(os.current);if(s=n.type,e!==null&&n.stateNode!=null)Hf(e,n,s,a,p),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return dt(n),null}if(e=pr(ln.current),Ii(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[sn]=n,a[Jo]=v,e=(n.mode&1)!==0,s){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(p=0;p<Qo.length;p++)ze(Qo[p],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":Ie(a,v),ze("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},ze("invalid",a);break;case"textarea":Dt(a,v),ze("invalid",a)}bo(s,v),p=null;for(var I in v)if(v.hasOwnProperty(I)){var V=v[I];I==="children"?typeof V=="string"?a.textContent!==V&&(v.suppressHydrationWarning!==!0&&vi(a.textContent,V,e),p=["children",V]):typeof V=="number"&&a.textContent!==""+V&&(v.suppressHydrationWarning!==!0&&vi(a.textContent,V,e),p=["children",""+V]):l.hasOwnProperty(I)&&V!=null&&I==="onScroll"&&ze("scroll",a)}switch(s){case"input":pe(a),et(a,v,!0);break;case"textarea":pe(a),Bt(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=wi)}a=p,n.updateQueue=a,a!==null&&(n.flags|=4)}else{I=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=st(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=I.createElement(s,{is:a.is}):(e=I.createElement(s),s==="select"&&(I=e,a.multiple?I.multiple=!0:a.size&&(I.size=a.size))):e=I.createElementNS(e,s),e[sn]=n,e[Jo]=a,Ff(e,n,!1,!1),n.stateNode=e;e:{switch(I=Co(s,a),s){case"dialog":ze("cancel",e),ze("close",e),p=a;break;case"iframe":case"object":case"embed":ze("load",e),p=a;break;case"video":case"audio":for(p=0;p<Qo.length;p++)ze(Qo[p],e);p=a;break;case"source":ze("error",e),p=a;break;case"img":case"image":case"link":ze("error",e),ze("load",e),p=a;break;case"details":ze("toggle",e),p=a;break;case"input":Ie(e,a),p=ke(e,a),ze("invalid",e);break;case"option":p=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},p=R({},a,{value:void 0}),ze("invalid",e);break;case"textarea":Dt(e,a),p=ot(e,a),ze("invalid",e);break;default:p=a}bo(s,p),V=p;for(v in V)if(V.hasOwnProperty(v)){var U=V[v];v==="style"?Ws(e,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Vs(e,U)):v==="children"?typeof U=="string"?(s!=="textarea"||U!=="")&&gn(e,U):typeof U=="number"&&gn(e,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?U!=null&&v==="onScroll"&&ze("scroll",e):U!=null&&k(e,v,U,I))}switch(s){case"input":pe(e),et(e,a,!1);break;case"textarea":pe(e),Bt(e);break;case"option":a.value!=null&&e.setAttribute("value",""+se(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?Ke(e,!!a.multiple,v,!1):a.defaultValue!=null&&Ke(e,!!a.multiple,a.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=wi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return dt(n),null;case 6:if(e&&n.stateNode!=null)Vf(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=pr(os.current),pr(ln.current),Ii(n)){if(a=n.stateNode,s=n.memoizedProps,a[sn]=n,(v=a.nodeValue!==s)&&(e=Ct,e!==null))switch(e.tag){case 3:vi(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vi(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[sn]=n,n.stateNode=a}return dt(n),null;case 13:if(Re(We),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&It!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Wd(),eo(),n.flags|=98560,v=!1;else if(v=Ii(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[sn]=n}else eo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;dt(n),v=!1}else Ut!==null&&(Tu(Ut),Ut=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(We.current&1)!==0?Je===0&&(Je=3):Au())),n.updateQueue!==null&&(n.flags|=4),dt(n),null);case 4:return oo(),Nu(e,n),e===null&&qo(n.stateNode.containerInfo),dt(n),null;case 10:return Qa(n.type._context),dt(n),null;case 17:return xt(n.type)&&Ni(),dt(n),null;case 19:if(Re(We),v=n.memoizedState,v===null)return dt(n),null;if(a=(n.flags&128)!==0,I=v.rendering,I===null)if(a)us(v,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(I=Ti(e),I!==null){for(n.flags|=128,us(v,!1),a=I.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,e=I.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ae(We,We.current&1|2),n.child}e=e.sibling}v.tail!==null&&Be()>ao&&(n.flags|=128,a=!0,us(v,!1),n.lanes=4194304)}else{if(!a)if(e=Ti(I),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),us(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!Fe)return dt(n),null}else 2*Be()-v.renderingStartTime>ao&&s!==1073741824&&(n.flags|=128,a=!0,us(v,!1),n.lanes=4194304);v.isBackwards?(I.sibling=n.child,n.child=I):(s=v.last,s!==null?s.sibling=I:n.child=I,v.last=I)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Be(),n.sibling=null,s=We.current,Ae(We,a?s&1|2:s&1),n):(dt(n),null);case 22:case 23:return Lu(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(Et&1073741824)!==0&&(dt(n),n.subtreeFlags&6&&(n.flags|=8192)):dt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Ux(e,n){switch(Wa(n),n.tag){case 1:return xt(n.type)&&Ni(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return oo(),Re(gt),Re(ut),ru(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return tu(n),null;case 13:if(Re(We),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));eo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Re(We),null;case 4:return oo(),null;case 10:return Qa(n.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var Vi=!1,ft=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,ye=null;function io(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Ye(e,n,a)}else s.current=null}function ku(e,n,s){try{s()}catch(a){Ye(e,n,a)}}var Bf=!1;function Xx(e,n){if(La=ai,e=wd(),Ia(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var p=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var I=0,V=-1,U=-1,re=0,ue=0,de=e,ae=null;t:for(;;){for(var xe;de!==s||p!==0&&de.nodeType!==3||(V=I+p),de!==v||a!==0&&de.nodeType!==3||(U=I+a),de.nodeType===3&&(I+=de.nodeValue.length),(xe=de.firstChild)!==null;)ae=de,de=xe;for(;;){if(de===e)break t;if(ae===s&&++re===p&&(V=I),ae===v&&++ue===a&&(U=I),(xe=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=xe}s=V===-1||U===-1?null:{start:V,end:U}}else s=null}s=s||{start:0,end:0}}else s=null;for(Aa={focusedElem:e,selectionRange:s},ai=!1,ye=n;ye!==null;)if(n=ye,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ye=e;else for(;ye!==null;){n=ye;try{var ve=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,Ge=ve.memoizedState,ee=n.stateNode,K=ee.getSnapshotBeforeUpdate(n.elementType===n.type?we:Yt(n.type,we),Ge);ee.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var te=n.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){Ye(n,n.return,fe)}if(e=n.sibling,e!==null){e.return=n.return,ye=e;break}ye=n.return}return ve=Bf,Bf=!1,ve}function cs(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&e)===e){var v=p.destroy;p.destroy=void 0,v!==void 0&&ku(n,s,v)}p=p.next}while(p!==a)}}function Bi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function ju(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Wf(e){var n=e.alternate;n!==null&&(e.alternate=null,Wf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[sn],delete n[Jo],delete n[Fa],delete n[Mx],delete n[_x])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uf(e){return e.tag===5||e.tag===3||e.tag===4}function Yf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=wi));else if(a!==4&&(e=e.child,e!==null))for(bu(e,n,s),e=e.sibling;e!==null;)bu(e,n,s),e=e.sibling}function Cu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Cu(e,n,s),e=e.sibling;e!==null;)Cu(e,n,s),e=e.sibling}var it=null,Xt=!1;function Bn(e,n,s){for(s=s.child;s!==null;)Xf(e,n,s),s=s.sibling}function Xf(e,n,s){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(ir,s)}catch{}switch(s.tag){case 5:ft||io(s,n);case 6:var a=it,p=Xt;it=null,Bn(e,n,s),it=a,Xt=p,it!==null&&(Xt?(e=it,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):it.removeChild(s.stateNode));break;case 18:it!==null&&(Xt?(e=it,s=s.stateNode,e.nodeType===8?Ra(e.parentNode,s):e.nodeType===1&&Ra(e,s),Vo(e)):Ra(it,s.stateNode));break;case 4:a=it,p=Xt,it=s.stateNode.containerInfo,Xt=!0,Bn(e,n,s),it=a,Xt=p;break;case 0:case 11:case 14:case 15:if(!ft&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){p=a=a.next;do{var v=p,I=v.destroy;v=v.tag,I!==void 0&&((v&2)!==0||(v&4)!==0)&&ku(s,n,I),p=p.next}while(p!==a)}Bn(e,n,s);break;case 1:if(!ft&&(io(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(V){Ye(s,n,V)}Bn(e,n,s);break;case 21:Bn(e,n,s);break;case 22:s.mode&1?(ft=(a=ft)||s.memoizedState!==null,Bn(e,n,s),ft=a):Bn(e,n,s);break;default:Bn(e,n,s)}}function Gf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Yx),n.forEach(function(a){var p=n0.bind(null,e,a);s.has(a)||(s.add(a),a.then(p,p))})}}function Gt(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var p=s[a];try{var v=e,I=n,V=I;e:for(;V!==null;){switch(V.tag){case 5:it=V.stateNode,Xt=!1;break e;case 3:it=V.stateNode.containerInfo,Xt=!0;break e;case 4:it=V.stateNode.containerInfo,Xt=!0;break e}V=V.return}if(it===null)throw Error(o(160));Xf(v,I,p),it=null,Xt=!1;var U=p.alternate;U!==null&&(U.return=null),p.return=null}catch(re){Ye(p,n,re)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Kf(n,e),n=n.sibling}function Kf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(n,e),un(e),a&4){try{cs(3,e,e.return),Bi(3,e)}catch(we){Ye(e,e.return,we)}try{cs(5,e,e.return)}catch(we){Ye(e,e.return,we)}}break;case 1:Gt(n,e),un(e),a&512&&s!==null&&io(s,s.return);break;case 5:if(Gt(n,e),un(e),a&512&&s!==null&&io(s,s.return),e.flags&32){var p=e.stateNode;try{gn(p,"")}catch(we){Ye(e,e.return,we)}}if(a&4&&(p=e.stateNode,p!=null)){var v=e.memoizedProps,I=s!==null?s.memoizedProps:v,V=e.type,U=e.updateQueue;if(e.updateQueue=null,U!==null)try{V==="input"&&v.type==="radio"&&v.name!=null&&Ee(p,v),Co(V,I);var re=Co(V,v);for(I=0;I<U.length;I+=2){var ue=U[I],de=U[I+1];ue==="style"?Ws(p,de):ue==="dangerouslySetInnerHTML"?Vs(p,de):ue==="children"?gn(p,de):k(p,ue,de,re)}switch(V){case"input":Le(p,v);break;case"textarea":Tt(p,v);break;case"select":var ae=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var xe=v.value;xe!=null?Ke(p,!!v.multiple,xe,!1):ae!==!!v.multiple&&(v.defaultValue!=null?Ke(p,!!v.multiple,v.defaultValue,!0):Ke(p,!!v.multiple,v.multiple?[]:"",!1))}p[Jo]=v}catch(we){Ye(e,e.return,we)}}break;case 6:if(Gt(n,e),un(e),a&4){if(e.stateNode===null)throw Error(o(162));p=e.stateNode,v=e.memoizedProps;try{p.nodeValue=v}catch(we){Ye(e,e.return,we)}}break;case 3:if(Gt(n,e),un(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Vo(n.containerInfo)}catch(we){Ye(e,e.return,we)}break;case 4:Gt(n,e),un(e);break;case 13:Gt(n,e),un(e),p=e.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Mu=Be())),a&4&&Gf(e);break;case 22:if(ue=s!==null&&s.memoizedState!==null,e.mode&1?(ft=(re=ft)||ue,Gt(n,e),ft=re):Gt(n,e),un(e),a&8192){if(re=e.memoizedState!==null,(e.stateNode.isHidden=re)&&!ue&&(e.mode&1)!==0)for(ye=e,ue=e.child;ue!==null;){for(de=ye=ue;ye!==null;){switch(ae=ye,xe=ae.child,ae.tag){case 0:case 11:case 14:case 15:cs(4,ae,ae.return);break;case 1:io(ae,ae.return);var ve=ae.stateNode;if(typeof ve.componentWillUnmount=="function"){a=ae,s=ae.return;try{n=a,ve.props=n.memoizedProps,ve.state=n.memoizedState,ve.componentWillUnmount()}catch(we){Ye(a,s,we)}}break;case 5:io(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Zf(de);continue}}xe!==null?(xe.return=ae,ye=xe):Zf(de)}ue=ue.sibling}e:for(ue=null,de=e;;){if(de.tag===5){if(ue===null){ue=de;try{p=de.stateNode,re?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(V=de.stateNode,U=de.memoizedProps.style,I=U!=null&&U.hasOwnProperty("display")?U.display:null,V.style.display=Bs("display",I))}catch(we){Ye(e,e.return,we)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=re?"":de.memoizedProps}catch(we){Ye(e,e.return,we)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===e)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===e)break e;for(;de.sibling===null;){if(de.return===null||de.return===e)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Gt(n,e),un(e),a&4&&Gf(e);break;case 21:break;default:Gt(n,e),un(e)}}function un(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Uf(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var p=a.stateNode;a.flags&32&&(gn(p,""),a.flags&=-33);var v=Yf(e);Cu(e,v,p);break;case 3:case 4:var I=a.stateNode.containerInfo,V=Yf(e);bu(e,V,I);break;default:throw Error(o(161))}}catch(U){Ye(e,e.return,U)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Gx(e,n,s){ye=e,Qf(e)}function Qf(e,n,s){for(var a=(e.mode&1)!==0;ye!==null;){var p=ye,v=p.child;if(p.tag===22&&a){var I=p.memoizedState!==null||Vi;if(!I){var V=p.alternate,U=V!==null&&V.memoizedState!==null||ft;V=Vi;var re=ft;if(Vi=I,(ft=U)&&!re)for(ye=p;ye!==null;)I=ye,U=I.child,I.tag===22&&I.memoizedState!==null?Jf(p):U!==null?(U.return=I,ye=U):Jf(p);for(;v!==null;)ye=v,Qf(v),v=v.sibling;ye=p,Vi=V,ft=re}qf(e)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ye=v):qf(e)}}function qf(e){for(;ye!==null;){var n=ye;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:ft||Bi(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!ft)if(s===null)a.componentDidMount();else{var p=n.elementType===n.type?s.memoizedProps:Yt(n.type,s.memoizedProps);a.componentDidUpdate(p,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&qd(n,v,a);break;case 3:var I=n.updateQueue;if(I!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}qd(n,I,s)}break;case 5:var V=n.stateNode;if(s===null&&n.flags&4){s=V;var U=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&s.focus();break;case"img":U.src&&(s.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var re=n.alternate;if(re!==null){var ue=re.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&Vo(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ft||n.flags&512&&ju(n)}catch(ae){Ye(n,n.return,ae)}}if(n===e){ye=null;break}if(s=n.sibling,s!==null){s.return=n.return,ye=s;break}ye=n.return}}function Zf(e){for(;ye!==null;){var n=ye;if(n===e){ye=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ye=s;break}ye=n.return}}function Jf(e){for(;ye!==null;){var n=ye;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Bi(4,n)}catch(U){Ye(n,s,U)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var p=n.return;try{a.componentDidMount()}catch(U){Ye(n,p,U)}}var v=n.return;try{ju(n)}catch(U){Ye(n,v,U)}break;case 5:var I=n.return;try{ju(n)}catch(U){Ye(n,I,U)}}}catch(U){Ye(n,n.return,U)}if(n===e){ye=null;break}var V=n.sibling;if(V!==null){V.return=n.return,ye=V;break}ye=n.return}}var Kx=Math.ceil,Wi=T.ReactCurrentDispatcher,Iu=T.ReactCurrentOwner,Rt=T.ReactCurrentBatchConfig,Pe=0,nt=null,Qe=null,lt=0,Et=0,lo=zn(0),Je=0,ds=null,hr=0,Ui=0,Eu=0,fs=null,vt=null,Mu=0,ao=1/0,jn=null,Yi=!1,_u=null,Wn=null,Xi=!1,Un=null,Gi=0,ps=0,Pu=null,Ki=-1,Qi=0;function mt(){return(Pe&6)!==0?Be():Ki!==-1?Ki:Ki=Be()}function Yn(e){return(e.mode&1)===0?1:(Pe&2)!==0&&lt!==0?lt&-lt:Dx.transition!==null?(Qi===0&&(Qi=Hr()),Qi):(e=Te,e!==0||(e=window.event,e=e===void 0?16:ed(e.type)),e)}function Kt(e,n,s,a){if(50<ps)throw ps=0,Pu=null,Error(o(185));lr(e,s,a),((Pe&2)===0||e!==nt)&&(e===nt&&((Pe&2)===0&&(Ui|=s),Je===4&&Xn(e,lt)),wt(e,a),s===1&&Pe===0&&(n.mode&1)===0&&(ao=Be()+500,ji&&Fn()))}function wt(e,n){var s=e.callbackNode;fa(e,n);var a=Fr(e,e===nt?lt:0);if(a===0)s!==null&&ei(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&ei(s),n===1)e.tag===0?Px(tp.bind(null,e)):Rd(tp.bind(null,e)),Ix(function(){(Pe&6)===0&&Fn()}),s=null;else{switch(Yc(a)){case 1:s=Lo;break;case 4:s=ni;break;case 16:s=$r;break;case 536870912:s=ri;break;default:s=$r}s=up(s,ep.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function ep(e,n){if(Ki=-1,Qi=0,(Pe&6)!==0)throw Error(o(327));var s=e.callbackNode;if(uo()&&e.callbackNode!==s)return null;var a=Fr(e,e===nt?lt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=qi(e,a);else{n=a;var p=Pe;Pe|=2;var v=rp();(nt!==e||lt!==n)&&(jn=null,ao=Be()+500,xr(e,n));do try{Zx();break}catch(V){np(e,V)}while(!0);Ka(),Wi.current=v,Pe=p,Qe!==null?n=0:(nt=null,lt=0,n=Je)}if(n!==0){if(n===2&&(p=Ao(e),p!==0&&(a=p,n=Du(e,p))),n===1)throw s=ds,xr(e,0),Xn(e,a),wt(e,Be()),s;if(n===6)Xn(e,a);else{if(p=e.current.alternate,(a&30)===0&&!Qx(p)&&(n=qi(e,a),n===2&&(v=Ao(e),v!==0&&(a=v,n=Du(e,v))),n===1))throw s=ds,xr(e,0),Xn(e,a),wt(e,Be()),s;switch(e.finishedWork=p,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:yr(e,vt,jn);break;case 3:if(Xn(e,a),(a&130023424)===a&&(n=Mu+500-Be(),10<n)){if(Fr(e,0)!==0)break;if(p=e.suspendedLanes,(p&a)!==a){mt(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=za(yr.bind(null,e,vt,jn),n);break}yr(e,vt,jn);break;case 4:if(Xn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,p=-1;0<a;){var I=31-jt(a);v=1<<I,I=n[I],I>p&&(p=I),a&=~v}if(a=p,a=Be()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Kx(a/1960))-a,10<a){e.timeoutHandle=za(yr.bind(null,e,vt,jn),a);break}yr(e,vt,jn);break;case 5:yr(e,vt,jn);break;default:throw Error(o(329))}}}return wt(e,Be()),e.callbackNode===s?ep.bind(null,e):null}function Du(e,n){var s=fs;return e.current.memoizedState.isDehydrated&&(xr(e,n).flags|=256),e=qi(e,n),e!==2&&(n=vt,vt=s,n!==null&&Tu(n)),e}function Tu(e){vt===null?vt=e:vt.push.apply(vt,e)}function Qx(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var p=s[a],v=p.getSnapshot;p=p.value;try{if(!Wt(v(),p))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xn(e,n){for(n&=~Eu,n&=~Ui,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-jt(n),a=1<<s;e[s]=-1,n&=~a}}function tp(e){if((Pe&6)!==0)throw Error(o(327));uo();var n=Fr(e,0);if((n&1)===0)return wt(e,Be()),null;var s=qi(e,n);if(e.tag!==0&&s===2){var a=Ao(e);a!==0&&(n=a,s=Du(e,a))}if(s===1)throw s=ds,xr(e,0),Xn(e,n),wt(e,Be()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,yr(e,vt,jn),wt(e,Be()),null}function Ou(e,n){var s=Pe;Pe|=1;try{return e(n)}finally{Pe=s,Pe===0&&(ao=Be()+500,ji&&Fn())}}function gr(e){Un!==null&&Un.tag===0&&(Pe&6)===0&&uo();var n=Pe;Pe|=1;var s=Rt.transition,a=Te;try{if(Rt.transition=null,Te=1,e)return e()}finally{Te=a,Rt.transition=s,Pe=n,(Pe&6)===0&&Fn()}}function Lu(){Et=lo.current,Re(lo)}function xr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Cx(s)),Qe!==null)for(s=Qe.return;s!==null;){var a=s;switch(Wa(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ni();break;case 3:oo(),Re(gt),Re(ut),ru();break;case 5:tu(a);break;case 4:oo();break;case 13:Re(We);break;case 19:Re(We);break;case 10:Qa(a.type._context);break;case 22:case 23:Lu()}s=s.return}if(nt=e,Qe=e=Gn(e.current,null),lt=Et=n,Je=0,ds=null,Eu=Ui=hr=0,vt=fs=null,fr!==null){for(n=0;n<fr.length;n++)if(s=fr[n],a=s.interleaved,a!==null){s.interleaved=null;var p=a.next,v=s.pending;if(v!==null){var I=v.next;v.next=p,a.next=I}s.pending=a}fr=null}return e}function np(e,n){do{var s=Qe;try{if(Ka(),Oi.current=zi,Li){for(var a=Ue.memoizedState;a!==null;){var p=a.queue;p!==null&&(p.pending=null),a=a.next}Li=!1}if(mr=0,tt=Ze=Ue=null,ss=!1,is=0,Iu.current=null,s===null||s.return===null){Je=1,ds=n,Qe=null;break}e:{var v=e,I=s.return,V=s,U=n;if(n=lt,V.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var re=U,ue=V,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var xe=If(I);if(xe!==null){xe.flags&=-257,Ef(xe,I,V,v,n),xe.mode&1&&Cf(v,re,n),n=xe,U=re;var ve=n.updateQueue;if(ve===null){var we=new Set;we.add(U),n.updateQueue=we}else ve.add(U);break e}else{if((n&1)===0){Cf(v,re,n),Au();break e}U=Error(o(426))}}else if(Fe&&V.mode&1){var Ge=If(I);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Ef(Ge,I,V,v,n),Xa(so(U,V));break e}}v=U=so(U,V),Je!==4&&(Je=2),fs===null?fs=[v]:fs.push(v),v=I;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var ee=jf(v,U,n);Qd(v,ee);break e;case 1:V=U;var K=v.type,te=v.stateNode;if((v.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Wn===null||!Wn.has(te)))){v.flags|=65536,n&=-n,v.lanes|=n;var fe=bf(v,V,n);Qd(v,fe);break e}}v=v.return}while(v!==null)}sp(s)}catch(Se){n=Se,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(!0)}function rp(){var e=Wi.current;return Wi.current=zi,e===null?zi:e}function Au(){(Je===0||Je===3||Je===2)&&(Je=4),nt===null||(hr&268435455)===0&&(Ui&268435455)===0||Xn(nt,lt)}function qi(e,n){var s=Pe;Pe|=2;var a=rp();(nt!==e||lt!==n)&&(jn=null,xr(e,n));do try{qx();break}catch(p){np(e,p)}while(!0);if(Ka(),Pe=s,Wi.current=a,Qe!==null)throw Error(o(261));return nt=null,lt=0,Je}function qx(){for(;Qe!==null;)op(Qe)}function Zx(){for(;Qe!==null&&!sa();)op(Qe)}function op(e){var n=ap(e.alternate,e,Et);e.memoizedProps=e.pendingProps,n===null?sp(e):Qe=n,Iu.current=null}function sp(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Wx(s,n,Et),s!==null){Qe=s;return}}else{if(s=Ux(s,n),s!==null){s.flags&=32767,Qe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Qe=null;return}}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);Je===0&&(Je=5)}function yr(e,n,s){var a=Te,p=Rt.transition;try{Rt.transition=null,Te=1,Jx(e,n,s,a)}finally{Rt.transition=p,Te=a}return null}function Jx(e,n,s,a){do uo();while(Un!==null);if((Pe&6)!==0)throw Error(o(327));s=e.finishedWork;var p=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(si(e,v),e===nt&&(Qe=nt=null,lt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Xi||(Xi=!0,up($r,function(){return uo(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Rt.transition,Rt.transition=null;var I=Te;Te=1;var V=Pe;Pe|=4,Iu.current=null,Xx(e,s),Kf(s,e),vx(Aa),ai=!!La,Aa=La=null,e.current=s,Gx(s),ti(),Pe=V,Te=I,Rt.transition=v}else e.current=s;if(Xi&&(Xi=!1,Un=e,Gi=p),v=e.pendingLanes,v===0&&(Wn=null),aa(s.stateNode),wt(e,Be()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)p=n[s],a(p.value,{componentStack:p.stack,digest:p.digest});if(Yi)throw Yi=!1,e=_u,_u=null,e;return(Gi&1)!==0&&e.tag!==0&&uo(),v=e.pendingLanes,(v&1)!==0?e===Pu?ps++:(ps=0,Pu=e):ps=0,Fn(),null}function uo(){if(Un!==null){var e=Yc(Gi),n=Rt.transition,s=Te;try{if(Rt.transition=null,Te=16>e?16:e,Un===null)var a=!1;else{if(e=Un,Un=null,Gi=0,(Pe&6)!==0)throw Error(o(331));var p=Pe;for(Pe|=4,ye=e.current;ye!==null;){var v=ye,I=v.child;if((ye.flags&16)!==0){var V=v.deletions;if(V!==null){for(var U=0;U<V.length;U++){var re=V[U];for(ye=re;ye!==null;){var ue=ye;switch(ue.tag){case 0:case 11:case 15:cs(8,ue,v)}var de=ue.child;if(de!==null)de.return=ue,ye=de;else for(;ye!==null;){ue=ye;var ae=ue.sibling,xe=ue.return;if(Wf(ue),ue===re){ye=null;break}if(ae!==null){ae.return=xe,ye=ae;break}ye=xe}}}var ve=v.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var Ge=we.sibling;we.sibling=null,we=Ge}while(we!==null)}}ye=v}}if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,ye=I;else e:for(;ye!==null;){if(v=ye,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:cs(9,v,v.return)}var ee=v.sibling;if(ee!==null){ee.return=v.return,ye=ee;break e}ye=v.return}}var K=e.current;for(ye=K;ye!==null;){I=ye;var te=I.child;if((I.subtreeFlags&2064)!==0&&te!==null)te.return=I,ye=te;else e:for(I=K;ye!==null;){if(V=ye,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Bi(9,V)}}catch(Se){Ye(V,V.return,Se)}if(V===I){ye=null;break e}var fe=V.sibling;if(fe!==null){fe.return=V.return,ye=fe;break e}ye=V.return}}if(Pe=p,Fn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(ir,e)}catch{}a=!0}return a}finally{Te=s,Rt.transition=n}}return!1}function ip(e,n,s){n=so(s,n),n=jf(e,n,1),e=Vn(e,n,1),n=mt(),e!==null&&(lr(e,1,n),wt(e,n))}function Ye(e,n,s){if(e.tag===3)ip(e,e,s);else for(;n!==null;){if(n.tag===3){ip(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Wn===null||!Wn.has(a))){e=so(s,e),e=bf(n,e,1),n=Vn(n,e,1),e=mt(),n!==null&&(lr(n,1,e),wt(n,e));break}}n=n.return}}function e0(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=mt(),e.pingedLanes|=e.suspendedLanes&s,nt===e&&(lt&s)===s&&(Je===4||Je===3&&(lt&130023424)===lt&&500>Be()-Mu?xr(e,0):Eu|=s),wt(e,n)}function lp(e,n){n===0&&((e.mode&1)===0?n=1:(n=Rr,Rr<<=1,(Rr&130023424)===0&&(Rr=4194304)));var s=mt();e=Sn(e,n),e!==null&&(lr(e,n,s),wt(e,s))}function t0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),lp(e,s)}function n0(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),lp(e,s)}var ap;ap=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||gt.current)yt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return yt=!1,Bx(e,n,s);yt=(e.flags&131072)!==0}else yt=!1,Fe&&(n.flags&1048576)!==0&&Fd(n,Ci,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Hi(e,n),e=n.pendingProps;var p=qr(n,ut.current);ro(n,s),p=iu(null,n,a,e,p,s);var v=lu();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,xt(a)?(v=!0,ki(n)):v=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ja(n),p.updater=Ri,n.stateNode=p,p._reactInternals=n,pu(n,a,e,s),n=xu(null,n,a,!0,v,s)):(n.tag=0,Fe&&v&&Ba(n),pt(null,n,p,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Hi(e,n),e=n.pendingProps,p=a._init,a=p(a._payload),n.type=a,p=n.tag=o0(a),e=Yt(a,e),p){case 0:n=gu(null,n,a,e,s);break e;case 1:n=Of(null,n,a,e,s);break e;case 11:n=Mf(null,n,a,e,s);break e;case 14:n=_f(null,n,a,Yt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Yt(a,p),gu(e,n,a,p,s);case 1:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Yt(a,p),Of(e,n,a,p,s);case 3:e:{if(Lf(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,p=v.element,Kd(e,n),Di(n,a,null,s);var I=n.memoizedState;if(a=I.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){p=so(Error(o(423)),n),n=Af(e,n,a,s,p);break e}else if(a!==p){p=so(Error(o(424)),n),n=Af(e,n,a,s,p);break e}else for(It=$n(n.stateNode.containerInfo.firstChild),Ct=n,Fe=!0,Ut=null,s=Xd(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(eo(),a===p){n=kn(e,n,s);break e}pt(e,n,a,s)}n=n.child}return n;case 5:return Zd(n),e===null&&Ya(n),a=n.type,p=n.pendingProps,v=e!==null?e.memoizedProps:null,I=p.children,$a(a,p)?I=null:v!==null&&$a(a,v)&&(n.flags|=32),Tf(e,n),pt(e,n,I,s),n.child;case 6:return e===null&&Ya(n),null;case 13:return $f(e,n,s);case 4:return eu(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=to(n,null,a,s):pt(e,n,a,s),n.child;case 11:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Yt(a,p),Mf(e,n,a,p,s);case 7:return pt(e,n,n.pendingProps,s),n.child;case 8:return pt(e,n,n.pendingProps.children,s),n.child;case 12:return pt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,p=n.pendingProps,v=n.memoizedProps,I=p.value,Ae(Mi,a._currentValue),a._currentValue=I,v!==null)if(Wt(v.value,I)){if(v.children===p.children&&!gt.current){n=kn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var V=v.dependencies;if(V!==null){I=v.child;for(var U=V.firstContext;U!==null;){if(U.context===a){if(v.tag===1){U=Nn(-1,s&-s),U.tag=2;var re=v.updateQueue;if(re!==null){re=re.shared;var ue=re.pending;ue===null?U.next=U:(U.next=ue.next,ue.next=U),re.pending=U}}v.lanes|=s,U=v.alternate,U!==null&&(U.lanes|=s),qa(v.return,s,n),V.lanes|=s;break}U=U.next}}else if(v.tag===10)I=v.type===n.type?null:v.child;else if(v.tag===18){if(I=v.return,I===null)throw Error(o(341));I.lanes|=s,V=I.alternate,V!==null&&(V.lanes|=s),qa(I,s,n),I=v.sibling}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===n){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}pt(e,n,p.children,s),n=n.child}return n;case 9:return p=n.type,a=n.pendingProps.children,ro(n,s),p=$t(p),a=a(p),n.flags|=1,pt(e,n,a,s),n.child;case 14:return a=n.type,p=Yt(a,n.pendingProps),p=Yt(a.type,p),_f(e,n,a,p,s);case 15:return Pf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Yt(a,p),Hi(e,n),n.tag=1,xt(a)?(e=!0,ki(n)):e=!1,ro(n,s),Nf(n,a,p),pu(n,a,p,s),xu(null,n,a,!0,e,s);case 19:return Rf(e,n,s);case 22:return Df(e,n,s)}throw Error(o(156,n.tag))};function up(e,n){return Js(e,n)}function r0(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,n,s,a){return new r0(e,n,s,a)}function $u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function o0(e){if(typeof e=="function")return $u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===Q)return 14}return 2}function Gn(e,n){var s=e.alternate;return s===null?(s=Ft(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Zi(e,n,s,a,p,v){var I=2;if(a=e,typeof e=="function")$u(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case B:return vr(s.children,p,v,n);case Y:I=8,p|=8;break;case q:return e=Ft(12,s,n,p|2),e.elementType=q,e.lanes=v,e;case X:return e=Ft(13,s,n,p),e.elementType=X,e.lanes=v,e;case $:return e=Ft(19,s,n,p),e.elementType=$,e.lanes=v,e;case _:return Ji(s,p,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F:I=10;break e;case z:I=9;break e;case H:I=11;break e;case Q:I=14;break e;case W:I=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Ft(I,s,n,p),n.elementType=e,n.type=a,n.lanes=v,n}function vr(e,n,s,a){return e=Ft(7,e,a,n),e.lanes=s,e}function Ji(e,n,s,a){return e=Ft(22,e,a,n),e.elementType=_,e.lanes=s,e.stateNode={isHidden:!1},e}function zu(e,n,s){return e=Ft(6,e,null,n),e.lanes=s,e}function Ru(e,n,s){return n=Ft(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function s0(e,n,s,a,p){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$o(0),this.expirationTimes=$o(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$o(0),this.identifierPrefix=a,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Fu(e,n,s,a,p,v,I,V,U){return e=new s0(e,n,s,V,U),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Ft(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ja(v),e}function i0(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function cp(e){if(!e)return Rn;e=e._reactInternals;e:{if(rn(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(xt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(xt(s))return $d(e,s,n)}return n}function dp(e,n,s,a,p,v,I,V,U){return e=Fu(s,a,!0,e,p,v,I,V,U),e.context=cp(null),s=e.current,a=mt(),p=Yn(s),v=Nn(a,p),v.callback=n??null,Vn(s,v,p),e.current.lanes=p,lr(e,p,a),wt(e,a),e}function el(e,n,s,a){var p=n.current,v=mt(),I=Yn(p);return s=cp(s),n.context===null?n.context=s:n.pendingContext=s,n=Nn(v,I),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Vn(p,n,I),e!==null&&(Kt(e,p,I,v),Pi(e,p,I)),I}function tl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Hu(e,n){fp(e,n),(e=e.alternate)&&fp(e,n)}function l0(){return null}var pp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}nl.prototype.render=Vu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));el(e,n,null,null)},nl.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;gr(function(){el(null,e,null,null)}),n[xn]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Kc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<On.length&&n!==0&&n<On[s].priority;s++);On.splice(s,0,e),s===0&&Zc(e)}};function Bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mp(){}function a0(e,n,s,a,p){if(p){if(typeof a=="function"){var v=a;a=function(){var re=tl(I);v.call(re)}}var I=dp(n,a,e,0,null,!1,!1,"",mp);return e._reactRootContainer=I,e[xn]=I.current,qo(e.nodeType===8?e.parentNode:e),gr(),I}for(;p=e.lastChild;)e.removeChild(p);if(typeof a=="function"){var V=a;a=function(){var re=tl(U);V.call(re)}}var U=Fu(e,0,!1,null,null,!1,!1,"",mp);return e._reactRootContainer=U,e[xn]=U.current,qo(e.nodeType===8?e.parentNode:e),gr(function(){el(n,U,s,a)}),U}function ol(e,n,s,a,p){var v=s._reactRootContainer;if(v){var I=v;if(typeof p=="function"){var V=p;p=function(){var U=tl(I);V.call(U)}}el(n,I,e,p)}else I=a0(s,n,e,p,a);return tl(I)}Xc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=on(n.pendingLanes);s!==0&&(pa(n,s|1),wt(n,Be()),(Pe&6)===0&&(ao=Be()+500,Fn()))}break;case 13:gr(function(){var a=Sn(e,1);if(a!==null){var p=mt();Kt(a,e,1,p)}}),Hu(e,1)}},ma=function(e){if(e.tag===13){var n=Sn(e,134217728);if(n!==null){var s=mt();Kt(n,e,134217728,s)}Hu(e,134217728)}},Gc=function(e){if(e.tag===13){var n=Yn(e),s=Sn(e,n);if(s!==null){var a=mt();Kt(s,e,n,a)}Hu(e,n)}},Kc=function(){return Te},Qc=function(e,n){var s=Te;try{return Te=e,n()}finally{Te=s}},Mo=function(e,n,s){switch(n){case"input":if(Le(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var p=Si(a);if(!p)throw Error(o(90));he(a),Le(a,p)}}}break;case"textarea":Tt(e,s);break;case"select":n=s.value,n!=null&&Ke(e,!!s.multiple,n,!1)}},Gs=Ou,Ks=gr;var u0={usingClientEntryPoint:!1,Events:[es,Kr,Si,Ys,Xs,Ou]},ms={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c0={bundleType:ms.bundleType,version:ms.version,rendererPackageName:ms.rendererPackageName,rendererConfig:ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qs(e),e===null?null:e.stateNode},findFiberByHostInstance:ms.findFiberByHostInstance||l0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{ir=sl.inject(c0),Ot=sl}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u0,St.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(n))throw Error(o(200));return i0(e,n,null,s)},St.createRoot=function(e,n){if(!Bu(e))throw Error(o(299));var s=!1,a="",p=pp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=Fu(e,1,!1,null,null,s,!1,a,p),e[xn]=n.current,qo(e.nodeType===8?e.parentNode:e),new Vu(n)},St.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=qs(n),e=e===null?null:e.stateNode,e},St.flushSync=function(e){return gr(e)},St.hydrate=function(e,n,s){if(!rl(n))throw Error(o(200));return ol(null,e,n,!0,s)},St.hydrateRoot=function(e,n,s){if(!Bu(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,p=!1,v="",I=pp;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(I=s.onRecoverableError)),n=dp(n,null,e,1,s??null,p,!1,v,I),e[xn]=n.current,qo(e),a)for(e=0;e<a.length;e++)s=a[e],p=s._getVersion,p=p(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,p]:n.mutableSourceEagerHydrationData.push(s,p);return new nl(n)},St.render=function(e,n,s){if(!rl(n))throw Error(o(200));return ol(null,e,n,!1,s)},St.unmountComponentAtNode=function(e){if(!rl(e))throw Error(o(40));return e._reactRootContainer?(gr(function(){ol(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1},St.unstable_batchedUpdates=Ou,St.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!rl(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return ol(e,n,s,!1,a)},St.version="18.3.1-next-f1338f8080-20240426",St}var Np;function Hm(){if(Np)return Yu.exports;Np=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Yu.exports=x0(),Yu.exports}var kp;function y0(){if(kp)return il;kp=1;var t=Hm();return il.createRoot=t.createRoot,il.hydrateRoot=t.hydrateRoot,il}var v0=y0();function qe(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=qe(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var w0={value:()=>{}};function zl(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new wl(o)}function wl(t){this._=t}function S0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}wl.prototype=zl.prototype={constructor:wl,on:function(t,r){var o=this._,i=S0(t+"",o),l,c=-1,d=i.length;if(arguments.length<2){for(;++c<d;)if((l=(t=i[c]).type)&&(l=N0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++c<d;)if(l=(t=i[c]).type)o[l]=jp(o[l],t.name,r);else if(r==null)for(l in o)o[l]=jp(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new wl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,c;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],i=0,l=c.length;i<l;++i)c[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,c=i.length;l<c;++l)i[l].value.apply(r,o)}};function N0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function jp(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=w0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var uc="http://www.w3.org/1999/xhtml";const bp={svg:"http://www.w3.org/2000/svg",xhtml:uc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rl(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),bp.hasOwnProperty(r)?{space:bp[r],local:t}:t}function k0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===uc&&r.documentElement.namespaceURI===uc?r.createElement(t):r.createElementNS(o,t)}}function j0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vm(t){var r=Rl(t);return(r.local?j0:k0)(r)}function b0(){}function Ic(t){return t==null?b0:function(){return this.querySelector(t)}}function C0(t){typeof t!="function"&&(t=Ic(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=new Array(d),h,g,x=0;x<d;++x)(h=c[x])&&(g=t.call(h,h.__data__,x,c))&&("__data__"in h&&(g.__data__=h.__data__),f[x]=g);return new Pt(i,this._parents)}function I0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function E0(){return[]}function Bm(t){return t==null?E0:function(){return this.querySelectorAll(t)}}function M0(t){return function(){return I0(t.apply(this,arguments))}}function _0(t){typeof t=="function"?t=M0(t):t=Bm(t);for(var r=this._groups,o=r.length,i=[],l=[],c=0;c<o;++c)for(var d=r[c],f=d.length,h,g=0;g<f;++g)(h=d[g])&&(i.push(t.call(h,h.__data__,g,d)),l.push(h));return new Pt(i,l)}function Wm(t){return function(){return this.matches(t)}}function Um(t){return function(r){return r.matches(t)}}var P0=Array.prototype.find;function D0(t){return function(){return P0.call(this.children,t)}}function T0(){return this.firstElementChild}function O0(t){return this.select(t==null?T0:D0(typeof t=="function"?t:Um(t)))}var L0=Array.prototype.filter;function A0(){return Array.from(this.children)}function $0(t){return function(){return L0.call(this.children,t)}}function z0(t){return this.selectAll(t==null?A0:$0(typeof t=="function"?t:Um(t)))}function R0(t){typeof t!="function"&&(t=Wm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],h,g=0;g<d;++g)(h=c[g])&&t.call(h,h.__data__,g,c)&&f.push(h);return new Pt(i,this._parents)}function Ym(t){return new Array(t.length)}function F0(){return new Pt(this._enter||this._groups.map(Ym),this._parents)}function Cl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}Cl.prototype={constructor:Cl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function H0(t){return function(){return t}}function V0(t,r,o,i,l,c){for(var d=0,f,h=r.length,g=c.length;d<g;++d)(f=r[d])?(f.__data__=c[d],i[d]=f):o[d]=new Cl(t,c[d]);for(;d<h;++d)(f=r[d])&&(l[d]=f)}function B0(t,r,o,i,l,c,d){var f,h,g=new Map,x=r.length,m=c.length,y=new Array(x),w;for(f=0;f<x;++f)(h=r[f])&&(y[f]=w=d.call(h,h.__data__,f,r)+"",g.has(w)?l[f]=h:g.set(w,h));for(f=0;f<m;++f)w=d.call(t,c[f],f,c)+"",(h=g.get(w))?(i[f]=h,h.__data__=c[f],g.delete(w)):o[f]=new Cl(t,c[f]);for(f=0;f<x;++f)(h=r[f])&&g.get(y[f])===h&&(l[f]=h)}function W0(t){return t.__data__}function U0(t,r){if(!arguments.length)return Array.from(this,W0);var o=r?B0:V0,i=this._parents,l=this._groups;typeof t!="function"&&(t=H0(t));for(var c=l.length,d=new Array(c),f=new Array(c),h=new Array(c),g=0;g<c;++g){var x=i[g],m=l[g],y=m.length,w=Y0(t.call(x,x&&x.__data__,g,i)),S=w.length,C=f[g]=new Array(S),N=d[g]=new Array(S),b=h[g]=new Array(y);o(x,m,C,N,b,w,r);for(var O=0,k=0,T,M;O<S;++O)if(T=C[O]){for(O>=k&&(k=O+1);!(M=N[k])&&++k<S;);T._next=M||null}}return d=new Pt(d,i),d._enter=f,d._exit=h,d}function Y0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function X0(){return new Pt(this._exit||this._groups.map(Ym),this._parents)}function G0(t,r,o){var i=this.enter(),l=this,c=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?c.remove():o(c),i&&l?i.merge(l).order():l}function K0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,c=i.length,d=Math.min(l,c),f=new Array(l),h=0;h<d;++h)for(var g=o[h],x=i[h],m=g.length,y=f[h]=new Array(m),w,S=0;S<m;++S)(w=g[S]||x[S])&&(y[S]=w);for(;h<l;++h)f[h]=o[h];return new Pt(f,this._parents)}function Q0(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,c=i[l],d;--l>=0;)(d=i[l])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function q0(t){t||(t=Z0);function r(m,y){return m&&y?t(m.__data__,y.__data__):!m-!y}for(var o=this._groups,i=o.length,l=new Array(i),c=0;c<i;++c){for(var d=o[c],f=d.length,h=l[c]=new Array(f),g,x=0;x<f;++x)(g=d[x])&&(h[x]=g);h.sort(r)}return new Pt(l,this._parents).order()}function Z0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function J0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ey(){return Array.from(this)}function ty(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length;l<c;++l){var d=i[l];if(d)return d}return null}function ny(){let t=0;for(const r of this)++t;return t}function ry(){return!this.node()}function oy(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],c=0,d=l.length,f;c<d;++c)(f=l[c])&&t.call(f,f.__data__,c,l);return this}function sy(t){return function(){this.removeAttribute(t)}}function iy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ly(t,r){return function(){this.setAttribute(t,r)}}function ay(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function uy(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function cy(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function dy(t,r){var o=Rl(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?iy:sy:typeof r=="function"?o.local?cy:uy:o.local?ay:ly)(o,r))}function Xm(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fy(t){return function(){this.style.removeProperty(t)}}function py(t,r,o){return function(){this.style.setProperty(t,r,o)}}function my(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function hy(t,r,o){return arguments.length>1?this.each((r==null?fy:typeof r=="function"?my:py)(t,r,o??"")):xo(this.node(),t)}function xo(t,r){return t.style.getPropertyValue(r)||Xm(t).getComputedStyle(t,null).getPropertyValue(r)}function gy(t){return function(){delete this[t]}}function xy(t,r){return function(){this[t]=r}}function yy(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function vy(t,r){return arguments.length>1?this.each((r==null?gy:typeof r=="function"?yy:xy)(t,r)):this.node()[t]}function Gm(t){return t.trim().split(/^|\s+/)}function Ec(t){return t.classList||new Km(t)}function Km(t){this._node=t,this._names=Gm(t.getAttribute("class")||"")}Km.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Qm(t,r){for(var o=Ec(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function qm(t,r){for(var o=Ec(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function wy(t){return function(){Qm(this,t)}}function Sy(t){return function(){qm(this,t)}}function Ny(t,r){return function(){(r.apply(this,arguments)?Qm:qm)(this,t)}}function ky(t,r){var o=Gm(t+"");if(arguments.length<2){for(var i=Ec(this.node()),l=-1,c=o.length;++l<c;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?Ny:r?wy:Sy)(o,r))}function jy(){this.textContent=""}function by(t){return function(){this.textContent=t}}function Cy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Iy(t){return arguments.length?this.each(t==null?jy:(typeof t=="function"?Cy:by)(t)):this.node().textContent}function Ey(){this.innerHTML=""}function My(t){return function(){this.innerHTML=t}}function _y(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Py(t){return arguments.length?this.each(t==null?Ey:(typeof t=="function"?_y:My)(t)):this.node().innerHTML}function Dy(){this.nextSibling&&this.parentNode.appendChild(this)}function Ty(){return this.each(Dy)}function Oy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ly(){return this.each(Oy)}function Ay(t){var r=typeof t=="function"?t:Vm(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function $y(){return null}function zy(t,r){var o=typeof t=="function"?t:Vm(t),i=r==null?$y:typeof r=="function"?r:Ic(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function Ry(){var t=this.parentNode;t&&t.removeChild(this)}function Fy(){return this.each(Ry)}function Hy(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Vy(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function By(t){return this.select(t?Vy:Hy)}function Wy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Uy(t){return function(r){t.call(this,r,this.__data__)}}function Yy(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Xy(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,c;o<l;++o)c=r[o],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):r[++i]=c;++i?r.length=i:delete this.__on}}}function Gy(t,r,o){return function(){var i=this.__on,l,c=Uy(r);if(i){for(var d=0,f=i.length;d<f;++d)if((l=i[d]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=o),l.value=r;return}}this.addEventListener(t.type,c,o),l={type:t.type,name:t.name,value:r,listener:c,options:o},i?i.push(l):this.__on=[l]}}function Ky(t,r,o){var i=Yy(t+""),l,c=i.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,g=f.length,x;h<g;++h)for(l=0,x=f[h];l<c;++l)if((d=i[l]).type===x.type&&d.name===x.name)return x.value}return}for(f=r?Gy:Xy,l=0;l<c;++l)this.each(f(i[l],r,o));return this}function Zm(t,r,o){var i=Xm(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function Qy(t,r){return function(){return Zm(this,t,r)}}function qy(t,r){return function(){return Zm(this,t,r.apply(this,arguments))}}function Zy(t,r){return this.each((typeof r=="function"?qy:Qy)(t,r))}function*Jy(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length,d;l<c;++l)(d=i[l])&&(yield d)}var Jm=[null];function Pt(t,r){this._groups=t,this._parents=r}function Ls(){return new Pt([[document.documentElement]],Jm)}function ev(){return this}Pt.prototype=Ls.prototype={constructor:Pt,select:C0,selectAll:_0,selectChild:O0,selectChildren:z0,filter:R0,data:U0,enter:F0,exit:X0,join:G0,merge:K0,selection:ev,order:Q0,sort:q0,call:J0,nodes:ey,node:ty,size:ny,empty:ry,each:oy,attr:dy,style:hy,property:vy,classed:ky,text:Iy,html:Py,raise:Ty,lower:Ly,append:Ay,insert:zy,remove:Fy,clone:By,datum:Wy,on:Ky,dispatch:Zy,[Symbol.iterator]:Jy};function Mt(t){return typeof t=="string"?new Pt([[document.querySelector(t)]],[document.documentElement]):new Pt([[t]],Jm)}function tv(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Zt(t,r){if(t=tv(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const nv={passive:!1},bs={capture:!0,passive:!1};function Ku(t){t.stopImmediatePropagation()}function ho(t){t.preventDefault(),t.stopImmediatePropagation()}function eh(t){var r=t.document.documentElement,o=Mt(t).on("dragstart.drag",ho,bs);"onselectstart"in r?o.on("selectstart.drag",ho,bs):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function th(t,r){var o=t.document.documentElement,i=Mt(t).on("dragstart.drag",null);r&&(i.on("click.drag",ho,bs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const ll=t=>()=>t;function cc(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:c,x:d,y:f,dx:h,dy:g,dispatch:x}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:x}})}cc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function rv(t){return!t.ctrlKey&&!t.button}function ov(){return this.parentNode}function sv(t,r){return r??{x:t.x,y:t.y}}function iv(){return navigator.maxTouchPoints||"ontouchstart"in this}function nh(){var t=rv,r=ov,o=sv,i=iv,l={},c=zl("start","drag","end"),d=0,f,h,g,x,m=0;function y(T){T.on("mousedown.drag",w).filter(i).on("touchstart.drag",N).on("touchmove.drag",b,nv).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(T,M){if(!(x||!t.call(this,T,M))){var L=k(this,r.call(this,T,M),T,M,"mouse");L&&(Mt(T.view).on("mousemove.drag",S,bs).on("mouseup.drag",C,bs),eh(T.view),Ku(T),g=!1,f=T.clientX,h=T.clientY,L("start",T))}}function S(T){if(ho(T),!g){var M=T.clientX-f,L=T.clientY-h;g=M*M+L*L>m}l.mouse("drag",T)}function C(T){Mt(T.view).on("mousemove.drag mouseup.drag",null),th(T.view,g),ho(T),l.mouse("end",T)}function N(T,M){if(t.call(this,T,M)){var L=T.changedTouches,B=r.call(this,T,M),Y=L.length,q,F;for(q=0;q<Y;++q)(F=k(this,B,T,M,L[q].identifier,L[q]))&&(Ku(T),F("start",T,L[q]))}}function b(T){var M=T.changedTouches,L=M.length,B,Y;for(B=0;B<L;++B)(Y=l[M[B].identifier])&&(ho(T),Y("drag",T,M[B]))}function O(T){var M=T.changedTouches,L=M.length,B,Y;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),B=0;B<L;++B)(Y=l[M[B].identifier])&&(Ku(T),Y("end",T,M[B]))}function k(T,M,L,B,Y,q){var F=c.copy(),z=Zt(q||L,M),H,X,$;if(($=o.call(T,new cc("beforestart",{sourceEvent:L,target:y,identifier:Y,active:d,x:z[0],y:z[1],dx:0,dy:0,dispatch:F}),B))!=null)return H=$.x-z[0]||0,X=$.y-z[1]||0,function Q(W,_,D){var j=z,R;switch(W){case"start":l[Y]=Q,R=d++;break;case"end":delete l[Y],--d;case"drag":z=Zt(D||_,M),R=d;break}F.call(W,T,new cc(W,{sourceEvent:_,subject:$,target:y,identifier:Y,active:R,x:z[0]+H,y:z[1]+X,dx:z[0]-j[0],dy:z[1]-j[1],dispatch:F}),B)}}return y.filter=function(T){return arguments.length?(t=typeof T=="function"?T:ll(!!T),y):t},y.container=function(T){return arguments.length?(r=typeof T=="function"?T:ll(T),y):r},y.subject=function(T){return arguments.length?(o=typeof T=="function"?T:ll(T),y):o},y.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:ll(!!T),y):i},y.on=function(){var T=c.on.apply(c,arguments);return T===c?y:T},y.clickDistance=function(T){return arguments.length?(m=(T=+T)*T,y):Math.sqrt(m)},y}function Mc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function rh(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function As(){}var Cs=.7,Il=1/Cs,go="\\s*([+-]?\\d+)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lv=/^#([0-9a-f]{3,8})$/,av=new RegExp(`^rgb\\(${go},${go},${go}\\)$`),uv=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),cv=new RegExp(`^rgba\\(${go},${go},${go},${Is}\\)$`),dv=new RegExp(`^rgba\\(${fn},${fn},${fn},${Is}\\)$`),fv=new RegExp(`^hsl\\(${Is},${fn},${fn}\\)$`),pv=new RegExp(`^hsla\\(${Is},${fn},${fn},${Is}\\)$`),Cp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mc(As,Cr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ip,formatHex:Ip,formatHex8:mv,formatHsl:hv,formatRgb:Ep,toString:Ep});function Ip(){return this.rgb().formatHex()}function mv(){return this.rgb().formatHex8()}function hv(){return oh(this).formatHsl()}function Ep(){return this.rgb().formatRgb()}function Cr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=lv.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?Mp(r):o===3?new kt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?al(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?al(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=av.exec(t))?new kt(r[1],r[2],r[3],1):(r=uv.exec(t))?new kt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=cv.exec(t))?al(r[1],r[2],r[3],r[4]):(r=dv.exec(t))?al(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=fv.exec(t))?Dp(r[1],r[2]/100,r[3]/100,1):(r=pv.exec(t))?Dp(r[1],r[2]/100,r[3]/100,r[4]):Cp.hasOwnProperty(t)?Mp(Cp[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function Mp(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function al(t,r,o,i){return i<=0&&(t=r=o=NaN),new kt(t,r,o,i)}function gv(t){return t instanceof As||(t=Cr(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function dc(t,r,o,i){return arguments.length===1?gv(t):new kt(t,r,o,i??1)}function kt(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}Mc(kt,dc,rh(As,{brighter(t){return t=t==null?Il:Math.pow(Il,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cs:Math.pow(Cs,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kt(jr(this.r),jr(this.g),jr(this.b),El(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_p,formatHex:_p,formatHex8:xv,formatRgb:Pp,toString:Pp}));function _p(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}`}function xv(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}${kr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pp(){const t=El(this.opacity);return`${t===1?"rgb(":"rgba("}${jr(this.r)}, ${jr(this.g)}, ${jr(this.b)}${t===1?")":`, ${t})`}`}function El(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function jr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function kr(t){return t=jr(t),(t<16?"0":"")+t.toString(16)}function Dp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Jt(t,r,o,i)}function oh(t){if(t instanceof Jt)return new Jt(t.h,t.s,t.l,t.opacity);if(t instanceof As||(t=Cr(t)),!t)return new Jt;if(t instanceof Jt)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),c=Math.max(r,o,i),d=NaN,f=c-l,h=(c+l)/2;return f?(r===c?d=(o-i)/f+(o<i)*6:o===c?d=(i-r)/f+2:d=(r-o)/f+4,f/=h<.5?c+l:2-c-l,d*=60):f=h>0&&h<1?0:d,new Jt(d,f,h,t.opacity)}function yv(t,r,o,i){return arguments.length===1?oh(t):new Jt(t,r,o,i??1)}function Jt(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}Mc(Jt,yv,rh(As,{brighter(t){return t=t==null?Il:Math.pow(Il,t),new Jt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cs:Math.pow(Cs,t),new Jt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new kt(Qu(t>=240?t-240:t+120,l,i),Qu(t,l,i),Qu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Jt(Tp(this.h),ul(this.s),ul(this.l),El(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=El(this.opacity);return`${t===1?"hsl(":"hsla("}${Tp(this.h)}, ${ul(this.s)*100}%, ${ul(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Tp(t){return t=(t||0)%360,t<0?t+360:t}function ul(t){return Math.max(0,Math.min(1,t||0))}function Qu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const _c=t=>()=>t;function vv(t,r){return function(o){return t+o*r}}function wv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function Sv(t){return(t=+t)==1?sh:function(r,o){return o-r?wv(r,o,t):_c(isNaN(r)?o:r)}}function sh(t,r){var o=r-t;return o?vv(t,o):_c(isNaN(t)?r:t)}const Ml=(function t(r){var o=Sv(r);function i(l,c){var d=o((l=dc(l)).r,(c=dc(c)).r),f=o(l.g,c.g),h=o(l.b,c.b),g=sh(l.opacity,c.opacity);return function(x){return l.r=d(x),l.g=f(x),l.b=h(x),l.opacity=g(x),l+""}}return i.gamma=t,i})(1);function Nv(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(c){for(l=0;l<o;++l)i[l]=t[l]*(1-c)+r[l]*c;return i}}function kv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),c=new Array(o),d;for(d=0;d<i;++d)l[d]=ks(t[d],r[d]);for(;d<o;++d)c[d]=r[d];return function(f){for(d=0;d<i;++d)c[d]=l[d](f);return c}}function bv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function cn(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function Cv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=ks(t[l],r[l]):i[l]=r[l];return function(c){for(l in o)i[l]=o[l](c);return i}}var fc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qu=new RegExp(fc.source,"g");function Iv(t){return function(){return t}}function Ev(t){return function(r){return t(r)+""}}function ih(t,r){var o=fc.lastIndex=qu.lastIndex=0,i,l,c,d=-1,f=[],h=[];for(t=t+"",r=r+"";(i=fc.exec(t))&&(l=qu.exec(r));)(c=l.index)>o&&(c=r.slice(o,c),f[d]?f[d]+=c:f[++d]=c),(i=i[0])===(l=l[0])?f[d]?f[d]+=l:f[++d]=l:(f[++d]=null,h.push({i:d,x:cn(i,l)})),o=qu.lastIndex;return o<r.length&&(c=r.slice(o),f[d]?f[d]+=c:f[++d]=c),f.length<2?h[0]?Ev(h[0].x):Iv(r):(r=h.length,function(g){for(var x=0,m;x<r;++x)f[(m=h[x]).i]=m.x(g);return f.join("")})}function ks(t,r){var o=typeof r,i;return r==null||o==="boolean"?_c(r):(o==="number"?cn:o==="string"?(i=Cr(r))?(r=i,Ml):ih:r instanceof Cr?Ml:r instanceof Date?bv:kv(r)?Nv:Array.isArray(r)?jv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Cv:cn)(t,r)}var Op=180/Math.PI,pc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lh(t,r,o,i,l,c){var d,f,h;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(h=t*o+r*i)&&(o-=t*h,i-=r*h),(f=Math.sqrt(o*o+i*i))&&(o/=f,i/=f,h/=f),t*i<r*o&&(t=-t,r=-r,h=-h,d=-d),{translateX:l,translateY:c,rotate:Math.atan2(r,t)*Op,skewX:Math.atan(h)*Op,scaleX:d,scaleY:f}}var cl;function Mv(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?pc:lh(r.a,r.b,r.c,r.d,r.e,r.f)}function _v(t){return t==null||(cl||(cl=document.createElementNS("http://www.w3.org/2000/svg","g")),cl.setAttribute("transform",t),!(t=cl.transform.baseVal.consolidate()))?pc:(t=t.matrix,lh(t.a,t.b,t.c,t.d,t.e,t.f))}function ah(t,r,o,i){function l(g){return g.length?g.pop()+" ":""}function c(g,x,m,y,w,S){if(g!==m||x!==y){var C=w.push("translate(",null,r,null,o);S.push({i:C-4,x:cn(g,m)},{i:C-2,x:cn(x,y)})}else(m||y)&&w.push("translate("+m+r+y+o)}function d(g,x,m,y){g!==x?(g-x>180?x+=360:x-g>180&&(g+=360),y.push({i:m.push(l(m)+"rotate(",null,i)-2,x:cn(g,x)})):x&&m.push(l(m)+"rotate("+x+i)}function f(g,x,m,y){g!==x?y.push({i:m.push(l(m)+"skewX(",null,i)-2,x:cn(g,x)}):x&&m.push(l(m)+"skewX("+x+i)}function h(g,x,m,y,w,S){if(g!==m||x!==y){var C=w.push(l(w)+"scale(",null,",",null,")");S.push({i:C-4,x:cn(g,m)},{i:C-2,x:cn(x,y)})}else(m!==1||y!==1)&&w.push(l(w)+"scale("+m+","+y+")")}return function(g,x){var m=[],y=[];return g=t(g),x=t(x),c(g.translateX,g.translateY,x.translateX,x.translateY,m,y),d(g.rotate,x.rotate,m,y),f(g.skewX,x.skewX,m,y),h(g.scaleX,g.scaleY,x.scaleX,x.scaleY,m,y),g=x=null,function(w){for(var S=-1,C=y.length,N;++S<C;)m[(N=y[S]).i]=N.x(w);return m.join("")}}}var Pv=ah(Mv,"px, ","px)","deg)"),Dv=ah(_v,", ",")",")"),Tv=1e-12;function Lp(t){return((t=Math.exp(t))+1/t)/2}function Ov(t){return((t=Math.exp(t))-1/t)/2}function Lv(t){return((t=Math.exp(2*t))-1)/(t+1)}const Sl=(function t(r,o,i){function l(c,d){var f=c[0],h=c[1],g=c[2],x=d[0],m=d[1],y=d[2],w=x-f,S=m-h,C=w*w+S*S,N,b;if(C<Tv)b=Math.log(y/g)/r,N=function(B){return[f+B*w,h+B*S,g*Math.exp(r*B*b)]};else{var O=Math.sqrt(C),k=(y*y-g*g+i*C)/(2*g*o*O),T=(y*y-g*g-i*C)/(2*y*o*O),M=Math.log(Math.sqrt(k*k+1)-k),L=Math.log(Math.sqrt(T*T+1)-T);b=(L-M)/r,N=function(B){var Y=B*b,q=Lp(M),F=g/(o*O)*(q*Lv(r*Y+M)-Ov(M));return[f+F*w,h+F*S,g*q/Lp(r*Y+M)]}}return N.duration=b*1e3*r/Math.SQRT2,N}return l.rho=function(c){var d=Math.max(.001,+c),f=d*d,h=f*f;return t(d,f,h)},l})(Math.SQRT2,2,4);var yo=0,ws=0,gs=0,uh=1e3,_l,Ss,Pl=0,Ir=0,Fl=0,Es=typeof performance=="object"&&performance.now?performance:Date,ch=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pc(){return Ir||(ch(Av),Ir=Es.now()+Fl)}function Av(){Ir=0}function Dl(){this._call=this._time=this._next=null}Dl.prototype=dh.prototype={constructor:Dl,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?Pc():+o)+(r==null?0:+r),!this._next&&Ss!==this&&(Ss?Ss._next=this:_l=this,Ss=this),this._call=t,this._time=o,mc()},stop:function(){this._call&&(this._call=null,this._time=1/0,mc())}};function dh(t,r,o){var i=new Dl;return i.restart(t,r,o),i}function $v(){Pc(),++yo;for(var t=_l,r;t;)(r=Ir-t._time)>=0&&t._call.call(void 0,r),t=t._next;--yo}function Ap(){Ir=(Pl=Es.now())+Fl,yo=ws=0;try{$v()}finally{yo=0,Rv(),Ir=0}}function zv(){var t=Es.now(),r=t-Pl;r>uh&&(Fl-=r,Pl=t)}function Rv(){for(var t,r=_l,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:_l=o);Ss=t,mc(i)}function mc(t){if(!yo){ws&&(ws=clearTimeout(ws));var r=t-Ir;r>24?(t<1/0&&(ws=setTimeout(Ap,t-Es.now()-Fl)),gs&&(gs=clearInterval(gs))):(gs||(Pl=Es.now(),gs=setInterval(zv,uh)),yo=1,ch(Ap))}}function $p(t,r,o){var i=new Dl;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var Fv=zl("start","end","cancel","interrupt"),Hv=[],fh=0,zp=1,hc=2,Nl=3,Rp=4,gc=5,kl=6;function Hl(t,r,o,i,l,c){var d=t.__transition;if(!d)t.__transition={};else if(o in d)return;Vv(t,o,{name:r,index:i,group:l,on:Fv,tween:Hv,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:fh})}function Dc(t,r){var o=nn(t,r);if(o.state>fh)throw new Error("too late; already scheduled");return o}function mn(t,r){var o=nn(t,r);if(o.state>Nl)throw new Error("too late; already running");return o}function nn(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function Vv(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=dh(c,0,o.time);function c(g){o.state=zp,o.timer.restart(d,o.delay,o.time),o.delay<=g&&d(g-o.delay)}function d(g){var x,m,y,w;if(o.state!==zp)return h();for(x in i)if(w=i[x],w.name===o.name){if(w.state===Nl)return $p(d);w.state===Rp?(w.state=kl,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[x]):+x<r&&(w.state=kl,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[x])}if($p(function(){o.state===Nl&&(o.state=Rp,o.timer.restart(f,o.delay,o.time),f(g))}),o.state=hc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===hc){for(o.state=Nl,l=new Array(y=o.tween.length),x=0,m=-1;x<y;++x)(w=o.tween[x].value.call(t,t.__data__,o.index,o.group))&&(l[++m]=w);l.length=m+1}}function f(g){for(var x=g<o.duration?o.ease.call(null,g/o.duration):(o.timer.restart(h),o.state=gc,1),m=-1,y=l.length;++m<y;)l[m].call(t,x);o.state===gc&&(o.on.call("end",t,t.__data__,o.index,o.group),h())}function h(){o.state=kl,o.timer.stop(),delete i[r];for(var g in i)return;delete t.__transition}}function jl(t,r){var o=t.__transition,i,l,c=!0,d;if(o){r=r==null?null:r+"";for(d in o){if((i=o[d]).name!==r){c=!1;continue}l=i.state>hc&&i.state<gc,i.state=kl,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[d]}c&&delete t.__transition}}function Bv(t){return this.each(function(){jl(this,t)})}function Wv(t,r){var o,i;return function(){var l=mn(this,t),c=l.tween;if(c!==o){i=o=c;for(var d=0,f=i.length;d<f;++d)if(i[d].name===r){i=i.slice(),i.splice(d,1);break}}l.tween=i}}function Uv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var c=mn(this,t),d=c.tween;if(d!==i){l=(i=d).slice();for(var f={name:r,value:o},h=0,g=l.length;h<g;++h)if(l[h].name===r){l[h]=f;break}h===g&&l.push(f)}c.tween=l}}function Yv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=nn(this.node(),o).tween,l=0,c=i.length,d;l<c;++l)if((d=i[l]).name===t)return d.value;return null}return this.each((r==null?Wv:Uv)(o,t,r))}function Tc(t,r,o){var i=t._id;return t.each(function(){var l=mn(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return nn(l,i).value[r]}}function ph(t,r){var o;return(typeof r=="number"?cn:r instanceof Cr?Ml:(o=Cr(r))?(r=o,Ml):ih)(t,r)}function Xv(t){return function(){this.removeAttribute(t)}}function Gv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Kv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttribute(t);return d===l?null:d===i?c:c=r(i=d,o)}}function Qv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===l?null:d===i?c:c=r(i=d,o)}}function qv(t,r,o){var i,l,c;return function(){var d,f=o(this),h;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),h=f+"",d===h?null:d===i&&h===l?c:(l=h,c=r(i=d,f)))}}function Zv(t,r,o){var i,l,c;return function(){var d,f=o(this),h;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),h=f+"",d===h?null:d===i&&h===l?c:(l=h,c=r(i=d,f)))}}function Jv(t,r){var o=Rl(t),i=o==="transform"?Dv:ph;return this.attrTween(t,typeof r=="function"?(o.local?Zv:qv)(o,i,Tc(this,"attr."+t,r)):r==null?(o.local?Gv:Xv)(o):(o.local?Qv:Kv)(o,i,r))}function ew(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function tw(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function nw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&tw(t,c)),o}return l._value=r,l}function rw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&ew(t,c)),o}return l._value=r,l}function ow(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=Rl(t);return this.tween(o,(i.local?nw:rw)(i,r))}function sw(t,r){return function(){Dc(this,t).delay=+r.apply(this,arguments)}}function iw(t,r){return r=+r,function(){Dc(this,t).delay=r}}function lw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?sw:iw)(r,t)):nn(this.node(),r).delay}function aw(t,r){return function(){mn(this,t).duration=+r.apply(this,arguments)}}function uw(t,r){return r=+r,function(){mn(this,t).duration=r}}function cw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?aw:uw)(r,t)):nn(this.node(),r).duration}function dw(t,r){if(typeof r!="function")throw new Error;return function(){mn(this,t).ease=r}}function fw(t){var r=this._id;return arguments.length?this.each(dw(r,t)):nn(this.node(),r).ease}function pw(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;mn(this,t).ease=o}}function mw(t){if(typeof t!="function")throw new Error;return this.each(pw(this._id,t))}function hw(t){typeof t!="function"&&(t=Wm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],h,g=0;g<d;++g)(h=c[g])&&t.call(h,h.__data__,g,c)&&f.push(h);return new In(i,this._parents,this._name,this._id)}function gw(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,c=Math.min(i,l),d=new Array(i),f=0;f<c;++f)for(var h=r[f],g=o[f],x=h.length,m=d[f]=new Array(x),y,w=0;w<x;++w)(y=h[w]||g[w])&&(m[w]=y);for(;f<i;++f)d[f]=r[f];return new In(d,this._parents,this._name,this._id)}function xw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function yw(t,r,o){var i,l,c=xw(r)?Dc:mn;return function(){var d=c(this,t),f=d.on;f!==i&&(l=(i=f).copy()).on(r,o),d.on=l}}function vw(t,r){var o=this._id;return arguments.length<2?nn(this.node(),o).on.on(t):this.each(yw(o,t,r))}function ww(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function Sw(){return this.on("end.remove",ww(this._id))}function Nw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Ic(t));for(var i=this._groups,l=i.length,c=new Array(l),d=0;d<l;++d)for(var f=i[d],h=f.length,g=c[d]=new Array(h),x,m,y=0;y<h;++y)(x=f[y])&&(m=t.call(x,x.__data__,y,f))&&("__data__"in x&&(m.__data__=x.__data__),g[y]=m,Hl(g[y],r,o,y,g,nn(x,o)));return new In(c,this._parents,r,o)}function kw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Bm(t));for(var i=this._groups,l=i.length,c=[],d=[],f=0;f<l;++f)for(var h=i[f],g=h.length,x,m=0;m<g;++m)if(x=h[m]){for(var y=t.call(x,x.__data__,m,h),w,S=nn(x,o),C=0,N=y.length;C<N;++C)(w=y[C])&&Hl(w,r,o,C,y,S);c.push(y),d.push(x)}return new In(c,d,r,o)}var jw=Ls.prototype.constructor;function bw(){return new jw(this._groups,this._parents)}function Cw(t,r){var o,i,l;return function(){var c=xo(this,t),d=(this.style.removeProperty(t),xo(this,t));return c===d?null:c===o&&d===i?l:l=r(o=c,i=d)}}function mh(t){return function(){this.style.removeProperty(t)}}function Iw(t,r,o){var i,l=o+"",c;return function(){var d=xo(this,t);return d===l?null:d===i?c:c=r(i=d,o)}}function Ew(t,r,o){var i,l,c;return function(){var d=xo(this,t),f=o(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(t),xo(this,t))),d===h?null:d===i&&h===l?c:(l=h,c=r(i=d,f))}}function Mw(t,r){var o,i,l,c="style."+r,d="end."+c,f;return function(){var h=mn(this,t),g=h.on,x=h.value[c]==null?f||(f=mh(r)):void 0;(g!==o||l!==x)&&(i=(o=g).copy()).on(d,l=x),h.on=i}}function _w(t,r,o){var i=(t+="")=="transform"?Pv:ph;return r==null?this.styleTween(t,Cw(t,i)).on("end.style."+t,mh(t)):typeof r=="function"?this.styleTween(t,Ew(t,i,Tc(this,"style."+t,r))).each(Mw(this._id,t)):this.styleTween(t,Iw(t,i,r),o).on("end.style."+t,null)}function Pw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function Dw(t,r,o){var i,l;function c(){var d=r.apply(this,arguments);return d!==l&&(i=(l=d)&&Pw(t,d,o)),i}return c._value=r,c}function Tw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,Dw(t,r,o??""))}function Ow(t){return function(){this.textContent=t}}function Lw(t){return function(){var r=t(this);this.textContent=r??""}}function Aw(t){return this.tween("text",typeof t=="function"?Lw(Tc(this,"text",t)):Ow(t==null?"":t+""))}function $w(t){return function(r){this.textContent=t.call(this,r)}}function zw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&$w(l)),r}return i._value=t,i}function Rw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zw(t))}function Fw(){for(var t=this._name,r=this._id,o=hh(),i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,h,g=0;g<f;++g)if(h=d[g]){var x=nn(h,r);Hl(h,t,o,g,d,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new In(i,this._parents,t,o)}function Hw(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(c,d){var f={value:d},h={value:function(){--l===0&&c()}};o.each(function(){var g=mn(this,i),x=g.on;x!==t&&(r=(t=x).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(h)),g.on=r}),l===0&&c()})}var Vw=0;function In(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function hh(){return++Vw}var bn=Ls.prototype;In.prototype={constructor:In,select:Nw,selectAll:kw,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:hw,merge:gw,selection:bw,transition:Fw,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:vw,attr:Jv,attrTween:ow,style:_w,styleTween:Tw,text:Aw,textTween:Rw,remove:Sw,tween:Yv,delay:lw,duration:cw,ease:fw,easeVarying:mw,end:Hw,[Symbol.iterator]:bn[Symbol.iterator]};function Bw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ww={time:null,delay:0,duration:250,ease:Bw};function Uw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Yw(t){var r,o;t instanceof In?(r=t._id,t=t._name):(r=hh(),(o=Ww).time=Pc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,h,g=0;g<f;++g)(h=d[g])&&Hl(h,t,r,g,d,o||Uw(h,r));return new In(i,this._parents,t,r)}Ls.prototype.interrupt=Bv;Ls.prototype.transition=Yw;const dl=t=>()=>t;function Xw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function Cn(t,r,o){this.k=t,this.x=r,this.y=o}Cn.prototype={constructor:Cn,scale:function(t){return t===1?this:new Cn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new Cn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vl=new Cn(1,0,0);gh.prototype=Cn.prototype;function gh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Vl;return t.__zoom}function Zu(t){t.stopImmediatePropagation()}function xs(t){t.preventDefault(),t.stopImmediatePropagation()}function Gw(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Kw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Fp(){return this.__zoom||Vl}function Qw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],c=t.invertY(r[0][1])-o[0][1],d=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function xh(){var t=Gw,r=Kw,o=Zw,i=Qw,l=qw,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,h=Sl,g=zl("start","zoom","end"),x,m,y,w=500,S=150,C=0,N=10;function b($){$.property("__zoom",Fp).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",F).filter(l).on("touchstart.zoom",z).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function($,Q,W,_){var D=$.selection?$.selection():$;D.property("__zoom",Fp),$!==D?M($,Q,W,_):D.interrupt().each(function(){L(this,arguments).event(_).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},b.scaleBy=function($,Q,W,_){b.scaleTo($,function(){var D=this.__zoom.k,j=typeof Q=="function"?Q.apply(this,arguments):Q;return D*j},W,_)},b.scaleTo=function($,Q,W,_){b.transform($,function(){var D=r.apply(this,arguments),j=this.__zoom,R=W==null?T(D):typeof W=="function"?W.apply(this,arguments):W,E=j.invert(R),P=typeof Q=="function"?Q.apply(this,arguments):Q;return o(k(O(j,P),R,E),D,d)},W,_)},b.translateBy=function($,Q,W,_){b.transform($,function(){return o(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof W=="function"?W.apply(this,arguments):W),r.apply(this,arguments),d)},null,_)},b.translateTo=function($,Q,W,_,D){b.transform($,function(){var j=r.apply(this,arguments),R=this.__zoom,E=_==null?T(j):typeof _=="function"?_.apply(this,arguments):_;return o(Vl.translate(E[0],E[1]).scale(R.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof W=="function"?-W.apply(this,arguments):-W),j,d)},_,D)};function O($,Q){return Q=Math.max(c[0],Math.min(c[1],Q)),Q===$.k?$:new Cn(Q,$.x,$.y)}function k($,Q,W){var _=Q[0]-W[0]*$.k,D=Q[1]-W[1]*$.k;return _===$.x&&D===$.y?$:new Cn($.k,_,D)}function T($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function M($,Q,W,_){$.on("start.zoom",function(){L(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(_).end()}).tween("zoom",function(){var D=this,j=arguments,R=L(D,j).event(_),E=r.apply(D,j),P=W==null?T(E):typeof W=="function"?W.apply(D,j):W,Z=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),J=D.__zoom,oe=typeof Q=="function"?Q.apply(D,j):Q,ie=h(J.invert(P).concat(Z/J.k),oe.invert(P).concat(Z/oe.k));return function(le){if(le===1)le=oe;else{var se=ie(le),G=Z/se[2];le=new Cn(G,P[0]-se[0]*G,P[1]-se[1]*G)}R.zoom(null,le)}})}function L($,Q,W){return!W&&$.__zooming||new B($,Q)}function B($,Q){this.that=$,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=r.apply($,Q),this.taps=0}B.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,Q){return this.mouse&&$!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var Q=Mt(this.that).datum();g.call($,this.that,new Xw($,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:g}),Q)}};function Y($,...Q){if(!t.apply(this,arguments))return;var W=L(this,Q).event($),_=this.__zoom,D=Math.max(c[0],Math.min(c[1],_.k*Math.pow(2,i.apply(this,arguments)))),j=Zt($);if(W.wheel)(W.mouse[0][0]!==j[0]||W.mouse[0][1]!==j[1])&&(W.mouse[1]=_.invert(W.mouse[0]=j)),clearTimeout(W.wheel);else{if(_.k===D)return;W.mouse=[j,_.invert(j)],jl(this),W.start()}xs($),W.wheel=setTimeout(R,S),W.zoom("mouse",o(k(O(_,D),W.mouse[0],W.mouse[1]),W.extent,d));function R(){W.wheel=null,W.end()}}function q($,...Q){if(y||!t.apply(this,arguments))return;var W=$.currentTarget,_=L(this,Q,!0).event($),D=Mt($.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",Z,!0),j=Zt($,W),R=$.clientX,E=$.clientY;eh($.view),Zu($),_.mouse=[j,this.__zoom.invert(j)],jl(this),_.start();function P(J){if(xs(J),!_.moved){var oe=J.clientX-R,ie=J.clientY-E;_.moved=oe*oe+ie*ie>C}_.event(J).zoom("mouse",o(k(_.that.__zoom,_.mouse[0]=Zt(J,W),_.mouse[1]),_.extent,d))}function Z(J){D.on("mousemove.zoom mouseup.zoom",null),th(J.view,_.moved),xs(J),_.event(J).end()}}function F($,...Q){if(t.apply(this,arguments)){var W=this.__zoom,_=Zt($.changedTouches?$.changedTouches[0]:$,this),D=W.invert(_),j=W.k*($.shiftKey?.5:2),R=o(k(O(W,j),_,D),r.apply(this,Q),d);xs($),f>0?Mt(this).transition().duration(f).call(M,R,_,$):Mt(this).call(b.transform,R,_,$)}}function z($,...Q){if(t.apply(this,arguments)){var W=$.touches,_=W.length,D=L(this,Q,$.changedTouches.length===_).event($),j,R,E,P;for(Zu($),R=0;R<_;++R)E=W[R],P=Zt(E,this),P=[P,this.__zoom.invert(P),E.identifier],D.touch0?!D.touch1&&D.touch0[2]!==P[2]&&(D.touch1=P,D.taps=0):(D.touch0=P,j=!0,D.taps=1+!!x);x&&(x=clearTimeout(x)),j&&(D.taps<2&&(m=P[0],x=setTimeout(function(){x=null},w)),jl(this),D.start())}}function H($,...Q){if(this.__zooming){var W=L(this,Q).event($),_=$.changedTouches,D=_.length,j,R,E,P;for(xs($),j=0;j<D;++j)R=_[j],E=Zt(R,this),W.touch0&&W.touch0[2]===R.identifier?W.touch0[0]=E:W.touch1&&W.touch1[2]===R.identifier&&(W.touch1[0]=E);if(R=W.that.__zoom,W.touch1){var Z=W.touch0[0],J=W.touch0[1],oe=W.touch1[0],ie=W.touch1[1],le=(le=oe[0]-Z[0])*le+(le=oe[1]-Z[1])*le,se=(se=ie[0]-J[0])*se+(se=ie[1]-J[1])*se;R=O(R,Math.sqrt(le/se)),E=[(Z[0]+oe[0])/2,(Z[1]+oe[1])/2],P=[(J[0]+ie[0])/2,(J[1]+ie[1])/2]}else if(W.touch0)E=W.touch0[0],P=W.touch0[1];else return;W.zoom("touch",o(k(R,E,P),W.extent,d))}}function X($,...Q){if(this.__zooming){var W=L(this,Q).event($),_=$.changedTouches,D=_.length,j,R;for(Zu($),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),j=0;j<D;++j)R=_[j],W.touch0&&W.touch0[2]===R.identifier?delete W.touch0:W.touch1&&W.touch1[2]===R.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(R=Zt(R,this),Math.hypot(m[0]-R[0],m[1]-R[1])<N)){var E=Mt(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return b.wheelDelta=function($){return arguments.length?(i=typeof $=="function"?$:dl(+$),b):i},b.filter=function($){return arguments.length?(t=typeof $=="function"?$:dl(!!$),b):t},b.touchable=function($){return arguments.length?(l=typeof $=="function"?$:dl(!!$),b):l},b.extent=function($){return arguments.length?(r=typeof $=="function"?$:dl([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),b):r},b.scaleExtent=function($){return arguments.length?(c[0]=+$[0],c[1]=+$[1],b):[c[0],c[1]]},b.translateExtent=function($){return arguments.length?(d[0][0]=+$[0][0],d[1][0]=+$[1][0],d[0][1]=+$[0][1],d[1][1]=+$[1][1],b):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},b.constrain=function($){return arguments.length?(o=$,b):o},b.duration=function($){return arguments.length?(f=+$,b):f},b.interpolate=function($){return arguments.length?(h=$,b):h},b.on=function(){var $=g.on.apply(g,arguments);return $===g?b:$},b.clickDistance=function($){return arguments.length?(C=($=+$)*$,b):Math.sqrt(C)},b.tapDistance=function($){return arguments.length?(N=+$,b):N},b}const pn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ms=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],yh=["Enter"," ","Escape"],vh={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var vo;(function(t){t.Strict="strict",t.Loose="loose"})(vo||(vo={}));var br;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(br||(br={}));var _s;(function(t){t.Partial="partial",t.Full="full"})(_s||(_s={}));const wh={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Jn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Jn||(Jn={}));var Tl;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Tl||(Tl={}));var Ne;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ne||(Ne={}));const Hp={[Ne.Left]:Ne.Right,[Ne.Right]:Ne.Left,[Ne.Top]:Ne.Bottom,[Ne.Bottom]:Ne.Top};function Sh(t){return t===null?null:t?"valid":"invalid"}const Nh=t=>"id"in t&&"source"in t&&"target"in t,Jw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Oc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),$s=(t,r=[0,0])=>{const{width:o,height:i}=En(t),l=t.origin??r,c=o*l[0],d=i*l[1];return{x:t.position.x-c,y:t.position.y-d}},e1=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const c=typeof l=="string";let d=!r.nodeLookup&&!c?l:void 0;r.nodeLookup&&(d=c?r.nodeLookup.get(l):Oc(l)?l:r.nodeLookup.get(l.id));const f=d?Ol(d,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bl(i,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Wl(o)},zs=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Bl(o,Ol(l)),i=!0)}),i?Wl(o):{x:0,y:0,width:0,height:0}},Lc=(t,r,[o,i,l]=[0,0,1],c=!1,d=!1)=>{const f={...Fs(r,[o,i,l]),width:r.width/l,height:r.height/l},h=[];for(const g of t.values()){const{measured:x,selectable:m=!0,hidden:y=!1}=g;if(d&&!m||y)continue;const w=x.width??g.width??g.initialWidth??null,S=x.height??g.height??g.initialHeight??null,C=Ps(f,So(g)),N=(w??0)*(S??0),b=c&&C>0;(!g.internals.handleBounds||b||C>=N||g.dragging)&&h.push(g)}return h},t1=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function n1(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function r1({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:c},d){if(t.size===0)return Promise.resolve(!0);const f=n1(t,d),h=zs(f),g=Ac(h,r,o,(d==null?void 0:d.minZoom)??l,(d==null?void 0:d.maxZoom)??c,(d==null?void 0:d.padding)??.1);return await i.setViewport(g,{duration:d==null?void 0:d.duration,ease:d==null?void 0:d.ease,interpolate:d==null?void 0:d.interpolate}),Promise.resolve(!0)}function kh({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:c}){const d=o.get(t),f=d.parentId?o.get(d.parentId):void 0,{x:h,y:g}=f?f.internals.positionAbsolute:{x:0,y:0},x=d.origin??i;let m=d.extent||l;if(d.extent==="parent"&&!d.expandParent)if(!f)c==null||c("005",pn.error005());else{const w=f.measured.width,S=f.measured.height;w&&S&&(m=[[h,g],[h+w,g+S]])}else f&&No(d.extent)&&(m=[[d.extent[0][0]+h,d.extent[0][1]+g],[d.extent[1][0]+h,d.extent[1][1]+g]]);const y=No(m)?Er(r,m,d.measured):r;return(d.measured.width===void 0||d.measured.height===void 0)&&(c==null||c("015",pn.error015())),{position:{x:y.x-h+(d.measured.width??0)*x[0],y:y.y-g+(d.measured.height??0)*x[1]},positionAbsolute:y}}async function o1({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const c=new Set(t.map(y=>y.id)),d=[];for(const y of o){if(y.deletable===!1)continue;const w=c.has(y.id),S=!w&&y.parentId&&d.find(C=>C.id===y.parentId);(w||S)&&d.push(y)}const f=new Set(r.map(y=>y.id)),h=i.filter(y=>y.deletable!==!1),x=t1(d,h);for(const y of h)f.has(y.id)&&!x.find(S=>S.id===y.id)&&x.push(y);if(!l)return{edges:x,nodes:d};const m=await l({nodes:d,edges:x});return typeof m=="boolean"?m?{edges:x,nodes:d}:{edges:[],nodes:[]}:m}const wo=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),Er=(t={x:0,y:0},r,o)=>({x:wo(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:wo(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function jh(t,r,o){const{width:i,height:l}=En(o),{x:c,y:d}=o.internals.positionAbsolute;return Er(t,[[c,d],[c+i,d+l]],r)}const Vp=(t,r,o)=>t<r?wo(Math.abs(t-r),1,r)/r:t>o?-wo(Math.abs(t-o),1,r)/r:0,bh=(t,r,o=15,i=40)=>{const l=Vp(t.x,i,r.width-i)*o,c=Vp(t.y,i,r.height-i)*o;return[l,c]},Bl=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),xc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Wl=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),So=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Oc(t)?t.internals.positionAbsolute:$s(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0}},Ol=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Oc(t)?t.internals.positionAbsolute:$s(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0)}},Ch=(t,r)=>Wl(Bl(xc(t),xc(r))),Ps=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Bp=t=>en(t.width)&&en(t.height)&&en(t.x)&&en(t.y),en=t=>!isNaN(t)&&isFinite(t),s1=(t,r)=>{},Rs=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),Fs=({x:t,y:r},[o,i,l],c=!1,d=[1,1])=>{const f={x:(t-o)/l,y:(r-i)/l};return c?Rs(f,d):f},Ll=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function co(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function i1(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=co(t,o),l=co(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=co(t.top??t.y??0,o),l=co(t.bottom??t.y??0,o),c=co(t.left??t.x??0,r),d=co(t.right??t.x??0,r);return{top:i,right:d,bottom:l,left:c,x:c+d,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function l1(t,r,o,i,l,c){const{x:d,y:f}=Ll(t,[r,o,i]),{x:h,y:g}=Ll({x:t.x+t.width,y:t.y+t.height},[r,o,i]),x=l-h,m=c-g;return{left:Math.floor(d),top:Math.floor(f),right:Math.floor(x),bottom:Math.floor(m)}}const Ac=(t,r,o,i,l,c)=>{const d=i1(c,r,o),f=(r-d.x)/t.width,h=(o-d.y)/t.height,g=Math.min(f,h),x=wo(g,i,l),m=t.x+t.width/2,y=t.y+t.height/2,w=r/2-m*x,S=o/2-y*x,C=l1(t,w,S,x,r,o),N={left:Math.min(C.left-d.left,0),top:Math.min(C.top-d.top,0),right:Math.min(C.right-d.right,0),bottom:Math.min(C.bottom-d.bottom,0)};return{x:w-N.left+N.right,y:S-N.top+N.bottom,zoom:x}},Ds=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function No(t){return t!=null&&t!=="parent"}function En(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function Ih(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function Eh(t,r={width:0,height:0},o,i,l){const c={...t},d=i.get(o);if(d){const f=d.origin||l;c.x+=d.internals.positionAbsolute.x-(r.width??0)*f[0],c.y+=d.internals.positionAbsolute.y-(r.height??0)*f[1]}return c}function Wp(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function a1(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function u1(t){return{...vh,...t||{}}}function js(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:c,y:d}=tn(t),f=Fs({x:c-((l==null?void 0:l.left)??0),y:d-((l==null?void 0:l.top)??0)},i),{x:h,y:g}=o?Rs(f,r):f;return{xSnapped:h,ySnapped:g,...f}}const $c=t=>({width:t.offsetWidth,height:t.offsetHeight}),Mh=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},c1=["INPUT","SELECT","TEXTAREA"];function _h(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:c1.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Ph=t=>"clientX"in t,tn=(t,r)=>{var c,d;const o=Ph(t),i=o?t.clientX:(c=t.touches)==null?void 0:c[0].clientX,l=o?t.clientY:(d=t.touches)==null?void 0:d[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Up=(t,r,o,i,l)=>{const c=r.querySelectorAll(`.${t}`);return!c||!c.length?null:Array.from(c).map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:l,position:d.getAttribute("data-handlepos"),x:(f.left-o.left)/i,y:(f.top-o.top)/i,...$c(d)}})};function Dh({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:f}){const h=t*.125+l*.375+d*.375+o*.125,g=r*.125+c*.375+f*.375+i*.125,x=Math.abs(h-t),m=Math.abs(g-r);return[h,g,x,m]}function fl(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Yp({pos:t,x1:r,y1:o,x2:i,y2:l,c}){switch(t){case Ne.Left:return[r-fl(r-i,c),o];case Ne.Right:return[r+fl(i-r,c),o];case Ne.Top:return[r,o-fl(o-l,c)];case Ne.Bottom:return[r,o+fl(l-o,c)]}}function Ul({sourceX:t,sourceY:r,sourcePosition:o=Ne.Bottom,targetX:i,targetY:l,targetPosition:c=Ne.Top,curvature:d=.25}){const[f,h]=Yp({pos:o,x1:t,y1:r,x2:i,y2:l,c:d}),[g,x]=Yp({pos:c,x1:i,y1:l,x2:t,y2:r,c:d}),[m,y,w,S]=Dh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:f,sourceControlY:h,targetControlX:g,targetControlY:x});return[`M${t},${r} C${f},${h} ${g},${x} ${i},${l}`,m,y,w,S]}function Th({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,c=o<t?o+l:o-l,d=Math.abs(i-r)/2,f=i<r?i+d:i-d;return[c,f,l,d]}function d1({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:c="basic"}){if(c==="manual")return i;const d=l&&o?i+1e3:i,f=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return d+f}function f1({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const c=Bl(Ol(t),Ol(r));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return Ps(d,Wl(c))>0}const p1=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,m1=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),h1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||p1;let l;return Nh(t)?l={...t}:l={...t,id:i(t)},m1(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Oh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,c,d,f]=Th({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,c,d,f]}const Xp={[Ne.Left]:{x:-1,y:0},[Ne.Right]:{x:1,y:0},[Ne.Top]:{x:0,y:-1},[Ne.Bottom]:{x:0,y:1}},g1=({source:t,sourcePosition:r=Ne.Bottom,target:o})=>r===Ne.Left||r===Ne.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},Gp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function x1({source:t,sourcePosition:r=Ne.Bottom,target:o,targetPosition:i=Ne.Top,center:l,offset:c,stepPosition:d}){const f=Xp[r],h=Xp[i],g={x:t.x+f.x*c,y:t.y+f.y*c},x={x:o.x+h.x*c,y:o.y+h.y*c},m=g1({source:g,sourcePosition:r,target:x}),y=m.x!==0?"x":"y",w=m[y];let S=[],C,N;const b={x:0,y:0},O={x:0,y:0},[,,k,T]=Th({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(f[y]*h[y]===-1){y==="x"?(C=l.x??g.x+(x.x-g.x)*d,N=l.y??(g.y+x.y)/2):(C=l.x??(g.x+x.x)/2,N=l.y??g.y+(x.y-g.y)*d);const L=[{x:C,y:g.y},{x:C,y:x.y}],B=[{x:g.x,y:N},{x:x.x,y:N}];f[y]===w?S=y==="x"?L:B:S=y==="x"?B:L}else{const L=[{x:g.x,y:x.y}],B=[{x:x.x,y:g.y}];if(y==="x"?S=f.x===w?B:L:S=f.y===w?L:B,r===i){const H=Math.abs(t[y]-o[y]);if(H<=c){const X=Math.min(c-1,c-H);f[y]===w?b[y]=(g[y]>t[y]?-1:1)*X:O[y]=(x[y]>o[y]?-1:1)*X}}if(r!==i){const H=y==="x"?"y":"x",X=f[y]===h[H],$=g[H]>x[H],Q=g[H]<x[H];(f[y]===1&&(!X&&$||X&&Q)||f[y]!==1&&(!X&&Q||X&&$))&&(S=y==="x"?L:B)}const Y={x:g.x+b.x,y:g.y+b.y},q={x:x.x+O.x,y:x.y+O.y},F=Math.max(Math.abs(Y.x-S[0].x),Math.abs(q.x-S[0].x)),z=Math.max(Math.abs(Y.y-S[0].y),Math.abs(q.y-S[0].y));F>=z?(C=(Y.x+q.x)/2,N=S[0].y):(C=S[0].x,N=(Y.y+q.y)/2)}return[[t,{x:g.x+b.x,y:g.y+b.y},...S,{x:x.x+O.x,y:x.y+O.y},o],C,N,k,T]}function y1(t,r,o,i){const l=Math.min(Gp(t,r)/2,Gp(r,o)/2,i),{x:c,y:d}=r;if(t.x===c&&c===o.x||t.y===d&&d===o.y)return`L${c} ${d}`;if(t.y===d){const g=t.x<o.x?-1:1,x=t.y<o.y?1:-1;return`L ${c+l*g},${d}Q ${c},${d} ${c},${d+l*x}`}const f=t.x<o.x?1:-1,h=t.y<o.y?-1:1;return`L ${c},${d+l*h}Q ${c},${d} ${c+l*f},${d}`}function yc({sourceX:t,sourceY:r,sourcePosition:o=Ne.Bottom,targetX:i,targetY:l,targetPosition:c=Ne.Top,borderRadius:d=5,centerX:f,centerY:h,offset:g=20,stepPosition:x=.5}){const[m,y,w,S,C]=x1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:c,center:{x:f,y:h},offset:g,stepPosition:x});return[m.reduce((b,O,k)=>{let T="";return k>0&&k<m.length-1?T=y1(m[k-1],O,m[k+1],d):T=`${k===0?"M":"L"}${O.x} ${O.y}`,b+=T,b},""),y,w,S,C]}function Kp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function v1(t){var m;const{sourceNode:r,targetNode:o}=t;if(!Kp(r)||!Kp(o))return null;const i=r.internals.handleBounds||Qp(r.handles),l=o.internals.handleBounds||Qp(o.handles),c=qp((i==null?void 0:i.source)??[],t.sourceHandle),d=qp(t.connectionMode===vo.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!c||!d)return(m=t.onError)==null||m.call(t,"008",pn.error008(c?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=(c==null?void 0:c.position)||Ne.Bottom,h=(d==null?void 0:d.position)||Ne.Top,g=Mr(r,c,f),x=Mr(o,d,h);return{sourceX:g.x,sourceY:g.y,targetX:x.x,targetY:x.y,sourcePosition:f,targetPosition:h}}function Qp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function Mr(t,r,o=Ne.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,c=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:d,height:f}=r??En(t);if(i)return{x:l+d/2,y:c+f/2};switch((r==null?void 0:r.position)??o){case Ne.Top:return{x:l+d/2,y:c};case Ne.Right:return{x:l+d,y:c+f/2};case Ne.Bottom:return{x:l+d/2,y:c+f};case Ne.Left:return{x:l,y:c+f/2}}}function qp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function vc(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function w1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const c=new Set;return t.reduce((d,f)=>([f.markerStart||i,f.markerEnd||l].forEach(h=>{if(h&&typeof h=="object"){const g=vc(h,r);c.has(g)||(d.push({id:g,color:h.color||o,...h}),c.add(g))}}),d),[]).sort((d,f)=>d.id.localeCompare(f.id))}const Lh=1e3,S1=10,zc={nodeOrigin:[0,0],nodeExtent:Ms,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},N1={...zc,checkEquality:!0};function Rc(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function k1(t,r,o){const i=Rc(zc,o);for(const l of t.values())if(l.parentId)Hc(l,t,r,i);else{const c=$s(l,i.nodeOrigin),d=No(l.extent)?l.extent:i.nodeExtent,f=Er(c,d,En(l));l.internals.positionAbsolute=f}}function j1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const c={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(c):l.type==="target"&&i.push(c)}return{source:o,target:i}}function Fc(t){return t==="manual"}function wc(t,r,o,i={}){var g,x;const l=Rc(N1,i),c={i:0},d=new Map(r),f=l!=null&&l.elevateNodesOnSelect&&!Fc(l.zIndexMode)?Lh:0;let h=t.length>0;r.clear(),o.clear();for(const m of t){let y=d.get(m.id);if(l.checkEquality&&m===(y==null?void 0:y.internals.userNode))r.set(m.id,y);else{const w=$s(m,l.nodeOrigin),S=No(m.extent)?m.extent:l.nodeExtent,C=Er(w,S,En(m));y={...l.defaults,...m,measured:{width:(g=m.measured)==null?void 0:g.width,height:(x=m.measured)==null?void 0:x.height},internals:{positionAbsolute:C,handleBounds:j1(m,y),z:Ah(m,f,l.zIndexMode),userNode:m}},r.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(h=!1),m.parentId&&Hc(y,r,o,i,c)}return h}function b1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function Hc(t,r,o,i,l){const{elevateNodesOnSelect:c,nodeOrigin:d,nodeExtent:f,zIndexMode:h}=Rc(zc,i),g=t.parentId,x=r.get(g);if(!x){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}b1(t,o),l&&!x.parentId&&x.internals.rootParentIndex===void 0&&h==="auto"&&(x.internals.rootParentIndex=++l.i,x.internals.z=x.internals.z+l.i*S1),l&&x.internals.rootParentIndex!==void 0&&(l.i=x.internals.rootParentIndex);const m=c&&!Fc(h)?Lh:0,{x:y,y:w,z:S}=C1(t,x,d,f,m,h),{positionAbsolute:C}=t.internals,N=y!==C.x||w!==C.y;(N||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:y,y:w}:C,z:S}})}function Ah(t,r,o){const i=en(t.zIndex)?t.zIndex:0;return Fc(o)?i:i+(t.selected?r:0)}function C1(t,r,o,i,l,c){const{x:d,y:f}=r.internals.positionAbsolute,h=En(t),g=$s(t,o),x=No(t.extent)?Er(g,t.extent,h):g;let m=Er({x:d+x.x,y:f+x.y},i,h);t.extent==="parent"&&(m=jh(m,h,r));const y=Ah(t,l,c),w=r.internals.z??0;return{x:m.x,y:m.y,z:w>=y?w+1:y}}function Vc(t,r,o,i=[0,0]){var d;const l=[],c=new Map;for(const f of t){const h=r.get(f.parentId);if(!h)continue;const g=((d=c.get(f.parentId))==null?void 0:d.expandedRect)??So(h),x=Ch(g,f.rect);c.set(f.parentId,{expandedRect:x,parent:h})}return c.size>0&&c.forEach(({expandedRect:f,parent:h},g)=>{var k;const x=h.internals.positionAbsolute,m=En(h),y=h.origin??i,w=f.x<x.x?Math.round(Math.abs(x.x-f.x)):0,S=f.y<x.y?Math.round(Math.abs(x.y-f.y)):0,C=Math.max(m.width,Math.round(f.width)),N=Math.max(m.height,Math.round(f.height)),b=(C-m.width)*y[0],O=(N-m.height)*y[1];(w>0||S>0||b||O)&&(l.push({id:g,type:"position",position:{x:h.position.x-w+b,y:h.position.y-S+O}}),(k=o.get(g))==null||k.forEach(T=>{t.some(M=>M.id===T.id)||l.push({id:T.id,type:"position",position:{x:T.position.x+w,y:T.position.y+S}})})),(m.width<f.width||m.height<f.height||w||S)&&l.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:C+(w?y[0]*w-b:0),height:N+(S?y[1]*S-O:0)}})}),l}function I1(t,r,o,i,l,c,d){const f=i==null?void 0:i.querySelector(".xyflow__viewport");let h=!1;if(!f)return{changes:[],updatedInternals:h};const g=[],x=window.getComputedStyle(f),{m22:m}=new window.DOMMatrixReadOnly(x.transform),y=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),h=!0;continue}const C=$c(w.nodeElement),N=S.measured.width!==C.width||S.measured.height!==C.height;if(!!(C.width&&C.height&&(N||!S.internals.handleBounds||w.force))){const O=w.nodeElement.getBoundingClientRect(),k=No(S.extent)?S.extent:c;let{positionAbsolute:T}=S.internals;S.parentId&&S.extent==="parent"?T=jh(T,C,r.get(S.parentId)):k&&(T=Er(T,k,C));const M={...S,measured:C,internals:{...S.internals,positionAbsolute:T,handleBounds:{source:Up("source",w.nodeElement,O,m,S.id),target:Up("target",w.nodeElement,O,m,S.id)}}};r.set(S.id,M),S.parentId&&Hc(M,r,o,{nodeOrigin:l,zIndexMode:d}),h=!0,N&&(g.push({id:S.id,type:"dimensions",dimensions:C}),S.expandParent&&S.parentId&&y.push({id:S.id,parentId:S.parentId,rect:So(M,l)}))}}if(y.length>0){const w=Vc(y,r,o,l);g.push(...w)}return{changes:g,updatedInternals:h}}async function E1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:c}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const d=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,c]],i),f=!!d&&(d.x!==o[0]||d.y!==o[1]||d.k!==o[2]);return Promise.resolve(f)}function Zp(t,r,o,i,l,c){let d=l;const f=i.get(d)||new Map;i.set(d,f.set(o,r)),d=`${l}-${t}`;const h=i.get(d)||new Map;if(i.set(d,h.set(o,r)),c){d=`${l}-${t}-${c}`;const g=i.get(d)||new Map;i.set(d,g.set(o,r))}}function $h(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:c,sourceHandle:d=null,targetHandle:f=null}=i,h={edgeId:i.id,source:l,target:c,sourceHandle:d,targetHandle:f},g=`${l}-${d}--${c}-${f}`,x=`${c}-${f}--${l}-${d}`;Zp("source",h,x,t,l,d),Zp("target",h,g,t,c,f),r.set(i.id,i)}}function zh(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:zh(o,r):!1}function Jp(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function M1(t,r,o,i){const l=new Map;for(const[c,d]of t)if((d.selected||d.id===i)&&(!d.parentId||!zh(d,t))&&(d.draggable||r&&typeof d.draggable>"u")){const f=t.get(c);f&&l.set(c,{id:c,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return l}function Ju({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var d,f,h;const l=[];for(const[g,x]of r){const m=(d=o.get(g))==null?void 0:d.internals.userNode;m&&l.push({...m,position:x.position,dragging:i})}if(!t)return[l[0],l];const c=(f=o.get(t))==null?void 0:f.internals.userNode;return[c?{...c,position:((h=r.get(t))==null?void 0:h.position)||c.position,dragging:i}:l[0],l]}function _1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const c={x:o-l.distance.x,y:i-l.distance.y},d=Rs(c,r);return{x:d.x-c.x,y:d.y-c.y}}function P1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let c={x:null,y:null},d=0,f=new Map,h=!1,g={x:0,y:0},x=null,m=!1,y=null,w=!1,S=!1,C=null;function N({noDragClassName:O,handleSelector:k,domNode:T,isSelectable:M,nodeId:L,nodeClickDistance:B=0}){y=Mt(T);function Y({x:H,y:X}){const{nodeLookup:$,nodeExtent:Q,snapGrid:W,snapToGrid:_,nodeOrigin:D,onNodeDrag:j,onSelectionDrag:R,onError:E,updateNodePositions:P}=r();c={x:H,y:X};let Z=!1;const J=f.size>1,oe=J&&Q?xc(zs(f)):null,ie=J&&_?_1({dragItems:f,snapGrid:W,x:H,y:X}):null;for(const[le,se]of f){if(!$.has(le))continue;let G={x:H-se.distance.x,y:X-se.distance.y};_&&(G=ie?{x:Math.round(G.x+ie.x),y:Math.round(G.y+ie.y)}:Rs(G,W));let ne=null;if(J&&Q&&!se.extent&&oe){const{positionAbsolute:me}=se.internals,ke=me.x-oe.x+Q[0][0],Ie=me.x+se.measured.width-oe.x2+Q[1][0],Ee=me.y-oe.y+Q[0][1],Le=me.y+se.measured.height-oe.y2+Q[1][1];ne=[[ke,Ee],[Ie,Le]]}const{position:pe,positionAbsolute:he}=kh({nodeId:le,nextPosition:G,nodeLookup:$,nodeExtent:ne||Q,nodeOrigin:D,onError:E});Z=Z||se.position.x!==pe.x||se.position.y!==pe.y,se.position=pe,se.internals.positionAbsolute=he}if(S=S||Z,!!Z&&(P(f,!0),C&&(i||j||!L&&R))){const[le,se]=Ju({nodeId:L,dragItems:f,nodeLookup:$});i==null||i(C,f,le,se),j==null||j(C,le,se),L||R==null||R(C,se)}}async function q(){if(!x)return;const{transform:H,panBy:X,autoPanSpeed:$,autoPanOnNodeDrag:Q}=r();if(!Q){h=!1,cancelAnimationFrame(d);return}const[W,_]=bh(g,x,$);(W!==0||_!==0)&&(c.x=(c.x??0)-W/H[2],c.y=(c.y??0)-_/H[2],await X({x:W,y:_})&&Y(c)),d=requestAnimationFrame(q)}function F(H){var J;const{nodeLookup:X,multiSelectionActive:$,nodesDraggable:Q,transform:W,snapGrid:_,snapToGrid:D,selectNodesOnDrag:j,onNodeDragStart:R,onSelectionDragStart:E,unselectNodesAndEdges:P}=r();m=!0,(!j||!M)&&!$&&L&&((J=X.get(L))!=null&&J.selected||P()),M&&j&&L&&(t==null||t(L));const Z=js(H.sourceEvent,{transform:W,snapGrid:_,snapToGrid:D,containerBounds:x});if(c=Z,f=M1(X,Q,Z,L),f.size>0&&(o||R||!L&&E)){const[oe,ie]=Ju({nodeId:L,dragItems:f,nodeLookup:X});o==null||o(H.sourceEvent,f,oe,ie),R==null||R(H.sourceEvent,oe,ie),L||E==null||E(H.sourceEvent,ie)}}const z=nh().clickDistance(B).on("start",H=>{const{domNode:X,nodeDragThreshold:$,transform:Q,snapGrid:W,snapToGrid:_}=r();x=(X==null?void 0:X.getBoundingClientRect())||null,w=!1,S=!1,C=H.sourceEvent,$===0&&F(H),c=js(H.sourceEvent,{transform:Q,snapGrid:W,snapToGrid:_,containerBounds:x}),g=tn(H.sourceEvent,x)}).on("drag",H=>{const{autoPanOnNodeDrag:X,transform:$,snapGrid:Q,snapToGrid:W,nodeDragThreshold:_,nodeLookup:D}=r(),j=js(H.sourceEvent,{transform:$,snapGrid:Q,snapToGrid:W,containerBounds:x});if(C=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||L&&!D.has(L))&&(w=!0),!w){if(!h&&X&&m&&(h=!0,q()),!m){const R=tn(H.sourceEvent,x),E=R.x-g.x,P=R.y-g.y;Math.sqrt(E*E+P*P)>_&&F(H)}(c.x!==j.xSnapped||c.y!==j.ySnapped)&&f&&m&&(g=tn(H.sourceEvent,x),Y(j))}}).on("end",H=>{if(!(!m||w)&&(h=!1,m=!1,cancelAnimationFrame(d),f.size>0)){const{nodeLookup:X,updateNodePositions:$,onNodeDragStop:Q,onSelectionDragStop:W}=r();if(S&&($(f,!1),S=!1),l||Q||!L&&W){const[_,D]=Ju({nodeId:L,dragItems:f,nodeLookup:X,dragging:!1});l==null||l(H.sourceEvent,f,_,D),Q==null||Q(H.sourceEvent,_,D),L||W==null||W(H.sourceEvent,D)}}}).filter(H=>{const X=H.target;return!H.button&&(!O||!Jp(X,`.${O}`,T))&&(!k||Jp(X,k,T))});y.call(z)}function b(){y==null||y.on(".drag",null)}return{update:N,destroy:b}}function D1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const c of r.values())Ps(l,So(c))>0&&i.push(c);return i}const T1=250;function O1(t,r,o,i){var f,h;let l=[],c=1/0;const d=D1(t,o,r+T1);for(const g of d){const x=[...((f=g.internals.handleBounds)==null?void 0:f.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const m of x){if(i.nodeId===m.nodeId&&i.type===m.type&&i.id===m.id)continue;const{x:y,y:w}=Mr(g,m,m.position,!0),S=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(w-t.y,2));S>r||(S<c?(l=[{...m,x:y,y:w}],c=S):S===c&&l.push({...m,x:y,y:w}))}}if(!l.length)return null;if(l.length>1){const g=i.type==="source"?"target":"source";return l.find(x=>x.type===g)??l[0]}return l[0]}function Rh(t,r,o,i,l,c=!1){var g,x,m;const d=i.get(t);if(!d)return null;const f=l==="strict"?(g=d.internals.handleBounds)==null?void 0:g[r]:[...((x=d.internals.handleBounds)==null?void 0:x.source)??[],...((m=d.internals.handleBounds)==null?void 0:m.target)??[]],h=(o?f==null?void 0:f.find(y=>y.id===o):f==null?void 0:f[0])??null;return h&&c?{...h,...Mr(d,h,h.position,!0)}:h}function Fh(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function L1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const Hh=()=>!0;function A1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:c,isTarget:d,domNode:f,nodeLookup:h,lib:g,autoPanOnConnect:x,flowId:m,panBy:y,cancelConnection:w,onConnectStart:S,onConnect:C,onConnectEnd:N,isValidConnection:b=Hh,onReconnectEnd:O,updateConnection:k,getTransform:T,getFromHandle:M,autoPanSpeed:L,dragThreshold:B=1,handleDomNode:Y}){const q=Mh(t.target);let F=0,z;const{x:H,y:X}=tn(t),$=Fh(c,Y),Q=f==null?void 0:f.getBoundingClientRect();let W=!1;if(!Q||!$)return;const _=Rh(l,$,i,h,r);if(!_)return;let D=tn(t,Q),j=!1,R=null,E=!1,P=null;function Z(){if(!x||!Q)return;const[pe,he]=bh(D,Q,L);y({x:pe,y:he}),F=requestAnimationFrame(Z)}const J={..._,nodeId:l,type:$,position:_.position},oe=h.get(l);let le={inProgress:!0,isValid:null,from:Mr(oe,J,Ne.Left,!0),fromHandle:J,fromPosition:J.position,fromNode:oe,to:D,toHandle:null,toPosition:Hp[J.position],toNode:null,pointer:D};function se(){W=!0,k(le),S==null||S(t,{nodeId:l,handleId:i,handleType:$})}B===0&&se();function G(pe){if(!W){const{x:Le,y:et}=tn(pe),at=Le-H,Xe=et-X;if(!(at*at+Xe*Xe>B*B))return;se()}if(!M()||!J){ne(pe);return}const he=T();D=tn(pe,Q),z=O1(Fs(D,he,!1,[1,1]),o,h,J),j||(Z(),j=!0);const me=Vh(pe,{handle:z,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:d?"target":"source",isValidConnection:b,doc:q,lib:g,flowId:m,nodeLookup:h});P=me.handleDomNode,R=me.connection,E=L1(!!z,me.isValid);const ke=h.get(l),Ie=ke?Mr(ke,J,Ne.Left,!0):le.from,Ee={...le,from:Ie,isValid:E,to:me.toHandle&&E?Ll({x:me.toHandle.x,y:me.toHandle.y},he):D,toHandle:me.toHandle,toPosition:E&&me.toHandle?me.toHandle.position:Hp[J.position],toNode:me.toHandle?h.get(me.toHandle.nodeId):null,pointer:D};k(Ee),le=Ee}function ne(pe){if(!("touches"in pe&&pe.touches.length>0)){if(W){(z||P)&&R&&E&&(C==null||C(R));const{inProgress:he,...me}=le,ke={...me,toPosition:le.toHandle?le.toPosition:null};N==null||N(pe,ke),c&&(O==null||O(pe,ke))}w(),cancelAnimationFrame(F),j=!1,E=!1,R=null,P=null,q.removeEventListener("mousemove",G),q.removeEventListener("mouseup",ne),q.removeEventListener("touchmove",G),q.removeEventListener("touchend",ne)}}q.addEventListener("mousemove",G),q.addEventListener("mouseup",ne),q.addEventListener("touchmove",G),q.addEventListener("touchend",ne)}function Vh(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:c,doc:d,lib:f,flowId:h,isValidConnection:g=Hh,nodeLookup:x}){const m=c==="target",y=r?d.querySelector(`.${f}-flow__handle[data-id="${h}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=tn(t),C=d.elementFromPoint(w,S),N=C!=null&&C.classList.contains(`${f}-flow__handle`)?C:y,b={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const O=Fh(void 0,N),k=N.getAttribute("data-nodeid"),T=N.getAttribute("data-handleid"),M=N.classList.contains("connectable"),L=N.classList.contains("connectableend");if(!k||!O)return b;const B={source:m?k:i,sourceHandle:m?T:l,target:m?i:k,targetHandle:m?l:T};b.connection=B;const q=M&&L&&(o===vo.Strict?m&&O==="source"||!m&&O==="target":k!==i||T!==l);b.isValid=q&&g(B),b.toHandle=Rh(k,O,T,x,o,!0)}return b}const Sc={onPointerDown:A1,isValid:Vh};function $1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=Mt(t);function c({translateExtent:f,width:h,height:g,zoomStep:x=1,pannable:m=!0,zoomable:y=!0,inversePan:w=!1}){const S=k=>{if(k.sourceEvent.type!=="wheel"||!r)return;const T=o(),M=k.sourceEvent.ctrlKey&&Ds()?10:1,L=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*x,B=T[2]*Math.pow(2,L*M);r.scaleTo(B)};let C=[0,0];const N=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(C=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},b=k=>{const T=o();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!r)return;const M=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],L=[M[0]-C[0],M[1]-C[1]];C=M;const B=i()*Math.max(T[2],Math.log(T[2]))*(w?-1:1),Y={x:T[0]-L[0]*B,y:T[1]-L[1]*B},q=[[0,0],[h,g]];r.setViewportConstrained({x:Y.x,y:Y.y,zoom:T[2]},q,f)},O=xh().on("start",N).on("zoom",m?b:null).on("zoom.wheel",y?S:null);l.call(O,{})}function d(){l.on("zoom",null)}return{update:c,destroy:d,pointer:Zt}}const Yl=t=>({x:t.x,y:t.y,zoom:t.k}),ec=({x:t,y:r,zoom:o})=>Vl.translate(t,r).scale(o),po=(t,r)=>t.target.closest(`.${r}`),Bh=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),z1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,tc=(t,r=0,o=z1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},Wh=t=>{const r=t.ctrlKey&&Ds()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function R1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:c,zoomOnPinch:d,onPanZoomStart:f,onPanZoom:h,onPanZoomEnd:g}){return x=>{if(po(x,r))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const m=o.property("__zoom").k||1;if(x.ctrlKey&&d){const N=Zt(x),b=Wh(x),O=m*Math.pow(2,b);i.scaleTo(o,O,N,x);return}const y=x.deltaMode===1?20:1;let w=l===br.Vertical?0:x.deltaX*y,S=l===br.Horizontal?0:x.deltaY*y;!Ds()&&x.shiftKey&&l!==br.Vertical&&(w=x.deltaY*y,S=0),i.translateBy(o,-(w/m)*c,-(S/m)*c,{internal:!0});const C=Yl(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(h==null||h(x,C),t.panScrollTimeout=setTimeout(()=>{g==null||g(x,C),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,f==null||f(x,C))}}function F1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const c=i.type==="wheel",d=!r&&c&&!i.ctrlKey,f=po(i,t);if(i.ctrlKey&&c&&f&&i.preventDefault(),d||f)return null;i.preventDefault(),o.call(this,i,l)}}function H1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var c,d,f;if((c=i.sourceEvent)!=null&&c.internal)return;const l=Yl(i.transform);t.mouseButton=((d=i.sourceEvent)==null?void 0:d.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((f=i.sourceEvent)==null?void 0:f.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function V1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return c=>{var d,f;t.usedRightMouseButton=!!(o&&Bh(r,t.mouseButton??0)),(d=c.sourceEvent)!=null&&d.sync||i([c.transform.x,c.transform.y,c.transform.k]),l&&!((f=c.sourceEvent)!=null&&f.internal)&&(l==null||l(c.sourceEvent,Yl(c.transform)))}}function B1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:c}){return d=>{var f;if(!((f=d.sourceEvent)!=null&&f.internal)&&(t.isZoomingOrPanning=!1,c&&Bh(r,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&c(d.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const h=Yl(d.transform);t.prevViewport=h,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(d.sourceEvent,h)},o?150:0)}}}function W1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:c,userSelectionActive:d,noWheelClassName:f,noPanClassName:h,lib:g,connectionInProgress:x}){return m=>{var N;const y=t||r,w=o&&m.ctrlKey,S=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(po(m,`${g}-flow__node`)||po(m,`${g}-flow__edge`)))return!0;if(!i&&!y&&!l&&!c&&!o||d||x&&!S||po(m,f)&&S||po(m,h)&&(!S||l&&S&&!t)||!o&&m.ctrlKey&&S)return!1;if(!o&&m.type==="touchstart"&&((N=m.touches)==null?void 0:N.length)>1)return m.preventDefault(),!1;if(!y&&!l&&!w&&S||!i&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(i)&&!i.includes(m.button)&&m.type==="mousedown")return!1;const C=Array.isArray(i)&&i.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||S)&&C}}function U1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:f,onDraggingChange:h}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=t.getBoundingClientRect(),m=xh().scaleExtent([r,o]).translateExtent(i),y=Mt(t).call(m);O({x:l.x,y:l.y,zoom:wo(l.zoom,r,o)},[[0,0],[x.width,x.height]],i);const w=y.on("wheel.zoom"),S=y.on("dblclick.zoom");m.wheelDelta(Wh);function C(z,H){return y?new Promise(X=>{m==null||m.interpolate((H==null?void 0:H.interpolate)==="linear"?ks:Sl).transform(tc(y,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function N({noWheelClassName:z,noPanClassName:H,onPaneContextMenu:X,userSelectionActive:$,panOnScroll:Q,panOnDrag:W,panOnScrollMode:_,panOnScrollSpeed:D,preventScrolling:j,zoomOnPinch:R,zoomOnScroll:E,zoomOnDoubleClick:P,zoomActivationKeyPressed:Z,lib:J,onTransformChange:oe,connectionInProgress:ie,paneClickDistance:le,selectionOnDrag:se}){$&&!g.isZoomingOrPanning&&b();const G=Q&&!Z&&!$;m.clickDistance(se?1/0:!en(le)||le<0?0:le);const ne=G?R1({zoomPanValues:g,noWheelClassName:z,d3Selection:y,d3Zoom:m,panOnScrollMode:_,panOnScrollSpeed:D,zoomOnPinch:R,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:f}):F1({noWheelClassName:z,preventScrolling:j,d3ZoomHandler:w});if(y.on("wheel.zoom",ne,{passive:!1}),!$){const he=H1({zoomPanValues:g,onDraggingChange:h,onPanZoomStart:d});m.on("start",he);const me=V1({zoomPanValues:g,panOnDrag:W,onPaneContextMenu:!!X,onPanZoom:c,onTransformChange:oe});m.on("zoom",me);const ke=B1({zoomPanValues:g,panOnDrag:W,panOnScroll:Q,onPaneContextMenu:X,onPanZoomEnd:f,onDraggingChange:h});m.on("end",ke)}const pe=W1({zoomActivationKeyPressed:Z,panOnDrag:W,zoomOnScroll:E,panOnScroll:Q,zoomOnDoubleClick:P,zoomOnPinch:R,userSelectionActive:$,noPanClassName:H,noWheelClassName:z,lib:J,connectionInProgress:ie});m.filter(pe),P?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function b(){m.on("zoom",null)}async function O(z,H,X){const $=ec(z),Q=m==null?void 0:m.constrain()($,H,X);return Q&&await C(Q),new Promise(W=>W(Q))}async function k(z,H){const X=ec(z);return await C(X,H),new Promise($=>$(X))}function T(z){if(y){const H=ec(z),X=y.property("__zoom");(X.k!==z.zoom||X.x!==z.x||X.y!==z.y)&&(m==null||m.transform(y,H,null,{sync:!0}))}}function M(){const z=y?gh(y.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function L(z,H){return y?new Promise(X=>{m==null||m.interpolate((H==null?void 0:H.interpolate)==="linear"?ks:Sl).scaleTo(tc(y,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function B(z,H){return y?new Promise(X=>{m==null||m.interpolate((H==null?void 0:H.interpolate)==="linear"?ks:Sl).scaleBy(tc(y,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function Y(z){m==null||m.scaleExtent(z)}function q(z){m==null||m.translateExtent(z)}function F(z){const H=!en(z)||z<0?0:z;m==null||m.clickDistance(H)}return{update:N,destroy:b,setViewport:k,setViewportConstrained:O,getViewport:M,scaleTo:L,scaleBy:B,setScaleExtent:Y,setTranslateExtent:q,syncViewport:T,setClickDistance:F}}var _r;(function(t){t.Line="line",t.Handle="handle"})(_r||(_r={}));const Y1=["top-left","top-right","bottom-left","bottom-right"],X1=["top","right","bottom","left"];function G1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:c}){const d=t-r,f=o-i,h=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&l&&(h[0]=h[0]*-1),f&&c&&(h[1]=h[1]*-1),h}function em(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Qn(t,r){return Math.max(0,r-t)}function qn(t,r){return Math.max(0,t-r)}function pl(t,r,o){return Math.max(0,r-t,t-o)}function tm(t,r){return t?!r:r}function K1(t,r,o,i,l,c,d,f){let{affectsX:h,affectsY:g}=r;const{isHorizontal:x,isVertical:m}=r,y=x&&m,{xSnapped:w,ySnapped:S}=o,{minWidth:C,maxWidth:N,minHeight:b,maxHeight:O}=i,{x:k,y:T,width:M,height:L,aspectRatio:B}=t;let Y=Math.floor(x?w-t.pointerX:0),q=Math.floor(m?S-t.pointerY:0);const F=M+(h?-Y:Y),z=L+(g?-q:q),H=-c[0]*M,X=-c[1]*L;let $=pl(F,C,N),Q=pl(z,b,O);if(d){let D=0,j=0;h&&Y<0?D=Qn(k+Y+H,d[0][0]):!h&&Y>0&&(D=qn(k+F+H,d[1][0])),g&&q<0?j=Qn(T+q+X,d[0][1]):!g&&q>0&&(j=qn(T+z+X,d[1][1])),$=Math.max($,D),Q=Math.max(Q,j)}if(f){let D=0,j=0;h&&Y>0?D=qn(k+Y,f[0][0]):!h&&Y<0&&(D=Qn(k+F,f[1][0])),g&&q>0?j=qn(T+q,f[0][1]):!g&&q<0&&(j=Qn(T+z,f[1][1])),$=Math.max($,D),Q=Math.max(Q,j)}if(l){if(x){const D=pl(F/B,b,O)*B;if($=Math.max($,D),d){let j=0;!h&&!g||h&&!g&&y?j=qn(T+X+F/B,d[1][1])*B:j=Qn(T+X+(h?Y:-Y)/B,d[0][1])*B,$=Math.max($,j)}if(f){let j=0;!h&&!g||h&&!g&&y?j=Qn(T+F/B,f[1][1])*B:j=qn(T+(h?Y:-Y)/B,f[0][1])*B,$=Math.max($,j)}}if(m){const D=pl(z*B,C,N)/B;if(Q=Math.max(Q,D),d){let j=0;!h&&!g||g&&!h&&y?j=qn(k+z*B+H,d[1][0])/B:j=Qn(k+(g?q:-q)*B+H,d[0][0])/B,Q=Math.max(Q,j)}if(f){let j=0;!h&&!g||g&&!h&&y?j=Qn(k+z*B,f[1][0])/B:j=qn(k+(g?q:-q)*B,f[0][0])/B,Q=Math.max(Q,j)}}}q=q+(q<0?Q:-Q),Y=Y+(Y<0?$:-$),l&&(y?F>z*B?q=(tm(h,g)?-Y:Y)/B:Y=(tm(h,g)?-q:q)*B:x?(q=Y/B,g=h):(Y=q*B,h=g));const W=h?k+Y:k,_=g?T+q:T;return{width:M+(h?-Y:Y),height:L+(g?-q:q),x:c[0]*Y*(h?-1:1)+W,y:c[1]*q*(g?-1:1)+_}}const Uh={width:0,height:0,x:0,y:0},Q1={...Uh,pointerX:0,pointerY:0,aspectRatio:1};function q1(t){return[[0,0],[t.measured.width,t.measured.height]]}function Z1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,c=t.measured.width??0,d=t.measured.height??0,f=o[0]*c,h=o[1]*d;return[[i-f,l-h],[i+c-f,l+d-h]]}function J1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const c=Mt(t);let d={controlDirection:em("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:g,boundaries:x,keepAspectRatio:m,resizeDirection:y,onResizeStart:w,onResize:S,onResizeEnd:C,shouldResize:N}){let b={...Uh},O={...Q1};d={boundaries:x,resizeDirection:y,keepAspectRatio:m,controlDirection:em(g)};let k,T=null,M=[],L,B,Y,q=!1;const F=nh().on("start",z=>{const{nodeLookup:H,transform:X,snapGrid:$,snapToGrid:Q,nodeOrigin:W,paneDomNode:_}=o();if(k=H.get(r),!k)return;T=(_==null?void 0:_.getBoundingClientRect())??null;const{xSnapped:D,ySnapped:j}=js(z.sourceEvent,{transform:X,snapGrid:$,snapToGrid:Q,containerBounds:T});b={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},O={...b,pointerX:D,pointerY:j,aspectRatio:b.width/b.height},L=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(L=H.get(k.parentId),B=L&&k.extent==="parent"?q1(L):void 0),M=[],Y=void 0;for(const[R,E]of H)if(E.parentId===r&&(M.push({id:R,position:{...E.position},extent:E.extent}),E.extent==="parent"||E.expandParent)){const P=Z1(E,k,E.origin??W);Y?Y=[[Math.min(P[0][0],Y[0][0]),Math.min(P[0][1],Y[0][1])],[Math.max(P[1][0],Y[1][0]),Math.max(P[1][1],Y[1][1])]]:Y=P}w==null||w(z,{...b})}).on("drag",z=>{const{transform:H,snapGrid:X,snapToGrid:$,nodeOrigin:Q}=o(),W=js(z.sourceEvent,{transform:H,snapGrid:X,snapToGrid:$,containerBounds:T}),_=[];if(!k)return;const{x:D,y:j,width:R,height:E}=b,P={},Z=k.origin??Q,{width:J,height:oe,x:ie,y:le}=K1(O,d.controlDirection,W,d.boundaries,d.keepAspectRatio,Z,B,Y),se=J!==R,G=oe!==E,ne=ie!==D&&se,pe=le!==j&&G;if(!ne&&!pe&&!se&&!G)return;if((ne||pe||Z[0]===1||Z[1]===1)&&(P.x=ne?ie:b.x,P.y=pe?le:b.y,b.x=P.x,b.y=P.y,M.length>0)){const Ie=ie-D,Ee=le-j;for(const Le of M)Le.position={x:Le.position.x-Ie+Z[0]*(J-R),y:Le.position.y-Ee+Z[1]*(oe-E)},_.push(Le)}if((se||G)&&(P.width=se&&(!d.resizeDirection||d.resizeDirection==="horizontal")?J:b.width,P.height=G&&(!d.resizeDirection||d.resizeDirection==="vertical")?oe:b.height,b.width=P.width,b.height=P.height),L&&k.expandParent){const Ie=Z[0]*(P.width??0);P.x&&P.x<Ie&&(b.x=Ie,O.x=O.x-(P.x-Ie));const Ee=Z[1]*(P.height??0);P.y&&P.y<Ee&&(b.y=Ee,O.y=O.y-(P.y-Ee))}const he=G1({width:b.width,prevWidth:R,height:b.height,prevHeight:E,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),me={...b,direction:he};(N==null?void 0:N(z,me))!==!1&&(q=!0,S==null||S(z,me),i(P,_))}).on("end",z=>{q&&(C==null||C(z,{...b}),l==null||l({...b}),q=!1)});c.call(F)}function h(){c.on(".drag",null)}return{update:f,destroy:h}}var nc={exports:{}},rc={},oc={exports:{}},sc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function eS(){if(nm)return sc;nm=1;var t=Os();function r(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(m,y){var w=y(),S=i({inst:{value:w,getSnapshot:y}}),C=S[0].inst,N=S[1];return c(function(){C.value=w,C.getSnapshot=y,h(C)&&N({inst:C})},[m,w,y]),l(function(){return h(C)&&N({inst:C}),m(function(){h(C)&&N({inst:C})})},[m]),d(w),w}function h(m){var y=m.getSnapshot;m=m.value;try{var w=y();return!o(m,w)}catch{return!0}}function g(m,y){return y()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:f;return sc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,sc}var rm;function tS(){return rm||(rm=1,oc.exports=eS()),oc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function nS(){if(om)return rc;om=1;var t=Os(),r=tS();function o(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,c=t.useRef,d=t.useEffect,f=t.useMemo,h=t.useDebugValue;return rc.useSyncExternalStoreWithSelector=function(g,x,m,y,w){var S=c(null);if(S.current===null){var C={hasValue:!1,value:null};S.current=C}else C=S.current;S=f(function(){function b(L){if(!O){if(O=!0,k=L,L=y(L),w!==void 0&&C.hasValue){var B=C.value;if(w(B,L))return T=B}return T=L}if(B=T,i(k,L))return B;var Y=y(L);return w!==void 0&&w(B,Y)?(k=L,B):(k=L,T=Y)}var O=!1,k,T,M=m===void 0?null:m;return[function(){return b(x())},M===null?void 0:function(){return b(M())}]},[x,m,y,w]);var N=l(g,S[0],S[1]);return d(function(){C.hasValue=!0,C.value=N},[N]),h(N),N},rc}var sm;function rS(){return sm||(sm=1,nc.exports=nS()),nc.exports}var oS=rS();const sS=Fm(oS),iS={},im=t=>{let r;const o=new Set,i=(x,m)=>{const y=typeof x=="function"?x(r):x;if(!Object.is(y,r)){const w=r;r=m??(typeof y!="object"||y===null)?y:Object.assign({},r,y),o.forEach(S=>S(r,w))}},l=()=>r,h={setState:i,getState:l,getInitialState:()=>g,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(iS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},g=r=t(i,l,h);return h},lS=t=>t?im(t):im,{useDebugValue:aS}=vs,{useSyncExternalStoreWithSelector:uS}=sS,cS=t=>t;function Yh(t,r=cS,o){const i=uS(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return aS(i),i}const lm=(t,r)=>{const o=lS(t),i=(l,c=r)=>Yh(o,l,c);return Object.assign(i,o),i},dS=(t,r)=>t?lm(t,r):lm;function He(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var fS=Hm();const Xl=A.createContext(null),pS=Xl.Provider,Xh=pn.error001();function _e(t,r){const o=A.useContext(Xl);if(o===null)throw new Error(Xh);return Yh(o,t,r)}function Ve(){const t=A.useContext(Xl);if(t===null)throw new Error(Xh);return A.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const am={display:"none"},mS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Gh="react-flow__node-desc",Kh="react-flow__edge-desc",hS="react-flow__aria-live",gS=t=>t.ariaLiveMessage,xS=t=>t.ariaLabelConfig;function yS({rfId:t}){const r=_e(gS);return u.jsx("div",{id:`${hS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:mS,children:r})}function vS({rfId:t,disableKeyboardA11y:r}){const o=_e(xS);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${Gh}-${t}`,style:am,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${Kh}-${t}`,style:am,children:o["edge.a11yDescription.default"]}),!r&&u.jsx(yS,{rfId:t})]})}const Gl=A.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},c)=>{const d=`${t}`.split("-");return u.jsx("div",{className:qe(["react-flow__panel",o,...d]),style:i,ref:c,...l,children:r})});Gl.displayName="Panel";function wS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:u.jsx(Gl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const SS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},ml=t=>t.id;function NS(t,r){return He(t.selectedNodes.map(ml),r.selectedNodes.map(ml))&&He(t.selectedEdges.map(ml),r.selectedEdges.map(ml))}function kS({onSelectionChange:t}){const r=Ve(),{selectedNodes:o,selectedEdges:i}=_e(SS,NS);return A.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(c=>c(l))},[o,i,t]),null}const jS=t=>!!t.onSelectionChangeHandlers;function bS({onSelectionChange:t}){const r=_e(jS);return t||r?u.jsx(kS,{onSelectionChange:t}):null}const Qh=[0,0],CS={x:0,y:0,zoom:1},IS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],um=[...IS,"rfId"],ES=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),cm={translateExtent:Ms,nodeOrigin:Qh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function MS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:c,setNodeExtent:d,reset:f,setDefaultNodesAndEdges:h}=_e(ES,He),g=Ve();A.useEffect(()=>(h(t.defaultNodes,t.defaultEdges),()=>{x.current=cm,f()}),[]);const x=A.useRef(cm);return A.useEffect(()=>{for(const m of um){const y=t[m],w=x.current[m];y!==w&&(typeof t[m]>"u"||(m==="nodes"?r(y):m==="edges"?o(y):m==="minZoom"?i(y):m==="maxZoom"?l(y):m==="translateExtent"?c(y):m==="nodeExtent"?d(y):m==="ariaLabelConfig"?g.setState({ariaLabelConfig:u1(y)}):m==="fitView"?g.setState({fitViewQueued:y}):m==="fitViewOptions"?g.setState({fitViewOptions:y}):g.setState({[m]:y})))}x.current=t},um.map(m=>t[m])),null}function dm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function _S(t){var i;const[r,o]=A.useState(t==="system"?null:t);return A.useEffect(()=>{if(t!=="system"){o(t);return}const l=dm(),c=()=>o(l!=null&&l.matches?"dark":"light");return c(),l==null||l.addEventListener("change",c),()=>{l==null||l.removeEventListener("change",c)}},[t]),r!==null?r:(i=dm())!=null&&i.matches?"dark":"light"}const fm=typeof document<"u"?document:null;function Ts(t=null,r={target:fm,actInsideInputWithModifier:!0}){const[o,i]=A.useState(!1),l=A.useRef(!1),c=A.useRef(new Set([])),[d,f]=A.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=g.reduce((m,y)=>m.concat(...y),[]);return[g,x]}return[[],[]]},[t]);return A.useEffect(()=>{const h=(r==null?void 0:r.target)??fm,g=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const x=w=>{var N,b;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!g)&&_h(w))return!1;const C=mm(w.code,f);if(c.current.add(w[C]),pm(d,c.current,!1)){const O=((b=(N=w.composedPath)==null?void 0:N.call(w))==null?void 0:b[0])||w.target,k=(O==null?void 0:O.nodeName)==="BUTTON"||(O==null?void 0:O.nodeName)==="A";r.preventDefault!==!1&&(l.current||!k)&&w.preventDefault(),i(!0)}},m=w=>{const S=mm(w.code,f);pm(d,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(w[S]),w.key==="Meta"&&c.current.clear(),l.current=!1},y=()=>{c.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",x),h==null||h.addEventListener("keyup",m),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{h==null||h.removeEventListener("keydown",x),h==null||h.removeEventListener("keyup",m),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[t,i]),o}function pm(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function mm(t,r){return r.includes(t)?"code":"key"}const PS=()=>{const t=Ve();return A.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,c],panZoom:d}=t.getState();return d?(await d.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??c},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:c,maxZoom:d,panZoom:f}=t.getState(),h=Ac(r,i,l,c,d,(o==null?void 0:o.padding)??.1);return f?(await f.setViewport(h,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:c,domNode:d}=t.getState();if(!d)return r;const{x:f,y:h}=d.getBoundingClientRect(),g={x:r.x-f,y:r.y-h},x=o.snapGrid??l,m=o.snapToGrid??c;return Fs(g,i,m,x)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),d=Ll(r,o);return{x:d.x+l,y:d.y+c}}}),[])};function qh(t,r){const o=[],i=new Map,l=[];for(const c of t)if(c.type==="add"){l.push(c);continue}else if(c.type==="remove"||c.type==="replace")i.set(c.id,[c]);else{const d=i.get(c.id);d?d.push(c):i.set(c.id,[c])}for(const c of r){const d=i.get(c.id);if(!d){o.push(c);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){o.push({...d[0].item});continue}const f={...c};for(const h of d)DS(h,f);o.push(f)}return l.length&&l.forEach(c=>{c.index!==void 0?o.splice(c.index,0,{...c.item}):o.push({...c.item})}),o}function DS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function TS(t,r){return qh(t,r)}function OS(t,r){return qh(t,r)}function Nr(t,r){return{id:t,type:"select",selected:r}}function mo(t,r=new Set,o=!1){const i=[];for(const[l,c]of t){const d=r.has(l);!(c.selected===void 0&&!d)&&c.selected!==d&&(o&&(c.selected=d),i.push(Nr(c.id,d)))}return i}function hm({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,d]of t.entries()){const f=r.get(d.id),h=((l=f==null?void 0:f.internals)==null?void 0:l.userNode)??f;h!==void 0&&h!==d&&o.push({id:d.id,item:d,type:"replace"}),h===void 0&&o.push({item:d,type:"add",index:c})}for(const[c]of r)i.get(c)===void 0&&o.push({id:c,type:"remove"});return o}function gm(t){return{id:t.id,type:"remove"}}const xm=t=>Jw(t),LS=t=>Nh(t);function Zh(t){return A.forwardRef(t)}const AS=typeof window<"u"?A.useLayoutEffect:A.useEffect;function ym(t){const[r,o]=A.useState(BigInt(0)),[i]=A.useState(()=>$S(()=>o(l=>l+BigInt(1))));return AS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function $S(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const Jh=A.createContext(null);function zS({children:t}){const r=Ve(),o=A.useCallback(f=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:x,onNodesChange:m,nodeLookup:y,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let C=h;for(const b of f)C=typeof b=="function"?b(C):b;let N=hm({items:C,lookup:y});for(const b of S.values())N=b(N);x&&g(C),N.length>0?m==null||m(N):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:O,setNodes:k}=r.getState();b&&k(O)})},[]),i=ym(o),l=A.useCallback(f=>{const{edges:h=[],setEdges:g,hasDefaultEdges:x,onEdgesChange:m,edgeLookup:y}=r.getState();let w=h;for(const S of f)w=typeof S=="function"?S(w):S;x?g(w):m&&m(hm({items:w,lookup:y}))},[]),c=ym(l),d=A.useMemo(()=>({nodeQueue:i,edgeQueue:c}),[]);return u.jsx(Jh.Provider,{value:d,children:t})}function RS(){const t=A.useContext(Jh);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const FS=t=>!!t.panZoom;function Or(){const t=PS(),r=Ve(),o=RS(),i=_e(FS),l=A.useMemo(()=>{const c=m=>r.getState().nodeLookup.get(m),d=m=>{o.nodeQueue.push(m)},f=m=>{o.edgeQueue.push(m)},h=m=>{var b,O;const{nodeLookup:y,nodeOrigin:w}=r.getState(),S=xm(m)?m:y.get(m.id),C=S.parentId?Eh(S.position,S.measured,S.parentId,y,w):S.position,N={...S,position:C,width:((b=S.measured)==null?void 0:b.width)??S.width,height:((O=S.measured)==null?void 0:O.height)??S.height};return So(N)},g=(m,y,w={replace:!1})=>{d(S=>S.map(C=>{if(C.id===m){const N=typeof y=="function"?y(C):y;return w.replace&&xm(N)?N:{...C,...N}}return C}))},x=(m,y,w={replace:!1})=>{f(S=>S.map(C=>{if(C.id===m){const N=typeof y=="function"?y(C):y;return w.replace&&LS(N)?N:{...C,...N}}return C}))};return{getNodes:()=>r.getState().nodes.map(m=>({...m})),getNode:m=>{var y;return(y=c(m))==null?void 0:y.internals.userNode},getInternalNode:c,getEdges:()=>{const{edges:m=[]}=r.getState();return m.map(y=>({...y}))},getEdge:m=>r.getState().edgeLookup.get(m),setNodes:d,setEdges:f,addNodes:m=>{const y=Array.isArray(m)?m:[m];o.nodeQueue.push(w=>[...w,...y])},addEdges:m=>{const y=Array.isArray(m)?m:[m];o.edgeQueue.push(w=>[...w,...y])},toObject:()=>{const{nodes:m=[],edges:y=[],transform:w}=r.getState(),[S,C,N]=w;return{nodes:m.map(b=>({...b})),edges:y.map(b=>({...b})),viewport:{x:S,y:C,zoom:N}}},deleteElements:async({nodes:m=[],edges:y=[]})=>{const{nodes:w,edges:S,onNodesDelete:C,onEdgesDelete:N,triggerNodeChanges:b,triggerEdgeChanges:O,onDelete:k,onBeforeDelete:T}=r.getState(),{nodes:M,edges:L}=await o1({nodesToRemove:m,edgesToRemove:y,nodes:w,edges:S,onBeforeDelete:T}),B=L.length>0,Y=M.length>0;if(B){const q=L.map(gm);N==null||N(L),O(q)}if(Y){const q=M.map(gm);C==null||C(M),b(q)}return(Y||B)&&(k==null||k({nodes:M,edges:L})),{deletedNodes:M,deletedEdges:L}},getIntersectingNodes:(m,y=!0,w)=>{const S=Bp(m),C=S?m:h(m),N=w!==void 0;return C?(w||r.getState().nodes).filter(b=>{const O=r.getState().nodeLookup.get(b.id);if(O&&!S&&(b.id===m.id||!O.internals.positionAbsolute))return!1;const k=So(N?b:O),T=Ps(k,C);return y&&T>0||T>=k.width*k.height||T>=C.width*C.height}):[]},isNodeIntersecting:(m,y,w=!0)=>{const C=Bp(m)?m:h(m);if(!C)return!1;const N=Ps(C,y);return w&&N>0||N>=y.width*y.height||N>=C.width*C.height},updateNode:g,updateNodeData:(m,y,w={replace:!1})=>{g(m,S=>{const C=typeof y=="function"?y(S):y;return w.replace?{...S,data:C}:{...S,data:{...S.data,...C}}},w)},updateEdge:x,updateEdgeData:(m,y,w={replace:!1})=>{x(m,S=>{const C=typeof y=="function"?y(S):y;return w.replace?{...S,data:C}:{...S,data:{...S.data,...C}}},w)},getNodesBounds:m=>{const{nodeLookup:y,nodeOrigin:w}=r.getState();return e1(m,{nodeLookup:y,nodeOrigin:w})},getHandleConnections:({type:m,id:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${m}${y?`-${y}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:m,handleId:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${m?y?`-${m}-${y}`:`-${m}`:""}`))==null?void 0:S.values())??[])},fitView:async m=>{const y=r.getState().fitViewResolver??a1();return r.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:y}),o.nodeQueue.push(w=>[...w]),y.promise}}},[]);return A.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const vm=t=>t.selected,HS=typeof window<"u"?window:void 0;function VS({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=Ve(),{deleteElements:i}=Or(),l=Ts(t,{actInsideInputWithModifier:!1}),c=Ts(r,{target:HS});A.useEffect(()=>{if(l){const{edges:d,nodes:f}=o.getState();i({nodes:f.filter(vm),edges:d.filter(vm)}),o.setState({nodesSelectionActive:!1})}},[l]),A.useEffect(()=>{o.setState({multiSelectionActive:c})},[c])}function BS(t){const r=Ve();A.useEffect(()=>{const o=()=>{var l,c,d,f;if(!t.current||!(((c=(l=t.current).checkVisibility)==null?void 0:c.call(l))??!0))return!1;const i=$c(t.current);(i.height===0||i.width===0)&&((f=(d=r.getState()).onError)==null||f.call(d,"004",pn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Kl={position:"absolute",width:"100%",height:"100%",top:0,left:0},WS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function US({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=br.Free,zoomOnDoubleClick:d=!0,panOnDrag:f=!0,defaultViewport:h,translateExtent:g,minZoom:x,maxZoom:m,zoomActivationKeyCode:y,preventScrolling:w=!0,children:S,noWheelClassName:C,noPanClassName:N,onViewportChange:b,isControlledViewport:O,paneClickDistance:k,selectionOnDrag:T}){const M=Ve(),L=A.useRef(null),{userSelectionActive:B,lib:Y,connectionInProgress:q}=_e(WS,He),F=Ts(y),z=A.useRef();BS(L);const H=A.useCallback(X=>{b==null||b({x:X[0],y:X[1],zoom:X[2]}),O||M.setState({transform:X})},[b,O]);return A.useEffect(()=>{if(L.current){z.current=U1({domNode:L.current,minZoom:x,maxZoom:m,translateExtent:g,viewport:h,onDraggingChange:W=>M.setState({paneDragging:W}),onPanZoomStart:(W,_)=>{const{onViewportChangeStart:D,onMoveStart:j}=M.getState();j==null||j(W,_),D==null||D(_)},onPanZoom:(W,_)=>{const{onViewportChange:D,onMove:j}=M.getState();j==null||j(W,_),D==null||D(_)},onPanZoomEnd:(W,_)=>{const{onViewportChangeEnd:D,onMoveEnd:j}=M.getState();j==null||j(W,_),D==null||D(_)}});const{x:X,y:$,zoom:Q}=z.current.getViewport();return M.setState({panZoom:z.current,transform:[X,$,Q],domNode:L.current.closest(".react-flow")}),()=>{var W;(W=z.current)==null||W.destroy()}}},[]),A.useEffect(()=>{var X;(X=z.current)==null||X.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:f,zoomActivationKeyPressed:F,preventScrolling:w,noPanClassName:N,userSelectionActive:B,noWheelClassName:C,lib:Y,onTransformChange:H,connectionInProgress:q,selectionOnDrag:T,paneClickDistance:k})},[t,r,o,i,l,c,d,f,F,w,N,B,C,Y,H,q,T,k]),u.jsx("div",{className:"react-flow__renderer",ref:L,style:Kl,children:S})}const YS=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function XS(){const{userSelectionActive:t,userSelectionRect:r}=_e(YS,He);return t&&r?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const ic=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},GS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function KS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=_s.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:c,onSelectionStart:d,onSelectionEnd:f,onPaneClick:h,onPaneContextMenu:g,onPaneScroll:x,onPaneMouseEnter:m,onPaneMouseMove:y,onPaneMouseLeave:w,children:S}){const C=Ve(),{userSelectionActive:N,elementsSelectable:b,dragging:O,connectionInProgress:k}=_e(GS,He),T=b&&(t||N),M=A.useRef(null),L=A.useRef(),B=A.useRef(new Set),Y=A.useRef(new Set),q=A.useRef(!1),F=D=>{if(q.current||k){q.current=!1;return}h==null||h(D),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},z=D=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){D.preventDefault();return}g==null||g(D)},H=x?D=>x(D):void 0,X=D=>{q.current&&(D.stopPropagation(),q.current=!1)},$=D=>{var oe,ie;const{domNode:j}=C.getState();if(L.current=j==null?void 0:j.getBoundingClientRect(),!L.current)return;const R=D.target===M.current;if(!R&&!!D.target.closest(".nokey")||!t||!(c&&R||r)||D.button!==0||!D.isPrimary)return;(ie=(oe=D.target)==null?void 0:oe.setPointerCapture)==null||ie.call(oe,D.pointerId),q.current=!1;const{x:Z,y:J}=tn(D.nativeEvent,L.current);C.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:J,x:Z,y:J}}),R||(D.stopPropagation(),D.preventDefault())},Q=D=>{const{userSelectionRect:j,transform:R,nodeLookup:E,edgeLookup:P,connectionLookup:Z,triggerNodeChanges:J,triggerEdgeChanges:oe,defaultEdgeOptions:ie,resetSelectedElements:le}=C.getState();if(!L.current||!j)return;const{x:se,y:G}=tn(D.nativeEvent,L.current),{startX:ne,startY:pe}=j;if(!q.current){const Ee=r?0:l;if(Math.hypot(se-ne,G-pe)<=Ee)return;le(),d==null||d(D)}q.current=!0;const he={startX:ne,startY:pe,x:se<ne?se:ne,y:G<pe?G:pe,width:Math.abs(se-ne),height:Math.abs(G-pe)},me=B.current,ke=Y.current;B.current=new Set(Lc(E,he,R,o===_s.Partial,!0).map(Ee=>Ee.id)),Y.current=new Set;const Ie=(ie==null?void 0:ie.selectable)??!0;for(const Ee of B.current){const Le=Z.get(Ee);if(Le)for(const{edgeId:et}of Le.values()){const at=P.get(et);at&&(at.selectable??Ie)&&Y.current.add(et)}}if(!Wp(me,B.current)){const Ee=mo(E,B.current,!0);J(Ee)}if(!Wp(ke,Y.current)){const Ee=mo(P,Y.current);oe(Ee)}C.setState({userSelectionRect:he,userSelectionActive:!0,nodesSelectionActive:!1})},W=D=>{var j,R;D.button===0&&((R=(j=D.target)==null?void 0:j.releasePointerCapture)==null||R.call(j,D.pointerId),!N&&D.target===M.current&&C.getState().userSelectionRect&&(F==null||F(D)),C.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(f==null||f(D),C.setState({nodesSelectionActive:B.current.size>0})))},_=i===!0||Array.isArray(i)&&i.includes(0);return u.jsxs("div",{className:qe(["react-flow__pane",{draggable:_,dragging:O,selection:t}]),onClick:T?void 0:ic(F,M),onContextMenu:ic(z,M),onWheel:ic(H,M),onPointerEnter:T?void 0:m,onPointerMove:T?Q:y,onPointerUp:T?W:void 0,onPointerDownCapture:T?$:void 0,onClickCapture:T?X:void 0,onPointerLeave:w,ref:M,style:Kl,children:[S,u.jsx(XS,{})]})}function Nc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:c,multiSelectionActive:d,nodeLookup:f,onError:h}=r.getState(),g=f.get(t);if(!g){h==null||h("012",pn.error012(t));return}r.setState({nodesSelectionActive:!1}),g.selected?(o||g.selected&&d)&&(c({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var x;return(x=i==null?void 0:i.current)==null?void 0:x.blur()})):l([t])}function eg({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:c,nodeClickDistance:d}){const f=Ve(),[h,g]=A.useState(!1),x=A.useRef();return A.useEffect(()=>{x.current=P1({getStoreItems:()=>f.getState(),onNodeMouseDown:m=>{Nc({id:m,store:f,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),A.useEffect(()=>{var m,y;if(r)(m=x.current)==null||m.destroy();else if(t.current)return(y=x.current)==null||y.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:c,nodeId:l,nodeClickDistance:d}),()=>{var w;(w=x.current)==null||w.destroy()}},[o,i,r,c,t,l]),h}const QS=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function tg(){const t=Ve();return A.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:c,nodesDraggable:d,onError:f,updateNodePositions:h,nodeLookup:g,nodeOrigin:x}=t.getState(),m=new Map,y=QS(d),w=l?c[0]:5,S=l?c[1]:5,C=o.direction.x*w*o.factor,N=o.direction.y*S*o.factor;for(const[,b]of g){if(!y(b))continue;let O={x:b.internals.positionAbsolute.x+C,y:b.internals.positionAbsolute.y+N};l&&(O=Rs(O,c));const{position:k,positionAbsolute:T}=kh({nodeId:b.id,nextPosition:O,nodeLookup:g,nodeExtent:i,nodeOrigin:x,onError:f});b.position=k,b.internals.positionAbsolute=T,m.set(b.id,b)}h(m)},[])}const Bc=A.createContext(null),qS=Bc.Provider;Bc.Consumer;const ng=()=>A.useContext(Bc),ZS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),JS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:c,connection:d}=i,{fromHandle:f,toHandle:h,isValid:g}=d,x=(h==null?void 0:h.nodeId)===t&&(h==null?void 0:h.id)===r&&(h==null?void 0:h.type)===o;return{connectingFrom:(f==null?void 0:f.nodeId)===t&&(f==null?void 0:f.id)===r&&(f==null?void 0:f.type)===o,connectingTo:x,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:c===vo.Strict?(f==null?void 0:f.type)!==o:t!==(f==null?void 0:f.nodeId)||r!==(f==null?void 0:f.id),connectionInProcess:!!f,clickConnectionInProcess:!!l,valid:x&&g}};function eN({type:t="source",position:r=Ne.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:c=!0,id:d,onConnect:f,children:h,className:g,onMouseDown:x,onTouchStart:m,...y},w){var Q,W;const S=d||null,C=t==="target",N=Ve(),b=ng(),{connectOnClick:O,noPanClassName:k,rfId:T}=_e(ZS,He),{connectingFrom:M,connectingTo:L,clickConnecting:B,isPossibleEndHandle:Y,connectionInProcess:q,clickConnectionInProcess:F,valid:z}=_e(JS(b,S,t),He);b||(W=(Q=N.getState()).onError)==null||W.call(Q,"010",pn.error010());const H=_=>{const{defaultEdgeOptions:D,onConnect:j,hasDefaultEdges:R}=N.getState(),E={...D,..._};if(R){const{edges:P,setEdges:Z}=N.getState();Z(h1(E,P))}j==null||j(E),f==null||f(E)},X=_=>{if(!b)return;const D=Ph(_.nativeEvent);if(l&&(D&&_.button===0||!D)){const j=N.getState();Sc.onPointerDown(_.nativeEvent,{handleDomNode:_.currentTarget,autoPanOnConnect:j.autoPanOnConnect,connectionMode:j.connectionMode,connectionRadius:j.connectionRadius,domNode:j.domNode,nodeLookup:j.nodeLookup,lib:j.lib,isTarget:C,handleId:S,nodeId:b,flowId:j.rfId,panBy:j.panBy,cancelConnection:j.cancelConnection,onConnectStart:j.onConnectStart,onConnectEnd:j.onConnectEnd,updateConnection:j.updateConnection,onConnect:H,isValidConnection:o||j.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:j.autoPanSpeed,dragThreshold:j.connectionDragThreshold})}D?x==null||x(_):m==null||m(_)},$=_=>{const{onClickConnectStart:D,onClickConnectEnd:j,connectionClickStartHandle:R,connectionMode:E,isValidConnection:P,lib:Z,rfId:J,nodeLookup:oe,connection:ie}=N.getState();if(!b||!R&&!l)return;if(!R){D==null||D(_.nativeEvent,{nodeId:b,handleId:S,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:b,type:t,id:S}});return}const le=Mh(_.target),se=o||P,{connection:G,isValid:ne}=Sc.isValid(_.nativeEvent,{handle:{nodeId:b,id:S,type:t},connectionMode:E,fromNodeId:R.nodeId,fromHandleId:R.id||null,fromType:R.type,isValidConnection:se,flowId:J,doc:le,lib:Z,nodeLookup:oe});ne&&G&&H(G);const pe=structuredClone(ie);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,j==null||j(_,pe),N.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":S,"data-nodeid":b,"data-handlepos":r,"data-id":`${T}-${b}-${S}-${t}`,className:qe(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",k,g,{source:!C,target:C,connectable:i,connectablestart:l,connectableend:c,clickconnecting:B,connectingfrom:M,connectingto:L,valid:z,connectionindicator:i&&(!q||Y)&&(q||F?c:l)}]),onMouseDown:X,onTouchStart:X,onClick:O?$:void 0,ref:w,...y,children:h})}const Pr=A.memo(Zh(eN));function tN({data:t,isConnectable:r,sourcePosition:o=Ne.Bottom}){return u.jsxs(u.Fragment,{children:[t==null?void 0:t.label,u.jsx(Pr,{type:"source",position:o,isConnectable:r})]})}function nN({data:t,isConnectable:r,targetPosition:o=Ne.Top,sourcePosition:i=Ne.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(Pr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,u.jsx(Pr,{type:"source",position:i,isConnectable:r})]})}function rN(){return null}function oN({data:t,isConnectable:r,targetPosition:o=Ne.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(Pr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const Al={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},wm={input:tN,default:nN,output:oN,group:rN};function sN(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const iN=t=>{const{width:r,height:o,x:i,y:l}=zs(t.nodeLookup,{filter:c=>!!c.selected});return{width:en(r)?r:null,height:en(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function lN({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=Ve(),{width:l,height:c,transformString:d,userSelectionActive:f}=_e(iN,He),h=tg(),g=A.useRef(null);if(A.useEffect(()=>{var y;o||(y=g.current)==null||y.focus({preventScroll:!0})},[o]),eg({nodeRef:g}),f||!l||!c)return null;const x=t?y=>{const w=i.getState().nodes.filter(S=>S.selected);t(y,w)}:void 0,m=y=>{Object.prototype.hasOwnProperty.call(Al,y.key)&&(y.preventDefault(),h({direction:Al[y.key],factor:y.shiftKey?4:1}))};return u.jsx("div",{className:qe(["react-flow__nodesselection","react-flow__container",r]),style:{transform:d},children:u.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:o?void 0:-1,onKeyDown:o?void 0:m,style:{width:l,height:c}})})}const Sm=typeof window<"u"?window:void 0,aN=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function rg({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,paneClickDistance:f,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:x,selectionMode:m,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:b,zoomOnScroll:O,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:M,panOnScrollMode:L,zoomOnDoubleClick:B,panOnDrag:Y,defaultViewport:q,translateExtent:F,minZoom:z,maxZoom:H,preventScrolling:X,onSelectionContextMenu:$,noWheelClassName:Q,noPanClassName:W,disableKeyboardA11y:_,onViewportChange:D,isControlledViewport:j}){const{nodesSelectionActive:R,userSelectionActive:E}=_e(aN,He),P=Ts(g,{target:Sm}),Z=Ts(C,{target:Sm}),J=Z||Y,oe=Z||T,ie=x&&J!==!0,le=P||E||ie;return VS({deleteKeyCode:h,multiSelectionKeyCode:S}),u.jsx(US,{onPaneContextMenu:c,elementsSelectable:b,zoomOnScroll:O,zoomOnPinch:k,panOnScroll:oe,panOnScrollSpeed:M,panOnScrollMode:L,zoomOnDoubleClick:B,panOnDrag:!P&&J,defaultViewport:q,translateExtent:F,minZoom:z,maxZoom:H,zoomActivationKeyCode:N,preventScrolling:X,noWheelClassName:Q,noPanClassName:W,onViewportChange:D,isControlledViewport:j,paneClickDistance:f,selectionOnDrag:ie,children:u.jsxs(KS,{onSelectionStart:y,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:J,isSelecting:!!le,selectionMode:m,selectionKeyPressed:P,paneClickDistance:f,selectionOnDrag:ie,children:[t,R&&u.jsx(lN,{onSelectionContextMenu:$,noPanClassName:W,disableKeyboardA11y:_})]})})}rg.displayName="FlowRenderer";const uN=A.memo(rg),cN=t=>r=>t?Lc(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function dN(t){return _e(A.useCallback(cN(t),[t]),He)}const fN=t=>t.updateNodeInternals;function pN(){const t=_e(fN),[r]=A.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const c=l.target.getAttribute("data-id");i.set(c,{id:c,nodeElement:l.target,force:!0})}),t(i)}));return A.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function mN({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=Ve(),c=A.useRef(null),d=A.useRef(null),f=A.useRef(t.sourcePosition),h=A.useRef(t.targetPosition),g=A.useRef(r),x=o&&!!t.internals.handleBounds;return A.useEffect(()=>{c.current&&!t.hidden&&(!x||d.current!==c.current)&&(d.current&&(i==null||i.unobserve(d.current)),i==null||i.observe(c.current),d.current=c.current)},[x,t.hidden]),A.useEffect(()=>()=>{d.current&&(i==null||i.unobserve(d.current),d.current=null)},[]),A.useEffect(()=>{if(c.current){const m=g.current!==r,y=f.current!==t.sourcePosition,w=h.current!==t.targetPosition;(m||y||w)&&(g.current=r,f.current=t.sourcePosition,h.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:c.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),c}function hN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:c,onDoubleClick:d,nodesDraggable:f,elementsSelectable:h,nodesConnectable:g,nodesFocusable:x,resizeObserver:m,noDragClassName:y,noPanClassName:w,disableKeyboardA11y:S,rfId:C,nodeTypes:N,nodeClickDistance:b,onError:O}){const{node:k,internals:T,isParent:M}=_e(se=>{const G=se.nodeLookup.get(t),ne=se.parentLookup.has(t);return{node:G,internals:G.internals,isParent:ne}},He);let L=k.type||"default",B=(N==null?void 0:N[L])||wm[L];B===void 0&&(O==null||O("003",pn.error003(L)),L="default",B=(N==null?void 0:N.default)||wm.default);const Y=!!(k.draggable||f&&typeof k.draggable>"u"),q=!!(k.selectable||h&&typeof k.selectable>"u"),F=!!(k.connectable||g&&typeof k.connectable>"u"),z=!!(k.focusable||x&&typeof k.focusable>"u"),H=Ve(),X=Ih(k),$=mN({node:k,nodeType:L,hasDimensions:X,resizeObserver:m}),Q=eg({nodeRef:$,disabled:k.hidden||!Y,noDragClassName:y,handleSelector:k.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:b}),W=tg();if(k.hidden)return null;const _=En(k),D=sN(k),j=q||Y||r||o||i||l,R=o?se=>o(se,{...T.userNode}):void 0,E=i?se=>i(se,{...T.userNode}):void 0,P=l?se=>l(se,{...T.userNode}):void 0,Z=c?se=>c(se,{...T.userNode}):void 0,J=d?se=>d(se,{...T.userNode}):void 0,oe=se=>{const{selectNodesOnDrag:G,nodeDragThreshold:ne}=H.getState();q&&(!G||!Y||ne>0)&&Nc({id:t,store:H,nodeRef:$}),r&&r(se,{...T.userNode})},ie=se=>{if(!(_h(se.nativeEvent)||S)){if(yh.includes(se.key)&&q){const G=se.key==="Escape";Nc({id:t,store:H,unselect:G,nodeRef:$})}else if(Y&&k.selected&&Object.prototype.hasOwnProperty.call(Al,se.key)){se.preventDefault();const{ariaLabelConfig:G}=H.getState();H.setState({ariaLiveMessage:G["node.a11yDescription.ariaLiveMessage"]({direction:se.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),W({direction:Al[se.key],factor:se.shiftKey?4:1})}}},le=()=>{var ke;if(S||!((ke=$.current)!=null&&ke.matches(":focus-visible")))return;const{transform:se,width:G,height:ne,autoPanOnNodeFocus:pe,setCenter:he}=H.getState();if(!pe)return;Lc(new Map([[t,k]]),{x:0,y:0,width:G,height:ne},se,!0).length>0||he(k.position.x+_.width/2,k.position.y+_.height/2,{zoom:se[2]})};return u.jsx("div",{className:qe(["react-flow__node",`react-flow__node-${L}`,{[w]:Y},k.className,{selected:k.selected,selectable:q,parent:M,draggable:Y,dragging:Q}]),ref:$,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:j?"all":"none",visibility:X?"visible":"hidden",...k.style,...D},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:R,onMouseMove:E,onMouseLeave:P,onContextMenu:Z,onClick:oe,onDoubleClick:J,onKeyDown:z?ie:void 0,tabIndex:z?0:void 0,onFocus:z?le:void 0,role:k.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Gh}-${C}`,"aria-label":k.ariaLabel,...k.domAttributes,children:u.jsx(qS,{value:t,children:u.jsx(B,{id:t,data:k.data,type:L,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:q,draggable:Y,deletable:k.deletable??!0,isConnectable:F,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:Q,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,..._})})})}var gN=A.memo(hN);const xN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function og(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:c}=_e(xN,He),d=dN(t.onlyRenderVisibleElements),f=pN();return u.jsx("div",{className:"react-flow__nodes",style:Kl,children:d.map(h=>u.jsx(gN,{id:h,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:c},h))})}og.displayName="NodeRenderer";const yN=A.memo(og);function vN(t){return _e(A.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const c=o.nodeLookup.get(l.source),d=o.nodeLookup.get(l.target);c&&d&&f1({sourceNode:c,targetNode:d,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),He)}const wN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return u.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},SN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return u.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Nm={[Tl.Arrow]:wN,[Tl.ArrowClosed]:SN};function NN(t){const r=Ve();return A.useMemo(()=>{var l,c;return Object.prototype.hasOwnProperty.call(Nm,t)?Nm[t]:((c=(l=r.getState()).onError)==null||c.call(l,"009",pn.error009(t)),null)},[t])}const kN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const h=NN(r);return h?u.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0",children:u.jsx(h,{color:o,strokeWidth:d})}):null},sg=({defaultColor:t,rfId:r})=>{const o=_e(c=>c.edges),i=_e(c=>c.defaultEdgeOptions),l=A.useMemo(()=>w1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:l.map(c=>u.jsx(kN,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};sg.displayName="MarkerDefinitions";var jN=A.memo(sg);function ig({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:h,className:g,...x}){const[m,y]=A.useState({x:1,y:0,width:0,height:0}),w=qe(["react-flow__edge-textwrapper",g]),S=A.useRef(null);return A.useEffect(()=>{if(S.current){const C=S.current.getBBox();y({x:C.x,y:C.y,width:C.width,height:C.height})}},[o]),o?u.jsxs("g",{transform:`translate(${t-m.width/2} ${r-m.height/2})`,className:w,visibility:m.width?"visible":"hidden",...x,children:[l&&u.jsx("rect",{width:m.width+2*d[0],x:-d[0],y:-d[1],height:m.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:o}),h]}):null}ig.displayName="EdgeText";const bN=A.memo(ig);function ko({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,interactionWidth:g=20,...x}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...x,d:t,fill:"none",className:qe(["react-flow__edge-path",x.className])}),g?u.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,i&&en(r)&&en(o)?u.jsx(bN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h}):null]})}function km({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===Ne.Left||t===Ne.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function lg({sourceX:t,sourceY:r,sourcePosition:o=Ne.Bottom,targetX:i,targetY:l,targetPosition:c=Ne.Top}){const[d,f]=km({pos:o,x1:t,y1:r,x2:i,y2:l}),[h,g]=km({pos:c,x1:i,y1:l,x2:t,y2:r}),[x,m,y,w]=Dh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:d,sourceControlY:f,targetControlX:h,targetControlY:g});return[`M${t},${r} C${d},${f} ${h},${g} ${i},${l}`,x,m,y,w]}function ag(t){return A.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:N,interactionWidth:b})=>{const[O,k,T]=lg({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),M=t.isInternal?void 0:r;return u.jsx(ko,{id:M,path:O,labelX:k,labelY:T,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:N,interactionWidth:b})})}const CN=ag({isInternal:!1}),ug=ag({isInternal:!0});CN.displayName="SimpleBezierEdge";ug.displayName="SimpleBezierEdgeInternal";function cg(t){return A.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,sourcePosition:w=Ne.Bottom,targetPosition:S=Ne.Top,markerEnd:C,markerStart:N,pathOptions:b,interactionWidth:O})=>{const[k,T,M]=yc({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:c,targetPosition:S,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),L=t.isInternal?void 0:r;return u.jsx(ko,{id:L,path:k,labelX:T,labelY:M,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:C,markerStart:N,interactionWidth:O})})}const dg=cg({isInternal:!1}),fg=cg({isInternal:!0});dg.displayName="SmoothStepEdge";fg.displayName="SmoothStepEdgeInternal";function pg(t){return A.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return u.jsx(dg,{...o,id:i,pathOptions:A.useMemo(()=>{var c;return{borderRadius:0,offset:(c=o.pathOptions)==null?void 0:c.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const IN=pg({isInternal:!1}),mg=pg({isInternal:!0});IN.displayName="StepEdge";mg.displayName="StepEdgeInternal";function hg(t){return A.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:C})=>{const[N,b,O]=Oh({sourceX:o,sourceY:i,targetX:l,targetY:c}),k=t.isInternal?void 0:r;return u.jsx(ko,{id:k,path:N,labelX:b,labelY:O,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:C})})}const EN=hg({isInternal:!1}),gg=hg({isInternal:!0});EN.displayName="StraightEdge";gg.displayName="StraightEdgeInternal";function xg(t){return A.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d=Ne.Bottom,targetPosition:f=Ne.Top,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:N,pathOptions:b,interactionWidth:O})=>{const[k,T,M]=Ul({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f,curvature:b==null?void 0:b.curvature}),L=t.isInternal?void 0:r;return u.jsx(ko,{id:L,path:k,labelX:T,labelY:M,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:N,interactionWidth:O})})}const MN=xg({isInternal:!1}),yg=xg({isInternal:!0});MN.displayName="BezierEdge";yg.displayName="BezierEdgeInternal";const jm={default:yg,straight:gg,step:mg,smoothstep:fg,simplebezier:ug},bm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_N=(t,r,o)=>o===Ne.Left?t-r:o===Ne.Right?t+r:t,PN=(t,r,o)=>o===Ne.Top?t-r:o===Ne.Bottom?t+r:t,Cm="react-flow__edgeupdater";function Im({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:c,onMouseOut:d,type:f}){return u.jsx("circle",{onMouseDown:l,onMouseEnter:c,onMouseOut:d,className:qe([Cm,`${Cm}-${f}`]),cx:_N(r,i,t),cy:PN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function DN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:c,targetY:d,sourcePosition:f,targetPosition:h,onReconnect:g,onReconnectStart:x,onReconnectEnd:m,setReconnecting:y,setUpdateHover:w}){const S=Ve(),C=(T,M)=>{if(T.button!==0)return;const{autoPanOnConnect:L,domNode:B,isValidConnection:Y,connectionMode:q,connectionRadius:F,lib:z,onConnectStart:H,onConnectEnd:X,cancelConnection:$,nodeLookup:Q,rfId:W,panBy:_,updateConnection:D}=S.getState(),j=M.type==="target",R=(Z,J)=>{y(!1),m==null||m(Z,o,M.type,J)},E=Z=>g==null?void 0:g(o,Z),P=(Z,J)=>{y(!0),x==null||x(T,o,M.type),H==null||H(Z,J)};Sc.onPointerDown(T.nativeEvent,{autoPanOnConnect:L,connectionMode:q,connectionRadius:F,domNode:B,handleId:M.id,nodeId:M.nodeId,nodeLookup:Q,isTarget:j,edgeUpdaterType:M.type,lib:z,flowId:W,cancelConnection:$,panBy:_,isValidConnection:Y,onConnect:E,onConnectStart:P,onConnectEnd:X,onReconnectEnd:R,updateConnection:D,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},N=T=>C(T,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),b=T=>C(T,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),O=()=>w(!0),k=()=>w(!1);return u.jsxs(u.Fragment,{children:[(t===!0||t==="source")&&u.jsx(Im,{position:f,centerX:i,centerY:l,radius:r,onMouseDown:N,onMouseEnter:O,onMouseOut:k,type:"source"}),(t===!0||t==="target")&&u.jsx(Im,{position:h,centerX:c,centerY:d,radius:r,onMouseDown:b,onMouseEnter:O,onMouseOut:k,type:"target"})]})}function TN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:c,onContextMenu:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:g,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,rfId:S,edgeTypes:C,noPanClassName:N,onError:b,disableKeyboardA11y:O}){let k=_e(he=>he.edgeLookup.get(t));const T=_e(he=>he.defaultEdgeOptions);k=T?{...T,...k}:k;let M=k.type||"default",L=(C==null?void 0:C[M])||jm[M];L===void 0&&(b==null||b("011",pn.error011(M)),M="default",L=(C==null?void 0:C.default)||jm.default);const B=!!(k.focusable||r&&typeof k.focusable>"u"),Y=typeof m<"u"&&(k.reconnectable||o&&typeof k.reconnectable>"u"),q=!!(k.selectable||i&&typeof k.selectable>"u"),F=A.useRef(null),[z,H]=A.useState(!1),[X,$]=A.useState(!1),Q=Ve(),{zIndex:W,sourceX:_,sourceY:D,targetX:j,targetY:R,sourcePosition:E,targetPosition:P}=_e(A.useCallback(he=>{const me=he.nodeLookup.get(k.source),ke=he.nodeLookup.get(k.target);if(!me||!ke)return{zIndex:k.zIndex,...bm};const Ie=v1({id:t,sourceNode:me,targetNode:ke,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:he.connectionMode,onError:b});return{zIndex:d1({selected:k.selected,zIndex:k.zIndex,sourceNode:me,targetNode:ke,elevateOnSelect:he.elevateEdgesOnSelect,zIndexMode:he.zIndexMode}),...Ie||bm}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),He),Z=A.useMemo(()=>k.markerStart?`url('#${vc(k.markerStart,S)}')`:void 0,[k.markerStart,S]),J=A.useMemo(()=>k.markerEnd?`url('#${vc(k.markerEnd,S)}')`:void 0,[k.markerEnd,S]);if(k.hidden||_===null||D===null||j===null||R===null)return null;const oe=he=>{var Ee;const{addSelectedEdges:me,unselectNodesAndEdges:ke,multiSelectionActive:Ie}=Q.getState();q&&(Q.setState({nodesSelectionActive:!1}),k.selected&&Ie?(ke({nodes:[],edges:[k]}),(Ee=F.current)==null||Ee.blur()):me([t])),l&&l(he,k)},ie=c?he=>{c(he,{...k})}:void 0,le=d?he=>{d(he,{...k})}:void 0,se=f?he=>{f(he,{...k})}:void 0,G=h?he=>{h(he,{...k})}:void 0,ne=g?he=>{g(he,{...k})}:void 0,pe=he=>{var me;if(!O&&yh.includes(he.key)&&q){const{unselectNodesAndEdges:ke,addSelectedEdges:Ie}=Q.getState();he.key==="Escape"?((me=F.current)==null||me.blur(),ke({edges:[k]})):Ie([t])}};return u.jsx("svg",{style:{zIndex:W},children:u.jsxs("g",{className:qe(["react-flow__edge",`react-flow__edge-${M}`,k.className,N,{selected:k.selected,animated:k.animated,inactive:!q&&!l,updating:z,selectable:q}]),onClick:oe,onDoubleClick:ie,onContextMenu:le,onMouseEnter:se,onMouseMove:G,onMouseLeave:ne,onKeyDown:B?pe:void 0,tabIndex:B?0:void 0,role:k.ariaRole??(B?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":B?`${Kh}-${S}`:void 0,ref:F,...k.domAttributes,children:[!X&&u.jsx(L,{id:t,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:q,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:_,sourceY:D,targetX:j,targetY:R,sourcePosition:E,targetPosition:P,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:Z,markerEnd:J,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),Y&&u.jsx(DN,{edge:k,isReconnectable:Y,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,sourceX:_,sourceY:D,targetX:j,targetY:R,sourcePosition:E,targetPosition:P,setUpdateHover:H,setReconnecting:$})]})})}var ON=A.memo(TN);const LN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function vg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:x,reconnectRadius:m,onEdgeDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:C}){const{edgesFocusable:N,edgesReconnectable:b,elementsSelectable:O,onError:k}=_e(LN,He),T=vN(r);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(jN,{defaultColor:t,rfId:o}),T.map(M=>u.jsx(ON,{id:M,edgesFocusable:N,edgesReconnectable:b,elementsSelectable:O,noPanClassName:l,onReconnect:c,onContextMenu:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:g,onClick:x,reconnectRadius:m,onDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:k,edgeTypes:i,disableKeyboardA11y:C},M))]})}vg.displayName="EdgeRenderer";const AN=A.memo(vg),$N=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function zN({children:t}){const r=_e($N);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function RN(t){const r=Or(),o=A.useRef(!1);A.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const FN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function HN(t){const r=_e(FN),o=Ve();return A.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function VN(t){return t.connection.inProgress?{...t.connection,to:Fs(t.connection.to,t.transform)}:{...t.connection}}function BN(t){return VN}function WN(t){const r=BN();return _e(r,He)}const UN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function YN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:c,height:d,isValid:f,inProgress:h}=_e(UN,He);return!(c&&l&&h)?null:u.jsx("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:qe(["react-flow__connection",Sh(f)]),children:u.jsx(wg,{style:r,type:o,CustomComponent:i,isValid:f})})})}const wg=({style:t,type:r=Jn.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:c,fromNode:d,fromHandle:f,fromPosition:h,to:g,toNode:x,toHandle:m,toPosition:y,pointer:w}=WN();if(!l)return;if(o)return u.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:d,fromHandle:f,fromX:c.x,fromY:c.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:y,connectionStatus:Sh(i),toNode:x,toHandle:m,pointer:w});let S="";const C={sourceX:c.x,sourceY:c.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:y};switch(r){case Jn.Bezier:[S]=Ul(C);break;case Jn.SimpleBezier:[S]=lg(C);break;case Jn.Step:[S]=yc({...C,borderRadius:0});break;case Jn.SmoothStep:[S]=yc(C);break;default:[S]=Oh(C)}return u.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};wg.displayName="ConnectionLine";const XN={};function Em(t=XN){A.useRef(t),Ve(),A.useEffect(()=>{},[t])}function GN(){Ve(),A.useRef(!1),A.useEffect(()=>{},[])}function Sg({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:x,onSelectionContextMenu:m,onSelectionStart:y,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:C,connectionLineComponent:N,connectionLineContainerStyle:b,selectionKeyCode:O,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:M,panActivationKeyCode:L,zoomActivationKeyCode:B,deleteKeyCode:Y,onlyRenderVisibleElements:q,elementsSelectable:F,defaultViewport:z,translateExtent:H,minZoom:X,maxZoom:$,preventScrolling:Q,defaultMarkerColor:W,zoomOnScroll:_,zoomOnPinch:D,panOnScroll:j,panOnScrollSpeed:R,panOnScrollMode:E,zoomOnDoubleClick:P,panOnDrag:Z,onPaneClick:J,onPaneMouseEnter:oe,onPaneMouseMove:ie,onPaneMouseLeave:le,onPaneScroll:se,onPaneContextMenu:G,paneClickDistance:ne,nodeClickDistance:pe,onEdgeContextMenu:he,onEdgeMouseEnter:me,onEdgeMouseMove:ke,onEdgeMouseLeave:Ie,reconnectRadius:Ee,onReconnect:Le,onReconnectStart:et,onReconnectEnd:at,noDragClassName:Xe,noWheelClassName:Ke,noPanClassName:ot,disableKeyboardA11y:Dt,nodeExtent:Tt,rfId:Bt,viewport:st,onViewportChange:hn}){return Em(t),Em(r),GN(),RN(o),HN(st),u.jsx(uN,{onPaneClick:J,onPaneMouseEnter:oe,onPaneMouseMove:ie,onPaneMouseLeave:le,onPaneContextMenu:G,onPaneScroll:se,paneClickDistance:ne,deleteKeyCode:Y,selectionKeyCode:O,selectionOnDrag:k,selectionMode:T,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:M,panActivationKeyCode:L,zoomActivationKeyCode:B,elementsSelectable:F,zoomOnScroll:_,zoomOnPinch:D,zoomOnDoubleClick:P,panOnScroll:j,panOnScrollSpeed:R,panOnScrollMode:E,panOnDrag:Z,defaultViewport:z,translateExtent:H,minZoom:X,maxZoom:$,onSelectionContextMenu:m,preventScrolling:Q,noDragClassName:Xe,noWheelClassName:Ke,noPanClassName:ot,disableKeyboardA11y:Dt,onViewportChange:hn,isControlledViewport:!!st,children:u.jsxs(zN,{children:[u.jsx(AN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:Le,onReconnectStart:et,onReconnectEnd:at,onlyRenderVisibleElements:q,onEdgeContextMenu:he,onEdgeMouseEnter:me,onEdgeMouseMove:ke,onEdgeMouseLeave:Ie,reconnectRadius:Ee,defaultMarkerColor:W,noPanClassName:ot,disableKeyboardA11y:Dt,rfId:Bt}),u.jsx(YN,{style:C,type:S,component:N,containerStyle:b}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(yN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:x,nodeClickDistance:pe,onlyRenderVisibleElements:q,noPanClassName:ot,noDragClassName:Xe,disableKeyboardA11y:Dt,nodeExtent:Tt,rfId:Bt}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}Sg.displayName="GraphView";const KN=A.memo(Sg),Mm=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h=.5,maxZoom:g=2,nodeOrigin:x,nodeExtent:m,zIndexMode:y="basic"}={})=>{const w=new Map,S=new Map,C=new Map,N=new Map,b=i??r??[],O=o??t??[],k=x??[0,0],T=m??Ms;$h(C,N,b);const M=wc(O,w,S,{nodeOrigin:k,nodeExtent:T,zIndexMode:y});let L=[0,0,1];if(d&&l&&c){const B=zs(w,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:Y,y:q,zoom:F}=Ac(B,l,c,h,g,(f==null?void 0:f.padding)??.1);L=[Y,q,F]}return{rfId:"1",width:l??0,height:c??0,transform:L,nodes:O,nodesInitialized:M,nodeLookup:w,parentLookup:S,edges:b,edgeLookup:N,connectionLookup:C,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:h,maxZoom:g,translateExtent:Ms,nodeExtent:T,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:vo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:f,fitViewResolver:null,connection:{...wh},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:s1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:vh,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},QN=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:g,nodeOrigin:x,nodeExtent:m,zIndexMode:y})=>dS((w,S)=>{async function C(){const{nodeLookup:N,panZoom:b,fitViewOptions:O,fitViewResolver:k,width:T,height:M,minZoom:L,maxZoom:B}=S();b&&(await r1({nodes:N,width:T,height:M,panZoom:b,minZoom:L,maxZoom:B},O),k==null||k.resolve(!0),w({fitViewResolver:null}))}return{...Mm({nodes:t,edges:r,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:g,nodeOrigin:x,nodeExtent:m,defaultNodes:o,defaultEdges:i,zIndexMode:y}),setNodes:N=>{const{nodeLookup:b,parentLookup:O,nodeOrigin:k,elevateNodesOnSelect:T,fitViewQueued:M,zIndexMode:L}=S(),B=wc(N,b,O,{nodeOrigin:k,nodeExtent:m,elevateNodesOnSelect:T,checkEquality:!0,zIndexMode:L});M&&B?(C(),w({nodes:N,nodesInitialized:B,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:N,nodesInitialized:B})},setEdges:N=>{const{connectionLookup:b,edgeLookup:O}=S();$h(b,O,N),w({edges:N})},setDefaultNodesAndEdges:(N,b)=>{if(N){const{setNodes:O}=S();O(N),w({hasDefaultNodes:!0})}if(b){const{setEdges:O}=S();O(b),w({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:b,nodeLookup:O,parentLookup:k,domNode:T,nodeOrigin:M,nodeExtent:L,debug:B,fitViewQueued:Y,zIndexMode:q}=S(),{changes:F,updatedInternals:z}=I1(N,O,k,T,M,L,q);z&&(k1(O,k,{nodeOrigin:M,nodeExtent:L,zIndexMode:q}),Y?(C(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(F==null?void 0:F.length)>0&&(B&&console.log("React Flow: trigger node changes",F),b==null||b(F)))},updateNodePositions:(N,b=!1)=>{const O=[];let k=[];const{nodeLookup:T,triggerNodeChanges:M,connection:L,updateConnection:B,onNodesChangeMiddlewareMap:Y}=S();for(const[q,F]of N){const z=T.get(q),H=!!(z!=null&&z.expandParent&&(z!=null&&z.parentId)&&(F!=null&&F.position)),X={id:q,type:"position",position:H?{x:Math.max(0,F.position.x),y:Math.max(0,F.position.y)}:F.position,dragging:b};if(z&&L.inProgress&&L.fromNode.id===z.id){const $=Mr(z,L.fromHandle,Ne.Left,!0);B({...L,from:$})}H&&z.parentId&&O.push({id:q,parentId:z.parentId,rect:{...F.internals.positionAbsolute,width:F.measured.width??0,height:F.measured.height??0}}),k.push(X)}if(O.length>0){const{parentLookup:q,nodeOrigin:F}=S(),z=Vc(O,T,q,F);k.push(...z)}for(const q of Y.values())k=q(k);M(k)},triggerNodeChanges:N=>{const{onNodesChange:b,setNodes:O,nodes:k,hasDefaultNodes:T,debug:M}=S();if(N!=null&&N.length){if(T){const L=TS(N,k);O(L)}M&&console.log("React Flow: trigger node changes",N),b==null||b(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:b,setEdges:O,edges:k,hasDefaultEdges:T,debug:M}=S();if(N!=null&&N.length){if(T){const L=OS(N,k);O(L)}M&&console.log("React Flow: trigger edge changes",N),b==null||b(N)}},addSelectedNodes:N=>{const{multiSelectionActive:b,edgeLookup:O,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:M}=S();if(b){const L=N.map(B=>Nr(B,!0));T(L);return}T(mo(k,new Set([...N]),!0)),M(mo(O))},addSelectedEdges:N=>{const{multiSelectionActive:b,edgeLookup:O,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:M}=S();if(b){const L=N.map(B=>Nr(B,!0));M(L);return}M(mo(O,new Set([...N]))),T(mo(k,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:b}={})=>{const{edges:O,nodes:k,nodeLookup:T,triggerNodeChanges:M,triggerEdgeChanges:L}=S(),B=N||k,Y=b||O,q=B.map(z=>{const H=T.get(z.id);return H&&(H.selected=!1),Nr(z.id,!1)}),F=Y.map(z=>Nr(z.id,!1));M(q),L(F)},setMinZoom:N=>{const{panZoom:b,maxZoom:O}=S();b==null||b.setScaleExtent([N,O]),w({minZoom:N})},setMaxZoom:N=>{const{panZoom:b,minZoom:O}=S();b==null||b.setScaleExtent([O,N]),w({maxZoom:N})},setTranslateExtent:N=>{var b;(b=S().panZoom)==null||b.setTranslateExtent(N),w({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:b,triggerNodeChanges:O,triggerEdgeChanges:k,elementsSelectable:T}=S();if(!T)return;const M=b.reduce((B,Y)=>Y.selected?[...B,Nr(Y.id,!1)]:B,[]),L=N.reduce((B,Y)=>Y.selected?[...B,Nr(Y.id,!1)]:B,[]);O(M),k(L)},setNodeExtent:N=>{const{nodes:b,nodeLookup:O,parentLookup:k,nodeOrigin:T,elevateNodesOnSelect:M,nodeExtent:L,zIndexMode:B}=S();N[0][0]===L[0][0]&&N[0][1]===L[0][1]&&N[1][0]===L[1][0]&&N[1][1]===L[1][1]||(wc(b,O,k,{nodeOrigin:T,nodeExtent:N,elevateNodesOnSelect:M,checkEquality:!1,zIndexMode:B}),w({nodeExtent:N}))},panBy:N=>{const{transform:b,width:O,height:k,panZoom:T,translateExtent:M}=S();return E1({delta:N,panZoom:T,transform:b,translateExtent:M,width:O,height:k})},setCenter:async(N,b,O)=>{const{width:k,height:T,maxZoom:M,panZoom:L}=S();if(!L)return Promise.resolve(!1);const B=typeof(O==null?void 0:O.zoom)<"u"?O.zoom:M;return await L.setViewport({x:k/2-N*B,y:T/2-b*B,zoom:B},{duration:O==null?void 0:O.duration,ease:O==null?void 0:O.ease,interpolate:O==null?void 0:O.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...wh}})},updateConnection:N=>{w({connection:N})},reset:()=>w({...Mm()})}},Object.is);function Ql({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:c,initialMinZoom:d,initialMaxZoom:f,initialFitViewOptions:h,fitView:g,nodeOrigin:x,nodeExtent:m,zIndexMode:y,children:w}){const[S]=A.useState(()=>QN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:g,minZoom:d,maxZoom:f,fitViewOptions:h,nodeOrigin:x,nodeExtent:m,zIndexMode:y}));return u.jsx(pS,{value:S,children:u.jsx(zS,{children:w})})}function qN({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:g,maxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w}){return A.useContext(Xl)?u.jsx(u.Fragment,{children:t}):u.jsx(Ql,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:c,initialHeight:d,fitView:f,initialFitViewOptions:h,initialMinZoom:g,initialMaxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w,children:t})}const ZN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function JN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:c,edgeTypes:d,onNodeClick:f,onEdgeClick:h,onInit:g,onMove:x,onMoveStart:m,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:b,onNodeMouseEnter:O,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:M,onNodeDoubleClick:L,onNodeDragStart:B,onNodeDrag:Y,onNodeDragStop:q,onNodesDelete:F,onEdgesDelete:z,onDelete:H,onSelectionChange:X,onSelectionDragStart:$,onSelectionDrag:Q,onSelectionDragStop:W,onSelectionContextMenu:_,onSelectionStart:D,onSelectionEnd:j,onBeforeDelete:R,connectionMode:E,connectionLineType:P=Jn.Bezier,connectionLineStyle:Z,connectionLineComponent:J,connectionLineContainerStyle:oe,deleteKeyCode:ie="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:se=!1,selectionMode:G=_s.Full,panActivationKeyCode:ne="Space",multiSelectionKeyCode:pe=Ds()?"Meta":"Control",zoomActivationKeyCode:he=Ds()?"Meta":"Control",snapToGrid:me,snapGrid:ke,onlyRenderVisibleElements:Ie=!1,selectNodesOnDrag:Ee,nodesDraggable:Le,autoPanOnNodeFocus:et,nodesConnectable:at,nodesFocusable:Xe,nodeOrigin:Ke=Qh,edgesFocusable:ot,edgesReconnectable:Dt,elementsSelectable:Tt=!0,defaultViewport:Bt=CS,minZoom:st=.5,maxZoom:hn=2,translateExtent:tr=Ms,preventScrolling:Vs=!0,nodeExtent:gn,defaultMarkerColor:nr="#b1b1b7",zoomOnScroll:Zl=!0,zoomOnPinch:Bs=!0,panOnScroll:Ws=!1,panOnScrollSpeed:Jl=.5,panOnScrollMode:bo=br.Free,zoomOnDoubleClick:Co=!0,panOnDrag:Io=!0,onPaneClick:Eo,onPaneMouseEnter:Mo,onPaneMouseMove:Mn,onPaneMouseLeave:_n,onPaneScroll:Us,onPaneContextMenu:Ys,paneClickDistance:Xs=1,nodeClickDistance:Gs=0,children:Ks,onReconnect:_o,onReconnectStart:Qs,onReconnectEnd:rr,onEdgeContextMenu:Po,onEdgeDoubleClick:or,onEdgeMouseEnter:ea,onEdgeMouseMove:sr,onEdgeMouseLeave:Lr,reconnectRadius:Ar=10,onNodesChange:Do,onEdgesChange:ta,noDragClassName:na="nodrag",noWheelClassName:ra="nowheel",noPanClassName:rn="nopan",fitView:To,fitViewOptions:Oo,connectOnClick:oa,attributionPosition:qs,proOptions:Zs,defaultEdgeOptions:Js,elevateNodesOnSelect:ei=!0,elevateEdgesOnSelect:sa=!1,disableKeyboardA11y:ti=!1,autoPanOnConnect:Be,autoPanOnNodeDrag:ia,autoPanSpeed:Lo,connectionRadius:ni,isValidConnection:$r,onError:la,style:ri,id:ir,nodeDragThreshold:Ot,connectionDragThreshold:aa,viewport:jt,onViewportChange:ua,width:ca,height:da,colorMode:zr="light",debug:Rr,onScroll:on,ariaLabelConfig:Fr,zIndexMode:oi="basic",...fa},Ao){const Hr=ir||"1",$o=_S(zr),lr=A.useCallback(si=>{si.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),on==null||on(si)},[on]);return u.jsx("div",{"data-testid":"rf__wrapper",...fa,onScroll:lr,style:{...ri,...ZN},ref:Ao,className:qe(["react-flow",l,$o]),id:ir,role:"application",children:u.jsxs(qN,{nodes:t,edges:r,width:ca,height:da,fitView:To,fitViewOptions:Oo,minZoom:st,maxZoom:hn,nodeOrigin:Ke,nodeExtent:gn,zIndexMode:oi,children:[u.jsx(KN,{onInit:g,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:O,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:M,onNodeDoubleClick:L,nodeTypes:c,edgeTypes:d,connectionLineType:P,connectionLineStyle:Z,connectionLineComponent:J,connectionLineContainerStyle:oe,selectionKeyCode:le,selectionOnDrag:se,selectionMode:G,deleteKeyCode:ie,multiSelectionKeyCode:pe,panActivationKeyCode:ne,zoomActivationKeyCode:he,onlyRenderVisibleElements:Ie,defaultViewport:Bt,translateExtent:tr,minZoom:st,maxZoom:hn,preventScrolling:Vs,zoomOnScroll:Zl,zoomOnPinch:Bs,zoomOnDoubleClick:Co,panOnScroll:Ws,panOnScrollSpeed:Jl,panOnScrollMode:bo,panOnDrag:Io,onPaneClick:Eo,onPaneMouseEnter:Mo,onPaneMouseMove:Mn,onPaneMouseLeave:_n,onPaneScroll:Us,onPaneContextMenu:Ys,paneClickDistance:Xs,nodeClickDistance:Gs,onSelectionContextMenu:_,onSelectionStart:D,onSelectionEnd:j,onReconnect:_o,onReconnectStart:Qs,onReconnectEnd:rr,onEdgeContextMenu:Po,onEdgeDoubleClick:or,onEdgeMouseEnter:ea,onEdgeMouseMove:sr,onEdgeMouseLeave:Lr,reconnectRadius:Ar,defaultMarkerColor:nr,noDragClassName:na,noWheelClassName:ra,noPanClassName:rn,rfId:Hr,disableKeyboardA11y:ti,nodeExtent:gn,viewport:jt,onViewportChange:ua}),u.jsx(MS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:b,nodesDraggable:Le,autoPanOnNodeFocus:et,nodesConnectable:at,nodesFocusable:Xe,edgesFocusable:ot,edgesReconnectable:Dt,elementsSelectable:Tt,elevateNodesOnSelect:ei,elevateEdgesOnSelect:sa,minZoom:st,maxZoom:hn,nodeExtent:gn,onNodesChange:Do,onEdgesChange:ta,snapToGrid:me,snapGrid:ke,connectionMode:E,translateExtent:tr,connectOnClick:oa,defaultEdgeOptions:Js,fitView:To,fitViewOptions:Oo,onNodesDelete:F,onEdgesDelete:z,onDelete:H,onNodeDragStart:B,onNodeDrag:Y,onNodeDragStop:q,onSelectionDrag:Q,onSelectionDragStart:$,onSelectionDragStop:W,onMove:x,onMoveStart:m,onMoveEnd:y,noPanClassName:rn,nodeOrigin:Ke,rfId:Hr,autoPanOnConnect:Be,autoPanOnNodeDrag:ia,autoPanSpeed:Lo,onError:la,connectionRadius:ni,isValidConnection:$r,selectNodesOnDrag:Ee,nodeDragThreshold:Ot,connectionDragThreshold:aa,onBeforeDelete:R,debug:Rr,ariaLabelConfig:Fr,zIndexMode:oi}),u.jsx(bS,{onSelectionChange:X}),Ks,u.jsx(wS,{proOptions:Zs,position:qs}),u.jsx(vS,{rfId:Hr,disableKeyboardA11y:ti})]})})}var Ng=Zh(JN);const ek=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function kg({children:t}){const r=_e(ek);return r?fS.createPortal(t,r):null}function tk({dimensions:t,lineWidth:r,variant:o,className:i}){return u.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:qe(["react-flow__background-pattern",o,i])})}function nk({radius:t,className:r}){return u.jsx("circle",{cx:t,cy:t,r:t,className:qe(["react-flow__background-pattern","dots",r])})}var er;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(er||(er={}));const rk={[er.Dots]:1,[er.Lines]:1,[er.Cross]:6},ok=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function jg({id:t,variant:r=er.Dots,gap:o=20,size:i,lineWidth:l=1,offset:c=0,color:d,bgColor:f,style:h,className:g,patternClassName:x}){const m=A.useRef(null),{transform:y,patternId:w}=_e(ok,He),S=i||rk[r],C=r===er.Dots,N=r===er.Cross,b=Array.isArray(o)?o:[o,o],O=[b[0]*y[2]||1,b[1]*y[2]||1],k=S*y[2],T=Array.isArray(c)?c:[c,c],M=N?[k,k]:O,L=[T[0]*y[2]||1+M[0]/2,T[1]*y[2]||1+M[1]/2],B=`${w}${t||""}`;return u.jsxs("svg",{className:qe(["react-flow__background",g]),style:{...h,...Kl,"--xy-background-color-props":f,"--xy-background-pattern-color-props":d},ref:m,"data-testid":"rf__background",children:[u.jsx("pattern",{id:B,x:y[0]%O[0],y:y[1]%O[1],width:O[0],height:O[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${L[0]},-${L[1]})`,children:C?u.jsx(nk,{radius:k/2,className:x}):u.jsx(tk,{dimensions:M,lineWidth:l,variant:r,className:x})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${B})`})]})}jg.displayName="Background";const bg=A.memo(jg);function sk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ik(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function lk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ak(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function uk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function hl({children:t,className:r,...o}){return u.jsx("button",{type:"button",className:qe(["react-flow__controls-button",r]),...o,children:t})}const ck=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Cg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:c,onZoomOut:d,onFitView:f,onInteractiveChange:h,className:g,children:x,position:m="bottom-left",orientation:y="vertical","aria-label":w}){const S=Ve(),{isInteractive:C,minZoomReached:N,maxZoomReached:b,ariaLabelConfig:O}=_e(ck,He),{zoomIn:k,zoomOut:T,fitView:M}=Or(),L=()=>{k(),c==null||c()},B=()=>{T(),d==null||d()},Y=()=>{M(l),f==null||f()},q=()=>{S.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),h==null||h(!C)},F=y==="horizontal"?"horizontal":"vertical";return u.jsxs(Gl,{className:qe(["react-flow__controls",F,g]),position:m,style:t,"data-testid":"rf__controls","aria-label":w??O["controls.ariaLabel"],children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(hl,{onClick:L,className:"react-flow__controls-zoomin",title:O["controls.zoomIn.ariaLabel"],"aria-label":O["controls.zoomIn.ariaLabel"],disabled:b,children:u.jsx(sk,{})}),u.jsx(hl,{onClick:B,className:"react-flow__controls-zoomout",title:O["controls.zoomOut.ariaLabel"],"aria-label":O["controls.zoomOut.ariaLabel"],disabled:N,children:u.jsx(ik,{})})]}),o&&u.jsx(hl,{className:"react-flow__controls-fitview",onClick:Y,title:O["controls.fitView.ariaLabel"],"aria-label":O["controls.fitView.ariaLabel"],children:u.jsx(lk,{})}),i&&u.jsx(hl,{className:"react-flow__controls-interactive",onClick:q,title:O["controls.interactive.ariaLabel"],"aria-label":O["controls.interactive.ariaLabel"],children:C?u.jsx(uk,{}):u.jsx(ak,{})}),x]})}Cg.displayName="Controls";const Ig=A.memo(Cg);function dk({id:t,x:r,y:o,width:i,height:l,style:c,color:d,strokeColor:f,strokeWidth:h,className:g,borderRadius:x,shapeRendering:m,selected:y,onClick:w}){const{background:S,backgroundColor:C}=c||{},N=d||S||C;return u.jsx("rect",{className:qe(["react-flow__minimap-node",{selected:y},g]),x:r,y:o,rx:x,ry:x,width:i,height:l,style:{fill:N,stroke:f,strokeWidth:h},shapeRendering:m,onClick:w?b=>w(b,t):void 0})}const fk=A.memo(dk),pk=t=>t.nodes.map(r=>r.id),lc=t=>t instanceof Function?t:()=>t;function mk({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:c=fk,onClick:d}){const f=_e(pk,He),h=lc(r),g=lc(t),x=lc(o),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(y=>u.jsx(gk,{id:y,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:x,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:c,onClick:d,shapeRendering:m},y))})}function hk({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:c,shapeRendering:d,NodeComponent:f,onClick:h}){const{node:g,x,y:m,width:y,height:w}=_e(S=>{const{internals:C}=S.nodeLookup.get(t),N=C.userNode,{x:b,y:O}=C.positionAbsolute,{width:k,height:T}=En(N);return{node:N,x:b,y:O,width:k,height:T}},He);return!g||g.hidden||!Ih(g)?null:u.jsx(f,{x,y:m,width:y,height:w,style:g.style,selected:!!g.selected,className:i(g),color:r(g),borderRadius:l,strokeColor:o(g),strokeWidth:c,shapeRendering:d,onClick:h,id:g.id})}const gk=A.memo(hk);var xk=A.memo(mk);const yk=200,vk=150,wk=t=>!t.hidden,Sk=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?Ch(zs(t.nodeLookup,{filter:wk}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},Nk="react-flow__minimap-desc";function Eg({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:h,maskColor:g,maskStrokeColor:x,maskStrokeWidth:m,position:y="bottom-right",onClick:w,onNodeClick:S,pannable:C=!1,zoomable:N=!1,ariaLabel:b,inversePan:O,zoomStep:k=1,offsetScale:T=5}){const M=Ve(),L=A.useRef(null),{boundingRect:B,viewBB:Y,rfId:q,panZoom:F,translateExtent:z,flowWidth:H,flowHeight:X,ariaLabelConfig:$}=_e(Sk,He),Q=(t==null?void 0:t.width)??yk,W=(t==null?void 0:t.height)??vk,_=B.width/Q,D=B.height/W,j=Math.max(_,D),R=j*Q,E=j*W,P=T*j,Z=B.x-(R-B.width)/2-P,J=B.y-(E-B.height)/2-P,oe=R+P*2,ie=E+P*2,le=`${Nk}-${q}`,se=A.useRef(0),G=A.useRef();se.current=j,A.useEffect(()=>{if(L.current&&F)return G.current=$1({domNode:L.current,panZoom:F,getTransform:()=>M.getState().transform,getViewScale:()=>se.current}),()=>{var me;(me=G.current)==null||me.destroy()}},[F]),A.useEffect(()=>{var me;(me=G.current)==null||me.update({translateExtent:z,width:H,height:X,inversePan:O,pannable:C,zoomStep:k,zoomable:N})},[C,N,O,k,z,H,X]);const ne=w?me=>{var Ee;const[ke,Ie]=((Ee=G.current)==null?void 0:Ee.pointer(me))||[0,0];w(me,{x:ke,y:Ie})}:void 0,pe=S?A.useCallback((me,ke)=>{const Ie=M.getState().nodeLookup.get(ke).internals.userNode;S(me,Ie)},[]):void 0,he=b??$["minimap.ariaLabel"];return u.jsx(Gl,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*j:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:qe(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:Q,height:W,viewBox:`${Z} ${J} ${oe} ${ie}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:L,onClick:ne,children:[he&&u.jsx("title",{id:le,children:he}),u.jsx(xk,{onClick:pe,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-P},${J-P}h${oe+P*2}v${ie+P*2}h${-oe-P*2}z
        M${Y.x},${Y.y}h${Y.width}v${Y.height}h${-Y.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Eg.displayName="MiniMap";const kk=A.memo(Eg),jk=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,bk={[_r.Line]:"right",[_r.Handle]:"bottom-right"};function Ck({nodeId:t,position:r,variant:o=_r.Handle,className:i,style:l=void 0,children:c,color:d,minWidth:f=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:y,autoScale:w=!0,shouldResize:S,onResizeStart:C,onResize:N,onResizeEnd:b}){const O=ng(),k=typeof t=="string"?t:O,T=Ve(),M=A.useRef(null),L=o===_r.Handle,B=_e(A.useCallback(jk(L&&w),[L,w]),He),Y=A.useRef(null),q=r??bk[o];A.useEffect(()=>{if(!(!M.current||!k))return Y.current||(Y.current=J1({domNode:M.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:z,transform:H,snapGrid:X,snapToGrid:$,nodeOrigin:Q,domNode:W}=T.getState();return{nodeLookup:z,transform:H,snapGrid:X,snapToGrid:$,nodeOrigin:Q,paneDomNode:W}},onChange:(z,H)=>{const{triggerNodeChanges:X,nodeLookup:$,parentLookup:Q,nodeOrigin:W}=T.getState(),_=[],D={x:z.x,y:z.y},j=$.get(k);if(j&&j.expandParent&&j.parentId){const R=j.origin??W,E=z.width??j.measured.width??0,P=z.height??j.measured.height??0,Z={id:j.id,parentId:j.parentId,rect:{width:E,height:P,...Eh({x:z.x??j.position.x,y:z.y??j.position.y},{width:E,height:P},j.parentId,$,R)}},J=Vc([Z],$,Q,W);_.push(...J),D.x=z.x?Math.max(R[0]*E,z.x):void 0,D.y=z.y?Math.max(R[1]*P,z.y):void 0}if(D.x!==void 0&&D.y!==void 0){const R={id:k,type:"position",position:{...D}};_.push(R)}if(z.width!==void 0&&z.height!==void 0){const E={id:k,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};_.push(E)}for(const R of H){const E={...R,type:"position"};_.push(E)}X(_)},onEnd:({width:z,height:H})=>{const X={id:k,type:"dimensions",resizing:!1,dimensions:{width:z,height:H}};T.getState().triggerNodeChanges([X])}})),Y.current.update({controlPosition:q,boundaries:{minWidth:f,minHeight:h,maxWidth:g,maxHeight:x},keepAspectRatio:m,resizeDirection:y,onResizeStart:C,onResize:N,onResizeEnd:b,shouldResize:S}),()=>{var z;(z=Y.current)==null||z.destroy()}},[q,f,h,g,x,m,C,N,b,S]);const F=q.split("-");return u.jsx("div",{className:qe(["react-flow__resize-control","nodrag",...F,o,i]),ref:M,style:{...l,scale:B,...d&&{[L?"backgroundColor":"borderColor"]:d}},children:c})}const _m=A.memo(Ck);function Ik({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:c,color:d,minWidth:f=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,autoScale:y=!0,shouldResize:w,onResizeStart:S,onResize:C,onResizeEnd:N}){return r?u.jsxs(u.Fragment,{children:[X1.map(b=>u.jsx(_m,{className:l,style:c,nodeId:t,position:b,variant:_r.Line,color:d,minWidth:f,minHeight:h,maxWidth:g,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:C,onResizeEnd:N},b)),Y1.map(b=>u.jsx(_m,{className:o,style:i,nodeId:t,position:b,color:d,minWidth:f,minHeight:h,maxWidth:g,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:C,onResizeEnd:N},b))]}):null}const Pm=t=>{let r;const o=new Set,i=(g,x)=>{const m=typeof g=="function"?g(r):g;if(!Object.is(m,r)){const y=r;r=x??(typeof m!="object"||m===null)?m:Object.assign({},r,m),o.forEach(w=>w(r,y))}},l=()=>r,f={setState:i,getState:l,getInitialState:()=>h,subscribe:g=>(o.add(g),()=>o.delete(g))},h=r=t(i,l,f);return f},Ek=(t=>t?Pm(t):Pm),Mk=t=>t;function _k(t,r=Mk){const o=vs.useSyncExternalStore(t.subscribe,vs.useCallback(()=>r(t.getState()),[t,r]),vs.useCallback(()=>r(t.getInitialState()),[t,r]));return vs.useDebugValue(o),o}const Dm=t=>{const r=Ek(t),o=i=>_k(r,i);return Object.assign(o,r),o},Hs=(t=>t?Dm(t):Dm),Pk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let dn=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=Pk[o[t]&63];return r};const Nt="__station_input__",Vt="__station_output__",Dk=100,Tk=["energycells"];function Ok(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return Dk}function Lk(t,r){return Tk.includes(t)?r/100:1}const Mg=3600,ys={food:75,medical:45,per:200,cycle:600},gl={food:50,medical:30,per:200},Ak="foodrations",$k="medicalsupplies";function zk(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),c=Math.max(i-t,0),d=t>0?Math.min(i/t,1):0,f=l*(ys.food/ys.per),h=c*(gl.food/gl.per),g=l*(ys.medical/ys.per),x=c*(gl.medical/gl.per),m=Mg/ys.cycle,y=(f+h)*m,w=(g+x)*m;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:c,workerRatio:d,foodDemand:y,medicalDemand:w}}function Rk(t,r){return 1+t*r}function Fk(t,r){if(t.totalCapacity<=0||r<=0)return[];const o=r/t.totalCapacity,i=[];return t.foodDemand>0&&i.push({wareId:Ak,amount:t.foodDemand*o}),t.medicalDemand>0&&i.push({wareId:$k,amount:t.medicalDemand*o}),i}function Wc(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const c=`${o}_default`;if(r[c])return r[c];for(const d of Object.values(r))if(d.wareId===o)return d;return null}function kc(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Hk(t,r,o,i){const l=kc(t.blueprintId,r),c=[],d=[];if(l==="production"){const f=r.modules.production[t.blueprintId];if(f){const h=Wc(f,r.recipes);if(h){const g=Lk(f.producedWareId,o),x=Rk(h.workforceBonus,i),m=g*x,y=Mg/h.time,w=h.amount*t.count*m*y;d.push({wareId:f.producedWareId,amount:w});for(const S of h.inputs){const C=S.amount*t.count*y;c.push({wareId:S.ware,amount:C})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:c,grossOutputs:d,netInputs:[...c],netOutputs:[...d]}}function fo(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Vk(t,r,o){const i=Ok(t,r),l=t.fillHabitats??!1,c=t.moduleConnections??[];let d=0,f=0;for(const j of t.modules){const R=kc(j.blueprintId,o);if(R==="production"){const E=o.modules.production[j.blueprintId];E&&(d+=E.workforceMax*j.count)}else if(R==="habitat"){const E=o.modules.habitat[j.blueprintId];E&&(f+=E.workforceCapacity*j.count)}}const h=zk(d,f,l),g=t.modules.map(j=>Hk(j,o,i,h.workerRatio)),x=new Map;for(const j of g)x.set(j.moduleId,j);for(const j of t.modules)if(kc(j.blueprintId,o)==="habitat"){const E=o.modules.habitat[j.blueprintId],P=x.get(j.id);if(E&&P){const Z=E.workforceCapacity*j.count,J=Fk(h,Z);P.grossInputs.push(...J),P.netInputs=[...P.grossInputs]}}const m=new Map;for(const j of g)m.set(j.moduleId,new Map);const y=new Map;for(const j of g)y.set(j.moduleId,new Map);const w=new Map;for(const j of g){const R=new Map;for(const E of j.grossOutputs)R.set(E.wareId,E.amount);w.set(j.moduleId,R)}const S=new Map;for(const j of g){const R=new Map;for(const E of j.grossInputs)R.set(E.wareId,E.amount);S.set(j.moduleId,R)}const C=c.filter(j=>j.sourceModuleId!==Nt&&j.targetModuleId!==Vt),N=c.filter(j=>j.sourceModuleId===Nt),b=c.filter(j=>j.targetModuleId===Vt),O=[];for(const j of C){const R=j.mode??"auto",E=w.get(j.sourceModuleId),P=(E==null?void 0:E.get(j.wareId))??0,Z=S.get(j.targetModuleId),J=(Z==null?void 0:Z.get(j.wareId))??0;let oe,ie=!1,le=!1;switch(R){case"custom":oe=Math.min(j.amount,P,J),ie=j.amount>P,le=j.amount>J;break;case"max":oe=Math.min(P,J),ie=P<J,le=J<P;break;case"auto":default:oe=Math.min(P,J),ie=P<J,le=J<P;break}O.push({connectionId:j.id,effectiveAmount:oe,sourceConstrained:ie,targetConstrained:le}),E&&E.set(j.wareId,P-oe),Z&&Z.set(j.wareId,J-oe);const se=m.get(j.targetModuleId);if(se){const ne=se.get(j.wareId)||0;se.set(j.wareId,ne+oe)}const G=y.get(j.sourceModuleId);if(G){const ne=G.get(j.wareId)||0;G.set(j.wareId,ne+oe)}}for(const j of N){const R=j.mode??"auto",E=S.get(j.targetModuleId),P=(E==null?void 0:E.get(j.wareId))??0;let Z,J=!1,oe=!1;switch(R){case"custom":Z=Math.min(j.amount,P),oe=j.amount>P;break;case"max":case"auto":default:Z=P;break}O.push({connectionId:j.id,effectiveAmount:Z,sourceConstrained:J,targetConstrained:oe}),E&&E.set(j.wareId,P-Z)}for(const j of b){const R=j.mode??"auto",E=w.get(j.sourceModuleId),P=(E==null?void 0:E.get(j.wareId))??0;let Z,J=!1,oe=!1;switch(R){case"custom":Z=Math.min(j.amount,P),J=j.amount>P;break;case"max":case"auto":default:Z=P;break}O.push({connectionId:j.id,effectiveAmount:Z,sourceConstrained:J,targetConstrained:oe}),E&&E.set(j.wareId,P-Z)}for(const j of g){const R=m.get(j.moduleId)||new Map,E=y.get(j.moduleId)||new Map;j.netInputs=[];for(const P of j.grossInputs){const Z=R.get(P.wareId)||0,J=P.amount-Z;J>.01&&j.netInputs.push({wareId:P.wareId,amount:J})}j.netOutputs=[];for(const P of j.grossOutputs){const Z=E.get(P.wareId)||0,J=P.amount-Z;J>.01&&j.netOutputs.push({wareId:P.wareId,amount:J})}}const k=[],T=[],M=[],L=[];for(const j of g)k.push(...j.grossInputs),T.push(...j.grossOutputs),M.push(...j.netInputs),L.push(...j.netOutputs);const B=fo(k),Y=fo(T),q=fo(M),F=fo(L),z=N.map(j=>{const R=O.find(E=>E.connectionId===j.id);return{wareId:j.wareId,amount:(R==null?void 0:R.effectiveAmount)??j.amount}}),H=b.map(j=>{const R=O.find(E=>E.connectionId===j.id);return{wareId:j.wareId,amount:(R==null?void 0:R.effectiveAmount)??j.amount}}),X=fo(z),$=fo(H),Q=new Map;for(const j of X)Q.set(j.wareId,j.amount);const W=new Map;for(const j of $)W.set(j.wareId,j.amount);const _=[];for(const j of q){const R=Q.get(j.wareId)||0,E=j.amount-R;E>.01&&_.push({wareId:j.wareId,amount:E})}const D=[];for(const j of F){const R=W.get(j.wareId)||0,E=j.amount-R;E>.01&&D.push({wareId:j.wareId,amount:E})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:d,totalWorkforceCapacity:f,actualPopulation:h.actualPopulation,workforceFoodDemand:h.foodDemand,workforceMedicalDemand:h.medicalDemand,modules:g,grossInputs:B,grossOutputs:Y,netInputs:q,netOutputs:F,availableForImport:_,availableForExport:D,stationInputs:X,stationOutputs:$,externallySupplied:[],externallyConsumed:[],remainingInputs:[...X],remainingOutputs:[...$],moduleConnections:O}}function Tm(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Bk(t,r){const o=t.stations.map(y=>Vk(y,t.sectors,r)),i=new Map;for(const y of o)i.set(y.stationId,y);const l=new Map,c=new Map,d=new Map,f=new Map;for(const y of t.stations)l.set(y.id,new Map),c.set(y.id,new Map),d.set(y.id,new Map),f.set(y.id,new Map);for(const y of o){const w=d.get(y.stationId),S=f.get(y.stationId);for(const C of y.stationOutputs){const N=y.netOutputs.find(O=>O.wareId===C.wareId),b=Math.min(C.amount,(N==null?void 0:N.amount)??C.amount);w.set(C.wareId,b)}for(const C of y.stationInputs)S.set(C.wareId,C.amount)}const h=[];for(const y of t.connections){const w=y.mode??"auto",S=d.get(y.sourceStationId),C=(S==null?void 0:S.get(y.wareId))??0,N=f.get(y.targetStationId),b=(N==null?void 0:N.get(y.wareId))??0;let O,k=!1,T=!1;switch(w){case"custom":O=Math.min(y.amount,C,b),k=y.amount>C,T=y.amount>b;break;case"max":O=Math.min(C,b),k=C<b,T=b<C;break;case"auto":default:O=Math.min(C,b),k=C<b,T=b<C;break}h.push({connectionId:y.id,effectiveAmount:O,sourceConstrained:k,targetConstrained:T}),S&&S.set(y.wareId,C-O),N&&N.set(y.wareId,b-O);const M=l.get(y.targetStationId);if(M){const B=M.get(y.wareId)||0;M.set(y.wareId,B+O)}const L=c.get(y.sourceStationId);if(L){const B=L.get(y.wareId)||0;L.set(y.wareId,B+O)}}for(const y of o){const w=l.get(y.stationId)||new Map,S=c.get(y.stationId)||new Map;y.externallySupplied=Array.from(w.entries()).map(([N,b])=>({wareId:N,amount:b})).filter(N=>N.amount>.01),y.externallyConsumed=Array.from(S.entries()).map(([N,b])=>({wareId:N,amount:b})).filter(N=>N.amount>.01),y.remainingInputs=[];for(const N of y.stationInputs){const b=w.get(N.wareId)||0,O=N.amount-b;O>.01&&y.remainingInputs.push({wareId:N.wareId,amount:O})}y.remainingOutputs=[];for(const N of y.stationOutputs){const b=S.get(N.wareId)||0,O=N.amount-b;O>.01&&y.remainingOutputs.push({wareId:N.wareId,amount:O})}const C=t.stations.find(N=>N.id===y.stationId);if(C){const N=C.moduleConnections??[];for(const[b,O]of w.entries()){if(O<.01)continue;const k=N.filter(L=>L.sourceModuleId===Nt&&L.wareId===b);if(k.length===0)continue;const T=k.reduce((L,B)=>L+B.amount,0);if(T<.01)continue;const M=Math.min(O/T,1);for(const L of k){const B=y.modules.find(F=>F.moduleId===L.targetModuleId);if(!B)continue;const Y=L.amount*M,q=B.netInputs.findIndex(F=>F.wareId===b);if(q!==-1){const z=B.netInputs[q].amount-Y;z>.01?B.netInputs[q].amount=z:B.netInputs.splice(q,1)}}}for(const[b,O]of S.entries()){if(O<.01)continue;const k=N.filter(L=>L.targetModuleId===Vt&&L.wareId===b);if(k.length===0)continue;const T=k.reduce((L,B)=>L+B.amount,0);if(T<.01)continue;const M=Math.min(O/T,1);for(const L of k){const B=y.modules.find(F=>F.moduleId===L.sourceModuleId);if(!B)continue;const Y=L.amount*M,q=B.netOutputs.findIndex(F=>F.wareId===b);if(q!==-1){const z=B.netOutputs[q].amount-Y;z>.01?B.netOutputs[q].amount=z:B.netOutputs.splice(q,1)}}}}}const g=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const S of y.stationInputs){const C=w.get(S.wareId)||0;C<S.amount-.01&&g.push({wareId:S.wareId,stationId:y.stationId,required:S.amount,supplied:C,deficit:S.amount-C})}}const x=[],m=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const C of y.netInputs){const N=w.get(C.wareId)||0,b=C.amount-N;b>0&&x.push({wareId:C.wareId,amount:b})}const S=new Map;for(const C of t.connections)if(C.sourceStationId===y.stationId){const N=S.get(C.wareId)||0;S.set(C.wareId,N+C.amount)}for(const C of y.netOutputs){const N=S.get(C.wareId)||0,b=C.amount-N;b>0&&m.push({wareId:C.wareId,amount:b})}}return{stations:o,connections:h,totalInputs:Tm(x),totalOutputs:Tm(m),deficits:g}}function _g(t,r){return t.connections.find(o=>o.connectionId===r)}function Dr(t,r){return t.stations.find(o=>o.stationId===r)}function bl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function qt(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const Oe=Hs((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function Om(t,r="swi",o=[]){const i=new Date().toISOString();return{id:dn(),name:t,version:1,gameMode:r,tags:o,createdAt:i,updatedAt:i,sectors:[],stations:[],connections:[]}}function xl(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const ce=Hs((t,r)=>({plan:Om("New Plan"),computed:xl(),createPlan:o=>{t({plan:Om(o),computed:xl()})},loadPlan:o=>{const i={...o,gameMode:o.gameMode||"swi",tags:o.tags||[],stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(c=>({...c,locked:c.locked??!1,ratio:c.ratio??1}))}))};t({plan:i,computed:xl()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:dn(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(c=>({plan:{...c.plan,sectors:[...c.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:dn(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(c=>({plan:{...c.plan,stations:[...c.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,sectorId:i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const c={id:dn(),blueprintId:i,count:1,position:l};return t(d=>({plan:{...d.plan,stations:d.plan.stations.map(f=>f.id===o?{...f,modules:[...f.modules,c]}:f),updatedAt:new Date().toISOString()}})),r().recompute(),c.id},updateModule:(o,i,l)=>{const d=r().plan.stations.find(g=>g.id===o),f=d==null?void 0:d.modules.find(g=>g.id===i);if(l.count!==void 0&&f&&l.count!==f.count&&f){const g=l.count/f.count,x=((d==null?void 0:d.moduleConnections)??[]).map(m=>m.sourceModuleId===i&&!m.locked?{...m,amount:m.amount*g}:m.targetModuleId===i&&m.sourceModuleId===Nt&&!m.locked?{...m,amount:m.amount*g}:m);t(m=>({plan:{...m.plan,stations:m.plan.stations.map(y=>y.id===o?{...y,modules:y.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:x}:y),updatedAt:new Date().toISOString()}}))}else t(g=>({plan:{...g.plan,stations:g.plan.stations.map(x=>x.id===o?{...x,modules:x.modules.map(m=>m.id===i?{...m,...l}:m)}:x),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,modules:c.modules.filter(d=>d.id!==i),moduleConnections:(c.moduleConnections??[]).filter(d=>d.sourceModuleId!==i&&d.targetModuleId!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:dn(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:dn(),...i};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:[...d.moduleConnections??[],l]}:d),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:(d.moduleConnections??[]).map(f=>f.id===i?{...f,...l}:f)}:d),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).filter(d=>d.id!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=Oe.getState().gameData;if(!i){t({computed:xl()});return}const l=Bk(o,i);t({computed:l})}}));let Lm=!1;function Wk(t){Lm||(Lm=!0,ce.subscribe((r,o)=>{r.plan!==o.plan&&t(r.plan)}))}let wr=null;const ge=Hs(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,plansOpen:!1,theme:"system",language:"en",contextMenu:null,toast:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setPlansOpen:r=>t({plansOpen:r}),setTheme:r=>t({theme:r}),setLanguage:r=>t({language:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null}),showToast:(r,o="info")=>{wr&&clearTimeout(wr),t({toast:{message:r,type:o}}),wr=setTimeout(()=>{t({toast:null}),wr=null},3e3)},dismissToast:()=>{wr&&(clearTimeout(wr),wr=null),t({toast:null})}})),Zn="x4-plan-index",Sr="x4-current-plan-id",Am="x4-planner-plan";function Qt(t){return`x4-plan:${t}`}function yl(t){return{id:t.id,name:t.name,gameMode:t.gameMode,tags:t.tags,createdAt:t.createdAt,updatedAt:t.updatedAt}}const Ht=Hs((t,r)=>({planIndex:[],currentPlanId:null,initializePlanManager:()=>{var d;const o=localStorage.getItem(Am);if(o)try{const f=JSON.parse(o),h=((d=f.state)==null?void 0:d.plan)??f.plan??f;h.gameMode||(h.gameMode="swi"),h.tags||(h.tags=[]);const g=h.id||dn();h.id=g,localStorage.setItem(Qt(g),JSON.stringify(h));const m=[yl(h)];localStorage.setItem(Zn,JSON.stringify(m)),localStorage.setItem(Sr,g),localStorage.removeItem(Am),t({planIndex:m,currentPlanId:g}),ce.getState().loadPlan(h);return}catch(f){console.error("Failed to migrate legacy plan:",f)}const i=localStorage.getItem(Zn),l=i?JSON.parse(i):[],c=localStorage.getItem(Sr);if(t({planIndex:l,currentPlanId:c}),c){const f=localStorage.getItem(Qt(c));if(f)try{const h=JSON.parse(f);ce.getState().loadPlan(h)}catch(h){console.error("Failed to load current plan:",h)}}else l.length===0&&r().createPlan("New Plan",[],"swi")},createPlan:(o,i,l)=>{const c=new Date().toISOString(),d={id:dn(),name:o,version:1,gameMode:l,tags:i,createdAt:c,updatedAt:c,sectors:[],stations:[],connections:[]};localStorage.setItem(Qt(d.id),JSON.stringify(d));const f=yl(d),{planIndex:h}=r(),g=[...h,f];localStorage.setItem(Zn,JSON.stringify(g)),localStorage.setItem(Sr,d.id),t({planIndex:g,currentPlanId:d.id}),ce.getState().loadPlan(d)},saveCurrentPlan:o=>{const{currentPlanId:i,planIndex:l}=r();if(!i||o.id!==i)return;localStorage.setItem(Qt(o.id),JSON.stringify(o));const c=l.map(d=>d.id===o.id?{...d,name:o.name,tags:o.tags,updatedAt:o.updatedAt}:d);localStorage.setItem(Zn,JSON.stringify(c)),t({planIndex:c})},loadPlanById:o=>{const i=localStorage.getItem(Qt(o));if(i)try{const l=JSON.parse(i);localStorage.setItem(Sr,o),t({currentPlanId:o}),ce.getState().loadPlan(l)}catch(l){console.error("Failed to load plan:",l)}},deletePlan:o=>{const{planIndex:i,currentPlanId:l}=r();localStorage.removeItem(Qt(o));const c=i.filter(d=>d.id!==o);localStorage.setItem(Zn,JSON.stringify(c)),o===l?c.length>0?(t({planIndex:c}),r().loadPlanById(c[0].id)):(localStorage.removeItem(Sr),t({planIndex:c,currentPlanId:null}),r().createPlan("New Plan",[],"swi")):t({planIndex:c})},duplicatePlan:(o,i,l)=>{const c=localStorage.getItem(Qt(o));if(c)try{const d=JSON.parse(c),f=new Date().toISOString(),h={...d,id:dn(),name:i,tags:l,createdAt:f,updatedAt:f};localStorage.setItem(Qt(h.id),JSON.stringify(h));const g=yl(h),{planIndex:x}=r(),m=[...x,g];localStorage.setItem(Zn,JSON.stringify(m)),localStorage.setItem(Sr,h.id),t({planIndex:m,currentPlanId:h.id}),ce.getState().loadPlan(h)}catch(d){console.error("Failed to duplicate plan:",d)}},updatePlanMeta:(o,i)=>{const{planIndex:l}=r(),c=l.map(f=>f.id===o?{...f,...i,updatedAt:new Date().toISOString()}:f);localStorage.setItem(Zn,JSON.stringify(c)),t({planIndex:c});const d=localStorage.getItem(Qt(o));if(d)try{const f=JSON.parse(d);i.name!==void 0&&(f.name=i.name),i.tags!==void 0&&(f.tags=i.tags),f.updatedAt=new Date().toISOString(),localStorage.setItem(Qt(o),JSON.stringify(f));const{currentPlanId:h}=r();o===h&&(i.name!==void 0&&ce.getState().renamePlan(i.name),i.tags!==void 0&&ce.setState(g=>({plan:{...g.plan,tags:i.tags}})))}catch(f){console.error("Failed to update plan meta:",f)}},importPlan:o=>{localStorage.setItem(Qt(o.id),JSON.stringify(o));const i=yl(o),{planIndex:l}=r(),c=[...l,i];localStorage.setItem(Zn,JSON.stringify(c)),localStorage.setItem(Sr,o.id),t({planIndex:c,currentPlanId:o.id}),ce.getState().loadPlan(o)}})),Pg="x4-game-mode";function Uk(){try{const t=localStorage.getItem(Pg);if(t==="base"||t==="swi")return t}catch{}return"swi"}const $l=Hs(t=>({gameMode:Uk(),setGameMode:r=>{localStorage.setItem(Pg,r),t({gameMode:r})}}));let Ns=null,jc=null;async function Dg(t="swi"){if(Ns&&jc===t)return Ns;const o=await fetch(`/Station-Planner-For-X4-Foundations/${t==="base"?"gamedata-base.json":"gamedata-swi.json"}`);if(!o.ok)throw new Error(`Failed to load game data: ${o.statusText}`);return Ns=await o.json(),jc=t,Ns}function Yk(){Ns=null,jc=null}function jo({open:t,onClose:r,title:o,children:i,footer:l,size:c="md"}){if(A.useEffect(()=>{if(!t)return;const f=h=>{h.key==="Escape"&&r()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[t,r]),!t)return null;const d=c==="sm"?"max-w-sm":c==="lg"?"max-w-2xl":"max-w-lg";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:r}),u.jsxs("div",{className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 bg-card border border-border rounded-lg shadow-xl w-full ${d} flex flex-col max-h-[80vh]`,children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:o}),u.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i}),l&&u.jsx("div",{className:"px-4 py-3 border-t border-border flex items-center justify-end gap-2",children:l})]})]})}function Xk(){const t=$l(m=>m.gameMode),r=$l(m=>m.setGameMode),o=Oe(m=>m.setGameData),i=Oe(m=>m.setLoading),l=Oe(m=>m.setError),c=ge(m=>m.setPlansOpen),[d,f]=A.useState(!1),h=t==="swi"?"base":"swi",g=h==="swi"?"SWI Mod":"Base Game",x=async m=>{if(f(!1),m){const N=ce.getState().plan;Ht.getState().saveCurrentPlan(N)}r(h),Yk(),i(!0);try{const N=await Dg(h);o(N)}catch(N){l(N instanceof Error?N.message:"Failed to load game data");return}const{planIndex:y,createPlan:w,loadPlanById:S}=Ht.getState(),C=y.filter(N=>N.gameMode===h);if(C.length>0){const N=[...C].sort((b,O)=>new Date(O.updatedAt).getTime()-new Date(b.updatedAt).getTime());S(N[0].id),ce.getState().recompute(),c(!0)}else w("New Plan",[],h),ce.getState().recompute()};return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(!0),className:`px-3 py-1.5 text-sm rounded transition-colors font-medium ${t==="swi"?"bg-amber-600 text-white hover:bg-amber-700":"bg-blue-600 text-white hover:bg-blue-700"}`,title:`Switch to ${g}`,children:t==="swi"?"SWI":"Base"}),u.jsxs(jo,{open:d,onClose:()=>f(!1),title:`Switch to ${g}?`,size:"sm",footer:u.jsxs("div",{className:"flex items-center gap-2 w-full",children:[u.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("div",{className:"flex-1"}),u.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Don't Save"}),u.jsx("button",{onClick:()=>x(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Save & Switch"})]}),children:[u.jsxs("p",{className:"text-sm text-muted-foreground",children:["You are about to switch to ",u.jsx("span",{className:"font-medium text-foreground",children:g})," mode. Game data will be reloaded with different wares and modules."]}),u.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Would you like to save the current plan before switching?"})]})]})}function Gk({tags:t,onChange:r,placeholder:o="Add tag..."}){const[i,l]=A.useState(""),c=h=>{const g=h.trim().toLowerCase();g&&!t.includes(g)&&r([...t,g]),l("")},d=h=>{r(t.filter((g,x)=>x!==h))},f=h=>{h.key==="Enter"||h.key===","?(h.preventDefault(),c(i)):h.key==="Backspace"&&!i&&t.length>0&&d(t.length-1)};return u.jsxs("div",{children:[u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:t.map((h,g)=>u.jsxs("span",{className:"bg-secondary text-secondary-foreground rounded-full px-2 py-0.5 text-xs flex items-center gap-1",children:[h,u.jsx("button",{type:"button",onClick:()=>d(g),className:"hover:text-destructive transition-colors","aria-label":`Remove tag ${h}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},h))}),u.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),onKeyDown:f,onBlur:()=>{i.trim()&&c(i)},placeholder:o,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]})}function ac({open:t,onClose:r,onSubmit:o,title:i,submitLabel:l,initialName:c="",initialTags:d=[]}){const[f,h]=A.useState(c),[g,x]=A.useState(d),m=()=>{const y=f.trim();y&&(o(y,g),h(""),x([]),r())};return u.jsx(jo,{open:t,onClose:r,title:i,size:"sm",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:m,disabled:!f.trim(),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50",children:l})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Plan Name"}),u.jsx("input",{type:"text",value:f,onChange:y=>h(y.target.value),onKeyDown:y=>{y.key==="Enter"&&m()},placeholder:"My Station Plan",autoFocus:!0,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Tags"}),u.jsx(Gk,{tags:g,onChange:x})]})]})})}function Kk({open:t,onClose:r,gameMode:o}){const i=Ht(H=>H.planIndex),l=Ht(H=>H.currentPlanId),c=Ht(H=>H.loadPlanById),d=Ht(H=>H.deletePlan),f=Ht(H=>H.createPlan),h=Ht(H=>H.duplicatePlan),g=Ht(H=>H.updatePlanMeta),x=ce(H=>H.plan),[m,y]=A.useState(""),[w,S]=A.useState(null),[C,N]=A.useState(!1),[b,O]=A.useState(!1),[k,T]=A.useState(null),M=i.filter(H=>H.gameMode===o).filter(H=>{if(!m)return!0;const X=m.toLowerCase();return H.name.toLowerCase().includes(X)||H.tags.some($=>$.toLowerCase().includes(X))}).sort((H,X)=>new Date(X.updatedAt).getTime()-new Date(H.updatedAt).getTime()),L=H=>{c(H),r()},B=H=>{d(H),S(null)},Y=(H,X)=>{f(H,X,o),N(!1),r()},q=(H,X)=>{l&&h(l,H,X),O(!1),r()},F=(H,X)=>{k&&(g(k.id,{name:H,tags:X}),T(null))},z=H=>{try{return new Date(H).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return H}};return u.jsxs(u.Fragment,{children:[u.jsxs(jo,{open:t,onClose:r,title:"Plans",size:"lg",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>N(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"New Plan"}),u.jsx("button",{onClick:()=>O(!0),disabled:!l,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors disabled:opacity-50",children:"Save As"})]}),children:[u.jsx("div",{className:"mb-3",children:u.jsx("input",{type:"text",value:m,onChange:H=>y(H.target.value),placeholder:"Search plans by name or tag...",className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsxs("div",{className:"space-y-1",children:[M.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:m?"No plans match your search.":"No plans yet. Create one!"}),M.map(H=>u.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded cursor-pointer transition-colors ${H.id===l?"bg-primary/10 border border-primary/30":"hover:bg-muted border border-transparent"}`,onClick:()=>L(H.id),children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:H.name}),H.id===l&&u.jsx("span",{className:"text-xs text-primary font-medium",children:"(current)"})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[H.tags.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:H.tags.map(X=>u.jsx("span",{className:"bg-secondary text-secondary-foreground rounded-full px-1.5 py-0 text-[10px]",children:X},X))}),u.jsx("span",{className:"text-xs text-muted-foreground",children:z(H.updatedAt)})]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[u.jsx("button",{onClick:()=>T({id:H.id,name:H.name,tags:H.tags}),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",title:"Edit name & tags",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),w===H.id?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>B(H.id),className:"px-2 py-0.5 text-xs rounded bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors",children:"Delete"}),u.jsx("button",{onClick:()=>S(null),className:"px-2 py-0.5 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"})]}):u.jsx("button",{onClick:()=>S(H.id),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-destructive",title:"Delete plan",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},H.id))]})]}),u.jsx(ac,{open:C,onClose:()=>N(!1),onSubmit:Y,title:"New Plan",submitLabel:"Create"}),u.jsx(ac,{open:b,onClose:()=>O(!1),onSubmit:q,title:"Save As",submitLabel:"Save",initialName:x?`${x.name} (copy)`:"",initialTags:(x==null?void 0:x.tags)??[]}),k&&u.jsx(ac,{open:!0,onClose:()=>T(null),onSubmit:F,title:"Edit Plan",submitLabel:"Save",initialName:k.name,initialTags:k.tags})]})}function Qk(t){const r=JSON.stringify(t);return btoa(r)}function qk({open:t,onClose:r,plan:o}){const i=ge(f=>f.showToast),l=A.useMemo(()=>Qk(o),[o]),c=A.useMemo(()=>{const f=l.length;if(f<1024)return`${f} B`;const h=f/1024;return h<1024?`${h.toFixed(1)} KB`:`${(h/1024).toFixed(1)} MB`},[l]),d=async()=>{try{await navigator.clipboard.writeText(l),i("Copied to clipboard!","success"),r()}catch{i("Failed to copy to clipboard","error")}};return u.jsx(jo,{open:t,onClose:r,title:"Export Plan",size:"md",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Close"}),u.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Copy to Clipboard"})]}),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:"Plan Name"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:o.name})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("div",{className:"text-sm font-medium text-foreground",children:"Exported Data"}),u.jsx("div",{className:"text-xs text-muted-foreground",children:c})]}),u.jsx("textarea",{readOnly:!0,value:l,className:"w-full h-48 px-3 py-2 text-xs font-mono rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring resize-none",onClick:f=>f.currentTarget.select()}),u.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Click to select all, then copy manually or use the button below"})]})]})})}function Zk(t){try{const r=atob(t);let o;try{o=JSON.parse(r)}catch{return{success:!1,error:"Invalid JSON format"}}if(typeof o!="object"||o===null)return{success:!1,error:"Invalid plan format: not an object"};const i=o;if(typeof i.name!="string")return{success:!1,error:"Missing or invalid field: name"};if(typeof i.version!="number")return{success:!1,error:"Missing or invalid field: version"};if(!Array.isArray(i.stations))return{success:!1,error:"Missing or invalid field: stations"};if(!Array.isArray(i.sectors))return{success:!1,error:"Missing or invalid field: sectors"};if(!Array.isArray(i.connections))return{success:!1,error:"Missing or invalid field: connections"};const l=new Date().toISOString();return{success:!0,plan:{...i,id:dn(),createdAt:l,updatedAt:l}}}catch(r){return r instanceof Error?{success:!1,error:`Import failed: ${r.message}`}:{success:!1,error:"Invalid base64 encoding"}}}function Jk({open:t,onClose:r,onImport:o}){const[i,l]=A.useState(""),[c,d]=A.useState(null),[f,h]=A.useState(null),g=()=>{if(d(null),h(null),!i.trim()){d("Please paste the exported plan data");return}const y=Zk(i.trim());y.success?h(y.plan):d(y.error)},x=()=>{f&&(o(f),l(""),d(null),h(null),r())},m=()=>{l(""),d(null),h(null),r()};return u.jsx(jo,{open:t,onClose:m,title:"Import Plan",size:"md",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:m,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),f?u.jsx("button",{onClick:x,className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Import"}):u.jsx("button",{onClick:g,className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Validate"})]}),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:"Paste Exported Data"}),u.jsx("textarea",{value:i,onChange:y=>{l(y.target.value),d(null),h(null)},placeholder:"Paste the base64-encoded plan data here...",className:"w-full h-48 px-3 py-2 text-xs font-mono rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring resize-none"})]}),c&&u.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/30 rounded px-3 py-2",children:c}),f&&u.jsxs("div",{className:"text-sm bg-primary/10 border border-primary/30 rounded px-3 py-2 space-y-1",children:[u.jsx("div",{className:"font-medium text-foreground",children:"Plan validated successfully!"}),u.jsxs("div",{className:"text-muted-foreground",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Name:"})," ",f.name]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Stations:"})," ",f.stations.length]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Sectors:"})," ",f.sectors.length]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Connections:"})," ",f.connections.length]})]})]})]})})}function ej(){const t=ce(M=>M.plan),r=ce(M=>M.renamePlan),o=ge(M=>M.toggleReport),i=ge(M=>M.reportOpen),l=ge(M=>M.plansOpen),c=ge(M=>M.setPlansOpen),d=ge(M=>M.showToast),f=ge(M=>M.theme),h=ge(M=>M.setTheme),g=ge(M=>M.language),x=ge(M=>M.setLanguage),m=Oe(M=>M.gameData),y=$l(M=>M.gameMode),w=Ht(M=>M.importPlan),[S,C]=A.useState(!1),[N,b]=A.useState(!1),O=()=>{h(f==="light"?"dark":f==="dark"?"system":"light")},k=M=>{w(M),d(`Imported "${M.name}" successfully!`,"success")},T=y==="swi"?"X4 SWI Station Planner":"X4 Station Planner";return u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Xk,{}),u.jsx("h1",{className:"text-lg font-semibold text-foreground",children:T}),u.jsx("span",{className:"text-muted-foreground",children:"|"}),u.jsx("input",{type:"text",value:t.name,onChange:M=>r(M.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[(m==null?void 0:m.languages)&&u.jsx("select",{value:g,onChange:M=>x(M.target.value),className:"px-2 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors border-none cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring",title:"Language",children:Object.entries(m.languages).map(([M,L])=>u.jsx("option",{value:M,children:L},M))}),u.jsxs("button",{onClick:O,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${f}`,children:[f==="light"&&"",f==="dark"&&"",f==="system"&&"",u.jsx("span",{className:"text-xs",children:f.charAt(0).toUpperCase()+f.slice(1)})]}),u.jsx("button",{onClick:()=>C(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Export"}),u.jsx("button",{onClick:()=>b(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Import"}),u.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Plans"}),u.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"})]})]}),u.jsx(Kk,{open:l,onClose:()=>c(!1),gameMode:y}),u.jsx(qk,{open:S,onClose:()=>C(!1),plan:t}),u.jsx(Jk,{open:N,onClose:()=>b(!1),onImport:k})]})}function ht(){const t=ge(o=>o.language);return{language:t,t:(o,i)=>o?typeof o=="string"?o:o[t]??o.en??Object.values(o)[0]??i??"":i??""}}function tj({station:t}){const r=ce(k=>k.updateStation),o=ce(k=>k.removeStation),i=ce(k=>k.plan),l=ce(k=>k.computed),c=Oe(k=>k.gameData),{t:d}=ht(),f=t.sectorId?i.sectors.find(k=>k.id===t.sectorId):null,h=t.sunlightOverride??(f==null?void 0:f.sunlight)??100,g=Dr(l,t.id),x=k=>{r(t.id,{name:k.target.value})},m=k=>{const T=k.target.value;if(T==="")r(t.id,{sunlightOverride:null});else{const M=parseInt(T,10);!isNaN(M)&&M>=0&&M<=500&&r(t.id,{sunlightOverride:M})}},y=()=>{r(t.id,{sunlightOverride:null})},w=k=>{r(t.id,{fillHabitats:k.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},C=k=>{var T;return d((T=c==null?void 0:c.wares[k])==null?void 0:T.name,k)},N=k=>k>=1e4?`${(k/1e3).toFixed(1)}k`:k>=1e3?`${(k/1e3).toFixed(2)}k`:k.toFixed(0),b=g&&g.totalWorkforceRequired>0,O=g&&g.totalWorkforceCapacity>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),u.jsx("input",{type:"text",value:t.name,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:f?f.name:"Not assigned"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:m,placeholder:`${(f==null?void 0:f.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&u.jsx("button",{onClick:y,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",h,"%",t.sunlightOverride===null&&f&&" (from sector)",t.sunlightOverride===null&&!f&&" (default)"]})]}),(b||O)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),g&&u.jsxs("div",{className:"text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Required:"}),u.jsx("span",{children:g.totalWorkforceRequired.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),u.jsx("span",{children:g.totalWorkforceCapacity.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population:"}),u.jsx("span",{children:g.actualPopulation.toLocaleString()})]})]}),O&&u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[u.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:w,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?u.jsx("p",{children:"No modules added yet."}):u.jsxs("p",{children:[t.modules.length," module(s)"]})}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),g&&(g.netOutputs.length>0||g.netInputs.length>0)&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),g.netOutputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),g.netOutputs.slice(0,5).map(k=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-green-500 truncate",children:C(k.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",N(k.amount)]})]},k.wareId)),g.netOutputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",g.netOutputs.length-5," more..."]})]}),g.netInputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),g.netInputs.slice(0,5).map(k=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-blue-400 truncate",children:C(k.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",N(k.amount)]})]},k.wareId)),g.netInputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",g.netInputs.length-5," more..."]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:k=>r(t.id,{locked:k.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function nj({sector:t}){const r=ce(M=>M.updateSector),o=ce(M=>M.removeSector),i=ce(M=>M.plan),l=Oe(M=>M.gameData),[c,d]=A.useState(t.name),[f,h]=A.useState(!1),[g,x]=A.useState(-1),m=A.useRef(null),y=A.useRef(null);A.useEffect(()=>{d(t.name)},[t.id,t.name]);const w=A.useMemo(()=>l!=null&&l.sectors?Object.values(l.sectors).sort((M,L)=>M.name.localeCompare(L.name)):[],[l]),S=A.useMemo(()=>{if(!c.trim())return w.slice(0,15);const M=c.toLowerCase();return w.filter(L=>L.name.toLowerCase().includes(M)).slice(0,15)},[w,c]);A.useEffect(()=>{const M=L=>{y.current&&!y.current.contains(L.target)&&m.current&&!m.current.contains(L.target)&&h(!1)};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const C=i.stations.filter(M=>M.sectorId===t.id),N=(M,L)=>{d(M),h(!1),x(-1);const B={name:M};L!==void 0&&(B.sunlight=L),r(t.id,B)},b=M=>{const L=M.target.value;d(L),h(!0),x(-1),r(t.id,{name:L})},O=M=>{var L,B;if(M.key==="ArrowDown")M.preventDefault(),h(!0),x(Y=>Y<S.length-1?Y+1:Y);else if(M.key==="ArrowUp")M.preventDefault(),x(Y=>Y>0?Y-1:-1);else if(M.key==="Enter"){if(M.preventDefault(),g>=0&&g<S.length){const Y=S[g];N(Y.name,Y.sunlight)}else{const Y=w.find(q=>q.name.toLowerCase()===c.toLowerCase());Y?N(Y.name,Y.sunlight):h(!1)}(L=m.current)==null||L.blur()}else M.key==="Escape"&&(h(!1),x(-1),(B=m.current)==null||B.blur())};A.useEffect(()=>{var M;g>=0&&y.current&&((M=y.current.querySelectorAll("[data-sector-item]")[g])==null||M.scrollIntoView({block:"nearest"}))},[g]);const k=M=>{const L=parseInt(M.target.value,10);!isNaN(L)&&L>=0&&L<=500&&r(t.id,{sunlight:L})},T=()=>{const M=C.length,L=M>0?`Delete sector "${t.name}"? ${M} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(L)&&o(t.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5 relative",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),u.jsx("input",{ref:m,type:"text",value:c,onChange:b,onFocus:()=>h(!0),onKeyDown:O,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",autoComplete:"off"}),f&&S.length>0&&u.jsx("div",{ref:y,className:"absolute z-50 mt-1 w-full max-h-60 overflow-y-auto rounded-md border border-border bg-background shadow-md",children:S.map((M,L)=>u.jsxs("button",{"data-sector-item":!0,onMouseDown:B=>{B.preventDefault(),N(M.name,M.sunlight)},onMouseEnter:()=>x(L),className:`w-full flex items-center justify-between px-3 py-1.5 text-sm text-left transition-colors ${L===g?"bg-accent text-accent-foreground":"hover:bg-accent/50"}`,children:[u.jsx("span",{className:"truncate text-foreground",children:M.name}),u.jsxs("span",{className:"flex items-center gap-2 ml-2 shrink-0 text-xs text-muted-foreground",children:[M.owner&&u.jsx("span",{className:"truncate max-w-[80px]",children:M.owner}),u.jsxs("span",{children:[M.sunlight,"%"]})]})]},M.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:k,className:"flex-1"}),u.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:k,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",C.length,")"]}),C.length===0?u.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):u.jsx("ul",{className:"text-sm space-y-1",children:C.map(M=>u.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[u.jsx("span",{className:"text-foreground",children:M.name}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:[M.modules.length," modules"]})]},M.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:M=>r(t.id,{locked:M.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:T,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const $m={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function rj(){const t=Oe(w=>w.gameData),r=ce(w=>w.addModule),o=ge(w=>w.activeStationId),i=ce(w=>w.plan.stations),{t:l}=ht(),[c,d]=A.useState("production"),[f,h]=A.useState(""),g=A.useMemo(()=>i.find(w=>w.id===o),[i,o]),x=A.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const w=f.toLowerCase(),S=C=>Object.values(C).filter(N=>l(N.name).toLowerCase().includes(w));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,f,l]),m=w=>{if(!o||!g)return;const S=g.modules.length,C=S%3,N=Math.floor(S/3),b={x:C*220+50,y:N*150+50};r(o,w,b)},y=w=>{d(S=>S===w?null:w)};return t?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Search modules...",value:f,onChange:w=>h(w.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys($m).map(w=>{const{label:S,icon:C}=$m[w],N=x[w],b=c===w;return u.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[u.jsxs("button",{onClick:()=>y(w),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[u.jsx("span",{children:C}),S,u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.length,")"]})]}),u.jsx("span",{className:"text-muted-foreground",children:b?"":"+"})]}),b&&u.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.length===0?u.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):N.map(O=>u.jsxs("button",{onClick:()=>m(O.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[u.jsx("span",{className:"text-foreground truncate",children:l(O.name)}),u.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},O.id))})]},w)}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):u.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function oj({stationId:t,module:r}){const o=Oe(N=>N.gameData),i=Oe(N=>N.getModule),l=Oe(N=>N.getModuleType),c=ce(N=>N.updateModule),d=ce(N=>N.removeModule),f=ge(N=>N.clearSelection),{t:h}=ht(),g=i(r.blueprintId),x=l(r.blueprintId),m=A.useMemo(()=>{if(!o||!x)return[];const N=o.modules[x];return Object.values(N).sort((b,O)=>h(b.name).localeCompare(h(O.name)))},[o,x,h]),y=N=>{c(t,r.id,{blueprintId:N.target.value})},w=N=>{const b=Math.max(1,r.count+N);c(t,r.id,{count:b})},S=N=>{const b=parseInt(N.target.value,10);!isNaN(b)&&b>=1&&c(t,r.id,{count:b})},C=()=>{confirm(`Delete this ${h(g==null?void 0:g.name,"module")}?`)&&(d(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-lg",children:x==="production"?"":x==="habitat"?"":""}),u.jsxs("span",{className:"text-muted-foreground capitalize",children:[x," Module"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),u.jsx("select",{value:r.blueprintId,onChange:y,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:m.map(N=>u.jsx("option",{value:N.id,children:h(N.name)},N.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>w(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),u.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("button",{onClick:()=>w(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),g&&u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),u.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[x==="production"&&"producedWareId"in g&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Produces: ",g.producedWareId]}),u.jsxs("p",{children:["Workforce: ",g.workforceMax*r.count]})]}),x==="habitat"&&"workforceCapacity"in g&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Race: ",g.race]}),u.jsxs("p",{children:["Capacity: ",g.workforceCapacity*r.count," workers"]})]}),x==="storage"&&"cargoMax"in g&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Type: ",g.cargoType]}),u.jsxs("p",{children:["Capacity: ",g.cargoMax*r.count]})]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r.locked??!1,onChange:N=>c(t,r.id,{locked:N.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:C,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function sj({connection:t}){var F;const r=ce(z=>z.updateConnection),o=ce(z=>z.removeConnection),i=ce(z=>z.plan),l=ce(z=>z.computed),c=Oe(z=>z.gameData),{t:d}=ht(),f=i.stations.find(z=>z.id===t.sourceStationId),h=i.stations.find(z=>z.id===t.targetStationId),g=A.useMemo(()=>Dr(l,t.sourceStationId),[l,t.sourceStationId]),x=A.useMemo(()=>Dr(l,t.targetStationId),[l,t.targetStationId]),m=t.wareId?d((F=c==null?void 0:c.wares[t.wareId])==null?void 0:F.name,t.wareId):"Unknown",y=g==null?void 0:g.netOutputs.find(z=>z.wareId===t.wareId),w=(y==null?void 0:y.amount)??0,S=x==null?void 0:x.netInputs.find(z=>z.wareId===t.wareId),C=(S==null?void 0:S.amount)??0,N=A.useMemo(()=>_g(l,t.id),[l,t.id]),b=(N==null?void 0:N.effectiveAmount)??t.amount,O=t.mode??"auto",k=z=>z>=1e4?`${(z/1e3).toFixed(1)}k`:z>=1e3?`${(z/1e3).toFixed(2)}k`:z.toFixed(0),T=z=>{r(t.id,{mode:z,amount:z==="custom"?b:t.amount})},M=z=>{const H=z.target.value;if(H==="")r(t.id,{amount:0});else{const X=parseFloat(H);!isNaN(X)&&X>=0&&r(t.id,{amount:X})}},L=()=>{r(t.id,{mode:"custom",amount:w})},B=()=>{const z=Math.min(w,C);r(t.id,{mode:"custom",amount:z})},Y=()=>{confirm("Delete this connection?")&&o(t.id)},q=l.deficits.find(z=>z.stationId===t.targetStationId&&z.wareId===t.wareId);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(f==null?void 0:f.name)??"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(h==null?void 0:h.name)??"Unknown"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:m}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:O,onChange:z=>T(z.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[O==="auto"&&"Transfers min(source available, target need)",O==="max"&&"Takes all available from source up to target need",O==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[O==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),O==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:M,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:k(b)}),O==="custom"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:L,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",k(w),")"]}),C>0&&u.jsxs("button",{onClick:B,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",k(Math.min(w,C)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source available:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[k(w),"/hr"]})]}),C>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[k(C),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${N!=null&&N.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[k(b),"/hr"]})]}),O==="custom"&&t.amount!==b&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[k(t.amount),"/hr"]})]}),(N==null?void 0:N.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(N==null?void 0:N.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),q&&q.deficit>0&&u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",k(q.deficit),"/hr still needed"]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",k(q.supplied),"/hr but needs"," ",k(q.required),"/hr"]})]}),t.wareId&&!q&&u.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:u.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:Y,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function ij({stationId:t,connection:r}){var D;const o=ce(j=>j.updateModuleConnection),i=ce(j=>j.removeModuleConnection),l=ce(j=>j.plan.stations),c=ce(j=>j.computed),d=Oe(j=>j.gameData),f=ge(j=>j.clearSelection),{t:h}=ht(),g=l.find(j=>j.id===t),x=g==null?void 0:g.modules.find(j=>j.id===r.sourceModuleId),m=g==null?void 0:g.modules.find(j=>j.id===r.targetModuleId),y=r.sourceModuleId===Nt,w=r.targetModuleId===Vt,S=j=>{var E,P,Z;if(!j||!d)return"Unknown";const R=((E=d.modules.production[j])==null?void 0:E.name)??((P=d.modules.habitat[j])==null?void 0:P.name)??((Z=d.modules.storage[j])==null?void 0:Z.name);return h(R,j)},C=y?"Station Input":S(x==null?void 0:x.blueprintId),N=w?"Station Output":S(m==null?void 0:m.blueprintId),b=A.useMemo(()=>y?null:qt(c,t,r.sourceModuleId),[c,t,r.sourceModuleId,y]),O=A.useMemo(()=>w?null:qt(c,t,r.targetModuleId),[c,t,r.targetModuleId,w]),k=A.useMemo(()=>{const j=Dr(c,t);return j==null?void 0:j.moduleConnections.find(R=>R.connectionId===r.id)},[c,t,r.id]),T=(k==null?void 0:k.effectiveAmount)??r.amount,M=r.mode??"auto",L=h((D=d==null?void 0:d.wares[r.wareId])==null?void 0:D.name,r.wareId),B=b==null?void 0:b.grossOutputs.find(j=>j.wareId===r.wareId),Y=(B==null?void 0:B.amount)??0,q=O==null?void 0:O.grossInputs.find(j=>j.wareId===r.wareId),F=(q==null?void 0:q.amount)??0,z=j=>j>=1e4?`${(j/1e3).toFixed(1)}k`:j>=1e3?`${(j/1e3).toFixed(2)}k`:j.toFixed(0),H=j=>{o(t,r.id,{mode:j,amount:j==="custom"?T:r.amount})},X=j=>{const R=j.target.value;if(R==="")o(t,r.id,{amount:0});else{const E=parseFloat(R);if(!isNaN(E)&&E>=0){const P=!y&&Y>0?E/Y:r.ratio;o(t,r.id,{amount:E,ratio:P})}}},$=()=>{o(t,r.id,{locked:!r.locked})},Q=()=>{o(t,r.id,{mode:"custom",amount:Y,ratio:1})},W=()=>{const j=Math.min(Y,F),R=Y>0?j/Y:0;o(t,r.id,{mode:"custom",amount:j,ratio:R})},_=()=>{confirm("Delete this connection?")&&(i(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:C})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:N})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:L})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:M,onChange:j=>H(j.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[M==="auto"&&"Transfers min(source available, target need)",M==="max"&&"Takes all available from source up to target need",M==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[M==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),M==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:X,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:z(T)}),M==="custom"&&!y&&Y>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Q,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",z(Y),")"]}),!w&&F>0&&u.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",z(Math.min(Y,F)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!y&&Y>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source produces:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[z(Y),"/hr"]})]}),!w&&F>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[z(F),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${k!=null&&k.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[z(T),"/hr"]})]}),M==="custom"&&r.amount!==T&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[z(r.amount),"/hr"]})]}),(k==null?void 0:k.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(k==null?void 0:k.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!y&&r.ratio!==void 0&&M==="custom"&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Ratio:"}),u.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),u.jsx("button",{onClick:$,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:_,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function lj(){const t=ge(N=>N.sidebarOpen),r=ge(N=>N.toggleSidebar),o=ge(N=>N.setSidebarOpen),i=ge(N=>N.selectedNodeId),l=ge(N=>N.selectedEdgeId),c=ge(N=>N.viewMode),d=ge(N=>N.activeStationId),f=ce(N=>N.plan);A.useEffect(()=>{const N=()=>{window.innerWidth<768&&o(!1)};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[o]);const h=c==="network"?f.stations.find(N=>N.id===i):null,g=c==="network"?f.sectors.find(N=>N.id===i):null,x=f.connections.find(N=>N.id===l),m=f.stations.find(N=>N.id===d),y=c==="station"&&m?m.modules.find(N=>N.id===i):null,w=c==="station"&&m&&l?(m.moduleConnections??[]).find(N=>N.id===l):null;let S="Network";c==="station"?w?S="Connection":y?S="Module":S="Add Modules":h?S="Station":g?S="Sector":x&&(S="Connection");const C=()=>c==="station"?w&&d?u.jsx(ij,{stationId:d,connection:w}):y&&d?u.jsx(oj,{stationId:d,module:y}):u.jsx(rj,{}):h?u.jsx(tj,{station:h}):g?u.jsx(nj,{sector:g}):x?u.jsx(sj,{connection:x}):u.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[u.jsx("p",{children:"Select a station or sector to view details."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),u.jsxs("ul",{className:"text-xs space-y-1",children:[u.jsx("li",{children:"Right-click on the canvas to add stations"}),u.jsx("li",{children:"Drag from one station handle to another to connect"}),u.jsx("li",{children:"Press Delete to remove selected items"}),u.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return t?u.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col transition-all duration-200",children:[u.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[u.jsx("h2",{className:"font-semibold text-foreground",children:S}),u.jsx("button",{onClick:r,className:"p-1 hover:bg-accent rounded transition-colors",title:"Collapse sidebar","aria-label":"Collapse sidebar",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:u.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),u.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:C()}),u.jsx("div",{className:"p-4 border-t border-border",children:u.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:c==="station"&&m?u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Modules: ",m.modules.length]}),u.jsxs("p",{children:["Station: ",m.name]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Stations: ",f.stations.length]}),u.jsxs("p",{children:["Sectors: ",f.sectors.length]}),u.jsxs("p",{children:["Connections: ",f.connections.length]})]})})})]}):u.jsx("aside",{className:"w-10 border-l border-border bg-card flex flex-col transition-all duration-200",children:u.jsx("div",{className:"p-2 border-b border-border flex items-center justify-center",children:u.jsx("button",{onClick:r,className:"p-1 hover:bg-accent rounded transition-colors",title:"Expand sidebar","aria-label":"Expand sidebar",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:u.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(180 8 8)"})})})})})}function aj(){const t=ge(d=>d.viewMode),r=ge(d=>d.activeStationId),o=ge(d=>d.exitStationView),i=ce(d=>d.plan),l=i.stations.find(d=>d.id===r),c=l!=null&&l.sectorId?i.sectors.find(d=>d.id===l.sectorId):null;return t==="network"?null:u.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[u.jsx("button",{onClick:o,className:"mr-2 p-1 rounded hover:bg-muted-foreground/10 transition-colors","aria-label":"Back to sector view",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground hover:text-foreground",children:u.jsx("polyline",{points:"10 12 6 8 10 4"})})}),u.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),c&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-muted-foreground",children:c.name})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function uj(){const t=ce(x=>x.computed),r=Oe(x=>x.gameData),{t:o}=ht(),i=x=>{var m;return o((m=r==null?void 0:r.wares[x])==null?void 0:m.name,x)},l=x=>Math.abs(x)>=1e4?`${(x/1e3).toFixed(1)}k`:Math.abs(x)>=1e3?`${(x/1e3).toFixed(2)}k`:x.toFixed(0),c=A.useMemo(()=>{const x=new Map;for(const y of t.totalOutputs)x.set(y.wareId,(x.get(y.wareId)??0)+y.amount);for(const y of t.totalInputs)x.set(y.wareId,(x.get(y.wareId)??0)-y.amount);const m=[];for(const[y,w]of x)Math.abs(w)>.01&&m.push({wareId:y,amount:w});return m.sort((y,w)=>w.amount-y.amount)},[t.totalOutputs,t.totalInputs]),d=c.filter(x=>x.amount>0),f=c.filter(x=>x.amount<0),h=A.useMemo(()=>[...t.totalOutputs].sort((x,m)=>m.amount-x.amount),[t.totalOutputs]),g=A.useMemo(()=>[...t.totalInputs].sort((x,m)=>m.amount-x.amount),[t.totalInputs]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),u.jsx("div",{className:"space-y-1",children:d.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-green-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),u.jsx("div",{className:"space-y-1",children:f.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:[l(x.amount),"/hr"]})]},x.wareId))})]}),d.length===0&&f.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",h.length," wares)"]})]}),h.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",g.length," wares)"]})]}),g.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-blue-400",children:["-",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((x,m)=>u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:["-",l(x.deficit),"/hr"]})]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",l(x.required),", getting ",l(x.supplied)]})]},`${x.stationId}-${x.wareId}-${m}`))})]})]})}function cj(){const t=ce(g=>g.plan.stations),r=ce(g=>g.plan.sectors),o=ce(g=>g.computed),i=Oe(g=>g.gameData),{t:l}=ht(),c=g=>{var x;return l((x=i==null?void 0:i.wares[g])==null?void 0:x.name,g)},d=g=>Math.abs(g)>=1e4?`${(g/1e3).toFixed(1)}k`:Math.abs(g)>=1e3?`${(g/1e3).toFixed(2)}k`:g.toFixed(0),f=g=>{var x;return g?((x=r.find(m=>m.id===g))==null?void 0:x.name)??null:null},h=A.useMemo(()=>[...t].sort((g,x)=>{const m=bl(o,g.id),y=bl(o,x.id);return m!==y?y-m:g.name.localeCompare(x.name)}),[t,o]);return t.length===0?u.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):u.jsx("div",{className:"space-y-4",children:h.map(g=>{const x=Dr(o,g.id),m=bl(o,g.id),y=f(g.sectorId),w=o.deficits.filter(C=>C.stationId===g.id),S=x&&x.totalWorkforceRequired>0?Math.min(x.actualPopulation/x.totalWorkforceRequired,1):0;return u.jsxs("div",{className:`p-3 rounded-lg border ${m>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center text-[10px] ${g.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/30"}`,children:g.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h4",{className:`font-medium ${g.completed?"text-muted-foreground line-through":"text-foreground"}`,children:g.name}),m>0&&u.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[m," deficit",m>1?"s":""]})]}),y&&u.jsx("span",{className:"text-xs text-muted-foreground",children:y})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-yellow-500",children:[" ",(x==null?void 0:x.effectiveSunlight)??100,"%"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:g.modules.length})]}),x&&x.totalWorkforceRequired>0&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[x.actualPopulation,"/",x.totalWorkforceRequired]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:x.totalWorkforceCapacity})]})]})]}),x&&u.jsxs("div",{className:"space-y-2",children:[x.netOutputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netOutputs.map(C=>u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:"text-green-400",children:c(C.wareId)}),u.jsxs("span",{className:"font-mono text-green-400/70",children:["+",d(C.amount)]})]},C.wareId))})]}),x.netInputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netInputs.map(C=>{const N=w.some(b=>b.wareId===C.wareId);return u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:N?"text-red-400":"text-blue-400",children:c(C.wareId)}),u.jsxs("span",{className:`font-mono ${N?"text-red-400/70":"text-blue-400/70"}`,children:["-",d(C.amount)]})]},C.wareId)})})]}),w.length>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[u.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),u.jsx("div",{className:"space-y-1",children:w.map(C=>u.jsxs("div",{className:"text-xs flex items-center justify-between",children:[u.jsx("span",{className:"text-red-400",children:c(C.wareId)}),u.jsxs("span",{className:"text-muted-foreground",children:[d(C.supplied),"/",d(C.required),u.jsxs("span",{className:"text-red-400 ml-1",children:["(-",d(C.deficit),")"]})]})]},C.wareId))})]})]}),g.modules.length===0&&u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},g.id)})})}function dj(){const t=ge(l=>l.reportOpen),r=ge(l=>l.setReportOpen),[o,i]=A.useState("network");return t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),u.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),u.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsxs("div",{className:"flex border-b border-border",children:[u.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),u.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?u.jsx(uj,{}):u.jsx(cj,{})}),u.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function $e(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Uc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const fj={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},pj={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},mj={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},hj={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function ql({wareId:t,type:r,amount:o,status:i,preset:l,handleId:c,isDeficit:d=!1,drag:f,handleTooltip:h,amountTooltip:g,onDoubleClick:x}){const m=Oe(L=>L.gameData),{t:y}=ht(),w=r==="input",S=w?l.inputColors:l.outputColors,N=(L=>{var B;return y((B=m==null?void 0:m.wares[L])==null?void 0:B.name,L)})(t),b=()=>{const L=w?"handle-left":"handle-right",B="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${L} ${B} ${l.handle.colorClass}`;const Y=i==="satisfied"?w?"handle-input-satisfied":"handle-output-satisfied":w?"handle-input":"handle-output";return`${l.handle.baseClass} ${L} ${B} ${Y}`},O=()=>i==="satisfied"?S.satisfied:d&&S.deficit?S.deficit:S.default,k=()=>{const L=o.fulfilled??0,B=L>.01;if(w)if(i==="satisfied"){const Y=L>.01?L:o.primary;return u.jsxs("span",{className:"text-green-600 font-bold",title:g,children:["",$e(Y)]})}else if(B){const Y=i==="partial"?o.primary-L:o.primary;return u.jsxs("span",{className:"text-red-400 font-bold",title:g,children:["-",$e(Y)]})}else return u.jsxs("span",{className:"text-red-600/60",title:g,children:["",$e(o.primary)]});else return B?u.jsx("span",{className:"text-gray-400",title:g,children:$e(o.primary)}):u.jsx("span",{className:"text-gray-500/60",title:g,children:$e(o.primary)})},T=()=>!l.hasDrag||!f?null:u.jsx("div",{draggable:!0,onDragStart:f.onDragStart,onDragEnd:f.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:u.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),M=()=>u.jsx(Pr,{type:w?"target":"source",position:w?Ne.Left:Ne.Right,id:c,className:b(),title:h??N});return u.jsxs("div",{onDoubleClick:x?L=>{L.stopPropagation(),x()}:void 0,onDragOver:f==null?void 0:f.onDragOver,onDragLeave:f==null?void 0:f.onDragLeave,onDrop:f==null?void 0:f.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${f!=null&&f.isDragging?"opacity-50":""}
        ${f!=null&&f.isDragOver?"bg-primary/20 rounded":""}
      `,children:[w&&l.handle.inline&&M(),!w&&l.hasDrag&&T(),w&&!l.handle.inline&&M(),u.jsxs("div",{className:`flex-1 flex items-center justify-between ${w?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[w&&u.jsx("span",{className:"font-mono ml-1",children:k()}),u.jsx("span",{className:`truncate ${l.nameMaxWidth} ${O()}`,children:N}),!w&&u.jsx("span",{className:"font-mono mr-2",children:k()})]}),w&&l.hasDrag&&T(),!w&&l.handle.inline&&M(),!w&&!l.handle.inline&&M()]})}const gj=A.memo(function({data:r,selected:o}){const{station:i}=r,l=ce(_=>_.plan.sectors),c=ce(_=>_.computed),d=ce(_=>_.updateStation),f=ge(_=>_.drillIntoStation),[h,g]=A.useState(null),[x,m]=A.useState(null),y=i.sectorId?l.find(_=>_.id===i.sectorId):null,w=A.useMemo(()=>Dr(c,i.id),[c,i.id]),S=A.useMemo(()=>bl(c,i.id),[c,i.id]),C=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(y==null?void 0:y.sunlight)??100,N=A.useCallback(()=>{f(i.id)},[f,i.id]),b=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,O=w&&w.totalWorkforceRequired>0,k=A.useMemo(()=>c.deficits.filter(_=>_.stationId===i.id),[c.deficits,i.id]),T=_=>k.some(D=>D.wareId===_),M=A.useCallback((_,D)=>{if(!D||D.length===0)return _;const j=new Map(_.map(P=>[P.wareId,P])),R=[],E=new Set;for(const P of D){const Z=j.get(P);Z&&(R.push(Z),E.add(P))}for(const P of _)E.has(P.wareId)||R.push(P);return R},[]),L=A.useMemo(()=>M((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,M]),B=A.useMemo(()=>M((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,M]),Y=A.useMemo(()=>{const _=new Map;for(const D of(w==null?void 0:w.externallySupplied)??[])_.set(D.wareId,D.amount);return _},[w==null?void 0:w.externallySupplied]),q=A.useMemo(()=>{const _=new Map;for(const D of(w==null?void 0:w.externallyConsumed)??[])_.set(D.wareId,D.amount);return _},[w==null?void 0:w.externallyConsumed]),F=A.useCallback((_,D,j)=>{_.stopPropagation(),g(`${j}-${D}`),_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("text/plain",`${j}-${D}`)},[]),z=A.useCallback((_,D,j)=>{_.preventDefault(),_.stopPropagation();const R=`${j}-${D}`;h&&h!==R&&h.startsWith(j)&&(m(R),_.dataTransfer.dropEffect="move")},[h]),H=A.useCallback(()=>{m(null)},[]),X=A.useCallback((_,D,j)=>{if(_.preventDefault(),_.stopPropagation(),!h||!h.startsWith(j)){g(null),m(null);return}const R=h.replace(`${j}-`,"");if(R===D){g(null),m(null);return}const P=(j==="output"?L:B).map(ie=>ie.wareId),Z=P.indexOf(R),J=P.indexOf(D);if(Z===-1||J===-1){g(null),m(null);return}const oe=[...P];oe.splice(Z,1),oe.splice(J,0,R),j==="output"?d(i.id,{outputOrder:oe}):d(i.id,{inputOrder:oe}),g(null),m(null)},[h,L,B,d,i.id]),$=A.useCallback(()=>{g(null),m(null)},[]),Q=A.useCallback((_,D)=>{const j=`${D}-${_}`;return{isDragging:h===j,isDragOver:x===j,onDragStart:R=>F(R,_,D),onDragEnd:$,onDragOver:R=>z(R,_,D),onDragLeave:H,onDrop:R=>X(R,_,D)}},[h,x,F,$,z,H,X]),W=(_,D)=>{const j=D==="input",R=`${D}-${_.wareId}`,E=j&&T(_.wareId),P=j?Y.get(_.wareId)??0:0,Z=j?0:q.get(_.wareId)??0,J=j?P:Z,oe=_.amount-J,ie=Uc(oe,J),le=j?"Need":"Export",se=j?"Supplied":"Consumed";let G;return ie==="satisfied"?G=`${le}: ${$e(_.amount)}, ${se}: ${$e(J)}`:ie==="partial"?G=`${le}: ${$e(_.amount)}, ${se}: ${$e(J)}, Remaining: ${$e(oe)}`:G=`${le}: ${$e(_.amount)}, No external ${j?"supply":"consumers"}`,u.jsx(ql,{wareId:_.wareId,type:D,handleId:R,amount:{primary:_.amount,secondary:J>.01?J:void 0,fulfilled:J},status:ie,preset:pj,isDeficit:E,drag:Q(_.wareId,D),amountTooltip:G},_.wareId)};return u.jsxs("div",{className:`
        min-w-[240px] max-w-[240px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:N,children:[S>0&&u.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),u.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("button",{onClick:_=>{_.stopPropagation(),d(i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h3",{className:`font-medium text-sm truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:i.name}),y&&u.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:y.name})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[u.jsx("span",{className:"text-yellow-500",children:""}),C,"%",i.sunlightOverride===null&&y&&u.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),O&&u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population"}),u.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),u.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all ${b>=1?"bg-green-500":b>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b*100}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[L.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pr-2",children:L.map(_=>W(_,"output"))})]}),B.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pl-2",children:B.map(_=>W(_,"input"))})]})]}),i.modules.length===0&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),xj=160,yj=100,vj=A.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,c=ce(y=>y.updateSector),d=ce(y=>y.plan.stations),f=ce(y=>y.moveStationToSector),[h,g]=A.useState(!1),x=A.useCallback((y,w)=>{c(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,c]),m=A.useCallback((y,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};d.forEach(C=>{const N=C.position.x+xj/2,b=C.position.y+yj/2,O=N>=S.left&&N<=S.right&&b>=S.top&&b<=S.bottom;O&&C.sectorId!==r?f(C.id,r):!O&&C.sectorId===r&&f(C.id,null)})},[r,d,f]);return u.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[u.jsx(Ik,{minWidth:200,minHeight:150,isVisible:i||h,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:x,onResizeEnd:m}),u.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[u.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),u.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),wj={production:"",habitat:"",storage:""},zm={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},Sj=A.memo(function({data:r,selected:o}){const{module:i,onWareDoubleClick:l}=r,c=ge(P=>P.activeStationId),d=ce(P=>P.computed),f=ce(P=>P.updateModule),h=Oe(P=>P.getModule),g=Oe(P=>P.getModuleType),x=Oe(P=>P.gameData),{t:m}=ht(),[y,w]=A.useState(null),[S,C]=A.useState(null),[N,b]=A.useState(!1),O=h(i.blueprintId),k=g(i.blueprintId)??"production",T=zm[k]??zm.production,M=wj[k]??"",L=A.useMemo(()=>{if(c)return qt(d,c,i.id)},[d,c,i.id]),B=A.useCallback(P=>{var Z;return m((Z=x==null?void 0:x.wares[P])==null?void 0:Z.name,P)},[x,m]),Y=A.useCallback((P,Z)=>{if(!Z||Z.length===0)return P;const J=new Map(P.map(le=>[le.wareId,le])),oe=[],ie=new Set;for(const le of Z){const se=J.get(le);se&&(oe.push(se),ie.add(le))}for(const le of P)ie.has(le.wareId)||oe.push(le);return oe},[]),q=A.useMemo(()=>Y((L==null?void 0:L.netOutputs)??[],i.outputOrder),[L==null?void 0:L.netOutputs,i.outputOrder,Y]),F=A.useMemo(()=>Y((L==null?void 0:L.netInputs)??[],i.inputOrder),[L==null?void 0:L.netInputs,i.inputOrder,Y]),z=A.useMemo(()=>Y((L==null?void 0:L.grossOutputs)??[],i.outputOrder),[L==null?void 0:L.grossOutputs,i.outputOrder,Y]),H=A.useMemo(()=>Y((L==null?void 0:L.grossInputs)??[],i.inputOrder),[L==null?void 0:L.grossInputs,i.inputOrder,Y]),X=A.useMemo(()=>{if(!L)return!1;const P=L.grossOutputs.reduce((ie,le)=>ie+le.amount,0),Z=L.netOutputs.reduce((ie,le)=>ie+le.amount,0),J=L.grossInputs.reduce((ie,le)=>ie+le.amount,0),oe=L.netInputs.reduce((ie,le)=>ie+le.amount,0);return Math.abs(P-Z)>.01||Math.abs(J-oe)>.01},[L]),$=A.useCallback((P,Z,J)=>{P.stopPropagation(),w(`${J}-${Z}`),P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",`${J}-${Z}`)},[]),Q=A.useCallback((P,Z,J)=>{P.preventDefault(),P.stopPropagation();const oe=`${J}-${Z}`;y&&y!==oe&&y.startsWith(J)&&(C(oe),P.dataTransfer.dropEffect="move")},[y]),W=A.useCallback(()=>{C(null)},[]),_=A.useCallback((P,Z,J)=>{if(P.preventDefault(),P.stopPropagation(),!y||!y.startsWith(J)||!c){w(null),C(null);return}const oe=y.replace(`${J}-`,"");if(oe===Z){w(null),C(null);return}const le=(J==="output"?z:H).map(pe=>pe.wareId),se=le.indexOf(oe),G=le.indexOf(Z);if(se===-1||G===-1){w(null),C(null);return}const ne=[...le];ne.splice(se,1),ne.splice(G,0,oe),J==="output"?f(c,i.id,{outputOrder:ne}):f(c,i.id,{inputOrder:ne}),w(null),C(null)},[y,z,H,f,c,i.id]),D=A.useCallback(()=>{w(null),C(null)},[]),j=A.useCallback((P,Z)=>{var oe;return L?((oe=(Z==="output"?L.netOutputs:L.netInputs).find(ie=>ie.wareId===P))==null?void 0:oe.amount)??0:0},[L]),R=A.useCallback((P,Z)=>{const J=`${Z}-${P}`;return{isDragging:y===J,isDragOver:S===J,onDragStart:oe=>$(oe,P,Z),onDragEnd:D,onDragOver:oe=>Q(oe,P,Z),onDragLeave:W,onDrop:oe=>_(oe,P,Z)}},[y,S,$,D,Q,W,_]),E=(P,Z)=>{const J=`${Z}-${P.wareId}`,oe=j(P.wareId,Z),ie=oe<.01;return u.jsx(ql,{wareId:P.wareId,type:Z,handleId:J,amount:{primary:oe,fulfilled:P.amount-oe},status:ie?"satisfied":"unsatisfied",preset:fj,drag:R(P.wareId,Z),amountTooltip:`Full: ${$e(P.amount)}/hr`,onDoubleClick:l?()=>l(P.wareId,i.id,Z):void 0},P.wareId)};return u.jsxs("div",{className:`
        w-[240px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":T.border}
      `,children:[u.jsx("div",{className:`px-3 py-2 border-b border-border ${T.bg} rounded-t-lg`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:P=>{P.stopPropagation(),c&&f(c,i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("span",{className:"text-base",children:M}),u.jsx("h3",{className:`text-xs truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:m(O==null?void 0:O.name,i.blueprintId)})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Count"}),u.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),k==="habitat"&&O&&"workforceCapacity"in O&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsx("span",{className:"text-foreground",children:O.workforceCapacity*i.count})]}),k==="storage"&&O&&"cargoMax"in O&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:O.cargoMax*i.count})]}),(k==="production"||k==="habitat")&&L&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[z.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:z.map(P=>E(P,"output"))})]}),H.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:H.map(P=>E(P,"input"))})]}),q.length===0&&F.length===0&&X&&u.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(z.length>0||H.length>0)&&u.jsxs("div",{className:"pt-1 border-t border-border/30",children:[u.jsxs("button",{onClick:P=>{P.stopPropagation(),b(!N)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[u.jsx("span",{children:N?"":""}),u.jsx("span",{children:"Full Production"})]}),N&&u.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[z.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),z.map(P=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:B(P.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",$e(P.amount)]})]},P.wareId))]}),H.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),H.map(P=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:B(P.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",$e(P.amount)]})]},P.wareId))]})]})]})]}),(k==="production"||k==="habitat")&&!L&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),Nj="generic-import",kj=A.memo(function({selected:r}){const o=ge(F=>F.activeStationId),i=ce(F=>F.computed),l=Oe(F=>F.gameData),c=ce(F=>F.plan.stations),d=ce(F=>F.updateStation),{t:f}=ht(),[h,g]=A.useState(null),[x,m]=A.useState(null),y=A.useMemo(()=>{if(o)return c.find(F=>F.id===o)},[c,o]),w=A.useMemo(()=>{if(!(!o||!i))return i.stations.find(F=>F.stationId===o)},[i,o]),S=F=>{var z;return f((z=l==null?void 0:l.wares[F])==null?void 0:z.name,F)},C=(w==null?void 0:w.stationInputs)??[],N=(w==null?void 0:w.externallySupplied)??[],b=(w==null?void 0:w.remainingInputs)??[],O=A.useMemo(()=>{const F=new Map;for(const X of C){const $=F.get(X.wareId)||{connected:0,supplied:0,remaining:0};$.connected=X.amount,F.set(X.wareId,$)}for(const X of N){const $=F.get(X.wareId);$&&($.supplied=X.amount)}for(const X of b){const $=F.get(X.wareId);$&&($.remaining=X.amount)}const z=Array.from(F.entries()).map(([X,$])=>({wareId:X,connected:$.connected,supplied:$.supplied,remaining:$.remaining})),H=y==null?void 0:y.inputOrder;if(H&&H.length>0){const X=new Map(H.map(($,Q)=>[$,Q]));z.sort(($,Q)=>{const W=X.get($.wareId)??1/0,_=X.get(Q.wareId)??1/0;return W!==_?W-_:Q.connected-$.connected})}else z.sort((X,$)=>$.connected-X.connected);return z},[C,N,b,y==null?void 0:y.inputOrder]),k=A.useCallback((F,z)=>{F.stopPropagation(),g(z),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",z)},[]),T=A.useCallback((F,z)=>{F.preventDefault(),F.stopPropagation(),h&&h!==z&&(m(z),F.dataTransfer.dropEffect="move")},[h]),M=A.useCallback(()=>{m(null)},[]),L=A.useCallback((F,z)=>{if(F.preventDefault(),F.stopPropagation(),!h||!o){g(null),m(null);return}const H=h;if(H===z){g(null),m(null);return}const X=O.map(_=>_.wareId),$=X.indexOf(H),Q=X.indexOf(z);if($===-1||Q===-1){g(null),m(null);return}const W=[...X];W.splice($,1),W.splice(Q,0,H),d(o,{inputOrder:W}),g(null),m(null)},[h,O,d,o]),B=A.useCallback(()=>{g(null),m(null)},[]),Y=A.useCallback(F=>({isDragging:h===F,isDragOver:x===F,onDragStart:z=>k(z,F),onDragEnd:B,onDragOver:z=>T(z,F),onDragLeave:M,onDrop:z=>L(z,F)}),[h,x,k,B,T,M,L]),q=F=>{const z=`output-${F.wareId}`,H=Uc(F.remaining,F.supplied);let X;return H==="satisfied"?X=`Need: ${$e(F.connected)}, Supplied: ${$e(F.supplied)}`:H==="partial"?X=`Need: ${$e(F.connected)}, Supplied: ${$e(F.supplied)}, Remaining: ${$e(F.remaining)}`:X=`Need: ${$e(F.connected)}, No external supply`,u.jsx(ql,{wareId:F.wareId,type:"output",handleId:z,amount:{primary:F.supplied-F.connected?F.supplied-F.connected:F.supplied,secondary:F.supplied>.01?F.supplied:void 0,fulfilled:F.supplied},status:H,preset:mj,drag:Y(F.wareId),amountTooltip:X,handleTooltip:`Import ${S(F.wareId)}`},F.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),u.jsx("div",{className:"px-1 py-2",children:O.length>0?u.jsx("div",{className:"space-y-0 pr-3",children:O.map(F=>q(F))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),u.jsx(Pr,{type:"source",position:Ne.Right,id:Nj,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),jj="generic-export",bj=A.memo(function({selected:r}){const o=ge(F=>F.activeStationId),i=ce(F=>F.computed),l=Oe(F=>F.gameData),c=ce(F=>F.plan.stations),d=ce(F=>F.updateStation),{t:f}=ht(),[h,g]=A.useState(null),[x,m]=A.useState(null),y=A.useMemo(()=>{if(o)return c.find(F=>F.id===o)},[c,o]),w=A.useMemo(()=>{if(!(!o||!i))return i.stations.find(F=>F.stationId===o)},[i,o]),S=F=>{var z;return f((z=l==null?void 0:l.wares[F])==null?void 0:z.name,F)},C=(w==null?void 0:w.stationOutputs)??[],N=(w==null?void 0:w.externallyConsumed)??[],b=(w==null?void 0:w.remainingOutputs)??[],O=A.useMemo(()=>{const F=new Map;for(const X of C){const $=F.get(X.wareId)||{connected:0,consumed:0,remaining:0};$.connected=X.amount,F.set(X.wareId,$)}for(const X of N){const $=F.get(X.wareId);$&&($.consumed=X.amount)}for(const X of b){const $=F.get(X.wareId);$&&($.remaining=X.amount)}const z=Array.from(F.entries()).map(([X,$])=>({wareId:X,connected:$.connected,consumed:$.consumed,remaining:$.remaining})),H=y==null?void 0:y.outputOrder;if(H&&H.length>0){const X=new Map(H.map(($,Q)=>[$,Q]));z.sort(($,Q)=>{const W=X.get($.wareId)??1/0,_=X.get(Q.wareId)??1/0;return W!==_?W-_:Q.connected-$.connected})}else z.sort((X,$)=>$.connected-X.connected);return z},[C,N,b,y==null?void 0:y.outputOrder]),k=A.useCallback((F,z)=>{F.stopPropagation(),g(z),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",z)},[]),T=A.useCallback((F,z)=>{F.preventDefault(),F.stopPropagation(),h&&h!==z&&(m(z),F.dataTransfer.dropEffect="move")},[h]),M=A.useCallback(()=>{m(null)},[]),L=A.useCallback((F,z)=>{if(F.preventDefault(),F.stopPropagation(),!h||!o){g(null),m(null);return}const H=h;if(H===z){g(null),m(null);return}const X=O.map(_=>_.wareId),$=X.indexOf(H),Q=X.indexOf(z);if($===-1||Q===-1){g(null),m(null);return}const W=[...X];W.splice($,1),W.splice(Q,0,H),d(o,{outputOrder:W}),g(null),m(null)},[h,O,d,o]),B=A.useCallback(()=>{g(null),m(null)},[]),Y=A.useCallback(F=>({isDragging:h===F,isDragOver:x===F,onDragStart:z=>k(z,F),onDragEnd:B,onDragOver:z=>T(z,F),onDragLeave:M,onDrop:z=>L(z,F)}),[h,x,k,B,T,M,L]),q=F=>{const z=`input-${F.wareId}`,H=Uc(F.remaining,F.consumed);let X;return H==="satisfied"?X=`Exporting: ${$e(F.connected)}, Consumed: ${$e(F.consumed)}`:H==="partial"?X=`Exporting: ${$e(F.connected)}, Consumed: ${$e(F.consumed)}, Remaining: ${$e(F.remaining)}`:X=`Exporting: ${$e(F.connected)}, No external consumers`,u.jsx(ql,{wareId:F.wareId,type:"input",handleId:z,amount:{primary:F.connected,secondary:F.consumed>.01?F.consumed:void 0,fulfilled:F.consumed},status:H,preset:hj,drag:Y(F.wareId),amountTooltip:X,handleTooltip:`Export ${S(F.wareId)}`},F.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),u.jsx("div",{className:"px-1 py-2",children:O.length>0?u.jsx("div",{className:"space-y-0 pl-3",children:O.map(F=>q(F))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),u.jsx(Pr,{type:"target",position:Ne.Left,id:jj,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),Cj=A.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:h,selected:g}){const x=ce(k=>k.computed),m=h==null?void 0:h.connection,y=A.useMemo(()=>{if(m)return _g(x,m.id)},[x,m]),[w,S,C]=Ul({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),N=k=>k>=1e3?`${(k/1e3).toFixed(1)}k`:k.toFixed(0),b=x.deficits.find(k=>k.stationId===(m==null?void 0:m.targetStationId)&&k.wareId===(m==null?void 0:m.wareId));let O="#64748b";return m!=null&&m.wareId?b?b.supplied/b.required>=.8?O="#eab308":O="#f97316":O="#22c55e":O="#ef4444",u.jsxs(u.Fragment,{children:[u.jsx(ko,{id:r,path:w,style:{stroke:O,strokeWidth:g?3:2,strokeDasharray:m!=null&&m.wareId?void 0:"5,5"}}),(m==null?void 0:m.wareId)&&u.jsx(kg,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${C}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${g?"ring-2 ring-primary":""}
              ${y!=null&&y.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:m.mode==="custom"?`Custom: ${N(m.amount)}, Actual: ${N((y==null?void 0:y.effectiveAmount)??0)}`:`Auto: ${N((y==null?void 0:y.effectiveAmount)??0)}`,children:N((y==null?void 0:y.effectiveAmount)??0)})})]})}),Ij=A.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:h,selected:g}){const x=h==null?void 0:h.connection,m=ce(T=>T.computed),y=ge(T=>T.activeStationId),w=A.useMemo(()=>{if(!x||!y)return;const T=Dr(m,y);return T==null?void 0:T.moduleConnections.find(M=>M.connectionId===x.id)},[m,y,x]),[S,C,N]=Ul({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),b=T=>T>=1e3?`${(T/1e3).toFixed(1)}k`:T.toFixed(0),O=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",k=(w==null?void 0:w.effectiveAmount)??(x==null?void 0:x.amount)??0;return u.jsxs(u.Fragment,{children:[u.jsx(ko,{id:r,path:S,style:{stroke:O,strokeWidth:g?3:2,strokeDasharray:x!=null&&x.wareId?void 0:"5,5"}}),(x==null?void 0:x.wareId)&&u.jsx(kg,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${C}px,${N}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${g?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:x.mode==="custom"?`Custom: ${b(x.amount)}, Actual: ${b(k)}`:`${x.mode??"auto"}: ${b(k)}`,children:b(k)})})]})});function _t({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",c=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return u.jsxs("button",{onClick:d=>{d.stopPropagation(),i(d)},className:`${l} ${c}`,children:[r&&u.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function Ej(){const{screenToFlowPosition:t}=Or(),r=ge(h=>h.contextMenu),o=ge(h=>h.closeContextMenu),i=ce(h=>h.plan),l=ce(h=>h.addStation),c=ce(h=>h.addSector),d=A.useCallback(h=>{if(h.stopPropagation(),!r)return;const g=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,g),o()},[t,r,i.stations.length,l,o]),f=A.useCallback(h=>{if(h.stopPropagation(),!r)return;const g=t({x:r.x,y:r.y});c(`Sector ${i.sectors.length+1}`,g),o()},[t,r,i.sectors.length,c,o]);return u.jsxs(u.Fragment,{children:[u.jsx(_t,{label:"Add Station",icon:"+",onClick:d}),u.jsx(_t,{label:"Add Sector",icon:"",onClick:f})]})}const vl={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function Mj(){const{screenToFlowPosition:t}=Or(),r=A.useRef(null),o=Oe(S=>S.gameData),i=ce(S=>S.addModule),l=ge(S=>S.activeStationId),c=ge(S=>S.contextMenu),d=ge(S=>S.closeContextMenu),{t:f}=ht(),[h,g]=A.useState(null),[x,m]=A.useState(""),y=A.useMemo(()=>{if(!o||!x.trim())return null;const S=x.toLowerCase(),C=[];return Object.keys(vl).forEach(N=>{Object.values(o.modules[N]).forEach(b=>{f(b.name).toLowerCase().includes(S)&&C.push({id:b.id,name:f(b.name),category:N})})}),C.slice(0,15)},[o,x,f]);A.useEffect(()=>{var S;(S=r.current)==null||S.focus()},[]);const w=A.useCallback((S,C)=>{if(S.stopPropagation(),!l||!c)return;const N=t({x:c.x,y:c.y});i(l,C,N),d()},[t,c,l,i,d]);return o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-2 pb-0",children:u.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:x,onChange:S=>m(S.target.value),onKeyDown:S=>S.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsx("div",{className:"p-1 pt-1",children:y?u.jsx("div",{className:"max-h-64 overflow-y-auto",children:y.length===0?u.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):y.map(S=>u.jsxs("button",{onClick:C=>w(C,S.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:vl[S.category].icon}),u.jsx("span",{className:"truncate",children:S.name})]},S.id))}):u.jsx(u.Fragment,{children:Object.keys(vl).map(S=>{const{label:C,icon:N}=vl[S],b=Object.values(o.modules[S]),O=h===S;return u.jsxs("div",{children:[u.jsxs("button",{onClick:k=>{k.stopPropagation(),g(O?null:S)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{children:N}),C]}),u.jsx("span",{className:"text-muted-foreground text-xs",children:O?"":""})]}),O&&u.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[b.slice(0,20).map(k=>u.jsx("button",{onClick:T=>w(T,k.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:f(k.name)},k.id)),b.length>20&&u.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",b.length-20," more (use search)"]})]})]},S)})})})]}):null}function Tr(){return u.jsx("div",{className:"my-1 h-px bg-border"})}function bc({label:t,value:r,type:o="text",min:i,max:l,step:c,onSubmit:d}){const[f,h]=A.useState(!1),[g,x]=A.useState(String(r)),m=A.useRef(null);A.useEffect(()=>{var w,S;f&&((w=m.current)==null||w.focus(),(S=m.current)==null||S.select())},[f]);const y=()=>{d(g),h(!1)};return f?u.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("input",{ref:m,type:o,min:i,max:l,step:c,value:g,onChange:w=>x(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&y(),w.key==="Escape"&&h(!1)},onBlur:y,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):u.jsxs("button",{onClick:w=>{w.stopPropagation(),x(String(r)),h(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:t}),u.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function _j({nodeId:t}){const r=ce(h=>h.plan.stations),o=ce(h=>h.updateStation),i=ce(h=>h.removeStation),l=ge(h=>h.drillIntoStation),c=ge(h=>h.closeContextMenu),d=ge(h=>h.clearSelection),f=r.find(h=>h.id===t);return f?u.jsxs(u.Fragment,{children:[u.jsx(_t,{label:"Open Station",onClick:()=>{l(t)}}),u.jsx(Tr,{}),u.jsx(bc,{label:"Change Name",value:f.name,onSubmit:h=>{h.trim()&&o(t,{name:h.trim()})}}),u.jsx(bc,{label:"Sunlight Override",value:f.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:h=>{const g=parseInt(h,10);o(t,{sunlightOverride:isNaN(g)?void 0:g})}}),u.jsx(_t,{label:f.locked?"Unlock Position":"Lock Position",icon:f.locked?"":"",onClick:()=>{o(t,{locked:!f.locked}),c()}}),u.jsx(Tr,{}),u.jsx(_t,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),d(),c()}})]}):null}function Pj({value:t,onSelect:r}){const[o,i]=A.useState(!1),[l,c]=A.useState(t),d=A.useRef(null),f=Oe(x=>x.gameData),h=A.useMemo(()=>f!=null&&f.sectors?Object.values(f.sectors).sort((x,m)=>x.name.localeCompare(m.name)):[],[f]),g=A.useMemo(()=>{if(!l.trim())return h.slice(0,10);const x=l.toLowerCase();return h.filter(m=>m.name.toLowerCase().includes(x)).slice(0,10)},[h,l]);return A.useEffect(()=>{var x,m;o&&((x=d.current)==null||x.focus(),(m=d.current)==null||m.select())},[o]),o?u.jsxs("div",{className:"px-3 py-1.5",onClick:x=>x.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),u.jsx("input",{ref:d,type:"text",value:l,onChange:x=>c(x.target.value),onKeyDown:x=>{if(x.stopPropagation(),x.key==="Enter"){const m=h.find(y=>y.name.toLowerCase()===l.toLowerCase());r((m==null?void 0:m.name)??l,m==null?void 0:m.sunlight),i(!1)}x.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),g.length>0&&u.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:g.map(x=>u.jsxs("button",{onClick:m=>{m.stopPropagation(),r(x.name,x.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[u.jsx("span",{className:"truncate text-foreground",children:x.name}),u.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[x.sunlight,"%"]})]},x.id))})]}):u.jsxs("button",{onClick:x=>{x.stopPropagation(),c(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:"Change Name"}),u.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function Dj({nodeId:t}){const r=ce(m=>m.plan),o=ce(m=>m.updateSector),i=ce(m=>m.removeSector),l=ce(m=>m.addStation),c=ce(m=>m.moveStationToSector),d=ge(m=>m.contextMenu),f=ge(m=>m.closeContextMenu),h=ge(m=>m.clearSelection),g=r.sectors.find(m=>m.id===t);if(!g)return null;const x=r.stations.filter(m=>m.sectorId===t);return u.jsxs(u.Fragment,{children:[u.jsx(Pj,{value:g.name,onSelect:(m,y)=>{const w={name:m};y!==void 0&&(w.sunlight=y),o(t,w)}}),u.jsx(bc,{label:"Sunlight",value:g.sunlight,type:"number",min:0,max:500,onSubmit:m=>{const y=parseInt(m,10);!isNaN(y)&&y>=0&&o(t,{sunlight:y})}}),u.jsx(Tr,{}),u.jsx(_t,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const m=(d==null?void 0:d.flowPosition)??{x:g.position.x+50,y:g.position.y+80},y=`Station ${r.stations.length+1}`;l(y,m);const w=(S=ce.getState().plan.stations.at(-1))==null?void 0:S.id;w&&c(w,t),f()}}),u.jsx(_t,{label:g.locked?"Unlock Position":"Lock Position",icon:g.locked?"":"",onClick:()=>{o(t,{locked:!g.locked}),f()}}),u.jsx(Tr,{}),u.jsx(_t,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{x.length>0&&!confirm(`This sector contains ${x.length} station(s). They will be unassigned. Continue?`)||(i(t),h(),f())}})]})}function Tj({label:t,value:r,min:o=1,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),u.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const c=parseInt(l.target.value,10);!isNaN(c)&&c>=o&&i(c)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),u.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function Cc({label:t,value:r,options:o,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value))})]})}function Oj({nodeId:t}){const r=ge(S=>S.activeStationId),o=ge(S=>S.closeContextMenu),i=ge(S=>S.clearSelection),l=ce(S=>S.plan.stations),c=ce(S=>S.updateModule),d=ce(S=>S.removeModule),f=Oe(S=>S.gameData),h=Oe(S=>S.getModuleType),{t:g}=ht(),x=l.find(S=>S.id===r),m=x==null?void 0:x.modules.find(S=>S.id===t),y=m?h(m.blueprintId):null,w=A.useMemo(()=>{if(!f||!y)return[];const S=f.modules[y];return Object.values(S).sort((C,N)=>g(C.name).localeCompare(g(N.name))).map(C=>({value:C.id,label:g(C.name)}))},[f,y,g]);return!x||!m||!r?null:u.jsxs(u.Fragment,{children:[u.jsx(Tj,{label:"Amount",value:m.count,min:1,onChange:S=>c(r,m.id,{count:S})}),y==="production"&&w.length>1&&u.jsx(Cc,{label:"Blueprint",value:m.blueprintId,options:w,onChange:S=>c(r,m.id,{blueprintId:S})}),u.jsx(_t,{label:m.locked?"Unlock Position":"Lock Position",icon:m.locked?"":"",onClick:()=>{c(r,m.id,{locked:!m.locked}),o()}}),u.jsx(Tr,{}),u.jsx(_t,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{d(r,m.id),i(),o()}})]})}function Lj({nodeId:t}){const r=ge(x=>x.activeStationId),o=ge(x=>x.closeContextMenu),i=ce(x=>x.plan.stations),l=ce(x=>x.removeModuleConnection),c=i.find(x=>x.id===r);if(!c||!r)return null;const d=c.moduleConnections??[],f=t===Nt,h=f?"Station Input":"Station Output",g=d.filter(x=>f?x.sourceModuleId===Nt:x.targetModuleId===Vt);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[h,"  ",g.length," connection",g.length!==1?"s":""]}),u.jsx(_t,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{g.forEach(x=>{l(r,x.id)}),o()}})]})}const Rm=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function Aj({edgeId:t,viewMode:r}){var C,N;const o=ge(b=>b.closeContextMenu),i=ge(b=>b.clearSelection),l=ge(b=>b.activeStationId),c=ce(b=>b.plan),d=ce(b=>b.updateConnection),f=ce(b=>b.removeConnection),h=ce(b=>b.updateModuleConnection),g=ce(b=>b.removeModuleConnection),x=Oe(b=>b.gameData),{t:m}=ht();if(r==="network"){const b=c.connections.find(k=>k.id===t);if(!b)return null;const O=b.wareId?m((C=x==null?void 0:x.wares[b.wareId])==null?void 0:C.name,b.wareId):"Unknown";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:O}),u.jsx(Cc,{label:"Mode",value:b.mode??"auto",options:Rm,onChange:k=>d(b.id,{mode:k})}),u.jsx(Tr,{}),u.jsx(_t,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{f(b.id),i(),o()}})]})}if(!l)return null;const y=c.stations.find(b=>b.id===l),w=((y==null?void 0:y.moduleConnections)??[]).find(b=>b.id===t);if(!w)return null;const S=m((N=x==null?void 0:x.wares[w.wareId])==null?void 0:N.name,w.wareId);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:S}),u.jsx(Cc,{label:"Mode",value:w.mode??"auto",options:Rm,onChange:b=>h(l,w.id,{mode:b})}),u.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:b=>b.stopPropagation(),children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),u.jsx("button",{onClick:b=>{b.stopPropagation(),h(l,w.id,{locked:!w.locked})},className:`w-10 h-5 rounded-full transition-colors ${w.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${w.locked?"translate-x-5":"translate-x-0.5"}`})})]}),u.jsx(Tr,{}),u.jsx(_t,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{g(l,w.id),i(),o()}})]})}function Tg(){const t=ge(x=>x.contextMenu),r=ge(x=>x.closeContextMenu),o=A.useRef(null),i=A.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const x=o.current.getBoundingClientRect();let{x:m,y}=t;return m+x.width>window.innerWidth&&(m=window.innerWidth-x.width-8),y+x.height>window.innerHeight&&(y=window.innerHeight-x.height-8),m<8&&(m=8),y<8&&(y=8),{left:m,top:y}},[t]);if(A.useEffect(()=>{if(!t)return;const x=y=>{o.current&&!o.current.contains(y.target)&&r()},m=setTimeout(()=>{document.addEventListener("mousedown",x)},0);return()=>{clearTimeout(m),document.removeEventListener("mousedown",x)}},[t,r]),A.useEffect(()=>{if(!t)return;const x=m=>{m.key==="Escape"&&r()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,r]),!t)return null;const{target:l}=t,d=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return u.jsx(Ej,{});if(l.viewMode==="station")return u.jsx(Mj,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return u.jsx(_j,{nodeId:l.nodeId});if(l.nodeType==="sector")return u.jsx(Dj,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===Nt||l.nodeId===Vt)return u.jsx(Lj,{nodeId:l.nodeId});if(l.nodeType==="module")return u.jsx(Oj,{nodeId:l.nodeId})}}return l.type==="edge"?u.jsx(Aj,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!d)return null;const h=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",g=i();return u.jsx("div",{ref:o,className:`fixed z-50 ${h} rounded-md border border-border bg-popover shadow-lg`,style:{left:g.left||t.x,top:g.top||t.y},onClick:x=>x.stopPropagation(),onMouseDown:x=>x.stopPropagation(),children:u.jsx("div",{className:"p-1",children:d})})}const $j={station:gj,sector:vj},zj={resource:Cj};function Rj(){const{setViewport:t,screenToFlowPosition:r}=Or(),o=ce(_=>_.plan.stations),i=ce(_=>_.plan.sectors),l=ce(_=>_.plan.connections),c=ce(_=>_.computed),d=ce(_=>_.updateStation),f=ce(_=>_.updateSector),h=ce(_=>_.removeStation),g=ce(_=>_.removeSector),x=ce(_=>_.moveStationToSector),m=ce(_=>_.addConnection),y=ce(_=>_.removeConnection),w=ge(_=>_.selectNode),S=ge(_=>_.selectEdge),C=ge(_=>_.clearSelection),N=ge(_=>_.openContextMenu),b=ge(_=>_.closeContextMenu),O=A.useRef(null),k=A.useMemo(()=>{const _=i.map(j=>({id:j.id,type:"sector",position:j.position,data:{sector:j},width:j.size.width,height:j.size.height,zIndex:-1,draggable:!j.locked})),D=o.map(j=>({id:j.id,type:"station",position:j.position,data:{station:j},zIndex:1,draggable:!j.locked}));return[..._,...D]},[i,o]),T=A.useMemo(()=>l.map(_=>({id:_.id,source:_.sourceStationId,target:_.targetStationId,sourceHandle:_.wareId?`output-${_.wareId}`:void 0,targetHandle:_.wareId?`input-${_.wareId}`:void 0,type:"resource",data:{connection:_}})),[l]),M=A.useCallback((_,D)=>{for(const j of i)if(_>=j.position.x&&_<=j.position.x+j.size.width&&D>=j.position.y&&D<=j.position.y+j.size.height)return j.id;return null},[i]),L=A.useCallback(_=>{_.forEach(D=>{if(D.type==="position"&&D.position){const j=o.find(E=>E.id===D.id),R=i.find(E=>E.id===D.id);if(j)d(D.id,{position:D.position});else if(R){const E=D.position.x-R.position.x,P=D.position.y-R.position.y;f(D.id,{position:D.position}),(E!==0||P!==0)&&o.filter(Z=>Z.sectorId===R.id).forEach(Z=>{d(Z.id,{position:{x:Z.position.x+E,y:Z.position.y+P}})})}}else if(D.type==="remove"){const j=o.find(E=>E.id===D.id),R=i.find(E=>E.id===D.id);j?h(D.id):R&&g(D.id)}else D.type==="select"&&D.selected&&w(D.id)})},[o,i,d,f,h,g,w]),B=A.useCallback((_,D)=>{const j=o.find(Z=>Z.id===D.id);if(!j)return;const R=D.position.x+80,E=D.position.y+50,P=M(R,E);P!==j.sectorId&&x(j.id,P)},[o,M,x]),Y=A.useCallback(_=>{_.forEach(D=>{D.type==="remove"?y(D.id):D.type==="select"&&D.selected&&S(D.id)})},[y,S]),q=_=>_?_.split("-").slice(1).join("-"):"",F=A.useCallback(_=>{if(_.source&&_.target&&_.sourceHandle){const D=q(_.sourceHandle),j=c.stations.find(J=>J.stationId===_.source),R=j==null?void 0:j.remainingOutputs.find(J=>J.wareId===D),E=c.stations.find(J=>J.stationId===_.target),P=E==null?void 0:E.remainingInputs.find(J=>J.wareId===D),Z=P?Math.min((R==null?void 0:R.amount)??0,P.amount):(R==null?void 0:R.amount)??0;m({sourceStationId:_.source,targetStationId:_.target,wareId:D,amount:Z,mode:"auto"})}},[m,c.stations]),z=A.useCallback(()=>{C(),b()},[C,b]),H=A.useCallback(_=>{_.preventDefault(),N({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"pane",viewMode:"network"}})},[N,r]),X=A.useCallback((_,D)=>{_.preventDefault(),w(D.id),N({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"node",nodeId:D.id,nodeType:D.type??"station",viewMode:"network"}})},[N,r,w]),$=A.useCallback((_,D)=>{_.preventDefault(),S(D.id),N({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"edge",edgeId:D.id,edgeType:D.type??"resource",viewMode:"network"}})},[N,r,S]),Q=A.useCallback(_=>{if(_.key==="Delete"||_.key==="Backspace"){const D=ge.getState().selectedNodeId,j=ge.getState().selectedEdgeId;if(D){const R=o.find(P=>P.id===D),E=i.find(P=>P.id===D);R?h(D):E&&g(D),C()}else j&&(y(j),C())}},[o,i,h,g,y,C]),W=A.useCallback(_=>{const D=Math.round(_.x),j=Math.round(_.y),R=Math.round(_.zoom*100)/100;(D!==_.x||j!==_.y||R!==_.zoom)&&t({x:D,y:j,zoom:R})},[t]);return u.jsxs("div",{ref:O,className:"flex-1 relative",onKeyDown:Q,tabIndex:0,children:[u.jsxs(Ng,{nodes:k,edges:T,onNodesChange:L,onEdgesChange:Y,onConnect:F,onNodeDragStop:B,onPaneClick:z,onPaneContextMenu:H,onNodeContextMenu:X,onEdgeContextMenu:$,onViewportChange:W,nodeTypes:$j,edgeTypes:zj,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(bg,{gap:16,size:1}),u.jsx(Ig,{}),u.jsx(kk,{nodeColor:_=>_.type==="sector"?_.selected?"#3b82f6":"#475569":_.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),u.jsx(Tg,{})]})}function Fj(){return u.jsx(Ql,{children:u.jsx(Rj,{})})}function Hj({open:t,onClose:r,candidates:o,onSelect:i}){const{t:l}=ht(),c=Oe(d=>d.gameData);return u.jsx(jo,{open:t,onClose:r,title:"Select Module",size:"sm",children:u.jsx("div",{className:"space-y-1",children:o.map(d=>{const f=c?Wc(d,c.recipes):null;return u.jsxs("button",{onClick:()=>i(d.id),className:"w-full text-left px-3 py-2 rounded hover:bg-muted transition-colors flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-sm text-foreground truncate",children:l(d.name,d.id)}),f&&f.method!=="default"&&u.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground flex-shrink-0",children:f.method})]},d.id)})})})}const Vj={module:Sj,stationInput:kj,stationOutput:bj},Bj={module:Ij};function Wj(){const{setViewport:t,screenToFlowPosition:r}=Or(),o=ge(G=>G.activeStationId),i=ce(G=>G.plan.stations),l=ce(G=>G.computed),c=ce(G=>G.updateModule),d=ce(G=>G.removeModule),f=ce(G=>G.addModuleConnection),h=ce(G=>G.removeModuleConnection),g=ge(G=>G.selectNode),x=ge(G=>G.selectEdge),m=ge(G=>G.clearSelection),y=ge(G=>G.openContextMenu),w=ge(G=>G.closeContextMenu),S=ce(G=>G.addModule),C=Oe(G=>G.gameData),N=A.useRef(null),[b,O]=A.useState(null),k=A.useRef(null),T=A.useRef(!1),M=A.useMemo(()=>i.find(G=>G.id===o),[i,o]),L={x:-300,y:100},B={x:400,y:100},Y=A.useCallback(G=>C?Object.values(C.modules.production).filter(ne=>ne.producedWareId===G):[],[C]),q=A.useCallback(G=>C?Object.values(C.modules.production).filter(ne=>{const pe=Wc(ne,C.recipes);return(pe==null?void 0:pe.inputs.some(he=>he.ware===G))??!1}):[],[C]),F=A.useCallback((G,ne,pe,he,me)=>{var Ee,Le,et,at;if(!o)return;const ke=S(o,G,me),Ie=ce.getState().computed;if(he==="producer"){const Xe=qt(Ie,o,ke),Ke=qt(Ie,o,pe),ot=((Ee=Xe==null?void 0:Xe.grossOutputs.find(st=>st.wareId===ne))==null?void 0:Ee.amount)??0,Dt=((Le=Ke==null?void 0:Ke.grossInputs.find(st=>st.wareId===ne))==null?void 0:Le.amount)??0,Tt=Math.min(ot,Dt),Bt=ot>0?Tt/ot:0;f(o,{sourceModuleId:ke,targetModuleId:pe,wareId:ne,amount:Tt,mode:"auto",locked:!1,ratio:Bt})}else{const Xe=qt(Ie,o,pe),Ke=qt(Ie,o,ke),ot=((et=Xe==null?void 0:Xe.grossOutputs.find(st=>st.wareId===ne))==null?void 0:et.amount)??0,Dt=((at=Ke==null?void 0:Ke.grossInputs.find(st=>st.wareId===ne))==null?void 0:at.amount)??0,Tt=Math.min(ot,Dt),Bt=ot>0?Tt/ot:0;f(o,{sourceModuleId:pe,targetModuleId:ke,wareId:ne,amount:Tt,mode:"auto",locked:!1,ratio:Bt})}},[o,S,f]),z=A.useCallback((G,ne,pe,he)=>{const me=pe==="producer"?Y(G):q(G);me.length!==0&&(me.length===1?F(me[0].id,G,ne,pe,he):O({wareId:G,existingModuleId:ne,candidates:me,direction:pe,position:he}))},[Y,q,F]),H=A.useCallback((G,ne,pe)=>{const he=M==null?void 0:M.modules.find(ke=>ke.id===ne),me=(he==null?void 0:he.position)??{x:0,y:0};pe==="input"?z(G,ne,"producer",{x:me.x-320,y:me.y}):z(G,ne,"consumer",{x:me.x+320,y:me.y})},[M,z]),X=A.useCallback(G=>{b&&(F(G,b.wareId,b.existingModuleId,b.direction,b.position),O(null))},[b,F]),$=A.useCallback((G,ne)=>{T.current=!1,ne.nodeId&&ne.handleId&&ne.handleType&&(k.current={nodeId:ne.nodeId,handleId:ne.handleId,handleType:ne.handleType})},[]),Q=A.useCallback(G=>{if(T.current||!k.current){k.current=null;return}const ne=k.current;if(k.current=null,ne.nodeId===Nt||ne.nodeId===Vt)return;const pe=G;if(!pe.clientX&&!pe.clientY)return;const he=r({x:pe.clientX,y:pe.clientY}),me=E(ne.handleId);me&&(ne.handleType==="source"?z(me,ne.nodeId,"consumer",he):z(me,ne.nodeId,"producer",he))},[r,z]),W=A.useMemo(()=>{if(!M)return[];const G=M.modules.map(he=>({id:he.id,type:"module",position:he.position,data:{module:he,onWareDoubleClick:H},draggable:!he.locked})),ne={id:Nt,type:"stationInput",position:M.stationInputPosition??L,data:{},deletable:!1},pe={id:Vt,type:"stationOutput",position:M.stationOutputPosition??B,data:{},deletable:!1};return[ne,...G,pe]},[M,H]),_=A.useMemo(()=>M?(M.moduleConnections??[]).map(ne=>({id:ne.id,source:ne.sourceModuleId,target:ne.targetModuleId,sourceHandle:ne.wareId?`output-${ne.wareId}`:void 0,targetHandle:ne.wareId?`input-${ne.wareId}`:void 0,type:"module",data:{connection:ne}})):[],[M]),D=ce(G=>G.updateStation),j=A.useCallback(G=>{o&&G.forEach(ne=>{ne.type==="position"&&ne.position?ne.id===Nt?D(o,{stationInputPosition:ne.position}):ne.id===Vt?D(o,{stationOutputPosition:ne.position}):c(o,ne.id,{position:ne.position}):ne.type==="remove"?ne.id!==Nt&&ne.id!==Vt&&d(o,ne.id):ne.type==="select"&&ne.selected&&g(ne.id)})},[o,c,D,d,g]),R=A.useCallback(G=>{o&&G.forEach(ne=>{ne.type==="remove"?h(o,ne.id):ne.type==="select"&&ne.selected&&x(ne.id)})},[o,h,x]),E=G=>G?G.split("-").slice(1).join("-"):"",P=A.useCallback(G=>{if(T.current=!0,!o||!G.source||!G.target)return;let ne,pe=0,he;if(G.source===Nt){if(!G.targetHandle)return;ne=E(G.targetHandle);const me=qt(l,o,G.target),ke=me==null?void 0:me.netInputs.find(Ie=>Ie.wareId===ne);pe=(ke==null?void 0:ke.amount)??0}else if(G.target===Vt){if(!G.sourceHandle)return;ne=E(G.sourceHandle);const me=qt(l,o,G.source),ke=me==null?void 0:me.netOutputs.find(Ie=>Ie.wareId===ne);pe=(ke==null?void 0:ke.amount)??0}else{if(!G.sourceHandle)return;ne=E(G.sourceHandle);const me=qt(l,o,G.source),ke=me==null?void 0:me.grossOutputs.find(et=>et.wareId===ne),Ie=(ke==null?void 0:ke.amount)??0,Ee=qt(l,o,G.target),Le=Ee==null?void 0:Ee.grossInputs.find(et=>et.wareId===ne);pe=Le?Math.min(Ie,Le.amount):Ie,he=Ie>0?pe/Ie:0}ne&&f(o,{sourceModuleId:G.source,targetModuleId:G.target,wareId:ne,amount:pe,mode:"auto",locked:!1,ratio:he})},[o,l,f]),Z=A.useCallback(()=>{m(),w()},[m,w]),J=A.useCallback(G=>{G.preventDefault(),y({x:G.clientX,y:G.clientY,flowPosition:r({x:G.clientX,y:G.clientY}),target:{type:"pane",viewMode:"station"}})},[y,r]),oe=A.useCallback((G,ne)=>{G.preventDefault(),g(ne.id),y({x:G.clientX,y:G.clientY,flowPosition:r({x:G.clientX,y:G.clientY}),target:{type:"node",nodeId:ne.id,nodeType:ne.type??"module",viewMode:"station"}})},[y,r,g]),ie=A.useCallback((G,ne)=>{G.preventDefault(),x(ne.id),y({x:G.clientX,y:G.clientY,flowPosition:r({x:G.clientX,y:G.clientY}),target:{type:"edge",edgeId:ne.id,edgeType:ne.type??"module",viewMode:"station"}})},[y,r,x]),le=A.useCallback(G=>{if(G.key==="Delete"||G.key==="Backspace"){const ne=ge.getState().selectedNodeId,pe=ge.getState().selectedEdgeId;ne&&o?ne!==Nt&&ne!==Vt&&(d(o,ne),m()):pe&&o&&(h(o,pe),m())}},[o,d,h,m]),se=A.useCallback(G=>{const ne=Math.round(G.x),pe=Math.round(G.y),he=Math.round(G.zoom*100)/100;(ne!==G.x||pe!==G.y||he!==G.zoom)&&t({x:ne,y:pe,zoom:he})},[t]);return M?u.jsxs("div",{ref:N,className:"flex-1 relative",onKeyDown:le,tabIndex:0,children:[u.jsxs(Ng,{nodes:W,edges:_,onNodesChange:j,onEdgesChange:R,onConnect:P,onConnectStart:$,onConnectEnd:Q,onPaneClick:Z,onPaneContextMenu:J,onNodeContextMenu:oe,onEdgeContextMenu:ie,onViewportChange:se,nodeTypes:Vj,edgeTypes:Bj,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(bg,{gap:16,size:1}),u.jsx(Ig,{})]}),u.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[u.jsx("h2",{className:"font-medium text-foreground",children:M.name}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.modules.length," module",M.modules.length!==1?"s":"",","," ",(M.moduleConnections??[]).length," connection",(M.moduleConnections??[]).length!==1?"s":""]})]}),u.jsx(Tg,{}),u.jsx(Hj,{open:b!==null,onClose:()=>O(null),candidates:(b==null?void 0:b.candidates)??[],onSelect:X})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:u.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function Uj(){return u.jsx(Ql,{children:u.jsx(Wj,{})})}function Yj(){const t=ge(c=>c.toast),r=ge(c=>c.dismissToast),[o,i]=A.useState(!1);if(A.useEffect(()=>{i(!!t)},[t]),!t)return null;const l={success:"bg-green-500 text-white",error:"bg-red-500 text-white",info:"bg-blue-500 text-white"};return u.jsxs("div",{className:`
        fixed bottom-6 right-6 z-50
        flex items-center gap-3
        px-4 py-3 rounded-lg shadow-lg
        min-w-[300px] max-w-[500px]
        transition-all duration-300 ease-in-out
        ${l[t.type]}
        ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
      `,children:[u.jsx("p",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:r,className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Dismiss notification",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}function Xj(){const t=ge(o=>o.theme),r=ge(o=>o.setTheme);A.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),A.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const c=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",c)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function Gj(){const t=ge(o=>o.language),r=ge(o=>o.setLanguage);A.useEffect(()=>{const o=localStorage.getItem("x4-planner-language");o&&r(o)},[r]),A.useEffect(()=>{localStorage.setItem("x4-planner-language",t)},[t])}function Kj(){Xj(),Gj();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=Oe(),c=ge(f=>f.viewMode),d=$l(f=>f.gameMode);return A.useEffect(()=>{Ht.getState().initializePlanManager(),Wk(f=>Ht.getState().saveCurrentPlan(f)),Dg(d).then(f=>{i(f),ce.getState().recompute()}).catch(f=>l(f.message))},[i,l,d]),r?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):u.jsx(Ql,{children:u.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[u.jsx(ej,{}),u.jsx(aj,{}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c==="network"?u.jsx(Fj,{}):u.jsx(Uj,{}),u.jsx(lj,{})]}),u.jsx(dj,{}),t&&u.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]}),u.jsx(Yj,{})]})})}v0.createRoot(document.getElementById("root")).render(u.jsx(A.StrictMode,{children:u.jsx(Kj,{})}));
