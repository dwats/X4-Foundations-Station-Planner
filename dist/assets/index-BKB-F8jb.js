(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=o(l);fetch(l.href,c)}})();function Rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vu={exports:{}},ps={},Bu={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function d0(){if(mp)return _e;mp=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),m=Symbol.iterator;function y(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function C(E,M,Z){this.props=E,this.context=M,this.refs=j,this.updater=Z||w}C.prototype.isReactComponent={},C.prototype.setState=function(E,M){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,M,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function I(){}I.prototype=C.prototype;function T(E,M,Z){this.props=E,this.context=M,this.refs=j,this.updater=Z||w}var N=T.prototype=new I;N.constructor=T,S(N,C.prototype),N.isPureReactComponent=!0;var D=Array.isArray,A=Object.prototype.hasOwnProperty,O={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Y(E,M,Z){var J,oe={},ie=null,le=null;if(M!=null)for(J in M.ref!==void 0&&(le=M.ref),M.key!==void 0&&(ie=""+M.key),M)A.call(M,J)&&!B.hasOwnProperty(J)&&(oe[J]=M[J]);var se=arguments.length-2;if(se===1)oe.children=Z;else if(1<se){for(var G=Array(se),ne=0;ne<se;ne++)G[ne]=arguments[ne+2];oe.children=G}if(E&&E.defaultProps)for(J in se=E.defaultProps,se)oe[J]===void 0&&(oe[J]=se[J]);return{$$typeof:t,type:E,key:ie,ref:le,props:oe,_owner:O.current}}function q(E,M){return{$$typeof:t,type:E.type,key:M,ref:E.ref,props:E.props,_owner:E._owner}}function F(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function z(E){var M={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Z){return M[Z]})}var H=/\/+/g;function X(E,M){return typeof E=="object"&&E!==null&&E.key!=null?z(""+E.key):M.toString(36)}function $(E,M,Z,J,oe){var ie=typeof E;(ie==="undefined"||ie==="boolean")&&(E=null);var le=!1;if(E===null)le=!0;else switch(ie){case"string":case"number":le=!0;break;case"object":switch(E.$$typeof){case t:case r:le=!0}}if(le)return le=E,oe=oe(le),E=J===""?"."+X(le,0):J,D(oe)?(Z="",E!=null&&(Z=E.replace(H,"$&/")+"/"),$(oe,M,Z,"",function(ne){return ne})):oe!=null&&(F(oe)&&(oe=q(oe,Z+(!oe.key||le&&le.key===oe.key?"":(""+oe.key).replace(H,"$&/")+"/")+E)),M.push(oe)),1;if(le=0,J=J===""?".":J+":",D(E))for(var se=0;se<E.length;se++){ie=E[se];var G=J+X(ie,se);le+=$(ie,M,Z,G,oe)}else if(G=y(E),typeof G=="function")for(E=G.call(E),se=0;!(ie=E.next()).done;)ie=ie.value,G=J+X(ie,se++),le+=$(ie,M,Z,G,oe);else if(ie==="object")throw M=String(E),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return le}function Q(E,M,Z){if(E==null)return E;var J=[],oe=0;return $(E,J,"","",function(ie){return M.call(Z,ie,oe++)}),J}function W(E){if(E._status===-1){var M=E._result;M=M(),M.then(function(Z){(E._status===0||E._status===-1)&&(E._status=1,E._result=Z)},function(Z){(E._status===0||E._status===-1)&&(E._status=2,E._result=Z)}),E._status===-1&&(E._status=0,E._result=M)}if(E._status===1)return E._result.default;throw E._result}var _={current:null},P={transition:null},k={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:P,ReactCurrentOwner:O};function R(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:Q,forEach:function(E,M,Z){Q(E,function(){M.apply(this,arguments)},Z)},count:function(E){var M=0;return Q(E,function(){M++}),M},toArray:function(E){return Q(E,function(M){return M})||[]},only:function(E){if(!F(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},_e.Component=C,_e.Fragment=o,_e.Profiler=l,_e.PureComponent=T,_e.StrictMode=i,_e.Suspense=h,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,_e.act=R,_e.cloneElement=function(E,M,Z){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var J=S({},E.props),oe=E.key,ie=E.ref,le=E._owner;if(M!=null){if(M.ref!==void 0&&(ie=M.ref,le=O.current),M.key!==void 0&&(oe=""+M.key),E.type&&E.type.defaultProps)var se=E.type.defaultProps;for(G in M)A.call(M,G)&&!B.hasOwnProperty(G)&&(J[G]=M[G]===void 0&&se!==void 0?se[G]:M[G])}var G=arguments.length-2;if(G===1)J.children=Z;else if(1<G){se=Array(G);for(var ne=0;ne<G;ne++)se[ne]=arguments[ne+2];J.children=se}return{$$typeof:t,type:E.type,key:oe,ref:ie,props:J,_owner:le}},_e.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},_e.createElement=Y,_e.createFactory=function(E){var M=Y.bind(null,E);return M.type=E,M},_e.createRef=function(){return{current:null}},_e.forwardRef=function(E){return{$$typeof:f,render:E}},_e.isValidElement=F,_e.lazy=function(E){return{$$typeof:x,_payload:{_status:-1,_result:E},_init:W}},_e.memo=function(E,M){return{$$typeof:g,type:E,compare:M===void 0?null:M}},_e.startTransition=function(E){var M=P.transition;P.transition={};try{E()}finally{P.transition=M}},_e.unstable_act=R,_e.useCallback=function(E,M){return _.current.useCallback(E,M)},_e.useContext=function(E){return _.current.useContext(E)},_e.useDebugValue=function(){},_e.useDeferredValue=function(E){return _.current.useDeferredValue(E)},_e.useEffect=function(E,M){return _.current.useEffect(E,M)},_e.useId=function(){return _.current.useId()},_e.useImperativeHandle=function(E,M,Z){return _.current.useImperativeHandle(E,M,Z)},_e.useInsertionEffect=function(E,M){return _.current.useInsertionEffect(E,M)},_e.useLayoutEffect=function(E,M){return _.current.useLayoutEffect(E,M)},_e.useMemo=function(E,M){return _.current.useMemo(E,M)},_e.useReducer=function(E,M,Z){return _.current.useReducer(E,M,Z)},_e.useRef=function(E){return _.current.useRef(E)},_e.useState=function(E){return _.current.useState(E)},_e.useSyncExternalStore=function(E,M,Z){return _.current.useSyncExternalStore(E,M,Z)},_e.useTransition=function(){return _.current.useTransition()},_e.version="18.3.1",_e}var hp;function Ds(){return hp||(hp=1,Bu.exports=d0()),Bu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function f0(){if(gp)return ps;gp=1;var t=Ds(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,h,g){var x,m={},y=null,w=null;g!==void 0&&(y=""+g),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(w=h.ref);for(x in h)i.call(h,x)&&!c.hasOwnProperty(x)&&(m[x]=h[x]);if(f&&f.defaultProps)for(x in h=f.defaultProps,h)m[x]===void 0&&(m[x]=h[x]);return{$$typeof:r,type:f,key:y,ref:w,props:m,_owner:l.current}}return ps.Fragment=o,ps.jsx=d,ps.jsxs=d,ps}var xp;function p0(){return xp||(xp=1,Vu.exports=f0()),Vu.exports}var u=p0(),L=Ds();const xs=Rm(L);var ol={},Wu={exports:{}},St={},Uu={exports:{}},Yu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function m0(){return yp||(yp=1,(function(t){function r(P,k){var R=P.length;P.push(k);e:for(;0<R;){var E=R-1>>>1,M=P[E];if(0<l(M,k))P[E]=k,P[R]=M,R=E;else break e}}function o(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var k=P[0],R=P.pop();if(R!==k){P[0]=R;e:for(var E=0,M=P.length,Z=M>>>1;E<Z;){var J=2*(E+1)-1,oe=P[J],ie=J+1,le=P[ie];if(0>l(oe,R))ie<M&&0>l(le,oe)?(P[E]=le,P[ie]=R,E=ie):(P[E]=oe,P[J]=R,E=J);else if(ie<M&&0>l(le,R))P[E]=le,P[ie]=R,E=ie;else break e}}return k}function l(P,k){var R=P.sortIndex-k.sortIndex;return R!==0?R:P.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var h=[],g=[],x=1,m=null,y=3,w=!1,S=!1,j=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(P){for(var k=o(g);k!==null;){if(k.callback===null)i(g);else if(k.startTime<=P)i(g),k.sortIndex=k.expirationTime,r(h,k);else break;k=o(g)}}function D(P){if(j=!1,N(P),!S)if(o(h)!==null)S=!0,W(A);else{var k=o(g);k!==null&&_(D,k.startTime-P)}}function A(P,k){S=!1,j&&(j=!1,I(Y),Y=-1),w=!0;var R=y;try{for(N(k),m=o(h);m!==null&&(!(m.expirationTime>k)||P&&!z());){var E=m.callback;if(typeof E=="function"){m.callback=null,y=m.priorityLevel;var M=E(m.expirationTime<=k);k=t.unstable_now(),typeof M=="function"?m.callback=M:m===o(h)&&i(h),N(k)}else i(h);m=o(h)}if(m!==null)var Z=!0;else{var J=o(g);J!==null&&_(D,J.startTime-k),Z=!1}return Z}finally{m=null,y=R,w=!1}}var O=!1,B=null,Y=-1,q=5,F=-1;function z(){return!(t.unstable_now()-F<q)}function H(){if(B!==null){var P=t.unstable_now();F=P;var k=!0;try{k=B(!0,P)}finally{k?X():(O=!1,B=null)}}else O=!1}var X;if(typeof T=="function")X=function(){T(H)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=H,X=function(){Q.postMessage(null)}}else X=function(){C(H,0)};function W(P){B=P,O||(O=!0,X())}function _(P,k){Y=C(function(){P(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,W(A))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return o(h)},t.unstable_next=function(P){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var R=y;y=k;try{return P()}finally{y=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var R=y;y=P;try{return k()}finally{y=R}},t.unstable_scheduleCallback=function(P,k,R){var E=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?E+R:E):R=E,P){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=R+M,P={id:x++,callback:k,priorityLevel:P,startTime:R,expirationTime:M,sortIndex:-1},R>E?(P.sortIndex=R,r(g,P),o(h)===null&&P===o(g)&&(j?(I(Y),Y=-1):j=!0,_(D,R-E))):(P.sortIndex=M,r(h,P),S||w||(S=!0,W(A))),P},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(P){var k=y;return function(){var R=y;y=k;try{return P.apply(this,arguments)}finally{y=R}}}})(Yu)),Yu}var vp;function h0(){return vp||(vp=1,Uu.exports=m0()),Uu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function g0(){if(wp)return St;wp=1;var t=Ds(),r=h0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},m={};function y(e){return h.call(m,e)?!0:h.call(x,e)?!1:g.test(e)?m[e]=!0:(x[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function j(e,n,s,a,p,v,b){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=b}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new j(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];C[n]=new j(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new j(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new j(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new j(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new j(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new j(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new j(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new j(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(I,T);C[n]=new j(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(I,T);C[n]=new j(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(I,T);C[n]=new j(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new j(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new j(e,1,!1,e.toLowerCase(),null,!0,!0)});function N(e,n,s,a){var p=C.hasOwnProperty(n)?C[n]:null;(p!==null?p.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,p,a)&&(s=null),a||p===null?y(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):p.mustUseProperty?e[p.propertyName]=s===null?p.type===3?!1:"":s:(n=p.attributeName,a=p.attributeNamespace,s===null?e.removeAttribute(n):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),O=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),P=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var R=Object.assign,E;function M(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var Z=!1;function J(e,n){if(!e||Z)return"";Z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(re){var a=re}Reflect.construct(e,[],n)}else{try{n.call()}catch(re){a=re}e.call(n.prototype)}else{try{throw Error()}catch(re){a=re}e()}}catch(re){if(re&&a&&typeof re.stack=="string"){for(var p=re.stack.split(`
`),v=a.stack.split(`
`),b=p.length-1,V=v.length-1;1<=b&&0<=V&&p[b]!==v[V];)V--;for(;1<=b&&0<=V;b--,V--)if(p[b]!==v[V]){if(b!==1||V!==1)do if(b--,V--,0>V||p[b]!==v[V]){var U=`
`+p[b].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=b&&0<=V);break}}}finally{Z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?M(e):""}function oe(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1),e;case 11:return e=J(e.type.render,!1),e;case 1:return e=J(e.type,!0),e;default:return""}}function ie(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case O:return"Portal";case q:return"Profiler";case Y:return"StrictMode";case X:return"Suspense";case $:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case F:return(e._context.displayName||"Context")+".Provider";case H:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:ie(e.type)||"Memo";case W:n=e._payload,e=e._init;try{return ie(e(n))}catch{}}return null}function le(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(n);case 8:return n===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function G(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ne(e){var n=G(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(b){a=""+b,v.call(this,b)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function pe(e){e._valueTracker||(e._valueTracker=ne(e))}function he(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=G(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function me(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ke(e,n){var s=n.checked;return R({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function be(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=se(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ee(e,n){n=n.checked,n!=null&&N(e,"checked",n,!1)}function Ae(e,n){Ee(e,n);var s=se(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?at(e,n.type,s):n.hasOwnProperty("defaultValue")&&at(e,n.type,se(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function et(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function at(e,n,s){(n!=="number"||me(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Xe=Array.isArray;function Ke(e,n,s,a){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&a&&(e[s].defaultSelected=!0)}else{for(s=""+se(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function ot(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return R({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dt(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(Xe(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:se(s)}}function Tt(e,n){var s=se(n.value),a=se(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Vt(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mn(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?st(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var er,Fs=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,p){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,p)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=er.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function hn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ql=["Webkit","ms","Moz","O"];Object.keys(tr).forEach(function(e){Ql.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),tr[n]=tr[e]})});function Hs(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||tr.hasOwnProperty(e)&&tr[e]?(""+n).trim():n+"px"}function Vs(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,p=Hs(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,p):e[s]=p}}var ql=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(e,n){if(n){if(ql[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Co(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function jo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bo=null,_n=null,Mn=null;function Bs(e){if(e=Zo(e)){if(typeof bo!="function")throw Error(o(280));var n=e.stateNode;n&&(n=vi(n),bo(e.stateNode,e.type,n))}}function Ws(e){_n?Mn?Mn.push(e):Mn=[e]:_n=e}function Us(){if(_n){var e=_n,n=Mn;if(Mn=_n=null,Bs(e),n)for(e=0;e<n.length;e++)Bs(n[e])}}function Ys(e,n){return e(n)}function Xs(){}var Eo=!1;function Gs(e,n,s){if(Eo)return e(n,s);Eo=!0;try{return Ys(e,n,s)}finally{Eo=!1,(_n!==null||Mn!==null)&&(Xs(),Us())}}function nr(e,n){var s=e.stateNode;if(s===null)return null;var a=vi(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var _o=!1;if(f)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){_o=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{_o=!1}function Zl(e,n,s,a,p,v,b,V,U){var re=Array.prototype.slice.call(arguments,3);try{n.apply(s,re)}catch(ue){this.onError(ue)}}var or=!1,Tr=null,Or=!1,Mo=null,Jl={onError:function(e){or=!0,Tr=e}};function ea(e,n,s,a,p,v,b,V,U){or=!1,Tr=null,Zl.apply(Jl,arguments)}function ta(e,n,s,a,p,v,b,V,U){if(ea.apply(this,arguments),or){if(or){var re=Tr;or=!1,Tr=null}else throw Error(o(198));Or||(Or=!0,Mo=re)}}function nn(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Po(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Do(e){if(nn(e)!==e)throw Error(o(188))}function na(e){var n=e.alternate;if(!n){if(n=nn(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var p=s.return;if(p===null)break;var v=p.alternate;if(v===null){if(a=p.return,a!==null){s=a;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===s)return Do(p),e;if(v===a)return Do(p),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=p,a=v;else{for(var b=!1,V=p.child;V;){if(V===s){b=!0,s=p,a=v;break}if(V===a){b=!0,a=p,s=v;break}V=V.sibling}if(!b){for(V=v.child;V;){if(V===s){b=!0,s=v,a=p;break}if(V===a){b=!0,a=v,s=p;break}V=V.sibling}if(!b)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Ks(e){return e=na(e),e!==null?Qs(e):null}function Qs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Qs(e);if(n!==null)return n;e=e.sibling}return null}var qs=r.unstable_scheduleCallback,Zs=r.unstable_cancelCallback,ra=r.unstable_shouldYield,Js=r.unstable_requestPaint,Be=r.unstable_now,oa=r.unstable_getCurrentPriorityLevel,To=r.unstable_ImmediatePriority,ei=r.unstable_UserBlockingPriority,Ar=r.unstable_NormalPriority,sa=r.unstable_LowPriority,ti=r.unstable_IdlePriority,sr=null,Ot=null;function ia(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(sr,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:ua,la=Math.log,aa=Math.LN2;function ua(e){return e>>>=0,e===0?32:31-(la(e)/aa|0)|0}var Lr=64,$r=4194304;function rn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,p=e.suspendedLanes,v=e.pingedLanes,b=s&268435455;if(b!==0){var V=b&~p;V!==0?a=rn(V):(v&=b,v!==0&&(a=rn(v)))}else b=s&~p,b!==0?a=rn(b):v!==0&&(a=rn(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&p)===0&&(p=a&-a,v=n&-n,p>=v||p===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-Ct(n),p=1<<s,a|=e[s],n&=~p;return a}function ni(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ca(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,v=e.pendingLanes;0<v;){var b=31-Ct(v),V=1<<b,U=p[b];U===-1?((V&s)===0||(V&a)!==0)&&(p[b]=ni(V,n)):U<=n&&(e.expiredLanes|=V),v&=~V}}function Oo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rr(){var e=Lr;return Lr<<=1,(Lr&4194240)===0&&(Lr=64),e}function Ao(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ir(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Ct(n),e[n]=s}function ri(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var p=31-Ct(s),v=1<<p;n[p]=0,a[p]=-1,e[p]=-1,s&=~v}}function da(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-Ct(s),p=1<<a;p&n|e[a]&n&&(e[a]|=n),s&=~p}}var Te=0;function Uc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Yc,fa,Xc,Gc,Kc,pa=!1,oi=[],Pn=null,Dn=null,Tn=null,Lo=new Map,$o=new Map,On=[],Tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qc(e,n){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Lo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$o.delete(n.pointerId)}}function zo(e,n,s,a,p,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[p]},n!==null&&(n=Zo(n),n!==null&&fa(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Og(e,n,s,a,p){switch(n){case"focusin":return Pn=zo(Pn,e,n,s,a,p),!0;case"dragenter":return Dn=zo(Dn,e,n,s,a,p),!0;case"mouseover":return Tn=zo(Tn,e,n,s,a,p),!0;case"pointerover":var v=p.pointerId;return Lo.set(v,zo(Lo.get(v)||null,e,n,s,a,p)),!0;case"gotpointercapture":return v=p.pointerId,$o.set(v,zo($o.get(v)||null,e,n,s,a,p)),!0}return!1}function qc(e){var n=lr(e.target);if(n!==null){var s=nn(n);if(s!==null){if(n=s.tag,n===13){if(n=Po(s),n!==null){e.blockedOn=n,Kc(e.priority,function(){Xc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function si(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=ha(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);Io=a,s.target.dispatchEvent(a),Io=null}else return n=Zo(s),n!==null&&fa(n),e.blockedOn=s,!1;n.shift()}return!0}function Zc(e,n,s){si(e)&&s.delete(n)}function Ag(){pa=!1,Pn!==null&&si(Pn)&&(Pn=null),Dn!==null&&si(Dn)&&(Dn=null),Tn!==null&&si(Tn)&&(Tn=null),Lo.forEach(Zc),$o.forEach(Zc)}function Ro(e,n){e.blockedOn===n&&(e.blockedOn=null,pa||(pa=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ag)))}function Fo(e){function n(p){return Ro(p,e)}if(0<oi.length){Ro(oi[0],e);for(var s=1;s<oi.length;s++){var a=oi[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Pn!==null&&Ro(Pn,e),Dn!==null&&Ro(Dn,e),Tn!==null&&Ro(Tn,e),Lo.forEach(n),$o.forEach(n),s=0;s<On.length;s++)a=On[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<On.length&&(s=On[0],s.blockedOn===null);)qc(s),s.blockedOn===null&&On.shift()}var Fr=D.ReactCurrentBatchConfig,ii=!0;function Lg(e,n,s,a){var p=Te,v=Fr.transition;Fr.transition=null;try{Te=1,ma(e,n,s,a)}finally{Te=p,Fr.transition=v}}function $g(e,n,s,a){var p=Te,v=Fr.transition;Fr.transition=null;try{Te=4,ma(e,n,s,a)}finally{Te=p,Fr.transition=v}}function ma(e,n,s,a){if(ii){var p=ha(e,n,s,a);if(p===null)Da(e,n,a,li,s),Qc(e,a);else if(Og(p,e,n,s,a))a.stopPropagation();else if(Qc(e,a),n&4&&-1<Tg.indexOf(e)){for(;p!==null;){var v=Zo(p);if(v!==null&&Yc(v),v=ha(e,n,s,a),v===null&&Da(e,n,a,li,s),v===p)break;p=v}p!==null&&a.stopPropagation()}else Da(e,n,a,null,s)}}var li=null;function ha(e,n,s,a){if(li=null,e=jo(a),e=lr(e),e!==null)if(n=nn(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Po(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return li=e,null}function Jc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oa()){case To:return 1;case ei:return 4;case Ar:case sa:return 16;case ti:return 536870912;default:return 16}default:return 16}}var An=null,ga=null,ai=null;function ed(){if(ai)return ai;var e,n=ga,s=n.length,a,p="value"in An?An.value:An.textContent,v=p.length;for(e=0;e<s&&n[e]===p[e];e++);var b=s-e;for(a=1;a<=b&&n[s-a]===p[v-a];a++);return ai=p.slice(e,1<a?1-a:void 0)}function ui(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function td(){return!1}function It(e){function n(s,a,p,v,b){this._reactName=s,this._targetInst=p,this.type=a,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(s=e[V],this[V]=s?s(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ci:td,this.isPropagationStopped=td,this}return R(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),n}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=It(Hr),Ho=R({},Hr,{view:0,detail:0}),zg=It(Ho),ya,va,Vo,di=R({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vo&&(Vo&&e.type==="mousemove"?(ya=e.screenX-Vo.screenX,va=e.screenY-Vo.screenY):va=ya=0,Vo=e),ya)},movementY:function(e){return"movementY"in e?e.movementY:va}}),nd=It(di),Rg=R({},di,{dataTransfer:0}),Fg=It(Rg),Hg=R({},Ho,{relatedTarget:0}),wa=It(Hg),Vg=R({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Bg=It(Vg),Wg=R({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ug=It(Wg),Yg=R({},Hr,{data:0}),rd=It(Yg),Xg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Kg[e])?!!n[e]:!1}function Sa(){return Qg}var qg=R({},Ho,{key:function(e){if(e.key){var n=Xg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sa,charCode:function(e){return e.type==="keypress"?ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zg=It(qg),Jg=R({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),od=It(Jg),ex=R({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sa}),tx=It(ex),nx=R({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rx=It(nx),ox=R({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sx=It(ox),ix=[9,13,27,32],Na=f&&"CompositionEvent"in window,Bo=null;f&&"documentMode"in document&&(Bo=document.documentMode);var lx=f&&"TextEvent"in window&&!Bo,sd=f&&(!Na||Bo&&8<Bo&&11>=Bo),id=" ",ld=!1;function ad(e,n){switch(e){case"keyup":return ix.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function ax(e,n){switch(e){case"compositionend":return ud(n);case"keypress":return n.which!==32?null:(ld=!0,id);case"textInput":return e=n.data,e===id&&ld?null:e;default:return null}}function ux(e,n){if(Vr)return e==="compositionend"||!Na&&ad(e,n)?(e=ed(),ai=ga=An=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return sd&&n.locale!=="ko"?null:n.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!cx[e.type]:n==="textarea"}function dd(e,n,s,a){Ws(a),n=gi(n,"onChange"),0<n.length&&(s=new xa("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Wo=null,Uo=null;function dx(e){_d(e,0)}function fi(e){var n=Xr(e);if(he(n))return e}function fx(e,n){if(e==="change")return n}var fd=!1;if(f){var ka;if(f){var Ca="oninput"in document;if(!Ca){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),Ca=typeof pd.oninput=="function"}ka=Ca}else ka=!1;fd=ka&&(!document.documentMode||9<document.documentMode)}function md(){Wo&&(Wo.detachEvent("onpropertychange",hd),Uo=Wo=null)}function hd(e){if(e.propertyName==="value"&&fi(Uo)){var n=[];dd(n,Uo,e,jo(e)),Gs(dx,n)}}function px(e,n,s){e==="focusin"?(md(),Wo=n,Uo=s,Wo.attachEvent("onpropertychange",hd)):e==="focusout"&&md()}function mx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fi(Uo)}function hx(e,n){if(e==="click")return fi(n)}function gx(e,n){if(e==="input"||e==="change")return fi(n)}function xx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Bt=typeof Object.is=="function"?Object.is:xx;function Yo(e,n){if(Bt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var p=s[a];if(!h.call(n,p)||!Bt(e[p],n[p]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xd(e,n){var s=gd(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=gd(s)}}function yd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?yd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function vd(){for(var e=window,n=me();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=me(e.document)}return n}function Ia(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function yx(e){var n=vd(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&yd(s.ownerDocument.documentElement,s)){if(a!==null&&Ia(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var p=s.textContent.length,v=Math.min(a.start,p);a=a.end===void 0?v:Math.min(a.end,p),!e.extend&&v>a&&(p=a,a=v,v=p),p=xd(s,v);var b=xd(s,a);p&&b&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==b.node||e.focusOffset!==b.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(b.node,b.offset)):(n.setEnd(b.node,b.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vx=f&&"documentMode"in document&&11>=document.documentMode,Br=null,ja=null,Xo=null,ba=!1;function wd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ba||Br==null||Br!==me(a)||(a=Br,"selectionStart"in a&&Ia(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Xo&&Yo(Xo,a)||(Xo=a,a=gi(ja,"onSelect"),0<a.length&&(n=new xa("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Br)))}function pi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Wr={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionend:pi("Transition","TransitionEnd")},Ea={},Sd={};f&&(Sd=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function mi(e){if(Ea[e])return Ea[e];if(!Wr[e])return e;var n=Wr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Sd)return Ea[e]=n[s];return e}var Nd=mi("animationend"),kd=mi("animationiteration"),Cd=mi("animationstart"),Id=mi("transitionend"),jd=new Map,bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(e,n){jd.set(e,n),c(n,[e])}for(var _a=0;_a<bd.length;_a++){var Ma=bd[_a],wx=Ma.toLowerCase(),Sx=Ma[0].toUpperCase()+Ma.slice(1);Ln(wx,"on"+Sx)}Ln(Nd,"onAnimationEnd"),Ln(kd,"onAnimationIteration"),Ln(Cd,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(Id,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function Ed(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,ta(a,n,void 0,e),e.currentTarget=null}function _d(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],p=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var b=a.length-1;0<=b;b--){var V=a[b],U=V.instance,re=V.currentTarget;if(V=V.listener,U!==v&&p.isPropagationStopped())break e;Ed(p,V,re),v=U}else for(b=0;b<a.length;b++){if(V=a[b],U=V.instance,re=V.currentTarget,V=V.listener,U!==v&&p.isPropagationStopped())break e;Ed(p,V,re),v=U}}}if(Or)throw e=Mo,Or=!1,Mo=null,e}function ze(e,n){var s=n[za];s===void 0&&(s=n[za]=new Set);var a=e+"__bubble";s.has(a)||(Md(n,e,2,!1),s.add(a))}function Pa(e,n,s){var a=0;n&&(a|=4),Md(s,e,a,n)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[hi]){e[hi]=!0,i.forEach(function(s){s!=="selectionchange"&&(Nx.has(s)||Pa(s,!1,e),Pa(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[hi]||(n[hi]=!0,Pa("selectionchange",!1,n))}}function Md(e,n,s,a){switch(Jc(n)){case 1:var p=Lg;break;case 4:p=$g;break;default:p=ma}s=p.bind(null,n,s,e),p=void 0,!_o||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function Da(e,n,s,a,p){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var b=a.tag;if(b===3||b===4){var V=a.stateNode.containerInfo;if(V===p||V.nodeType===8&&V.parentNode===p)break;if(b===4)for(b=a.return;b!==null;){var U=b.tag;if((U===3||U===4)&&(U=b.stateNode.containerInfo,U===p||U.nodeType===8&&U.parentNode===p))return;b=b.return}for(;V!==null;){if(b=lr(V),b===null)return;if(U=b.tag,U===5||U===6){a=v=b;continue e}V=V.parentNode}}a=a.return}Gs(function(){var re=v,ue=jo(s),de=[];e:{var ae=jd.get(e);if(ae!==void 0){var ge=xa,ve=e;switch(e){case"keypress":if(ui(s)===0)break e;case"keydown":case"keyup":ge=Zg;break;case"focusin":ve="focus",ge=wa;break;case"focusout":ve="blur",ge=wa;break;case"beforeblur":case"afterblur":ge=wa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=tx;break;case Nd:case kd:case Cd:ge=Bg;break;case Id:ge=rx;break;case"scroll":ge=zg;break;case"wheel":ge=sx;break;case"copy":case"cut":case"paste":ge=Ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=od}var we=(n&4)!==0,Ge=!we&&e==="scroll",ee=we?ae!==null?ae+"Capture":null:ae;we=[];for(var K=re,te;K!==null;){te=K;var fe=te.stateNode;if(te.tag===5&&fe!==null&&(te=fe,ee!==null&&(fe=nr(K,ee),fe!=null&&we.push(Qo(K,fe,te)))),Ge)break;K=K.return}0<we.length&&(ae=new ge(ae,ve,null,s,ue),de.push({event:ae,listeners:we}))}}if((n&7)===0){e:{if(ae=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",ae&&s!==Io&&(ve=s.relatedTarget||s.fromElement)&&(lr(ve)||ve[gn]))break e;if((ge||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,ge?(ve=s.relatedTarget||s.toElement,ge=re,ve=ve?lr(ve):null,ve!==null&&(Ge=nn(ve),ve!==Ge||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(ge=null,ve=re),ge!==ve)){if(we=nd,fe="onMouseLeave",ee="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&(we=od,fe="onPointerLeave",ee="onPointerEnter",K="pointer"),Ge=ge==null?ae:Xr(ge),te=ve==null?ae:Xr(ve),ae=new we(fe,K+"leave",ge,s,ue),ae.target=Ge,ae.relatedTarget=te,fe=null,lr(ue)===re&&(we=new we(ee,K+"enter",ve,s,ue),we.target=te,we.relatedTarget=Ge,fe=we),Ge=fe,ge&&ve)t:{for(we=ge,ee=ve,K=0,te=we;te;te=Ur(te))K++;for(te=0,fe=ee;fe;fe=Ur(fe))te++;for(;0<K-te;)we=Ur(we),K--;for(;0<te-K;)ee=Ur(ee),te--;for(;K--;){if(we===ee||ee!==null&&we===ee.alternate)break t;we=Ur(we),ee=Ur(ee)}we=null}else we=null;ge!==null&&Pd(de,ae,ge,we,!1),ve!==null&&Ge!==null&&Pd(de,Ge,ve,we,!0)}}e:{if(ae=re?Xr(re):window,ge=ae.nodeName&&ae.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ae.type==="file")var Se=fx;else if(cd(ae))if(fd)Se=gx;else{Se=mx;var Ce=px}else(ge=ae.nodeName)&&ge.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=hx);if(Se&&(Se=Se(e,re))){dd(de,Se,s,ue);break e}Ce&&Ce(e,ae,re),e==="focusout"&&(Ce=ae._wrapperState)&&Ce.controlled&&ae.type==="number"&&at(ae,"number",ae.value)}switch(Ce=re?Xr(re):window,e){case"focusin":(cd(Ce)||Ce.contentEditable==="true")&&(Br=Ce,ja=re,Xo=null);break;case"focusout":Xo=ja=Br=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,wd(de,s,ue);break;case"selectionchange":if(vx)break;case"keydown":case"keyup":wd(de,s,ue)}var Ie;if(Na)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Vr?ad(e,s)&&(je="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(je="onCompositionStart");je&&(sd&&s.locale!=="ko"&&(Vr||je!=="onCompositionStart"?je==="onCompositionEnd"&&Vr&&(Ie=ed()):(An=ue,ga="value"in An?An.value:An.textContent,Vr=!0)),Ce=gi(re,je),0<Ce.length&&(je=new rd(je,e,null,s,ue),de.push({event:je,listeners:Ce}),Ie?je.data=Ie:(Ie=ud(s),Ie!==null&&(je.data=Ie)))),(Ie=lx?ax(e,s):ux(e,s))&&(re=gi(re,"onBeforeInput"),0<re.length&&(ue=new rd("onBeforeInput","beforeinput",null,s,ue),de.push({event:ue,listeners:re}),ue.data=Ie))}_d(de,n)})}function Qo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function gi(e,n){for(var s=n+"Capture",a=[];e!==null;){var p=e,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=nr(e,s),v!=null&&a.unshift(Qo(e,v,p)),v=nr(e,n),v!=null&&a.push(Qo(e,v,p))),e=e.return}return a}function Ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pd(e,n,s,a,p){for(var v=n._reactName,b=[];s!==null&&s!==a;){var V=s,U=V.alternate,re=V.stateNode;if(U!==null&&U===a)break;V.tag===5&&re!==null&&(V=re,p?(U=nr(s,v),U!=null&&b.unshift(Qo(s,U,V))):p||(U=nr(s,v),U!=null&&b.push(Qo(s,U,V)))),s=s.return}b.length!==0&&e.push({event:n,listeners:b})}var kx=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function Dd(e){return(typeof e=="string"?e:""+e).replace(kx,`
`).replace(Cx,"")}function xi(e,n,s){if(n=Dd(n),Dd(e)!==n&&s)throw Error(o(425))}function yi(){}var Ta=null,Oa=null;function Aa(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var La=typeof setTimeout=="function"?setTimeout:void 0,Ix=typeof clearTimeout=="function"?clearTimeout:void 0,Td=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Td<"u"?function(e){return Td.resolve(null).then(e).catch(bx)}:La;function bx(e){setTimeout(function(){throw e})}function $a(e,n){var s=n,a=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(a===0){e.removeChild(p),Fo(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=p}while(s);Fo(n)}function $n(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Od(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),on="__reactFiber$"+Yr,qo="__reactProps$"+Yr,gn="__reactContainer$"+Yr,za="__reactEvents$"+Yr,Ex="__reactListeners$"+Yr,_x="__reactHandles$"+Yr;function lr(e){var n=e[on];if(n)return n;for(var s=e.parentNode;s;){if(n=s[gn]||s[on]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Od(e);e!==null;){if(s=e[on])return s;e=Od(e)}return n}e=s,s=e.parentNode}return null}function Zo(e){return e=e[on]||e[gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function vi(e){return e[qo]||null}var Ra=[],Gr=-1;function zn(e){return{current:e}}function Re(e){0>Gr||(e.current=Ra[Gr],Ra[Gr]=null,Gr--)}function Le(e,n){Gr++,Ra[Gr]=e.current,e.current=n}var Rn={},ut=zn(Rn),gt=zn(!1),ar=Rn;function Kr(e,n){var s=e.type.contextTypes;if(!s)return Rn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in s)p[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=p),p}function xt(e){return e=e.childContextTypes,e!=null}function wi(){Re(gt),Re(ut)}function Ad(e,n,s){if(ut.current!==Rn)throw Error(o(168));Le(ut,n),Le(gt,s)}function Ld(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var p in a)if(!(p in n))throw Error(o(108,le(e)||"Unknown",p));return R({},s,a)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rn,ar=ut.current,Le(ut,e),Le(gt,gt.current),!0}function $d(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=Ld(e,n,ar),a.__reactInternalMemoizedMergedChildContext=e,Re(gt),Re(ut),Le(ut,e)):Re(gt),Le(gt,s)}var xn=null,Ni=!1,Fa=!1;function zd(e){xn===null?xn=[e]:xn.push(e)}function Mx(e){Ni=!0,zd(e)}function Fn(){if(!Fa&&xn!==null){Fa=!0;var e=0,n=Te;try{var s=xn;for(Te=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}xn=null,Ni=!1}catch(p){throw xn!==null&&(xn=xn.slice(e+1)),qs(To,Fn),p}finally{Te=n,Fa=!1}}return null}var Qr=[],qr=0,ki=null,Ci=0,At=[],Lt=0,ur=null,yn=1,vn="";function cr(e,n){Qr[qr++]=Ci,Qr[qr++]=ki,ki=e,Ci=n}function Rd(e,n,s){At[Lt++]=yn,At[Lt++]=vn,At[Lt++]=ur,ur=e;var a=yn;e=vn;var p=32-Ct(a)-1;a&=~(1<<p),s+=1;var v=32-Ct(n)+p;if(30<v){var b=p-p%5;v=(a&(1<<b)-1).toString(32),a>>=b,p-=b,yn=1<<32-Ct(n)+p|s<<p|a,vn=v+e}else yn=1<<v|s<<p|a,vn=e}function Ha(e){e.return!==null&&(cr(e,1),Rd(e,1,0))}function Va(e){for(;e===ki;)ki=Qr[--qr],Qr[qr]=null,Ci=Qr[--qr],Qr[qr]=null;for(;e===ur;)ur=At[--Lt],At[Lt]=null,vn=At[--Lt],At[Lt]=null,yn=At[--Lt],At[Lt]=null}var jt=null,bt=null,Fe=!1,Wt=null;function Fd(e,n){var s=Ft(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Hd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,jt=e,bt=$n(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,jt=e,bt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=ur!==null?{id:yn,overflow:vn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Ft(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,jt=e,bt=null,!0):!1;default:return!1}}function Ba(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wa(e){if(Fe){var n=bt;if(n){var s=n;if(!Hd(e,n)){if(Ba(e))throw Error(o(418));n=$n(s.nextSibling);var a=jt;n&&Hd(e,n)?Fd(a,s):(e.flags=e.flags&-4097|2,Fe=!1,jt=e)}}else{if(Ba(e))throw Error(o(418));e.flags=e.flags&-4097|2,Fe=!1,jt=e}}}function Vd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function Ii(e){if(e!==jt)return!1;if(!Fe)return Vd(e),Fe=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Aa(e.type,e.memoizedProps)),n&&(n=bt)){if(Ba(e))throw Bd(),Error(o(418));for(;n;)Fd(e,n),n=$n(n.nextSibling)}if(Vd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){bt=$n(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}bt=null}}else bt=jt?$n(e.stateNode.nextSibling):null;return!0}function Bd(){for(var e=bt;e;)e=$n(e.nextSibling)}function Zr(){bt=jt=null,Fe=!1}function Ua(e){Wt===null?Wt=[e]:Wt.push(e)}var Px=D.ReactCurrentBatchConfig;function Jo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var p=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(b){var V=p.refs;b===null?delete V[v]:V[v]=b},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function ji(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Wd(e){var n=e._init;return n(e._payload)}function Ud(e){function n(ee,K){if(e){var te=ee.deletions;te===null?(ee.deletions=[K],ee.flags|=16):te.push(K)}}function s(ee,K){if(!e)return null;for(;K!==null;)n(ee,K),K=K.sibling;return null}function a(ee,K){for(ee=new Map;K!==null;)K.key!==null?ee.set(K.key,K):ee.set(K.index,K),K=K.sibling;return ee}function p(ee,K){return ee=Gn(ee,K),ee.index=0,ee.sibling=null,ee}function v(ee,K,te){return ee.index=te,e?(te=ee.alternate,te!==null?(te=te.index,te<K?(ee.flags|=2,K):te):(ee.flags|=2,K)):(ee.flags|=1048576,K)}function b(ee){return e&&ee.alternate===null&&(ee.flags|=2),ee}function V(ee,K,te,fe){return K===null||K.tag!==6?(K=Lu(te,ee.mode,fe),K.return=ee,K):(K=p(K,te),K.return=ee,K)}function U(ee,K,te,fe){var Se=te.type;return Se===B?ue(ee,K,te.props.children,fe,te.key):K!==null&&(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===W&&Wd(Se)===K.type)?(fe=p(K,te.props),fe.ref=Jo(ee,K,te),fe.return=ee,fe):(fe=Qi(te.type,te.key,te.props,null,ee.mode,fe),fe.ref=Jo(ee,K,te),fe.return=ee,fe)}function re(ee,K,te,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=$u(te,ee.mode,fe),K.return=ee,K):(K=p(K,te.children||[]),K.return=ee,K)}function ue(ee,K,te,fe,Se){return K===null||K.tag!==7?(K=yr(te,ee.mode,fe,Se),K.return=ee,K):(K=p(K,te),K.return=ee,K)}function de(ee,K,te){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Lu(""+K,ee.mode,te),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return te=Qi(K.type,K.key,K.props,null,ee.mode,te),te.ref=Jo(ee,null,K),te.return=ee,te;case O:return K=$u(K,ee.mode,te),K.return=ee,K;case W:var fe=K._init;return de(ee,fe(K._payload),te)}if(Xe(K)||k(K))return K=yr(K,ee.mode,te,null),K.return=ee,K;ji(ee,K)}return null}function ae(ee,K,te,fe){var Se=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Se!==null?null:V(ee,K,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return te.key===Se?U(ee,K,te,fe):null;case O:return te.key===Se?re(ee,K,te,fe):null;case W:return Se=te._init,ae(ee,K,Se(te._payload),fe)}if(Xe(te)||k(te))return Se!==null?null:ue(ee,K,te,fe,null);ji(ee,te)}return null}function ge(ee,K,te,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ee=ee.get(te)||null,V(K,ee,""+fe,Se);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return ee=ee.get(fe.key===null?te:fe.key)||null,U(K,ee,fe,Se);case O:return ee=ee.get(fe.key===null?te:fe.key)||null,re(K,ee,fe,Se);case W:var Ce=fe._init;return ge(ee,K,te,Ce(fe._payload),Se)}if(Xe(fe)||k(fe))return ee=ee.get(te)||null,ue(K,ee,fe,Se,null);ji(K,fe)}return null}function ve(ee,K,te,fe){for(var Se=null,Ce=null,Ie=K,je=K=0,rt=null;Ie!==null&&je<te.length;je++){Ie.index>je?(rt=Ie,Ie=null):rt=Ie.sibling;var De=ae(ee,Ie,te[je],fe);if(De===null){Ie===null&&(Ie=rt);break}e&&Ie&&De.alternate===null&&n(ee,Ie),K=v(De,K,je),Ce===null?Se=De:Ce.sibling=De,Ce=De,Ie=rt}if(je===te.length)return s(ee,Ie),Fe&&cr(ee,je),Se;if(Ie===null){for(;je<te.length;je++)Ie=de(ee,te[je],fe),Ie!==null&&(K=v(Ie,K,je),Ce===null?Se=Ie:Ce.sibling=Ie,Ce=Ie);return Fe&&cr(ee,je),Se}for(Ie=a(ee,Ie);je<te.length;je++)rt=ge(Ie,ee,je,te[je],fe),rt!==null&&(e&&rt.alternate!==null&&Ie.delete(rt.key===null?je:rt.key),K=v(rt,K,je),Ce===null?Se=rt:Ce.sibling=rt,Ce=rt);return e&&Ie.forEach(function(Kn){return n(ee,Kn)}),Fe&&cr(ee,je),Se}function we(ee,K,te,fe){var Se=k(te);if(typeof Se!="function")throw Error(o(150));if(te=Se.call(te),te==null)throw Error(o(151));for(var Ce=Se=null,Ie=K,je=K=0,rt=null,De=te.next();Ie!==null&&!De.done;je++,De=te.next()){Ie.index>je?(rt=Ie,Ie=null):rt=Ie.sibling;var Kn=ae(ee,Ie,De.value,fe);if(Kn===null){Ie===null&&(Ie=rt);break}e&&Ie&&Kn.alternate===null&&n(ee,Ie),K=v(Kn,K,je),Ce===null?Se=Kn:Ce.sibling=Kn,Ce=Kn,Ie=rt}if(De.done)return s(ee,Ie),Fe&&cr(ee,je),Se;if(Ie===null){for(;!De.done;je++,De=te.next())De=de(ee,De.value,fe),De!==null&&(K=v(De,K,je),Ce===null?Se=De:Ce.sibling=De,Ce=De);return Fe&&cr(ee,je),Se}for(Ie=a(ee,Ie);!De.done;je++,De=te.next())De=ge(Ie,ee,je,De.value,fe),De!==null&&(e&&De.alternate!==null&&Ie.delete(De.key===null?je:De.key),K=v(De,K,je),Ce===null?Se=De:Ce.sibling=De,Ce=De);return e&&Ie.forEach(function(c0){return n(ee,c0)}),Fe&&cr(ee,je),Se}function Ge(ee,K,te,fe){if(typeof te=="object"&&te!==null&&te.type===B&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case A:e:{for(var Se=te.key,Ce=K;Ce!==null;){if(Ce.key===Se){if(Se=te.type,Se===B){if(Ce.tag===7){s(ee,Ce.sibling),K=p(Ce,te.props.children),K.return=ee,ee=K;break e}}else if(Ce.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===W&&Wd(Se)===Ce.type){s(ee,Ce.sibling),K=p(Ce,te.props),K.ref=Jo(ee,Ce,te),K.return=ee,ee=K;break e}s(ee,Ce);break}else n(ee,Ce);Ce=Ce.sibling}te.type===B?(K=yr(te.props.children,ee.mode,fe,te.key),K.return=ee,ee=K):(fe=Qi(te.type,te.key,te.props,null,ee.mode,fe),fe.ref=Jo(ee,K,te),fe.return=ee,ee=fe)}return b(ee);case O:e:{for(Ce=te.key;K!==null;){if(K.key===Ce)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){s(ee,K.sibling),K=p(K,te.children||[]),K.return=ee,ee=K;break e}else{s(ee,K);break}else n(ee,K);K=K.sibling}K=$u(te,ee.mode,fe),K.return=ee,ee=K}return b(ee);case W:return Ce=te._init,Ge(ee,K,Ce(te._payload),fe)}if(Xe(te))return ve(ee,K,te,fe);if(k(te))return we(ee,K,te,fe);ji(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,K!==null&&K.tag===6?(s(ee,K.sibling),K=p(K,te),K.return=ee,ee=K):(s(ee,K),K=Lu(te,ee.mode,fe),K.return=ee,ee=K),b(ee)):s(ee,K)}return Ge}var Jr=Ud(!0),Yd=Ud(!1),bi=zn(null),Ei=null,eo=null,Ya=null;function Xa(){Ya=eo=Ei=null}function Ga(e){var n=bi.current;Re(bi),e._currentValue=n}function Ka(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function to(e,n){Ei=e,Ya=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(yt=!0),e.firstContext=null)}function $t(e){var n=e._currentValue;if(Ya!==e)if(e={context:e,memoizedValue:n,next:null},eo===null){if(Ei===null)throw Error(o(308));eo=e,Ei.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return n}var dr=null;function Qa(e){dr===null?dr=[e]:dr.push(e)}function Xd(e,n,s,a){var p=n.interleaved;return p===null?(s.next=s,Qa(n)):(s.next=p.next,p.next=s),n.interleaved=s,wn(e,a)}function wn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Hn=!1;function qa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Vn(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Pe&2)!==0){var p=a.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),a.pending=n,wn(e,s)}return p=a.interleaved,p===null?(n.next=n,Qa(a)):(n.next=p.next,p.next=n),a.interleaved=n,wn(e,s)}function _i(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,da(e,s)}}function Kd(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var p=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var b={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?p=v=b:v=v.next=b,s=s.next}while(s!==null);v===null?p=v=n:v=v.next=n}else p=v=n;s={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Mi(e,n,s,a){var p=e.updateQueue;Hn=!1;var v=p.firstBaseUpdate,b=p.lastBaseUpdate,V=p.shared.pending;if(V!==null){p.shared.pending=null;var U=V,re=U.next;U.next=null,b===null?v=re:b.next=re,b=U;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,V=ue.lastBaseUpdate,V!==b&&(V===null?ue.firstBaseUpdate=re:V.next=re,ue.lastBaseUpdate=U))}if(v!==null){var de=p.baseState;b=0,ue=re=U=null,V=v;do{var ae=V.lane,ge=V.eventTime;if((a&ae)===ae){ue!==null&&(ue=ue.next={eventTime:ge,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var ve=e,we=V;switch(ae=n,ge=s,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){de=ve.call(ge,de,ae);break e}de=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,ae=typeof ve=="function"?ve.call(ge,de,ae):ve,ae==null)break e;de=R({},de,ae);break e;case 2:Hn=!0}}V.callback!==null&&V.lane!==0&&(e.flags|=64,ae=p.effects,ae===null?p.effects=[V]:ae.push(V))}else ge={eventTime:ge,lane:ae,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ue===null?(re=ue=ge,U=de):ue=ue.next=ge,b|=ae;if(V=V.next,V===null){if(V=p.shared.pending,V===null)break;ae=V,V=ae.next,ae.next=null,p.lastBaseUpdate=ae,p.shared.pending=null}}while(!0);if(ue===null&&(U=de),p.baseState=U,p.firstBaseUpdate=re,p.lastBaseUpdate=ue,n=p.shared.interleaved,n!==null){p=n;do b|=p.lane,p=p.next;while(p!==n)}else v===null&&(p.shared.lanes=0);mr|=b,e.lanes=b,e.memoizedState=de}}function Qd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],p=a.callback;if(p!==null){if(a.callback=null,a=s,typeof p!="function")throw Error(o(191,p));p.call(a)}}}var es={},sn=zn(es),ts=zn(es),ns=zn(es);function fr(e){if(e===es)throw Error(o(174));return e}function Za(e,n){switch(Le(ns,n),Le(ts,e),Le(sn,es),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:mn(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=mn(n,e)}Re(sn),Le(sn,n)}function no(){Re(sn),Re(ts),Re(ns)}function qd(e){fr(ns.current);var n=fr(sn.current),s=mn(n,e.type);n!==s&&(Le(ts,e),Le(sn,s))}function Ja(e){ts.current===e&&(Re(sn),Re(ts))}var We=zn(0);function Pi(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var eu=[];function tu(){for(var e=0;e<eu.length;e++)eu[e]._workInProgressVersionPrimary=null;eu.length=0}var Di=D.ReactCurrentDispatcher,nu=D.ReactCurrentBatchConfig,pr=0,Ue=null,Ze=null,tt=null,Ti=!1,rs=!1,os=0,Dx=0;function ct(){throw Error(o(321))}function ru(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Bt(e[s],n[s]))return!1;return!0}function ou(e,n,s,a,p,v){if(pr=v,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Di.current=e===null||e.memoizedState===null?Lx:$x,e=s(a,p),rs){v=0;do{if(rs=!1,os=0,25<=v)throw Error(o(301));v+=1,tt=Ze=null,n.updateQueue=null,Di.current=zx,e=s(a,p)}while(rs)}if(Di.current=Li,n=Ze!==null&&Ze.next!==null,pr=0,tt=Ze=Ue=null,Ti=!1,n)throw Error(o(300));return e}function su(){var e=os!==0;return os=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ue.memoizedState=tt=e:tt=tt.next=e,tt}function zt(){if(Ze===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var n=tt===null?Ue.memoizedState:tt.next;if(n!==null)tt=n,Ze=e;else{if(e===null)throw Error(o(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},tt===null?Ue.memoizedState=tt=e:tt=tt.next=e}return tt}function ss(e,n){return typeof n=="function"?n(e):n}function iu(e){var n=zt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Ze,p=a.baseQueue,v=s.pending;if(v!==null){if(p!==null){var b=p.next;p.next=v.next,v.next=b}a.baseQueue=p=v,s.pending=null}if(p!==null){v=p.next,a=a.baseState;var V=b=null,U=null,re=v;do{var ue=re.lane;if((pr&ue)===ue)U!==null&&(U=U.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),a=re.hasEagerState?re.eagerState:e(a,re.action);else{var de={lane:ue,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};U===null?(V=U=de,b=a):U=U.next=de,Ue.lanes|=ue,mr|=ue}re=re.next}while(re!==null&&re!==v);U===null?b=a:U.next=V,Bt(a,n.memoizedState)||(yt=!0),n.memoizedState=a,n.baseState=b,n.baseQueue=U,s.lastRenderedState=a}if(e=s.interleaved,e!==null){p=e;do v=p.lane,Ue.lanes|=v,mr|=v,p=p.next;while(p!==e)}else p===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function lu(e){var n=zt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,p=s.pending,v=n.memoizedState;if(p!==null){s.pending=null;var b=p=p.next;do v=e(v,b.action),b=b.next;while(b!==p);Bt(v,n.memoizedState)||(yt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function Zd(){}function Jd(e,n){var s=Ue,a=zt(),p=n(),v=!Bt(a.memoizedState,p);if(v&&(a.memoizedState=p,yt=!0),a=a.queue,au(nf.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||tt!==null&&tt.memoizedState.tag&1){if(s.flags|=2048,is(9,tf.bind(null,s,a,p,n),void 0,null),nt===null)throw Error(o(349));(pr&30)!==0||ef(s,n,p)}return p}function ef(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ue.updateQueue,n===null?(n={lastEffect:null,stores:null},Ue.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function tf(e,n,s,a){n.value=s,n.getSnapshot=a,rf(n)&&of(e)}function nf(e,n,s){return s(function(){rf(n)&&of(e)})}function rf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Bt(e,s)}catch{return!0}}function of(e){var n=wn(e,1);n!==null&&Gt(n,e,1,-1)}function sf(e){var n=ln();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},n.queue=e,e=e.dispatch=Ax.bind(null,Ue,e),[n.memoizedState,e]}function is(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Ue.updateQueue,n===null?(n={lastEffect:null,stores:null},Ue.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function lf(){return zt().memoizedState}function Oi(e,n,s,a){var p=ln();Ue.flags|=e,p.memoizedState=is(1|n,s,void 0,a===void 0?null:a)}function Ai(e,n,s,a){var p=zt();a=a===void 0?null:a;var v=void 0;if(Ze!==null){var b=Ze.memoizedState;if(v=b.destroy,a!==null&&ru(a,b.deps)){p.memoizedState=is(n,s,v,a);return}}Ue.flags|=e,p.memoizedState=is(1|n,s,v,a)}function af(e,n){return Oi(8390656,8,e,n)}function au(e,n){return Ai(2048,8,e,n)}function uf(e,n){return Ai(4,2,e,n)}function cf(e,n){return Ai(4,4,e,n)}function df(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ff(e,n,s){return s=s!=null?s.concat([e]):null,Ai(4,4,df.bind(null,n,e),s)}function uu(){}function pf(e,n){var s=zt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&ru(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function mf(e,n){var s=zt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&ru(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function hf(e,n,s){return(pr&21)===0?(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=s):(Bt(s,n)||(s=Rr(),Ue.lanes|=s,mr|=s,e.baseState=!0),n)}function Tx(e,n){var s=Te;Te=s!==0&&4>s?s:4,e(!0);var a=nu.transition;nu.transition={};try{e(!1),n()}finally{Te=s,nu.transition=a}}function gf(){return zt().memoizedState}function Ox(e,n,s){var a=Yn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},xf(e))yf(n,s);else if(s=Xd(e,n,s,a),s!==null){var p=mt();Gt(s,e,a,p),vf(s,n,a)}}function Ax(e,n,s){var a=Yn(e),p={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(xf(e))yf(n,p);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var b=n.lastRenderedState,V=v(b,s);if(p.hasEagerState=!0,p.eagerState=V,Bt(V,b)){var U=n.interleaved;U===null?(p.next=p,Qa(n)):(p.next=U.next,U.next=p),n.interleaved=p;return}}catch{}finally{}s=Xd(e,n,p,a),s!==null&&(p=mt(),Gt(s,e,a,p),vf(s,n,a))}}function xf(e){var n=e.alternate;return e===Ue||n!==null&&n===Ue}function yf(e,n){rs=Ti=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function vf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,da(e,s)}}var Li={readContext:$t,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Lx={readContext:$t,useCallback:function(e,n){return ln().memoizedState=[e,n===void 0?null:n],e},useContext:$t,useEffect:af,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Oi(4194308,4,df.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Oi(4194308,4,e,n)},useInsertionEffect:function(e,n){return Oi(4,2,e,n)},useMemo:function(e,n){var s=ln();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=ln();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Ox.bind(null,Ue,e),[a.memoizedState,e]},useRef:function(e){var n=ln();return e={current:e},n.memoizedState=e},useState:sf,useDebugValue:uu,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=sf(!1),n=e[0];return e=Tx.bind(null,e[1]),ln().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Ue,p=ln();if(Fe){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),nt===null)throw Error(o(349));(pr&30)!==0||ef(a,n,s)}p.memoizedState=s;var v={value:s,getSnapshot:n};return p.queue=v,af(nf.bind(null,a,v,e),[e]),a.flags|=2048,is(9,tf.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=ln(),n=nt.identifierPrefix;if(Fe){var s=vn,a=yn;s=(a&~(1<<32-Ct(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=os++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Dx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},$x={readContext:$t,useCallback:pf,useContext:$t,useEffect:au,useImperativeHandle:ff,useInsertionEffect:uf,useLayoutEffect:cf,useMemo:mf,useReducer:iu,useRef:lf,useState:function(){return iu(ss)},useDebugValue:uu,useDeferredValue:function(e){var n=zt();return hf(n,Ze.memoizedState,e)},useTransition:function(){var e=iu(ss)[0],n=zt().memoizedState;return[e,n]},useMutableSource:Zd,useSyncExternalStore:Jd,useId:gf,unstable_isNewReconciler:!1},zx={readContext:$t,useCallback:pf,useContext:$t,useEffect:au,useImperativeHandle:ff,useInsertionEffect:uf,useLayoutEffect:cf,useMemo:mf,useReducer:lu,useRef:lf,useState:function(){return lu(ss)},useDebugValue:uu,useDeferredValue:function(e){var n=zt();return Ze===null?n.memoizedState=e:hf(n,Ze.memoizedState,e)},useTransition:function(){var e=lu(ss)[0],n=zt().memoizedState;return[e,n]},useMutableSource:Zd,useSyncExternalStore:Jd,useId:gf,unstable_isNewReconciler:!1};function Ut(e,n){if(e&&e.defaultProps){n=R({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function cu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:R({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $i={isMounted:function(e){return(e=e._reactInternals)?nn(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=mt(),p=Yn(e),v=Sn(a,p);v.payload=n,s!=null&&(v.callback=s),n=Vn(e,v,p),n!==null&&(Gt(n,e,p,a),_i(n,e,p))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=mt(),p=Yn(e),v=Sn(a,p);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=Vn(e,v,p),n!==null&&(Gt(n,e,p,a),_i(n,e,p))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=mt(),a=Yn(e),p=Sn(s,a);p.tag=2,n!=null&&(p.callback=n),n=Vn(e,p,a),n!==null&&(Gt(n,e,a,s),_i(n,e,a))}};function wf(e,n,s,a,p,v,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,b):n.prototype&&n.prototype.isPureReactComponent?!Yo(s,a)||!Yo(p,v):!0}function Sf(e,n,s){var a=!1,p=Rn,v=n.contextType;return typeof v=="object"&&v!==null?v=$t(v):(p=xt(n)?ar:ut.current,a=n.contextTypes,v=(a=a!=null)?Kr(e,p):Rn),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=$i,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=v),n}function Nf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&$i.enqueueReplaceState(n,n.state,null)}function du(e,n,s,a){var p=e.stateNode;p.props=s,p.state=e.memoizedState,p.refs={},qa(e);var v=n.contextType;typeof v=="object"&&v!==null?p.context=$t(v):(v=xt(n)?ar:ut.current,p.context=Kr(e,v)),p.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(cu(e,n,v,s),p.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&$i.enqueueReplaceState(p,p.state,null),Mi(e,s,p,a),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function ro(e,n){try{var s="",a=n;do s+=oe(a),a=a.return;while(a);var p=s}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:p,digest:null}}function fu(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function pu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Rx=typeof WeakMap=="function"?WeakMap:Map;function kf(e,n,s){s=Sn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){Wi||(Wi=!0,Eu=a),pu(e,n)},s}function Cf(e,n,s){s=Sn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var p=n.value;s.payload=function(){return a(p)},s.callback=function(){pu(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){pu(e,n),typeof a!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})}),s}function If(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Rx;var p=new Set;a.set(n,p)}else p=a.get(n),p===void 0&&(p=new Set,a.set(n,p));p.has(s)||(p.add(s),e=Jx.bind(null,e,n,s),n.then(e,e))}function jf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function bf(e,n,s,a,p){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Sn(-1,1),n.tag=2,Vn(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var Fx=D.ReactCurrentOwner,yt=!1;function pt(e,n,s,a){n.child=e===null?Yd(n,null,s,a):Jr(n,e.child,s,a)}function Ef(e,n,s,a,p){s=s.render;var v=n.ref;return to(n,p),a=ou(e,n,s,a,v,p),s=su(),e!==null&&!yt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,Nn(e,n,p)):(Fe&&s&&Ha(n),n.flags|=1,pt(e,n,a,p),n.child)}function _f(e,n,s,a,p){if(e===null){var v=s.type;return typeof v=="function"&&!Au(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,Mf(e,n,v,a,p)):(e=Qi(s.type,null,a,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&p)===0){var b=v.memoizedProps;if(s=s.compare,s=s!==null?s:Yo,s(b,a)&&e.ref===n.ref)return Nn(e,n,p)}return n.flags|=1,e=Gn(v,a),e.ref=n.ref,e.return=n,n.child=e}function Mf(e,n,s,a,p){if(e!==null){var v=e.memoizedProps;if(Yo(v,a)&&e.ref===n.ref)if(yt=!1,n.pendingProps=a=v,(e.lanes&p)!==0)(e.flags&131072)!==0&&(yt=!0);else return n.lanes=e.lanes,Nn(e,n,p)}return mu(e,n,s,a,p)}function Pf(e,n,s){var a=n.pendingProps,p=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(so,Et),Et|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Le(so,Et),Et|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Le(so,Et),Et|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Le(so,Et),Et|=a;return pt(e,n,p,s),n.child}function Df(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function mu(e,n,s,a,p){var v=xt(s)?ar:ut.current;return v=Kr(n,v),to(n,p),s=ou(e,n,s,a,v,p),a=su(),e!==null&&!yt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,Nn(e,n,p)):(Fe&&a&&Ha(n),n.flags|=1,pt(e,n,s,p),n.child)}function Tf(e,n,s,a,p){if(xt(s)){var v=!0;Si(n)}else v=!1;if(to(n,p),n.stateNode===null)Ri(e,n),Sf(n,s,a),du(n,s,a,p),a=!0;else if(e===null){var b=n.stateNode,V=n.memoizedProps;b.props=V;var U=b.context,re=s.contextType;typeof re=="object"&&re!==null?re=$t(re):(re=xt(s)?ar:ut.current,re=Kr(n,re));var ue=s.getDerivedStateFromProps,de=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function";de||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(V!==a||U!==re)&&Nf(n,b,a,re),Hn=!1;var ae=n.memoizedState;b.state=ae,Mi(n,a,b,p),U=n.memoizedState,V!==a||ae!==U||gt.current||Hn?(typeof ue=="function"&&(cu(n,s,ue,a),U=n.memoizedState),(V=Hn||wf(n,s,V,a,ae,U,re))?(de||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(n.flags|=4194308)):(typeof b.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=U),b.props=a,b.state=U,b.context=re,a=V):(typeof b.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{b=n.stateNode,Gd(e,n),V=n.memoizedProps,re=n.type===n.elementType?V:Ut(n.type,V),b.props=re,de=n.pendingProps,ae=b.context,U=s.contextType,typeof U=="object"&&U!==null?U=$t(U):(U=xt(s)?ar:ut.current,U=Kr(n,U));var ge=s.getDerivedStateFromProps;(ue=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(V!==de||ae!==U)&&Nf(n,b,a,U),Hn=!1,ae=n.memoizedState,b.state=ae,Mi(n,a,b,p);var ve=n.memoizedState;V!==de||ae!==ve||gt.current||Hn?(typeof ge=="function"&&(cu(n,s,ge,a),ve=n.memoizedState),(re=Hn||wf(n,s,re,a,ae,ve,U)||!1)?(ue||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(a,ve,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(a,ve,U)),typeof b.componentDidUpdate=="function"&&(n.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof b.componentDidUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=ve),b.props=a,b.state=ve,b.context=U,a=re):(typeof b.componentDidUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),a=!1)}return hu(e,n,s,a,v,p)}function hu(e,n,s,a,p,v){Df(e,n);var b=(n.flags&128)!==0;if(!a&&!b)return p&&$d(n,s,!1),Nn(e,n,v);a=n.stateNode,Fx.current=n;var V=b&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&b?(n.child=Jr(n,e.child,null,v),n.child=Jr(n,null,V,v)):pt(e,n,V,v),n.memoizedState=a.state,p&&$d(n,s,!0),n.child}function Of(e){var n=e.stateNode;n.pendingContext?Ad(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ad(e,n.context,!1),Za(e,n.containerInfo)}function Af(e,n,s,a,p){return Zr(),Ua(p),n.flags|=256,pt(e,n,s,a),n.child}var gu={dehydrated:null,treeContext:null,retryLane:0};function xu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lf(e,n,s){var a=n.pendingProps,p=We.current,v=!1,b=(n.flags&128)!==0,V;if((V=b)||(V=e!==null&&e.memoizedState===null?!1:(p&2)!==0),V?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),Le(We,p&1),e===null)return Wa(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(b=a.children,e=a.fallback,v?(a=n.mode,v=n.child,b={mode:"hidden",children:b},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=b):v=qi(b,a,0,null),e=yr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=xu(s),n.memoizedState=gu,e):yu(n,b));if(p=e.memoizedState,p!==null&&(V=p.dehydrated,V!==null))return Hx(e,n,b,a,V,p,s);if(v){v=a.fallback,b=n.mode,p=e.child,V=p.sibling;var U={mode:"hidden",children:a.children};return(b&1)===0&&n.child!==p?(a=n.child,a.childLanes=0,a.pendingProps=U,n.deletions=null):(a=Gn(p,U),a.subtreeFlags=p.subtreeFlags&14680064),V!==null?v=Gn(V,v):(v=yr(v,b,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,b=e.child.memoizedState,b=b===null?xu(s):{baseLanes:b.baseLanes|s,cachePool:null,transitions:b.transitions},v.memoizedState=b,v.childLanes=e.childLanes&~s,n.memoizedState=gu,a}return v=e.child,e=v.sibling,a=Gn(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function yu(e,n){return n=qi({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function zi(e,n,s,a){return a!==null&&Ua(a),Jr(n,e.child,null,s),e=yu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Hx(e,n,s,a,p,v,b){if(s)return n.flags&256?(n.flags&=-257,a=fu(Error(o(422))),zi(e,n,b,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,p=n.mode,a=qi({mode:"visible",children:a.children},p,0,null),v=yr(v,p,b,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&Jr(n,e.child,null,b),n.child.memoizedState=xu(b),n.memoizedState=gu,v);if((n.mode&1)===0)return zi(e,n,b,null);if(p.data==="$!"){if(a=p.nextSibling&&p.nextSibling.dataset,a)var V=a.dgst;return a=V,v=Error(o(419)),a=fu(v,a,void 0),zi(e,n,b,a)}if(V=(b&e.childLanes)!==0,yt||V){if(a=nt,a!==null){switch(b&-b){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(a.suspendedLanes|b))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,wn(e,p),Gt(a,e,p,-1))}return Ou(),a=fu(Error(o(421))),zi(e,n,b,a)}return p.data==="$?"?(n.flags|=128,n.child=e.child,n=e0.bind(null,e),p._reactRetry=n,null):(e=v.treeContext,bt=$n(p.nextSibling),jt=n,Fe=!0,Wt=null,e!==null&&(At[Lt++]=yn,At[Lt++]=vn,At[Lt++]=ur,yn=e.id,vn=e.overflow,ur=n),n=yu(n,a.children),n.flags|=4096,n)}function $f(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Ka(e.return,n,s)}function vu(e,n,s,a,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=p)}function zf(e,n,s){var a=n.pendingProps,p=a.revealOrder,v=a.tail;if(pt(e,n,a.children,s),a=We.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$f(e,s,n);else if(e.tag===19)$f(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Le(We,a),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&Pi(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),vu(n,!1,p,s,v);break;case"backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&Pi(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}vu(n,!0,s,null,v);break;case"together":vu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ri(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Nn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),mr|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Gn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Gn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Vx(e,n,s){switch(n.tag){case 3:Of(n),Zr();break;case 5:qd(n);break;case 1:xt(n.type)&&Si(n);break;case 4:Za(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,p=n.memoizedProps.value;Le(bi,a._currentValue),a._currentValue=p;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Le(We,We.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Lf(e,n,s):(Le(We,We.current&1),e=Nn(e,n,s),e!==null?e.sibling:null);Le(We,We.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return zf(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Le(We,We.current),a)break;return null;case 22:case 23:return n.lanes=0,Pf(e,n,s)}return Nn(e,n,s)}var Rf,wu,Ff,Hf;Rf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},wu=function(){},Ff=function(e,n,s,a){var p=e.memoizedProps;if(p!==a){e=n.stateNode,fr(sn.current);var v=null;switch(s){case"input":p=ke(e,p),a=ke(e,a),v=[];break;case"select":p=R({},p,{value:void 0}),a=R({},a,{value:void 0}),v=[];break;case"textarea":p=ot(e,p),a=ot(e,a),v=[];break;default:typeof p.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=yi)}ko(s,a);var b;s=null;for(re in p)if(!a.hasOwnProperty(re)&&p.hasOwnProperty(re)&&p[re]!=null)if(re==="style"){var V=p[re];for(b in V)V.hasOwnProperty(b)&&(s||(s={}),s[b]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(l.hasOwnProperty(re)?v||(v=[]):(v=v||[]).push(re,null));for(re in a){var U=a[re];if(V=p!=null?p[re]:void 0,a.hasOwnProperty(re)&&U!==V&&(U!=null||V!=null))if(re==="style")if(V){for(b in V)!V.hasOwnProperty(b)||U&&U.hasOwnProperty(b)||(s||(s={}),s[b]="");for(b in U)U.hasOwnProperty(b)&&V[b]!==U[b]&&(s||(s={}),s[b]=U[b])}else s||(v||(v=[]),v.push(re,s)),s=U;else re==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,V=V?V.__html:void 0,U!=null&&V!==U&&(v=v||[]).push(re,U)):re==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(re,""+U):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(l.hasOwnProperty(re)?(U!=null&&re==="onScroll"&&ze("scroll",e),v||V===U||(v=[])):(v=v||[]).push(re,U))}s&&(v=v||[]).push("style",s);var re=v;(n.updateQueue=re)&&(n.flags|=4)}},Hf=function(e,n,s,a){s!==a&&(n.flags|=4)};function ls(e,n){if(!Fe)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function dt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags&14680064,a|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function Bx(e,n,s){var a=n.pendingProps;switch(Va(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(n),null;case 1:return xt(n.type)&&wi(),dt(n),null;case 3:return a=n.stateNode,no(),Re(gt),Re(ut),tu(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ii(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wt!==null&&(Pu(Wt),Wt=null))),wu(e,n),dt(n),null;case 5:Ja(n);var p=fr(ns.current);if(s=n.type,e!==null&&n.stateNode!=null)Ff(e,n,s,a,p),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return dt(n),null}if(e=fr(sn.current),Ii(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[on]=n,a[qo]=v,e=(n.mode&1)!==0,s){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(p=0;p<Go.length;p++)ze(Go[p],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":be(a,v),ze("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},ze("invalid",a);break;case"textarea":Dt(a,v),ze("invalid",a)}ko(s,v),p=null;for(var b in v)if(v.hasOwnProperty(b)){var V=v[b];b==="children"?typeof V=="string"?a.textContent!==V&&(v.suppressHydrationWarning!==!0&&xi(a.textContent,V,e),p=["children",V]):typeof V=="number"&&a.textContent!==""+V&&(v.suppressHydrationWarning!==!0&&xi(a.textContent,V,e),p=["children",""+V]):l.hasOwnProperty(b)&&V!=null&&b==="onScroll"&&ze("scroll",a)}switch(s){case"input":pe(a),et(a,v,!0);break;case"textarea":pe(a),Vt(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=yi)}a=p,n.updateQueue=a,a!==null&&(n.flags|=4)}else{b=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=st(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=b.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=b.createElement(s,{is:a.is}):(e=b.createElement(s),s==="select"&&(b=e,a.multiple?b.multiple=!0:a.size&&(b.size=a.size))):e=b.createElementNS(e,s),e[on]=n,e[qo]=a,Rf(e,n,!1,!1),n.stateNode=e;e:{switch(b=Co(s,a),s){case"dialog":ze("cancel",e),ze("close",e),p=a;break;case"iframe":case"object":case"embed":ze("load",e),p=a;break;case"video":case"audio":for(p=0;p<Go.length;p++)ze(Go[p],e);p=a;break;case"source":ze("error",e),p=a;break;case"img":case"image":case"link":ze("error",e),ze("load",e),p=a;break;case"details":ze("toggle",e),p=a;break;case"input":be(e,a),p=ke(e,a),ze("invalid",e);break;case"option":p=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},p=R({},a,{value:void 0}),ze("invalid",e);break;case"textarea":Dt(e,a),p=ot(e,a),ze("invalid",e);break;default:p=a}ko(s,p),V=p;for(v in V)if(V.hasOwnProperty(v)){var U=V[v];v==="style"?Vs(e,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Fs(e,U)):v==="children"?typeof U=="string"?(s!=="textarea"||U!=="")&&hn(e,U):typeof U=="number"&&hn(e,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?U!=null&&v==="onScroll"&&ze("scroll",e):U!=null&&N(e,v,U,b))}switch(s){case"input":pe(e),et(e,a,!1);break;case"textarea":pe(e),Vt(e);break;case"option":a.value!=null&&e.setAttribute("value",""+se(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?Ke(e,!!a.multiple,v,!1):a.defaultValue!=null&&Ke(e,!!a.multiple,a.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=yi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return dt(n),null;case 6:if(e&&n.stateNode!=null)Hf(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=fr(ns.current),fr(sn.current),Ii(n)){if(a=n.stateNode,s=n.memoizedProps,a[on]=n,(v=a.nodeValue!==s)&&(e=jt,e!==null))switch(e.tag){case 3:xi(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xi(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[on]=n,n.stateNode=a}return dt(n),null;case 13:if(Re(We),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&bt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Bd(),Zr(),n.flags|=98560,v=!1;else if(v=Ii(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[on]=n}else Zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;dt(n),v=!1}else Wt!==null&&(Pu(Wt),Wt=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(We.current&1)!==0?Je===0&&(Je=3):Ou())),n.updateQueue!==null&&(n.flags|=4),dt(n),null);case 4:return no(),wu(e,n),e===null&&Ko(n.stateNode.containerInfo),dt(n),null;case 10:return Ga(n.type._context),dt(n),null;case 17:return xt(n.type)&&wi(),dt(n),null;case 19:if(Re(We),v=n.memoizedState,v===null)return dt(n),null;if(a=(n.flags&128)!==0,b=v.rendering,b===null)if(a)ls(v,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(b=Pi(e),b!==null){for(n.flags|=128,ls(v,!1),a=b.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,b=v.alternate,b===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,e=b.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Le(We,We.current&1|2),n.child}e=e.sibling}v.tail!==null&&Be()>io&&(n.flags|=128,a=!0,ls(v,!1),n.lanes=4194304)}else{if(!a)if(e=Pi(b),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ls(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!Fe)return dt(n),null}else 2*Be()-v.renderingStartTime>io&&s!==1073741824&&(n.flags|=128,a=!0,ls(v,!1),n.lanes=4194304);v.isBackwards?(b.sibling=n.child,n.child=b):(s=v.last,s!==null?s.sibling=b:n.child=b,v.last=b)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Be(),n.sibling=null,s=We.current,Le(We,a?s&1|2:s&1),n):(dt(n),null);case 22:case 23:return Tu(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(Et&1073741824)!==0&&(dt(n),n.subtreeFlags&6&&(n.flags|=8192)):dt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Wx(e,n){switch(Va(n),n.tag){case 1:return xt(n.type)&&wi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return no(),Re(gt),Re(ut),tu(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Ja(n),null;case 13:if(Re(We),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Zr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Re(We),null;case 4:return no(),null;case 10:return Ga(n.type._context),null;case 22:case 23:return Tu(),null;case 24:return null;default:return null}}var Fi=!1,ft=!1,Ux=typeof WeakSet=="function"?WeakSet:Set,ye=null;function oo(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Ye(e,n,a)}else s.current=null}function Su(e,n,s){try{s()}catch(a){Ye(e,n,a)}}var Vf=!1;function Yx(e,n){if(Ta=ii,e=vd(),Ia(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var p=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var b=0,V=-1,U=-1,re=0,ue=0,de=e,ae=null;t:for(;;){for(var ge;de!==s||p!==0&&de.nodeType!==3||(V=b+p),de!==v||a!==0&&de.nodeType!==3||(U=b+a),de.nodeType===3&&(b+=de.nodeValue.length),(ge=de.firstChild)!==null;)ae=de,de=ge;for(;;){if(de===e)break t;if(ae===s&&++re===p&&(V=b),ae===v&&++ue===a&&(U=b),(ge=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=ge}s=V===-1||U===-1?null:{start:V,end:U}}else s=null}s=s||{start:0,end:0}}else s=null;for(Oa={focusedElem:e,selectionRange:s},ii=!1,ye=n;ye!==null;)if(n=ye,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ye=e;else for(;ye!==null;){n=ye;try{var ve=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,Ge=ve.memoizedState,ee=n.stateNode,K=ee.getSnapshotBeforeUpdate(n.elementType===n.type?we:Ut(n.type,we),Ge);ee.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var te=n.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){Ye(n,n.return,fe)}if(e=n.sibling,e!==null){e.return=n.return,ye=e;break}ye=n.return}return ve=Vf,Vf=!1,ve}function as(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&e)===e){var v=p.destroy;p.destroy=void 0,v!==void 0&&Su(n,s,v)}p=p.next}while(p!==a)}}function Hi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function Nu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Bf(e){var n=e.alternate;n!==null&&(e.alternate=null,Bf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[on],delete n[qo],delete n[za],delete n[Ex],delete n[_x])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wf(e){return e.tag===5||e.tag===3||e.tag===4}function Uf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ku(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=yi));else if(a!==4&&(e=e.child,e!==null))for(ku(e,n,s),e=e.sibling;e!==null;)ku(e,n,s),e=e.sibling}function Cu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Cu(e,n,s),e=e.sibling;e!==null;)Cu(e,n,s),e=e.sibling}var it=null,Yt=!1;function Bn(e,n,s){for(s=s.child;s!==null;)Yf(e,n,s),s=s.sibling}function Yf(e,n,s){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(sr,s)}catch{}switch(s.tag){case 5:ft||oo(s,n);case 6:var a=it,p=Yt;it=null,Bn(e,n,s),it=a,Yt=p,it!==null&&(Yt?(e=it,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):it.removeChild(s.stateNode));break;case 18:it!==null&&(Yt?(e=it,s=s.stateNode,e.nodeType===8?$a(e.parentNode,s):e.nodeType===1&&$a(e,s),Fo(e)):$a(it,s.stateNode));break;case 4:a=it,p=Yt,it=s.stateNode.containerInfo,Yt=!0,Bn(e,n,s),it=a,Yt=p;break;case 0:case 11:case 14:case 15:if(!ft&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){p=a=a.next;do{var v=p,b=v.destroy;v=v.tag,b!==void 0&&((v&2)!==0||(v&4)!==0)&&Su(s,n,b),p=p.next}while(p!==a)}Bn(e,n,s);break;case 1:if(!ft&&(oo(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(V){Ye(s,n,V)}Bn(e,n,s);break;case 21:Bn(e,n,s);break;case 22:s.mode&1?(ft=(a=ft)||s.memoizedState!==null,Bn(e,n,s),ft=a):Bn(e,n,s);break;default:Bn(e,n,s)}}function Xf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Ux),n.forEach(function(a){var p=t0.bind(null,e,a);s.has(a)||(s.add(a),a.then(p,p))})}}function Xt(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var p=s[a];try{var v=e,b=n,V=b;e:for(;V!==null;){switch(V.tag){case 5:it=V.stateNode,Yt=!1;break e;case 3:it=V.stateNode.containerInfo,Yt=!0;break e;case 4:it=V.stateNode.containerInfo,Yt=!0;break e}V=V.return}if(it===null)throw Error(o(160));Yf(v,b,p),it=null,Yt=!1;var U=p.alternate;U!==null&&(U.return=null),p.return=null}catch(re){Ye(p,n,re)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Gf(n,e),n=n.sibling}function Gf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(n,e),an(e),a&4){try{as(3,e,e.return),Hi(3,e)}catch(we){Ye(e,e.return,we)}try{as(5,e,e.return)}catch(we){Ye(e,e.return,we)}}break;case 1:Xt(n,e),an(e),a&512&&s!==null&&oo(s,s.return);break;case 5:if(Xt(n,e),an(e),a&512&&s!==null&&oo(s,s.return),e.flags&32){var p=e.stateNode;try{hn(p,"")}catch(we){Ye(e,e.return,we)}}if(a&4&&(p=e.stateNode,p!=null)){var v=e.memoizedProps,b=s!==null?s.memoizedProps:v,V=e.type,U=e.updateQueue;if(e.updateQueue=null,U!==null)try{V==="input"&&v.type==="radio"&&v.name!=null&&Ee(p,v),Co(V,b);var re=Co(V,v);for(b=0;b<U.length;b+=2){var ue=U[b],de=U[b+1];ue==="style"?Vs(p,de):ue==="dangerouslySetInnerHTML"?Fs(p,de):ue==="children"?hn(p,de):N(p,ue,de,re)}switch(V){case"input":Ae(p,v);break;case"textarea":Tt(p,v);break;case"select":var ae=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var ge=v.value;ge!=null?Ke(p,!!v.multiple,ge,!1):ae!==!!v.multiple&&(v.defaultValue!=null?Ke(p,!!v.multiple,v.defaultValue,!0):Ke(p,!!v.multiple,v.multiple?[]:"",!1))}p[qo]=v}catch(we){Ye(e,e.return,we)}}break;case 6:if(Xt(n,e),an(e),a&4){if(e.stateNode===null)throw Error(o(162));p=e.stateNode,v=e.memoizedProps;try{p.nodeValue=v}catch(we){Ye(e,e.return,we)}}break;case 3:if(Xt(n,e),an(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Fo(n.containerInfo)}catch(we){Ye(e,e.return,we)}break;case 4:Xt(n,e),an(e);break;case 13:Xt(n,e),an(e),p=e.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(bu=Be())),a&4&&Xf(e);break;case 22:if(ue=s!==null&&s.memoizedState!==null,e.mode&1?(ft=(re=ft)||ue,Xt(n,e),ft=re):Xt(n,e),an(e),a&8192){if(re=e.memoizedState!==null,(e.stateNode.isHidden=re)&&!ue&&(e.mode&1)!==0)for(ye=e,ue=e.child;ue!==null;){for(de=ye=ue;ye!==null;){switch(ae=ye,ge=ae.child,ae.tag){case 0:case 11:case 14:case 15:as(4,ae,ae.return);break;case 1:oo(ae,ae.return);var ve=ae.stateNode;if(typeof ve.componentWillUnmount=="function"){a=ae,s=ae.return;try{n=a,ve.props=n.memoizedProps,ve.state=n.memoizedState,ve.componentWillUnmount()}catch(we){Ye(a,s,we)}}break;case 5:oo(ae,ae.return);break;case 22:if(ae.memoizedState!==null){qf(de);continue}}ge!==null?(ge.return=ae,ye=ge):qf(de)}ue=ue.sibling}e:for(ue=null,de=e;;){if(de.tag===5){if(ue===null){ue=de;try{p=de.stateNode,re?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(V=de.stateNode,U=de.memoizedProps.style,b=U!=null&&U.hasOwnProperty("display")?U.display:null,V.style.display=Hs("display",b))}catch(we){Ye(e,e.return,we)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=re?"":de.memoizedProps}catch(we){Ye(e,e.return,we)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===e)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===e)break e;for(;de.sibling===null;){if(de.return===null||de.return===e)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Xt(n,e),an(e),a&4&&Xf(e);break;case 21:break;default:Xt(n,e),an(e)}}function an(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Wf(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var p=a.stateNode;a.flags&32&&(hn(p,""),a.flags&=-33);var v=Uf(e);Cu(e,v,p);break;case 3:case 4:var b=a.stateNode.containerInfo,V=Uf(e);ku(e,V,b);break;default:throw Error(o(161))}}catch(U){Ye(e,e.return,U)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Xx(e,n,s){ye=e,Kf(e)}function Kf(e,n,s){for(var a=(e.mode&1)!==0;ye!==null;){var p=ye,v=p.child;if(p.tag===22&&a){var b=p.memoizedState!==null||Fi;if(!b){var V=p.alternate,U=V!==null&&V.memoizedState!==null||ft;V=Fi;var re=ft;if(Fi=b,(ft=U)&&!re)for(ye=p;ye!==null;)b=ye,U=b.child,b.tag===22&&b.memoizedState!==null?Zf(p):U!==null?(U.return=b,ye=U):Zf(p);for(;v!==null;)ye=v,Kf(v),v=v.sibling;ye=p,Fi=V,ft=re}Qf(e)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ye=v):Qf(e)}}function Qf(e){for(;ye!==null;){var n=ye;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:ft||Hi(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!ft)if(s===null)a.componentDidMount();else{var p=n.elementType===n.type?s.memoizedProps:Ut(n.type,s.memoizedProps);a.componentDidUpdate(p,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Qd(n,v,a);break;case 3:var b=n.updateQueue;if(b!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Qd(n,b,s)}break;case 5:var V=n.stateNode;if(s===null&&n.flags&4){s=V;var U=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&s.focus();break;case"img":U.src&&(s.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var re=n.alternate;if(re!==null){var ue=re.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&Fo(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ft||n.flags&512&&Nu(n)}catch(ae){Ye(n,n.return,ae)}}if(n===e){ye=null;break}if(s=n.sibling,s!==null){s.return=n.return,ye=s;break}ye=n.return}}function qf(e){for(;ye!==null;){var n=ye;if(n===e){ye=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ye=s;break}ye=n.return}}function Zf(e){for(;ye!==null;){var n=ye;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Hi(4,n)}catch(U){Ye(n,s,U)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var p=n.return;try{a.componentDidMount()}catch(U){Ye(n,p,U)}}var v=n.return;try{Nu(n)}catch(U){Ye(n,v,U)}break;case 5:var b=n.return;try{Nu(n)}catch(U){Ye(n,b,U)}}}catch(U){Ye(n,n.return,U)}if(n===e){ye=null;break}var V=n.sibling;if(V!==null){V.return=n.return,ye=V;break}ye=n.return}}var Gx=Math.ceil,Vi=D.ReactCurrentDispatcher,Iu=D.ReactCurrentOwner,Rt=D.ReactCurrentBatchConfig,Pe=0,nt=null,Qe=null,lt=0,Et=0,so=zn(0),Je=0,us=null,mr=0,Bi=0,ju=0,cs=null,vt=null,bu=0,io=1/0,kn=null,Wi=!1,Eu=null,Wn=null,Ui=!1,Un=null,Yi=0,ds=0,_u=null,Xi=-1,Gi=0;function mt(){return(Pe&6)!==0?Be():Xi!==-1?Xi:Xi=Be()}function Yn(e){return(e.mode&1)===0?1:(Pe&2)!==0&&lt!==0?lt&-lt:Px.transition!==null?(Gi===0&&(Gi=Rr()),Gi):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Jc(e.type)),e)}function Gt(e,n,s,a){if(50<ds)throw ds=0,_u=null,Error(o(185));ir(e,s,a),((Pe&2)===0||e!==nt)&&(e===nt&&((Pe&2)===0&&(Bi|=s),Je===4&&Xn(e,lt)),wt(e,a),s===1&&Pe===0&&(n.mode&1)===0&&(io=Be()+500,Ni&&Fn()))}function wt(e,n){var s=e.callbackNode;ca(e,n);var a=zr(e,e===nt?lt:0);if(a===0)s!==null&&Zs(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Zs(s),n===1)e.tag===0?Mx(ep.bind(null,e)):zd(ep.bind(null,e)),jx(function(){(Pe&6)===0&&Fn()}),s=null;else{switch(Uc(a)){case 1:s=To;break;case 4:s=ei;break;case 16:s=Ar;break;case 536870912:s=ti;break;default:s=Ar}s=ap(s,Jf.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Jf(e,n){if(Xi=-1,Gi=0,(Pe&6)!==0)throw Error(o(327));var s=e.callbackNode;if(lo()&&e.callbackNode!==s)return null;var a=zr(e,e===nt?lt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=Ki(e,a);else{n=a;var p=Pe;Pe|=2;var v=np();(nt!==e||lt!==n)&&(kn=null,io=Be()+500,gr(e,n));do try{qx();break}catch(V){tp(e,V)}while(!0);Xa(),Vi.current=v,Pe=p,Qe!==null?n=0:(nt=null,lt=0,n=Je)}if(n!==0){if(n===2&&(p=Oo(e),p!==0&&(a=p,n=Mu(e,p))),n===1)throw s=us,gr(e,0),Xn(e,a),wt(e,Be()),s;if(n===6)Xn(e,a);else{if(p=e.current.alternate,(a&30)===0&&!Kx(p)&&(n=Ki(e,a),n===2&&(v=Oo(e),v!==0&&(a=v,n=Mu(e,v))),n===1))throw s=us,gr(e,0),Xn(e,a),wt(e,Be()),s;switch(e.finishedWork=p,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:xr(e,vt,kn);break;case 3:if(Xn(e,a),(a&130023424)===a&&(n=bu+500-Be(),10<n)){if(zr(e,0)!==0)break;if(p=e.suspendedLanes,(p&a)!==a){mt(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=La(xr.bind(null,e,vt,kn),n);break}xr(e,vt,kn);break;case 4:if(Xn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,p=-1;0<a;){var b=31-Ct(a);v=1<<b,b=n[b],b>p&&(p=b),a&=~v}if(a=p,a=Be()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Gx(a/1960))-a,10<a){e.timeoutHandle=La(xr.bind(null,e,vt,kn),a);break}xr(e,vt,kn);break;case 5:xr(e,vt,kn);break;default:throw Error(o(329))}}}return wt(e,Be()),e.callbackNode===s?Jf.bind(null,e):null}function Mu(e,n){var s=cs;return e.current.memoizedState.isDehydrated&&(gr(e,n).flags|=256),e=Ki(e,n),e!==2&&(n=vt,vt=s,n!==null&&Pu(n)),e}function Pu(e){vt===null?vt=e:vt.push.apply(vt,e)}function Kx(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var p=s[a],v=p.getSnapshot;p=p.value;try{if(!Bt(v(),p))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xn(e,n){for(n&=~ju,n&=~Bi,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Ct(n),a=1<<s;e[s]=-1,n&=~a}}function ep(e){if((Pe&6)!==0)throw Error(o(327));lo();var n=zr(e,0);if((n&1)===0)return wt(e,Be()),null;var s=Ki(e,n);if(e.tag!==0&&s===2){var a=Oo(e);a!==0&&(n=a,s=Mu(e,a))}if(s===1)throw s=us,gr(e,0),Xn(e,n),wt(e,Be()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,xr(e,vt,kn),wt(e,Be()),null}function Du(e,n){var s=Pe;Pe|=1;try{return e(n)}finally{Pe=s,Pe===0&&(io=Be()+500,Ni&&Fn())}}function hr(e){Un!==null&&Un.tag===0&&(Pe&6)===0&&lo();var n=Pe;Pe|=1;var s=Rt.transition,a=Te;try{if(Rt.transition=null,Te=1,e)return e()}finally{Te=a,Rt.transition=s,Pe=n,(Pe&6)===0&&Fn()}}function Tu(){Et=so.current,Re(so)}function gr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Ix(s)),Qe!==null)for(s=Qe.return;s!==null;){var a=s;switch(Va(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wi();break;case 3:no(),Re(gt),Re(ut),tu();break;case 5:Ja(a);break;case 4:no();break;case 13:Re(We);break;case 19:Re(We);break;case 10:Ga(a.type._context);break;case 22:case 23:Tu()}s=s.return}if(nt=e,Qe=e=Gn(e.current,null),lt=Et=n,Je=0,us=null,ju=Bi=mr=0,vt=cs=null,dr!==null){for(n=0;n<dr.length;n++)if(s=dr[n],a=s.interleaved,a!==null){s.interleaved=null;var p=a.next,v=s.pending;if(v!==null){var b=v.next;v.next=p,a.next=b}s.pending=a}dr=null}return e}function tp(e,n){do{var s=Qe;try{if(Xa(),Di.current=Li,Ti){for(var a=Ue.memoizedState;a!==null;){var p=a.queue;p!==null&&(p.pending=null),a=a.next}Ti=!1}if(pr=0,tt=Ze=Ue=null,rs=!1,os=0,Iu.current=null,s===null||s.return===null){Je=1,us=n,Qe=null;break}e:{var v=e,b=s.return,V=s,U=n;if(n=lt,V.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var re=U,ue=V,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ge=jf(b);if(ge!==null){ge.flags&=-257,bf(ge,b,V,v,n),ge.mode&1&&If(v,re,n),n=ge,U=re;var ve=n.updateQueue;if(ve===null){var we=new Set;we.add(U),n.updateQueue=we}else ve.add(U);break e}else{if((n&1)===0){If(v,re,n),Ou();break e}U=Error(o(426))}}else if(Fe&&V.mode&1){var Ge=jf(b);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),bf(Ge,b,V,v,n),Ua(ro(U,V));break e}}v=U=ro(U,V),Je!==4&&(Je=2),cs===null?cs=[v]:cs.push(v),v=b;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var ee=kf(v,U,n);Kd(v,ee);break e;case 1:V=U;var K=v.type,te=v.stateNode;if((v.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Wn===null||!Wn.has(te)))){v.flags|=65536,n&=-n,v.lanes|=n;var fe=Cf(v,V,n);Kd(v,fe);break e}}v=v.return}while(v!==null)}op(s)}catch(Se){n=Se,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(!0)}function np(){var e=Vi.current;return Vi.current=Li,e===null?Li:e}function Ou(){(Je===0||Je===3||Je===2)&&(Je=4),nt===null||(mr&268435455)===0&&(Bi&268435455)===0||Xn(nt,lt)}function Ki(e,n){var s=Pe;Pe|=2;var a=np();(nt!==e||lt!==n)&&(kn=null,gr(e,n));do try{Qx();break}catch(p){tp(e,p)}while(!0);if(Xa(),Pe=s,Vi.current=a,Qe!==null)throw Error(o(261));return nt=null,lt=0,Je}function Qx(){for(;Qe!==null;)rp(Qe)}function qx(){for(;Qe!==null&&!ra();)rp(Qe)}function rp(e){var n=lp(e.alternate,e,Et);e.memoizedProps=e.pendingProps,n===null?op(e):Qe=n,Iu.current=null}function op(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Bx(s,n,Et),s!==null){Qe=s;return}}else{if(s=Wx(s,n),s!==null){s.flags&=32767,Qe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Qe=null;return}}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);Je===0&&(Je=5)}function xr(e,n,s){var a=Te,p=Rt.transition;try{Rt.transition=null,Te=1,Zx(e,n,s,a)}finally{Rt.transition=p,Te=a}return null}function Zx(e,n,s,a){do lo();while(Un!==null);if((Pe&6)!==0)throw Error(o(327));s=e.finishedWork;var p=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(ri(e,v),e===nt&&(Qe=nt=null,lt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ui||(Ui=!0,ap(Ar,function(){return lo(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Rt.transition,Rt.transition=null;var b=Te;Te=1;var V=Pe;Pe|=4,Iu.current=null,Yx(e,s),Gf(s,e),yx(Oa),ii=!!Ta,Oa=Ta=null,e.current=s,Xx(s),Js(),Pe=V,Te=b,Rt.transition=v}else e.current=s;if(Ui&&(Ui=!1,Un=e,Yi=p),v=e.pendingLanes,v===0&&(Wn=null),ia(s.stateNode),wt(e,Be()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)p=n[s],a(p.value,{componentStack:p.stack,digest:p.digest});if(Wi)throw Wi=!1,e=Eu,Eu=null,e;return(Yi&1)!==0&&e.tag!==0&&lo(),v=e.pendingLanes,(v&1)!==0?e===_u?ds++:(ds=0,_u=e):ds=0,Fn(),null}function lo(){if(Un!==null){var e=Uc(Yi),n=Rt.transition,s=Te;try{if(Rt.transition=null,Te=16>e?16:e,Un===null)var a=!1;else{if(e=Un,Un=null,Yi=0,(Pe&6)!==0)throw Error(o(331));var p=Pe;for(Pe|=4,ye=e.current;ye!==null;){var v=ye,b=v.child;if((ye.flags&16)!==0){var V=v.deletions;if(V!==null){for(var U=0;U<V.length;U++){var re=V[U];for(ye=re;ye!==null;){var ue=ye;switch(ue.tag){case 0:case 11:case 15:as(8,ue,v)}var de=ue.child;if(de!==null)de.return=ue,ye=de;else for(;ye!==null;){ue=ye;var ae=ue.sibling,ge=ue.return;if(Bf(ue),ue===re){ye=null;break}if(ae!==null){ae.return=ge,ye=ae;break}ye=ge}}}var ve=v.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var Ge=we.sibling;we.sibling=null,we=Ge}while(we!==null)}}ye=v}}if((v.subtreeFlags&2064)!==0&&b!==null)b.return=v,ye=b;else e:for(;ye!==null;){if(v=ye,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:as(9,v,v.return)}var ee=v.sibling;if(ee!==null){ee.return=v.return,ye=ee;break e}ye=v.return}}var K=e.current;for(ye=K;ye!==null;){b=ye;var te=b.child;if((b.subtreeFlags&2064)!==0&&te!==null)te.return=b,ye=te;else e:for(b=K;ye!==null;){if(V=ye,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Hi(9,V)}}catch(Se){Ye(V,V.return,Se)}if(V===b){ye=null;break e}var fe=V.sibling;if(fe!==null){fe.return=V.return,ye=fe;break e}ye=V.return}}if(Pe=p,Fn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(sr,e)}catch{}a=!0}return a}finally{Te=s,Rt.transition=n}}return!1}function sp(e,n,s){n=ro(s,n),n=kf(e,n,1),e=Vn(e,n,1),n=mt(),e!==null&&(ir(e,1,n),wt(e,n))}function Ye(e,n,s){if(e.tag===3)sp(e,e,s);else for(;n!==null;){if(n.tag===3){sp(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Wn===null||!Wn.has(a))){e=ro(s,e),e=Cf(n,e,1),n=Vn(n,e,1),e=mt(),n!==null&&(ir(n,1,e),wt(n,e));break}}n=n.return}}function Jx(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=mt(),e.pingedLanes|=e.suspendedLanes&s,nt===e&&(lt&s)===s&&(Je===4||Je===3&&(lt&130023424)===lt&&500>Be()-bu?gr(e,0):ju|=s),wt(e,n)}function ip(e,n){n===0&&((e.mode&1)===0?n=1:(n=$r,$r<<=1,($r&130023424)===0&&($r=4194304)));var s=mt();e=wn(e,n),e!==null&&(ir(e,n,s),wt(e,s))}function e0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),ip(e,s)}function t0(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),ip(e,s)}var lp;lp=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||gt.current)yt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return yt=!1,Vx(e,n,s);yt=(e.flags&131072)!==0}else yt=!1,Fe&&(n.flags&1048576)!==0&&Rd(n,Ci,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Ri(e,n),e=n.pendingProps;var p=Kr(n,ut.current);to(n,s),p=ou(null,n,a,e,p,s);var v=su();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,xt(a)?(v=!0,Si(n)):v=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,qa(n),p.updater=$i,n.stateNode=p,p._reactInternals=n,du(n,a,e,s),n=hu(null,n,a,!0,v,s)):(n.tag=0,Fe&&v&&Ha(n),pt(null,n,p,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Ri(e,n),e=n.pendingProps,p=a._init,a=p(a._payload),n.type=a,p=n.tag=r0(a),e=Ut(a,e),p){case 0:n=mu(null,n,a,e,s);break e;case 1:n=Tf(null,n,a,e,s);break e;case 11:n=Ef(null,n,a,e,s);break e;case 14:n=_f(null,n,a,Ut(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Ut(a,p),mu(e,n,a,p,s);case 1:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Ut(a,p),Tf(e,n,a,p,s);case 3:e:{if(Of(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,p=v.element,Gd(e,n),Mi(n,a,null,s);var b=n.memoizedState;if(a=b.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){p=ro(Error(o(423)),n),n=Af(e,n,a,s,p);break e}else if(a!==p){p=ro(Error(o(424)),n),n=Af(e,n,a,s,p);break e}else for(bt=$n(n.stateNode.containerInfo.firstChild),jt=n,Fe=!0,Wt=null,s=Yd(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Zr(),a===p){n=Nn(e,n,s);break e}pt(e,n,a,s)}n=n.child}return n;case 5:return qd(n),e===null&&Wa(n),a=n.type,p=n.pendingProps,v=e!==null?e.memoizedProps:null,b=p.children,Aa(a,p)?b=null:v!==null&&Aa(a,v)&&(n.flags|=32),Df(e,n),pt(e,n,b,s),n.child;case 6:return e===null&&Wa(n),null;case 13:return Lf(e,n,s);case 4:return Za(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Jr(n,null,a,s):pt(e,n,a,s),n.child;case 11:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Ut(a,p),Ef(e,n,a,p,s);case 7:return pt(e,n,n.pendingProps,s),n.child;case 8:return pt(e,n,n.pendingProps.children,s),n.child;case 12:return pt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,p=n.pendingProps,v=n.memoizedProps,b=p.value,Le(bi,a._currentValue),a._currentValue=b,v!==null)if(Bt(v.value,b)){if(v.children===p.children&&!gt.current){n=Nn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var V=v.dependencies;if(V!==null){b=v.child;for(var U=V.firstContext;U!==null;){if(U.context===a){if(v.tag===1){U=Sn(-1,s&-s),U.tag=2;var re=v.updateQueue;if(re!==null){re=re.shared;var ue=re.pending;ue===null?U.next=U:(U.next=ue.next,ue.next=U),re.pending=U}}v.lanes|=s,U=v.alternate,U!==null&&(U.lanes|=s),Ka(v.return,s,n),V.lanes|=s;break}U=U.next}}else if(v.tag===10)b=v.type===n.type?null:v.child;else if(v.tag===18){if(b=v.return,b===null)throw Error(o(341));b.lanes|=s,V=b.alternate,V!==null&&(V.lanes|=s),Ka(b,s,n),b=v.sibling}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===n){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}pt(e,n,p.children,s),n=n.child}return n;case 9:return p=n.type,a=n.pendingProps.children,to(n,s),p=$t(p),a=a(p),n.flags|=1,pt(e,n,a,s),n.child;case 14:return a=n.type,p=Ut(a,n.pendingProps),p=Ut(a.type,p),_f(e,n,a,p,s);case 15:return Mf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Ut(a,p),Ri(e,n),n.tag=1,xt(a)?(e=!0,Si(n)):e=!1,to(n,s),Sf(n,a,p),du(n,a,p,s),hu(null,n,a,!0,e,s);case 19:return zf(e,n,s);case 22:return Pf(e,n,s)}throw Error(o(156,n.tag))};function ap(e,n){return qs(e,n)}function n0(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,n,s,a){return new n0(e,n,s,a)}function Au(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r0(e){if(typeof e=="function")return Au(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===Q)return 14}return 2}function Gn(e,n){var s=e.alternate;return s===null?(s=Ft(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Qi(e,n,s,a,p,v){var b=2;if(a=e,typeof e=="function")Au(e)&&(b=1);else if(typeof e=="string")b=5;else e:switch(e){case B:return yr(s.children,p,v,n);case Y:b=8,p|=8;break;case q:return e=Ft(12,s,n,p|2),e.elementType=q,e.lanes=v,e;case X:return e=Ft(13,s,n,p),e.elementType=X,e.lanes=v,e;case $:return e=Ft(19,s,n,p),e.elementType=$,e.lanes=v,e;case _:return qi(s,p,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F:b=10;break e;case z:b=9;break e;case H:b=11;break e;case Q:b=14;break e;case W:b=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Ft(b,s,n,p),n.elementType=e,n.type=a,n.lanes=v,n}function yr(e,n,s,a){return e=Ft(7,e,a,n),e.lanes=s,e}function qi(e,n,s,a){return e=Ft(22,e,a,n),e.elementType=_,e.lanes=s,e.stateNode={isHidden:!1},e}function Lu(e,n,s){return e=Ft(6,e,null,n),e.lanes=s,e}function $u(e,n,s){return n=Ft(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function o0(e,n,s,a,p){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=a,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function zu(e,n,s,a,p,v,b,V,U){return e=new o0(e,n,s,V,U),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Ft(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},qa(v),e}function s0(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function up(e){if(!e)return Rn;e=e._reactInternals;e:{if(nn(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(xt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(xt(s))return Ld(e,s,n)}return n}function cp(e,n,s,a,p,v,b,V,U){return e=zu(s,a,!0,e,p,v,b,V,U),e.context=up(null),s=e.current,a=mt(),p=Yn(s),v=Sn(a,p),v.callback=n??null,Vn(s,v,p),e.current.lanes=p,ir(e,p,a),wt(e,a),e}function Zi(e,n,s,a){var p=n.current,v=mt(),b=Yn(p);return s=up(s),n.context===null?n.context=s:n.pendingContext=s,n=Sn(v,b),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Vn(p,n,b),e!==null&&(Gt(e,p,b,v),_i(e,p,b)),b}function Ji(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Ru(e,n){dp(e,n),(e=e.alternate)&&dp(e,n)}function i0(){return null}var fp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fu(e){this._internalRoot=e}el.prototype.render=Fu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Zi(e,n,null,null)},el.prototype.unmount=Fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;hr(function(){Zi(null,e,null,null)}),n[gn]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var n=Gc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<On.length&&n!==0&&n<On[s].priority;s++);On.splice(s,0,e),s===0&&qc(e)}};function Hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pp(){}function l0(e,n,s,a,p){if(p){if(typeof a=="function"){var v=a;a=function(){var re=Ji(b);v.call(re)}}var b=cp(n,a,e,0,null,!1,!1,"",pp);return e._reactRootContainer=b,e[gn]=b.current,Ko(e.nodeType===8?e.parentNode:e),hr(),b}for(;p=e.lastChild;)e.removeChild(p);if(typeof a=="function"){var V=a;a=function(){var re=Ji(U);V.call(re)}}var U=zu(e,0,!1,null,null,!1,!1,"",pp);return e._reactRootContainer=U,e[gn]=U.current,Ko(e.nodeType===8?e.parentNode:e),hr(function(){Zi(n,U,s,a)}),U}function nl(e,n,s,a,p){var v=s._reactRootContainer;if(v){var b=v;if(typeof p=="function"){var V=p;p=function(){var U=Ji(b);V.call(U)}}Zi(n,b,e,p)}else b=l0(s,n,e,p,a);return Ji(b)}Yc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=rn(n.pendingLanes);s!==0&&(da(n,s|1),wt(n,Be()),(Pe&6)===0&&(io=Be()+500,Fn()))}break;case 13:hr(function(){var a=wn(e,1);if(a!==null){var p=mt();Gt(a,e,1,p)}}),Ru(e,1)}},fa=function(e){if(e.tag===13){var n=wn(e,134217728);if(n!==null){var s=mt();Gt(n,e,134217728,s)}Ru(e,134217728)}},Xc=function(e){if(e.tag===13){var n=Yn(e),s=wn(e,n);if(s!==null){var a=mt();Gt(s,e,n,a)}Ru(e,n)}},Gc=function(){return Te},Kc=function(e,n){var s=Te;try{return Te=e,n()}finally{Te=s}},bo=function(e,n,s){switch(n){case"input":if(Ae(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var p=vi(a);if(!p)throw Error(o(90));he(a),Ae(a,p)}}}break;case"textarea":Tt(e,s);break;case"select":n=s.value,n!=null&&Ke(e,!!s.multiple,n,!1)}},Ys=Du,Xs=hr;var a0={usingClientEntryPoint:!1,Events:[Zo,Xr,vi,Ws,Us,Du]},fs={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u0={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ks(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||i0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{sr=rl.inject(u0),Ot=rl}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0,St.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hu(n))throw Error(o(200));return s0(e,n,null,s)},St.createRoot=function(e,n){if(!Hu(e))throw Error(o(299));var s=!1,a="",p=fp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=zu(e,1,!1,null,null,s,!1,a,p),e[gn]=n.current,Ko(e.nodeType===8?e.parentNode:e),new Fu(n)},St.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Ks(n),e=e===null?null:e.stateNode,e},St.flushSync=function(e){return hr(e)},St.hydrate=function(e,n,s){if(!tl(n))throw Error(o(200));return nl(null,e,n,!0,s)},St.hydrateRoot=function(e,n,s){if(!Hu(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,p=!1,v="",b=fp;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),n=cp(n,null,e,1,s??null,p,!1,v,b),e[gn]=n.current,Ko(e),a)for(e=0;e<a.length;e++)s=a[e],p=s._getVersion,p=p(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,p]:n.mutableSourceEagerHydrationData.push(s,p);return new el(n)},St.render=function(e,n,s){if(!tl(n))throw Error(o(200));return nl(null,e,n,!1,s)},St.unmountComponentAtNode=function(e){if(!tl(e))throw Error(o(40));return e._reactRootContainer?(hr(function(){nl(null,null,e,!1,function(){e._reactRootContainer=null,e[gn]=null})}),!0):!1},St.unstable_batchedUpdates=Du,St.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!tl(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return nl(e,n,s,!1,a)},St.version="18.3.1-next-f1338f8080-20240426",St}var Sp;function Fm(){if(Sp)return Wu.exports;Sp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Wu.exports=g0(),Wu.exports}var Np;function x0(){if(Np)return ol;Np=1;var t=Fm();return ol.createRoot=t.createRoot,ol.hydrateRoot=t.hydrateRoot,ol}var y0=x0();function qe(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=qe(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var v0={value:()=>{}};function Al(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new xl(o)}function xl(t){this._=t}function w0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}xl.prototype=Al.prototype={constructor:xl,on:function(t,r){var o=this._,i=w0(t+"",o),l,c=-1,d=i.length;if(arguments.length<2){for(;++c<d;)if((l=(t=i[c]).type)&&(l=S0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++c<d;)if(l=(t=i[c]).type)o[l]=kp(o[l],t.name,r);else if(r==null)for(l in o)o[l]=kp(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new xl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,c;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],i=0,l=c.length;i<l;++i)c[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,c=i.length;l<c;++l)i[l].value.apply(r,o)}};function S0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function kp(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=v0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var ac="http://www.w3.org/1999/xhtml";const Cp={svg:"http://www.w3.org/2000/svg",xhtml:ac,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ll(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),Cp.hasOwnProperty(r)?{space:Cp[r],local:t}:t}function N0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===ac&&r.documentElement.namespaceURI===ac?r.createElement(t):r.createElementNS(o,t)}}function k0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Hm(t){var r=Ll(t);return(r.local?k0:N0)(r)}function C0(){}function jc(t){return t==null?C0:function(){return this.querySelector(t)}}function I0(t){typeof t!="function"&&(t=jc(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=new Array(d),h,g,x=0;x<d;++x)(h=c[x])&&(g=t.call(h,h.__data__,x,c))&&("__data__"in h&&(g.__data__=h.__data__),f[x]=g);return new Pt(i,this._parents)}function j0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function b0(){return[]}function Vm(t){return t==null?b0:function(){return this.querySelectorAll(t)}}function E0(t){return function(){return j0(t.apply(this,arguments))}}function _0(t){typeof t=="function"?t=E0(t):t=Vm(t);for(var r=this._groups,o=r.length,i=[],l=[],c=0;c<o;++c)for(var d=r[c],f=d.length,h,g=0;g<f;++g)(h=d[g])&&(i.push(t.call(h,h.__data__,g,d)),l.push(h));return new Pt(i,l)}function Bm(t){return function(){return this.matches(t)}}function Wm(t){return function(r){return r.matches(t)}}var M0=Array.prototype.find;function P0(t){return function(){return M0.call(this.children,t)}}function D0(){return this.firstElementChild}function T0(t){return this.select(t==null?D0:P0(typeof t=="function"?t:Wm(t)))}var O0=Array.prototype.filter;function A0(){return Array.from(this.children)}function L0(t){return function(){return O0.call(this.children,t)}}function $0(t){return this.selectAll(t==null?A0:L0(typeof t=="function"?t:Wm(t)))}function z0(t){typeof t!="function"&&(t=Bm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],h,g=0;g<d;++g)(h=c[g])&&t.call(h,h.__data__,g,c)&&f.push(h);return new Pt(i,this._parents)}function Um(t){return new Array(t.length)}function R0(){return new Pt(this._enter||this._groups.map(Um),this._parents)}function kl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}kl.prototype={constructor:kl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function F0(t){return function(){return t}}function H0(t,r,o,i,l,c){for(var d=0,f,h=r.length,g=c.length;d<g;++d)(f=r[d])?(f.__data__=c[d],i[d]=f):o[d]=new kl(t,c[d]);for(;d<h;++d)(f=r[d])&&(l[d]=f)}function V0(t,r,o,i,l,c,d){var f,h,g=new Map,x=r.length,m=c.length,y=new Array(x),w;for(f=0;f<x;++f)(h=r[f])&&(y[f]=w=d.call(h,h.__data__,f,r)+"",g.has(w)?l[f]=h:g.set(w,h));for(f=0;f<m;++f)w=d.call(t,c[f],f,c)+"",(h=g.get(w))?(i[f]=h,h.__data__=c[f],g.delete(w)):o[f]=new kl(t,c[f]);for(f=0;f<x;++f)(h=r[f])&&g.get(y[f])===h&&(l[f]=h)}function B0(t){return t.__data__}function W0(t,r){if(!arguments.length)return Array.from(this,B0);var o=r?V0:H0,i=this._parents,l=this._groups;typeof t!="function"&&(t=F0(t));for(var c=l.length,d=new Array(c),f=new Array(c),h=new Array(c),g=0;g<c;++g){var x=i[g],m=l[g],y=m.length,w=U0(t.call(x,x&&x.__data__,g,i)),S=w.length,j=f[g]=new Array(S),C=d[g]=new Array(S),I=h[g]=new Array(y);o(x,m,j,C,I,w,r);for(var T=0,N=0,D,A;T<S;++T)if(D=j[T]){for(T>=N&&(N=T+1);!(A=C[N])&&++N<S;);D._next=A||null}}return d=new Pt(d,i),d._enter=f,d._exit=h,d}function U0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Y0(){return new Pt(this._exit||this._groups.map(Um),this._parents)}function X0(t,r,o){var i=this.enter(),l=this,c=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?c.remove():o(c),i&&l?i.merge(l).order():l}function G0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,c=i.length,d=Math.min(l,c),f=new Array(l),h=0;h<d;++h)for(var g=o[h],x=i[h],m=g.length,y=f[h]=new Array(m),w,S=0;S<m;++S)(w=g[S]||x[S])&&(y[S]=w);for(;h<l;++h)f[h]=o[h];return new Pt(f,this._parents)}function K0(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,c=i[l],d;--l>=0;)(d=i[l])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function Q0(t){t||(t=q0);function r(m,y){return m&&y?t(m.__data__,y.__data__):!m-!y}for(var o=this._groups,i=o.length,l=new Array(i),c=0;c<i;++c){for(var d=o[c],f=d.length,h=l[c]=new Array(f),g,x=0;x<f;++x)(g=d[x])&&(h[x]=g);h.sort(r)}return new Pt(l,this._parents).order()}function q0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function Z0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function J0(){return Array.from(this)}function ey(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length;l<c;++l){var d=i[l];if(d)return d}return null}function ty(){let t=0;for(const r of this)++t;return t}function ny(){return!this.node()}function ry(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],c=0,d=l.length,f;c<d;++c)(f=l[c])&&t.call(f,f.__data__,c,l);return this}function oy(t){return function(){this.removeAttribute(t)}}function sy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iy(t,r){return function(){this.setAttribute(t,r)}}function ly(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function ay(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function uy(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function cy(t,r){var o=Ll(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?sy:oy:typeof r=="function"?o.local?uy:ay:o.local?ly:iy)(o,r))}function Ym(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dy(t){return function(){this.style.removeProperty(t)}}function fy(t,r,o){return function(){this.style.setProperty(t,r,o)}}function py(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function my(t,r,o){return arguments.length>1?this.each((r==null?dy:typeof r=="function"?py:fy)(t,r,o??"")):go(this.node(),t)}function go(t,r){return t.style.getPropertyValue(r)||Ym(t).getComputedStyle(t,null).getPropertyValue(r)}function hy(t){return function(){delete this[t]}}function gy(t,r){return function(){this[t]=r}}function xy(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function yy(t,r){return arguments.length>1?this.each((r==null?hy:typeof r=="function"?xy:gy)(t,r)):this.node()[t]}function Xm(t){return t.trim().split(/^|\s+/)}function bc(t){return t.classList||new Gm(t)}function Gm(t){this._node=t,this._names=Xm(t.getAttribute("class")||"")}Gm.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Km(t,r){for(var o=bc(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function Qm(t,r){for(var o=bc(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function vy(t){return function(){Km(this,t)}}function wy(t){return function(){Qm(this,t)}}function Sy(t,r){return function(){(r.apply(this,arguments)?Km:Qm)(this,t)}}function Ny(t,r){var o=Xm(t+"");if(arguments.length<2){for(var i=bc(this.node()),l=-1,c=o.length;++l<c;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?Sy:r?vy:wy)(o,r))}function ky(){this.textContent=""}function Cy(t){return function(){this.textContent=t}}function Iy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function jy(t){return arguments.length?this.each(t==null?ky:(typeof t=="function"?Iy:Cy)(t)):this.node().textContent}function by(){this.innerHTML=""}function Ey(t){return function(){this.innerHTML=t}}function _y(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function My(t){return arguments.length?this.each(t==null?by:(typeof t=="function"?_y:Ey)(t)):this.node().innerHTML}function Py(){this.nextSibling&&this.parentNode.appendChild(this)}function Dy(){return this.each(Py)}function Ty(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oy(){return this.each(Ty)}function Ay(t){var r=typeof t=="function"?t:Hm(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Ly(){return null}function $y(t,r){var o=typeof t=="function"?t:Hm(t),i=r==null?Ly:typeof r=="function"?r:jc(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function zy(){var t=this.parentNode;t&&t.removeChild(this)}function Ry(){return this.each(zy)}function Fy(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Hy(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Vy(t){return this.select(t?Hy:Fy)}function By(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wy(t){return function(r){t.call(this,r,this.__data__)}}function Uy(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Yy(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,c;o<l;++o)c=r[o],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):r[++i]=c;++i?r.length=i:delete this.__on}}}function Xy(t,r,o){return function(){var i=this.__on,l,c=Wy(r);if(i){for(var d=0,f=i.length;d<f;++d)if((l=i[d]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=o),l.value=r;return}}this.addEventListener(t.type,c,o),l={type:t.type,name:t.name,value:r,listener:c,options:o},i?i.push(l):this.__on=[l]}}function Gy(t,r,o){var i=Uy(t+""),l,c=i.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,g=f.length,x;h<g;++h)for(l=0,x=f[h];l<c;++l)if((d=i[l]).type===x.type&&d.name===x.name)return x.value}return}for(f=r?Xy:Yy,l=0;l<c;++l)this.each(f(i[l],r,o));return this}function qm(t,r,o){var i=Ym(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function Ky(t,r){return function(){return qm(this,t,r)}}function Qy(t,r){return function(){return qm(this,t,r.apply(this,arguments))}}function qy(t,r){return this.each((typeof r=="function"?Qy:Ky)(t,r))}function*Zy(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length,d;l<c;++l)(d=i[l])&&(yield d)}var Zm=[null];function Pt(t,r){this._groups=t,this._parents=r}function Ts(){return new Pt([[document.documentElement]],Zm)}function Jy(){return this}Pt.prototype=Ts.prototype={constructor:Pt,select:I0,selectAll:_0,selectChild:T0,selectChildren:$0,filter:z0,data:W0,enter:R0,exit:Y0,join:X0,merge:G0,selection:Jy,order:K0,sort:Q0,call:Z0,nodes:J0,node:ey,size:ty,empty:ny,each:ry,attr:cy,style:my,property:yy,classed:Ny,text:jy,html:My,raise:Dy,lower:Oy,append:Ay,insert:$y,remove:Ry,clone:Vy,datum:By,on:Gy,dispatch:qy,[Symbol.iterator]:Zy};function _t(t){return typeof t=="string"?new Pt([[document.querySelector(t)]],[document.documentElement]):new Pt([[t]],Zm)}function ev(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Qt(t,r){if(t=ev(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const tv={passive:!1},ks={capture:!0,passive:!1};function Xu(t){t.stopImmediatePropagation()}function mo(t){t.preventDefault(),t.stopImmediatePropagation()}function Jm(t){var r=t.document.documentElement,o=_t(t).on("dragstart.drag",mo,ks);"onselectstart"in r?o.on("selectstart.drag",mo,ks):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function eh(t,r){var o=t.document.documentElement,i=_t(t).on("dragstart.drag",null);r&&(i.on("click.drag",mo,ks),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const sl=t=>()=>t;function uc(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:c,x:d,y:f,dx:h,dy:g,dispatch:x}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:x}})}uc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function nv(t){return!t.ctrlKey&&!t.button}function rv(){return this.parentNode}function ov(t,r){return r??{x:t.x,y:t.y}}function sv(){return navigator.maxTouchPoints||"ontouchstart"in this}function th(){var t=nv,r=rv,o=ov,i=sv,l={},c=Al("start","drag","end"),d=0,f,h,g,x,m=0;function y(D){D.on("mousedown.drag",w).filter(i).on("touchstart.drag",C).on("touchmove.drag",I,tv).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(D,A){if(!(x||!t.call(this,D,A))){var O=N(this,r.call(this,D,A),D,A,"mouse");O&&(_t(D.view).on("mousemove.drag",S,ks).on("mouseup.drag",j,ks),Jm(D.view),Xu(D),g=!1,f=D.clientX,h=D.clientY,O("start",D))}}function S(D){if(mo(D),!g){var A=D.clientX-f,O=D.clientY-h;g=A*A+O*O>m}l.mouse("drag",D)}function j(D){_t(D.view).on("mousemove.drag mouseup.drag",null),eh(D.view,g),mo(D),l.mouse("end",D)}function C(D,A){if(t.call(this,D,A)){var O=D.changedTouches,B=r.call(this,D,A),Y=O.length,q,F;for(q=0;q<Y;++q)(F=N(this,B,D,A,O[q].identifier,O[q]))&&(Xu(D),F("start",D,O[q]))}}function I(D){var A=D.changedTouches,O=A.length,B,Y;for(B=0;B<O;++B)(Y=l[A[B].identifier])&&(mo(D),Y("drag",D,A[B]))}function T(D){var A=D.changedTouches,O=A.length,B,Y;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),B=0;B<O;++B)(Y=l[A[B].identifier])&&(Xu(D),Y("end",D,A[B]))}function N(D,A,O,B,Y,q){var F=c.copy(),z=Qt(q||O,A),H,X,$;if(($=o.call(D,new uc("beforestart",{sourceEvent:O,target:y,identifier:Y,active:d,x:z[0],y:z[1],dx:0,dy:0,dispatch:F}),B))!=null)return H=$.x-z[0]||0,X=$.y-z[1]||0,function Q(W,_,P){var k=z,R;switch(W){case"start":l[Y]=Q,R=d++;break;case"end":delete l[Y],--d;case"drag":z=Qt(P||_,A),R=d;break}F.call(W,D,new uc(W,{sourceEvent:_,subject:$,target:y,identifier:Y,active:R,x:z[0]+H,y:z[1]+X,dx:z[0]-k[0],dy:z[1]-k[1],dispatch:F}),B)}}return y.filter=function(D){return arguments.length?(t=typeof D=="function"?D:sl(!!D),y):t},y.container=function(D){return arguments.length?(r=typeof D=="function"?D:sl(D),y):r},y.subject=function(D){return arguments.length?(o=typeof D=="function"?D:sl(D),y):o},y.touchable=function(D){return arguments.length?(i=typeof D=="function"?D:sl(!!D),y):i},y.on=function(){var D=c.on.apply(c,arguments);return D===c?y:D},y.clickDistance=function(D){return arguments.length?(m=(D=+D)*D,y):Math.sqrt(m)},y}function Ec(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function nh(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function Os(){}var Cs=.7,Cl=1/Cs,ho="\\s*([+-]?\\d+)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iv=/^#([0-9a-f]{3,8})$/,lv=new RegExp(`^rgb\\(${ho},${ho},${ho}\\)$`),av=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),uv=new RegExp(`^rgba\\(${ho},${ho},${ho},${Is}\\)$`),cv=new RegExp(`^rgba\\(${dn},${dn},${dn},${Is}\\)$`),dv=new RegExp(`^hsl\\(${Is},${dn},${dn}\\)$`),fv=new RegExp(`^hsla\\(${Is},${dn},${dn},${Is}\\)$`),Ip={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ec(Os,Cr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jp,formatHex:jp,formatHex8:pv,formatHsl:mv,formatRgb:bp,toString:bp});function jp(){return this.rgb().formatHex()}function pv(){return this.rgb().formatHex8()}function mv(){return rh(this).formatHsl()}function bp(){return this.rgb().formatRgb()}function Cr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=iv.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?Ep(r):o===3?new kt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?il(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?il(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=lv.exec(t))?new kt(r[1],r[2],r[3],1):(r=av.exec(t))?new kt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=uv.exec(t))?il(r[1],r[2],r[3],r[4]):(r=cv.exec(t))?il(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=dv.exec(t))?Pp(r[1],r[2]/100,r[3]/100,1):(r=fv.exec(t))?Pp(r[1],r[2]/100,r[3]/100,r[4]):Ip.hasOwnProperty(t)?Ep(Ip[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function Ep(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function il(t,r,o,i){return i<=0&&(t=r=o=NaN),new kt(t,r,o,i)}function hv(t){return t instanceof Os||(t=Cr(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function cc(t,r,o,i){return arguments.length===1?hv(t):new kt(t,r,o,i??1)}function kt(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}Ec(kt,cc,nh(Os,{brighter(t){return t=t==null?Cl:Math.pow(Cl,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cs:Math.pow(Cs,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kt(Nr(this.r),Nr(this.g),Nr(this.b),Il(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_p,formatHex:_p,formatHex8:gv,formatRgb:Mp,toString:Mp}));function _p(){return`#${Sr(this.r)}${Sr(this.g)}${Sr(this.b)}`}function gv(){return`#${Sr(this.r)}${Sr(this.g)}${Sr(this.b)}${Sr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mp(){const t=Il(this.opacity);return`${t===1?"rgb(":"rgba("}${Nr(this.r)}, ${Nr(this.g)}, ${Nr(this.b)}${t===1?")":`, ${t})`}`}function Il(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sr(t){return t=Nr(t),(t<16?"0":"")+t.toString(16)}function Pp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Zt(t,r,o,i)}function rh(t){if(t instanceof Zt)return new Zt(t.h,t.s,t.l,t.opacity);if(t instanceof Os||(t=Cr(t)),!t)return new Zt;if(t instanceof Zt)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),c=Math.max(r,o,i),d=NaN,f=c-l,h=(c+l)/2;return f?(r===c?d=(o-i)/f+(o<i)*6:o===c?d=(i-r)/f+2:d=(r-o)/f+4,f/=h<.5?c+l:2-c-l,d*=60):f=h>0&&h<1?0:d,new Zt(d,f,h,t.opacity)}function xv(t,r,o,i){return arguments.length===1?rh(t):new Zt(t,r,o,i??1)}function Zt(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}Ec(Zt,xv,nh(Os,{brighter(t){return t=t==null?Cl:Math.pow(Cl,t),new Zt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cs:Math.pow(Cs,t),new Zt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new kt(Gu(t>=240?t-240:t+120,l,i),Gu(t,l,i),Gu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Zt(Dp(this.h),ll(this.s),ll(this.l),Il(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Il(this.opacity);return`${t===1?"hsl(":"hsla("}${Dp(this.h)}, ${ll(this.s)*100}%, ${ll(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Dp(t){return t=(t||0)%360,t<0?t+360:t}function ll(t){return Math.max(0,Math.min(1,t||0))}function Gu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const _c=t=>()=>t;function yv(t,r){return function(o){return t+o*r}}function vv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function wv(t){return(t=+t)==1?oh:function(r,o){return o-r?vv(r,o,t):_c(isNaN(r)?o:r)}}function oh(t,r){var o=r-t;return o?yv(t,o):_c(isNaN(t)?r:t)}const jl=(function t(r){var o=wv(r);function i(l,c){var d=o((l=cc(l)).r,(c=cc(c)).r),f=o(l.g,c.g),h=o(l.b,c.b),g=oh(l.opacity,c.opacity);return function(x){return l.r=d(x),l.g=f(x),l.b=h(x),l.opacity=g(x),l+""}}return i.gamma=t,i})(1);function Sv(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(c){for(l=0;l<o;++l)i[l]=t[l]*(1-c)+r[l]*c;return i}}function Nv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),c=new Array(o),d;for(d=0;d<i;++d)l[d]=Ss(t[d],r[d]);for(;d<o;++d)c[d]=r[d];return function(f){for(d=0;d<i;++d)c[d]=l[d](f);return c}}function Cv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function cn(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function Iv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=Ss(t[l],r[l]):i[l]=r[l];return function(c){for(l in o)i[l]=o[l](c);return i}}var dc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ku=new RegExp(dc.source,"g");function jv(t){return function(){return t}}function bv(t){return function(r){return t(r)+""}}function sh(t,r){var o=dc.lastIndex=Ku.lastIndex=0,i,l,c,d=-1,f=[],h=[];for(t=t+"",r=r+"";(i=dc.exec(t))&&(l=Ku.exec(r));)(c=l.index)>o&&(c=r.slice(o,c),f[d]?f[d]+=c:f[++d]=c),(i=i[0])===(l=l[0])?f[d]?f[d]+=l:f[++d]=l:(f[++d]=null,h.push({i:d,x:cn(i,l)})),o=Ku.lastIndex;return o<r.length&&(c=r.slice(o),f[d]?f[d]+=c:f[++d]=c),f.length<2?h[0]?bv(h[0].x):jv(r):(r=h.length,function(g){for(var x=0,m;x<r;++x)f[(m=h[x]).i]=m.x(g);return f.join("")})}function Ss(t,r){var o=typeof r,i;return r==null||o==="boolean"?_c(r):(o==="number"?cn:o==="string"?(i=Cr(r))?(r=i,jl):sh:r instanceof Cr?jl:r instanceof Date?Cv:Nv(r)?Sv:Array.isArray(r)?kv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Iv:cn)(t,r)}var Tp=180/Math.PI,fc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ih(t,r,o,i,l,c){var d,f,h;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(h=t*o+r*i)&&(o-=t*h,i-=r*h),(f=Math.sqrt(o*o+i*i))&&(o/=f,i/=f,h/=f),t*i<r*o&&(t=-t,r=-r,h=-h,d=-d),{translateX:l,translateY:c,rotate:Math.atan2(r,t)*Tp,skewX:Math.atan(h)*Tp,scaleX:d,scaleY:f}}var al;function Ev(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?fc:ih(r.a,r.b,r.c,r.d,r.e,r.f)}function _v(t){return t==null||(al||(al=document.createElementNS("http://www.w3.org/2000/svg","g")),al.setAttribute("transform",t),!(t=al.transform.baseVal.consolidate()))?fc:(t=t.matrix,ih(t.a,t.b,t.c,t.d,t.e,t.f))}function lh(t,r,o,i){function l(g){return g.length?g.pop()+" ":""}function c(g,x,m,y,w,S){if(g!==m||x!==y){var j=w.push("translate(",null,r,null,o);S.push({i:j-4,x:cn(g,m)},{i:j-2,x:cn(x,y)})}else(m||y)&&w.push("translate("+m+r+y+o)}function d(g,x,m,y){g!==x?(g-x>180?x+=360:x-g>180&&(g+=360),y.push({i:m.push(l(m)+"rotate(",null,i)-2,x:cn(g,x)})):x&&m.push(l(m)+"rotate("+x+i)}function f(g,x,m,y){g!==x?y.push({i:m.push(l(m)+"skewX(",null,i)-2,x:cn(g,x)}):x&&m.push(l(m)+"skewX("+x+i)}function h(g,x,m,y,w,S){if(g!==m||x!==y){var j=w.push(l(w)+"scale(",null,",",null,")");S.push({i:j-4,x:cn(g,m)},{i:j-2,x:cn(x,y)})}else(m!==1||y!==1)&&w.push(l(w)+"scale("+m+","+y+")")}return function(g,x){var m=[],y=[];return g=t(g),x=t(x),c(g.translateX,g.translateY,x.translateX,x.translateY,m,y),d(g.rotate,x.rotate,m,y),f(g.skewX,x.skewX,m,y),h(g.scaleX,g.scaleY,x.scaleX,x.scaleY,m,y),g=x=null,function(w){for(var S=-1,j=y.length,C;++S<j;)m[(C=y[S]).i]=C.x(w);return m.join("")}}}var Mv=lh(Ev,"px, ","px)","deg)"),Pv=lh(_v,", ",")",")"),Dv=1e-12;function Op(t){return((t=Math.exp(t))+1/t)/2}function Tv(t){return((t=Math.exp(t))-1/t)/2}function Ov(t){return((t=Math.exp(2*t))-1)/(t+1)}const yl=(function t(r,o,i){function l(c,d){var f=c[0],h=c[1],g=c[2],x=d[0],m=d[1],y=d[2],w=x-f,S=m-h,j=w*w+S*S,C,I;if(j<Dv)I=Math.log(y/g)/r,C=function(B){return[f+B*w,h+B*S,g*Math.exp(r*B*I)]};else{var T=Math.sqrt(j),N=(y*y-g*g+i*j)/(2*g*o*T),D=(y*y-g*g-i*j)/(2*y*o*T),A=Math.log(Math.sqrt(N*N+1)-N),O=Math.log(Math.sqrt(D*D+1)-D);I=(O-A)/r,C=function(B){var Y=B*I,q=Op(A),F=g/(o*T)*(q*Ov(r*Y+A)-Tv(A));return[f+F*w,h+F*S,g*q/Op(r*Y+A)]}}return C.duration=I*1e3*r/Math.SQRT2,C}return l.rho=function(c){var d=Math.max(.001,+c),f=d*d,h=f*f;return t(d,f,h)},l})(Math.SQRT2,2,4);var xo=0,ys=0,ms=0,ah=1e3,bl,vs,El=0,Ir=0,$l=0,js=typeof performance=="object"&&performance.now?performance:Date,uh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mc(){return Ir||(uh(Av),Ir=js.now()+$l)}function Av(){Ir=0}function _l(){this._call=this._time=this._next=null}_l.prototype=ch.prototype={constructor:_l,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?Mc():+o)+(r==null?0:+r),!this._next&&vs!==this&&(vs?vs._next=this:bl=this,vs=this),this._call=t,this._time=o,pc()},stop:function(){this._call&&(this._call=null,this._time=1/0,pc())}};function ch(t,r,o){var i=new _l;return i.restart(t,r,o),i}function Lv(){Mc(),++xo;for(var t=bl,r;t;)(r=Ir-t._time)>=0&&t._call.call(void 0,r),t=t._next;--xo}function Ap(){Ir=(El=js.now())+$l,xo=ys=0;try{Lv()}finally{xo=0,zv(),Ir=0}}function $v(){var t=js.now(),r=t-El;r>ah&&($l-=r,El=t)}function zv(){for(var t,r=bl,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:bl=o);vs=t,pc(i)}function pc(t){if(!xo){ys&&(ys=clearTimeout(ys));var r=t-Ir;r>24?(t<1/0&&(ys=setTimeout(Ap,t-js.now()-$l)),ms&&(ms=clearInterval(ms))):(ms||(El=js.now(),ms=setInterval($v,ah)),xo=1,uh(Ap))}}function Lp(t,r,o){var i=new _l;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var Rv=Al("start","end","cancel","interrupt"),Fv=[],dh=0,$p=1,mc=2,vl=3,zp=4,hc=5,wl=6;function zl(t,r,o,i,l,c){var d=t.__transition;if(!d)t.__transition={};else if(o in d)return;Hv(t,o,{name:r,index:i,group:l,on:Rv,tween:Fv,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:dh})}function Pc(t,r){var o=tn(t,r);if(o.state>dh)throw new Error("too late; already scheduled");return o}function pn(t,r){var o=tn(t,r);if(o.state>vl)throw new Error("too late; already running");return o}function tn(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function Hv(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=ch(c,0,o.time);function c(g){o.state=$p,o.timer.restart(d,o.delay,o.time),o.delay<=g&&d(g-o.delay)}function d(g){var x,m,y,w;if(o.state!==$p)return h();for(x in i)if(w=i[x],w.name===o.name){if(w.state===vl)return Lp(d);w.state===zp?(w.state=wl,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[x]):+x<r&&(w.state=wl,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[x])}if(Lp(function(){o.state===vl&&(o.state=zp,o.timer.restart(f,o.delay,o.time),f(g))}),o.state=mc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===mc){for(o.state=vl,l=new Array(y=o.tween.length),x=0,m=-1;x<y;++x)(w=o.tween[x].value.call(t,t.__data__,o.index,o.group))&&(l[++m]=w);l.length=m+1}}function f(g){for(var x=g<o.duration?o.ease.call(null,g/o.duration):(o.timer.restart(h),o.state=hc,1),m=-1,y=l.length;++m<y;)l[m].call(t,x);o.state===hc&&(o.on.call("end",t,t.__data__,o.index,o.group),h())}function h(){o.state=wl,o.timer.stop(),delete i[r];for(var g in i)return;delete t.__transition}}function Sl(t,r){var o=t.__transition,i,l,c=!0,d;if(o){r=r==null?null:r+"";for(d in o){if((i=o[d]).name!==r){c=!1;continue}l=i.state>mc&&i.state<hc,i.state=wl,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[d]}c&&delete t.__transition}}function Vv(t){return this.each(function(){Sl(this,t)})}function Bv(t,r){var o,i;return function(){var l=pn(this,t),c=l.tween;if(c!==o){i=o=c;for(var d=0,f=i.length;d<f;++d)if(i[d].name===r){i=i.slice(),i.splice(d,1);break}}l.tween=i}}function Wv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var c=pn(this,t),d=c.tween;if(d!==i){l=(i=d).slice();for(var f={name:r,value:o},h=0,g=l.length;h<g;++h)if(l[h].name===r){l[h]=f;break}h===g&&l.push(f)}c.tween=l}}function Uv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=tn(this.node(),o).tween,l=0,c=i.length,d;l<c;++l)if((d=i[l]).name===t)return d.value;return null}return this.each((r==null?Bv:Wv)(o,t,r))}function Dc(t,r,o){var i=t._id;return t.each(function(){var l=pn(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return tn(l,i).value[r]}}function fh(t,r){var o;return(typeof r=="number"?cn:r instanceof Cr?jl:(o=Cr(r))?(r=o,jl):sh)(t,r)}function Yv(t){return function(){this.removeAttribute(t)}}function Xv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttribute(t);return d===l?null:d===i?c:c=r(i=d,o)}}function Kv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===l?null:d===i?c:c=r(i=d,o)}}function Qv(t,r,o){var i,l,c;return function(){var d,f=o(this),h;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),h=f+"",d===h?null:d===i&&h===l?c:(l=h,c=r(i=d,f)))}}function qv(t,r,o){var i,l,c;return function(){var d,f=o(this),h;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),h=f+"",d===h?null:d===i&&h===l?c:(l=h,c=r(i=d,f)))}}function Zv(t,r){var o=Ll(t),i=o==="transform"?Pv:fh;return this.attrTween(t,typeof r=="function"?(o.local?qv:Qv)(o,i,Dc(this,"attr."+t,r)):r==null?(o.local?Xv:Yv)(o):(o.local?Kv:Gv)(o,i,r))}function Jv(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function ew(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function tw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&ew(t,c)),o}return l._value=r,l}function nw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&Jv(t,c)),o}return l._value=r,l}function rw(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=Ll(t);return this.tween(o,(i.local?tw:nw)(i,r))}function ow(t,r){return function(){Pc(this,t).delay=+r.apply(this,arguments)}}function sw(t,r){return r=+r,function(){Pc(this,t).delay=r}}function iw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?ow:sw)(r,t)):tn(this.node(),r).delay}function lw(t,r){return function(){pn(this,t).duration=+r.apply(this,arguments)}}function aw(t,r){return r=+r,function(){pn(this,t).duration=r}}function uw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?lw:aw)(r,t)):tn(this.node(),r).duration}function cw(t,r){if(typeof r!="function")throw new Error;return function(){pn(this,t).ease=r}}function dw(t){var r=this._id;return arguments.length?this.each(cw(r,t)):tn(this.node(),r).ease}function fw(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;pn(this,t).ease=o}}function pw(t){if(typeof t!="function")throw new Error;return this.each(fw(this._id,t))}function mw(t){typeof t!="function"&&(t=Bm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],h,g=0;g<d;++g)(h=c[g])&&t.call(h,h.__data__,g,c)&&f.push(h);return new bn(i,this._parents,this._name,this._id)}function hw(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,c=Math.min(i,l),d=new Array(i),f=0;f<c;++f)for(var h=r[f],g=o[f],x=h.length,m=d[f]=new Array(x),y,w=0;w<x;++w)(y=h[w]||g[w])&&(m[w]=y);for(;f<i;++f)d[f]=r[f];return new bn(d,this._parents,this._name,this._id)}function gw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function xw(t,r,o){var i,l,c=gw(r)?Pc:pn;return function(){var d=c(this,t),f=d.on;f!==i&&(l=(i=f).copy()).on(r,o),d.on=l}}function yw(t,r){var o=this._id;return arguments.length<2?tn(this.node(),o).on.on(t):this.each(xw(o,t,r))}function vw(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function ww(){return this.on("end.remove",vw(this._id))}function Sw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=jc(t));for(var i=this._groups,l=i.length,c=new Array(l),d=0;d<l;++d)for(var f=i[d],h=f.length,g=c[d]=new Array(h),x,m,y=0;y<h;++y)(x=f[y])&&(m=t.call(x,x.__data__,y,f))&&("__data__"in x&&(m.__data__=x.__data__),g[y]=m,zl(g[y],r,o,y,g,tn(x,o)));return new bn(c,this._parents,r,o)}function Nw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Vm(t));for(var i=this._groups,l=i.length,c=[],d=[],f=0;f<l;++f)for(var h=i[f],g=h.length,x,m=0;m<g;++m)if(x=h[m]){for(var y=t.call(x,x.__data__,m,h),w,S=tn(x,o),j=0,C=y.length;j<C;++j)(w=y[j])&&zl(w,r,o,j,y,S);c.push(y),d.push(x)}return new bn(c,d,r,o)}var kw=Ts.prototype.constructor;function Cw(){return new kw(this._groups,this._parents)}function Iw(t,r){var o,i,l;return function(){var c=go(this,t),d=(this.style.removeProperty(t),go(this,t));return c===d?null:c===o&&d===i?l:l=r(o=c,i=d)}}function ph(t){return function(){this.style.removeProperty(t)}}function jw(t,r,o){var i,l=o+"",c;return function(){var d=go(this,t);return d===l?null:d===i?c:c=r(i=d,o)}}function bw(t,r,o){var i,l,c;return function(){var d=go(this,t),f=o(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(t),go(this,t))),d===h?null:d===i&&h===l?c:(l=h,c=r(i=d,f))}}function Ew(t,r){var o,i,l,c="style."+r,d="end."+c,f;return function(){var h=pn(this,t),g=h.on,x=h.value[c]==null?f||(f=ph(r)):void 0;(g!==o||l!==x)&&(i=(o=g).copy()).on(d,l=x),h.on=i}}function _w(t,r,o){var i=(t+="")=="transform"?Mv:fh;return r==null?this.styleTween(t,Iw(t,i)).on("end.style."+t,ph(t)):typeof r=="function"?this.styleTween(t,bw(t,i,Dc(this,"style."+t,r))).each(Ew(this._id,t)):this.styleTween(t,jw(t,i,r),o).on("end.style."+t,null)}function Mw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function Pw(t,r,o){var i,l;function c(){var d=r.apply(this,arguments);return d!==l&&(i=(l=d)&&Mw(t,d,o)),i}return c._value=r,c}function Dw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,Pw(t,r,o??""))}function Tw(t){return function(){this.textContent=t}}function Ow(t){return function(){var r=t(this);this.textContent=r??""}}function Aw(t){return this.tween("text",typeof t=="function"?Ow(Dc(this,"text",t)):Tw(t==null?"":t+""))}function Lw(t){return function(r){this.textContent=t.call(this,r)}}function $w(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&Lw(l)),r}return i._value=t,i}function zw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,$w(t))}function Rw(){for(var t=this._name,r=this._id,o=mh(),i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,h,g=0;g<f;++g)if(h=d[g]){var x=tn(h,r);zl(h,t,o,g,d,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new bn(i,this._parents,t,o)}function Fw(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(c,d){var f={value:d},h={value:function(){--l===0&&c()}};o.each(function(){var g=pn(this,i),x=g.on;x!==t&&(r=(t=x).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(h)),g.on=r}),l===0&&c()})}var Hw=0;function bn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function mh(){return++Hw}var Cn=Ts.prototype;bn.prototype={constructor:bn,select:Sw,selectAll:Nw,selectChild:Cn.selectChild,selectChildren:Cn.selectChildren,filter:mw,merge:hw,selection:Cw,transition:Rw,call:Cn.call,nodes:Cn.nodes,node:Cn.node,size:Cn.size,empty:Cn.empty,each:Cn.each,on:yw,attr:Zv,attrTween:rw,style:_w,styleTween:Dw,text:Aw,textTween:zw,remove:ww,tween:Uv,delay:iw,duration:uw,ease:dw,easeVarying:pw,end:Fw,[Symbol.iterator]:Cn[Symbol.iterator]};function Vw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Bw={time:null,delay:0,duration:250,ease:Vw};function Ww(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Uw(t){var r,o;t instanceof bn?(r=t._id,t=t._name):(r=mh(),(o=Bw).time=Mc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,h,g=0;g<f;++g)(h=d[g])&&zl(h,t,r,g,d,o||Ww(h,r));return new bn(i,this._parents,t,r)}Ts.prototype.interrupt=Vv;Ts.prototype.transition=Uw;const ul=t=>()=>t;function Yw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function jn(t,r,o){this.k=t,this.x=r,this.y=o}jn.prototype={constructor:jn,scale:function(t){return t===1?this:new jn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new jn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rl=new jn(1,0,0);hh.prototype=jn.prototype;function hh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Rl;return t.__zoom}function Qu(t){t.stopImmediatePropagation()}function hs(t){t.preventDefault(),t.stopImmediatePropagation()}function Xw(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Gw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Rp(){return this.__zoom||Rl}function Kw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Qw(){return navigator.maxTouchPoints||"ontouchstart"in this}function qw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],c=t.invertY(r[0][1])-o[0][1],d=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function gh(){var t=Xw,r=Gw,o=qw,i=Kw,l=Qw,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,h=yl,g=Al("start","zoom","end"),x,m,y,w=500,S=150,j=0,C=10;function I($){$.property("__zoom",Rp).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",F).filter(l).on("touchstart.zoom",z).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function($,Q,W,_){var P=$.selection?$.selection():$;P.property("__zoom",Rp),$!==P?A($,Q,W,_):P.interrupt().each(function(){O(this,arguments).event(_).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},I.scaleBy=function($,Q,W,_){I.scaleTo($,function(){var P=this.__zoom.k,k=typeof Q=="function"?Q.apply(this,arguments):Q;return P*k},W,_)},I.scaleTo=function($,Q,W,_){I.transform($,function(){var P=r.apply(this,arguments),k=this.__zoom,R=W==null?D(P):typeof W=="function"?W.apply(this,arguments):W,E=k.invert(R),M=typeof Q=="function"?Q.apply(this,arguments):Q;return o(N(T(k,M),R,E),P,d)},W,_)},I.translateBy=function($,Q,W,_){I.transform($,function(){return o(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof W=="function"?W.apply(this,arguments):W),r.apply(this,arguments),d)},null,_)},I.translateTo=function($,Q,W,_,P){I.transform($,function(){var k=r.apply(this,arguments),R=this.__zoom,E=_==null?D(k):typeof _=="function"?_.apply(this,arguments):_;return o(Rl.translate(E[0],E[1]).scale(R.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof W=="function"?-W.apply(this,arguments):-W),k,d)},_,P)};function T($,Q){return Q=Math.max(c[0],Math.min(c[1],Q)),Q===$.k?$:new jn(Q,$.x,$.y)}function N($,Q,W){var _=Q[0]-W[0]*$.k,P=Q[1]-W[1]*$.k;return _===$.x&&P===$.y?$:new jn($.k,_,P)}function D($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function A($,Q,W,_){$.on("start.zoom",function(){O(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(_).end()}).tween("zoom",function(){var P=this,k=arguments,R=O(P,k).event(_),E=r.apply(P,k),M=W==null?D(E):typeof W=="function"?W.apply(P,k):W,Z=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),J=P.__zoom,oe=typeof Q=="function"?Q.apply(P,k):Q,ie=h(J.invert(M).concat(Z/J.k),oe.invert(M).concat(Z/oe.k));return function(le){if(le===1)le=oe;else{var se=ie(le),G=Z/se[2];le=new jn(G,M[0]-se[0]*G,M[1]-se[1]*G)}R.zoom(null,le)}})}function O($,Q,W){return!W&&$.__zooming||new B($,Q)}function B($,Q){this.that=$,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=r.apply($,Q),this.taps=0}B.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,Q){return this.mouse&&$!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var Q=_t(this.that).datum();g.call($,this.that,new Yw($,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:g}),Q)}};function Y($,...Q){if(!t.apply(this,arguments))return;var W=O(this,Q).event($),_=this.__zoom,P=Math.max(c[0],Math.min(c[1],_.k*Math.pow(2,i.apply(this,arguments)))),k=Qt($);if(W.wheel)(W.mouse[0][0]!==k[0]||W.mouse[0][1]!==k[1])&&(W.mouse[1]=_.invert(W.mouse[0]=k)),clearTimeout(W.wheel);else{if(_.k===P)return;W.mouse=[k,_.invert(k)],Sl(this),W.start()}hs($),W.wheel=setTimeout(R,S),W.zoom("mouse",o(N(T(_,P),W.mouse[0],W.mouse[1]),W.extent,d));function R(){W.wheel=null,W.end()}}function q($,...Q){if(y||!t.apply(this,arguments))return;var W=$.currentTarget,_=O(this,Q,!0).event($),P=_t($.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",Z,!0),k=Qt($,W),R=$.clientX,E=$.clientY;Jm($.view),Qu($),_.mouse=[k,this.__zoom.invert(k)],Sl(this),_.start();function M(J){if(hs(J),!_.moved){var oe=J.clientX-R,ie=J.clientY-E;_.moved=oe*oe+ie*ie>j}_.event(J).zoom("mouse",o(N(_.that.__zoom,_.mouse[0]=Qt(J,W),_.mouse[1]),_.extent,d))}function Z(J){P.on("mousemove.zoom mouseup.zoom",null),eh(J.view,_.moved),hs(J),_.event(J).end()}}function F($,...Q){if(t.apply(this,arguments)){var W=this.__zoom,_=Qt($.changedTouches?$.changedTouches[0]:$,this),P=W.invert(_),k=W.k*($.shiftKey?.5:2),R=o(N(T(W,k),_,P),r.apply(this,Q),d);hs($),f>0?_t(this).transition().duration(f).call(A,R,_,$):_t(this).call(I.transform,R,_,$)}}function z($,...Q){if(t.apply(this,arguments)){var W=$.touches,_=W.length,P=O(this,Q,$.changedTouches.length===_).event($),k,R,E,M;for(Qu($),R=0;R<_;++R)E=W[R],M=Qt(E,this),M=[M,this.__zoom.invert(M),E.identifier],P.touch0?!P.touch1&&P.touch0[2]!==M[2]&&(P.touch1=M,P.taps=0):(P.touch0=M,k=!0,P.taps=1+!!x);x&&(x=clearTimeout(x)),k&&(P.taps<2&&(m=M[0],x=setTimeout(function(){x=null},w)),Sl(this),P.start())}}function H($,...Q){if(this.__zooming){var W=O(this,Q).event($),_=$.changedTouches,P=_.length,k,R,E,M;for(hs($),k=0;k<P;++k)R=_[k],E=Qt(R,this),W.touch0&&W.touch0[2]===R.identifier?W.touch0[0]=E:W.touch1&&W.touch1[2]===R.identifier&&(W.touch1[0]=E);if(R=W.that.__zoom,W.touch1){var Z=W.touch0[0],J=W.touch0[1],oe=W.touch1[0],ie=W.touch1[1],le=(le=oe[0]-Z[0])*le+(le=oe[1]-Z[1])*le,se=(se=ie[0]-J[0])*se+(se=ie[1]-J[1])*se;R=T(R,Math.sqrt(le/se)),E=[(Z[0]+oe[0])/2,(Z[1]+oe[1])/2],M=[(J[0]+ie[0])/2,(J[1]+ie[1])/2]}else if(W.touch0)E=W.touch0[0],M=W.touch0[1];else return;W.zoom("touch",o(N(R,E,M),W.extent,d))}}function X($,...Q){if(this.__zooming){var W=O(this,Q).event($),_=$.changedTouches,P=_.length,k,R;for(Qu($),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),k=0;k<P;++k)R=_[k],W.touch0&&W.touch0[2]===R.identifier?delete W.touch0:W.touch1&&W.touch1[2]===R.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(R=Qt(R,this),Math.hypot(m[0]-R[0],m[1]-R[1])<C)){var E=_t(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return I.wheelDelta=function($){return arguments.length?(i=typeof $=="function"?$:ul(+$),I):i},I.filter=function($){return arguments.length?(t=typeof $=="function"?$:ul(!!$),I):t},I.touchable=function($){return arguments.length?(l=typeof $=="function"?$:ul(!!$),I):l},I.extent=function($){return arguments.length?(r=typeof $=="function"?$:ul([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),I):r},I.scaleExtent=function($){return arguments.length?(c[0]=+$[0],c[1]=+$[1],I):[c[0],c[1]]},I.translateExtent=function($){return arguments.length?(d[0][0]=+$[0][0],d[1][0]=+$[1][0],d[0][1]=+$[0][1],d[1][1]=+$[1][1],I):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},I.constrain=function($){return arguments.length?(o=$,I):o},I.duration=function($){return arguments.length?(f=+$,I):f},I.interpolate=function($){return arguments.length?(h=$,I):h},I.on=function(){var $=g.on.apply(g,arguments);return $===g?I:$},I.clickDistance=function($){return arguments.length?(j=($=+$)*$,I):Math.sqrt(j)},I.tapDistance=function($){return arguments.length?(C=+$,I):C},I}const fn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},bs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],xh=["Enter"," ","Escape"],yh={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var yo;(function(t){t.Strict="strict",t.Loose="loose"})(yo||(yo={}));var kr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(kr||(kr={}));var Es;(function(t){t.Partial="partial",t.Full="full"})(Es||(Es={}));const vh={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Zn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Zn||(Zn={}));var Ml;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ml||(Ml={}));var Ne;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ne||(Ne={}));const Fp={[Ne.Left]:Ne.Right,[Ne.Right]:Ne.Left,[Ne.Top]:Ne.Bottom,[Ne.Bottom]:Ne.Top};function wh(t){return t===null?null:t?"valid":"invalid"}const Sh=t=>"id"in t&&"source"in t&&"target"in t,Zw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Tc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),As=(t,r=[0,0])=>{const{width:o,height:i}=En(t),l=t.origin??r,c=o*l[0],d=i*l[1];return{x:t.position.x-c,y:t.position.y-d}},Jw=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const c=typeof l=="string";let d=!r.nodeLookup&&!c?l:void 0;r.nodeLookup&&(d=c?r.nodeLookup.get(l):Tc(l)?l:r.nodeLookup.get(l.id));const f=d?Pl(d,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fl(i,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Hl(o)},Ls=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Fl(o,Pl(l)),i=!0)}),i?Hl(o):{x:0,y:0,width:0,height:0}},Oc=(t,r,[o,i,l]=[0,0,1],c=!1,d=!1)=>{const f={...zs(r,[o,i,l]),width:r.width/l,height:r.height/l},h=[];for(const g of t.values()){const{measured:x,selectable:m=!0,hidden:y=!1}=g;if(d&&!m||y)continue;const w=x.width??g.width??g.initialWidth??null,S=x.height??g.height??g.initialHeight??null,j=_s(f,wo(g)),C=(w??0)*(S??0),I=c&&j>0;(!g.internals.handleBounds||I||j>=C||g.dragging)&&h.push(g)}return h},e1=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function t1(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function n1({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:c},d){if(t.size===0)return Promise.resolve(!0);const f=t1(t,d),h=Ls(f),g=Ac(h,r,o,(d==null?void 0:d.minZoom)??l,(d==null?void 0:d.maxZoom)??c,(d==null?void 0:d.padding)??.1);return await i.setViewport(g,{duration:d==null?void 0:d.duration,ease:d==null?void 0:d.ease,interpolate:d==null?void 0:d.interpolate}),Promise.resolve(!0)}function Nh({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:c}){const d=o.get(t),f=d.parentId?o.get(d.parentId):void 0,{x:h,y:g}=f?f.internals.positionAbsolute:{x:0,y:0},x=d.origin??i;let m=d.extent||l;if(d.extent==="parent"&&!d.expandParent)if(!f)c==null||c("005",fn.error005());else{const w=f.measured.width,S=f.measured.height;w&&S&&(m=[[h,g],[h+w,g+S]])}else f&&So(d.extent)&&(m=[[d.extent[0][0]+h,d.extent[0][1]+g],[d.extent[1][0]+h,d.extent[1][1]+g]]);const y=So(m)?jr(r,m,d.measured):r;return(d.measured.width===void 0||d.measured.height===void 0)&&(c==null||c("015",fn.error015())),{position:{x:y.x-h+(d.measured.width??0)*x[0],y:y.y-g+(d.measured.height??0)*x[1]},positionAbsolute:y}}async function r1({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const c=new Set(t.map(y=>y.id)),d=[];for(const y of o){if(y.deletable===!1)continue;const w=c.has(y.id),S=!w&&y.parentId&&d.find(j=>j.id===y.parentId);(w||S)&&d.push(y)}const f=new Set(r.map(y=>y.id)),h=i.filter(y=>y.deletable!==!1),x=e1(d,h);for(const y of h)f.has(y.id)&&!x.find(S=>S.id===y.id)&&x.push(y);if(!l)return{edges:x,nodes:d};const m=await l({nodes:d,edges:x});return typeof m=="boolean"?m?{edges:x,nodes:d}:{edges:[],nodes:[]}:m}const vo=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),jr=(t={x:0,y:0},r,o)=>({x:vo(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:vo(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function kh(t,r,o){const{width:i,height:l}=En(o),{x:c,y:d}=o.internals.positionAbsolute;return jr(t,[[c,d],[c+i,d+l]],r)}const Hp=(t,r,o)=>t<r?vo(Math.abs(t-r),1,r)/r:t>o?-vo(Math.abs(t-o),1,r)/r:0,Ch=(t,r,o=15,i=40)=>{const l=Hp(t.x,i,r.width-i)*o,c=Hp(t.y,i,r.height-i)*o;return[l,c]},Fl=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),gc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Hl=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),wo=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Tc(t)?t.internals.positionAbsolute:As(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0}},Pl=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Tc(t)?t.internals.positionAbsolute:As(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0)}},Ih=(t,r)=>Hl(Fl(gc(t),gc(r))),_s=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Vp=t=>Jt(t.width)&&Jt(t.height)&&Jt(t.x)&&Jt(t.y),Jt=t=>!isNaN(t)&&isFinite(t),o1=(t,r)=>{},$s=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),zs=({x:t,y:r},[o,i,l],c=!1,d=[1,1])=>{const f={x:(t-o)/l,y:(r-i)/l};return c?$s(f,d):f},Dl=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function ao(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function s1(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=ao(t,o),l=ao(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=ao(t.top??t.y??0,o),l=ao(t.bottom??t.y??0,o),c=ao(t.left??t.x??0,r),d=ao(t.right??t.x??0,r);return{top:i,right:d,bottom:l,left:c,x:c+d,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function i1(t,r,o,i,l,c){const{x:d,y:f}=Dl(t,[r,o,i]),{x:h,y:g}=Dl({x:t.x+t.width,y:t.y+t.height},[r,o,i]),x=l-h,m=c-g;return{left:Math.floor(d),top:Math.floor(f),right:Math.floor(x),bottom:Math.floor(m)}}const Ac=(t,r,o,i,l,c)=>{const d=s1(c,r,o),f=(r-d.x)/t.width,h=(o-d.y)/t.height,g=Math.min(f,h),x=vo(g,i,l),m=t.x+t.width/2,y=t.y+t.height/2,w=r/2-m*x,S=o/2-y*x,j=i1(t,w,S,x,r,o),C={left:Math.min(j.left-d.left,0),top:Math.min(j.top-d.top,0),right:Math.min(j.right-d.right,0),bottom:Math.min(j.bottom-d.bottom,0)};return{x:w-C.left+C.right,y:S-C.top+C.bottom,zoom:x}},Ms=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function So(t){return t!=null&&t!=="parent"}function En(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function jh(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function bh(t,r={width:0,height:0},o,i,l){const c={...t},d=i.get(o);if(d){const f=d.origin||l;c.x+=d.internals.positionAbsolute.x-(r.width??0)*f[0],c.y+=d.internals.positionAbsolute.y-(r.height??0)*f[1]}return c}function Bp(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function l1(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function a1(t){return{...yh,...t||{}}}function Ns(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:c,y:d}=en(t),f=zs({x:c-((l==null?void 0:l.left)??0),y:d-((l==null?void 0:l.top)??0)},i),{x:h,y:g}=o?$s(f,r):f;return{xSnapped:h,ySnapped:g,...f}}const Lc=t=>({width:t.offsetWidth,height:t.offsetHeight}),Eh=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},u1=["INPUT","SELECT","TEXTAREA"];function _h(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:u1.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Mh=t=>"clientX"in t,en=(t,r)=>{var c,d;const o=Mh(t),i=o?t.clientX:(c=t.touches)==null?void 0:c[0].clientX,l=o?t.clientY:(d=t.touches)==null?void 0:d[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Wp=(t,r,o,i,l)=>{const c=r.querySelectorAll(`.${t}`);return!c||!c.length?null:Array.from(c).map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:l,position:d.getAttribute("data-handlepos"),x:(f.left-o.left)/i,y:(f.top-o.top)/i,...Lc(d)}})};function Ph({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:f}){const h=t*.125+l*.375+d*.375+o*.125,g=r*.125+c*.375+f*.375+i*.125,x=Math.abs(h-t),m=Math.abs(g-r);return[h,g,x,m]}function cl(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Up({pos:t,x1:r,y1:o,x2:i,y2:l,c}){switch(t){case Ne.Left:return[r-cl(r-i,c),o];case Ne.Right:return[r+cl(i-r,c),o];case Ne.Top:return[r,o-cl(o-l,c)];case Ne.Bottom:return[r,o+cl(l-o,c)]}}function Vl({sourceX:t,sourceY:r,sourcePosition:o=Ne.Bottom,targetX:i,targetY:l,targetPosition:c=Ne.Top,curvature:d=.25}){const[f,h]=Up({pos:o,x1:t,y1:r,x2:i,y2:l,c:d}),[g,x]=Up({pos:c,x1:i,y1:l,x2:t,y2:r,c:d}),[m,y,w,S]=Ph({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:f,sourceControlY:h,targetControlX:g,targetControlY:x});return[`M${t},${r} C${f},${h} ${g},${x} ${i},${l}`,m,y,w,S]}function Dh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,c=o<t?o+l:o-l,d=Math.abs(i-r)/2,f=i<r?i+d:i-d;return[c,f,l,d]}function c1({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:c="basic"}){if(c==="manual")return i;const d=l&&o?i+1e3:i,f=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return d+f}function d1({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const c=Fl(Pl(t),Pl(r));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return _s(d,Hl(c))>0}const f1=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,p1=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),m1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||f1;let l;return Sh(t)?l={...t}:l={...t,id:i(t)},p1(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Th({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,c,d,f]=Dh({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,c,d,f]}const Yp={[Ne.Left]:{x:-1,y:0},[Ne.Right]:{x:1,y:0},[Ne.Top]:{x:0,y:-1},[Ne.Bottom]:{x:0,y:1}},h1=({source:t,sourcePosition:r=Ne.Bottom,target:o})=>r===Ne.Left||r===Ne.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},Xp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function g1({source:t,sourcePosition:r=Ne.Bottom,target:o,targetPosition:i=Ne.Top,center:l,offset:c,stepPosition:d}){const f=Yp[r],h=Yp[i],g={x:t.x+f.x*c,y:t.y+f.y*c},x={x:o.x+h.x*c,y:o.y+h.y*c},m=h1({source:g,sourcePosition:r,target:x}),y=m.x!==0?"x":"y",w=m[y];let S=[],j,C;const I={x:0,y:0},T={x:0,y:0},[,,N,D]=Dh({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(f[y]*h[y]===-1){y==="x"?(j=l.x??g.x+(x.x-g.x)*d,C=l.y??(g.y+x.y)/2):(j=l.x??(g.x+x.x)/2,C=l.y??g.y+(x.y-g.y)*d);const O=[{x:j,y:g.y},{x:j,y:x.y}],B=[{x:g.x,y:C},{x:x.x,y:C}];f[y]===w?S=y==="x"?O:B:S=y==="x"?B:O}else{const O=[{x:g.x,y:x.y}],B=[{x:x.x,y:g.y}];if(y==="x"?S=f.x===w?B:O:S=f.y===w?O:B,r===i){const H=Math.abs(t[y]-o[y]);if(H<=c){const X=Math.min(c-1,c-H);f[y]===w?I[y]=(g[y]>t[y]?-1:1)*X:T[y]=(x[y]>o[y]?-1:1)*X}}if(r!==i){const H=y==="x"?"y":"x",X=f[y]===h[H],$=g[H]>x[H],Q=g[H]<x[H];(f[y]===1&&(!X&&$||X&&Q)||f[y]!==1&&(!X&&Q||X&&$))&&(S=y==="x"?O:B)}const Y={x:g.x+I.x,y:g.y+I.y},q={x:x.x+T.x,y:x.y+T.y},F=Math.max(Math.abs(Y.x-S[0].x),Math.abs(q.x-S[0].x)),z=Math.max(Math.abs(Y.y-S[0].y),Math.abs(q.y-S[0].y));F>=z?(j=(Y.x+q.x)/2,C=S[0].y):(j=S[0].x,C=(Y.y+q.y)/2)}return[[t,{x:g.x+I.x,y:g.y+I.y},...S,{x:x.x+T.x,y:x.y+T.y},o],j,C,N,D]}function x1(t,r,o,i){const l=Math.min(Xp(t,r)/2,Xp(r,o)/2,i),{x:c,y:d}=r;if(t.x===c&&c===o.x||t.y===d&&d===o.y)return`L${c} ${d}`;if(t.y===d){const g=t.x<o.x?-1:1,x=t.y<o.y?1:-1;return`L ${c+l*g},${d}Q ${c},${d} ${c},${d+l*x}`}const f=t.x<o.x?1:-1,h=t.y<o.y?-1:1;return`L ${c},${d+l*h}Q ${c},${d} ${c+l*f},${d}`}function xc({sourceX:t,sourceY:r,sourcePosition:o=Ne.Bottom,targetX:i,targetY:l,targetPosition:c=Ne.Top,borderRadius:d=5,centerX:f,centerY:h,offset:g=20,stepPosition:x=.5}){const[m,y,w,S,j]=g1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:c,center:{x:f,y:h},offset:g,stepPosition:x});return[m.reduce((I,T,N)=>{let D="";return N>0&&N<m.length-1?D=x1(m[N-1],T,m[N+1],d):D=`${N===0?"M":"L"}${T.x} ${T.y}`,I+=D,I},""),y,w,S,j]}function Gp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function y1(t){var m;const{sourceNode:r,targetNode:o}=t;if(!Gp(r)||!Gp(o))return null;const i=r.internals.handleBounds||Kp(r.handles),l=o.internals.handleBounds||Kp(o.handles),c=Qp((i==null?void 0:i.source)??[],t.sourceHandle),d=Qp(t.connectionMode===yo.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!c||!d)return(m=t.onError)==null||m.call(t,"008",fn.error008(c?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=(c==null?void 0:c.position)||Ne.Bottom,h=(d==null?void 0:d.position)||Ne.Top,g=br(r,c,f),x=br(o,d,h);return{sourceX:g.x,sourceY:g.y,targetX:x.x,targetY:x.y,sourcePosition:f,targetPosition:h}}function Kp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function br(t,r,o=Ne.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,c=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:d,height:f}=r??En(t);if(i)return{x:l+d/2,y:c+f/2};switch((r==null?void 0:r.position)??o){case Ne.Top:return{x:l+d/2,y:c};case Ne.Right:return{x:l+d,y:c+f/2};case Ne.Bottom:return{x:l+d/2,y:c+f};case Ne.Left:return{x:l,y:c+f/2}}}function Qp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function yc(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function v1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const c=new Set;return t.reduce((d,f)=>([f.markerStart||i,f.markerEnd||l].forEach(h=>{if(h&&typeof h=="object"){const g=yc(h,r);c.has(g)||(d.push({id:g,color:h.color||o,...h}),c.add(g))}}),d),[]).sort((d,f)=>d.id.localeCompare(f.id))}const Oh=1e3,w1=10,$c={nodeOrigin:[0,0],nodeExtent:bs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},S1={...$c,checkEquality:!0};function zc(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function N1(t,r,o){const i=zc($c,o);for(const l of t.values())if(l.parentId)Fc(l,t,r,i);else{const c=As(l,i.nodeOrigin),d=So(l.extent)?l.extent:i.nodeExtent,f=jr(c,d,En(l));l.internals.positionAbsolute=f}}function k1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const c={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(c):l.type==="target"&&i.push(c)}return{source:o,target:i}}function Rc(t){return t==="manual"}function vc(t,r,o,i={}){var g,x;const l=zc(S1,i),c={i:0},d=new Map(r),f=l!=null&&l.elevateNodesOnSelect&&!Rc(l.zIndexMode)?Oh:0;let h=t.length>0;r.clear(),o.clear();for(const m of t){let y=d.get(m.id);if(l.checkEquality&&m===(y==null?void 0:y.internals.userNode))r.set(m.id,y);else{const w=As(m,l.nodeOrigin),S=So(m.extent)?m.extent:l.nodeExtent,j=jr(w,S,En(m));y={...l.defaults,...m,measured:{width:(g=m.measured)==null?void 0:g.width,height:(x=m.measured)==null?void 0:x.height},internals:{positionAbsolute:j,handleBounds:k1(m,y),z:Ah(m,f,l.zIndexMode),userNode:m}},r.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(h=!1),m.parentId&&Fc(y,r,o,i,c)}return h}function C1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function Fc(t,r,o,i,l){const{elevateNodesOnSelect:c,nodeOrigin:d,nodeExtent:f,zIndexMode:h}=zc($c,i),g=t.parentId,x=r.get(g);if(!x){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}C1(t,o),l&&!x.parentId&&x.internals.rootParentIndex===void 0&&h==="auto"&&(x.internals.rootParentIndex=++l.i,x.internals.z=x.internals.z+l.i*w1),l&&x.internals.rootParentIndex!==void 0&&(l.i=x.internals.rootParentIndex);const m=c&&!Rc(h)?Oh:0,{x:y,y:w,z:S}=I1(t,x,d,f,m,h),{positionAbsolute:j}=t.internals,C=y!==j.x||w!==j.y;(C||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:C?{x:y,y:w}:j,z:S}})}function Ah(t,r,o){const i=Jt(t.zIndex)?t.zIndex:0;return Rc(o)?i:i+(t.selected?r:0)}function I1(t,r,o,i,l,c){const{x:d,y:f}=r.internals.positionAbsolute,h=En(t),g=As(t,o),x=So(t.extent)?jr(g,t.extent,h):g;let m=jr({x:d+x.x,y:f+x.y},i,h);t.extent==="parent"&&(m=kh(m,h,r));const y=Ah(t,l,c),w=r.internals.z??0;return{x:m.x,y:m.y,z:w>=y?w+1:y}}function Hc(t,r,o,i=[0,0]){var d;const l=[],c=new Map;for(const f of t){const h=r.get(f.parentId);if(!h)continue;const g=((d=c.get(f.parentId))==null?void 0:d.expandedRect)??wo(h),x=Ih(g,f.rect);c.set(f.parentId,{expandedRect:x,parent:h})}return c.size>0&&c.forEach(({expandedRect:f,parent:h},g)=>{var N;const x=h.internals.positionAbsolute,m=En(h),y=h.origin??i,w=f.x<x.x?Math.round(Math.abs(x.x-f.x)):0,S=f.y<x.y?Math.round(Math.abs(x.y-f.y)):0,j=Math.max(m.width,Math.round(f.width)),C=Math.max(m.height,Math.round(f.height)),I=(j-m.width)*y[0],T=(C-m.height)*y[1];(w>0||S>0||I||T)&&(l.push({id:g,type:"position",position:{x:h.position.x-w+I,y:h.position.y-S+T}}),(N=o.get(g))==null||N.forEach(D=>{t.some(A=>A.id===D.id)||l.push({id:D.id,type:"position",position:{x:D.position.x+w,y:D.position.y+S}})})),(m.width<f.width||m.height<f.height||w||S)&&l.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:j+(w?y[0]*w-I:0),height:C+(S?y[1]*S-T:0)}})}),l}function j1(t,r,o,i,l,c,d){const f=i==null?void 0:i.querySelector(".xyflow__viewport");let h=!1;if(!f)return{changes:[],updatedInternals:h};const g=[],x=window.getComputedStyle(f),{m22:m}=new window.DOMMatrixReadOnly(x.transform),y=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),h=!0;continue}const j=Lc(w.nodeElement),C=S.measured.width!==j.width||S.measured.height!==j.height;if(!!(j.width&&j.height&&(C||!S.internals.handleBounds||w.force))){const T=w.nodeElement.getBoundingClientRect(),N=So(S.extent)?S.extent:c;let{positionAbsolute:D}=S.internals;S.parentId&&S.extent==="parent"?D=kh(D,j,r.get(S.parentId)):N&&(D=jr(D,N,j));const A={...S,measured:j,internals:{...S.internals,positionAbsolute:D,handleBounds:{source:Wp("source",w.nodeElement,T,m,S.id),target:Wp("target",w.nodeElement,T,m,S.id)}}};r.set(S.id,A),S.parentId&&Fc(A,r,o,{nodeOrigin:l,zIndexMode:d}),h=!0,C&&(g.push({id:S.id,type:"dimensions",dimensions:j}),S.expandParent&&S.parentId&&y.push({id:S.id,parentId:S.parentId,rect:wo(A,l)}))}}if(y.length>0){const w=Hc(y,r,o,l);g.push(...w)}return{changes:g,updatedInternals:h}}async function b1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:c}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const d=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,c]],i),f=!!d&&(d.x!==o[0]||d.y!==o[1]||d.k!==o[2]);return Promise.resolve(f)}function qp(t,r,o,i,l,c){let d=l;const f=i.get(d)||new Map;i.set(d,f.set(o,r)),d=`${l}-${t}`;const h=i.get(d)||new Map;if(i.set(d,h.set(o,r)),c){d=`${l}-${t}-${c}`;const g=i.get(d)||new Map;i.set(d,g.set(o,r))}}function Lh(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:c,sourceHandle:d=null,targetHandle:f=null}=i,h={edgeId:i.id,source:l,target:c,sourceHandle:d,targetHandle:f},g=`${l}-${d}--${c}-${f}`,x=`${c}-${f}--${l}-${d}`;qp("source",h,x,t,l,d),qp("target",h,g,t,c,f),r.set(i.id,i)}}function $h(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:$h(o,r):!1}function Zp(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function E1(t,r,o,i){const l=new Map;for(const[c,d]of t)if((d.selected||d.id===i)&&(!d.parentId||!$h(d,t))&&(d.draggable||r&&typeof d.draggable>"u")){const f=t.get(c);f&&l.set(c,{id:c,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return l}function qu({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var d,f,h;const l=[];for(const[g,x]of r){const m=(d=o.get(g))==null?void 0:d.internals.userNode;m&&l.push({...m,position:x.position,dragging:i})}if(!t)return[l[0],l];const c=(f=o.get(t))==null?void 0:f.internals.userNode;return[c?{...c,position:((h=r.get(t))==null?void 0:h.position)||c.position,dragging:i}:l[0],l]}function _1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const c={x:o-l.distance.x,y:i-l.distance.y},d=$s(c,r);return{x:d.x-c.x,y:d.y-c.y}}function M1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let c={x:null,y:null},d=0,f=new Map,h=!1,g={x:0,y:0},x=null,m=!1,y=null,w=!1,S=!1,j=null;function C({noDragClassName:T,handleSelector:N,domNode:D,isSelectable:A,nodeId:O,nodeClickDistance:B=0}){y=_t(D);function Y({x:H,y:X}){const{nodeLookup:$,nodeExtent:Q,snapGrid:W,snapToGrid:_,nodeOrigin:P,onNodeDrag:k,onSelectionDrag:R,onError:E,updateNodePositions:M}=r();c={x:H,y:X};let Z=!1;const J=f.size>1,oe=J&&Q?gc(Ls(f)):null,ie=J&&_?_1({dragItems:f,snapGrid:W,x:H,y:X}):null;for(const[le,se]of f){if(!$.has(le))continue;let G={x:H-se.distance.x,y:X-se.distance.y};_&&(G=ie?{x:Math.round(G.x+ie.x),y:Math.round(G.y+ie.y)}:$s(G,W));let ne=null;if(J&&Q&&!se.extent&&oe){const{positionAbsolute:me}=se.internals,ke=me.x-oe.x+Q[0][0],be=me.x+se.measured.width-oe.x2+Q[1][0],Ee=me.y-oe.y+Q[0][1],Ae=me.y+se.measured.height-oe.y2+Q[1][1];ne=[[ke,Ee],[be,Ae]]}const{position:pe,positionAbsolute:he}=Nh({nodeId:le,nextPosition:G,nodeLookup:$,nodeExtent:ne||Q,nodeOrigin:P,onError:E});Z=Z||se.position.x!==pe.x||se.position.y!==pe.y,se.position=pe,se.internals.positionAbsolute=he}if(S=S||Z,!!Z&&(M(f,!0),j&&(i||k||!O&&R))){const[le,se]=qu({nodeId:O,dragItems:f,nodeLookup:$});i==null||i(j,f,le,se),k==null||k(j,le,se),O||R==null||R(j,se)}}async function q(){if(!x)return;const{transform:H,panBy:X,autoPanSpeed:$,autoPanOnNodeDrag:Q}=r();if(!Q){h=!1,cancelAnimationFrame(d);return}const[W,_]=Ch(g,x,$);(W!==0||_!==0)&&(c.x=(c.x??0)-W/H[2],c.y=(c.y??0)-_/H[2],await X({x:W,y:_})&&Y(c)),d=requestAnimationFrame(q)}function F(H){var J;const{nodeLookup:X,multiSelectionActive:$,nodesDraggable:Q,transform:W,snapGrid:_,snapToGrid:P,selectNodesOnDrag:k,onNodeDragStart:R,onSelectionDragStart:E,unselectNodesAndEdges:M}=r();m=!0,(!k||!A)&&!$&&O&&((J=X.get(O))!=null&&J.selected||M()),A&&k&&O&&(t==null||t(O));const Z=Ns(H.sourceEvent,{transform:W,snapGrid:_,snapToGrid:P,containerBounds:x});if(c=Z,f=E1(X,Q,Z,O),f.size>0&&(o||R||!O&&E)){const[oe,ie]=qu({nodeId:O,dragItems:f,nodeLookup:X});o==null||o(H.sourceEvent,f,oe,ie),R==null||R(H.sourceEvent,oe,ie),O||E==null||E(H.sourceEvent,ie)}}const z=th().clickDistance(B).on("start",H=>{const{domNode:X,nodeDragThreshold:$,transform:Q,snapGrid:W,snapToGrid:_}=r();x=(X==null?void 0:X.getBoundingClientRect())||null,w=!1,S=!1,j=H.sourceEvent,$===0&&F(H),c=Ns(H.sourceEvent,{transform:Q,snapGrid:W,snapToGrid:_,containerBounds:x}),g=en(H.sourceEvent,x)}).on("drag",H=>{const{autoPanOnNodeDrag:X,transform:$,snapGrid:Q,snapToGrid:W,nodeDragThreshold:_,nodeLookup:P}=r(),k=Ns(H.sourceEvent,{transform:$,snapGrid:Q,snapToGrid:W,containerBounds:x});if(j=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||O&&!P.has(O))&&(w=!0),!w){if(!h&&X&&m&&(h=!0,q()),!m){const R=en(H.sourceEvent,x),E=R.x-g.x,M=R.y-g.y;Math.sqrt(E*E+M*M)>_&&F(H)}(c.x!==k.xSnapped||c.y!==k.ySnapped)&&f&&m&&(g=en(H.sourceEvent,x),Y(k))}}).on("end",H=>{if(!(!m||w)&&(h=!1,m=!1,cancelAnimationFrame(d),f.size>0)){const{nodeLookup:X,updateNodePositions:$,onNodeDragStop:Q,onSelectionDragStop:W}=r();if(S&&($(f,!1),S=!1),l||Q||!O&&W){const[_,P]=qu({nodeId:O,dragItems:f,nodeLookup:X,dragging:!1});l==null||l(H.sourceEvent,f,_,P),Q==null||Q(H.sourceEvent,_,P),O||W==null||W(H.sourceEvent,P)}}}).filter(H=>{const X=H.target;return!H.button&&(!T||!Zp(X,`.${T}`,D))&&(!N||Zp(X,N,D))});y.call(z)}function I(){y==null||y.on(".drag",null)}return{update:C,destroy:I}}function P1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const c of r.values())_s(l,wo(c))>0&&i.push(c);return i}const D1=250;function T1(t,r,o,i){var f,h;let l=[],c=1/0;const d=P1(t,o,r+D1);for(const g of d){const x=[...((f=g.internals.handleBounds)==null?void 0:f.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const m of x){if(i.nodeId===m.nodeId&&i.type===m.type&&i.id===m.id)continue;const{x:y,y:w}=br(g,m,m.position,!0),S=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(w-t.y,2));S>r||(S<c?(l=[{...m,x:y,y:w}],c=S):S===c&&l.push({...m,x:y,y:w}))}}if(!l.length)return null;if(l.length>1){const g=i.type==="source"?"target":"source";return l.find(x=>x.type===g)??l[0]}return l[0]}function zh(t,r,o,i,l,c=!1){var g,x,m;const d=i.get(t);if(!d)return null;const f=l==="strict"?(g=d.internals.handleBounds)==null?void 0:g[r]:[...((x=d.internals.handleBounds)==null?void 0:x.source)??[],...((m=d.internals.handleBounds)==null?void 0:m.target)??[]],h=(o?f==null?void 0:f.find(y=>y.id===o):f==null?void 0:f[0])??null;return h&&c?{...h,...br(d,h,h.position,!0)}:h}function Rh(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function O1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const Fh=()=>!0;function A1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:c,isTarget:d,domNode:f,nodeLookup:h,lib:g,autoPanOnConnect:x,flowId:m,panBy:y,cancelConnection:w,onConnectStart:S,onConnect:j,onConnectEnd:C,isValidConnection:I=Fh,onReconnectEnd:T,updateConnection:N,getTransform:D,getFromHandle:A,autoPanSpeed:O,dragThreshold:B=1,handleDomNode:Y}){const q=Eh(t.target);let F=0,z;const{x:H,y:X}=en(t),$=Rh(c,Y),Q=f==null?void 0:f.getBoundingClientRect();let W=!1;if(!Q||!$)return;const _=zh(l,$,i,h,r);if(!_)return;let P=en(t,Q),k=!1,R=null,E=!1,M=null;function Z(){if(!x||!Q)return;const[pe,he]=Ch(P,Q,O);y({x:pe,y:he}),F=requestAnimationFrame(Z)}const J={..._,nodeId:l,type:$,position:_.position},oe=h.get(l);let le={inProgress:!0,isValid:null,from:br(oe,J,Ne.Left,!0),fromHandle:J,fromPosition:J.position,fromNode:oe,to:P,toHandle:null,toPosition:Fp[J.position],toNode:null,pointer:P};function se(){W=!0,N(le),S==null||S(t,{nodeId:l,handleId:i,handleType:$})}B===0&&se();function G(pe){if(!W){const{x:Ae,y:et}=en(pe),at=Ae-H,Xe=et-X;if(!(at*at+Xe*Xe>B*B))return;se()}if(!A()||!J){ne(pe);return}const he=D();P=en(pe,Q),z=T1(zs(P,he,!1,[1,1]),o,h,J),k||(Z(),k=!0);const me=Hh(pe,{handle:z,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:d?"target":"source",isValidConnection:I,doc:q,lib:g,flowId:m,nodeLookup:h});M=me.handleDomNode,R=me.connection,E=O1(!!z,me.isValid);const ke=h.get(l),be=ke?br(ke,J,Ne.Left,!0):le.from,Ee={...le,from:be,isValid:E,to:me.toHandle&&E?Dl({x:me.toHandle.x,y:me.toHandle.y},he):P,toHandle:me.toHandle,toPosition:E&&me.toHandle?me.toHandle.position:Fp[J.position],toNode:me.toHandle?h.get(me.toHandle.nodeId):null,pointer:P};N(Ee),le=Ee}function ne(pe){if(!("touches"in pe&&pe.touches.length>0)){if(W){(z||M)&&R&&E&&(j==null||j(R));const{inProgress:he,...me}=le,ke={...me,toPosition:le.toHandle?le.toPosition:null};C==null||C(pe,ke),c&&(T==null||T(pe,ke))}w(),cancelAnimationFrame(F),k=!1,E=!1,R=null,M=null,q.removeEventListener("mousemove",G),q.removeEventListener("mouseup",ne),q.removeEventListener("touchmove",G),q.removeEventListener("touchend",ne)}}q.addEventListener("mousemove",G),q.addEventListener("mouseup",ne),q.addEventListener("touchmove",G),q.addEventListener("touchend",ne)}function Hh(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:c,doc:d,lib:f,flowId:h,isValidConnection:g=Fh,nodeLookup:x}){const m=c==="target",y=r?d.querySelector(`.${f}-flow__handle[data-id="${h}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=en(t),j=d.elementFromPoint(w,S),C=j!=null&&j.classList.contains(`${f}-flow__handle`)?j:y,I={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const T=Rh(void 0,C),N=C.getAttribute("data-nodeid"),D=C.getAttribute("data-handleid"),A=C.classList.contains("connectable"),O=C.classList.contains("connectableend");if(!N||!T)return I;const B={source:m?N:i,sourceHandle:m?D:l,target:m?i:N,targetHandle:m?l:D};I.connection=B;const q=A&&O&&(o===yo.Strict?m&&T==="source"||!m&&T==="target":N!==i||D!==l);I.isValid=q&&g(B),I.toHandle=zh(N,T,D,x,o,!0)}return I}const wc={onPointerDown:A1,isValid:Hh};function L1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=_t(t);function c({translateExtent:f,width:h,height:g,zoomStep:x=1,pannable:m=!0,zoomable:y=!0,inversePan:w=!1}){const S=N=>{if(N.sourceEvent.type!=="wheel"||!r)return;const D=o(),A=N.sourceEvent.ctrlKey&&Ms()?10:1,O=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*x,B=D[2]*Math.pow(2,O*A);r.scaleTo(B)};let j=[0,0];const C=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(j=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},I=N=>{const D=o();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!r)return;const A=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],O=[A[0]-j[0],A[1]-j[1]];j=A;const B=i()*Math.max(D[2],Math.log(D[2]))*(w?-1:1),Y={x:D[0]-O[0]*B,y:D[1]-O[1]*B},q=[[0,0],[h,g]];r.setViewportConstrained({x:Y.x,y:Y.y,zoom:D[2]},q,f)},T=gh().on("start",C).on("zoom",m?I:null).on("zoom.wheel",y?S:null);l.call(T,{})}function d(){l.on("zoom",null)}return{update:c,destroy:d,pointer:Qt}}const Bl=t=>({x:t.x,y:t.y,zoom:t.k}),Zu=({x:t,y:r,zoom:o})=>Rl.translate(t,r).scale(o),fo=(t,r)=>t.target.closest(`.${r}`),Vh=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),$1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Ju=(t,r=0,o=$1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},Bh=t=>{const r=t.ctrlKey&&Ms()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function z1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:c,zoomOnPinch:d,onPanZoomStart:f,onPanZoom:h,onPanZoomEnd:g}){return x=>{if(fo(x,r))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const m=o.property("__zoom").k||1;if(x.ctrlKey&&d){const C=Qt(x),I=Bh(x),T=m*Math.pow(2,I);i.scaleTo(o,T,C,x);return}const y=x.deltaMode===1?20:1;let w=l===kr.Vertical?0:x.deltaX*y,S=l===kr.Horizontal?0:x.deltaY*y;!Ms()&&x.shiftKey&&l!==kr.Vertical&&(w=x.deltaY*y,S=0),i.translateBy(o,-(w/m)*c,-(S/m)*c,{internal:!0});const j=Bl(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(h==null||h(x,j),t.panScrollTimeout=setTimeout(()=>{g==null||g(x,j),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,f==null||f(x,j))}}function R1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const c=i.type==="wheel",d=!r&&c&&!i.ctrlKey,f=fo(i,t);if(i.ctrlKey&&c&&f&&i.preventDefault(),d||f)return null;i.preventDefault(),o.call(this,i,l)}}function F1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var c,d,f;if((c=i.sourceEvent)!=null&&c.internal)return;const l=Bl(i.transform);t.mouseButton=((d=i.sourceEvent)==null?void 0:d.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((f=i.sourceEvent)==null?void 0:f.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function H1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return c=>{var d,f;t.usedRightMouseButton=!!(o&&Vh(r,t.mouseButton??0)),(d=c.sourceEvent)!=null&&d.sync||i([c.transform.x,c.transform.y,c.transform.k]),l&&!((f=c.sourceEvent)!=null&&f.internal)&&(l==null||l(c.sourceEvent,Bl(c.transform)))}}function V1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:c}){return d=>{var f;if(!((f=d.sourceEvent)!=null&&f.internal)&&(t.isZoomingOrPanning=!1,c&&Vh(r,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&c(d.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const h=Bl(d.transform);t.prevViewport=h,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(d.sourceEvent,h)},o?150:0)}}}function B1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:c,userSelectionActive:d,noWheelClassName:f,noPanClassName:h,lib:g,connectionInProgress:x}){return m=>{var C;const y=t||r,w=o&&m.ctrlKey,S=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(fo(m,`${g}-flow__node`)||fo(m,`${g}-flow__edge`)))return!0;if(!i&&!y&&!l&&!c&&!o||d||x&&!S||fo(m,f)&&S||fo(m,h)&&(!S||l&&S&&!t)||!o&&m.ctrlKey&&S)return!1;if(!o&&m.type==="touchstart"&&((C=m.touches)==null?void 0:C.length)>1)return m.preventDefault(),!1;if(!y&&!l&&!w&&S||!i&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(i)&&!i.includes(m.button)&&m.type==="mousedown")return!1;const j=Array.isArray(i)&&i.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||S)&&j}}function W1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:f,onDraggingChange:h}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=t.getBoundingClientRect(),m=gh().scaleExtent([r,o]).translateExtent(i),y=_t(t).call(m);T({x:l.x,y:l.y,zoom:vo(l.zoom,r,o)},[[0,0],[x.width,x.height]],i);const w=y.on("wheel.zoom"),S=y.on("dblclick.zoom");m.wheelDelta(Bh);function j(z,H){return y?new Promise(X=>{m==null||m.interpolate((H==null?void 0:H.interpolate)==="linear"?Ss:yl).transform(Ju(y,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function C({noWheelClassName:z,noPanClassName:H,onPaneContextMenu:X,userSelectionActive:$,panOnScroll:Q,panOnDrag:W,panOnScrollMode:_,panOnScrollSpeed:P,preventScrolling:k,zoomOnPinch:R,zoomOnScroll:E,zoomOnDoubleClick:M,zoomActivationKeyPressed:Z,lib:J,onTransformChange:oe,connectionInProgress:ie,paneClickDistance:le,selectionOnDrag:se}){$&&!g.isZoomingOrPanning&&I();const G=Q&&!Z&&!$;m.clickDistance(se?1/0:!Jt(le)||le<0?0:le);const ne=G?z1({zoomPanValues:g,noWheelClassName:z,d3Selection:y,d3Zoom:m,panOnScrollMode:_,panOnScrollSpeed:P,zoomOnPinch:R,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:f}):R1({noWheelClassName:z,preventScrolling:k,d3ZoomHandler:w});if(y.on("wheel.zoom",ne,{passive:!1}),!$){const he=F1({zoomPanValues:g,onDraggingChange:h,onPanZoomStart:d});m.on("start",he);const me=H1({zoomPanValues:g,panOnDrag:W,onPaneContextMenu:!!X,onPanZoom:c,onTransformChange:oe});m.on("zoom",me);const ke=V1({zoomPanValues:g,panOnDrag:W,panOnScroll:Q,onPaneContextMenu:X,onPanZoomEnd:f,onDraggingChange:h});m.on("end",ke)}const pe=B1({zoomActivationKeyPressed:Z,panOnDrag:W,zoomOnScroll:E,panOnScroll:Q,zoomOnDoubleClick:M,zoomOnPinch:R,userSelectionActive:$,noPanClassName:H,noWheelClassName:z,lib:J,connectionInProgress:ie});m.filter(pe),M?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function I(){m.on("zoom",null)}async function T(z,H,X){const $=Zu(z),Q=m==null?void 0:m.constrain()($,H,X);return Q&&await j(Q),new Promise(W=>W(Q))}async function N(z,H){const X=Zu(z);return await j(X,H),new Promise($=>$(X))}function D(z){if(y){const H=Zu(z),X=y.property("__zoom");(X.k!==z.zoom||X.x!==z.x||X.y!==z.y)&&(m==null||m.transform(y,H,null,{sync:!0}))}}function A(){const z=y?hh(y.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function O(z,H){return y?new Promise(X=>{m==null||m.interpolate((H==null?void 0:H.interpolate)==="linear"?Ss:yl).scaleTo(Ju(y,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function B(z,H){return y?new Promise(X=>{m==null||m.interpolate((H==null?void 0:H.interpolate)==="linear"?Ss:yl).scaleBy(Ju(y,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function Y(z){m==null||m.scaleExtent(z)}function q(z){m==null||m.translateExtent(z)}function F(z){const H=!Jt(z)||z<0?0:z;m==null||m.clickDistance(H)}return{update:C,destroy:I,setViewport:N,setViewportConstrained:T,getViewport:A,scaleTo:O,scaleBy:B,setScaleExtent:Y,setTranslateExtent:q,syncViewport:D,setClickDistance:F}}var Er;(function(t){t.Line="line",t.Handle="handle"})(Er||(Er={}));const U1=["top-left","top-right","bottom-left","bottom-right"],Y1=["top","right","bottom","left"];function X1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:c}){const d=t-r,f=o-i,h=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&l&&(h[0]=h[0]*-1),f&&c&&(h[1]=h[1]*-1),h}function Jp(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Qn(t,r){return Math.max(0,r-t)}function qn(t,r){return Math.max(0,t-r)}function dl(t,r,o){return Math.max(0,r-t,t-o)}function em(t,r){return t?!r:r}function G1(t,r,o,i,l,c,d,f){let{affectsX:h,affectsY:g}=r;const{isHorizontal:x,isVertical:m}=r,y=x&&m,{xSnapped:w,ySnapped:S}=o,{minWidth:j,maxWidth:C,minHeight:I,maxHeight:T}=i,{x:N,y:D,width:A,height:O,aspectRatio:B}=t;let Y=Math.floor(x?w-t.pointerX:0),q=Math.floor(m?S-t.pointerY:0);const F=A+(h?-Y:Y),z=O+(g?-q:q),H=-c[0]*A,X=-c[1]*O;let $=dl(F,j,C),Q=dl(z,I,T);if(d){let P=0,k=0;h&&Y<0?P=Qn(N+Y+H,d[0][0]):!h&&Y>0&&(P=qn(N+F+H,d[1][0])),g&&q<0?k=Qn(D+q+X,d[0][1]):!g&&q>0&&(k=qn(D+z+X,d[1][1])),$=Math.max($,P),Q=Math.max(Q,k)}if(f){let P=0,k=0;h&&Y>0?P=qn(N+Y,f[0][0]):!h&&Y<0&&(P=Qn(N+F,f[1][0])),g&&q>0?k=qn(D+q,f[0][1]):!g&&q<0&&(k=Qn(D+z,f[1][1])),$=Math.max($,P),Q=Math.max(Q,k)}if(l){if(x){const P=dl(F/B,I,T)*B;if($=Math.max($,P),d){let k=0;!h&&!g||h&&!g&&y?k=qn(D+X+F/B,d[1][1])*B:k=Qn(D+X+(h?Y:-Y)/B,d[0][1])*B,$=Math.max($,k)}if(f){let k=0;!h&&!g||h&&!g&&y?k=Qn(D+F/B,f[1][1])*B:k=qn(D+(h?Y:-Y)/B,f[0][1])*B,$=Math.max($,k)}}if(m){const P=dl(z*B,j,C)/B;if(Q=Math.max(Q,P),d){let k=0;!h&&!g||g&&!h&&y?k=qn(N+z*B+H,d[1][0])/B:k=Qn(N+(g?q:-q)*B+H,d[0][0])/B,Q=Math.max(Q,k)}if(f){let k=0;!h&&!g||g&&!h&&y?k=Qn(N+z*B,f[1][0])/B:k=qn(N+(g?q:-q)*B,f[0][0])/B,Q=Math.max(Q,k)}}}q=q+(q<0?Q:-Q),Y=Y+(Y<0?$:-$),l&&(y?F>z*B?q=(em(h,g)?-Y:Y)/B:Y=(em(h,g)?-q:q)*B:x?(q=Y/B,g=h):(Y=q*B,h=g));const W=h?N+Y:N,_=g?D+q:D;return{width:A+(h?-Y:Y),height:O+(g?-q:q),x:c[0]*Y*(h?-1:1)+W,y:c[1]*q*(g?-1:1)+_}}const Wh={width:0,height:0,x:0,y:0},K1={...Wh,pointerX:0,pointerY:0,aspectRatio:1};function Q1(t){return[[0,0],[t.measured.width,t.measured.height]]}function q1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,c=t.measured.width??0,d=t.measured.height??0,f=o[0]*c,h=o[1]*d;return[[i-f,l-h],[i+c-f,l+d-h]]}function Z1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const c=_t(t);let d={controlDirection:Jp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:g,boundaries:x,keepAspectRatio:m,resizeDirection:y,onResizeStart:w,onResize:S,onResizeEnd:j,shouldResize:C}){let I={...Wh},T={...K1};d={boundaries:x,resizeDirection:y,keepAspectRatio:m,controlDirection:Jp(g)};let N,D=null,A=[],O,B,Y,q=!1;const F=th().on("start",z=>{const{nodeLookup:H,transform:X,snapGrid:$,snapToGrid:Q,nodeOrigin:W,paneDomNode:_}=o();if(N=H.get(r),!N)return;D=(_==null?void 0:_.getBoundingClientRect())??null;const{xSnapped:P,ySnapped:k}=Ns(z.sourceEvent,{transform:X,snapGrid:$,snapToGrid:Q,containerBounds:D});I={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},T={...I,pointerX:P,pointerY:k,aspectRatio:I.width/I.height},O=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(O=H.get(N.parentId),B=O&&N.extent==="parent"?Q1(O):void 0),A=[],Y=void 0;for(const[R,E]of H)if(E.parentId===r&&(A.push({id:R,position:{...E.position},extent:E.extent}),E.extent==="parent"||E.expandParent)){const M=q1(E,N,E.origin??W);Y?Y=[[Math.min(M[0][0],Y[0][0]),Math.min(M[0][1],Y[0][1])],[Math.max(M[1][0],Y[1][0]),Math.max(M[1][1],Y[1][1])]]:Y=M}w==null||w(z,{...I})}).on("drag",z=>{const{transform:H,snapGrid:X,snapToGrid:$,nodeOrigin:Q}=o(),W=Ns(z.sourceEvent,{transform:H,snapGrid:X,snapToGrid:$,containerBounds:D}),_=[];if(!N)return;const{x:P,y:k,width:R,height:E}=I,M={},Z=N.origin??Q,{width:J,height:oe,x:ie,y:le}=G1(T,d.controlDirection,W,d.boundaries,d.keepAspectRatio,Z,B,Y),se=J!==R,G=oe!==E,ne=ie!==P&&se,pe=le!==k&&G;if(!ne&&!pe&&!se&&!G)return;if((ne||pe||Z[0]===1||Z[1]===1)&&(M.x=ne?ie:I.x,M.y=pe?le:I.y,I.x=M.x,I.y=M.y,A.length>0)){const be=ie-P,Ee=le-k;for(const Ae of A)Ae.position={x:Ae.position.x-be+Z[0]*(J-R),y:Ae.position.y-Ee+Z[1]*(oe-E)},_.push(Ae)}if((se||G)&&(M.width=se&&(!d.resizeDirection||d.resizeDirection==="horizontal")?J:I.width,M.height=G&&(!d.resizeDirection||d.resizeDirection==="vertical")?oe:I.height,I.width=M.width,I.height=M.height),O&&N.expandParent){const be=Z[0]*(M.width??0);M.x&&M.x<be&&(I.x=be,T.x=T.x-(M.x-be));const Ee=Z[1]*(M.height??0);M.y&&M.y<Ee&&(I.y=Ee,T.y=T.y-(M.y-Ee))}const he=X1({width:I.width,prevWidth:R,height:I.height,prevHeight:E,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),me={...I,direction:he};(C==null?void 0:C(z,me))!==!1&&(q=!0,S==null||S(z,me),i(M,_))}).on("end",z=>{q&&(j==null||j(z,{...I}),l==null||l({...I}),q=!1)});c.call(F)}function h(){c.on(".drag",null)}return{update:f,destroy:h}}var ec={exports:{}},tc={},nc={exports:{}},rc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function J1(){if(tm)return rc;tm=1;var t=Ds();function r(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(m,y){var w=y(),S=i({inst:{value:w,getSnapshot:y}}),j=S[0].inst,C=S[1];return c(function(){j.value=w,j.getSnapshot=y,h(j)&&C({inst:j})},[m,w,y]),l(function(){return h(j)&&C({inst:j}),m(function(){h(j)&&C({inst:j})})},[m]),d(w),w}function h(m){var y=m.getSnapshot;m=m.value;try{var w=y();return!o(m,w)}catch{return!0}}function g(m,y){return y()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:f;return rc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,rc}var nm;function eS(){return nm||(nm=1,nc.exports=J1()),nc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function tS(){if(rm)return tc;rm=1;var t=Ds(),r=eS();function o(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,c=t.useRef,d=t.useEffect,f=t.useMemo,h=t.useDebugValue;return tc.useSyncExternalStoreWithSelector=function(g,x,m,y,w){var S=c(null);if(S.current===null){var j={hasValue:!1,value:null};S.current=j}else j=S.current;S=f(function(){function I(O){if(!T){if(T=!0,N=O,O=y(O),w!==void 0&&j.hasValue){var B=j.value;if(w(B,O))return D=B}return D=O}if(B=D,i(N,O))return B;var Y=y(O);return w!==void 0&&w(B,Y)?(N=O,B):(N=O,D=Y)}var T=!1,N,D,A=m===void 0?null:m;return[function(){return I(x())},A===null?void 0:function(){return I(A())}]},[x,m,y,w]);var C=l(g,S[0],S[1]);return d(function(){j.hasValue=!0,j.value=C},[C]),h(C),C},tc}var om;function nS(){return om||(om=1,ec.exports=tS()),ec.exports}var rS=nS();const oS=Rm(rS),sS={},sm=t=>{let r;const o=new Set,i=(x,m)=>{const y=typeof x=="function"?x(r):x;if(!Object.is(y,r)){const w=r;r=m??(typeof y!="object"||y===null)?y:Object.assign({},r,y),o.forEach(S=>S(r,w))}},l=()=>r,h={setState:i,getState:l,getInitialState:()=>g,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(sS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},g=r=t(i,l,h);return h},iS=t=>t?sm(t):sm,{useDebugValue:lS}=xs,{useSyncExternalStoreWithSelector:aS}=oS,uS=t=>t;function Uh(t,r=uS,o){const i=aS(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return lS(i),i}const im=(t,r)=>{const o=iS(t),i=(l,c=r)=>Uh(o,l,c);return Object.assign(i,o),i},cS=(t,r)=>t?im(t,r):im;function He(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var dS=Fm();const Wl=L.createContext(null),fS=Wl.Provider,Yh=fn.error001();function Me(t,r){const o=L.useContext(Wl);if(o===null)throw new Error(Yh);return Uh(o,t,r)}function Ve(){const t=L.useContext(Wl);if(t===null)throw new Error(Yh);return L.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const lm={display:"none"},pS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Xh="react-flow__node-desc",Gh="react-flow__edge-desc",mS="react-flow__aria-live",hS=t=>t.ariaLiveMessage,gS=t=>t.ariaLabelConfig;function xS({rfId:t}){const r=Me(hS);return u.jsx("div",{id:`${mS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:pS,children:r})}function yS({rfId:t,disableKeyboardA11y:r}){const o=Me(gS);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${Xh}-${t}`,style:lm,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${Gh}-${t}`,style:lm,children:o["edge.a11yDescription.default"]}),!r&&u.jsx(xS,{rfId:t})]})}const Ul=L.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},c)=>{const d=`${t}`.split("-");return u.jsx("div",{className:qe(["react-flow__panel",o,...d]),style:i,ref:c,...l,children:r})});Ul.displayName="Panel";function vS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:u.jsx(Ul,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const wS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},fl=t=>t.id;function SS(t,r){return He(t.selectedNodes.map(fl),r.selectedNodes.map(fl))&&He(t.selectedEdges.map(fl),r.selectedEdges.map(fl))}function NS({onSelectionChange:t}){const r=Ve(),{selectedNodes:o,selectedEdges:i}=Me(wS,SS);return L.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(c=>c(l))},[o,i,t]),null}const kS=t=>!!t.onSelectionChangeHandlers;function CS({onSelectionChange:t}){const r=Me(kS);return t||r?u.jsx(NS,{onSelectionChange:t}):null}const Kh=[0,0],IS={x:0,y:0,zoom:1},jS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],am=[...jS,"rfId"],bS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),um={translateExtent:bs,nodeOrigin:Kh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function ES(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:c,setNodeExtent:d,reset:f,setDefaultNodesAndEdges:h}=Me(bS,He),g=Ve();L.useEffect(()=>(h(t.defaultNodes,t.defaultEdges),()=>{x.current=um,f()}),[]);const x=L.useRef(um);return L.useEffect(()=>{for(const m of am){const y=t[m],w=x.current[m];y!==w&&(typeof t[m]>"u"||(m==="nodes"?r(y):m==="edges"?o(y):m==="minZoom"?i(y):m==="maxZoom"?l(y):m==="translateExtent"?c(y):m==="nodeExtent"?d(y):m==="ariaLabelConfig"?g.setState({ariaLabelConfig:a1(y)}):m==="fitView"?g.setState({fitViewQueued:y}):m==="fitViewOptions"?g.setState({fitViewOptions:y}):g.setState({[m]:y})))}x.current=t},am.map(m=>t[m])),null}function cm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function _S(t){var i;const[r,o]=L.useState(t==="system"?null:t);return L.useEffect(()=>{if(t!=="system"){o(t);return}const l=cm(),c=()=>o(l!=null&&l.matches?"dark":"light");return c(),l==null||l.addEventListener("change",c),()=>{l==null||l.removeEventListener("change",c)}},[t]),r!==null?r:(i=cm())!=null&&i.matches?"dark":"light"}const dm=typeof document<"u"?document:null;function Ps(t=null,r={target:dm,actInsideInputWithModifier:!0}){const[o,i]=L.useState(!1),l=L.useRef(!1),c=L.useRef(new Set([])),[d,f]=L.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=g.reduce((m,y)=>m.concat(...y),[]);return[g,x]}return[[],[]]},[t]);return L.useEffect(()=>{const h=(r==null?void 0:r.target)??dm,g=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const x=w=>{var C,I;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!g)&&_h(w))return!1;const j=pm(w.code,f);if(c.current.add(w[j]),fm(d,c.current,!1)){const T=((I=(C=w.composedPath)==null?void 0:C.call(w))==null?void 0:I[0])||w.target,N=(T==null?void 0:T.nodeName)==="BUTTON"||(T==null?void 0:T.nodeName)==="A";r.preventDefault!==!1&&(l.current||!N)&&w.preventDefault(),i(!0)}},m=w=>{const S=pm(w.code,f);fm(d,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(w[S]),w.key==="Meta"&&c.current.clear(),l.current=!1},y=()=>{c.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",x),h==null||h.addEventListener("keyup",m),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{h==null||h.removeEventListener("keydown",x),h==null||h.removeEventListener("keyup",m),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[t,i]),o}function fm(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function pm(t,r){return r.includes(t)?"code":"key"}const MS=()=>{const t=Ve();return L.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,c],panZoom:d}=t.getState();return d?(await d.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??c},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:c,maxZoom:d,panZoom:f}=t.getState(),h=Ac(r,i,l,c,d,(o==null?void 0:o.padding)??.1);return f?(await f.setViewport(h,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:c,domNode:d}=t.getState();if(!d)return r;const{x:f,y:h}=d.getBoundingClientRect(),g={x:r.x-f,y:r.y-h},x=o.snapGrid??l,m=o.snapToGrid??c;return zs(g,i,m,x)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),d=Dl(r,o);return{x:d.x+l,y:d.y+c}}}),[])};function Qh(t,r){const o=[],i=new Map,l=[];for(const c of t)if(c.type==="add"){l.push(c);continue}else if(c.type==="remove"||c.type==="replace")i.set(c.id,[c]);else{const d=i.get(c.id);d?d.push(c):i.set(c.id,[c])}for(const c of r){const d=i.get(c.id);if(!d){o.push(c);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){o.push({...d[0].item});continue}const f={...c};for(const h of d)PS(h,f);o.push(f)}return l.length&&l.forEach(c=>{c.index!==void 0?o.splice(c.index,0,{...c.item}):o.push({...c.item})}),o}function PS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function DS(t,r){return Qh(t,r)}function TS(t,r){return Qh(t,r)}function wr(t,r){return{id:t,type:"select",selected:r}}function po(t,r=new Set,o=!1){const i=[];for(const[l,c]of t){const d=r.has(l);!(c.selected===void 0&&!d)&&c.selected!==d&&(o&&(c.selected=d),i.push(wr(c.id,d)))}return i}function mm({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,d]of t.entries()){const f=r.get(d.id),h=((l=f==null?void 0:f.internals)==null?void 0:l.userNode)??f;h!==void 0&&h!==d&&o.push({id:d.id,item:d,type:"replace"}),h===void 0&&o.push({item:d,type:"add",index:c})}for(const[c]of r)i.get(c)===void 0&&o.push({id:c,type:"remove"});return o}function hm(t){return{id:t.id,type:"remove"}}const gm=t=>Zw(t),OS=t=>Sh(t);function qh(t){return L.forwardRef(t)}const AS=typeof window<"u"?L.useLayoutEffect:L.useEffect;function xm(t){const[r,o]=L.useState(BigInt(0)),[i]=L.useState(()=>LS(()=>o(l=>l+BigInt(1))));return AS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function LS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const Zh=L.createContext(null);function $S({children:t}){const r=Ve(),o=L.useCallback(f=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:x,onNodesChange:m,nodeLookup:y,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let j=h;for(const I of f)j=typeof I=="function"?I(j):I;let C=mm({items:j,lookup:y});for(const I of S.values())C=I(C);x&&g(j),C.length>0?m==null||m(C):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:I,nodes:T,setNodes:N}=r.getState();I&&N(T)})},[]),i=xm(o),l=L.useCallback(f=>{const{edges:h=[],setEdges:g,hasDefaultEdges:x,onEdgesChange:m,edgeLookup:y}=r.getState();let w=h;for(const S of f)w=typeof S=="function"?S(w):S;x?g(w):m&&m(mm({items:w,lookup:y}))},[]),c=xm(l),d=L.useMemo(()=>({nodeQueue:i,edgeQueue:c}),[]);return u.jsx(Zh.Provider,{value:d,children:t})}function zS(){const t=L.useContext(Zh);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const RS=t=>!!t.panZoom;function Dr(){const t=MS(),r=Ve(),o=zS(),i=Me(RS),l=L.useMemo(()=>{const c=m=>r.getState().nodeLookup.get(m),d=m=>{o.nodeQueue.push(m)},f=m=>{o.edgeQueue.push(m)},h=m=>{var I,T;const{nodeLookup:y,nodeOrigin:w}=r.getState(),S=gm(m)?m:y.get(m.id),j=S.parentId?bh(S.position,S.measured,S.parentId,y,w):S.position,C={...S,position:j,width:((I=S.measured)==null?void 0:I.width)??S.width,height:((T=S.measured)==null?void 0:T.height)??S.height};return wo(C)},g=(m,y,w={replace:!1})=>{d(S=>S.map(j=>{if(j.id===m){const C=typeof y=="function"?y(j):y;return w.replace&&gm(C)?C:{...j,...C}}return j}))},x=(m,y,w={replace:!1})=>{f(S=>S.map(j=>{if(j.id===m){const C=typeof y=="function"?y(j):y;return w.replace&&OS(C)?C:{...j,...C}}return j}))};return{getNodes:()=>r.getState().nodes.map(m=>({...m})),getNode:m=>{var y;return(y=c(m))==null?void 0:y.internals.userNode},getInternalNode:c,getEdges:()=>{const{edges:m=[]}=r.getState();return m.map(y=>({...y}))},getEdge:m=>r.getState().edgeLookup.get(m),setNodes:d,setEdges:f,addNodes:m=>{const y=Array.isArray(m)?m:[m];o.nodeQueue.push(w=>[...w,...y])},addEdges:m=>{const y=Array.isArray(m)?m:[m];o.edgeQueue.push(w=>[...w,...y])},toObject:()=>{const{nodes:m=[],edges:y=[],transform:w}=r.getState(),[S,j,C]=w;return{nodes:m.map(I=>({...I})),edges:y.map(I=>({...I})),viewport:{x:S,y:j,zoom:C}}},deleteElements:async({nodes:m=[],edges:y=[]})=>{const{nodes:w,edges:S,onNodesDelete:j,onEdgesDelete:C,triggerNodeChanges:I,triggerEdgeChanges:T,onDelete:N,onBeforeDelete:D}=r.getState(),{nodes:A,edges:O}=await r1({nodesToRemove:m,edgesToRemove:y,nodes:w,edges:S,onBeforeDelete:D}),B=O.length>0,Y=A.length>0;if(B){const q=O.map(hm);C==null||C(O),T(q)}if(Y){const q=A.map(hm);j==null||j(A),I(q)}return(Y||B)&&(N==null||N({nodes:A,edges:O})),{deletedNodes:A,deletedEdges:O}},getIntersectingNodes:(m,y=!0,w)=>{const S=Vp(m),j=S?m:h(m),C=w!==void 0;return j?(w||r.getState().nodes).filter(I=>{const T=r.getState().nodeLookup.get(I.id);if(T&&!S&&(I.id===m.id||!T.internals.positionAbsolute))return!1;const N=wo(C?I:T),D=_s(N,j);return y&&D>0||D>=N.width*N.height||D>=j.width*j.height}):[]},isNodeIntersecting:(m,y,w=!0)=>{const j=Vp(m)?m:h(m);if(!j)return!1;const C=_s(j,y);return w&&C>0||C>=y.width*y.height||C>=j.width*j.height},updateNode:g,updateNodeData:(m,y,w={replace:!1})=>{g(m,S=>{const j=typeof y=="function"?y(S):y;return w.replace?{...S,data:j}:{...S,data:{...S.data,...j}}},w)},updateEdge:x,updateEdgeData:(m,y,w={replace:!1})=>{x(m,S=>{const j=typeof y=="function"?y(S):y;return w.replace?{...S,data:j}:{...S,data:{...S.data,...j}}},w)},getNodesBounds:m=>{const{nodeLookup:y,nodeOrigin:w}=r.getState();return Jw(m,{nodeLookup:y,nodeOrigin:w})},getHandleConnections:({type:m,id:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${m}${y?`-${y}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:m,handleId:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${m?y?`-${m}-${y}`:`-${m}`:""}`))==null?void 0:S.values())??[])},fitView:async m=>{const y=r.getState().fitViewResolver??l1();return r.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:y}),o.nodeQueue.push(w=>[...w]),y.promise}}},[]);return L.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const ym=t=>t.selected,FS=typeof window<"u"?window:void 0;function HS({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=Ve(),{deleteElements:i}=Dr(),l=Ps(t,{actInsideInputWithModifier:!1}),c=Ps(r,{target:FS});L.useEffect(()=>{if(l){const{edges:d,nodes:f}=o.getState();i({nodes:f.filter(ym),edges:d.filter(ym)}),o.setState({nodesSelectionActive:!1})}},[l]),L.useEffect(()=>{o.setState({multiSelectionActive:c})},[c])}function VS(t){const r=Ve();L.useEffect(()=>{const o=()=>{var l,c,d,f;if(!t.current||!(((c=(l=t.current).checkVisibility)==null?void 0:c.call(l))??!0))return!1;const i=Lc(t.current);(i.height===0||i.width===0)&&((f=(d=r.getState()).onError)==null||f.call(d,"004",fn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Yl={position:"absolute",width:"100%",height:"100%",top:0,left:0},BS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function WS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=kr.Free,zoomOnDoubleClick:d=!0,panOnDrag:f=!0,defaultViewport:h,translateExtent:g,minZoom:x,maxZoom:m,zoomActivationKeyCode:y,preventScrolling:w=!0,children:S,noWheelClassName:j,noPanClassName:C,onViewportChange:I,isControlledViewport:T,paneClickDistance:N,selectionOnDrag:D}){const A=Ve(),O=L.useRef(null),{userSelectionActive:B,lib:Y,connectionInProgress:q}=Me(BS,He),F=Ps(y),z=L.useRef();VS(O);const H=L.useCallback(X=>{I==null||I({x:X[0],y:X[1],zoom:X[2]}),T||A.setState({transform:X})},[I,T]);return L.useEffect(()=>{if(O.current){z.current=W1({domNode:O.current,minZoom:x,maxZoom:m,translateExtent:g,viewport:h,onDraggingChange:W=>A.setState({paneDragging:W}),onPanZoomStart:(W,_)=>{const{onViewportChangeStart:P,onMoveStart:k}=A.getState();k==null||k(W,_),P==null||P(_)},onPanZoom:(W,_)=>{const{onViewportChange:P,onMove:k}=A.getState();k==null||k(W,_),P==null||P(_)},onPanZoomEnd:(W,_)=>{const{onViewportChangeEnd:P,onMoveEnd:k}=A.getState();k==null||k(W,_),P==null||P(_)}});const{x:X,y:$,zoom:Q}=z.current.getViewport();return A.setState({panZoom:z.current,transform:[X,$,Q],domNode:O.current.closest(".react-flow")}),()=>{var W;(W=z.current)==null||W.destroy()}}},[]),L.useEffect(()=>{var X;(X=z.current)==null||X.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:f,zoomActivationKeyPressed:F,preventScrolling:w,noPanClassName:C,userSelectionActive:B,noWheelClassName:j,lib:Y,onTransformChange:H,connectionInProgress:q,selectionOnDrag:D,paneClickDistance:N})},[t,r,o,i,l,c,d,f,F,w,C,B,j,Y,H,q,D,N]),u.jsx("div",{className:"react-flow__renderer",ref:O,style:Yl,children:S})}const US=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function YS(){const{userSelectionActive:t,userSelectionRect:r}=Me(US,He);return t&&r?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const oc=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},XS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function GS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=Es.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:c,onSelectionStart:d,onSelectionEnd:f,onPaneClick:h,onPaneContextMenu:g,onPaneScroll:x,onPaneMouseEnter:m,onPaneMouseMove:y,onPaneMouseLeave:w,children:S}){const j=Ve(),{userSelectionActive:C,elementsSelectable:I,dragging:T,connectionInProgress:N}=Me(XS,He),D=I&&(t||C),A=L.useRef(null),O=L.useRef(),B=L.useRef(new Set),Y=L.useRef(new Set),q=L.useRef(!1),F=P=>{if(q.current||N){q.current=!1;return}h==null||h(P),j.getState().resetSelectedElements(),j.setState({nodesSelectionActive:!1})},z=P=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){P.preventDefault();return}g==null||g(P)},H=x?P=>x(P):void 0,X=P=>{q.current&&(P.stopPropagation(),q.current=!1)},$=P=>{var oe,ie;const{domNode:k}=j.getState();if(O.current=k==null?void 0:k.getBoundingClientRect(),!O.current)return;const R=P.target===A.current;if(!R&&!!P.target.closest(".nokey")||!t||!(c&&R||r)||P.button!==0||!P.isPrimary)return;(ie=(oe=P.target)==null?void 0:oe.setPointerCapture)==null||ie.call(oe,P.pointerId),q.current=!1;const{x:Z,y:J}=en(P.nativeEvent,O.current);j.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:J,x:Z,y:J}}),R||(P.stopPropagation(),P.preventDefault())},Q=P=>{const{userSelectionRect:k,transform:R,nodeLookup:E,edgeLookup:M,connectionLookup:Z,triggerNodeChanges:J,triggerEdgeChanges:oe,defaultEdgeOptions:ie,resetSelectedElements:le}=j.getState();if(!O.current||!k)return;const{x:se,y:G}=en(P.nativeEvent,O.current),{startX:ne,startY:pe}=k;if(!q.current){const Ee=r?0:l;if(Math.hypot(se-ne,G-pe)<=Ee)return;le(),d==null||d(P)}q.current=!0;const he={startX:ne,startY:pe,x:se<ne?se:ne,y:G<pe?G:pe,width:Math.abs(se-ne),height:Math.abs(G-pe)},me=B.current,ke=Y.current;B.current=new Set(Oc(E,he,R,o===Es.Partial,!0).map(Ee=>Ee.id)),Y.current=new Set;const be=(ie==null?void 0:ie.selectable)??!0;for(const Ee of B.current){const Ae=Z.get(Ee);if(Ae)for(const{edgeId:et}of Ae.values()){const at=M.get(et);at&&(at.selectable??be)&&Y.current.add(et)}}if(!Bp(me,B.current)){const Ee=po(E,B.current,!0);J(Ee)}if(!Bp(ke,Y.current)){const Ee=po(M,Y.current);oe(Ee)}j.setState({userSelectionRect:he,userSelectionActive:!0,nodesSelectionActive:!1})},W=P=>{var k,R;P.button===0&&((R=(k=P.target)==null?void 0:k.releasePointerCapture)==null||R.call(k,P.pointerId),!C&&P.target===A.current&&j.getState().userSelectionRect&&(F==null||F(P)),j.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(f==null||f(P),j.setState({nodesSelectionActive:B.current.size>0})))},_=i===!0||Array.isArray(i)&&i.includes(0);return u.jsxs("div",{className:qe(["react-flow__pane",{draggable:_,dragging:T,selection:t}]),onClick:D?void 0:oc(F,A),onContextMenu:oc(z,A),onWheel:oc(H,A),onPointerEnter:D?void 0:m,onPointerMove:D?Q:y,onPointerUp:D?W:void 0,onPointerDownCapture:D?$:void 0,onClickCapture:D?X:void 0,onPointerLeave:w,ref:A,style:Yl,children:[S,u.jsx(YS,{})]})}function Sc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:c,multiSelectionActive:d,nodeLookup:f,onError:h}=r.getState(),g=f.get(t);if(!g){h==null||h("012",fn.error012(t));return}r.setState({nodesSelectionActive:!1}),g.selected?(o||g.selected&&d)&&(c({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var x;return(x=i==null?void 0:i.current)==null?void 0:x.blur()})):l([t])}function Jh({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:c,nodeClickDistance:d}){const f=Ve(),[h,g]=L.useState(!1),x=L.useRef();return L.useEffect(()=>{x.current=M1({getStoreItems:()=>f.getState(),onNodeMouseDown:m=>{Sc({id:m,store:f,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),L.useEffect(()=>{var m,y;if(r)(m=x.current)==null||m.destroy();else if(t.current)return(y=x.current)==null||y.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:c,nodeId:l,nodeClickDistance:d}),()=>{var w;(w=x.current)==null||w.destroy()}},[o,i,r,c,t,l]),h}const KS=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function eg(){const t=Ve();return L.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:c,nodesDraggable:d,onError:f,updateNodePositions:h,nodeLookup:g,nodeOrigin:x}=t.getState(),m=new Map,y=KS(d),w=l?c[0]:5,S=l?c[1]:5,j=o.direction.x*w*o.factor,C=o.direction.y*S*o.factor;for(const[,I]of g){if(!y(I))continue;let T={x:I.internals.positionAbsolute.x+j,y:I.internals.positionAbsolute.y+C};l&&(T=$s(T,c));const{position:N,positionAbsolute:D}=Nh({nodeId:I.id,nextPosition:T,nodeLookup:g,nodeExtent:i,nodeOrigin:x,onError:f});I.position=N,I.internals.positionAbsolute=D,m.set(I.id,I)}h(m)},[])}const Vc=L.createContext(null),QS=Vc.Provider;Vc.Consumer;const tg=()=>L.useContext(Vc),qS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),ZS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:c,connection:d}=i,{fromHandle:f,toHandle:h,isValid:g}=d,x=(h==null?void 0:h.nodeId)===t&&(h==null?void 0:h.id)===r&&(h==null?void 0:h.type)===o;return{connectingFrom:(f==null?void 0:f.nodeId)===t&&(f==null?void 0:f.id)===r&&(f==null?void 0:f.type)===o,connectingTo:x,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:c===yo.Strict?(f==null?void 0:f.type)!==o:t!==(f==null?void 0:f.nodeId)||r!==(f==null?void 0:f.id),connectionInProcess:!!f,clickConnectionInProcess:!!l,valid:x&&g}};function JS({type:t="source",position:r=Ne.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:c=!0,id:d,onConnect:f,children:h,className:g,onMouseDown:x,onTouchStart:m,...y},w){var Q,W;const S=d||null,j=t==="target",C=Ve(),I=tg(),{connectOnClick:T,noPanClassName:N,rfId:D}=Me(qS,He),{connectingFrom:A,connectingTo:O,clickConnecting:B,isPossibleEndHandle:Y,connectionInProcess:q,clickConnectionInProcess:F,valid:z}=Me(ZS(I,S,t),He);I||(W=(Q=C.getState()).onError)==null||W.call(Q,"010",fn.error010());const H=_=>{const{defaultEdgeOptions:P,onConnect:k,hasDefaultEdges:R}=C.getState(),E={...P,..._};if(R){const{edges:M,setEdges:Z}=C.getState();Z(m1(E,M))}k==null||k(E),f==null||f(E)},X=_=>{if(!I)return;const P=Mh(_.nativeEvent);if(l&&(P&&_.button===0||!P)){const k=C.getState();wc.onPointerDown(_.nativeEvent,{handleDomNode:_.currentTarget,autoPanOnConnect:k.autoPanOnConnect,connectionMode:k.connectionMode,connectionRadius:k.connectionRadius,domNode:k.domNode,nodeLookup:k.nodeLookup,lib:k.lib,isTarget:j,handleId:S,nodeId:I,flowId:k.rfId,panBy:k.panBy,cancelConnection:k.cancelConnection,onConnectStart:k.onConnectStart,onConnectEnd:k.onConnectEnd,updateConnection:k.updateConnection,onConnect:H,isValidConnection:o||k.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:k.autoPanSpeed,dragThreshold:k.connectionDragThreshold})}P?x==null||x(_):m==null||m(_)},$=_=>{const{onClickConnectStart:P,onClickConnectEnd:k,connectionClickStartHandle:R,connectionMode:E,isValidConnection:M,lib:Z,rfId:J,nodeLookup:oe,connection:ie}=C.getState();if(!I||!R&&!l)return;if(!R){P==null||P(_.nativeEvent,{nodeId:I,handleId:S,handleType:t}),C.setState({connectionClickStartHandle:{nodeId:I,type:t,id:S}});return}const le=Eh(_.target),se=o||M,{connection:G,isValid:ne}=wc.isValid(_.nativeEvent,{handle:{nodeId:I,id:S,type:t},connectionMode:E,fromNodeId:R.nodeId,fromHandleId:R.id||null,fromType:R.type,isValidConnection:se,flowId:J,doc:le,lib:Z,nodeLookup:oe});ne&&G&&H(G);const pe=structuredClone(ie);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,k==null||k(_,pe),C.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":S,"data-nodeid":I,"data-handlepos":r,"data-id":`${D}-${I}-${S}-${t}`,className:qe(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",N,g,{source:!j,target:j,connectable:i,connectablestart:l,connectableend:c,clickconnecting:B,connectingfrom:A,connectingto:O,valid:z,connectionindicator:i&&(!q||Y)&&(q||F?c:l)}]),onMouseDown:X,onTouchStart:X,onClick:T?$:void 0,ref:w,...y,children:h})}const _r=L.memo(qh(JS));function eN({data:t,isConnectable:r,sourcePosition:o=Ne.Bottom}){return u.jsxs(u.Fragment,{children:[t==null?void 0:t.label,u.jsx(_r,{type:"source",position:o,isConnectable:r})]})}function tN({data:t,isConnectable:r,targetPosition:o=Ne.Top,sourcePosition:i=Ne.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(_r,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,u.jsx(_r,{type:"source",position:i,isConnectable:r})]})}function nN(){return null}function rN({data:t,isConnectable:r,targetPosition:o=Ne.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(_r,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const Tl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},vm={input:eN,default:tN,output:rN,group:nN};function oN(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const sN=t=>{const{width:r,height:o,x:i,y:l}=Ls(t.nodeLookup,{filter:c=>!!c.selected});return{width:Jt(r)?r:null,height:Jt(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function iN({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=Ve(),{width:l,height:c,transformString:d,userSelectionActive:f}=Me(sN,He),h=eg(),g=L.useRef(null);if(L.useEffect(()=>{var y;o||(y=g.current)==null||y.focus({preventScroll:!0})},[o]),Jh({nodeRef:g}),f||!l||!c)return null;const x=t?y=>{const w=i.getState().nodes.filter(S=>S.selected);t(y,w)}:void 0,m=y=>{Object.prototype.hasOwnProperty.call(Tl,y.key)&&(y.preventDefault(),h({direction:Tl[y.key],factor:y.shiftKey?4:1}))};return u.jsx("div",{className:qe(["react-flow__nodesselection","react-flow__container",r]),style:{transform:d},children:u.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:o?void 0:-1,onKeyDown:o?void 0:m,style:{width:l,height:c}})})}const wm=typeof window<"u"?window:void 0,lN=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function ng({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,paneClickDistance:f,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:x,selectionMode:m,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:C,elementsSelectable:I,zoomOnScroll:T,zoomOnPinch:N,panOnScroll:D,panOnScrollSpeed:A,panOnScrollMode:O,zoomOnDoubleClick:B,panOnDrag:Y,defaultViewport:q,translateExtent:F,minZoom:z,maxZoom:H,preventScrolling:X,onSelectionContextMenu:$,noWheelClassName:Q,noPanClassName:W,disableKeyboardA11y:_,onViewportChange:P,isControlledViewport:k}){const{nodesSelectionActive:R,userSelectionActive:E}=Me(lN,He),M=Ps(g,{target:wm}),Z=Ps(j,{target:wm}),J=Z||Y,oe=Z||D,ie=x&&J!==!0,le=M||E||ie;return HS({deleteKeyCode:h,multiSelectionKeyCode:S}),u.jsx(WS,{onPaneContextMenu:c,elementsSelectable:I,zoomOnScroll:T,zoomOnPinch:N,panOnScroll:oe,panOnScrollSpeed:A,panOnScrollMode:O,zoomOnDoubleClick:B,panOnDrag:!M&&J,defaultViewport:q,translateExtent:F,minZoom:z,maxZoom:H,zoomActivationKeyCode:C,preventScrolling:X,noWheelClassName:Q,noPanClassName:W,onViewportChange:P,isControlledViewport:k,paneClickDistance:f,selectionOnDrag:ie,children:u.jsxs(GS,{onSelectionStart:y,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:J,isSelecting:!!le,selectionMode:m,selectionKeyPressed:M,paneClickDistance:f,selectionOnDrag:ie,children:[t,R&&u.jsx(iN,{onSelectionContextMenu:$,noPanClassName:W,disableKeyboardA11y:_})]})})}ng.displayName="FlowRenderer";const aN=L.memo(ng),uN=t=>r=>t?Oc(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function cN(t){return Me(L.useCallback(uN(t),[t]),He)}const dN=t=>t.updateNodeInternals;function fN(){const t=Me(dN),[r]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const c=l.target.getAttribute("data-id");i.set(c,{id:c,nodeElement:l.target,force:!0})}),t(i)}));return L.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function pN({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=Ve(),c=L.useRef(null),d=L.useRef(null),f=L.useRef(t.sourcePosition),h=L.useRef(t.targetPosition),g=L.useRef(r),x=o&&!!t.internals.handleBounds;return L.useEffect(()=>{c.current&&!t.hidden&&(!x||d.current!==c.current)&&(d.current&&(i==null||i.unobserve(d.current)),i==null||i.observe(c.current),d.current=c.current)},[x,t.hidden]),L.useEffect(()=>()=>{d.current&&(i==null||i.unobserve(d.current),d.current=null)},[]),L.useEffect(()=>{if(c.current){const m=g.current!==r,y=f.current!==t.sourcePosition,w=h.current!==t.targetPosition;(m||y||w)&&(g.current=r,f.current=t.sourcePosition,h.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:c.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),c}function mN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:c,onDoubleClick:d,nodesDraggable:f,elementsSelectable:h,nodesConnectable:g,nodesFocusable:x,resizeObserver:m,noDragClassName:y,noPanClassName:w,disableKeyboardA11y:S,rfId:j,nodeTypes:C,nodeClickDistance:I,onError:T}){const{node:N,internals:D,isParent:A}=Me(se=>{const G=se.nodeLookup.get(t),ne=se.parentLookup.has(t);return{node:G,internals:G.internals,isParent:ne}},He);let O=N.type||"default",B=(C==null?void 0:C[O])||vm[O];B===void 0&&(T==null||T("003",fn.error003(O)),O="default",B=(C==null?void 0:C.default)||vm.default);const Y=!!(N.draggable||f&&typeof N.draggable>"u"),q=!!(N.selectable||h&&typeof N.selectable>"u"),F=!!(N.connectable||g&&typeof N.connectable>"u"),z=!!(N.focusable||x&&typeof N.focusable>"u"),H=Ve(),X=jh(N),$=pN({node:N,nodeType:O,hasDimensions:X,resizeObserver:m}),Q=Jh({nodeRef:$,disabled:N.hidden||!Y,noDragClassName:y,handleSelector:N.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:I}),W=eg();if(N.hidden)return null;const _=En(N),P=oN(N),k=q||Y||r||o||i||l,R=o?se=>o(se,{...D.userNode}):void 0,E=i?se=>i(se,{...D.userNode}):void 0,M=l?se=>l(se,{...D.userNode}):void 0,Z=c?se=>c(se,{...D.userNode}):void 0,J=d?se=>d(se,{...D.userNode}):void 0,oe=se=>{const{selectNodesOnDrag:G,nodeDragThreshold:ne}=H.getState();q&&(!G||!Y||ne>0)&&Sc({id:t,store:H,nodeRef:$}),r&&r(se,{...D.userNode})},ie=se=>{if(!(_h(se.nativeEvent)||S)){if(xh.includes(se.key)&&q){const G=se.key==="Escape";Sc({id:t,store:H,unselect:G,nodeRef:$})}else if(Y&&N.selected&&Object.prototype.hasOwnProperty.call(Tl,se.key)){se.preventDefault();const{ariaLabelConfig:G}=H.getState();H.setState({ariaLiveMessage:G["node.a11yDescription.ariaLiveMessage"]({direction:se.key.replace("Arrow","").toLowerCase(),x:~~D.positionAbsolute.x,y:~~D.positionAbsolute.y})}),W({direction:Tl[se.key],factor:se.shiftKey?4:1})}}},le=()=>{var ke;if(S||!((ke=$.current)!=null&&ke.matches(":focus-visible")))return;const{transform:se,width:G,height:ne,autoPanOnNodeFocus:pe,setCenter:he}=H.getState();if(!pe)return;Oc(new Map([[t,N]]),{x:0,y:0,width:G,height:ne},se,!0).length>0||he(N.position.x+_.width/2,N.position.y+_.height/2,{zoom:se[2]})};return u.jsx("div",{className:qe(["react-flow__node",`react-flow__node-${O}`,{[w]:Y},N.className,{selected:N.selected,selectable:q,parent:A,draggable:Y,dragging:Q}]),ref:$,style:{zIndex:D.z,transform:`translate(${D.positionAbsolute.x}px,${D.positionAbsolute.y}px)`,pointerEvents:k?"all":"none",visibility:X?"visible":"hidden",...N.style,...P},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:R,onMouseMove:E,onMouseLeave:M,onContextMenu:Z,onClick:oe,onDoubleClick:J,onKeyDown:z?ie:void 0,tabIndex:z?0:void 0,onFocus:z?le:void 0,role:N.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Xh}-${j}`,"aria-label":N.ariaLabel,...N.domAttributes,children:u.jsx(QS,{value:t,children:u.jsx(B,{id:t,data:N.data,type:O,positionAbsoluteX:D.positionAbsolute.x,positionAbsoluteY:D.positionAbsolute.y,selected:N.selected??!1,selectable:q,draggable:Y,deletable:N.deletable??!0,isConnectable:F,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:Q,dragHandle:N.dragHandle,zIndex:D.z,parentId:N.parentId,..._})})})}var hN=L.memo(mN);const gN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function rg(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:c}=Me(gN,He),d=cN(t.onlyRenderVisibleElements),f=fN();return u.jsx("div",{className:"react-flow__nodes",style:Yl,children:d.map(h=>u.jsx(hN,{id:h,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:c},h))})}rg.displayName="NodeRenderer";const xN=L.memo(rg);function yN(t){return Me(L.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const c=o.nodeLookup.get(l.source),d=o.nodeLookup.get(l.target);c&&d&&d1({sourceNode:c,targetNode:d,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),He)}const vN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return u.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},wN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return u.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Sm={[Ml.Arrow]:vN,[Ml.ArrowClosed]:wN};function SN(t){const r=Ve();return L.useMemo(()=>{var l,c;return Object.prototype.hasOwnProperty.call(Sm,t)?Sm[t]:((c=(l=r.getState()).onError)==null||c.call(l,"009",fn.error009(t)),null)},[t])}const NN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const h=SN(r);return h?u.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0",children:u.jsx(h,{color:o,strokeWidth:d})}):null},og=({defaultColor:t,rfId:r})=>{const o=Me(c=>c.edges),i=Me(c=>c.defaultEdgeOptions),l=L.useMemo(()=>v1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:l.map(c=>u.jsx(NN,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};og.displayName="MarkerDefinitions";var kN=L.memo(og);function sg({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:h,className:g,...x}){const[m,y]=L.useState({x:1,y:0,width:0,height:0}),w=qe(["react-flow__edge-textwrapper",g]),S=L.useRef(null);return L.useEffect(()=>{if(S.current){const j=S.current.getBBox();y({x:j.x,y:j.y,width:j.width,height:j.height})}},[o]),o?u.jsxs("g",{transform:`translate(${t-m.width/2} ${r-m.height/2})`,className:w,visibility:m.width?"visible":"hidden",...x,children:[l&&u.jsx("rect",{width:m.width+2*d[0],x:-d[0],y:-d[1],height:m.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:o}),h]}):null}sg.displayName="EdgeText";const CN=L.memo(sg);function No({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,interactionWidth:g=20,...x}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...x,d:t,fill:"none",className:qe(["react-flow__edge-path",x.className])}),g?u.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,i&&Jt(r)&&Jt(o)?u.jsx(CN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h}):null]})}function Nm({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===Ne.Left||t===Ne.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function ig({sourceX:t,sourceY:r,sourcePosition:o=Ne.Bottom,targetX:i,targetY:l,targetPosition:c=Ne.Top}){const[d,f]=Nm({pos:o,x1:t,y1:r,x2:i,y2:l}),[h,g]=Nm({pos:c,x1:i,y1:l,x2:t,y2:r}),[x,m,y,w]=Ph({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:d,sourceControlY:f,targetControlX:h,targetControlY:g});return[`M${t},${r} C${d},${f} ${h},${g} ${i},${l}`,x,m,y,w]}function lg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:C,interactionWidth:I})=>{const[T,N,D]=ig({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),A=t.isInternal?void 0:r;return u.jsx(No,{id:A,path:T,labelX:N,labelY:D,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:C,interactionWidth:I})})}const IN=lg({isInternal:!1}),ag=lg({isInternal:!0});IN.displayName="SimpleBezierEdge";ag.displayName="SimpleBezierEdgeInternal";function ug(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,sourcePosition:w=Ne.Bottom,targetPosition:S=Ne.Top,markerEnd:j,markerStart:C,pathOptions:I,interactionWidth:T})=>{const[N,D,A]=xc({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:c,targetPosition:S,borderRadius:I==null?void 0:I.borderRadius,offset:I==null?void 0:I.offset,stepPosition:I==null?void 0:I.stepPosition}),O=t.isInternal?void 0:r;return u.jsx(No,{id:O,path:N,labelX:D,labelY:A,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:j,markerStart:C,interactionWidth:T})})}const cg=ug({isInternal:!1}),dg=ug({isInternal:!0});cg.displayName="SmoothStepEdge";dg.displayName="SmoothStepEdgeInternal";function fg(t){return L.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return u.jsx(cg,{...o,id:i,pathOptions:L.useMemo(()=>{var c;return{borderRadius:0,offset:(c=o.pathOptions)==null?void 0:c.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const jN=fg({isInternal:!1}),pg=fg({isInternal:!0});jN.displayName="StepEdge";pg.displayName="StepEdgeInternal";function mg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:j})=>{const[C,I,T]=Th({sourceX:o,sourceY:i,targetX:l,targetY:c}),N=t.isInternal?void 0:r;return u.jsx(No,{id:N,path:C,labelX:I,labelY:T,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:j})})}const bN=mg({isInternal:!1}),hg=mg({isInternal:!0});bN.displayName="StraightEdge";hg.displayName="StraightEdgeInternal";function gg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d=Ne.Bottom,targetPosition:f=Ne.Top,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:C,pathOptions:I,interactionWidth:T})=>{const[N,D,A]=Vl({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f,curvature:I==null?void 0:I.curvature}),O=t.isInternal?void 0:r;return u.jsx(No,{id:O,path:N,labelX:D,labelY:A,label:h,labelStyle:g,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:C,interactionWidth:T})})}const EN=gg({isInternal:!1}),xg=gg({isInternal:!0});EN.displayName="BezierEdge";xg.displayName="BezierEdgeInternal";const km={default:xg,straight:hg,step:pg,smoothstep:dg,simplebezier:ag},Cm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_N=(t,r,o)=>o===Ne.Left?t-r:o===Ne.Right?t+r:t,MN=(t,r,o)=>o===Ne.Top?t-r:o===Ne.Bottom?t+r:t,Im="react-flow__edgeupdater";function jm({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:c,onMouseOut:d,type:f}){return u.jsx("circle",{onMouseDown:l,onMouseEnter:c,onMouseOut:d,className:qe([Im,`${Im}-${f}`]),cx:_N(r,i,t),cy:MN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function PN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:c,targetY:d,sourcePosition:f,targetPosition:h,onReconnect:g,onReconnectStart:x,onReconnectEnd:m,setReconnecting:y,setUpdateHover:w}){const S=Ve(),j=(D,A)=>{if(D.button!==0)return;const{autoPanOnConnect:O,domNode:B,isValidConnection:Y,connectionMode:q,connectionRadius:F,lib:z,onConnectStart:H,onConnectEnd:X,cancelConnection:$,nodeLookup:Q,rfId:W,panBy:_,updateConnection:P}=S.getState(),k=A.type==="target",R=(Z,J)=>{y(!1),m==null||m(Z,o,A.type,J)},E=Z=>g==null?void 0:g(o,Z),M=(Z,J)=>{y(!0),x==null||x(D,o,A.type),H==null||H(Z,J)};wc.onPointerDown(D.nativeEvent,{autoPanOnConnect:O,connectionMode:q,connectionRadius:F,domNode:B,handleId:A.id,nodeId:A.nodeId,nodeLookup:Q,isTarget:k,edgeUpdaterType:A.type,lib:z,flowId:W,cancelConnection:$,panBy:_,isValidConnection:Y,onConnect:E,onConnectStart:M,onConnectEnd:X,onReconnectEnd:R,updateConnection:P,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:D.currentTarget})},C=D=>j(D,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),I=D=>j(D,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),T=()=>w(!0),N=()=>w(!1);return u.jsxs(u.Fragment,{children:[(t===!0||t==="source")&&u.jsx(jm,{position:f,centerX:i,centerY:l,radius:r,onMouseDown:C,onMouseEnter:T,onMouseOut:N,type:"source"}),(t===!0||t==="target")&&u.jsx(jm,{position:h,centerX:c,centerY:d,radius:r,onMouseDown:I,onMouseEnter:T,onMouseOut:N,type:"target"})]})}function DN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:c,onContextMenu:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:g,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,rfId:S,edgeTypes:j,noPanClassName:C,onError:I,disableKeyboardA11y:T}){let N=Me(he=>he.edgeLookup.get(t));const D=Me(he=>he.defaultEdgeOptions);N=D?{...D,...N}:N;let A=N.type||"default",O=(j==null?void 0:j[A])||km[A];O===void 0&&(I==null||I("011",fn.error011(A)),A="default",O=(j==null?void 0:j.default)||km.default);const B=!!(N.focusable||r&&typeof N.focusable>"u"),Y=typeof m<"u"&&(N.reconnectable||o&&typeof N.reconnectable>"u"),q=!!(N.selectable||i&&typeof N.selectable>"u"),F=L.useRef(null),[z,H]=L.useState(!1),[X,$]=L.useState(!1),Q=Ve(),{zIndex:W,sourceX:_,sourceY:P,targetX:k,targetY:R,sourcePosition:E,targetPosition:M}=Me(L.useCallback(he=>{const me=he.nodeLookup.get(N.source),ke=he.nodeLookup.get(N.target);if(!me||!ke)return{zIndex:N.zIndex,...Cm};const be=y1({id:t,sourceNode:me,targetNode:ke,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:he.connectionMode,onError:I});return{zIndex:c1({selected:N.selected,zIndex:N.zIndex,sourceNode:me,targetNode:ke,elevateOnSelect:he.elevateEdgesOnSelect,zIndexMode:he.zIndexMode}),...be||Cm}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),He),Z=L.useMemo(()=>N.markerStart?`url('#${yc(N.markerStart,S)}')`:void 0,[N.markerStart,S]),J=L.useMemo(()=>N.markerEnd?`url('#${yc(N.markerEnd,S)}')`:void 0,[N.markerEnd,S]);if(N.hidden||_===null||P===null||k===null||R===null)return null;const oe=he=>{var Ee;const{addSelectedEdges:me,unselectNodesAndEdges:ke,multiSelectionActive:be}=Q.getState();q&&(Q.setState({nodesSelectionActive:!1}),N.selected&&be?(ke({nodes:[],edges:[N]}),(Ee=F.current)==null||Ee.blur()):me([t])),l&&l(he,N)},ie=c?he=>{c(he,{...N})}:void 0,le=d?he=>{d(he,{...N})}:void 0,se=f?he=>{f(he,{...N})}:void 0,G=h?he=>{h(he,{...N})}:void 0,ne=g?he=>{g(he,{...N})}:void 0,pe=he=>{var me;if(!T&&xh.includes(he.key)&&q){const{unselectNodesAndEdges:ke,addSelectedEdges:be}=Q.getState();he.key==="Escape"?((me=F.current)==null||me.blur(),ke({edges:[N]})):be([t])}};return u.jsx("svg",{style:{zIndex:W},children:u.jsxs("g",{className:qe(["react-flow__edge",`react-flow__edge-${A}`,N.className,C,{selected:N.selected,animated:N.animated,inactive:!q&&!l,updating:z,selectable:q}]),onClick:oe,onDoubleClick:ie,onContextMenu:le,onMouseEnter:se,onMouseMove:G,onMouseLeave:ne,onKeyDown:B?pe:void 0,tabIndex:B?0:void 0,role:N.ariaRole??(B?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":B?`${Gh}-${S}`:void 0,ref:F,...N.domAttributes,children:[!X&&u.jsx(O,{id:t,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:q,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:_,sourceY:P,targetX:k,targetY:R,sourcePosition:E,targetPosition:M,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:Z,markerEnd:J,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),Y&&u.jsx(PN,{edge:N,isReconnectable:Y,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,sourceX:_,sourceY:P,targetX:k,targetY:R,sourcePosition:E,targetPosition:M,setUpdateHover:H,setReconnecting:$})]})})}var TN=L.memo(DN);const ON=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function yg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:x,reconnectRadius:m,onEdgeDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:j}){const{edgesFocusable:C,edgesReconnectable:I,elementsSelectable:T,onError:N}=Me(ON,He),D=yN(r);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(kN,{defaultColor:t,rfId:o}),D.map(A=>u.jsx(TN,{id:A,edgesFocusable:C,edgesReconnectable:I,elementsSelectable:T,noPanClassName:l,onReconnect:c,onContextMenu:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:g,onClick:x,reconnectRadius:m,onDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:N,edgeTypes:i,disableKeyboardA11y:j},A))]})}yg.displayName="EdgeRenderer";const AN=L.memo(yg),LN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function $N({children:t}){const r=Me(LN);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function zN(t){const r=Dr(),o=L.useRef(!1);L.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const RN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function FN(t){const r=Me(RN),o=Ve();return L.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function HN(t){return t.connection.inProgress?{...t.connection,to:zs(t.connection.to,t.transform)}:{...t.connection}}function VN(t){return HN}function BN(t){const r=VN();return Me(r,He)}const WN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function UN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:c,height:d,isValid:f,inProgress:h}=Me(WN,He);return!(c&&l&&h)?null:u.jsx("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:qe(["react-flow__connection",wh(f)]),children:u.jsx(vg,{style:r,type:o,CustomComponent:i,isValid:f})})})}const vg=({style:t,type:r=Zn.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:c,fromNode:d,fromHandle:f,fromPosition:h,to:g,toNode:x,toHandle:m,toPosition:y,pointer:w}=BN();if(!l)return;if(o)return u.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:d,fromHandle:f,fromX:c.x,fromY:c.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:y,connectionStatus:wh(i),toNode:x,toHandle:m,pointer:w});let S="";const j={sourceX:c.x,sourceY:c.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:y};switch(r){case Zn.Bezier:[S]=Vl(j);break;case Zn.SimpleBezier:[S]=ig(j);break;case Zn.Step:[S]=xc({...j,borderRadius:0});break;case Zn.SmoothStep:[S]=xc(j);break;default:[S]=Th(j)}return u.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};vg.displayName="ConnectionLine";const YN={};function bm(t=YN){L.useRef(t),Ve(),L.useEffect(()=>{},[t])}function XN(){Ve(),L.useRef(!1),L.useEffect(()=>{},[])}function wg({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:x,onSelectionContextMenu:m,onSelectionStart:y,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:j,connectionLineComponent:C,connectionLineContainerStyle:I,selectionKeyCode:T,selectionOnDrag:N,selectionMode:D,multiSelectionKeyCode:A,panActivationKeyCode:O,zoomActivationKeyCode:B,deleteKeyCode:Y,onlyRenderVisibleElements:q,elementsSelectable:F,defaultViewport:z,translateExtent:H,minZoom:X,maxZoom:$,preventScrolling:Q,defaultMarkerColor:W,zoomOnScroll:_,zoomOnPinch:P,panOnScroll:k,panOnScrollSpeed:R,panOnScrollMode:E,zoomOnDoubleClick:M,panOnDrag:Z,onPaneClick:J,onPaneMouseEnter:oe,onPaneMouseMove:ie,onPaneMouseLeave:le,onPaneScroll:se,onPaneContextMenu:G,paneClickDistance:ne,nodeClickDistance:pe,onEdgeContextMenu:he,onEdgeMouseEnter:me,onEdgeMouseMove:ke,onEdgeMouseLeave:be,reconnectRadius:Ee,onReconnect:Ae,onReconnectStart:et,onReconnectEnd:at,noDragClassName:Xe,noWheelClassName:Ke,noPanClassName:ot,disableKeyboardA11y:Dt,nodeExtent:Tt,rfId:Vt,viewport:st,onViewportChange:mn}){return bm(t),bm(r),XN(),zN(o),FN(st),u.jsx(aN,{onPaneClick:J,onPaneMouseEnter:oe,onPaneMouseMove:ie,onPaneMouseLeave:le,onPaneContextMenu:G,onPaneScroll:se,paneClickDistance:ne,deleteKeyCode:Y,selectionKeyCode:T,selectionOnDrag:N,selectionMode:D,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:A,panActivationKeyCode:O,zoomActivationKeyCode:B,elementsSelectable:F,zoomOnScroll:_,zoomOnPinch:P,zoomOnDoubleClick:M,panOnScroll:k,panOnScrollSpeed:R,panOnScrollMode:E,panOnDrag:Z,defaultViewport:z,translateExtent:H,minZoom:X,maxZoom:$,onSelectionContextMenu:m,preventScrolling:Q,noDragClassName:Xe,noWheelClassName:Ke,noPanClassName:ot,disableKeyboardA11y:Dt,onViewportChange:mn,isControlledViewport:!!st,children:u.jsxs($N,{children:[u.jsx(AN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:Ae,onReconnectStart:et,onReconnectEnd:at,onlyRenderVisibleElements:q,onEdgeContextMenu:he,onEdgeMouseEnter:me,onEdgeMouseMove:ke,onEdgeMouseLeave:be,reconnectRadius:Ee,defaultMarkerColor:W,noPanClassName:ot,disableKeyboardA11y:Dt,rfId:Vt}),u.jsx(UN,{style:j,type:S,component:C,containerStyle:I}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(xN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:x,nodeClickDistance:pe,onlyRenderVisibleElements:q,noPanClassName:ot,noDragClassName:Xe,disableKeyboardA11y:Dt,nodeExtent:Tt,rfId:Vt}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}wg.displayName="GraphView";const GN=L.memo(wg),Em=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h=.5,maxZoom:g=2,nodeOrigin:x,nodeExtent:m,zIndexMode:y="basic"}={})=>{const w=new Map,S=new Map,j=new Map,C=new Map,I=i??r??[],T=o??t??[],N=x??[0,0],D=m??bs;Lh(j,C,I);const A=vc(T,w,S,{nodeOrigin:N,nodeExtent:D,zIndexMode:y});let O=[0,0,1];if(d&&l&&c){const B=Ls(w,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:Y,y:q,zoom:F}=Ac(B,l,c,h,g,(f==null?void 0:f.padding)??.1);O=[Y,q,F]}return{rfId:"1",width:l??0,height:c??0,transform:O,nodes:T,nodesInitialized:A,nodeLookup:w,parentLookup:S,edges:I,edgeLookup:C,connectionLookup:j,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:h,maxZoom:g,translateExtent:bs,nodeExtent:D,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:yo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:f,fitViewResolver:null,connection:{...vh},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:o1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:yh,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},KN=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:g,nodeOrigin:x,nodeExtent:m,zIndexMode:y})=>cS((w,S)=>{async function j(){const{nodeLookup:C,panZoom:I,fitViewOptions:T,fitViewResolver:N,width:D,height:A,minZoom:O,maxZoom:B}=S();I&&(await n1({nodes:C,width:D,height:A,panZoom:I,minZoom:O,maxZoom:B},T),N==null||N.resolve(!0),w({fitViewResolver:null}))}return{...Em({nodes:t,edges:r,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:g,nodeOrigin:x,nodeExtent:m,defaultNodes:o,defaultEdges:i,zIndexMode:y}),setNodes:C=>{const{nodeLookup:I,parentLookup:T,nodeOrigin:N,elevateNodesOnSelect:D,fitViewQueued:A,zIndexMode:O}=S(),B=vc(C,I,T,{nodeOrigin:N,nodeExtent:m,elevateNodesOnSelect:D,checkEquality:!0,zIndexMode:O});A&&B?(j(),w({nodes:C,nodesInitialized:B,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:C,nodesInitialized:B})},setEdges:C=>{const{connectionLookup:I,edgeLookup:T}=S();Lh(I,T,C),w({edges:C})},setDefaultNodesAndEdges:(C,I)=>{if(C){const{setNodes:T}=S();T(C),w({hasDefaultNodes:!0})}if(I){const{setEdges:T}=S();T(I),w({hasDefaultEdges:!0})}},updateNodeInternals:C=>{const{triggerNodeChanges:I,nodeLookup:T,parentLookup:N,domNode:D,nodeOrigin:A,nodeExtent:O,debug:B,fitViewQueued:Y,zIndexMode:q}=S(),{changes:F,updatedInternals:z}=j1(C,T,N,D,A,O,q);z&&(N1(T,N,{nodeOrigin:A,nodeExtent:O,zIndexMode:q}),Y?(j(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(F==null?void 0:F.length)>0&&(B&&console.log("React Flow: trigger node changes",F),I==null||I(F)))},updateNodePositions:(C,I=!1)=>{const T=[];let N=[];const{nodeLookup:D,triggerNodeChanges:A,connection:O,updateConnection:B,onNodesChangeMiddlewareMap:Y}=S();for(const[q,F]of C){const z=D.get(q),H=!!(z!=null&&z.expandParent&&(z!=null&&z.parentId)&&(F!=null&&F.position)),X={id:q,type:"position",position:H?{x:Math.max(0,F.position.x),y:Math.max(0,F.position.y)}:F.position,dragging:I};if(z&&O.inProgress&&O.fromNode.id===z.id){const $=br(z,O.fromHandle,Ne.Left,!0);B({...O,from:$})}H&&z.parentId&&T.push({id:q,parentId:z.parentId,rect:{...F.internals.positionAbsolute,width:F.measured.width??0,height:F.measured.height??0}}),N.push(X)}if(T.length>0){const{parentLookup:q,nodeOrigin:F}=S(),z=Hc(T,D,q,F);N.push(...z)}for(const q of Y.values())N=q(N);A(N)},triggerNodeChanges:C=>{const{onNodesChange:I,setNodes:T,nodes:N,hasDefaultNodes:D,debug:A}=S();if(C!=null&&C.length){if(D){const O=DS(C,N);T(O)}A&&console.log("React Flow: trigger node changes",C),I==null||I(C)}},triggerEdgeChanges:C=>{const{onEdgesChange:I,setEdges:T,edges:N,hasDefaultEdges:D,debug:A}=S();if(C!=null&&C.length){if(D){const O=TS(C,N);T(O)}A&&console.log("React Flow: trigger edge changes",C),I==null||I(C)}},addSelectedNodes:C=>{const{multiSelectionActive:I,edgeLookup:T,nodeLookup:N,triggerNodeChanges:D,triggerEdgeChanges:A}=S();if(I){const O=C.map(B=>wr(B,!0));D(O);return}D(po(N,new Set([...C]),!0)),A(po(T))},addSelectedEdges:C=>{const{multiSelectionActive:I,edgeLookup:T,nodeLookup:N,triggerNodeChanges:D,triggerEdgeChanges:A}=S();if(I){const O=C.map(B=>wr(B,!0));A(O);return}A(po(T,new Set([...C]))),D(po(N,new Set,!0))},unselectNodesAndEdges:({nodes:C,edges:I}={})=>{const{edges:T,nodes:N,nodeLookup:D,triggerNodeChanges:A,triggerEdgeChanges:O}=S(),B=C||N,Y=I||T,q=B.map(z=>{const H=D.get(z.id);return H&&(H.selected=!1),wr(z.id,!1)}),F=Y.map(z=>wr(z.id,!1));A(q),O(F)},setMinZoom:C=>{const{panZoom:I,maxZoom:T}=S();I==null||I.setScaleExtent([C,T]),w({minZoom:C})},setMaxZoom:C=>{const{panZoom:I,minZoom:T}=S();I==null||I.setScaleExtent([T,C]),w({maxZoom:C})},setTranslateExtent:C=>{var I;(I=S().panZoom)==null||I.setTranslateExtent(C),w({translateExtent:C})},resetSelectedElements:()=>{const{edges:C,nodes:I,triggerNodeChanges:T,triggerEdgeChanges:N,elementsSelectable:D}=S();if(!D)return;const A=I.reduce((B,Y)=>Y.selected?[...B,wr(Y.id,!1)]:B,[]),O=C.reduce((B,Y)=>Y.selected?[...B,wr(Y.id,!1)]:B,[]);T(A),N(O)},setNodeExtent:C=>{const{nodes:I,nodeLookup:T,parentLookup:N,nodeOrigin:D,elevateNodesOnSelect:A,nodeExtent:O,zIndexMode:B}=S();C[0][0]===O[0][0]&&C[0][1]===O[0][1]&&C[1][0]===O[1][0]&&C[1][1]===O[1][1]||(vc(I,T,N,{nodeOrigin:D,nodeExtent:C,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:B}),w({nodeExtent:C}))},panBy:C=>{const{transform:I,width:T,height:N,panZoom:D,translateExtent:A}=S();return b1({delta:C,panZoom:D,transform:I,translateExtent:A,width:T,height:N})},setCenter:async(C,I,T)=>{const{width:N,height:D,maxZoom:A,panZoom:O}=S();if(!O)return Promise.resolve(!1);const B=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:A;return await O.setViewport({x:N/2-C*B,y:D/2-I*B,zoom:B},{duration:T==null?void 0:T.duration,ease:T==null?void 0:T.ease,interpolate:T==null?void 0:T.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...vh}})},updateConnection:C=>{w({connection:C})},reset:()=>w({...Em()})}},Object.is);function Xl({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:c,initialMinZoom:d,initialMaxZoom:f,initialFitViewOptions:h,fitView:g,nodeOrigin:x,nodeExtent:m,zIndexMode:y,children:w}){const[S]=L.useState(()=>KN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:g,minZoom:d,maxZoom:f,fitViewOptions:h,nodeOrigin:x,nodeExtent:m,zIndexMode:y}));return u.jsx(fS,{value:S,children:u.jsx($S,{children:w})})}function QN({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:g,maxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w}){return L.useContext(Wl)?u.jsx(u.Fragment,{children:t}):u.jsx(Xl,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:c,initialHeight:d,fitView:f,initialFitViewOptions:h,initialMinZoom:g,initialMaxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w,children:t})}const qN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ZN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:c,edgeTypes:d,onNodeClick:f,onEdgeClick:h,onInit:g,onMove:x,onMoveStart:m,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:j,onClickConnectStart:C,onClickConnectEnd:I,onNodeMouseEnter:T,onNodeMouseMove:N,onNodeMouseLeave:D,onNodeContextMenu:A,onNodeDoubleClick:O,onNodeDragStart:B,onNodeDrag:Y,onNodeDragStop:q,onNodesDelete:F,onEdgesDelete:z,onDelete:H,onSelectionChange:X,onSelectionDragStart:$,onSelectionDrag:Q,onSelectionDragStop:W,onSelectionContextMenu:_,onSelectionStart:P,onSelectionEnd:k,onBeforeDelete:R,connectionMode:E,connectionLineType:M=Zn.Bezier,connectionLineStyle:Z,connectionLineComponent:J,connectionLineContainerStyle:oe,deleteKeyCode:ie="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:se=!1,selectionMode:G=Es.Full,panActivationKeyCode:ne="Space",multiSelectionKeyCode:pe=Ms()?"Meta":"Control",zoomActivationKeyCode:he=Ms()?"Meta":"Control",snapToGrid:me,snapGrid:ke,onlyRenderVisibleElements:be=!1,selectNodesOnDrag:Ee,nodesDraggable:Ae,autoPanOnNodeFocus:et,nodesConnectable:at,nodesFocusable:Xe,nodeOrigin:Ke=Kh,edgesFocusable:ot,edgesReconnectable:Dt,elementsSelectable:Tt=!0,defaultViewport:Vt=IS,minZoom:st=.5,maxZoom:mn=2,translateExtent:er=bs,preventScrolling:Fs=!0,nodeExtent:hn,defaultMarkerColor:tr="#b1b1b7",zoomOnScroll:Ql=!0,zoomOnPinch:Hs=!0,panOnScroll:Vs=!1,panOnScrollSpeed:ql=.5,panOnScrollMode:ko=kr.Free,zoomOnDoubleClick:Co=!0,panOnDrag:Io=!0,onPaneClick:jo,onPaneMouseEnter:bo,onPaneMouseMove:_n,onPaneMouseLeave:Mn,onPaneScroll:Bs,onPaneContextMenu:Ws,paneClickDistance:Us=1,nodeClickDistance:Ys=0,children:Xs,onReconnect:Eo,onReconnectStart:Gs,onReconnectEnd:nr,onEdgeContextMenu:_o,onEdgeDoubleClick:rr,onEdgeMouseEnter:Zl,onEdgeMouseMove:or,onEdgeMouseLeave:Tr,reconnectRadius:Or=10,onNodesChange:Mo,onEdgesChange:Jl,noDragClassName:ea="nodrag",noWheelClassName:ta="nowheel",noPanClassName:nn="nopan",fitView:Po,fitViewOptions:Do,connectOnClick:na,attributionPosition:Ks,proOptions:Qs,defaultEdgeOptions:qs,elevateNodesOnSelect:Zs=!0,elevateEdgesOnSelect:ra=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Be,autoPanOnNodeDrag:oa,autoPanSpeed:To,connectionRadius:ei,isValidConnection:Ar,onError:sa,style:ti,id:sr,nodeDragThreshold:Ot,connectionDragThreshold:ia,viewport:Ct,onViewportChange:la,width:aa,height:ua,colorMode:Lr="light",debug:$r,onScroll:rn,ariaLabelConfig:zr,zIndexMode:ni="basic",...ca},Oo){const Rr=sr||"1",Ao=_S(Lr),ir=L.useCallback(ri=>{ri.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),rn==null||rn(ri)},[rn]);return u.jsx("div",{"data-testid":"rf__wrapper",...ca,onScroll:ir,style:{...ti,...qN},ref:Oo,className:qe(["react-flow",l,Ao]),id:sr,role:"application",children:u.jsxs(QN,{nodes:t,edges:r,width:aa,height:ua,fitView:Po,fitViewOptions:Do,minZoom:st,maxZoom:mn,nodeOrigin:Ke,nodeExtent:hn,zIndexMode:ni,children:[u.jsx(GN,{onInit:g,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:T,onNodeMouseMove:N,onNodeMouseLeave:D,onNodeContextMenu:A,onNodeDoubleClick:O,nodeTypes:c,edgeTypes:d,connectionLineType:M,connectionLineStyle:Z,connectionLineComponent:J,connectionLineContainerStyle:oe,selectionKeyCode:le,selectionOnDrag:se,selectionMode:G,deleteKeyCode:ie,multiSelectionKeyCode:pe,panActivationKeyCode:ne,zoomActivationKeyCode:he,onlyRenderVisibleElements:be,defaultViewport:Vt,translateExtent:er,minZoom:st,maxZoom:mn,preventScrolling:Fs,zoomOnScroll:Ql,zoomOnPinch:Hs,zoomOnDoubleClick:Co,panOnScroll:Vs,panOnScrollSpeed:ql,panOnScrollMode:ko,panOnDrag:Io,onPaneClick:jo,onPaneMouseEnter:bo,onPaneMouseMove:_n,onPaneMouseLeave:Mn,onPaneScroll:Bs,onPaneContextMenu:Ws,paneClickDistance:Us,nodeClickDistance:Ys,onSelectionContextMenu:_,onSelectionStart:P,onSelectionEnd:k,onReconnect:Eo,onReconnectStart:Gs,onReconnectEnd:nr,onEdgeContextMenu:_o,onEdgeDoubleClick:rr,onEdgeMouseEnter:Zl,onEdgeMouseMove:or,onEdgeMouseLeave:Tr,reconnectRadius:Or,defaultMarkerColor:tr,noDragClassName:ea,noWheelClassName:ta,noPanClassName:nn,rfId:Rr,disableKeyboardA11y:Js,nodeExtent:hn,viewport:Ct,onViewportChange:la}),u.jsx(ES,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:j,onClickConnectStart:C,onClickConnectEnd:I,nodesDraggable:Ae,autoPanOnNodeFocus:et,nodesConnectable:at,nodesFocusable:Xe,edgesFocusable:ot,edgesReconnectable:Dt,elementsSelectable:Tt,elevateNodesOnSelect:Zs,elevateEdgesOnSelect:ra,minZoom:st,maxZoom:mn,nodeExtent:hn,onNodesChange:Mo,onEdgesChange:Jl,snapToGrid:me,snapGrid:ke,connectionMode:E,translateExtent:er,connectOnClick:na,defaultEdgeOptions:qs,fitView:Po,fitViewOptions:Do,onNodesDelete:F,onEdgesDelete:z,onDelete:H,onNodeDragStart:B,onNodeDrag:Y,onNodeDragStop:q,onSelectionDrag:Q,onSelectionDragStart:$,onSelectionDragStop:W,onMove:x,onMoveStart:m,onMoveEnd:y,noPanClassName:nn,nodeOrigin:Ke,rfId:Rr,autoPanOnConnect:Be,autoPanOnNodeDrag:oa,autoPanSpeed:To,onError:sa,connectionRadius:ei,isValidConnection:Ar,selectNodesOnDrag:Ee,nodeDragThreshold:Ot,connectionDragThreshold:ia,onBeforeDelete:R,debug:$r,ariaLabelConfig:zr,zIndexMode:ni}),u.jsx(CS,{onSelectionChange:X}),Xs,u.jsx(vS,{proOptions:Qs,position:Ks}),u.jsx(yS,{rfId:Rr,disableKeyboardA11y:Js})]})})}var Sg=qh(ZN);const JN=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function Ng({children:t}){const r=Me(JN);return r?dS.createPortal(t,r):null}function ek({dimensions:t,lineWidth:r,variant:o,className:i}){return u.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:qe(["react-flow__background-pattern",o,i])})}function tk({radius:t,className:r}){return u.jsx("circle",{cx:t,cy:t,r:t,className:qe(["react-flow__background-pattern","dots",r])})}var Jn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Jn||(Jn={}));const nk={[Jn.Dots]:1,[Jn.Lines]:1,[Jn.Cross]:6},rk=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function kg({id:t,variant:r=Jn.Dots,gap:o=20,size:i,lineWidth:l=1,offset:c=0,color:d,bgColor:f,style:h,className:g,patternClassName:x}){const m=L.useRef(null),{transform:y,patternId:w}=Me(rk,He),S=i||nk[r],j=r===Jn.Dots,C=r===Jn.Cross,I=Array.isArray(o)?o:[o,o],T=[I[0]*y[2]||1,I[1]*y[2]||1],N=S*y[2],D=Array.isArray(c)?c:[c,c],A=C?[N,N]:T,O=[D[0]*y[2]||1+A[0]/2,D[1]*y[2]||1+A[1]/2],B=`${w}${t||""}`;return u.jsxs("svg",{className:qe(["react-flow__background",g]),style:{...h,...Yl,"--xy-background-color-props":f,"--xy-background-pattern-color-props":d},ref:m,"data-testid":"rf__background",children:[u.jsx("pattern",{id:B,x:y[0]%T[0],y:y[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`,children:j?u.jsx(tk,{radius:N/2,className:x}):u.jsx(ek,{dimensions:A,lineWidth:l,variant:r,className:x})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${B})`})]})}kg.displayName="Background";const Cg=L.memo(kg);function ok(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function sk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ik(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function lk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ak(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function pl({children:t,className:r,...o}){return u.jsx("button",{type:"button",className:qe(["react-flow__controls-button",r]),...o,children:t})}const uk=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Ig({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:c,onZoomOut:d,onFitView:f,onInteractiveChange:h,className:g,children:x,position:m="bottom-left",orientation:y="vertical","aria-label":w}){const S=Ve(),{isInteractive:j,minZoomReached:C,maxZoomReached:I,ariaLabelConfig:T}=Me(uk,He),{zoomIn:N,zoomOut:D,fitView:A}=Dr(),O=()=>{N(),c==null||c()},B=()=>{D(),d==null||d()},Y=()=>{A(l),f==null||f()},q=()=>{S.setState({nodesDraggable:!j,nodesConnectable:!j,elementsSelectable:!j}),h==null||h(!j)},F=y==="horizontal"?"horizontal":"vertical";return u.jsxs(Ul,{className:qe(["react-flow__controls",F,g]),position:m,style:t,"data-testid":"rf__controls","aria-label":w??T["controls.ariaLabel"],children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(pl,{onClick:O,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:I,children:u.jsx(ok,{})}),u.jsx(pl,{onClick:B,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:C,children:u.jsx(sk,{})})]}),o&&u.jsx(pl,{className:"react-flow__controls-fitview",onClick:Y,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:u.jsx(ik,{})}),i&&u.jsx(pl,{className:"react-flow__controls-interactive",onClick:q,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:j?u.jsx(ak,{}):u.jsx(lk,{})}),x]})}Ig.displayName="Controls";const jg=L.memo(Ig);function ck({id:t,x:r,y:o,width:i,height:l,style:c,color:d,strokeColor:f,strokeWidth:h,className:g,borderRadius:x,shapeRendering:m,selected:y,onClick:w}){const{background:S,backgroundColor:j}=c||{},C=d||S||j;return u.jsx("rect",{className:qe(["react-flow__minimap-node",{selected:y},g]),x:r,y:o,rx:x,ry:x,width:i,height:l,style:{fill:C,stroke:f,strokeWidth:h},shapeRendering:m,onClick:w?I=>w(I,t):void 0})}const dk=L.memo(ck),fk=t=>t.nodes.map(r=>r.id),sc=t=>t instanceof Function?t:()=>t;function pk({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:c=dk,onClick:d}){const f=Me(fk,He),h=sc(r),g=sc(t),x=sc(o),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(y=>u.jsx(hk,{id:y,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:x,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:c,onClick:d,shapeRendering:m},y))})}function mk({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:c,shapeRendering:d,NodeComponent:f,onClick:h}){const{node:g,x,y:m,width:y,height:w}=Me(S=>{const{internals:j}=S.nodeLookup.get(t),C=j.userNode,{x:I,y:T}=j.positionAbsolute,{width:N,height:D}=En(C);return{node:C,x:I,y:T,width:N,height:D}},He);return!g||g.hidden||!jh(g)?null:u.jsx(f,{x,y:m,width:y,height:w,style:g.style,selected:!!g.selected,className:i(g),color:r(g),borderRadius:l,strokeColor:o(g),strokeWidth:c,shapeRendering:d,onClick:h,id:g.id})}const hk=L.memo(mk);var gk=L.memo(pk);const xk=200,yk=150,vk=t=>!t.hidden,wk=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?Ih(Ls(t.nodeLookup,{filter:vk}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},Sk="react-flow__minimap-desc";function bg({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:h,maskColor:g,maskStrokeColor:x,maskStrokeWidth:m,position:y="bottom-right",onClick:w,onNodeClick:S,pannable:j=!1,zoomable:C=!1,ariaLabel:I,inversePan:T,zoomStep:N=1,offsetScale:D=5}){const A=Ve(),O=L.useRef(null),{boundingRect:B,viewBB:Y,rfId:q,panZoom:F,translateExtent:z,flowWidth:H,flowHeight:X,ariaLabelConfig:$}=Me(wk,He),Q=(t==null?void 0:t.width)??xk,W=(t==null?void 0:t.height)??yk,_=B.width/Q,P=B.height/W,k=Math.max(_,P),R=k*Q,E=k*W,M=D*k,Z=B.x-(R-B.width)/2-M,J=B.y-(E-B.height)/2-M,oe=R+M*2,ie=E+M*2,le=`${Sk}-${q}`,se=L.useRef(0),G=L.useRef();se.current=k,L.useEffect(()=>{if(O.current&&F)return G.current=L1({domNode:O.current,panZoom:F,getTransform:()=>A.getState().transform,getViewScale:()=>se.current}),()=>{var me;(me=G.current)==null||me.destroy()}},[F]),L.useEffect(()=>{var me;(me=G.current)==null||me.update({translateExtent:z,width:H,height:X,inversePan:T,pannable:j,zoomStep:N,zoomable:C})},[j,C,T,N,z,H,X]);const ne=w?me=>{var Ee;const[ke,be]=((Ee=G.current)==null?void 0:Ee.pointer(me))||[0,0];w(me,{x:ke,y:be})}:void 0,pe=S?L.useCallback((me,ke)=>{const be=A.getState().nodeLookup.get(ke).internals.userNode;S(me,be)},[]):void 0,he=I??$["minimap.ariaLabel"];return u.jsx(Ul,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*k:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:qe(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:Q,height:W,viewBox:`${Z} ${J} ${oe} ${ie}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:O,onClick:ne,children:[he&&u.jsx("title",{id:le,children:he}),u.jsx(gk,{onClick:pe,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-M},${J-M}h${oe+M*2}v${ie+M*2}h${-oe-M*2}z
        M${Y.x},${Y.y}h${Y.width}v${Y.height}h${-Y.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}bg.displayName="MiniMap";const Nk=L.memo(bg),kk=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,Ck={[Er.Line]:"right",[Er.Handle]:"bottom-right"};function Ik({nodeId:t,position:r,variant:o=Er.Handle,className:i,style:l=void 0,children:c,color:d,minWidth:f=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:y,autoScale:w=!0,shouldResize:S,onResizeStart:j,onResize:C,onResizeEnd:I}){const T=tg(),N=typeof t=="string"?t:T,D=Ve(),A=L.useRef(null),O=o===Er.Handle,B=Me(L.useCallback(kk(O&&w),[O,w]),He),Y=L.useRef(null),q=r??Ck[o];L.useEffect(()=>{if(!(!A.current||!N))return Y.current||(Y.current=Z1({domNode:A.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:z,transform:H,snapGrid:X,snapToGrid:$,nodeOrigin:Q,domNode:W}=D.getState();return{nodeLookup:z,transform:H,snapGrid:X,snapToGrid:$,nodeOrigin:Q,paneDomNode:W}},onChange:(z,H)=>{const{triggerNodeChanges:X,nodeLookup:$,parentLookup:Q,nodeOrigin:W}=D.getState(),_=[],P={x:z.x,y:z.y},k=$.get(N);if(k&&k.expandParent&&k.parentId){const R=k.origin??W,E=z.width??k.measured.width??0,M=z.height??k.measured.height??0,Z={id:k.id,parentId:k.parentId,rect:{width:E,height:M,...bh({x:z.x??k.position.x,y:z.y??k.position.y},{width:E,height:M},k.parentId,$,R)}},J=Hc([Z],$,Q,W);_.push(...J),P.x=z.x?Math.max(R[0]*E,z.x):void 0,P.y=z.y?Math.max(R[1]*M,z.y):void 0}if(P.x!==void 0&&P.y!==void 0){const R={id:N,type:"position",position:{...P}};_.push(R)}if(z.width!==void 0&&z.height!==void 0){const E={id:N,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};_.push(E)}for(const R of H){const E={...R,type:"position"};_.push(E)}X(_)},onEnd:({width:z,height:H})=>{const X={id:N,type:"dimensions",resizing:!1,dimensions:{width:z,height:H}};D.getState().triggerNodeChanges([X])}})),Y.current.update({controlPosition:q,boundaries:{minWidth:f,minHeight:h,maxWidth:g,maxHeight:x},keepAspectRatio:m,resizeDirection:y,onResizeStart:j,onResize:C,onResizeEnd:I,shouldResize:S}),()=>{var z;(z=Y.current)==null||z.destroy()}},[q,f,h,g,x,m,j,C,I,S]);const F=q.split("-");return u.jsx("div",{className:qe(["react-flow__resize-control","nodrag",...F,o,i]),ref:A,style:{...l,scale:B,...d&&{[O?"backgroundColor":"borderColor"]:d}},children:c})}const _m=L.memo(Ik);function jk({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:c,color:d,minWidth:f=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,autoScale:y=!0,shouldResize:w,onResizeStart:S,onResize:j,onResizeEnd:C}){return r?u.jsxs(u.Fragment,{children:[Y1.map(I=>u.jsx(_m,{className:l,style:c,nodeId:t,position:I,variant:Er.Line,color:d,minWidth:f,minHeight:h,maxWidth:g,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:j,onResizeEnd:C},I)),U1.map(I=>u.jsx(_m,{className:o,style:i,nodeId:t,position:I,color:d,minWidth:f,minHeight:h,maxWidth:g,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:j,onResizeEnd:C},I))]}):null}const Mm=t=>{let r;const o=new Set,i=(g,x)=>{const m=typeof g=="function"?g(r):g;if(!Object.is(m,r)){const y=r;r=x??(typeof m!="object"||m===null)?m:Object.assign({},r,m),o.forEach(w=>w(r,y))}},l=()=>r,f={setState:i,getState:l,getInitialState:()=>h,subscribe:g=>(o.add(g),()=>o.delete(g))},h=r=t(i,l,f);return f},bk=(t=>t?Mm(t):Mm),Ek=t=>t;function _k(t,r=Ek){const o=xs.useSyncExternalStore(t.subscribe,xs.useCallback(()=>r(t.getState()),[t,r]),xs.useCallback(()=>r(t.getInitialState()),[t,r]));return xs.useDebugValue(o),o}const Pm=t=>{const r=bk(t),o=i=>_k(r,i);return Object.assign(o,r),o},Rs=(t=>t?Pm(t):Pm),Mk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let In=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=Mk[o[t]&63];return r};const Nt="__station_input__",Ht="__station_output__",Pk=100,Dk=["energycells"];function Tk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return Pk}function Ok(t,r){return Dk.includes(t)?r/100:1}const Eg=3600,gs={food:75,medical:45,per:200,cycle:600},ml={food:50,medical:30,per:200},Ak="foodrations",Lk="medicalsupplies";function $k(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),c=Math.max(i-t,0),d=t>0?Math.min(i/t,1):0,f=l*(gs.food/gs.per),h=c*(ml.food/ml.per),g=l*(gs.medical/gs.per),x=c*(ml.medical/ml.per),m=Eg/gs.cycle,y=(f+h)*m,w=(g+x)*m;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:c,workerRatio:d,foodDemand:y,medicalDemand:w}}function zk(t,r){return 1+t*r}function Rk(t,r){if(t.totalCapacity<=0||r<=0)return[];const o=r/t.totalCapacity,i=[];return t.foodDemand>0&&i.push({wareId:Ak,amount:t.foodDemand*o}),t.medicalDemand>0&&i.push({wareId:Lk,amount:t.medicalDemand*o}),i}function Bc(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const c=`${o}_default`;if(r[c])return r[c];for(const d of Object.values(r))if(d.wareId===o)return d;return null}function Nc(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Fk(t,r,o,i){const l=Nc(t.blueprintId,r),c=[],d=[];if(l==="production"){const f=r.modules.production[t.blueprintId];if(f){const h=Bc(f,r.recipes);if(h){const g=Ok(f.producedWareId,o),x=zk(h.workforceBonus,i),m=g*x,y=Eg/h.time,w=h.amount*t.count*m*y;d.push({wareId:f.producedWareId,amount:w});for(const S of h.inputs){const j=S.amount*t.count*y;c.push({wareId:S.ware,amount:j})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:c,grossOutputs:d,netInputs:[...c],netOutputs:[...d]}}function uo(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Hk(t,r,o){const i=Tk(t,r),l=t.fillHabitats??!1,c=t.moduleConnections??[];let d=0,f=0;for(const k of t.modules){const R=Nc(k.blueprintId,o);if(R==="production"){const E=o.modules.production[k.blueprintId];E&&(d+=E.workforceMax*k.count)}else if(R==="habitat"){const E=o.modules.habitat[k.blueprintId];E&&(f+=E.workforceCapacity*k.count)}}const h=$k(d,f,l),g=t.modules.map(k=>Fk(k,o,i,h.workerRatio)),x=new Map;for(const k of g)x.set(k.moduleId,k);for(const k of t.modules)if(Nc(k.blueprintId,o)==="habitat"){const E=o.modules.habitat[k.blueprintId],M=x.get(k.id);if(E&&M){const Z=E.workforceCapacity*k.count,J=Rk(h,Z);M.grossInputs.push(...J),M.netInputs=[...M.grossInputs]}}const m=new Map;for(const k of g)m.set(k.moduleId,new Map);const y=new Map;for(const k of g)y.set(k.moduleId,new Map);const w=new Map;for(const k of g){const R=new Map;for(const E of k.grossOutputs)R.set(E.wareId,E.amount);w.set(k.moduleId,R)}const S=new Map;for(const k of g){const R=new Map;for(const E of k.grossInputs)R.set(E.wareId,E.amount);S.set(k.moduleId,R)}const j=c.filter(k=>k.sourceModuleId!==Nt&&k.targetModuleId!==Ht),C=c.filter(k=>k.sourceModuleId===Nt),I=c.filter(k=>k.targetModuleId===Ht),T=[];for(const k of j){const R=k.mode??"auto",E=w.get(k.sourceModuleId),M=(E==null?void 0:E.get(k.wareId))??0,Z=S.get(k.targetModuleId),J=(Z==null?void 0:Z.get(k.wareId))??0;let oe,ie=!1,le=!1;switch(R){case"custom":oe=Math.min(k.amount,M,J),ie=k.amount>M,le=k.amount>J;break;case"max":oe=Math.min(M,J),ie=M<J,le=J<M;break;case"auto":default:oe=Math.min(M,J),ie=M<J,le=J<M;break}T.push({connectionId:k.id,effectiveAmount:oe,sourceConstrained:ie,targetConstrained:le}),E&&E.set(k.wareId,M-oe),Z&&Z.set(k.wareId,J-oe);const se=m.get(k.targetModuleId);if(se){const ne=se.get(k.wareId)||0;se.set(k.wareId,ne+oe)}const G=y.get(k.sourceModuleId);if(G){const ne=G.get(k.wareId)||0;G.set(k.wareId,ne+oe)}}for(const k of C){const R=k.mode??"auto",E=S.get(k.targetModuleId),M=(E==null?void 0:E.get(k.wareId))??0;let Z,J=!1,oe=!1;switch(R){case"custom":Z=Math.min(k.amount,M),oe=k.amount>M;break;case"max":case"auto":default:Z=M;break}T.push({connectionId:k.id,effectiveAmount:Z,sourceConstrained:J,targetConstrained:oe}),E&&E.set(k.wareId,M-Z)}for(const k of I){const R=k.mode??"auto",E=w.get(k.sourceModuleId),M=(E==null?void 0:E.get(k.wareId))??0;let Z,J=!1,oe=!1;switch(R){case"custom":Z=Math.min(k.amount,M),J=k.amount>M;break;case"max":case"auto":default:Z=M;break}T.push({connectionId:k.id,effectiveAmount:Z,sourceConstrained:J,targetConstrained:oe}),E&&E.set(k.wareId,M-Z)}for(const k of g){const R=m.get(k.moduleId)||new Map,E=y.get(k.moduleId)||new Map;k.netInputs=[];for(const M of k.grossInputs){const Z=R.get(M.wareId)||0,J=M.amount-Z;J>.01&&k.netInputs.push({wareId:M.wareId,amount:J})}k.netOutputs=[];for(const M of k.grossOutputs){const Z=E.get(M.wareId)||0,J=M.amount-Z;J>.01&&k.netOutputs.push({wareId:M.wareId,amount:J})}}const N=[],D=[],A=[],O=[];for(const k of g)N.push(...k.grossInputs),D.push(...k.grossOutputs),A.push(...k.netInputs),O.push(...k.netOutputs);const B=uo(N),Y=uo(D),q=uo(A),F=uo(O),z=C.map(k=>{const R=T.find(E=>E.connectionId===k.id);return{wareId:k.wareId,amount:(R==null?void 0:R.effectiveAmount)??k.amount}}),H=I.map(k=>{const R=T.find(E=>E.connectionId===k.id);return{wareId:k.wareId,amount:(R==null?void 0:R.effectiveAmount)??k.amount}}),X=uo(z),$=uo(H),Q=new Map;for(const k of X)Q.set(k.wareId,k.amount);const W=new Map;for(const k of $)W.set(k.wareId,k.amount);const _=[];for(const k of q){const R=Q.get(k.wareId)||0,E=k.amount-R;E>.01&&_.push({wareId:k.wareId,amount:E})}const P=[];for(const k of F){const R=W.get(k.wareId)||0,E=k.amount-R;E>.01&&P.push({wareId:k.wareId,amount:E})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:d,totalWorkforceCapacity:f,actualPopulation:h.actualPopulation,workforceFoodDemand:h.foodDemand,workforceMedicalDemand:h.medicalDemand,modules:g,grossInputs:B,grossOutputs:Y,netInputs:q,netOutputs:F,availableForImport:_,availableForExport:P,stationInputs:X,stationOutputs:$,externallySupplied:[],externallyConsumed:[],remainingInputs:[...X],remainingOutputs:[...$],moduleConnections:T}}function Dm(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Vk(t,r){const o=t.stations.map(y=>Hk(y,t.sectors,r)),i=new Map;for(const y of o)i.set(y.stationId,y);const l=new Map,c=new Map,d=new Map,f=new Map;for(const y of t.stations)l.set(y.id,new Map),c.set(y.id,new Map),d.set(y.id,new Map),f.set(y.id,new Map);for(const y of o){const w=d.get(y.stationId),S=f.get(y.stationId);for(const j of y.stationOutputs){const C=y.netOutputs.find(T=>T.wareId===j.wareId),I=Math.min(j.amount,(C==null?void 0:C.amount)??j.amount);w.set(j.wareId,I)}for(const j of y.stationInputs)S.set(j.wareId,j.amount)}const h=[];for(const y of t.connections){const w=y.mode??"auto",S=d.get(y.sourceStationId),j=(S==null?void 0:S.get(y.wareId))??0,C=f.get(y.targetStationId),I=(C==null?void 0:C.get(y.wareId))??0;let T,N=!1,D=!1;switch(w){case"custom":T=Math.min(y.amount,j,I),N=y.amount>j,D=y.amount>I;break;case"max":T=Math.min(j,I),N=j<I,D=I<j;break;case"auto":default:T=Math.min(j,I),N=j<I,D=I<j;break}h.push({connectionId:y.id,effectiveAmount:T,sourceConstrained:N,targetConstrained:D}),S&&S.set(y.wareId,j-T),C&&C.set(y.wareId,I-T);const A=l.get(y.targetStationId);if(A){const B=A.get(y.wareId)||0;A.set(y.wareId,B+T)}const O=c.get(y.sourceStationId);if(O){const B=O.get(y.wareId)||0;O.set(y.wareId,B+T)}}for(const y of o){const w=l.get(y.stationId)||new Map,S=c.get(y.stationId)||new Map;y.externallySupplied=Array.from(w.entries()).map(([C,I])=>({wareId:C,amount:I})).filter(C=>C.amount>.01),y.externallyConsumed=Array.from(S.entries()).map(([C,I])=>({wareId:C,amount:I})).filter(C=>C.amount>.01),y.remainingInputs=[];for(const C of y.stationInputs){const I=w.get(C.wareId)||0,T=C.amount-I;T>.01&&y.remainingInputs.push({wareId:C.wareId,amount:T})}y.remainingOutputs=[];for(const C of y.stationOutputs){const I=S.get(C.wareId)||0,T=C.amount-I;T>.01&&y.remainingOutputs.push({wareId:C.wareId,amount:T})}const j=t.stations.find(C=>C.id===y.stationId);if(j){const C=j.moduleConnections??[];for(const[I,T]of w.entries()){if(T<.01)continue;const N=C.filter(O=>O.sourceModuleId===Nt&&O.wareId===I);if(N.length===0)continue;const D=N.reduce((O,B)=>O+B.amount,0);if(D<.01)continue;const A=Math.min(T/D,1);for(const O of N){const B=y.modules.find(F=>F.moduleId===O.targetModuleId);if(!B)continue;const Y=O.amount*A,q=B.netInputs.findIndex(F=>F.wareId===I);if(q!==-1){const z=B.netInputs[q].amount-Y;z>.01?B.netInputs[q].amount=z:B.netInputs.splice(q,1)}}}for(const[I,T]of S.entries()){if(T<.01)continue;const N=C.filter(O=>O.targetModuleId===Ht&&O.wareId===I);if(N.length===0)continue;const D=N.reduce((O,B)=>O+B.amount,0);if(D<.01)continue;const A=Math.min(T/D,1);for(const O of N){const B=y.modules.find(F=>F.moduleId===O.sourceModuleId);if(!B)continue;const Y=O.amount*A,q=B.netOutputs.findIndex(F=>F.wareId===I);if(q!==-1){const z=B.netOutputs[q].amount-Y;z>.01?B.netOutputs[q].amount=z:B.netOutputs.splice(q,1)}}}}}const g=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const S of y.stationInputs){const j=w.get(S.wareId)||0;j<S.amount-.01&&g.push({wareId:S.wareId,stationId:y.stationId,required:S.amount,supplied:j,deficit:S.amount-j})}}const x=[],m=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const j of y.netInputs){const C=w.get(j.wareId)||0,I=j.amount-C;I>0&&x.push({wareId:j.wareId,amount:I})}const S=new Map;for(const j of t.connections)if(j.sourceStationId===y.stationId){const C=S.get(j.wareId)||0;S.set(j.wareId,C+j.amount)}for(const j of y.netOutputs){const C=S.get(j.wareId)||0,I=j.amount-C;I>0&&m.push({wareId:j.wareId,amount:I})}}return{stations:o,connections:h,totalInputs:Dm(x),totalOutputs:Dm(m),deficits:g}}function _g(t,r){return t.connections.find(o=>o.connectionId===r)}function Mr(t,r){return t.stations.find(o=>o.stationId===r)}function Nl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function Kt(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const Oe=Rs((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function Tm(t,r="swi",o=[]){const i=new Date().toISOString();return{id:In(),name:t,version:1,gameMode:r,tags:o,createdAt:i,updatedAt:i,sectors:[],stations:[],connections:[]}}function hl(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const ce=Rs((t,r)=>({plan:Tm("New Plan"),computed:hl(),createPlan:o=>{t({plan:Tm(o),computed:hl()})},loadPlan:o=>{const i={...o,gameMode:o.gameMode||"swi",tags:o.tags||[],stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(c=>({...c,locked:c.locked??!1,ratio:c.ratio??1}))}))};t({plan:i,computed:hl()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:In(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(c=>({plan:{...c.plan,sectors:[...c.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:In(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(c=>({plan:{...c.plan,stations:[...c.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,sectorId:i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const c={id:In(),blueprintId:i,count:1,position:l};return t(d=>({plan:{...d.plan,stations:d.plan.stations.map(f=>f.id===o?{...f,modules:[...f.modules,c]}:f),updatedAt:new Date().toISOString()}})),r().recompute(),c.id},updateModule:(o,i,l)=>{const d=r().plan.stations.find(g=>g.id===o),f=d==null?void 0:d.modules.find(g=>g.id===i);if(l.count!==void 0&&f&&l.count!==f.count&&f){const g=l.count/f.count,x=((d==null?void 0:d.moduleConnections)??[]).map(m=>m.sourceModuleId===i&&!m.locked?{...m,amount:m.amount*g}:m.targetModuleId===i&&m.sourceModuleId===Nt&&!m.locked?{...m,amount:m.amount*g}:m);t(m=>({plan:{...m.plan,stations:m.plan.stations.map(y=>y.id===o?{...y,modules:y.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:x}:y),updatedAt:new Date().toISOString()}}))}else t(g=>({plan:{...g.plan,stations:g.plan.stations.map(x=>x.id===o?{...x,modules:x.modules.map(m=>m.id===i?{...m,...l}:m)}:x),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,modules:c.modules.filter(d=>d.id!==i),moduleConnections:(c.moduleConnections??[]).filter(d=>d.sourceModuleId!==i&&d.targetModuleId!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:In(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:In(),...i};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:[...d.moduleConnections??[],l]}:d),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:(d.moduleConnections??[]).map(f=>f.id===i?{...f,...l}:f)}:d),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).filter(d=>d.id!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=Oe.getState().gameData;if(!i){t({computed:hl()});return}const l=Vk(o,i);t({computed:l})}}));let Om=!1;function Bk(t){Om||(Om=!0,ce.subscribe((r,o)=>{r.plan!==o.plan&&t(r.plan)}))}const xe=Rs(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,plansOpen:!1,theme:"system",language:"en",contextMenu:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setPlansOpen:r=>t({plansOpen:r}),setTheme:r=>t({theme:r}),setLanguage:r=>t({language:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null})})),vr="x4-plan-index",co="x4-current-plan-id",Am="x4-planner-plan";function un(t){return`x4-plan:${t}`}function ic(t){return{id:t.id,name:t.name,gameMode:t.gameMode,tags:t.tags,createdAt:t.createdAt,updatedAt:t.updatedAt}}const qt=Rs((t,r)=>({planIndex:[],currentPlanId:null,initializePlanManager:()=>{var d;const o=localStorage.getItem(Am);if(o)try{const f=JSON.parse(o),h=((d=f.state)==null?void 0:d.plan)??f.plan??f;h.gameMode||(h.gameMode="swi"),h.tags||(h.tags=[]);const g=h.id||In();h.id=g,localStorage.setItem(un(g),JSON.stringify(h));const m=[ic(h)];localStorage.setItem(vr,JSON.stringify(m)),localStorage.setItem(co,g),localStorage.removeItem(Am),t({planIndex:m,currentPlanId:g}),ce.getState().loadPlan(h);return}catch(f){console.error("Failed to migrate legacy plan:",f)}const i=localStorage.getItem(vr),l=i?JSON.parse(i):[],c=localStorage.getItem(co);if(t({planIndex:l,currentPlanId:c}),c){const f=localStorage.getItem(un(c));if(f)try{const h=JSON.parse(f);ce.getState().loadPlan(h)}catch(h){console.error("Failed to load current plan:",h)}}else l.length===0&&r().createPlan("New Plan",[],"swi")},createPlan:(o,i,l)=>{const c=new Date().toISOString(),d={id:In(),name:o,version:1,gameMode:l,tags:i,createdAt:c,updatedAt:c,sectors:[],stations:[],connections:[]};localStorage.setItem(un(d.id),JSON.stringify(d));const f=ic(d),{planIndex:h}=r(),g=[...h,f];localStorage.setItem(vr,JSON.stringify(g)),localStorage.setItem(co,d.id),t({planIndex:g,currentPlanId:d.id}),ce.getState().loadPlan(d)},saveCurrentPlan:o=>{const{currentPlanId:i,planIndex:l}=r();if(!i||o.id!==i)return;localStorage.setItem(un(o.id),JSON.stringify(o));const c=l.map(d=>d.id===o.id?{...d,name:o.name,tags:o.tags,updatedAt:o.updatedAt}:d);localStorage.setItem(vr,JSON.stringify(c)),t({planIndex:c})},loadPlanById:o=>{const i=localStorage.getItem(un(o));if(i)try{const l=JSON.parse(i);localStorage.setItem(co,o),t({currentPlanId:o}),ce.getState().loadPlan(l)}catch(l){console.error("Failed to load plan:",l)}},deletePlan:o=>{const{planIndex:i,currentPlanId:l}=r();localStorage.removeItem(un(o));const c=i.filter(d=>d.id!==o);localStorage.setItem(vr,JSON.stringify(c)),o===l?c.length>0?(t({planIndex:c}),r().loadPlanById(c[0].id)):(localStorage.removeItem(co),t({planIndex:c,currentPlanId:null}),r().createPlan("New Plan",[],"swi")):t({planIndex:c})},duplicatePlan:(o,i,l)=>{const c=localStorage.getItem(un(o));if(c)try{const d=JSON.parse(c),f=new Date().toISOString(),h={...d,id:In(),name:i,tags:l,createdAt:f,updatedAt:f};localStorage.setItem(un(h.id),JSON.stringify(h));const g=ic(h),{planIndex:x}=r(),m=[...x,g];localStorage.setItem(vr,JSON.stringify(m)),localStorage.setItem(co,h.id),t({planIndex:m,currentPlanId:h.id}),ce.getState().loadPlan(h)}catch(d){console.error("Failed to duplicate plan:",d)}},updatePlanMeta:(o,i)=>{const{planIndex:l}=r(),c=l.map(f=>f.id===o?{...f,...i,updatedAt:new Date().toISOString()}:f);localStorage.setItem(vr,JSON.stringify(c)),t({planIndex:c});const d=localStorage.getItem(un(o));if(d)try{const f=JSON.parse(d);i.name!==void 0&&(f.name=i.name),i.tags!==void 0&&(f.tags=i.tags),f.updatedAt=new Date().toISOString(),localStorage.setItem(un(o),JSON.stringify(f));const{currentPlanId:h}=r();o===h&&(i.name!==void 0&&ce.getState().renamePlan(i.name),i.tags!==void 0&&ce.setState(g=>({plan:{...g.plan,tags:i.tags}})))}catch(f){console.error("Failed to update plan meta:",f)}}})),Mg="x4-game-mode";function Wk(){try{const t=localStorage.getItem(Mg);if(t==="base"||t==="swi")return t}catch{}return"swi"}const Ol=Rs(t=>({gameMode:Wk(),setGameMode:r=>{localStorage.setItem(Mg,r),t({gameMode:r})}}));let ws=null,kc=null;async function Pg(t="swi"){if(ws&&kc===t)return ws;const o=await fetch(`/Station-Planner-For-X4-Foundations/${t==="base"?"gamedata-base.json":"gamedata-swi.json"}`);if(!o.ok)throw new Error(`Failed to load game data: ${o.statusText}`);return ws=await o.json(),kc=t,ws}function Uk(){ws=null,kc=null}function Gl({open:t,onClose:r,title:o,children:i,footer:l,size:c="md"}){if(L.useEffect(()=>{if(!t)return;const f=h=>{h.key==="Escape"&&r()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[t,r]),!t)return null;const d=c==="sm"?"max-w-sm":c==="lg"?"max-w-2xl":"max-w-lg";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:r}),u.jsxs("div",{className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 bg-card border border-border rounded-lg shadow-xl w-full ${d} flex flex-col max-h-[80vh]`,children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:o}),u.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i}),l&&u.jsx("div",{className:"px-4 py-3 border-t border-border flex items-center justify-end gap-2",children:l})]})]})}function Yk(){const t=Ol(m=>m.gameMode),r=Ol(m=>m.setGameMode),o=Oe(m=>m.setGameData),i=Oe(m=>m.setLoading),l=Oe(m=>m.setError),c=xe(m=>m.setPlansOpen),[d,f]=L.useState(!1),h=t==="swi"?"base":"swi",g=h==="swi"?"SWI Mod":"Base Game",x=async m=>{if(f(!1),m){const C=ce.getState().plan;qt.getState().saveCurrentPlan(C)}r(h),Uk(),i(!0);try{const C=await Pg(h);o(C)}catch(C){l(C instanceof Error?C.message:"Failed to load game data");return}const{planIndex:y,createPlan:w,loadPlanById:S}=qt.getState(),j=y.filter(C=>C.gameMode===h);if(j.length>0){const C=[...j].sort((I,T)=>new Date(T.updatedAt).getTime()-new Date(I.updatedAt).getTime());S(C[0].id),ce.getState().recompute(),c(!0)}else w("New Plan",[],h),ce.getState().recompute()};return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(!0),className:`px-3 py-1.5 text-sm rounded transition-colors font-medium ${t==="swi"?"bg-amber-600 text-white hover:bg-amber-700":"bg-blue-600 text-white hover:bg-blue-700"}`,title:`Switch to ${g}`,children:t==="swi"?"SWI":"Base"}),u.jsxs(Gl,{open:d,onClose:()=>f(!1),title:`Switch to ${g}?`,size:"sm",footer:u.jsxs("div",{className:"flex items-center gap-2 w-full",children:[u.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("div",{className:"flex-1"}),u.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Don't Save"}),u.jsx("button",{onClick:()=>x(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Save & Switch"})]}),children:[u.jsxs("p",{className:"text-sm text-muted-foreground",children:["You are about to switch to ",u.jsx("span",{className:"font-medium text-foreground",children:g})," mode. Game data will be reloaded with different wares and modules."]}),u.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Would you like to save the current plan before switching?"})]})]})}function Xk({tags:t,onChange:r,placeholder:o="Add tag..."}){const[i,l]=L.useState(""),c=h=>{const g=h.trim().toLowerCase();g&&!t.includes(g)&&r([...t,g]),l("")},d=h=>{r(t.filter((g,x)=>x!==h))},f=h=>{h.key==="Enter"||h.key===","?(h.preventDefault(),c(i)):h.key==="Backspace"&&!i&&t.length>0&&d(t.length-1)};return u.jsxs("div",{children:[u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:t.map((h,g)=>u.jsxs("span",{className:"bg-secondary text-secondary-foreground rounded-full px-2 py-0.5 text-xs flex items-center gap-1",children:[h,u.jsx("button",{type:"button",onClick:()=>d(g),className:"hover:text-destructive transition-colors","aria-label":`Remove tag ${h}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},h))}),u.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),onKeyDown:f,onBlur:()=>{i.trim()&&c(i)},placeholder:o,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]})}function lc({open:t,onClose:r,onSubmit:o,title:i,submitLabel:l,initialName:c="",initialTags:d=[]}){const[f,h]=L.useState(c),[g,x]=L.useState(d),m=()=>{const y=f.trim();y&&(o(y,g),h(""),x([]),r())};return u.jsx(Gl,{open:t,onClose:r,title:i,size:"sm",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:m,disabled:!f.trim(),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50",children:l})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Plan Name"}),u.jsx("input",{type:"text",value:f,onChange:y=>h(y.target.value),onKeyDown:y=>{y.key==="Enter"&&m()},placeholder:"My Station Plan",autoFocus:!0,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Tags"}),u.jsx(Xk,{tags:g,onChange:x})]})]})})}function Gk({open:t,onClose:r,gameMode:o}){const i=qt(H=>H.planIndex),l=qt(H=>H.currentPlanId),c=qt(H=>H.loadPlanById),d=qt(H=>H.deletePlan),f=qt(H=>H.createPlan),h=qt(H=>H.duplicatePlan),g=qt(H=>H.updatePlanMeta),x=ce(H=>H.plan),[m,y]=L.useState(""),[w,S]=L.useState(null),[j,C]=L.useState(!1),[I,T]=L.useState(!1),[N,D]=L.useState(null),A=i.filter(H=>H.gameMode===o).filter(H=>{if(!m)return!0;const X=m.toLowerCase();return H.name.toLowerCase().includes(X)||H.tags.some($=>$.toLowerCase().includes(X))}).sort((H,X)=>new Date(X.updatedAt).getTime()-new Date(H.updatedAt).getTime()),O=H=>{c(H),r()},B=H=>{d(H),S(null)},Y=(H,X)=>{f(H,X,o),C(!1),r()},q=(H,X)=>{l&&h(l,H,X),T(!1),r()},F=(H,X)=>{N&&(g(N.id,{name:H,tags:X}),D(null))},z=H=>{try{return new Date(H).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return H}};return u.jsxs(u.Fragment,{children:[u.jsxs(Gl,{open:t,onClose:r,title:"Plans",size:"lg",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>C(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"New Plan"}),u.jsx("button",{onClick:()=>T(!0),disabled:!l,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors disabled:opacity-50",children:"Save As"})]}),children:[u.jsx("div",{className:"mb-3",children:u.jsx("input",{type:"text",value:m,onChange:H=>y(H.target.value),placeholder:"Search plans by name or tag...",className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsxs("div",{className:"space-y-1",children:[A.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:m?"No plans match your search.":"No plans yet. Create one!"}),A.map(H=>u.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded cursor-pointer transition-colors ${H.id===l?"bg-primary/10 border border-primary/30":"hover:bg-muted border border-transparent"}`,onClick:()=>O(H.id),children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:H.name}),H.id===l&&u.jsx("span",{className:"text-xs text-primary font-medium",children:"(current)"})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[H.tags.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:H.tags.map(X=>u.jsx("span",{className:"bg-secondary text-secondary-foreground rounded-full px-1.5 py-0 text-[10px]",children:X},X))}),u.jsx("span",{className:"text-xs text-muted-foreground",children:z(H.updatedAt)})]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[u.jsx("button",{onClick:()=>D({id:H.id,name:H.name,tags:H.tags}),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",title:"Edit name & tags",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),w===H.id?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>B(H.id),className:"px-2 py-0.5 text-xs rounded bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors",children:"Delete"}),u.jsx("button",{onClick:()=>S(null),className:"px-2 py-0.5 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"})]}):u.jsx("button",{onClick:()=>S(H.id),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-destructive",title:"Delete plan",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},H.id))]})]}),u.jsx(lc,{open:j,onClose:()=>C(!1),onSubmit:Y,title:"New Plan",submitLabel:"Create"}),u.jsx(lc,{open:I,onClose:()=>T(!1),onSubmit:q,title:"Save As",submitLabel:"Save",initialName:x?`${x.name} (copy)`:"",initialTags:(x==null?void 0:x.tags)??[]}),N&&u.jsx(lc,{open:!0,onClose:()=>D(null),onSubmit:F,title:"Edit Plan",submitLabel:"Save",initialName:N.name,initialTags:N.tags})]})}function Kk(){const t=ce(S=>S.plan),r=ce(S=>S.renamePlan),o=xe(S=>S.toggleReport),i=xe(S=>S.reportOpen),l=xe(S=>S.plansOpen),c=xe(S=>S.setPlansOpen),d=xe(S=>S.theme),f=xe(S=>S.setTheme),h=xe(S=>S.language),g=xe(S=>S.setLanguage),x=Oe(S=>S.gameData),m=Ol(S=>S.gameMode),y=()=>{f(d==="light"?"dark":d==="dark"?"system":"light")},w=m==="swi"?"X4 SWI Station Planner":"X4 Station Planner";return u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Yk,{}),u.jsx("h1",{className:"text-lg font-semibold text-foreground",children:w}),u.jsx("span",{className:"text-muted-foreground",children:"|"}),u.jsx("input",{type:"text",value:t.name,onChange:S=>r(S.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[(x==null?void 0:x.languages)&&u.jsx("select",{value:h,onChange:S=>g(S.target.value),className:"px-2 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors border-none cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring",title:"Language",children:Object.entries(x.languages).map(([S,j])=>u.jsx("option",{value:S,children:j},S))}),u.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${d}`,children:[d==="light"&&"",d==="dark"&&"",d==="system"&&"",u.jsx("span",{className:"text-xs",children:d.charAt(0).toUpperCase()+d.slice(1)})]}),u.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Plans"}),u.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"})]})]}),u.jsx(Gk,{open:l,onClose:()=>c(!1),gameMode:m})]})}function ht(){const t=xe(o=>o.language);return{language:t,t:(o,i)=>o?typeof o=="string"?o:o[t]??o.en??Object.values(o)[0]??i??"":i??""}}function Qk({station:t}){const r=ce(N=>N.updateStation),o=ce(N=>N.removeStation),i=ce(N=>N.plan),l=ce(N=>N.computed),c=Oe(N=>N.gameData),{t:d}=ht(),f=t.sectorId?i.sectors.find(N=>N.id===t.sectorId):null,h=t.sunlightOverride??(f==null?void 0:f.sunlight)??100,g=Mr(l,t.id),x=N=>{r(t.id,{name:N.target.value})},m=N=>{const D=N.target.value;if(D==="")r(t.id,{sunlightOverride:null});else{const A=parseInt(D,10);!isNaN(A)&&A>=0&&A<=500&&r(t.id,{sunlightOverride:A})}},y=()=>{r(t.id,{sunlightOverride:null})},w=N=>{r(t.id,{fillHabitats:N.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},j=N=>{var D;return d((D=c==null?void 0:c.wares[N])==null?void 0:D.name,N)},C=N=>N>=1e4?`${(N/1e3).toFixed(1)}k`:N>=1e3?`${(N/1e3).toFixed(2)}k`:N.toFixed(0),I=g&&g.totalWorkforceRequired>0,T=g&&g.totalWorkforceCapacity>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),u.jsx("input",{type:"text",value:t.name,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:f?f.name:"Not assigned"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:m,placeholder:`${(f==null?void 0:f.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&u.jsx("button",{onClick:y,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",h,"%",t.sunlightOverride===null&&f&&" (from sector)",t.sunlightOverride===null&&!f&&" (default)"]})]}),(I||T)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),g&&u.jsxs("div",{className:"text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Required:"}),u.jsx("span",{children:g.totalWorkforceRequired.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),u.jsx("span",{children:g.totalWorkforceCapacity.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population:"}),u.jsx("span",{children:g.actualPopulation.toLocaleString()})]})]}),T&&u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[u.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:w,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?u.jsx("p",{children:"No modules added yet."}):u.jsxs("p",{children:[t.modules.length," module(s)"]})}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),g&&(g.netOutputs.length>0||g.netInputs.length>0)&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),g.netOutputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),g.netOutputs.slice(0,5).map(N=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-green-500 truncate",children:j(N.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",C(N.amount)]})]},N.wareId)),g.netOutputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",g.netOutputs.length-5," more..."]})]}),g.netInputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),g.netInputs.slice(0,5).map(N=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-blue-400 truncate",children:j(N.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",C(N.amount)]})]},N.wareId)),g.netInputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",g.netInputs.length-5," more..."]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:N=>r(t.id,{locked:N.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function qk({sector:t}){const r=ce(A=>A.updateSector),o=ce(A=>A.removeSector),i=ce(A=>A.plan),l=Oe(A=>A.gameData),[c,d]=L.useState(t.name),[f,h]=L.useState(!1),[g,x]=L.useState(-1),m=L.useRef(null),y=L.useRef(null);L.useEffect(()=>{d(t.name)},[t.id,t.name]);const w=L.useMemo(()=>l!=null&&l.sectors?Object.values(l.sectors).sort((A,O)=>A.name.localeCompare(O.name)):[],[l]),S=L.useMemo(()=>{if(!c.trim())return w.slice(0,15);const A=c.toLowerCase();return w.filter(O=>O.name.toLowerCase().includes(A)).slice(0,15)},[w,c]);L.useEffect(()=>{const A=O=>{y.current&&!y.current.contains(O.target)&&m.current&&!m.current.contains(O.target)&&h(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const j=i.stations.filter(A=>A.sectorId===t.id),C=(A,O)=>{d(A),h(!1),x(-1);const B={name:A};O!==void 0&&(B.sunlight=O),r(t.id,B)},I=A=>{const O=A.target.value;d(O),h(!0),x(-1),r(t.id,{name:O})},T=A=>{var O,B;if(A.key==="ArrowDown")A.preventDefault(),h(!0),x(Y=>Y<S.length-1?Y+1:Y);else if(A.key==="ArrowUp")A.preventDefault(),x(Y=>Y>0?Y-1:-1);else if(A.key==="Enter"){if(A.preventDefault(),g>=0&&g<S.length){const Y=S[g];C(Y.name,Y.sunlight)}else{const Y=w.find(q=>q.name.toLowerCase()===c.toLowerCase());Y?C(Y.name,Y.sunlight):h(!1)}(O=m.current)==null||O.blur()}else A.key==="Escape"&&(h(!1),x(-1),(B=m.current)==null||B.blur())};L.useEffect(()=>{var A;g>=0&&y.current&&((A=y.current.querySelectorAll("[data-sector-item]")[g])==null||A.scrollIntoView({block:"nearest"}))},[g]);const N=A=>{const O=parseInt(A.target.value,10);!isNaN(O)&&O>=0&&O<=500&&r(t.id,{sunlight:O})},D=()=>{const A=j.length,O=A>0?`Delete sector "${t.name}"? ${A} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(O)&&o(t.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5 relative",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),u.jsx("input",{ref:m,type:"text",value:c,onChange:I,onFocus:()=>h(!0),onKeyDown:T,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",autoComplete:"off"}),f&&S.length>0&&u.jsx("div",{ref:y,className:"absolute z-50 mt-1 w-full max-h-60 overflow-y-auto rounded-md border border-border bg-background shadow-md",children:S.map((A,O)=>u.jsxs("button",{"data-sector-item":!0,onMouseDown:B=>{B.preventDefault(),C(A.name,A.sunlight)},onMouseEnter:()=>x(O),className:`w-full flex items-center justify-between px-3 py-1.5 text-sm text-left transition-colors ${O===g?"bg-accent text-accent-foreground":"hover:bg-accent/50"}`,children:[u.jsx("span",{className:"truncate text-foreground",children:A.name}),u.jsxs("span",{className:"flex items-center gap-2 ml-2 shrink-0 text-xs text-muted-foreground",children:[A.owner&&u.jsx("span",{className:"truncate max-w-[80px]",children:A.owner}),u.jsxs("span",{children:[A.sunlight,"%"]})]})]},A.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:N,className:"flex-1"}),u.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:N,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",j.length,")"]}),j.length===0?u.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):u.jsx("ul",{className:"text-sm space-y-1",children:j.map(A=>u.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[u.jsx("span",{className:"text-foreground",children:A.name}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:[A.modules.length," modules"]})]},A.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:A=>r(t.id,{locked:A.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:D,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const Lm={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function Zk(){const t=Oe(w=>w.gameData),r=ce(w=>w.addModule),o=xe(w=>w.activeStationId),i=ce(w=>w.plan.stations),{t:l}=ht(),[c,d]=L.useState("production"),[f,h]=L.useState(""),g=L.useMemo(()=>i.find(w=>w.id===o),[i,o]),x=L.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const w=f.toLowerCase(),S=j=>Object.values(j).filter(C=>l(C.name).toLowerCase().includes(w));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,f,l]),m=w=>{if(!o||!g)return;const S=g.modules.length,j=S%3,C=Math.floor(S/3),I={x:j*220+50,y:C*150+50};r(o,w,I)},y=w=>{d(S=>S===w?null:w)};return t?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Search modules...",value:f,onChange:w=>h(w.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(Lm).map(w=>{const{label:S,icon:j}=Lm[w],C=x[w],I=c===w;return u.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[u.jsxs("button",{onClick:()=>y(w),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[u.jsx("span",{children:j}),S,u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",C.length,")"]})]}),u.jsx("span",{className:"text-muted-foreground",children:I?"":"+"})]}),I&&u.jsx("div",{className:"max-h-48 overflow-y-auto",children:C.length===0?u.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):C.map(T=>u.jsxs("button",{onClick:()=>m(T.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[u.jsx("span",{className:"text-foreground truncate",children:l(T.name)}),u.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},T.id))})]},w)}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):u.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function Jk({stationId:t,module:r}){const o=Oe(C=>C.gameData),i=Oe(C=>C.getModule),l=Oe(C=>C.getModuleType),c=ce(C=>C.updateModule),d=ce(C=>C.removeModule),f=xe(C=>C.clearSelection),{t:h}=ht(),g=i(r.blueprintId),x=l(r.blueprintId),m=L.useMemo(()=>{if(!o||!x)return[];const C=o.modules[x];return Object.values(C).sort((I,T)=>h(I.name).localeCompare(h(T.name)))},[o,x,h]),y=C=>{c(t,r.id,{blueprintId:C.target.value})},w=C=>{const I=Math.max(1,r.count+C);c(t,r.id,{count:I})},S=C=>{const I=parseInt(C.target.value,10);!isNaN(I)&&I>=1&&c(t,r.id,{count:I})},j=()=>{confirm(`Delete this ${h(g==null?void 0:g.name,"module")}?`)&&(d(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-lg",children:x==="production"?"":x==="habitat"?"":""}),u.jsxs("span",{className:"text-muted-foreground capitalize",children:[x," Module"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),u.jsx("select",{value:r.blueprintId,onChange:y,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:m.map(C=>u.jsx("option",{value:C.id,children:h(C.name)},C.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>w(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),u.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("button",{onClick:()=>w(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),g&&u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),u.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[x==="production"&&"producedWareId"in g&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Produces: ",g.producedWareId]}),u.jsxs("p",{children:["Workforce: ",g.workforceMax*r.count]})]}),x==="habitat"&&"workforceCapacity"in g&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Race: ",g.race]}),u.jsxs("p",{children:["Capacity: ",g.workforceCapacity*r.count," workers"]})]}),x==="storage"&&"cargoMax"in g&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Type: ",g.cargoType]}),u.jsxs("p",{children:["Capacity: ",g.cargoMax*r.count]})]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r.locked??!1,onChange:C=>c(t,r.id,{locked:C.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:j,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function eC({connection:t}){var F;const r=ce(z=>z.updateConnection),o=ce(z=>z.removeConnection),i=ce(z=>z.plan),l=ce(z=>z.computed),c=Oe(z=>z.gameData),{t:d}=ht(),f=i.stations.find(z=>z.id===t.sourceStationId),h=i.stations.find(z=>z.id===t.targetStationId),g=L.useMemo(()=>Mr(l,t.sourceStationId),[l,t.sourceStationId]),x=L.useMemo(()=>Mr(l,t.targetStationId),[l,t.targetStationId]),m=t.wareId?d((F=c==null?void 0:c.wares[t.wareId])==null?void 0:F.name,t.wareId):"Unknown",y=g==null?void 0:g.netOutputs.find(z=>z.wareId===t.wareId),w=(y==null?void 0:y.amount)??0,S=x==null?void 0:x.netInputs.find(z=>z.wareId===t.wareId),j=(S==null?void 0:S.amount)??0,C=L.useMemo(()=>_g(l,t.id),[l,t.id]),I=(C==null?void 0:C.effectiveAmount)??t.amount,T=t.mode??"auto",N=z=>z>=1e4?`${(z/1e3).toFixed(1)}k`:z>=1e3?`${(z/1e3).toFixed(2)}k`:z.toFixed(0),D=z=>{r(t.id,{mode:z,amount:z==="custom"?I:t.amount})},A=z=>{const H=z.target.value;if(H==="")r(t.id,{amount:0});else{const X=parseFloat(H);!isNaN(X)&&X>=0&&r(t.id,{amount:X})}},O=()=>{r(t.id,{mode:"custom",amount:w})},B=()=>{const z=Math.min(w,j);r(t.id,{mode:"custom",amount:z})},Y=()=>{confirm("Delete this connection?")&&o(t.id)},q=l.deficits.find(z=>z.stationId===t.targetStationId&&z.wareId===t.wareId);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(f==null?void 0:f.name)??"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(h==null?void 0:h.name)??"Unknown"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:m}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:T,onChange:z=>D(z.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[T==="auto"&&"Transfers min(source available, target need)",T==="max"&&"Takes all available from source up to target need",T==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[T==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),T==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:A,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:N(I)}),T==="custom"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:O,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",N(w),")"]}),j>0&&u.jsxs("button",{onClick:B,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",N(Math.min(w,j)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source available:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[N(w),"/hr"]})]}),j>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[N(j),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${C!=null&&C.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[N(I),"/hr"]})]}),T==="custom"&&t.amount!==I&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[N(t.amount),"/hr"]})]}),(C==null?void 0:C.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(C==null?void 0:C.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),q&&q.deficit>0&&u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",N(q.deficit),"/hr still needed"]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",N(q.supplied),"/hr but needs"," ",N(q.required),"/hr"]})]}),t.wareId&&!q&&u.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:u.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:Y,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function tC({stationId:t,connection:r}){var P;const o=ce(k=>k.updateModuleConnection),i=ce(k=>k.removeModuleConnection),l=ce(k=>k.plan.stations),c=ce(k=>k.computed),d=Oe(k=>k.gameData),f=xe(k=>k.clearSelection),{t:h}=ht(),g=l.find(k=>k.id===t),x=g==null?void 0:g.modules.find(k=>k.id===r.sourceModuleId),m=g==null?void 0:g.modules.find(k=>k.id===r.targetModuleId),y=r.sourceModuleId===Nt,w=r.targetModuleId===Ht,S=k=>{var E,M,Z;if(!k||!d)return"Unknown";const R=((E=d.modules.production[k])==null?void 0:E.name)??((M=d.modules.habitat[k])==null?void 0:M.name)??((Z=d.modules.storage[k])==null?void 0:Z.name);return h(R,k)},j=y?"Station Input":S(x==null?void 0:x.blueprintId),C=w?"Station Output":S(m==null?void 0:m.blueprintId),I=L.useMemo(()=>y?null:Kt(c,t,r.sourceModuleId),[c,t,r.sourceModuleId,y]),T=L.useMemo(()=>w?null:Kt(c,t,r.targetModuleId),[c,t,r.targetModuleId,w]),N=L.useMemo(()=>{const k=Mr(c,t);return k==null?void 0:k.moduleConnections.find(R=>R.connectionId===r.id)},[c,t,r.id]),D=(N==null?void 0:N.effectiveAmount)??r.amount,A=r.mode??"auto",O=h((P=d==null?void 0:d.wares[r.wareId])==null?void 0:P.name,r.wareId),B=I==null?void 0:I.grossOutputs.find(k=>k.wareId===r.wareId),Y=(B==null?void 0:B.amount)??0,q=T==null?void 0:T.grossInputs.find(k=>k.wareId===r.wareId),F=(q==null?void 0:q.amount)??0,z=k=>k>=1e4?`${(k/1e3).toFixed(1)}k`:k>=1e3?`${(k/1e3).toFixed(2)}k`:k.toFixed(0),H=k=>{o(t,r.id,{mode:k,amount:k==="custom"?D:r.amount})},X=k=>{const R=k.target.value;if(R==="")o(t,r.id,{amount:0});else{const E=parseFloat(R);if(!isNaN(E)&&E>=0){const M=!y&&Y>0?E/Y:r.ratio;o(t,r.id,{amount:E,ratio:M})}}},$=()=>{o(t,r.id,{locked:!r.locked})},Q=()=>{o(t,r.id,{mode:"custom",amount:Y,ratio:1})},W=()=>{const k=Math.min(Y,F),R=Y>0?k/Y:0;o(t,r.id,{mode:"custom",amount:k,ratio:R})},_=()=>{confirm("Delete this connection?")&&(i(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:j})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:C})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:O})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:A,onChange:k=>H(k.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[A==="auto"&&"Transfers min(source available, target need)",A==="max"&&"Takes all available from source up to target need",A==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[A==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),A==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:X,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:z(D)}),A==="custom"&&!y&&Y>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Q,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",z(Y),")"]}),!w&&F>0&&u.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",z(Math.min(Y,F)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!y&&Y>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source produces:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[z(Y),"/hr"]})]}),!w&&F>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[z(F),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${N!=null&&N.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[z(D),"/hr"]})]}),A==="custom"&&r.amount!==D&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[z(r.amount),"/hr"]})]}),(N==null?void 0:N.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(N==null?void 0:N.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!y&&r.ratio!==void 0&&A==="custom"&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Ratio:"}),u.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),u.jsx("button",{onClick:$,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:_,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function nC(){const t=xe(S=>S.sidebarOpen),r=xe(S=>S.selectedNodeId),o=xe(S=>S.selectedEdgeId),i=xe(S=>S.viewMode),l=xe(S=>S.activeStationId),c=ce(S=>S.plan);if(!t)return null;const d=i==="network"?c.stations.find(S=>S.id===r):null,f=i==="network"?c.sectors.find(S=>S.id===r):null,h=c.connections.find(S=>S.id===o),g=c.stations.find(S=>S.id===l),x=i==="station"&&g?g.modules.find(S=>S.id===r):null,m=i==="station"&&g&&o?(g.moduleConnections??[]).find(S=>S.id===o):null;let y="Network";i==="station"?m?y="Connection":x?y="Module":y="Add Modules":d?y="Station":f?y="Sector":h&&(y="Connection");const w=()=>i==="station"?m&&l?u.jsx(tC,{stationId:l,connection:m}):x&&l?u.jsx(Jk,{stationId:l,module:x}):u.jsx(Zk,{}):d?u.jsx(Qk,{station:d}):f?u.jsx(qk,{sector:f}):h?u.jsx(eC,{connection:h}):u.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[u.jsx("p",{children:"Select a station or sector to view details."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),u.jsxs("ul",{className:"text-xs space-y-1",children:[u.jsx("li",{children:"Right-click on the canvas to add stations"}),u.jsx("li",{children:"Drag from one station handle to another to connect"}),u.jsx("li",{children:"Press Delete to remove selected items"}),u.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return u.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col",children:[u.jsx("div",{className:"p-4 border-b border-border",children:u.jsx("h2",{className:"font-semibold text-foreground",children:y})}),u.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:w()}),u.jsx("div",{className:"p-4 border-t border-border",children:u.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:i==="station"&&g?u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Modules: ",g.modules.length]}),u.jsxs("p",{children:["Station: ",g.name]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Stations: ",c.stations.length]}),u.jsxs("p",{children:["Sectors: ",c.sectors.length]}),u.jsxs("p",{children:["Connections: ",c.connections.length]})]})})})]})}function rC(){const t=xe(d=>d.viewMode),r=xe(d=>d.activeStationId),o=xe(d=>d.exitStationView),i=ce(d=>d.plan),l=i.stations.find(d=>d.id===r),c=l!=null&&l.sectorId?i.sectors.find(d=>d.id===l.sectorId):null;return t==="network"?null:u.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[u.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),c&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-muted-foreground",children:c.name})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function oC(){const t=ce(x=>x.computed),r=Oe(x=>x.gameData),{t:o}=ht(),i=x=>{var m;return o((m=r==null?void 0:r.wares[x])==null?void 0:m.name,x)},l=x=>Math.abs(x)>=1e4?`${(x/1e3).toFixed(1)}k`:Math.abs(x)>=1e3?`${(x/1e3).toFixed(2)}k`:x.toFixed(0),c=L.useMemo(()=>{const x=new Map;for(const y of t.totalOutputs)x.set(y.wareId,(x.get(y.wareId)??0)+y.amount);for(const y of t.totalInputs)x.set(y.wareId,(x.get(y.wareId)??0)-y.amount);const m=[];for(const[y,w]of x)Math.abs(w)>.01&&m.push({wareId:y,amount:w});return m.sort((y,w)=>w.amount-y.amount)},[t.totalOutputs,t.totalInputs]),d=c.filter(x=>x.amount>0),f=c.filter(x=>x.amount<0),h=L.useMemo(()=>[...t.totalOutputs].sort((x,m)=>m.amount-x.amount),[t.totalOutputs]),g=L.useMemo(()=>[...t.totalInputs].sort((x,m)=>m.amount-x.amount),[t.totalInputs]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),u.jsx("div",{className:"space-y-1",children:d.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-green-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),u.jsx("div",{className:"space-y-1",children:f.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:[l(x.amount),"/hr"]})]},x.wareId))})]}),d.length===0&&f.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",h.length," wares)"]})]}),h.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",g.length," wares)"]})]}),g.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-blue-400",children:["-",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((x,m)=>u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:["-",l(x.deficit),"/hr"]})]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",l(x.required),", getting ",l(x.supplied)]})]},`${x.stationId}-${x.wareId}-${m}`))})]})]})}function sC(){const t=ce(g=>g.plan.stations),r=ce(g=>g.plan.sectors),o=ce(g=>g.computed),i=Oe(g=>g.gameData),{t:l}=ht(),c=g=>{var x;return l((x=i==null?void 0:i.wares[g])==null?void 0:x.name,g)},d=g=>Math.abs(g)>=1e4?`${(g/1e3).toFixed(1)}k`:Math.abs(g)>=1e3?`${(g/1e3).toFixed(2)}k`:g.toFixed(0),f=g=>{var x;return g?((x=r.find(m=>m.id===g))==null?void 0:x.name)??null:null},h=L.useMemo(()=>[...t].sort((g,x)=>{const m=Nl(o,g.id),y=Nl(o,x.id);return m!==y?y-m:g.name.localeCompare(x.name)}),[t,o]);return t.length===0?u.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):u.jsx("div",{className:"space-y-4",children:h.map(g=>{const x=Mr(o,g.id),m=Nl(o,g.id),y=f(g.sectorId),w=o.deficits.filter(j=>j.stationId===g.id),S=x&&x.totalWorkforceRequired>0?Math.min(x.actualPopulation/x.totalWorkforceRequired,1):0;return u.jsxs("div",{className:`p-3 rounded-lg border ${m>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center text-[10px] ${g.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/30"}`,children:g.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h4",{className:`font-medium ${g.completed?"text-muted-foreground line-through":"text-foreground"}`,children:g.name}),m>0&&u.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[m," deficit",m>1?"s":""]})]}),y&&u.jsx("span",{className:"text-xs text-muted-foreground",children:y})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-yellow-500",children:[" ",(x==null?void 0:x.effectiveSunlight)??100,"%"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:g.modules.length})]}),x&&x.totalWorkforceRequired>0&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[x.actualPopulation,"/",x.totalWorkforceRequired]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:x.totalWorkforceCapacity})]})]})]}),x&&u.jsxs("div",{className:"space-y-2",children:[x.netOutputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netOutputs.map(j=>u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:"text-green-400",children:c(j.wareId)}),u.jsxs("span",{className:"font-mono text-green-400/70",children:["+",d(j.amount)]})]},j.wareId))})]}),x.netInputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netInputs.map(j=>{const C=w.some(I=>I.wareId===j.wareId);return u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:C?"text-red-400":"text-blue-400",children:c(j.wareId)}),u.jsxs("span",{className:`font-mono ${C?"text-red-400/70":"text-blue-400/70"}`,children:["-",d(j.amount)]})]},j.wareId)})})]}),w.length>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[u.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),u.jsx("div",{className:"space-y-1",children:w.map(j=>u.jsxs("div",{className:"text-xs flex items-center justify-between",children:[u.jsx("span",{className:"text-red-400",children:c(j.wareId)}),u.jsxs("span",{className:"text-muted-foreground",children:[d(j.supplied),"/",d(j.required),u.jsxs("span",{className:"text-red-400 ml-1",children:["(-",d(j.deficit),")"]})]})]},j.wareId))})]})]}),g.modules.length===0&&u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},g.id)})})}function iC(){const t=xe(l=>l.reportOpen),r=xe(l=>l.setReportOpen),[o,i]=L.useState("network");return t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),u.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),u.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsxs("div",{className:"flex border-b border-border",children:[u.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),u.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?u.jsx(oC,{}):u.jsx(sC,{})}),u.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function $e(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Wc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const lC={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},aC={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},uC={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},cC={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function Kl({wareId:t,type:r,amount:o,status:i,preset:l,handleId:c,isDeficit:d=!1,drag:f,handleTooltip:h,amountTooltip:g,onDoubleClick:x}){const m=Oe(O=>O.gameData),{t:y}=ht(),w=r==="input",S=w?l.inputColors:l.outputColors,C=(O=>{var B;return y((B=m==null?void 0:m.wares[O])==null?void 0:B.name,O)})(t),I=()=>{const O=w?"handle-left":"handle-right",B="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${O} ${B} ${l.handle.colorClass}`;const Y=i==="satisfied"?w?"handle-input-satisfied":"handle-output-satisfied":w?"handle-input":"handle-output";return`${l.handle.baseClass} ${O} ${B} ${Y}`},T=()=>i==="satisfied"?S.satisfied:d&&S.deficit?S.deficit:S.default,N=()=>{const O=o.fulfilled??0,B=O>.01;if(w)if(i==="satisfied"){const Y=O>.01?O:o.primary;return u.jsxs("span",{className:"text-green-600 font-bold",title:g,children:["",$e(Y)]})}else if(B){const Y=i==="partial"?o.primary-O:o.primary;return u.jsxs("span",{className:"text-red-400 font-bold",title:g,children:["-",$e(Y)]})}else return u.jsxs("span",{className:"text-red-600/60",title:g,children:["",$e(o.primary)]});else return B?u.jsx("span",{className:"text-gray-400",title:g,children:$e(o.primary)}):u.jsx("span",{className:"text-gray-500/60",title:g,children:$e(o.primary)})},D=()=>!l.hasDrag||!f?null:u.jsx("div",{draggable:!0,onDragStart:f.onDragStart,onDragEnd:f.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:u.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),A=()=>u.jsx(_r,{type:w?"target":"source",position:w?Ne.Left:Ne.Right,id:c,className:I(),title:h??C});return u.jsxs("div",{onDoubleClick:x?O=>{O.stopPropagation(),x()}:void 0,onDragOver:f==null?void 0:f.onDragOver,onDragLeave:f==null?void 0:f.onDragLeave,onDrop:f==null?void 0:f.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${f!=null&&f.isDragging?"opacity-50":""}
        ${f!=null&&f.isDragOver?"bg-primary/20 rounded":""}
      `,children:[w&&l.handle.inline&&A(),!w&&l.hasDrag&&D(),w&&!l.handle.inline&&A(),u.jsxs("div",{className:`flex-1 flex items-center justify-between ${w?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[w&&u.jsx("span",{className:"font-mono ml-1",children:N()}),u.jsx("span",{className:`truncate ${l.nameMaxWidth} ${T()}`,children:C}),!w&&u.jsx("span",{className:"font-mono mr-2",children:N()})]}),w&&l.hasDrag&&D(),!w&&l.handle.inline&&A(),!w&&!l.handle.inline&&A()]})}const dC=L.memo(function({data:r,selected:o}){const{station:i}=r,l=ce(_=>_.plan.sectors),c=ce(_=>_.computed),d=ce(_=>_.updateStation),f=xe(_=>_.drillIntoStation),[h,g]=L.useState(null),[x,m]=L.useState(null),y=i.sectorId?l.find(_=>_.id===i.sectorId):null,w=L.useMemo(()=>Mr(c,i.id),[c,i.id]),S=L.useMemo(()=>Nl(c,i.id),[c,i.id]),j=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(y==null?void 0:y.sunlight)??100,C=L.useCallback(()=>{f(i.id)},[f,i.id]),I=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,T=w&&w.totalWorkforceRequired>0,N=L.useMemo(()=>c.deficits.filter(_=>_.stationId===i.id),[c.deficits,i.id]),D=_=>N.some(P=>P.wareId===_),A=L.useCallback((_,P)=>{if(!P||P.length===0)return _;const k=new Map(_.map(M=>[M.wareId,M])),R=[],E=new Set;for(const M of P){const Z=k.get(M);Z&&(R.push(Z),E.add(M))}for(const M of _)E.has(M.wareId)||R.push(M);return R},[]),O=L.useMemo(()=>A((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,A]),B=L.useMemo(()=>A((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,A]),Y=L.useMemo(()=>{const _=new Map;for(const P of(w==null?void 0:w.externallySupplied)??[])_.set(P.wareId,P.amount);return _},[w==null?void 0:w.externallySupplied]),q=L.useMemo(()=>{const _=new Map;for(const P of(w==null?void 0:w.externallyConsumed)??[])_.set(P.wareId,P.amount);return _},[w==null?void 0:w.externallyConsumed]),F=L.useCallback((_,P,k)=>{_.stopPropagation(),g(`${k}-${P}`),_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("text/plain",`${k}-${P}`)},[]),z=L.useCallback((_,P,k)=>{_.preventDefault(),_.stopPropagation();const R=`${k}-${P}`;h&&h!==R&&h.startsWith(k)&&(m(R),_.dataTransfer.dropEffect="move")},[h]),H=L.useCallback(()=>{m(null)},[]),X=L.useCallback((_,P,k)=>{if(_.preventDefault(),_.stopPropagation(),!h||!h.startsWith(k)){g(null),m(null);return}const R=h.replace(`${k}-`,"");if(R===P){g(null),m(null);return}const M=(k==="output"?O:B).map(ie=>ie.wareId),Z=M.indexOf(R),J=M.indexOf(P);if(Z===-1||J===-1){g(null),m(null);return}const oe=[...M];oe.splice(Z,1),oe.splice(J,0,R),k==="output"?d(i.id,{outputOrder:oe}):d(i.id,{inputOrder:oe}),g(null),m(null)},[h,O,B,d,i.id]),$=L.useCallback(()=>{g(null),m(null)},[]),Q=L.useCallback((_,P)=>{const k=`${P}-${_}`;return{isDragging:h===k,isDragOver:x===k,onDragStart:R=>F(R,_,P),onDragEnd:$,onDragOver:R=>z(R,_,P),onDragLeave:H,onDrop:R=>X(R,_,P)}},[h,x,F,$,z,H,X]),W=(_,P)=>{const k=P==="input",R=`${P}-${_.wareId}`,E=k&&D(_.wareId),M=k?Y.get(_.wareId)??0:0,Z=k?0:q.get(_.wareId)??0,J=k?M:Z,oe=_.amount-J,ie=Wc(oe,J),le=k?"Need":"Export",se=k?"Supplied":"Consumed";let G;return ie==="satisfied"?G=`${le}: ${$e(_.amount)}, ${se}: ${$e(J)}`:ie==="partial"?G=`${le}: ${$e(_.amount)}, ${se}: ${$e(J)}, Remaining: ${$e(oe)}`:G=`${le}: ${$e(_.amount)}, No external ${k?"supply":"consumers"}`,u.jsx(Kl,{wareId:_.wareId,type:P,handleId:R,amount:{primary:_.amount,secondary:J>.01?J:void 0,fulfilled:J},status:ie,preset:aC,isDeficit:E,drag:Q(_.wareId,P),amountTooltip:G},_.wareId)};return u.jsxs("div",{className:`
        min-w-[240px] max-w-[240px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:C,children:[S>0&&u.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),u.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("button",{onClick:_=>{_.stopPropagation(),d(i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h3",{className:`font-medium text-sm truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:i.name}),y&&u.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:y.name})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[u.jsx("span",{className:"text-yellow-500",children:""}),j,"%",i.sunlightOverride===null&&y&&u.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),T&&u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population"}),u.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),u.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all ${I>=1?"bg-green-500":I>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${I*100}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[O.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pr-2",children:O.map(_=>W(_,"output"))})]}),B.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pl-2",children:B.map(_=>W(_,"input"))})]})]}),i.modules.length===0&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),fC=160,pC=100,mC=L.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,c=ce(y=>y.updateSector),d=ce(y=>y.plan.stations),f=ce(y=>y.moveStationToSector),[h,g]=L.useState(!1),x=L.useCallback((y,w)=>{c(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,c]),m=L.useCallback((y,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};d.forEach(j=>{const C=j.position.x+fC/2,I=j.position.y+pC/2,T=C>=S.left&&C<=S.right&&I>=S.top&&I<=S.bottom;T&&j.sectorId!==r?f(j.id,r):!T&&j.sectorId===r&&f(j.id,null)})},[r,d,f]);return u.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[u.jsx(jk,{minWidth:200,minHeight:150,isVisible:i||h,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:x,onResizeEnd:m}),u.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[u.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),u.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),hC={production:"",habitat:"",storage:""},$m={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},gC=L.memo(function({data:r,selected:o}){const{module:i,onWareDoubleClick:l}=r,c=xe(M=>M.activeStationId),d=ce(M=>M.computed),f=ce(M=>M.updateModule),h=Oe(M=>M.getModule),g=Oe(M=>M.getModuleType),x=Oe(M=>M.gameData),{t:m}=ht(),[y,w]=L.useState(null),[S,j]=L.useState(null),[C,I]=L.useState(!1),T=h(i.blueprintId),N=g(i.blueprintId)??"production",D=$m[N]??$m.production,A=hC[N]??"",O=L.useMemo(()=>{if(c)return Kt(d,c,i.id)},[d,c,i.id]),B=L.useCallback(M=>{var Z;return m((Z=x==null?void 0:x.wares[M])==null?void 0:Z.name,M)},[x,m]),Y=L.useCallback((M,Z)=>{if(!Z||Z.length===0)return M;const J=new Map(M.map(le=>[le.wareId,le])),oe=[],ie=new Set;for(const le of Z){const se=J.get(le);se&&(oe.push(se),ie.add(le))}for(const le of M)ie.has(le.wareId)||oe.push(le);return oe},[]),q=L.useMemo(()=>Y((O==null?void 0:O.netOutputs)??[],i.outputOrder),[O==null?void 0:O.netOutputs,i.outputOrder,Y]),F=L.useMemo(()=>Y((O==null?void 0:O.netInputs)??[],i.inputOrder),[O==null?void 0:O.netInputs,i.inputOrder,Y]),z=L.useMemo(()=>Y((O==null?void 0:O.grossOutputs)??[],i.outputOrder),[O==null?void 0:O.grossOutputs,i.outputOrder,Y]),H=L.useMemo(()=>Y((O==null?void 0:O.grossInputs)??[],i.inputOrder),[O==null?void 0:O.grossInputs,i.inputOrder,Y]),X=L.useMemo(()=>{if(!O)return!1;const M=O.grossOutputs.reduce((ie,le)=>ie+le.amount,0),Z=O.netOutputs.reduce((ie,le)=>ie+le.amount,0),J=O.grossInputs.reduce((ie,le)=>ie+le.amount,0),oe=O.netInputs.reduce((ie,le)=>ie+le.amount,0);return Math.abs(M-Z)>.01||Math.abs(J-oe)>.01},[O]),$=L.useCallback((M,Z,J)=>{M.stopPropagation(),w(`${J}-${Z}`),M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",`${J}-${Z}`)},[]),Q=L.useCallback((M,Z,J)=>{M.preventDefault(),M.stopPropagation();const oe=`${J}-${Z}`;y&&y!==oe&&y.startsWith(J)&&(j(oe),M.dataTransfer.dropEffect="move")},[y]),W=L.useCallback(()=>{j(null)},[]),_=L.useCallback((M,Z,J)=>{if(M.preventDefault(),M.stopPropagation(),!y||!y.startsWith(J)||!c){w(null),j(null);return}const oe=y.replace(`${J}-`,"");if(oe===Z){w(null),j(null);return}const le=(J==="output"?z:H).map(pe=>pe.wareId),se=le.indexOf(oe),G=le.indexOf(Z);if(se===-1||G===-1){w(null),j(null);return}const ne=[...le];ne.splice(se,1),ne.splice(G,0,oe),J==="output"?f(c,i.id,{outputOrder:ne}):f(c,i.id,{inputOrder:ne}),w(null),j(null)},[y,z,H,f,c,i.id]),P=L.useCallback(()=>{w(null),j(null)},[]),k=L.useCallback((M,Z)=>{var oe;return O?((oe=(Z==="output"?O.netOutputs:O.netInputs).find(ie=>ie.wareId===M))==null?void 0:oe.amount)??0:0},[O]),R=L.useCallback((M,Z)=>{const J=`${Z}-${M}`;return{isDragging:y===J,isDragOver:S===J,onDragStart:oe=>$(oe,M,Z),onDragEnd:P,onDragOver:oe=>Q(oe,M,Z),onDragLeave:W,onDrop:oe=>_(oe,M,Z)}},[y,S,$,P,Q,W,_]),E=(M,Z)=>{const J=`${Z}-${M.wareId}`,oe=k(M.wareId,Z),ie=oe<.01;return u.jsx(Kl,{wareId:M.wareId,type:Z,handleId:J,amount:{primary:oe,fulfilled:M.amount-oe},status:ie?"satisfied":"unsatisfied",preset:lC,drag:R(M.wareId,Z),amountTooltip:`Full: ${$e(M.amount)}/hr`,onDoubleClick:l?()=>l(M.wareId,i.id,Z):void 0},M.wareId)};return u.jsxs("div",{className:`
        w-[240px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":D.border}
      `,children:[u.jsx("div",{className:`px-3 py-2 border-b border-border ${D.bg} rounded-t-lg`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:M=>{M.stopPropagation(),c&&f(c,i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("span",{className:"text-base",children:A}),u.jsx("h3",{className:`text-xs truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:m(T==null?void 0:T.name,i.blueprintId)})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Count"}),u.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),N==="habitat"&&T&&"workforceCapacity"in T&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsx("span",{className:"text-foreground",children:T.workforceCapacity*i.count})]}),N==="storage"&&T&&"cargoMax"in T&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:T.cargoMax*i.count})]}),(N==="production"||N==="habitat")&&O&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[z.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:z.map(M=>E(M,"output"))})]}),H.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:H.map(M=>E(M,"input"))})]}),q.length===0&&F.length===0&&X&&u.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(z.length>0||H.length>0)&&u.jsxs("div",{className:"pt-1 border-t border-border/30",children:[u.jsxs("button",{onClick:M=>{M.stopPropagation(),I(!C)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[u.jsx("span",{children:C?"":""}),u.jsx("span",{children:"Full Production"})]}),C&&u.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[z.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),z.map(M=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:B(M.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",$e(M.amount)]})]},M.wareId))]}),H.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),H.map(M=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:B(M.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",$e(M.amount)]})]},M.wareId))]})]})]})]}),(N==="production"||N==="habitat")&&!O&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),xC="generic-import",yC=L.memo(function({selected:r}){const o=xe(F=>F.activeStationId),i=ce(F=>F.computed),l=Oe(F=>F.gameData),c=ce(F=>F.plan.stations),d=ce(F=>F.updateStation),{t:f}=ht(),[h,g]=L.useState(null),[x,m]=L.useState(null),y=L.useMemo(()=>{if(o)return c.find(F=>F.id===o)},[c,o]),w=L.useMemo(()=>{if(!(!o||!i))return i.stations.find(F=>F.stationId===o)},[i,o]),S=F=>{var z;return f((z=l==null?void 0:l.wares[F])==null?void 0:z.name,F)},j=(w==null?void 0:w.stationInputs)??[],C=(w==null?void 0:w.externallySupplied)??[],I=(w==null?void 0:w.remainingInputs)??[],T=L.useMemo(()=>{const F=new Map;for(const X of j){const $=F.get(X.wareId)||{connected:0,supplied:0,remaining:0};$.connected=X.amount,F.set(X.wareId,$)}for(const X of C){const $=F.get(X.wareId);$&&($.supplied=X.amount)}for(const X of I){const $=F.get(X.wareId);$&&($.remaining=X.amount)}const z=Array.from(F.entries()).map(([X,$])=>({wareId:X,connected:$.connected,supplied:$.supplied,remaining:$.remaining})),H=y==null?void 0:y.inputOrder;if(H&&H.length>0){const X=new Map(H.map(($,Q)=>[$,Q]));z.sort(($,Q)=>{const W=X.get($.wareId)??1/0,_=X.get(Q.wareId)??1/0;return W!==_?W-_:Q.connected-$.connected})}else z.sort((X,$)=>$.connected-X.connected);return z},[j,C,I,y==null?void 0:y.inputOrder]),N=L.useCallback((F,z)=>{F.stopPropagation(),g(z),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",z)},[]),D=L.useCallback((F,z)=>{F.preventDefault(),F.stopPropagation(),h&&h!==z&&(m(z),F.dataTransfer.dropEffect="move")},[h]),A=L.useCallback(()=>{m(null)},[]),O=L.useCallback((F,z)=>{if(F.preventDefault(),F.stopPropagation(),!h||!o){g(null),m(null);return}const H=h;if(H===z){g(null),m(null);return}const X=T.map(_=>_.wareId),$=X.indexOf(H),Q=X.indexOf(z);if($===-1||Q===-1){g(null),m(null);return}const W=[...X];W.splice($,1),W.splice(Q,0,H),d(o,{inputOrder:W}),g(null),m(null)},[h,T,d,o]),B=L.useCallback(()=>{g(null),m(null)},[]),Y=L.useCallback(F=>({isDragging:h===F,isDragOver:x===F,onDragStart:z=>N(z,F),onDragEnd:B,onDragOver:z=>D(z,F),onDragLeave:A,onDrop:z=>O(z,F)}),[h,x,N,B,D,A,O]),q=F=>{const z=`output-${F.wareId}`,H=Wc(F.remaining,F.supplied);let X;return H==="satisfied"?X=`Need: ${$e(F.connected)}, Supplied: ${$e(F.supplied)}`:H==="partial"?X=`Need: ${$e(F.connected)}, Supplied: ${$e(F.supplied)}, Remaining: ${$e(F.remaining)}`:X=`Need: ${$e(F.connected)}, No external supply`,u.jsx(Kl,{wareId:F.wareId,type:"output",handleId:z,amount:{primary:F.supplied-F.connected?F.supplied-F.connected:F.supplied,secondary:F.supplied>.01?F.supplied:void 0,fulfilled:F.supplied},status:H,preset:uC,drag:Y(F.wareId),amountTooltip:X,handleTooltip:`Import ${S(F.wareId)}`},F.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),u.jsx("div",{className:"px-1 py-2",children:T.length>0?u.jsx("div",{className:"space-y-0 pr-3",children:T.map(F=>q(F))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),u.jsx(_r,{type:"source",position:Ne.Right,id:xC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),vC="generic-export",wC=L.memo(function({selected:r}){const o=xe(F=>F.activeStationId),i=ce(F=>F.computed),l=Oe(F=>F.gameData),c=ce(F=>F.plan.stations),d=ce(F=>F.updateStation),{t:f}=ht(),[h,g]=L.useState(null),[x,m]=L.useState(null),y=L.useMemo(()=>{if(o)return c.find(F=>F.id===o)},[c,o]),w=L.useMemo(()=>{if(!(!o||!i))return i.stations.find(F=>F.stationId===o)},[i,o]),S=F=>{var z;return f((z=l==null?void 0:l.wares[F])==null?void 0:z.name,F)},j=(w==null?void 0:w.stationOutputs)??[],C=(w==null?void 0:w.externallyConsumed)??[],I=(w==null?void 0:w.remainingOutputs)??[],T=L.useMemo(()=>{const F=new Map;for(const X of j){const $=F.get(X.wareId)||{connected:0,consumed:0,remaining:0};$.connected=X.amount,F.set(X.wareId,$)}for(const X of C){const $=F.get(X.wareId);$&&($.consumed=X.amount)}for(const X of I){const $=F.get(X.wareId);$&&($.remaining=X.amount)}const z=Array.from(F.entries()).map(([X,$])=>({wareId:X,connected:$.connected,consumed:$.consumed,remaining:$.remaining})),H=y==null?void 0:y.outputOrder;if(H&&H.length>0){const X=new Map(H.map(($,Q)=>[$,Q]));z.sort(($,Q)=>{const W=X.get($.wareId)??1/0,_=X.get(Q.wareId)??1/0;return W!==_?W-_:Q.connected-$.connected})}else z.sort((X,$)=>$.connected-X.connected);return z},[j,C,I,y==null?void 0:y.outputOrder]),N=L.useCallback((F,z)=>{F.stopPropagation(),g(z),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",z)},[]),D=L.useCallback((F,z)=>{F.preventDefault(),F.stopPropagation(),h&&h!==z&&(m(z),F.dataTransfer.dropEffect="move")},[h]),A=L.useCallback(()=>{m(null)},[]),O=L.useCallback((F,z)=>{if(F.preventDefault(),F.stopPropagation(),!h||!o){g(null),m(null);return}const H=h;if(H===z){g(null),m(null);return}const X=T.map(_=>_.wareId),$=X.indexOf(H),Q=X.indexOf(z);if($===-1||Q===-1){g(null),m(null);return}const W=[...X];W.splice($,1),W.splice(Q,0,H),d(o,{outputOrder:W}),g(null),m(null)},[h,T,d,o]),B=L.useCallback(()=>{g(null),m(null)},[]),Y=L.useCallback(F=>({isDragging:h===F,isDragOver:x===F,onDragStart:z=>N(z,F),onDragEnd:B,onDragOver:z=>D(z,F),onDragLeave:A,onDrop:z=>O(z,F)}),[h,x,N,B,D,A,O]),q=F=>{const z=`input-${F.wareId}`,H=Wc(F.remaining,F.consumed);let X;return H==="satisfied"?X=`Exporting: ${$e(F.connected)}, Consumed: ${$e(F.consumed)}`:H==="partial"?X=`Exporting: ${$e(F.connected)}, Consumed: ${$e(F.consumed)}, Remaining: ${$e(F.remaining)}`:X=`Exporting: ${$e(F.connected)}, No external consumers`,u.jsx(Kl,{wareId:F.wareId,type:"input",handleId:z,amount:{primary:F.connected,secondary:F.consumed>.01?F.consumed:void 0,fulfilled:F.consumed},status:H,preset:cC,drag:Y(F.wareId),amountTooltip:X,handleTooltip:`Export ${S(F.wareId)}`},F.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),u.jsx("div",{className:"px-1 py-2",children:T.length>0?u.jsx("div",{className:"space-y-0 pl-3",children:T.map(F=>q(F))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),u.jsx(_r,{type:"target",position:Ne.Left,id:vC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),SC=L.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:h,selected:g}){const x=ce(N=>N.computed),m=h==null?void 0:h.connection,y=L.useMemo(()=>{if(m)return _g(x,m.id)},[x,m]),[w,S,j]=Vl({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),C=N=>N>=1e3?`${(N/1e3).toFixed(1)}k`:N.toFixed(0),I=x.deficits.find(N=>N.stationId===(m==null?void 0:m.targetStationId)&&N.wareId===(m==null?void 0:m.wareId));let T="#64748b";return m!=null&&m.wareId?I?I.supplied/I.required>=.8?T="#eab308":T="#f97316":T="#22c55e":T="#ef4444",u.jsxs(u.Fragment,{children:[u.jsx(No,{id:r,path:w,style:{stroke:T,strokeWidth:g?3:2,strokeDasharray:m!=null&&m.wareId?void 0:"5,5"}}),(m==null?void 0:m.wareId)&&u.jsx(Ng,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${j}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${g?"ring-2 ring-primary":""}
              ${y!=null&&y.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:m.mode==="custom"?`Custom: ${C(m.amount)}, Actual: ${C((y==null?void 0:y.effectiveAmount)??0)}`:`Auto: ${C((y==null?void 0:y.effectiveAmount)??0)}`,children:C((y==null?void 0:y.effectiveAmount)??0)})})]})}),NC=L.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:h,selected:g}){const x=h==null?void 0:h.connection,m=ce(D=>D.computed),y=xe(D=>D.activeStationId),w=L.useMemo(()=>{if(!x||!y)return;const D=Mr(m,y);return D==null?void 0:D.moduleConnections.find(A=>A.connectionId===x.id)},[m,y,x]),[S,j,C]=Vl({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),I=D=>D>=1e3?`${(D/1e3).toFixed(1)}k`:D.toFixed(0),T=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",N=(w==null?void 0:w.effectiveAmount)??(x==null?void 0:x.amount)??0;return u.jsxs(u.Fragment,{children:[u.jsx(No,{id:r,path:S,style:{stroke:T,strokeWidth:g?3:2,strokeDasharray:x!=null&&x.wareId?void 0:"5,5"}}),(x==null?void 0:x.wareId)&&u.jsx(Ng,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${j}px,${C}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${g?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:x.mode==="custom"?`Custom: ${I(x.amount)}, Actual: ${I(N)}`:`${x.mode??"auto"}: ${I(N)}`,children:I(N)})})]})});function Mt({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",c=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return u.jsxs("button",{onClick:d=>{d.stopPropagation(),i(d)},className:`${l} ${c}`,children:[r&&u.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function kC(){const{screenToFlowPosition:t}=Dr(),r=xe(h=>h.contextMenu),o=xe(h=>h.closeContextMenu),i=ce(h=>h.plan),l=ce(h=>h.addStation),c=ce(h=>h.addSector),d=L.useCallback(h=>{if(h.stopPropagation(),!r)return;const g=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,g),o()},[t,r,i.stations.length,l,o]),f=L.useCallback(h=>{if(h.stopPropagation(),!r)return;const g=t({x:r.x,y:r.y});c(`Sector ${i.sectors.length+1}`,g),o()},[t,r,i.sectors.length,c,o]);return u.jsxs(u.Fragment,{children:[u.jsx(Mt,{label:"Add Station",icon:"+",onClick:d}),u.jsx(Mt,{label:"Add Sector",icon:"",onClick:f})]})}const gl={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function CC(){const{screenToFlowPosition:t}=Dr(),r=L.useRef(null),o=Oe(S=>S.gameData),i=ce(S=>S.addModule),l=xe(S=>S.activeStationId),c=xe(S=>S.contextMenu),d=xe(S=>S.closeContextMenu),{t:f}=ht(),[h,g]=L.useState(null),[x,m]=L.useState(""),y=L.useMemo(()=>{if(!o||!x.trim())return null;const S=x.toLowerCase(),j=[];return Object.keys(gl).forEach(C=>{Object.values(o.modules[C]).forEach(I=>{f(I.name).toLowerCase().includes(S)&&j.push({id:I.id,name:f(I.name),category:C})})}),j.slice(0,15)},[o,x,f]);L.useEffect(()=>{var S;(S=r.current)==null||S.focus()},[]);const w=L.useCallback((S,j)=>{if(S.stopPropagation(),!l||!c)return;const C=t({x:c.x,y:c.y});i(l,j,C),d()},[t,c,l,i,d]);return o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-2 pb-0",children:u.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:x,onChange:S=>m(S.target.value),onKeyDown:S=>S.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsx("div",{className:"p-1 pt-1",children:y?u.jsx("div",{className:"max-h-64 overflow-y-auto",children:y.length===0?u.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):y.map(S=>u.jsxs("button",{onClick:j=>w(j,S.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:gl[S.category].icon}),u.jsx("span",{className:"truncate",children:S.name})]},S.id))}):u.jsx(u.Fragment,{children:Object.keys(gl).map(S=>{const{label:j,icon:C}=gl[S],I=Object.values(o.modules[S]),T=h===S;return u.jsxs("div",{children:[u.jsxs("button",{onClick:N=>{N.stopPropagation(),g(T?null:S)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{children:C}),j]}),u.jsx("span",{className:"text-muted-foreground text-xs",children:T?"":""})]}),T&&u.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[I.slice(0,20).map(N=>u.jsx("button",{onClick:D=>w(D,N.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:f(N.name)},N.id)),I.length>20&&u.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",I.length-20," more (use search)"]})]})]},S)})})})]}):null}function Pr(){return u.jsx("div",{className:"my-1 h-px bg-border"})}function Cc({label:t,value:r,type:o="text",min:i,max:l,step:c,onSubmit:d}){const[f,h]=L.useState(!1),[g,x]=L.useState(String(r)),m=L.useRef(null);L.useEffect(()=>{var w,S;f&&((w=m.current)==null||w.focus(),(S=m.current)==null||S.select())},[f]);const y=()=>{d(g),h(!1)};return f?u.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("input",{ref:m,type:o,min:i,max:l,step:c,value:g,onChange:w=>x(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&y(),w.key==="Escape"&&h(!1)},onBlur:y,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):u.jsxs("button",{onClick:w=>{w.stopPropagation(),x(String(r)),h(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:t}),u.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function IC({nodeId:t}){const r=ce(h=>h.plan.stations),o=ce(h=>h.updateStation),i=ce(h=>h.removeStation),l=xe(h=>h.drillIntoStation),c=xe(h=>h.closeContextMenu),d=xe(h=>h.clearSelection),f=r.find(h=>h.id===t);return f?u.jsxs(u.Fragment,{children:[u.jsx(Mt,{label:"Open Station",onClick:()=>{l(t)}}),u.jsx(Pr,{}),u.jsx(Cc,{label:"Change Name",value:f.name,onSubmit:h=>{h.trim()&&o(t,{name:h.trim()})}}),u.jsx(Cc,{label:"Sunlight Override",value:f.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:h=>{const g=parseInt(h,10);o(t,{sunlightOverride:isNaN(g)?void 0:g})}}),u.jsx(Mt,{label:f.locked?"Unlock Position":"Lock Position",icon:f.locked?"":"",onClick:()=>{o(t,{locked:!f.locked}),c()}}),u.jsx(Pr,{}),u.jsx(Mt,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),d(),c()}})]}):null}function jC({value:t,onSelect:r}){const[o,i]=L.useState(!1),[l,c]=L.useState(t),d=L.useRef(null),f=Oe(x=>x.gameData),h=L.useMemo(()=>f!=null&&f.sectors?Object.values(f.sectors).sort((x,m)=>x.name.localeCompare(m.name)):[],[f]),g=L.useMemo(()=>{if(!l.trim())return h.slice(0,10);const x=l.toLowerCase();return h.filter(m=>m.name.toLowerCase().includes(x)).slice(0,10)},[h,l]);return L.useEffect(()=>{var x,m;o&&((x=d.current)==null||x.focus(),(m=d.current)==null||m.select())},[o]),o?u.jsxs("div",{className:"px-3 py-1.5",onClick:x=>x.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),u.jsx("input",{ref:d,type:"text",value:l,onChange:x=>c(x.target.value),onKeyDown:x=>{if(x.stopPropagation(),x.key==="Enter"){const m=h.find(y=>y.name.toLowerCase()===l.toLowerCase());r((m==null?void 0:m.name)??l,m==null?void 0:m.sunlight),i(!1)}x.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),g.length>0&&u.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:g.map(x=>u.jsxs("button",{onClick:m=>{m.stopPropagation(),r(x.name,x.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[u.jsx("span",{className:"truncate text-foreground",children:x.name}),u.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[x.sunlight,"%"]})]},x.id))})]}):u.jsxs("button",{onClick:x=>{x.stopPropagation(),c(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:"Change Name"}),u.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function bC({nodeId:t}){const r=ce(m=>m.plan),o=ce(m=>m.updateSector),i=ce(m=>m.removeSector),l=ce(m=>m.addStation),c=ce(m=>m.moveStationToSector),d=xe(m=>m.contextMenu),f=xe(m=>m.closeContextMenu),h=xe(m=>m.clearSelection),g=r.sectors.find(m=>m.id===t);if(!g)return null;const x=r.stations.filter(m=>m.sectorId===t);return u.jsxs(u.Fragment,{children:[u.jsx(jC,{value:g.name,onSelect:(m,y)=>{const w={name:m};y!==void 0&&(w.sunlight=y),o(t,w)}}),u.jsx(Cc,{label:"Sunlight",value:g.sunlight,type:"number",min:0,max:500,onSubmit:m=>{const y=parseInt(m,10);!isNaN(y)&&y>=0&&o(t,{sunlight:y})}}),u.jsx(Pr,{}),u.jsx(Mt,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const m=(d==null?void 0:d.flowPosition)??{x:g.position.x+50,y:g.position.y+80},y=`Station ${r.stations.length+1}`;l(y,m);const w=(S=ce.getState().plan.stations.at(-1))==null?void 0:S.id;w&&c(w,t),f()}}),u.jsx(Mt,{label:g.locked?"Unlock Position":"Lock Position",icon:g.locked?"":"",onClick:()=>{o(t,{locked:!g.locked}),f()}}),u.jsx(Pr,{}),u.jsx(Mt,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{x.length>0&&!confirm(`This sector contains ${x.length} station(s). They will be unassigned. Continue?`)||(i(t),h(),f())}})]})}function EC({label:t,value:r,min:o=1,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),u.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const c=parseInt(l.target.value,10);!isNaN(c)&&c>=o&&i(c)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),u.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function Ic({label:t,value:r,options:o,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value))})]})}function _C({nodeId:t}){const r=xe(S=>S.activeStationId),o=xe(S=>S.closeContextMenu),i=xe(S=>S.clearSelection),l=ce(S=>S.plan.stations),c=ce(S=>S.updateModule),d=ce(S=>S.removeModule),f=Oe(S=>S.gameData),h=Oe(S=>S.getModuleType),{t:g}=ht(),x=l.find(S=>S.id===r),m=x==null?void 0:x.modules.find(S=>S.id===t),y=m?h(m.blueprintId):null,w=L.useMemo(()=>{if(!f||!y)return[];const S=f.modules[y];return Object.values(S).sort((j,C)=>g(j.name).localeCompare(g(C.name))).map(j=>({value:j.id,label:g(j.name)}))},[f,y,g]);return!x||!m||!r?null:u.jsxs(u.Fragment,{children:[u.jsx(EC,{label:"Amount",value:m.count,min:1,onChange:S=>c(r,m.id,{count:S})}),y==="production"&&w.length>1&&u.jsx(Ic,{label:"Blueprint",value:m.blueprintId,options:w,onChange:S=>c(r,m.id,{blueprintId:S})}),u.jsx(Mt,{label:m.locked?"Unlock Position":"Lock Position",icon:m.locked?"":"",onClick:()=>{c(r,m.id,{locked:!m.locked}),o()}}),u.jsx(Pr,{}),u.jsx(Mt,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{d(r,m.id),i(),o()}})]})}function MC({nodeId:t}){const r=xe(x=>x.activeStationId),o=xe(x=>x.closeContextMenu),i=ce(x=>x.plan.stations),l=ce(x=>x.removeModuleConnection),c=i.find(x=>x.id===r);if(!c||!r)return null;const d=c.moduleConnections??[],f=t===Nt,h=f?"Station Input":"Station Output",g=d.filter(x=>f?x.sourceModuleId===Nt:x.targetModuleId===Ht);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[h,"  ",g.length," connection",g.length!==1?"s":""]}),u.jsx(Mt,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{g.forEach(x=>{l(r,x.id)}),o()}})]})}const zm=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function PC({edgeId:t,viewMode:r}){var j,C;const o=xe(I=>I.closeContextMenu),i=xe(I=>I.clearSelection),l=xe(I=>I.activeStationId),c=ce(I=>I.plan),d=ce(I=>I.updateConnection),f=ce(I=>I.removeConnection),h=ce(I=>I.updateModuleConnection),g=ce(I=>I.removeModuleConnection),x=Oe(I=>I.gameData),{t:m}=ht();if(r==="network"){const I=c.connections.find(N=>N.id===t);if(!I)return null;const T=I.wareId?m((j=x==null?void 0:x.wares[I.wareId])==null?void 0:j.name,I.wareId):"Unknown";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:T}),u.jsx(Ic,{label:"Mode",value:I.mode??"auto",options:zm,onChange:N=>d(I.id,{mode:N})}),u.jsx(Pr,{}),u.jsx(Mt,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{f(I.id),i(),o()}})]})}if(!l)return null;const y=c.stations.find(I=>I.id===l),w=((y==null?void 0:y.moduleConnections)??[]).find(I=>I.id===t);if(!w)return null;const S=m((C=x==null?void 0:x.wares[w.wareId])==null?void 0:C.name,w.wareId);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:S}),u.jsx(Ic,{label:"Mode",value:w.mode??"auto",options:zm,onChange:I=>h(l,w.id,{mode:I})}),u.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:I=>I.stopPropagation(),children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),u.jsx("button",{onClick:I=>{I.stopPropagation(),h(l,w.id,{locked:!w.locked})},className:`w-10 h-5 rounded-full transition-colors ${w.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${w.locked?"translate-x-5":"translate-x-0.5"}`})})]}),u.jsx(Pr,{}),u.jsx(Mt,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{g(l,w.id),i(),o()}})]})}function Dg(){const t=xe(x=>x.contextMenu),r=xe(x=>x.closeContextMenu),o=L.useRef(null),i=L.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const x=o.current.getBoundingClientRect();let{x:m,y}=t;return m+x.width>window.innerWidth&&(m=window.innerWidth-x.width-8),y+x.height>window.innerHeight&&(y=window.innerHeight-x.height-8),m<8&&(m=8),y<8&&(y=8),{left:m,top:y}},[t]);if(L.useEffect(()=>{if(!t)return;const x=y=>{o.current&&!o.current.contains(y.target)&&r()},m=setTimeout(()=>{document.addEventListener("mousedown",x)},0);return()=>{clearTimeout(m),document.removeEventListener("mousedown",x)}},[t,r]),L.useEffect(()=>{if(!t)return;const x=m=>{m.key==="Escape"&&r()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,r]),!t)return null;const{target:l}=t,d=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return u.jsx(kC,{});if(l.viewMode==="station")return u.jsx(CC,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return u.jsx(IC,{nodeId:l.nodeId});if(l.nodeType==="sector")return u.jsx(bC,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===Nt||l.nodeId===Ht)return u.jsx(MC,{nodeId:l.nodeId});if(l.nodeType==="module")return u.jsx(_C,{nodeId:l.nodeId})}}return l.type==="edge"?u.jsx(PC,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!d)return null;const h=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",g=i();return u.jsx("div",{ref:o,className:`fixed z-50 ${h} rounded-md border border-border bg-popover shadow-lg`,style:{left:g.left||t.x,top:g.top||t.y},onClick:x=>x.stopPropagation(),onMouseDown:x=>x.stopPropagation(),children:u.jsx("div",{className:"p-1",children:d})})}const DC={station:dC,sector:mC},TC={resource:SC};function OC(){const{setViewport:t,screenToFlowPosition:r}=Dr(),o=ce(_=>_.plan.stations),i=ce(_=>_.plan.sectors),l=ce(_=>_.plan.connections),c=ce(_=>_.computed),d=ce(_=>_.updateStation),f=ce(_=>_.updateSector),h=ce(_=>_.removeStation),g=ce(_=>_.removeSector),x=ce(_=>_.moveStationToSector),m=ce(_=>_.addConnection),y=ce(_=>_.removeConnection),w=xe(_=>_.selectNode),S=xe(_=>_.selectEdge),j=xe(_=>_.clearSelection),C=xe(_=>_.openContextMenu),I=xe(_=>_.closeContextMenu),T=L.useRef(null),N=L.useMemo(()=>{const _=i.map(k=>({id:k.id,type:"sector",position:k.position,data:{sector:k},width:k.size.width,height:k.size.height,zIndex:-1,draggable:!k.locked})),P=o.map(k=>({id:k.id,type:"station",position:k.position,data:{station:k},zIndex:1,draggable:!k.locked}));return[..._,...P]},[i,o]),D=L.useMemo(()=>l.map(_=>({id:_.id,source:_.sourceStationId,target:_.targetStationId,sourceHandle:_.wareId?`output-${_.wareId}`:void 0,targetHandle:_.wareId?`input-${_.wareId}`:void 0,type:"resource",data:{connection:_}})),[l]),A=L.useCallback((_,P)=>{for(const k of i)if(_>=k.position.x&&_<=k.position.x+k.size.width&&P>=k.position.y&&P<=k.position.y+k.size.height)return k.id;return null},[i]),O=L.useCallback(_=>{_.forEach(P=>{if(P.type==="position"&&P.position){const k=o.find(E=>E.id===P.id),R=i.find(E=>E.id===P.id);if(k)d(P.id,{position:P.position});else if(R){const E=P.position.x-R.position.x,M=P.position.y-R.position.y;f(P.id,{position:P.position}),(E!==0||M!==0)&&o.filter(Z=>Z.sectorId===R.id).forEach(Z=>{d(Z.id,{position:{x:Z.position.x+E,y:Z.position.y+M}})})}}else if(P.type==="remove"){const k=o.find(E=>E.id===P.id),R=i.find(E=>E.id===P.id);k?h(P.id):R&&g(P.id)}else P.type==="select"&&P.selected&&w(P.id)})},[o,i,d,f,h,g,w]),B=L.useCallback((_,P)=>{const k=o.find(Z=>Z.id===P.id);if(!k)return;const R=P.position.x+80,E=P.position.y+50,M=A(R,E);M!==k.sectorId&&x(k.id,M)},[o,A,x]),Y=L.useCallback(_=>{_.forEach(P=>{P.type==="remove"?y(P.id):P.type==="select"&&P.selected&&S(P.id)})},[y,S]),q=_=>_?_.split("-").slice(1).join("-"):"",F=L.useCallback(_=>{if(_.source&&_.target&&_.sourceHandle){const P=q(_.sourceHandle),k=c.stations.find(J=>J.stationId===_.source),R=k==null?void 0:k.remainingOutputs.find(J=>J.wareId===P),E=c.stations.find(J=>J.stationId===_.target),M=E==null?void 0:E.remainingInputs.find(J=>J.wareId===P),Z=M?Math.min((R==null?void 0:R.amount)??0,M.amount):(R==null?void 0:R.amount)??0;m({sourceStationId:_.source,targetStationId:_.target,wareId:P,amount:Z,mode:"auto"})}},[m,c.stations]),z=L.useCallback(()=>{j(),I()},[j,I]),H=L.useCallback(_=>{_.preventDefault(),C({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"pane",viewMode:"network"}})},[C,r]),X=L.useCallback((_,P)=>{_.preventDefault(),w(P.id),C({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"node",nodeId:P.id,nodeType:P.type??"station",viewMode:"network"}})},[C,r,w]),$=L.useCallback((_,P)=>{_.preventDefault(),S(P.id),C({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"edge",edgeId:P.id,edgeType:P.type??"resource",viewMode:"network"}})},[C,r,S]),Q=L.useCallback(_=>{if(_.key==="Delete"||_.key==="Backspace"){const P=xe.getState().selectedNodeId,k=xe.getState().selectedEdgeId;if(P){const R=o.find(M=>M.id===P),E=i.find(M=>M.id===P);R?h(P):E&&g(P),j()}else k&&(y(k),j())}},[o,i,h,g,y,j]),W=L.useCallback(_=>{const P=Math.round(_.x),k=Math.round(_.y),R=Math.round(_.zoom*100)/100;(P!==_.x||k!==_.y||R!==_.zoom)&&t({x:P,y:k,zoom:R})},[t]);return u.jsxs("div",{ref:T,className:"flex-1 relative",onKeyDown:Q,tabIndex:0,children:[u.jsxs(Sg,{nodes:N,edges:D,onNodesChange:O,onEdgesChange:Y,onConnect:F,onNodeDragStop:B,onPaneClick:z,onPaneContextMenu:H,onNodeContextMenu:X,onEdgeContextMenu:$,onViewportChange:W,nodeTypes:DC,edgeTypes:TC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(Cg,{gap:16,size:1}),u.jsx(jg,{}),u.jsx(Nk,{nodeColor:_=>_.type==="sector"?_.selected?"#3b82f6":"#475569":_.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),u.jsx(Dg,{})]})}function AC(){return u.jsx(Xl,{children:u.jsx(OC,{})})}function LC({open:t,onClose:r,candidates:o,onSelect:i}){const{t:l}=ht(),c=Oe(d=>d.gameData);return u.jsx(Gl,{open:t,onClose:r,title:"Select Module",size:"sm",children:u.jsx("div",{className:"space-y-1",children:o.map(d=>{const f=c?Bc(d,c.recipes):null;return u.jsxs("button",{onClick:()=>i(d.id),className:"w-full text-left px-3 py-2 rounded hover:bg-muted transition-colors flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-sm text-foreground truncate",children:l(d.name,d.id)}),f&&f.method!=="default"&&u.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground flex-shrink-0",children:f.method})]},d.id)})})})}const $C={module:gC,stationInput:yC,stationOutput:wC},zC={module:NC};function RC(){const{setViewport:t,screenToFlowPosition:r}=Dr(),o=xe(G=>G.activeStationId),i=ce(G=>G.plan.stations),l=ce(G=>G.computed),c=ce(G=>G.updateModule),d=ce(G=>G.removeModule),f=ce(G=>G.addModuleConnection),h=ce(G=>G.removeModuleConnection),g=xe(G=>G.selectNode),x=xe(G=>G.selectEdge),m=xe(G=>G.clearSelection),y=xe(G=>G.openContextMenu),w=xe(G=>G.closeContextMenu),S=ce(G=>G.addModule),j=Oe(G=>G.gameData),C=L.useRef(null),[I,T]=L.useState(null),N=L.useRef(null),D=L.useRef(!1),A=L.useMemo(()=>i.find(G=>G.id===o),[i,o]),O={x:-300,y:100},B={x:400,y:100},Y=L.useCallback(G=>j?Object.values(j.modules.production).filter(ne=>ne.producedWareId===G):[],[j]),q=L.useCallback(G=>j?Object.values(j.modules.production).filter(ne=>{const pe=Bc(ne,j.recipes);return(pe==null?void 0:pe.inputs.some(he=>he.ware===G))??!1}):[],[j]),F=L.useCallback((G,ne,pe,he,me)=>{var Ee,Ae,et,at;if(!o)return;const ke=S(o,G,me),be=ce.getState().computed;if(he==="producer"){const Xe=Kt(be,o,ke),Ke=Kt(be,o,pe),ot=((Ee=Xe==null?void 0:Xe.grossOutputs.find(st=>st.wareId===ne))==null?void 0:Ee.amount)??0,Dt=((Ae=Ke==null?void 0:Ke.grossInputs.find(st=>st.wareId===ne))==null?void 0:Ae.amount)??0,Tt=Math.min(ot,Dt),Vt=ot>0?Tt/ot:0;f(o,{sourceModuleId:ke,targetModuleId:pe,wareId:ne,amount:Tt,mode:"auto",locked:!1,ratio:Vt})}else{const Xe=Kt(be,o,pe),Ke=Kt(be,o,ke),ot=((et=Xe==null?void 0:Xe.grossOutputs.find(st=>st.wareId===ne))==null?void 0:et.amount)??0,Dt=((at=Ke==null?void 0:Ke.grossInputs.find(st=>st.wareId===ne))==null?void 0:at.amount)??0,Tt=Math.min(ot,Dt),Vt=ot>0?Tt/ot:0;f(o,{sourceModuleId:pe,targetModuleId:ke,wareId:ne,amount:Tt,mode:"auto",locked:!1,ratio:Vt})}},[o,S,f]),z=L.useCallback((G,ne,pe,he)=>{const me=pe==="producer"?Y(G):q(G);me.length!==0&&(me.length===1?F(me[0].id,G,ne,pe,he):T({wareId:G,existingModuleId:ne,candidates:me,direction:pe,position:he}))},[Y,q,F]),H=L.useCallback((G,ne,pe)=>{const he=A==null?void 0:A.modules.find(ke=>ke.id===ne),me=(he==null?void 0:he.position)??{x:0,y:0};pe==="input"?z(G,ne,"producer",{x:me.x-320,y:me.y}):z(G,ne,"consumer",{x:me.x+320,y:me.y})},[A,z]),X=L.useCallback(G=>{I&&(F(G,I.wareId,I.existingModuleId,I.direction,I.position),T(null))},[I,F]),$=L.useCallback((G,ne)=>{D.current=!1,ne.nodeId&&ne.handleId&&ne.handleType&&(N.current={nodeId:ne.nodeId,handleId:ne.handleId,handleType:ne.handleType})},[]),Q=L.useCallback(G=>{if(D.current||!N.current){N.current=null;return}const ne=N.current;if(N.current=null,ne.nodeId===Nt||ne.nodeId===Ht)return;const pe=G;if(!pe.clientX&&!pe.clientY)return;const he=r({x:pe.clientX,y:pe.clientY}),me=E(ne.handleId);me&&(ne.handleType==="source"?z(me,ne.nodeId,"consumer",he):z(me,ne.nodeId,"producer",he))},[r,z]),W=L.useMemo(()=>{if(!A)return[];const G=A.modules.map(he=>({id:he.id,type:"module",position:he.position,data:{module:he,onWareDoubleClick:H},draggable:!he.locked})),ne={id:Nt,type:"stationInput",position:A.stationInputPosition??O,data:{},deletable:!1},pe={id:Ht,type:"stationOutput",position:A.stationOutputPosition??B,data:{},deletable:!1};return[ne,...G,pe]},[A,H]),_=L.useMemo(()=>A?(A.moduleConnections??[]).map(ne=>({id:ne.id,source:ne.sourceModuleId,target:ne.targetModuleId,sourceHandle:ne.wareId?`output-${ne.wareId}`:void 0,targetHandle:ne.wareId?`input-${ne.wareId}`:void 0,type:"module",data:{connection:ne}})):[],[A]),P=ce(G=>G.updateStation),k=L.useCallback(G=>{o&&G.forEach(ne=>{ne.type==="position"&&ne.position?ne.id===Nt?P(o,{stationInputPosition:ne.position}):ne.id===Ht?P(o,{stationOutputPosition:ne.position}):c(o,ne.id,{position:ne.position}):ne.type==="remove"?ne.id!==Nt&&ne.id!==Ht&&d(o,ne.id):ne.type==="select"&&ne.selected&&g(ne.id)})},[o,c,P,d,g]),R=L.useCallback(G=>{o&&G.forEach(ne=>{ne.type==="remove"?h(o,ne.id):ne.type==="select"&&ne.selected&&x(ne.id)})},[o,h,x]),E=G=>G?G.split("-").slice(1).join("-"):"",M=L.useCallback(G=>{if(D.current=!0,!o||!G.source||!G.target)return;let ne,pe=0,he;if(G.source===Nt){if(!G.targetHandle)return;ne=E(G.targetHandle);const me=Kt(l,o,G.target),ke=me==null?void 0:me.netInputs.find(be=>be.wareId===ne);pe=(ke==null?void 0:ke.amount)??0}else if(G.target===Ht){if(!G.sourceHandle)return;ne=E(G.sourceHandle);const me=Kt(l,o,G.source),ke=me==null?void 0:me.netOutputs.find(be=>be.wareId===ne);pe=(ke==null?void 0:ke.amount)??0}else{if(!G.sourceHandle)return;ne=E(G.sourceHandle);const me=Kt(l,o,G.source),ke=me==null?void 0:me.grossOutputs.find(et=>et.wareId===ne),be=(ke==null?void 0:ke.amount)??0,Ee=Kt(l,o,G.target),Ae=Ee==null?void 0:Ee.grossInputs.find(et=>et.wareId===ne);pe=Ae?Math.min(be,Ae.amount):be,he=be>0?pe/be:0}ne&&f(o,{sourceModuleId:G.source,targetModuleId:G.target,wareId:ne,amount:pe,mode:"auto",locked:!1,ratio:he})},[o,l,f]),Z=L.useCallback(()=>{m(),w()},[m,w]),J=L.useCallback(G=>{G.preventDefault(),y({x:G.clientX,y:G.clientY,flowPosition:r({x:G.clientX,y:G.clientY}),target:{type:"pane",viewMode:"station"}})},[y,r]),oe=L.useCallback((G,ne)=>{G.preventDefault(),g(ne.id),y({x:G.clientX,y:G.clientY,flowPosition:r({x:G.clientX,y:G.clientY}),target:{type:"node",nodeId:ne.id,nodeType:ne.type??"module",viewMode:"station"}})},[y,r,g]),ie=L.useCallback((G,ne)=>{G.preventDefault(),x(ne.id),y({x:G.clientX,y:G.clientY,flowPosition:r({x:G.clientX,y:G.clientY}),target:{type:"edge",edgeId:ne.id,edgeType:ne.type??"module",viewMode:"station"}})},[y,r,x]),le=L.useCallback(G=>{if(G.key==="Delete"||G.key==="Backspace"){const ne=xe.getState().selectedNodeId,pe=xe.getState().selectedEdgeId;ne&&o?ne!==Nt&&ne!==Ht&&(d(o,ne),m()):pe&&o&&(h(o,pe),m())}},[o,d,h,m]),se=L.useCallback(G=>{const ne=Math.round(G.x),pe=Math.round(G.y),he=Math.round(G.zoom*100)/100;(ne!==G.x||pe!==G.y||he!==G.zoom)&&t({x:ne,y:pe,zoom:he})},[t]);return A?u.jsxs("div",{ref:C,className:"flex-1 relative",onKeyDown:le,tabIndex:0,children:[u.jsxs(Sg,{nodes:W,edges:_,onNodesChange:k,onEdgesChange:R,onConnect:M,onConnectStart:$,onConnectEnd:Q,onPaneClick:Z,onPaneContextMenu:J,onNodeContextMenu:oe,onEdgeContextMenu:ie,onViewportChange:se,nodeTypes:$C,edgeTypes:zC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(Cg,{gap:16,size:1}),u.jsx(jg,{})]}),u.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[u.jsx("h2",{className:"font-medium text-foreground",children:A.name}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.modules.length," module",A.modules.length!==1?"s":"",","," ",(A.moduleConnections??[]).length," connection",(A.moduleConnections??[]).length!==1?"s":""]})]}),u.jsx(Dg,{}),u.jsx(LC,{open:I!==null,onClose:()=>T(null),candidates:(I==null?void 0:I.candidates)??[],onSelect:X})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:u.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function FC(){return u.jsx(Xl,{children:u.jsx(RC,{})})}function HC(){const t=xe(o=>o.theme),r=xe(o=>o.setTheme);L.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),L.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const c=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",c)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function VC(){const t=xe(o=>o.language),r=xe(o=>o.setLanguage);L.useEffect(()=>{const o=localStorage.getItem("x4-planner-language");o&&r(o)},[r]),L.useEffect(()=>{localStorage.setItem("x4-planner-language",t)},[t])}function BC(){HC(),VC();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=Oe(),c=xe(f=>f.viewMode),d=Ol(f=>f.gameMode);return L.useEffect(()=>{qt.getState().initializePlanManager(),Bk(f=>qt.getState().saveCurrentPlan(f)),Pg(d).then(f=>{i(f),ce.getState().recompute()}).catch(f=>l(f.message))},[i,l,d]),r?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):u.jsx(Xl,{children:u.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[u.jsx(Kk,{}),u.jsx(rC,{}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c==="network"?u.jsx(AC,{}):u.jsx(FC,{}),u.jsx(nC,{})]}),u.jsx(iC,{}),t&&u.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]})]})})}y0.createRoot(document.getElementById("root")).render(u.jsx(L.StrictMode,{children:u.jsx(BC,{})}));
