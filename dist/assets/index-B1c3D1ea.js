(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=o(l);fetch(l.href,c)}})();function zm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hu={exports:{}},ps={},Vu={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function c0(){if(pp)return je;pp=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),m=Symbol.iterator;function y(b){return b===null||typeof b!="object"?null:(b=m&&b[m]||b["@@iterator"],typeof b=="function"?b:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function I(b,O,Z){this.props=b,this.context=O,this.refs=j,this.updater=Z||w}I.prototype.isReactComponent={},I.prototype.setState=function(b,O){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,O,"setState")},I.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function C(){}C.prototype=I.prototype;function T(b,O,Z){this.props=b,this.context=O,this.refs=j,this.updater=Z||w}var k=T.prototype=new C;k.constructor=T,S(k,I.prototype),k.isPureReactComponent=!0;var D=Array.isArray,P=Object.prototype.hasOwnProperty,$={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function K(b,O,Z){var q,ne={},oe=null,ue=null;if(O!=null)for(q in O.ref!==void 0&&(ue=O.ref),O.key!==void 0&&(oe=""+O.key),O)P.call(O,q)&&!W.hasOwnProperty(q)&&(ne[q]=O[q]);var re=arguments.length-2;if(re===1)ne.children=Z;else if(1<re){for(var ce=Array(re),ve=0;ve<re;ve++)ce[ve]=arguments[ve+2];ne.children=ce}if(b&&b.defaultProps)for(q in re=b.defaultProps,re)ne[q]===void 0&&(ne[q]=re[q]);return{$$typeof:t,type:b,key:oe,ref:ue,props:ne,_owner:$.current}}function Q(b,O){return{$$typeof:t,type:b.type,key:O,ref:b.ref,props:b.props,_owner:b._owner}}function V(b){return typeof b=="object"&&b!==null&&b.$$typeof===t}function z(b){var O={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(Z){return O[Z]})}var U=/\/+/g;function X(b,O){return typeof b=="object"&&b!==null&&b.key!=null?z(""+b.key):O.toString(36)}function A(b,O,Z,q,ne){var oe=typeof b;(oe==="undefined"||oe==="boolean")&&(b=null);var ue=!1;if(b===null)ue=!0;else switch(oe){case"string":case"number":ue=!0;break;case"object":switch(b.$$typeof){case t:case r:ue=!0}}if(ue)return ue=b,ne=ne(ue),b=q===""?"."+X(ue,0):q,D(ne)?(Z="",b!=null&&(Z=b.replace(U,"$&/")+"/"),A(ne,O,Z,"",function(ve){return ve})):ne!=null&&(V(ne)&&(ne=Q(ne,Z+(!ne.key||ue&&ue.key===ne.key?"":(""+ne.key).replace(U,"$&/")+"/")+b)),O.push(ne)),1;if(ue=0,q=q===""?".":q+":",D(b))for(var re=0;re<b.length;re++){oe=b[re];var ce=q+X(oe,re);ue+=A(oe,O,Z,ce,ne)}else if(ce=y(b),typeof ce=="function")for(b=ce.call(b),re=0;!(oe=b.next()).done;)oe=oe.value,ce=q+X(oe,re++),ue+=A(oe,O,Z,ce,ne);else if(oe==="object")throw O=String(b),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ue}function H(b,O,Z){if(b==null)return b;var q=[],ne=0;return A(b,q,"","",function(oe){return O.call(Z,oe,ne++)}),q}function F(b){if(b._status===-1){var O=b._result;O=O(),O.then(function(Z){(b._status===0||b._status===-1)&&(b._status=1,b._result=Z)},function(Z){(b._status===0||b._status===-1)&&(b._status=2,b._result=Z)}),b._status===-1&&(b._status=0,b._result=O)}if(b._status===1)return b._result.default;throw b._result}var _={current:null},M={transition:null},N={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:M,ReactCurrentOwner:$};function R(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:H,forEach:function(b,O,Z){H(b,function(){O.apply(this,arguments)},Z)},count:function(b){var O=0;return H(b,function(){O++}),O},toArray:function(b){return H(b,function(O){return O})||[]},only:function(b){if(!V(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},je.Component=I,je.Fragment=o,je.Profiler=l,je.PureComponent=T,je.StrictMode=i,je.Suspense=g,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,je.act=R,je.cloneElement=function(b,O,Z){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var q=S({},b.props),ne=b.key,oe=b.ref,ue=b._owner;if(O!=null){if(O.ref!==void 0&&(oe=O.ref,ue=$.current),O.key!==void 0&&(ne=""+O.key),b.type&&b.type.defaultProps)var re=b.type.defaultProps;for(ce in O)P.call(O,ce)&&!W.hasOwnProperty(ce)&&(q[ce]=O[ce]===void 0&&re!==void 0?re[ce]:O[ce])}var ce=arguments.length-2;if(ce===1)q.children=Z;else if(1<ce){re=Array(ce);for(var ve=0;ve<ce;ve++)re[ve]=arguments[ve+2];q.children=re}return{$$typeof:t,type:b.type,key:ne,ref:oe,props:q,_owner:ue}},je.createContext=function(b){return b={$$typeof:d,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:c,_context:b},b.Consumer=b},je.createElement=K,je.createFactory=function(b){var O=K.bind(null,b);return O.type=b,O},je.createRef=function(){return{current:null}},je.forwardRef=function(b){return{$$typeof:f,render:b}},je.isValidElement=V,je.lazy=function(b){return{$$typeof:x,_payload:{_status:-1,_result:b},_init:F}},je.memo=function(b,O){return{$$typeof:h,type:b,compare:O===void 0?null:O}},je.startTransition=function(b){var O=M.transition;M.transition={};try{b()}finally{M.transition=O}},je.unstable_act=R,je.useCallback=function(b,O){return _.current.useCallback(b,O)},je.useContext=function(b){return _.current.useContext(b)},je.useDebugValue=function(){},je.useDeferredValue=function(b){return _.current.useDeferredValue(b)},je.useEffect=function(b,O){return _.current.useEffect(b,O)},je.useId=function(){return _.current.useId()},je.useImperativeHandle=function(b,O,Z){return _.current.useImperativeHandle(b,O,Z)},je.useInsertionEffect=function(b,O){return _.current.useInsertionEffect(b,O)},je.useLayoutEffect=function(b,O){return _.current.useLayoutEffect(b,O)},je.useMemo=function(b,O){return _.current.useMemo(b,O)},je.useReducer=function(b,O,Z){return _.current.useReducer(b,O,Z)},je.useRef=function(b){return _.current.useRef(b)},je.useState=function(b){return _.current.useState(b)},je.useSyncExternalStore=function(b,O,Z){return _.current.useSyncExternalStore(b,O,Z)},je.useTransition=function(){return _.current.useTransition()},je.version="18.3.1",je}var mp;function Ds(){return mp||(mp=1,Vu.exports=c0()),Vu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function d0(){if(hp)return ps;hp=1;var t=Ds(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,g,h){var x,m={},y=null,w=null;h!==void 0&&(y=""+h),g.key!==void 0&&(y=""+g.key),g.ref!==void 0&&(w=g.ref);for(x in g)i.call(g,x)&&!c.hasOwnProperty(x)&&(m[x]=g[x]);if(f&&f.defaultProps)for(x in g=f.defaultProps,g)m[x]===void 0&&(m[x]=g[x]);return{$$typeof:r,type:f,key:y,ref:w,props:m,_owner:l.current}}return ps.Fragment=o,ps.jsx=d,ps.jsxs=d,ps}var gp;function f0(){return gp||(gp=1,Hu.exports=d0()),Hu.exports}var u=f0(),L=Ds();const xs=zm(L);var ol={},Bu={exports:{}},mt={},Wu={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function p0(){return xp||(xp=1,(function(t){function r(M,N){var R=M.length;M.push(N);e:for(;0<R;){var b=R-1>>>1,O=M[b];if(0<l(O,N))M[b]=N,M[R]=O,R=b;else break e}}function o(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var N=M[0],R=M.pop();if(R!==N){M[0]=R;e:for(var b=0,O=M.length,Z=O>>>1;b<Z;){var q=2*(b+1)-1,ne=M[q],oe=q+1,ue=M[oe];if(0>l(ne,R))oe<O&&0>l(ue,ne)?(M[b]=ue,M[oe]=R,b=oe):(M[b]=ne,M[q]=R,b=q);else if(oe<O&&0>l(ue,R))M[b]=ue,M[oe]=R,b=oe;else break e}}return N}function l(M,N){var R=M.sortIndex-N.sortIndex;return R!==0?R:M.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var g=[],h=[],x=1,m=null,y=3,w=!1,S=!1,j=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var N=o(h);N!==null;){if(N.callback===null)i(h);else if(N.startTime<=M)i(h),N.sortIndex=N.expirationTime,r(g,N);else break;N=o(h)}}function D(M){if(j=!1,k(M),!S)if(o(g)!==null)S=!0,F(P);else{var N=o(h);N!==null&&_(D,N.startTime-M)}}function P(M,N){S=!1,j&&(j=!1,C(K),K=-1),w=!0;var R=y;try{for(k(N),m=o(g);m!==null&&(!(m.expirationTime>N)||M&&!z());){var b=m.callback;if(typeof b=="function"){m.callback=null,y=m.priorityLevel;var O=b(m.expirationTime<=N);N=t.unstable_now(),typeof O=="function"?m.callback=O:m===o(g)&&i(g),k(N)}else i(g);m=o(g)}if(m!==null)var Z=!0;else{var q=o(h);q!==null&&_(D,q.startTime-N),Z=!1}return Z}finally{m=null,y=R,w=!1}}var $=!1,W=null,K=-1,Q=5,V=-1;function z(){return!(t.unstable_now()-V<Q)}function U(){if(W!==null){var M=t.unstable_now();V=M;var N=!0;try{N=W(!0,M)}finally{N?X():($=!1,W=null)}}else $=!1}var X;if(typeof T=="function")X=function(){T(U)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,H=A.port2;A.port1.onmessage=U,X=function(){H.postMessage(null)}}else X=function(){I(U,0)};function F(M){W=M,$||($=!0,X())}function _(M,N){K=I(function(){M(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,F(P))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return o(g)},t.unstable_next=function(M){switch(y){case 1:case 2:case 3:var N=3;break;default:N=y}var R=y;y=N;try{return M()}finally{y=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,N){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var R=y;y=M;try{return N()}finally{y=R}},t.unstable_scheduleCallback=function(M,N,R){var b=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?b+R:b):R=b,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=R+O,M={id:x++,callback:N,priorityLevel:M,startTime:R,expirationTime:O,sortIndex:-1},R>b?(M.sortIndex=R,r(h,M),o(g)===null&&M===o(h)&&(j?(C(K),K=-1):j=!0,_(D,R-b))):(M.sortIndex=O,r(g,M),S||w||(S=!0,F(P))),M},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(M){var N=y;return function(){var R=y;y=N;try{return M.apply(this,arguments)}finally{y=R}}}})(Uu)),Uu}var yp;function m0(){return yp||(yp=1,Wu.exports=p0()),Wu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function h0(){if(vp)return mt;vp=1;var t=Ds(),r=m0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},m={};function y(e){return g.call(m,e)?!0:g.call(x,e)?!1:h.test(e)?m[e]=!0:(x[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function j(e,n,s,a,p,v,E){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=E}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new j(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];I[n]=new j(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new j(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new j(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new j(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new j(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new j(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new j(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new j(e,5,!1,e.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(C,T);I[n]=new j(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(C,T);I[n]=new j(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(C,T);I[n]=new j(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new j(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new j(e,1,!1,e.toLowerCase(),null,!0,!0)});function k(e,n,s,a){var p=I.hasOwnProperty(n)?I[n]:null;(p!==null?p.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,p,a)&&(s=null),a||p===null?y(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):p.mustUseProperty?e[p.propertyName]=s===null?p.type===3?!1:"":s:(n=p.attributeName,a=p.attributeNamespace,s===null?e.removeAttribute(n):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),$=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),M=Symbol.iterator;function N(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var R=Object.assign,b;function O(e){if(b===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);b=n&&n[1]||""}return`
`+b+e}var Z=!1;function q(e,n){if(!e||Z)return"";Z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(te){var a=te}Reflect.construct(e,[],n)}else{try{n.call()}catch(te){a=te}e.call(n.prototype)}else{try{throw Error()}catch(te){a=te}e()}}catch(te){if(te&&a&&typeof te.stack=="string"){for(var p=te.stack.split(`
`),v=a.stack.split(`
`),E=p.length-1,B=v.length-1;1<=E&&0<=B&&p[E]!==v[B];)B--;for(;1<=E&&0<=B;E--,B--)if(p[E]!==v[B]){if(E!==1||B!==1)do if(E--,B--,0>B||p[E]!==v[B]){var Y=`
`+p[E].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=E&&0<=B);break}}}finally{Z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?O(e):""}function ne(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1),e;case 11:return e=q(e.type.render,!1),e;case 1:return e=q(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case $:return"Portal";case Q:return"Profiler";case K:return"StrictMode";case X:return"Suspense";case A:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case V:return(e._context.displayName||"Context")+".Provider";case U:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case F:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}function ue(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function re(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ce(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ve(e){var n=ce(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(E){a=""+E,v.call(this,E)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ce(e){e._valueTracker||(e._valueTracker=ve(e))}function ke(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=ce(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function we(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function be(e,n){var s=n.checked;return R({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Te(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=re(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ee(e,n){n=n.checked,n!=null&&k(e,"checked",n,!1)}function Xe(e,n){Ee(e,n);var s=re(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?xt(e,n.type,s):n.hasOwnProperty("defaultValue")&&xt(e,n.type,re(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Lt(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function xt(e,n,s){(n!=="number"||we(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var yt=Array.isArray;function Et(e,n,s,a){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&a&&(e[s].defaultSelected=!0)}else{for(s=""+re(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function an(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return R({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function In(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(yt(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:re(s)}}function Dr(e,n){var s=re(n.value),a=re(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function qn(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function un(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cn(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?un(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zn,Fs=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,p){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,p)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Zn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function dn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kl=["Webkit","ms","Moz","O"];Object.keys(Jn).forEach(function(e){Kl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Jn[n]=Jn[e]})});function Hs(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Jn.hasOwnProperty(e)&&Jn[e]?(""+n).trim():n+"px"}function Vs(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,p=Hs(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,p):e[s]=p}}var Ql=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(e,n){if(n){if(Ql[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Co(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function jo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bo=null,jn=null,bn=null;function Bs(e){if(e=Zo(e)){if(typeof bo!="function")throw Error(o(280));var n=e.stateNode;n&&(n=vi(n),bo(e.stateNode,e.type,n))}}function Ws(e){jn?bn?bn.push(e):bn=[e]:jn=e}function Us(){if(jn){var e=jn,n=bn;if(bn=jn=null,Bs(e),n)for(e=0;e<n.length;e++)Bs(n[e])}}function Ys(e,n){return e(n)}function Xs(){}var Eo=!1;function Gs(e,n,s){if(Eo)return e(n,s);Eo=!0;try{return Ys(e,n,s)}finally{Eo=!1,(jn!==null||bn!==null)&&(Xs(),Us())}}function er(e,n){var s=e.stateNode;if(s===null)return null;var a=vi(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var _o=!1;if(f)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){_o=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{_o=!1}function ql(e,n,s,a,p,v,E,B,Y){var te=Array.prototype.slice.call(arguments,3);try{n.apply(s,te)}catch(ie){this.onError(ie)}}var nr=!1,Tr=null,Or=!1,Mo=null,Zl={onError:function(e){nr=!0,Tr=e}};function Jl(e,n,s,a,p,v,E,B,Y){nr=!1,Tr=null,ql.apply(Zl,arguments)}function ea(e,n,s,a,p,v,E,B,Y){if(Jl.apply(this,arguments),nr){if(nr){var te=Tr;nr=!1,Tr=null}else throw Error(o(198));Or||(Or=!0,Mo=te)}}function Qt(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Po(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Do(e){if(Qt(e)!==e)throw Error(o(188))}function ta(e){var n=e.alternate;if(!n){if(n=Qt(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var p=s.return;if(p===null)break;var v=p.alternate;if(v===null){if(a=p.return,a!==null){s=a;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===s)return Do(p),e;if(v===a)return Do(p),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=p,a=v;else{for(var E=!1,B=p.child;B;){if(B===s){E=!0,s=p,a=v;break}if(B===a){E=!0,a=p,s=v;break}B=B.sibling}if(!E){for(B=v.child;B;){if(B===s){E=!0,s=v,a=p;break}if(B===a){E=!0,a=v,s=p;break}B=B.sibling}if(!E)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Ks(e){return e=ta(e),e!==null?Qs(e):null}function Qs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Qs(e);if(n!==null)return n;e=e.sibling}return null}var qs=r.unstable_scheduleCallback,Zs=r.unstable_cancelCallback,na=r.unstable_shouldYield,Js=r.unstable_requestPaint,Ve=r.unstable_now,ra=r.unstable_getCurrentPriorityLevel,To=r.unstable_ImmediatePriority,ei=r.unstable_UserBlockingPriority,Ar=r.unstable_NormalPriority,oa=r.unstable_LowPriority,ti=r.unstable_IdlePriority,rr=null,_t=null;function sa(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(rr,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:aa,ia=Math.log,la=Math.LN2;function aa(e){return e>>>=0,e===0?32:31-(ia(e)/la|0)|0}var Lr=64,$r=4194304;function qt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,p=e.suspendedLanes,v=e.pingedLanes,E=s&268435455;if(E!==0){var B=E&~p;B!==0?a=qt(B):(v&=E,v!==0&&(a=qt(v)))}else E=s&~p,E!==0?a=qt(E):v!==0&&(a=qt(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&p)===0&&(p=a&-a,v=n&-n,p>=v||p===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-vt(n),p=1<<s,a|=e[s],n&=~p;return a}function ni(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ua(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,v=e.pendingLanes;0<v;){var E=31-vt(v),B=1<<E,Y=p[E];Y===-1?((B&s)===0||(B&a)!==0)&&(p[E]=ni(B,n)):Y<=n&&(e.expiredLanes|=B),v&=~B}}function Oo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rr(){var e=Lr;return Lr<<=1,(Lr&4194240)===0&&(Lr=64),e}function Ao(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function or(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-vt(n),e[n]=s}function ri(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var p=31-vt(s),v=1<<p;n[p]=0,a[p]=-1,e[p]=-1,s&=~v}}function ca(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-vt(s),p=1<<a;p&n|e[a]&n&&(e[a]|=n),s&=~p}}var De=0;function Wc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Uc,da,Yc,Xc,Gc,fa=!1,oi=[],En=null,_n=null,Mn=null,Lo=new Map,$o=new Map,Pn=[],Dg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(e,n){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Lo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$o.delete(n.pointerId)}}function zo(e,n,s,a,p,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[p]},n!==null&&(n=Zo(n),n!==null&&da(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Tg(e,n,s,a,p){switch(n){case"focusin":return En=zo(En,e,n,s,a,p),!0;case"dragenter":return _n=zo(_n,e,n,s,a,p),!0;case"mouseover":return Mn=zo(Mn,e,n,s,a,p),!0;case"pointerover":var v=p.pointerId;return Lo.set(v,zo(Lo.get(v)||null,e,n,s,a,p)),!0;case"gotpointercapture":return v=p.pointerId,$o.set(v,zo($o.get(v)||null,e,n,s,a,p)),!0}return!1}function Qc(e){var n=sr(e.target);if(n!==null){var s=Qt(n);if(s!==null){if(n=s.tag,n===13){if(n=Po(s),n!==null){e.blockedOn=n,Gc(e.priority,function(){Yc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function si(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=ma(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);Io=a,s.target.dispatchEvent(a),Io=null}else return n=Zo(s),n!==null&&da(n),e.blockedOn=s,!1;n.shift()}return!0}function qc(e,n,s){si(e)&&s.delete(n)}function Og(){fa=!1,En!==null&&si(En)&&(En=null),_n!==null&&si(_n)&&(_n=null),Mn!==null&&si(Mn)&&(Mn=null),Lo.forEach(qc),$o.forEach(qc)}function Ro(e,n){e.blockedOn===n&&(e.blockedOn=null,fa||(fa=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Og)))}function Fo(e){function n(p){return Ro(p,e)}if(0<oi.length){Ro(oi[0],e);for(var s=1;s<oi.length;s++){var a=oi[s];a.blockedOn===e&&(a.blockedOn=null)}}for(En!==null&&Ro(En,e),_n!==null&&Ro(_n,e),Mn!==null&&Ro(Mn,e),Lo.forEach(n),$o.forEach(n),s=0;s<Pn.length;s++)a=Pn[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Pn.length&&(s=Pn[0],s.blockedOn===null);)Qc(s),s.blockedOn===null&&Pn.shift()}var Fr=D.ReactCurrentBatchConfig,ii=!0;function Ag(e,n,s,a){var p=De,v=Fr.transition;Fr.transition=null;try{De=1,pa(e,n,s,a)}finally{De=p,Fr.transition=v}}function Lg(e,n,s,a){var p=De,v=Fr.transition;Fr.transition=null;try{De=4,pa(e,n,s,a)}finally{De=p,Fr.transition=v}}function pa(e,n,s,a){if(ii){var p=ma(e,n,s,a);if(p===null)Pa(e,n,a,li,s),Kc(e,a);else if(Tg(p,e,n,s,a))a.stopPropagation();else if(Kc(e,a),n&4&&-1<Dg.indexOf(e)){for(;p!==null;){var v=Zo(p);if(v!==null&&Uc(v),v=ma(e,n,s,a),v===null&&Pa(e,n,a,li,s),v===p)break;p=v}p!==null&&a.stopPropagation()}else Pa(e,n,a,null,s)}}var li=null;function ma(e,n,s,a){if(li=null,e=jo(a),e=sr(e),e!==null)if(n=Qt(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Po(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return li=e,null}function Zc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ra()){case To:return 1;case ei:return 4;case Ar:case oa:return 16;case ti:return 536870912;default:return 16}default:return 16}}var Dn=null,ha=null,ai=null;function Jc(){if(ai)return ai;var e,n=ha,s=n.length,a,p="value"in Dn?Dn.value:Dn.textContent,v=p.length;for(e=0;e<s&&n[e]===p[e];e++);var E=s-e;for(a=1;a<=E&&n[s-a]===p[v-a];a++);return ai=p.slice(e,1<a?1-a:void 0)}function ui(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function ed(){return!1}function wt(e){function n(s,a,p,v,E){this._reactName=s,this._targetInst=p,this.type=a,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(s=e[B],this[B]=s?s(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ci:ed,this.isPropagationStopped=ed,this}return R(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),n}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=wt(Hr),Ho=R({},Hr,{view:0,detail:0}),$g=wt(Ho),xa,ya,Vo,di=R({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vo&&(Vo&&e.type==="mousemove"?(xa=e.screenX-Vo.screenX,ya=e.screenY-Vo.screenY):ya=xa=0,Vo=e),xa)},movementY:function(e){return"movementY"in e?e.movementY:ya}}),td=wt(di),zg=R({},di,{dataTransfer:0}),Rg=wt(zg),Fg=R({},Ho,{relatedTarget:0}),va=wt(Fg),Hg=R({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vg=wt(Hg),Bg=R({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wg=wt(Bg),Ug=R({},Hr,{data:0}),nd=wt(Ug),Yg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Gg[e])?!!n[e]:!1}function wa(){return Kg}var Qg=R({},Ho,{key:function(e){if(e.key){var n=Yg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(e){return e.type==="keypress"?ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qg=wt(Qg),Zg=R({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=wt(Zg),Jg=R({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),ex=wt(Jg),tx=R({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nx=wt(tx),rx=R({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ox=wt(rx),sx=[9,13,27,32],Sa=f&&"CompositionEvent"in window,Bo=null;f&&"documentMode"in document&&(Bo=document.documentMode);var ix=f&&"TextEvent"in window&&!Bo,od=f&&(!Sa||Bo&&8<Bo&&11>=Bo),sd=" ",id=!1;function ld(e,n){switch(e){case"keyup":return sx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ad(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function lx(e,n){switch(e){case"compositionend":return ad(n);case"keypress":return n.which!==32?null:(id=!0,sd);case"textInput":return e=n.data,e===sd&&id?null:e;default:return null}}function ax(e,n){if(Vr)return e==="compositionend"||!Sa&&ld(e,n)?(e=Jc(),ai=ha=Dn=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return od&&n.locale!=="ko"?null:n.data;default:return null}}var ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ux[e.type]:n==="textarea"}function cd(e,n,s,a){Ws(a),n=gi(n,"onChange"),0<n.length&&(s=new ga("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Wo=null,Uo=null;function cx(e){Ed(e,0)}function fi(e){var n=Xr(e);if(ke(n))return e}function dx(e,n){if(e==="change")return n}var dd=!1;if(f){var Na;if(f){var ka="oninput"in document;if(!ka){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),ka=typeof fd.oninput=="function"}Na=ka}else Na=!1;dd=Na&&(!document.documentMode||9<document.documentMode)}function pd(){Wo&&(Wo.detachEvent("onpropertychange",md),Uo=Wo=null)}function md(e){if(e.propertyName==="value"&&fi(Uo)){var n=[];cd(n,Uo,e,jo(e)),Gs(cx,n)}}function fx(e,n,s){e==="focusin"?(pd(),Wo=n,Uo=s,Wo.attachEvent("onpropertychange",md)):e==="focusout"&&pd()}function px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fi(Uo)}function mx(e,n){if(e==="click")return fi(n)}function hx(e,n){if(e==="input"||e==="change")return fi(n)}function gx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var $t=typeof Object.is=="function"?Object.is:gx;function Yo(e,n){if($t(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var p=s[a];if(!g.call(n,p)||!$t(e[p],n[p]))return!1}return!0}function hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gd(e,n){var s=hd(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hd(s)}}function xd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?xd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function yd(){for(var e=window,n=we();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=we(e.document)}return n}function Ca(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function xx(e){var n=yd(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&xd(s.ownerDocument.documentElement,s)){if(a!==null&&Ca(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var p=s.textContent.length,v=Math.min(a.start,p);a=a.end===void 0?v:Math.min(a.end,p),!e.extend&&v>a&&(p=a,a=v,v=p),p=gd(s,v);var E=gd(s,a);p&&E&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==E.node||e.focusOffset!==E.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(E.node,E.offset)):(n.setEnd(E.node,E.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yx=f&&"documentMode"in document&&11>=document.documentMode,Br=null,Ia=null,Xo=null,ja=!1;function vd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ja||Br==null||Br!==we(a)||(a=Br,"selectionStart"in a&&Ca(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Xo&&Yo(Xo,a)||(Xo=a,a=gi(Ia,"onSelect"),0<a.length&&(n=new ga("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Br)))}function pi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Wr={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionend:pi("Transition","TransitionEnd")},ba={},wd={};f&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function mi(e){if(ba[e])return ba[e];if(!Wr[e])return e;var n=Wr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in wd)return ba[e]=n[s];return e}var Sd=mi("animationend"),Nd=mi("animationiteration"),kd=mi("animationstart"),Cd=mi("transitionend"),Id=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,n){Id.set(e,n),c(n,[e])}for(var Ea=0;Ea<jd.length;Ea++){var _a=jd[Ea],vx=_a.toLowerCase(),wx=_a[0].toUpperCase()+_a.slice(1);Tn(vx,"on"+wx)}Tn(Sd,"onAnimationEnd"),Tn(Nd,"onAnimationIteration"),Tn(kd,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(Cd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function bd(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,ea(a,n,void 0,e),e.currentTarget=null}function Ed(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],p=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var E=a.length-1;0<=E;E--){var B=a[E],Y=B.instance,te=B.currentTarget;if(B=B.listener,Y!==v&&p.isPropagationStopped())break e;bd(p,B,te),v=Y}else for(E=0;E<a.length;E++){if(B=a[E],Y=B.instance,te=B.currentTarget,B=B.listener,Y!==v&&p.isPropagationStopped())break e;bd(p,B,te),v=Y}}}if(Or)throw e=Mo,Or=!1,Mo=null,e}function $e(e,n){var s=n[$a];s===void 0&&(s=n[$a]=new Set);var a=e+"__bubble";s.has(a)||(_d(n,e,2,!1),s.add(a))}function Ma(e,n,s){var a=0;n&&(a|=4),_d(s,e,a,n)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[hi]){e[hi]=!0,i.forEach(function(s){s!=="selectionchange"&&(Sx.has(s)||Ma(s,!1,e),Ma(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[hi]||(n[hi]=!0,Ma("selectionchange",!1,n))}}function _d(e,n,s,a){switch(Zc(n)){case 1:var p=Ag;break;case 4:p=Lg;break;default:p=pa}s=p.bind(null,n,s,e),p=void 0,!_o||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function Pa(e,n,s,a,p){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var E=a.tag;if(E===3||E===4){var B=a.stateNode.containerInfo;if(B===p||B.nodeType===8&&B.parentNode===p)break;if(E===4)for(E=a.return;E!==null;){var Y=E.tag;if((Y===3||Y===4)&&(Y=E.stateNode.containerInfo,Y===p||Y.nodeType===8&&Y.parentNode===p))return;E=E.return}for(;B!==null;){if(E=sr(B),E===null)return;if(Y=E.tag,Y===5||Y===6){a=v=E;continue e}B=B.parentNode}}a=a.return}Gs(function(){var te=v,ie=jo(s),ae=[];e:{var se=Id.get(e);if(se!==void 0){var fe=ga,he=e;switch(e){case"keypress":if(ui(s)===0)break e;case"keydown":case"keyup":fe=qg;break;case"focusin":he="focus",fe=va;break;case"focusout":he="blur",fe=va;break;case"beforeblur":case"afterblur":fe=va;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=ex;break;case Sd:case Nd:case kd:fe=Vg;break;case Cd:fe=nx;break;case"scroll":fe=$g;break;case"wheel":fe=ox;break;case"copy":case"cut":case"paste":fe=Wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=rd}var ge=(n&4)!==0,Ye=!ge&&e==="scroll",J=ge?se!==null?se+"Capture":null:se;ge=[];for(var G=te,ee;G!==null;){ee=G;var de=ee.stateNode;if(ee.tag===5&&de!==null&&(ee=de,J!==null&&(de=er(G,J),de!=null&&ge.push(Qo(G,de,ee)))),Ye)break;G=G.return}0<ge.length&&(se=new fe(se,he,null,s,ie),ae.push({event:se,listeners:ge}))}}if((n&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",se&&s!==Io&&(he=s.relatedTarget||s.fromElement)&&(sr(he)||he[fn]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(he=s.relatedTarget||s.toElement,fe=te,he=he?sr(he):null,he!==null&&(Ye=Qt(he),he!==Ye||he.tag!==5&&he.tag!==6)&&(he=null)):(fe=null,he=te),fe!==he)){if(ge=td,de="onMouseLeave",J="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(ge=rd,de="onPointerLeave",J="onPointerEnter",G="pointer"),Ye=fe==null?se:Xr(fe),ee=he==null?se:Xr(he),se=new ge(de,G+"leave",fe,s,ie),se.target=Ye,se.relatedTarget=ee,de=null,sr(ie)===te&&(ge=new ge(J,G+"enter",he,s,ie),ge.target=ee,ge.relatedTarget=Ye,de=ge),Ye=de,fe&&he)t:{for(ge=fe,J=he,G=0,ee=ge;ee;ee=Ur(ee))G++;for(ee=0,de=J;de;de=Ur(de))ee++;for(;0<G-ee;)ge=Ur(ge),G--;for(;0<ee-G;)J=Ur(J),ee--;for(;G--;){if(ge===J||J!==null&&ge===J.alternate)break t;ge=Ur(ge),J=Ur(J)}ge=null}else ge=null;fe!==null&&Md(ae,se,fe,ge,!1),he!==null&&Ye!==null&&Md(ae,Ye,he,ge,!0)}}e:{if(se=te?Xr(te):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var xe=dx;else if(ud(se))if(dd)xe=hx;else{xe=px;var Se=fx}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(xe=mx);if(xe&&(xe=xe(e,te))){cd(ae,xe,s,ie);break e}Se&&Se(e,se,te),e==="focusout"&&(Se=se._wrapperState)&&Se.controlled&&se.type==="number"&&xt(se,"number",se.value)}switch(Se=te?Xr(te):window,e){case"focusin":(ud(Se)||Se.contentEditable==="true")&&(Br=Se,Ia=te,Xo=null);break;case"focusout":Xo=Ia=Br=null;break;case"mousedown":ja=!0;break;case"contextmenu":case"mouseup":case"dragend":ja=!1,vd(ae,s,ie);break;case"selectionchange":if(yx)break;case"keydown":case"keyup":vd(ae,s,ie)}var Ne;if(Sa)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Vr?ld(e,s)&&(Ie="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ie="onCompositionStart");Ie&&(od&&s.locale!=="ko"&&(Vr||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Vr&&(Ne=Jc()):(Dn=ie,ha="value"in Dn?Dn.value:Dn.textContent,Vr=!0)),Se=gi(te,Ie),0<Se.length&&(Ie=new nd(Ie,e,null,s,ie),ae.push({event:Ie,listeners:Se}),Ne?Ie.data=Ne:(Ne=ad(s),Ne!==null&&(Ie.data=Ne)))),(Ne=ix?lx(e,s):ax(e,s))&&(te=gi(te,"onBeforeInput"),0<te.length&&(ie=new nd("onBeforeInput","beforeinput",null,s,ie),ae.push({event:ie,listeners:te}),ie.data=Ne))}Ed(ae,n)})}function Qo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function gi(e,n){for(var s=n+"Capture",a=[];e!==null;){var p=e,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=er(e,s),v!=null&&a.unshift(Qo(e,v,p)),v=er(e,n),v!=null&&a.push(Qo(e,v,p))),e=e.return}return a}function Ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Md(e,n,s,a,p){for(var v=n._reactName,E=[];s!==null&&s!==a;){var B=s,Y=B.alternate,te=B.stateNode;if(Y!==null&&Y===a)break;B.tag===5&&te!==null&&(B=te,p?(Y=er(s,v),Y!=null&&E.unshift(Qo(s,Y,B))):p||(Y=er(s,v),Y!=null&&E.push(Qo(s,Y,B)))),s=s.return}E.length!==0&&e.push({event:n,listeners:E})}var Nx=/\r\n?/g,kx=/\u0000|\uFFFD/g;function Pd(e){return(typeof e=="string"?e:""+e).replace(Nx,`
`).replace(kx,"")}function xi(e,n,s){if(n=Pd(n),Pd(e)!==n&&s)throw Error(o(425))}function yi(){}var Da=null,Ta=null;function Oa(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Aa=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,Ix=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(jx)}:Aa;function jx(e){setTimeout(function(){throw e})}function La(e,n){var s=n,a=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(a===0){e.removeChild(p),Fo(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=p}while(s);Fo(n)}function On(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Td(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Yr,qo="__reactProps$"+Yr,fn="__reactContainer$"+Yr,$a="__reactEvents$"+Yr,bx="__reactListeners$"+Yr,Ex="__reactHandles$"+Yr;function sr(e){var n=e[Zt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[fn]||s[Zt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Td(e);e!==null;){if(s=e[Zt])return s;e=Td(e)}return n}e=s,s=e.parentNode}return null}function Zo(e){return e=e[Zt]||e[fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function vi(e){return e[qo]||null}var za=[],Gr=-1;function An(e){return{current:e}}function ze(e){0>Gr||(e.current=za[Gr],za[Gr]=null,Gr--)}function Ae(e,n){Gr++,za[Gr]=e.current,e.current=n}var Ln={},rt=An(Ln),ut=An(!1),ir=Ln;function Kr(e,n){var s=e.type.contextTypes;if(!s)return Ln;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in s)p[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=p),p}function ct(e){return e=e.childContextTypes,e!=null}function wi(){ze(ut),ze(rt)}function Od(e,n,s){if(rt.current!==Ln)throw Error(o(168));Ae(rt,n),Ae(ut,s)}function Ad(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var p in a)if(!(p in n))throw Error(o(108,ue(e)||"Unknown",p));return R({},s,a)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ln,ir=rt.current,Ae(rt,e),Ae(ut,ut.current),!0}function Ld(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=Ad(e,n,ir),a.__reactInternalMemoizedMergedChildContext=e,ze(ut),ze(rt),Ae(rt,e)):ze(ut),Ae(ut,s)}var pn=null,Ni=!1,Ra=!1;function $d(e){pn===null?pn=[e]:pn.push(e)}function _x(e){Ni=!0,$d(e)}function $n(){if(!Ra&&pn!==null){Ra=!0;var e=0,n=De;try{var s=pn;for(De=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}pn=null,Ni=!1}catch(p){throw pn!==null&&(pn=pn.slice(e+1)),qs(To,$n),p}finally{De=n,Ra=!1}}return null}var Qr=[],qr=0,ki=null,Ci=0,Mt=[],Pt=0,lr=null,mn=1,hn="";function ar(e,n){Qr[qr++]=Ci,Qr[qr++]=ki,ki=e,Ci=n}function zd(e,n,s){Mt[Pt++]=mn,Mt[Pt++]=hn,Mt[Pt++]=lr,lr=e;var a=mn;e=hn;var p=32-vt(a)-1;a&=~(1<<p),s+=1;var v=32-vt(n)+p;if(30<v){var E=p-p%5;v=(a&(1<<E)-1).toString(32),a>>=E,p-=E,mn=1<<32-vt(n)+p|s<<p|a,hn=v+e}else mn=1<<v|s<<p|a,hn=e}function Fa(e){e.return!==null&&(ar(e,1),zd(e,1,0))}function Ha(e){for(;e===ki;)ki=Qr[--qr],Qr[qr]=null,Ci=Qr[--qr],Qr[qr]=null;for(;e===lr;)lr=Mt[--Pt],Mt[Pt]=null,hn=Mt[--Pt],Mt[Pt]=null,mn=Mt[--Pt],Mt[Pt]=null}var St=null,Nt=null,Re=!1,zt=null;function Rd(e,n){var s=At(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Fd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,St=e,Nt=On(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,St=e,Nt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=lr!==null?{id:mn,overflow:hn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=At(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,St=e,Nt=null,!0):!1;default:return!1}}function Va(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ba(e){if(Re){var n=Nt;if(n){var s=n;if(!Fd(e,n)){if(Va(e))throw Error(o(418));n=On(s.nextSibling);var a=St;n&&Fd(e,n)?Rd(a,s):(e.flags=e.flags&-4097|2,Re=!1,St=e)}}else{if(Va(e))throw Error(o(418));e.flags=e.flags&-4097|2,Re=!1,St=e}}}function Hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Ii(e){if(e!==St)return!1;if(!Re)return Hd(e),Re=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Oa(e.type,e.memoizedProps)),n&&(n=Nt)){if(Va(e))throw Vd(),Error(o(418));for(;n;)Rd(e,n),n=On(n.nextSibling)}if(Hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Nt=On(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Nt=null}}else Nt=St?On(e.stateNode.nextSibling):null;return!0}function Vd(){for(var e=Nt;e;)e=On(e.nextSibling)}function Zr(){Nt=St=null,Re=!1}function Wa(e){zt===null?zt=[e]:zt.push(e)}var Mx=D.ReactCurrentBatchConfig;function Jo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var p=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(E){var B=p.refs;E===null?delete B[v]:B[v]=E},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function ji(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Bd(e){var n=e._init;return n(e._payload)}function Wd(e){function n(J,G){if(e){var ee=J.deletions;ee===null?(J.deletions=[G],J.flags|=16):ee.push(G)}}function s(J,G){if(!e)return null;for(;G!==null;)n(J,G),G=G.sibling;return null}function a(J,G){for(J=new Map;G!==null;)G.key!==null?J.set(G.key,G):J.set(G.index,G),G=G.sibling;return J}function p(J,G){return J=Un(J,G),J.index=0,J.sibling=null,J}function v(J,G,ee){return J.index=ee,e?(ee=J.alternate,ee!==null?(ee=ee.index,ee<G?(J.flags|=2,G):ee):(J.flags|=2,G)):(J.flags|=1048576,G)}function E(J){return e&&J.alternate===null&&(J.flags|=2),J}function B(J,G,ee,de){return G===null||G.tag!==6?(G=Au(ee,J.mode,de),G.return=J,G):(G=p(G,ee),G.return=J,G)}function Y(J,G,ee,de){var xe=ee.type;return xe===W?ie(J,G,ee.props.children,de,ee.key):G!==null&&(G.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===F&&Bd(xe)===G.type)?(de=p(G,ee.props),de.ref=Jo(J,G,ee),de.return=J,de):(de=Qi(ee.type,ee.key,ee.props,null,J.mode,de),de.ref=Jo(J,G,ee),de.return=J,de)}function te(J,G,ee,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==ee.containerInfo||G.stateNode.implementation!==ee.implementation?(G=Lu(ee,J.mode,de),G.return=J,G):(G=p(G,ee.children||[]),G.return=J,G)}function ie(J,G,ee,de,xe){return G===null||G.tag!==7?(G=gr(ee,J.mode,de,xe),G.return=J,G):(G=p(G,ee),G.return=J,G)}function ae(J,G,ee){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Au(""+G,J.mode,ee),G.return=J,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case P:return ee=Qi(G.type,G.key,G.props,null,J.mode,ee),ee.ref=Jo(J,null,G),ee.return=J,ee;case $:return G=Lu(G,J.mode,ee),G.return=J,G;case F:var de=G._init;return ae(J,de(G._payload),ee)}if(yt(G)||N(G))return G=gr(G,J.mode,ee,null),G.return=J,G;ji(J,G)}return null}function se(J,G,ee,de){var xe=G!==null?G.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return xe!==null?null:B(J,G,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case P:return ee.key===xe?Y(J,G,ee,de):null;case $:return ee.key===xe?te(J,G,ee,de):null;case F:return xe=ee._init,se(J,G,xe(ee._payload),de)}if(yt(ee)||N(ee))return xe!==null?null:ie(J,G,ee,de,null);ji(J,ee)}return null}function fe(J,G,ee,de,xe){if(typeof de=="string"&&de!==""||typeof de=="number")return J=J.get(ee)||null,B(G,J,""+de,xe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case P:return J=J.get(de.key===null?ee:de.key)||null,Y(G,J,de,xe);case $:return J=J.get(de.key===null?ee:de.key)||null,te(G,J,de,xe);case F:var Se=de._init;return fe(J,G,ee,Se(de._payload),xe)}if(yt(de)||N(de))return J=J.get(ee)||null,ie(G,J,de,xe,null);ji(G,de)}return null}function he(J,G,ee,de){for(var xe=null,Se=null,Ne=G,Ie=G=0,et=null;Ne!==null&&Ie<ee.length;Ie++){Ne.index>Ie?(et=Ne,Ne=null):et=Ne.sibling;var Pe=se(J,Ne,ee[Ie],de);if(Pe===null){Ne===null&&(Ne=et);break}e&&Ne&&Pe.alternate===null&&n(J,Ne),G=v(Pe,G,Ie),Se===null?xe=Pe:Se.sibling=Pe,Se=Pe,Ne=et}if(Ie===ee.length)return s(J,Ne),Re&&ar(J,Ie),xe;if(Ne===null){for(;Ie<ee.length;Ie++)Ne=ae(J,ee[Ie],de),Ne!==null&&(G=v(Ne,G,Ie),Se===null?xe=Ne:Se.sibling=Ne,Se=Ne);return Re&&ar(J,Ie),xe}for(Ne=a(J,Ne);Ie<ee.length;Ie++)et=fe(Ne,J,Ie,ee[Ie],de),et!==null&&(e&&et.alternate!==null&&Ne.delete(et.key===null?Ie:et.key),G=v(et,G,Ie),Se===null?xe=et:Se.sibling=et,Se=et);return e&&Ne.forEach(function(Yn){return n(J,Yn)}),Re&&ar(J,Ie),xe}function ge(J,G,ee,de){var xe=N(ee);if(typeof xe!="function")throw Error(o(150));if(ee=xe.call(ee),ee==null)throw Error(o(151));for(var Se=xe=null,Ne=G,Ie=G=0,et=null,Pe=ee.next();Ne!==null&&!Pe.done;Ie++,Pe=ee.next()){Ne.index>Ie?(et=Ne,Ne=null):et=Ne.sibling;var Yn=se(J,Ne,Pe.value,de);if(Yn===null){Ne===null&&(Ne=et);break}e&&Ne&&Yn.alternate===null&&n(J,Ne),G=v(Yn,G,Ie),Se===null?xe=Yn:Se.sibling=Yn,Se=Yn,Ne=et}if(Pe.done)return s(J,Ne),Re&&ar(J,Ie),xe;if(Ne===null){for(;!Pe.done;Ie++,Pe=ee.next())Pe=ae(J,Pe.value,de),Pe!==null&&(G=v(Pe,G,Ie),Se===null?xe=Pe:Se.sibling=Pe,Se=Pe);return Re&&ar(J,Ie),xe}for(Ne=a(J,Ne);!Pe.done;Ie++,Pe=ee.next())Pe=fe(Ne,J,Ie,Pe.value,de),Pe!==null&&(e&&Pe.alternate!==null&&Ne.delete(Pe.key===null?Ie:Pe.key),G=v(Pe,G,Ie),Se===null?xe=Pe:Se.sibling=Pe,Se=Pe);return e&&Ne.forEach(function(u0){return n(J,u0)}),Re&&ar(J,Ie),xe}function Ye(J,G,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===W&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case P:e:{for(var xe=ee.key,Se=G;Se!==null;){if(Se.key===xe){if(xe=ee.type,xe===W){if(Se.tag===7){s(J,Se.sibling),G=p(Se,ee.props.children),G.return=J,J=G;break e}}else if(Se.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===F&&Bd(xe)===Se.type){s(J,Se.sibling),G=p(Se,ee.props),G.ref=Jo(J,Se,ee),G.return=J,J=G;break e}s(J,Se);break}else n(J,Se);Se=Se.sibling}ee.type===W?(G=gr(ee.props.children,J.mode,de,ee.key),G.return=J,J=G):(de=Qi(ee.type,ee.key,ee.props,null,J.mode,de),de.ref=Jo(J,G,ee),de.return=J,J=de)}return E(J);case $:e:{for(Se=ee.key;G!==null;){if(G.key===Se)if(G.tag===4&&G.stateNode.containerInfo===ee.containerInfo&&G.stateNode.implementation===ee.implementation){s(J,G.sibling),G=p(G,ee.children||[]),G.return=J,J=G;break e}else{s(J,G);break}else n(J,G);G=G.sibling}G=Lu(ee,J.mode,de),G.return=J,J=G}return E(J);case F:return Se=ee._init,Ye(J,G,Se(ee._payload),de)}if(yt(ee))return he(J,G,ee,de);if(N(ee))return ge(J,G,ee,de);ji(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,G!==null&&G.tag===6?(s(J,G.sibling),G=p(G,ee),G.return=J,J=G):(s(J,G),G=Au(ee,J.mode,de),G.return=J,J=G),E(J)):s(J,G)}return Ye}var Jr=Wd(!0),Ud=Wd(!1),bi=An(null),Ei=null,eo=null,Ua=null;function Ya(){Ua=eo=Ei=null}function Xa(e){var n=bi.current;ze(bi),e._currentValue=n}function Ga(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function to(e,n){Ei=e,Ua=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(dt=!0),e.firstContext=null)}function Dt(e){var n=e._currentValue;if(Ua!==e)if(e={context:e,memoizedValue:n,next:null},eo===null){if(Ei===null)throw Error(o(308));eo=e,Ei.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return n}var ur=null;function Ka(e){ur===null?ur=[e]:ur.push(e)}function Yd(e,n,s,a){var p=n.interleaved;return p===null?(s.next=s,Ka(n)):(s.next=p.next,p.next=s),n.interleaved=s,gn(e,a)}function gn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var zn=!1;function Qa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Rn(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Me&2)!==0){var p=a.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),a.pending=n,gn(e,s)}return p=a.interleaved,p===null?(n.next=n,Ka(a)):(n.next=p.next,p.next=n),a.interleaved=n,gn(e,s)}function _i(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,ca(e,s)}}function Gd(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var p=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?p=v=E:v=v.next=E,s=s.next}while(s!==null);v===null?p=v=n:v=v.next=n}else p=v=n;s={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Mi(e,n,s,a){var p=e.updateQueue;zn=!1;var v=p.firstBaseUpdate,E=p.lastBaseUpdate,B=p.shared.pending;if(B!==null){p.shared.pending=null;var Y=B,te=Y.next;Y.next=null,E===null?v=te:E.next=te,E=Y;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,B=ie.lastBaseUpdate,B!==E&&(B===null?ie.firstBaseUpdate=te:B.next=te,ie.lastBaseUpdate=Y))}if(v!==null){var ae=p.baseState;E=0,ie=te=Y=null,B=v;do{var se=B.lane,fe=B.eventTime;if((a&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var he=e,ge=B;switch(se=n,fe=s,ge.tag){case 1:if(he=ge.payload,typeof he=="function"){ae=he.call(fe,ae,se);break e}ae=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ge.payload,se=typeof he=="function"?he.call(fe,ae,se):he,se==null)break e;ae=R({},ae,se);break e;case 2:zn=!0}}B.callback!==null&&B.lane!==0&&(e.flags|=64,se=p.effects,se===null?p.effects=[B]:se.push(B))}else fe={eventTime:fe,lane:se,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ie===null?(te=ie=fe,Y=ae):ie=ie.next=fe,E|=se;if(B=B.next,B===null){if(B=p.shared.pending,B===null)break;se=B,B=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(ie===null&&(Y=ae),p.baseState=Y,p.firstBaseUpdate=te,p.lastBaseUpdate=ie,n=p.shared.interleaved,n!==null){p=n;do E|=p.lane,p=p.next;while(p!==n)}else v===null&&(p.shared.lanes=0);fr|=E,e.lanes=E,e.memoizedState=ae}}function Kd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],p=a.callback;if(p!==null){if(a.callback=null,a=s,typeof p!="function")throw Error(o(191,p));p.call(a)}}}var es={},Jt=An(es),ts=An(es),ns=An(es);function cr(e){if(e===es)throw Error(o(174));return e}function qa(e,n){switch(Ae(ns,n),Ae(ts,e),Ae(Jt,es),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:cn(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=cn(n,e)}ze(Jt),Ae(Jt,n)}function no(){ze(Jt),ze(ts),ze(ns)}function Qd(e){cr(ns.current);var n=cr(Jt.current),s=cn(n,e.type);n!==s&&(Ae(ts,e),Ae(Jt,s))}function Za(e){ts.current===e&&(ze(Jt),ze(ts))}var Be=An(0);function Pi(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ja=[];function eu(){for(var e=0;e<Ja.length;e++)Ja[e]._workInProgressVersionPrimary=null;Ja.length=0}var Di=D.ReactCurrentDispatcher,tu=D.ReactCurrentBatchConfig,dr=0,We=null,Qe=null,Ze=null,Ti=!1,rs=!1,os=0,Px=0;function ot(){throw Error(o(321))}function nu(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!$t(e[s],n[s]))return!1;return!0}function ru(e,n,s,a,p,v){if(dr=v,We=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Di.current=e===null||e.memoizedState===null?Ax:Lx,e=s(a,p),rs){v=0;do{if(rs=!1,os=0,25<=v)throw Error(o(301));v+=1,Ze=Qe=null,n.updateQueue=null,Di.current=$x,e=s(a,p)}while(rs)}if(Di.current=Li,n=Qe!==null&&Qe.next!==null,dr=0,Ze=Qe=We=null,Ti=!1,n)throw Error(o(300));return e}function ou(){var e=os!==0;return os=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?We.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Tt(){if(Qe===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var n=Ze===null?We.memoizedState:Ze.next;if(n!==null)Ze=n,Qe=e;else{if(e===null)throw Error(o(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Ze===null?We.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function ss(e,n){return typeof n=="function"?n(e):n}function su(e){var n=Tt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Qe,p=a.baseQueue,v=s.pending;if(v!==null){if(p!==null){var E=p.next;p.next=v.next,v.next=E}a.baseQueue=p=v,s.pending=null}if(p!==null){v=p.next,a=a.baseState;var B=E=null,Y=null,te=v;do{var ie=te.lane;if((dr&ie)===ie)Y!==null&&(Y=Y.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),a=te.hasEagerState?te.eagerState:e(a,te.action);else{var ae={lane:ie,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};Y===null?(B=Y=ae,E=a):Y=Y.next=ae,We.lanes|=ie,fr|=ie}te=te.next}while(te!==null&&te!==v);Y===null?E=a:Y.next=B,$t(a,n.memoizedState)||(dt=!0),n.memoizedState=a,n.baseState=E,n.baseQueue=Y,s.lastRenderedState=a}if(e=s.interleaved,e!==null){p=e;do v=p.lane,We.lanes|=v,fr|=v,p=p.next;while(p!==e)}else p===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function iu(e){var n=Tt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,p=s.pending,v=n.memoizedState;if(p!==null){s.pending=null;var E=p=p.next;do v=e(v,E.action),E=E.next;while(E!==p);$t(v,n.memoizedState)||(dt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function qd(){}function Zd(e,n){var s=We,a=Tt(),p=n(),v=!$t(a.memoizedState,p);if(v&&(a.memoizedState=p,dt=!0),a=a.queue,lu(tf.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||Ze!==null&&Ze.memoizedState.tag&1){if(s.flags|=2048,is(9,ef.bind(null,s,a,p,n),void 0,null),Je===null)throw Error(o(349));(dr&30)!==0||Jd(s,n,p)}return p}function Jd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=We.updateQueue,n===null?(n={lastEffect:null,stores:null},We.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function ef(e,n,s,a){n.value=s,n.getSnapshot=a,nf(n)&&rf(e)}function tf(e,n,s){return s(function(){nf(n)&&rf(e)})}function nf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!$t(e,s)}catch{return!0}}function rf(e){var n=gn(e,1);n!==null&&Vt(n,e,1,-1)}function of(e){var n=en();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},n.queue=e,e=e.dispatch=Ox.bind(null,We,e),[n.memoizedState,e]}function is(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=We.updateQueue,n===null?(n={lastEffect:null,stores:null},We.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function sf(){return Tt().memoizedState}function Oi(e,n,s,a){var p=en();We.flags|=e,p.memoizedState=is(1|n,s,void 0,a===void 0?null:a)}function Ai(e,n,s,a){var p=Tt();a=a===void 0?null:a;var v=void 0;if(Qe!==null){var E=Qe.memoizedState;if(v=E.destroy,a!==null&&nu(a,E.deps)){p.memoizedState=is(n,s,v,a);return}}We.flags|=e,p.memoizedState=is(1|n,s,v,a)}function lf(e,n){return Oi(8390656,8,e,n)}function lu(e,n){return Ai(2048,8,e,n)}function af(e,n){return Ai(4,2,e,n)}function uf(e,n){return Ai(4,4,e,n)}function cf(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function df(e,n,s){return s=s!=null?s.concat([e]):null,Ai(4,4,cf.bind(null,n,e),s)}function au(){}function ff(e,n){var s=Tt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&nu(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function pf(e,n){var s=Tt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&nu(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function mf(e,n,s){return(dr&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s):($t(s,n)||(s=Rr(),We.lanes|=s,fr|=s,e.baseState=!0),n)}function Dx(e,n){var s=De;De=s!==0&&4>s?s:4,e(!0);var a=tu.transition;tu.transition={};try{e(!1),n()}finally{De=s,tu.transition=a}}function hf(){return Tt().memoizedState}function Tx(e,n,s){var a=Bn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},gf(e))xf(n,s);else if(s=Yd(e,n,s,a),s!==null){var p=at();Vt(s,e,a,p),yf(s,n,a)}}function Ox(e,n,s){var a=Bn(e),p={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(gf(e))xf(n,p);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var E=n.lastRenderedState,B=v(E,s);if(p.hasEagerState=!0,p.eagerState=B,$t(B,E)){var Y=n.interleaved;Y===null?(p.next=p,Ka(n)):(p.next=Y.next,Y.next=p),n.interleaved=p;return}}catch{}finally{}s=Yd(e,n,p,a),s!==null&&(p=at(),Vt(s,e,a,p),yf(s,n,a))}}function gf(e){var n=e.alternate;return e===We||n!==null&&n===We}function xf(e,n){rs=Ti=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function yf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,ca(e,s)}}var Li={readContext:Dt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Ax={readContext:Dt,useCallback:function(e,n){return en().memoizedState=[e,n===void 0?null:n],e},useContext:Dt,useEffect:lf,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Oi(4194308,4,cf.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Oi(4194308,4,e,n)},useInsertionEffect:function(e,n){return Oi(4,2,e,n)},useMemo:function(e,n){var s=en();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=en();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Tx.bind(null,We,e),[a.memoizedState,e]},useRef:function(e){var n=en();return e={current:e},n.memoizedState=e},useState:of,useDebugValue:au,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=of(!1),n=e[0];return e=Dx.bind(null,e[1]),en().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=We,p=en();if(Re){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Je===null)throw Error(o(349));(dr&30)!==0||Jd(a,n,s)}p.memoizedState=s;var v={value:s,getSnapshot:n};return p.queue=v,lf(tf.bind(null,a,v,e),[e]),a.flags|=2048,is(9,ef.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=en(),n=Je.identifierPrefix;if(Re){var s=hn,a=mn;s=(a&~(1<<32-vt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=os++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Px++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Lx={readContext:Dt,useCallback:ff,useContext:Dt,useEffect:lu,useImperativeHandle:df,useInsertionEffect:af,useLayoutEffect:uf,useMemo:pf,useReducer:su,useRef:sf,useState:function(){return su(ss)},useDebugValue:au,useDeferredValue:function(e){var n=Tt();return mf(n,Qe.memoizedState,e)},useTransition:function(){var e=su(ss)[0],n=Tt().memoizedState;return[e,n]},useMutableSource:qd,useSyncExternalStore:Zd,useId:hf,unstable_isNewReconciler:!1},$x={readContext:Dt,useCallback:ff,useContext:Dt,useEffect:lu,useImperativeHandle:df,useInsertionEffect:af,useLayoutEffect:uf,useMemo:pf,useReducer:iu,useRef:sf,useState:function(){return iu(ss)},useDebugValue:au,useDeferredValue:function(e){var n=Tt();return Qe===null?n.memoizedState=e:mf(n,Qe.memoizedState,e)},useTransition:function(){var e=iu(ss)[0],n=Tt().memoizedState;return[e,n]},useMutableSource:qd,useSyncExternalStore:Zd,useId:hf,unstable_isNewReconciler:!1};function Rt(e,n){if(e&&e.defaultProps){n=R({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function uu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:R({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $i={isMounted:function(e){return(e=e._reactInternals)?Qt(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=at(),p=Bn(e),v=xn(a,p);v.payload=n,s!=null&&(v.callback=s),n=Rn(e,v,p),n!==null&&(Vt(n,e,p,a),_i(n,e,p))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=at(),p=Bn(e),v=xn(a,p);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=Rn(e,v,p),n!==null&&(Vt(n,e,p,a),_i(n,e,p))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=at(),a=Bn(e),p=xn(s,a);p.tag=2,n!=null&&(p.callback=n),n=Rn(e,p,a),n!==null&&(Vt(n,e,a,s),_i(n,e,a))}};function vf(e,n,s,a,p,v,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,E):n.prototype&&n.prototype.isPureReactComponent?!Yo(s,a)||!Yo(p,v):!0}function wf(e,n,s){var a=!1,p=Ln,v=n.contextType;return typeof v=="object"&&v!==null?v=Dt(v):(p=ct(n)?ir:rt.current,a=n.contextTypes,v=(a=a!=null)?Kr(e,p):Ln),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=$i,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=v),n}function Sf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&$i.enqueueReplaceState(n,n.state,null)}function cu(e,n,s,a){var p=e.stateNode;p.props=s,p.state=e.memoizedState,p.refs={},Qa(e);var v=n.contextType;typeof v=="object"&&v!==null?p.context=Dt(v):(v=ct(n)?ir:rt.current,p.context=Kr(e,v)),p.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(uu(e,n,v,s),p.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&$i.enqueueReplaceState(p,p.state,null),Mi(e,s,p,a),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function ro(e,n){try{var s="",a=n;do s+=ne(a),a=a.return;while(a);var p=s}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:p,digest:null}}function du(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function fu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var zx=typeof WeakMap=="function"?WeakMap:Map;function Nf(e,n,s){s=xn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){Wi||(Wi=!0,bu=a),fu(e,n)},s}function kf(e,n,s){s=xn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var p=n.value;s.payload=function(){return a(p)},s.callback=function(){fu(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){fu(e,n),typeof a!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var E=n.stack;this.componentDidCatch(n.value,{componentStack:E!==null?E:""})}),s}function Cf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new zx;var p=new Set;a.set(n,p)}else p=a.get(n),p===void 0&&(p=new Set,a.set(n,p));p.has(s)||(p.add(s),e=Zx.bind(null,e,n,s),n.then(e,e))}function If(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function jf(e,n,s,a,p){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=xn(-1,1),n.tag=2,Rn(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var Rx=D.ReactCurrentOwner,dt=!1;function lt(e,n,s,a){n.child=e===null?Ud(n,null,s,a):Jr(n,e.child,s,a)}function bf(e,n,s,a,p){s=s.render;var v=n.ref;return to(n,p),a=ru(e,n,s,a,v,p),s=ou(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,yn(e,n,p)):(Re&&s&&Fa(n),n.flags|=1,lt(e,n,a,p),n.child)}function Ef(e,n,s,a,p){if(e===null){var v=s.type;return typeof v=="function"&&!Ou(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,_f(e,n,v,a,p)):(e=Qi(s.type,null,a,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&p)===0){var E=v.memoizedProps;if(s=s.compare,s=s!==null?s:Yo,s(E,a)&&e.ref===n.ref)return yn(e,n,p)}return n.flags|=1,e=Un(v,a),e.ref=n.ref,e.return=n,n.child=e}function _f(e,n,s,a,p){if(e!==null){var v=e.memoizedProps;if(Yo(v,a)&&e.ref===n.ref)if(dt=!1,n.pendingProps=a=v,(e.lanes&p)!==0)(e.flags&131072)!==0&&(dt=!0);else return n.lanes=e.lanes,yn(e,n,p)}return pu(e,n,s,a,p)}function Mf(e,n,s){var a=n.pendingProps,p=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(so,kt),kt|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ae(so,kt),kt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Ae(so,kt),kt|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Ae(so,kt),kt|=a;return lt(e,n,p,s),n.child}function Pf(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function pu(e,n,s,a,p){var v=ct(s)?ir:rt.current;return v=Kr(n,v),to(n,p),s=ru(e,n,s,a,v,p),a=ou(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,yn(e,n,p)):(Re&&a&&Fa(n),n.flags|=1,lt(e,n,s,p),n.child)}function Df(e,n,s,a,p){if(ct(s)){var v=!0;Si(n)}else v=!1;if(to(n,p),n.stateNode===null)Ri(e,n),wf(n,s,a),cu(n,s,a,p),a=!0;else if(e===null){var E=n.stateNode,B=n.memoizedProps;E.props=B;var Y=E.context,te=s.contextType;typeof te=="object"&&te!==null?te=Dt(te):(te=ct(s)?ir:rt.current,te=Kr(n,te));var ie=s.getDerivedStateFromProps,ae=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function";ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B!==a||Y!==te)&&Sf(n,E,a,te),zn=!1;var se=n.memoizedState;E.state=se,Mi(n,a,E,p),Y=n.memoizedState,B!==a||se!==Y||ut.current||zn?(typeof ie=="function"&&(uu(n,s,ie,a),Y=n.memoizedState),(B=zn||vf(n,s,B,a,se,Y,te))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(n.flags|=4194308)):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=Y),E.props=a,E.state=Y,E.context=te,a=B):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{E=n.stateNode,Xd(e,n),B=n.memoizedProps,te=n.type===n.elementType?B:Rt(n.type,B),E.props=te,ae=n.pendingProps,se=E.context,Y=s.contextType,typeof Y=="object"&&Y!==null?Y=Dt(Y):(Y=ct(s)?ir:rt.current,Y=Kr(n,Y));var fe=s.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B!==ae||se!==Y)&&Sf(n,E,a,Y),zn=!1,se=n.memoizedState,E.state=se,Mi(n,a,E,p);var he=n.memoizedState;B!==ae||se!==he||ut.current||zn?(typeof fe=="function"&&(uu(n,s,fe,a),he=n.memoizedState),(te=zn||vf(n,s,te,a,se,he,Y)||!1)?(ie||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(a,he,Y),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(a,he,Y)),typeof E.componentDidUpdate=="function"&&(n.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=he),E.props=a,E.state=he,E.context=Y,a=te):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),a=!1)}return mu(e,n,s,a,v,p)}function mu(e,n,s,a,p,v){Pf(e,n);var E=(n.flags&128)!==0;if(!a&&!E)return p&&Ld(n,s,!1),yn(e,n,v);a=n.stateNode,Rx.current=n;var B=E&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&E?(n.child=Jr(n,e.child,null,v),n.child=Jr(n,null,B,v)):lt(e,n,B,v),n.memoizedState=a.state,p&&Ld(n,s,!0),n.child}function Tf(e){var n=e.stateNode;n.pendingContext?Od(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Od(e,n.context,!1),qa(e,n.containerInfo)}function Of(e,n,s,a,p){return Zr(),Wa(p),n.flags|=256,lt(e,n,s,a),n.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function gu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Af(e,n,s){var a=n.pendingProps,p=Be.current,v=!1,E=(n.flags&128)!==0,B;if((B=E)||(B=e!==null&&e.memoizedState===null?!1:(p&2)!==0),B?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),Ae(Be,p&1),e===null)return Ba(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(E=a.children,e=a.fallback,v?(a=n.mode,v=n.child,E={mode:"hidden",children:E},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=qi(E,a,0,null),e=gr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=gu(s),n.memoizedState=hu,e):xu(n,E));if(p=e.memoizedState,p!==null&&(B=p.dehydrated,B!==null))return Fx(e,n,E,a,B,p,s);if(v){v=a.fallback,E=n.mode,p=e.child,B=p.sibling;var Y={mode:"hidden",children:a.children};return(E&1)===0&&n.child!==p?(a=n.child,a.childLanes=0,a.pendingProps=Y,n.deletions=null):(a=Un(p,Y),a.subtreeFlags=p.subtreeFlags&14680064),B!==null?v=Un(B,v):(v=gr(v,E,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,E=e.child.memoizedState,E=E===null?gu(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=e.childLanes&~s,n.memoizedState=hu,a}return v=e.child,e=v.sibling,a=Un(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function xu(e,n){return n=qi({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function zi(e,n,s,a){return a!==null&&Wa(a),Jr(n,e.child,null,s),e=xu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Fx(e,n,s,a,p,v,E){if(s)return n.flags&256?(n.flags&=-257,a=du(Error(o(422))),zi(e,n,E,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,p=n.mode,a=qi({mode:"visible",children:a.children},p,0,null),v=gr(v,p,E,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&Jr(n,e.child,null,E),n.child.memoizedState=gu(E),n.memoizedState=hu,v);if((n.mode&1)===0)return zi(e,n,E,null);if(p.data==="$!"){if(a=p.nextSibling&&p.nextSibling.dataset,a)var B=a.dgst;return a=B,v=Error(o(419)),a=du(v,a,void 0),zi(e,n,E,a)}if(B=(E&e.childLanes)!==0,dt||B){if(a=Je,a!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(a.suspendedLanes|E))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,gn(e,p),Vt(a,e,p,-1))}return Tu(),a=du(Error(o(421))),zi(e,n,E,a)}return p.data==="$?"?(n.flags|=128,n.child=e.child,n=Jx.bind(null,e),p._reactRetry=n,null):(e=v.treeContext,Nt=On(p.nextSibling),St=n,Re=!0,zt=null,e!==null&&(Mt[Pt++]=mn,Mt[Pt++]=hn,Mt[Pt++]=lr,mn=e.id,hn=e.overflow,lr=n),n=xu(n,a.children),n.flags|=4096,n)}function Lf(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Ga(e.return,n,s)}function yu(e,n,s,a,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=p)}function $f(e,n,s){var a=n.pendingProps,p=a.revealOrder,v=a.tail;if(lt(e,n,a.children,s),a=Be.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lf(e,s,n);else if(e.tag===19)Lf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ae(Be,a),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&Pi(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),yu(n,!1,p,s,v);break;case"backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&Pi(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}yu(n,!0,s,null,v);break;case"together":yu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ri(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function yn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),fr|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Un(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Un(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Hx(e,n,s){switch(n.tag){case 3:Tf(n),Zr();break;case 5:Qd(n);break;case 1:ct(n.type)&&Si(n);break;case 4:qa(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,p=n.memoizedProps.value;Ae(bi,a._currentValue),a._currentValue=p;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Ae(Be,Be.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Af(e,n,s):(Ae(Be,Be.current&1),e=yn(e,n,s),e!==null?e.sibling:null);Ae(Be,Be.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return $f(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ae(Be,Be.current),a)break;return null;case 22:case 23:return n.lanes=0,Mf(e,n,s)}return yn(e,n,s)}var zf,vu,Rf,Ff;zf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},vu=function(){},Rf=function(e,n,s,a){var p=e.memoizedProps;if(p!==a){e=n.stateNode,cr(Jt.current);var v=null;switch(s){case"input":p=be(e,p),a=be(e,a),v=[];break;case"select":p=R({},p,{value:void 0}),a=R({},a,{value:void 0}),v=[];break;case"textarea":p=an(e,p),a=an(e,a),v=[];break;default:typeof p.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=yi)}ko(s,a);var E;s=null;for(te in p)if(!a.hasOwnProperty(te)&&p.hasOwnProperty(te)&&p[te]!=null)if(te==="style"){var B=p[te];for(E in B)B.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(l.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in a){var Y=a[te];if(B=p!=null?p[te]:void 0,a.hasOwnProperty(te)&&Y!==B&&(Y!=null||B!=null))if(te==="style")if(B){for(E in B)!B.hasOwnProperty(E)||Y&&Y.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in Y)Y.hasOwnProperty(E)&&B[E]!==Y[E]&&(s||(s={}),s[E]=Y[E])}else s||(v||(v=[]),v.push(te,s)),s=Y;else te==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,B=B?B.__html:void 0,Y!=null&&B!==Y&&(v=v||[]).push(te,Y)):te==="children"?typeof Y!="string"&&typeof Y!="number"||(v=v||[]).push(te,""+Y):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(l.hasOwnProperty(te)?(Y!=null&&te==="onScroll"&&$e("scroll",e),v||B===Y||(v=[])):(v=v||[]).push(te,Y))}s&&(v=v||[]).push("style",s);var te=v;(n.updateQueue=te)&&(n.flags|=4)}},Ff=function(e,n,s,a){s!==a&&(n.flags|=4)};function ls(e,n){if(!Re)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags&14680064,a|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function Vx(e,n,s){var a=n.pendingProps;switch(Ha(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(n),null;case 1:return ct(n.type)&&wi(),st(n),null;case 3:return a=n.stateNode,no(),ze(ut),ze(rt),eu(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ii(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,zt!==null&&(Mu(zt),zt=null))),vu(e,n),st(n),null;case 5:Za(n);var p=cr(ns.current);if(s=n.type,e!==null&&n.stateNode!=null)Rf(e,n,s,a,p),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return st(n),null}if(e=cr(Jt.current),Ii(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[Zt]=n,a[qo]=v,e=(n.mode&1)!==0,s){case"dialog":$e("cancel",a),$e("close",a);break;case"iframe":case"object":case"embed":$e("load",a);break;case"video":case"audio":for(p=0;p<Go.length;p++)$e(Go[p],a);break;case"source":$e("error",a);break;case"img":case"image":case"link":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"input":Te(a,v),$e("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},$e("invalid",a);break;case"textarea":In(a,v),$e("invalid",a)}ko(s,v),p=null;for(var E in v)if(v.hasOwnProperty(E)){var B=v[E];E==="children"?typeof B=="string"?a.textContent!==B&&(v.suppressHydrationWarning!==!0&&xi(a.textContent,B,e),p=["children",B]):typeof B=="number"&&a.textContent!==""+B&&(v.suppressHydrationWarning!==!0&&xi(a.textContent,B,e),p=["children",""+B]):l.hasOwnProperty(E)&&B!=null&&E==="onScroll"&&$e("scroll",a)}switch(s){case"input":Ce(a),Lt(a,v,!0);break;case"textarea":Ce(a),qn(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=yi)}a=p,n.updateQueue=a,a!==null&&(n.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=un(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=E.createElement(s,{is:a.is}):(e=E.createElement(s),s==="select"&&(E=e,a.multiple?E.multiple=!0:a.size&&(E.size=a.size))):e=E.createElementNS(e,s),e[Zt]=n,e[qo]=a,zf(e,n,!1,!1),n.stateNode=e;e:{switch(E=Co(s,a),s){case"dialog":$e("cancel",e),$e("close",e),p=a;break;case"iframe":case"object":case"embed":$e("load",e),p=a;break;case"video":case"audio":for(p=0;p<Go.length;p++)$e(Go[p],e);p=a;break;case"source":$e("error",e),p=a;break;case"img":case"image":case"link":$e("error",e),$e("load",e),p=a;break;case"details":$e("toggle",e),p=a;break;case"input":Te(e,a),p=be(e,a),$e("invalid",e);break;case"option":p=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},p=R({},a,{value:void 0}),$e("invalid",e);break;case"textarea":In(e,a),p=an(e,a),$e("invalid",e);break;default:p=a}ko(s,p),B=p;for(v in B)if(B.hasOwnProperty(v)){var Y=B[v];v==="style"?Vs(e,Y):v==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Fs(e,Y)):v==="children"?typeof Y=="string"?(s!=="textarea"||Y!=="")&&dn(e,Y):typeof Y=="number"&&dn(e,""+Y):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?Y!=null&&v==="onScroll"&&$e("scroll",e):Y!=null&&k(e,v,Y,E))}switch(s){case"input":Ce(e),Lt(e,a,!1);break;case"textarea":Ce(e),qn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+re(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?Et(e,!!a.multiple,v,!1):a.defaultValue!=null&&Et(e,!!a.multiple,a.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=yi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return st(n),null;case 6:if(e&&n.stateNode!=null)Ff(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=cr(ns.current),cr(Jt.current),Ii(n)){if(a=n.stateNode,s=n.memoizedProps,a[Zt]=n,(v=a.nodeValue!==s)&&(e=St,e!==null))switch(e.tag){case 3:xi(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xi(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Zt]=n,n.stateNode=a}return st(n),null;case 13:if(ze(Be),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&Nt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Vd(),Zr(),n.flags|=98560,v=!1;else if(v=Ii(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Zt]=n}else Zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;st(n),v=!1}else zt!==null&&(Mu(zt),zt=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Be.current&1)!==0?qe===0&&(qe=3):Tu())),n.updateQueue!==null&&(n.flags|=4),st(n),null);case 4:return no(),vu(e,n),e===null&&Ko(n.stateNode.containerInfo),st(n),null;case 10:return Xa(n.type._context),st(n),null;case 17:return ct(n.type)&&wi(),st(n),null;case 19:if(ze(Be),v=n.memoizedState,v===null)return st(n),null;if(a=(n.flags&128)!==0,E=v.rendering,E===null)if(a)ls(v,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(E=Pi(e),E!==null){for(n.flags|=128,ls(v,!1),a=E.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,e=E.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ae(Be,Be.current&1|2),n.child}e=e.sibling}v.tail!==null&&Ve()>io&&(n.flags|=128,a=!0,ls(v,!1),n.lanes=4194304)}else{if(!a)if(e=Pi(E),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ls(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!Re)return st(n),null}else 2*Ve()-v.renderingStartTime>io&&s!==1073741824&&(n.flags|=128,a=!0,ls(v,!1),n.lanes=4194304);v.isBackwards?(E.sibling=n.child,n.child=E):(s=v.last,s!==null?s.sibling=E:n.child=E,v.last=E)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Ve(),n.sibling=null,s=Be.current,Ae(Be,a?s&1|2:s&1),n):(st(n),null);case 22:case 23:return Du(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(kt&1073741824)!==0&&(st(n),n.subtreeFlags&6&&(n.flags|=8192)):st(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Bx(e,n){switch(Ha(n),n.tag){case 1:return ct(n.type)&&wi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return no(),ze(ut),ze(rt),eu(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Za(n),null;case 13:if(ze(Be),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Zr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ze(Be),null;case 4:return no(),null;case 10:return Xa(n.type._context),null;case 22:case 23:return Du(),null;case 24:return null;default:return null}}var Fi=!1,it=!1,Wx=typeof WeakSet=="function"?WeakSet:Set,me=null;function oo(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Ue(e,n,a)}else s.current=null}function wu(e,n,s){try{s()}catch(a){Ue(e,n,a)}}var Hf=!1;function Ux(e,n){if(Da=ii,e=yd(),Ca(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var p=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var E=0,B=-1,Y=-1,te=0,ie=0,ae=e,se=null;t:for(;;){for(var fe;ae!==s||p!==0&&ae.nodeType!==3||(B=E+p),ae!==v||a!==0&&ae.nodeType!==3||(Y=E+a),ae.nodeType===3&&(E+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)se=ae,ae=fe;for(;;){if(ae===e)break t;if(se===s&&++te===p&&(B=E),se===v&&++ie===a&&(Y=E),(fe=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=fe}s=B===-1||Y===-1?null:{start:B,end:Y}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ta={focusedElem:e,selectionRange:s},ii=!1,me=n;me!==null;)if(n=me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,me=e;else for(;me!==null;){n=me;try{var he=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var ge=he.memoizedProps,Ye=he.memoizedState,J=n.stateNode,G=J.getSnapshotBeforeUpdate(n.elementType===n.type?ge:Rt(n.type,ge),Ye);J.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(de){Ue(n,n.return,de)}if(e=n.sibling,e!==null){e.return=n.return,me=e;break}me=n.return}return he=Hf,Hf=!1,he}function as(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&e)===e){var v=p.destroy;p.destroy=void 0,v!==void 0&&wu(n,s,v)}p=p.next}while(p!==a)}}function Hi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function Su(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Vf(e){var n=e.alternate;n!==null&&(e.alternate=null,Vf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Zt],delete n[qo],delete n[$a],delete n[bx],delete n[Ex])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bf(e){return e.tag===5||e.tag===3||e.tag===4}function Wf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=yi));else if(a!==4&&(e=e.child,e!==null))for(Nu(e,n,s),e=e.sibling;e!==null;)Nu(e,n,s),e=e.sibling}function ku(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(ku(e,n,s),e=e.sibling;e!==null;)ku(e,n,s),e=e.sibling}var tt=null,Ft=!1;function Fn(e,n,s){for(s=s.child;s!==null;)Uf(e,n,s),s=s.sibling}function Uf(e,n,s){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(rr,s)}catch{}switch(s.tag){case 5:it||oo(s,n);case 6:var a=tt,p=Ft;tt=null,Fn(e,n,s),tt=a,Ft=p,tt!==null&&(Ft?(e=tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):tt.removeChild(s.stateNode));break;case 18:tt!==null&&(Ft?(e=tt,s=s.stateNode,e.nodeType===8?La(e.parentNode,s):e.nodeType===1&&La(e,s),Fo(e)):La(tt,s.stateNode));break;case 4:a=tt,p=Ft,tt=s.stateNode.containerInfo,Ft=!0,Fn(e,n,s),tt=a,Ft=p;break;case 0:case 11:case 14:case 15:if(!it&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){p=a=a.next;do{var v=p,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&wu(s,n,E),p=p.next}while(p!==a)}Fn(e,n,s);break;case 1:if(!it&&(oo(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(B){Ue(s,n,B)}Fn(e,n,s);break;case 21:Fn(e,n,s);break;case 22:s.mode&1?(it=(a=it)||s.memoizedState!==null,Fn(e,n,s),it=a):Fn(e,n,s);break;default:Fn(e,n,s)}}function Yf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Wx),n.forEach(function(a){var p=e0.bind(null,e,a);s.has(a)||(s.add(a),a.then(p,p))})}}function Ht(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var p=s[a];try{var v=e,E=n,B=E;e:for(;B!==null;){switch(B.tag){case 5:tt=B.stateNode,Ft=!1;break e;case 3:tt=B.stateNode.containerInfo,Ft=!0;break e;case 4:tt=B.stateNode.containerInfo,Ft=!0;break e}B=B.return}if(tt===null)throw Error(o(160));Uf(v,E,p),tt=null,Ft=!1;var Y=p.alternate;Y!==null&&(Y.return=null),p.return=null}catch(te){Ue(p,n,te)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Xf(n,e),n=n.sibling}function Xf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(n,e),tn(e),a&4){try{as(3,e,e.return),Hi(3,e)}catch(ge){Ue(e,e.return,ge)}try{as(5,e,e.return)}catch(ge){Ue(e,e.return,ge)}}break;case 1:Ht(n,e),tn(e),a&512&&s!==null&&oo(s,s.return);break;case 5:if(Ht(n,e),tn(e),a&512&&s!==null&&oo(s,s.return),e.flags&32){var p=e.stateNode;try{dn(p,"")}catch(ge){Ue(e,e.return,ge)}}if(a&4&&(p=e.stateNode,p!=null)){var v=e.memoizedProps,E=s!==null?s.memoizedProps:v,B=e.type,Y=e.updateQueue;if(e.updateQueue=null,Y!==null)try{B==="input"&&v.type==="radio"&&v.name!=null&&Ee(p,v),Co(B,E);var te=Co(B,v);for(E=0;E<Y.length;E+=2){var ie=Y[E],ae=Y[E+1];ie==="style"?Vs(p,ae):ie==="dangerouslySetInnerHTML"?Fs(p,ae):ie==="children"?dn(p,ae):k(p,ie,ae,te)}switch(B){case"input":Xe(p,v);break;case"textarea":Dr(p,v);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?Et(p,!!v.multiple,fe,!1):se!==!!v.multiple&&(v.defaultValue!=null?Et(p,!!v.multiple,v.defaultValue,!0):Et(p,!!v.multiple,v.multiple?[]:"",!1))}p[qo]=v}catch(ge){Ue(e,e.return,ge)}}break;case 6:if(Ht(n,e),tn(e),a&4){if(e.stateNode===null)throw Error(o(162));p=e.stateNode,v=e.memoizedProps;try{p.nodeValue=v}catch(ge){Ue(e,e.return,ge)}}break;case 3:if(Ht(n,e),tn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Fo(n.containerInfo)}catch(ge){Ue(e,e.return,ge)}break;case 4:Ht(n,e),tn(e);break;case 13:Ht(n,e),tn(e),p=e.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(ju=Ve())),a&4&&Yf(e);break;case 22:if(ie=s!==null&&s.memoizedState!==null,e.mode&1?(it=(te=it)||ie,Ht(n,e),it=te):Ht(n,e),tn(e),a&8192){if(te=e.memoizedState!==null,(e.stateNode.isHidden=te)&&!ie&&(e.mode&1)!==0)for(me=e,ie=e.child;ie!==null;){for(ae=me=ie;me!==null;){switch(se=me,fe=se.child,se.tag){case 0:case 11:case 14:case 15:as(4,se,se.return);break;case 1:oo(se,se.return);var he=se.stateNode;if(typeof he.componentWillUnmount=="function"){a=se,s=se.return;try{n=a,he.props=n.memoizedProps,he.state=n.memoizedState,he.componentWillUnmount()}catch(ge){Ue(a,s,ge)}}break;case 5:oo(se,se.return);break;case 22:if(se.memoizedState!==null){Qf(ae);continue}}fe!==null?(fe.return=se,me=fe):Qf(ae)}ie=ie.sibling}e:for(ie=null,ae=e;;){if(ae.tag===5){if(ie===null){ie=ae;try{p=ae.stateNode,te?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(B=ae.stateNode,Y=ae.memoizedProps.style,E=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,B.style.display=Hs("display",E))}catch(ge){Ue(e,e.return,ge)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=te?"":ae.memoizedProps}catch(ge){Ue(e,e.return,ge)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===e)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===e)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===e)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Ht(n,e),tn(e),a&4&&Yf(e);break;case 21:break;default:Ht(n,e),tn(e)}}function tn(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Bf(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var p=a.stateNode;a.flags&32&&(dn(p,""),a.flags&=-33);var v=Wf(e);ku(e,v,p);break;case 3:case 4:var E=a.stateNode.containerInfo,B=Wf(e);Nu(e,B,E);break;default:throw Error(o(161))}}catch(Y){Ue(e,e.return,Y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Yx(e,n,s){me=e,Gf(e)}function Gf(e,n,s){for(var a=(e.mode&1)!==0;me!==null;){var p=me,v=p.child;if(p.tag===22&&a){var E=p.memoizedState!==null||Fi;if(!E){var B=p.alternate,Y=B!==null&&B.memoizedState!==null||it;B=Fi;var te=it;if(Fi=E,(it=Y)&&!te)for(me=p;me!==null;)E=me,Y=E.child,E.tag===22&&E.memoizedState!==null?qf(p):Y!==null?(Y.return=E,me=Y):qf(p);for(;v!==null;)me=v,Gf(v),v=v.sibling;me=p,Fi=B,it=te}Kf(e)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,me=v):Kf(e)}}function Kf(e){for(;me!==null;){var n=me;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:it||Hi(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!it)if(s===null)a.componentDidMount();else{var p=n.elementType===n.type?s.memoizedProps:Rt(n.type,s.memoizedProps);a.componentDidUpdate(p,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Kd(n,v,a);break;case 3:var E=n.updateQueue;if(E!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Kd(n,E,s)}break;case 5:var B=n.stateNode;if(s===null&&n.flags&4){s=B;var Y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&s.focus();break;case"img":Y.src&&(s.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var te=n.alternate;if(te!==null){var ie=te.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&Fo(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}it||n.flags&512&&Su(n)}catch(se){Ue(n,n.return,se)}}if(n===e){me=null;break}if(s=n.sibling,s!==null){s.return=n.return,me=s;break}me=n.return}}function Qf(e){for(;me!==null;){var n=me;if(n===e){me=null;break}var s=n.sibling;if(s!==null){s.return=n.return,me=s;break}me=n.return}}function qf(e){for(;me!==null;){var n=me;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Hi(4,n)}catch(Y){Ue(n,s,Y)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var p=n.return;try{a.componentDidMount()}catch(Y){Ue(n,p,Y)}}var v=n.return;try{Su(n)}catch(Y){Ue(n,v,Y)}break;case 5:var E=n.return;try{Su(n)}catch(Y){Ue(n,E,Y)}}}catch(Y){Ue(n,n.return,Y)}if(n===e){me=null;break}var B=n.sibling;if(B!==null){B.return=n.return,me=B;break}me=n.return}}var Xx=Math.ceil,Vi=D.ReactCurrentDispatcher,Cu=D.ReactCurrentOwner,Ot=D.ReactCurrentBatchConfig,Me=0,Je=null,Ge=null,nt=0,kt=0,so=An(0),qe=0,us=null,fr=0,Bi=0,Iu=0,cs=null,ft=null,ju=0,io=1/0,vn=null,Wi=!1,bu=null,Hn=null,Ui=!1,Vn=null,Yi=0,ds=0,Eu=null,Xi=-1,Gi=0;function at(){return(Me&6)!==0?Ve():Xi!==-1?Xi:Xi=Ve()}function Bn(e){return(e.mode&1)===0?1:(Me&2)!==0&&nt!==0?nt&-nt:Mx.transition!==null?(Gi===0&&(Gi=Rr()),Gi):(e=De,e!==0||(e=window.event,e=e===void 0?16:Zc(e.type)),e)}function Vt(e,n,s,a){if(50<ds)throw ds=0,Eu=null,Error(o(185));or(e,s,a),((Me&2)===0||e!==Je)&&(e===Je&&((Me&2)===0&&(Bi|=s),qe===4&&Wn(e,nt)),pt(e,a),s===1&&Me===0&&(n.mode&1)===0&&(io=Ve()+500,Ni&&$n()))}function pt(e,n){var s=e.callbackNode;ua(e,n);var a=zr(e,e===Je?nt:0);if(a===0)s!==null&&Zs(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Zs(s),n===1)e.tag===0?_x(Jf.bind(null,e)):$d(Jf.bind(null,e)),Ix(function(){(Me&6)===0&&$n()}),s=null;else{switch(Wc(a)){case 1:s=To;break;case 4:s=ei;break;case 16:s=Ar;break;case 536870912:s=ti;break;default:s=Ar}s=lp(s,Zf.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Zf(e,n){if(Xi=-1,Gi=0,(Me&6)!==0)throw Error(o(327));var s=e.callbackNode;if(lo()&&e.callbackNode!==s)return null;var a=zr(e,e===Je?nt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=Ki(e,a);else{n=a;var p=Me;Me|=2;var v=tp();(Je!==e||nt!==n)&&(vn=null,io=Ve()+500,mr(e,n));do try{Qx();break}catch(B){ep(e,B)}while(!0);Ya(),Vi.current=v,Me=p,Ge!==null?n=0:(Je=null,nt=0,n=qe)}if(n!==0){if(n===2&&(p=Oo(e),p!==0&&(a=p,n=_u(e,p))),n===1)throw s=us,mr(e,0),Wn(e,a),pt(e,Ve()),s;if(n===6)Wn(e,a);else{if(p=e.current.alternate,(a&30)===0&&!Gx(p)&&(n=Ki(e,a),n===2&&(v=Oo(e),v!==0&&(a=v,n=_u(e,v))),n===1))throw s=us,mr(e,0),Wn(e,a),pt(e,Ve()),s;switch(e.finishedWork=p,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:hr(e,ft,vn);break;case 3:if(Wn(e,a),(a&130023424)===a&&(n=ju+500-Ve(),10<n)){if(zr(e,0)!==0)break;if(p=e.suspendedLanes,(p&a)!==a){at(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=Aa(hr.bind(null,e,ft,vn),n);break}hr(e,ft,vn);break;case 4:if(Wn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,p=-1;0<a;){var E=31-vt(a);v=1<<E,E=n[E],E>p&&(p=E),a&=~v}if(a=p,a=Ve()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Xx(a/1960))-a,10<a){e.timeoutHandle=Aa(hr.bind(null,e,ft,vn),a);break}hr(e,ft,vn);break;case 5:hr(e,ft,vn);break;default:throw Error(o(329))}}}return pt(e,Ve()),e.callbackNode===s?Zf.bind(null,e):null}function _u(e,n){var s=cs;return e.current.memoizedState.isDehydrated&&(mr(e,n).flags|=256),e=Ki(e,n),e!==2&&(n=ft,ft=s,n!==null&&Mu(n)),e}function Mu(e){ft===null?ft=e:ft.push.apply(ft,e)}function Gx(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var p=s[a],v=p.getSnapshot;p=p.value;try{if(!$t(v(),p))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Wn(e,n){for(n&=~Iu,n&=~Bi,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-vt(n),a=1<<s;e[s]=-1,n&=~a}}function Jf(e){if((Me&6)!==0)throw Error(o(327));lo();var n=zr(e,0);if((n&1)===0)return pt(e,Ve()),null;var s=Ki(e,n);if(e.tag!==0&&s===2){var a=Oo(e);a!==0&&(n=a,s=_u(e,a))}if(s===1)throw s=us,mr(e,0),Wn(e,n),pt(e,Ve()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,hr(e,ft,vn),pt(e,Ve()),null}function Pu(e,n){var s=Me;Me|=1;try{return e(n)}finally{Me=s,Me===0&&(io=Ve()+500,Ni&&$n())}}function pr(e){Vn!==null&&Vn.tag===0&&(Me&6)===0&&lo();var n=Me;Me|=1;var s=Ot.transition,a=De;try{if(Ot.transition=null,De=1,e)return e()}finally{De=a,Ot.transition=s,Me=n,(Me&6)===0&&$n()}}function Du(){kt=so.current,ze(so)}function mr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Cx(s)),Ge!==null)for(s=Ge.return;s!==null;){var a=s;switch(Ha(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wi();break;case 3:no(),ze(ut),ze(rt),eu();break;case 5:Za(a);break;case 4:no();break;case 13:ze(Be);break;case 19:ze(Be);break;case 10:Xa(a.type._context);break;case 22:case 23:Du()}s=s.return}if(Je=e,Ge=e=Un(e.current,null),nt=kt=n,qe=0,us=null,Iu=Bi=fr=0,ft=cs=null,ur!==null){for(n=0;n<ur.length;n++)if(s=ur[n],a=s.interleaved,a!==null){s.interleaved=null;var p=a.next,v=s.pending;if(v!==null){var E=v.next;v.next=p,a.next=E}s.pending=a}ur=null}return e}function ep(e,n){do{var s=Ge;try{if(Ya(),Di.current=Li,Ti){for(var a=We.memoizedState;a!==null;){var p=a.queue;p!==null&&(p.pending=null),a=a.next}Ti=!1}if(dr=0,Ze=Qe=We=null,rs=!1,os=0,Cu.current=null,s===null||s.return===null){qe=1,us=n,Ge=null;break}e:{var v=e,E=s.return,B=s,Y=n;if(n=nt,B.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var te=Y,ie=B,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=If(E);if(fe!==null){fe.flags&=-257,jf(fe,E,B,v,n),fe.mode&1&&Cf(v,te,n),n=fe,Y=te;var he=n.updateQueue;if(he===null){var ge=new Set;ge.add(Y),n.updateQueue=ge}else he.add(Y);break e}else{if((n&1)===0){Cf(v,te,n),Tu();break e}Y=Error(o(426))}}else if(Re&&B.mode&1){var Ye=If(E);if(Ye!==null){(Ye.flags&65536)===0&&(Ye.flags|=256),jf(Ye,E,B,v,n),Wa(ro(Y,B));break e}}v=Y=ro(Y,B),qe!==4&&(qe=2),cs===null?cs=[v]:cs.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var J=Nf(v,Y,n);Gd(v,J);break e;case 1:B=Y;var G=v.type,ee=v.stateNode;if((v.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Hn===null||!Hn.has(ee)))){v.flags|=65536,n&=-n,v.lanes|=n;var de=kf(v,B,n);Gd(v,de);break e}}v=v.return}while(v!==null)}rp(s)}catch(xe){n=xe,Ge===s&&s!==null&&(Ge=s=s.return);continue}break}while(!0)}function tp(){var e=Vi.current;return Vi.current=Li,e===null?Li:e}function Tu(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||(fr&268435455)===0&&(Bi&268435455)===0||Wn(Je,nt)}function Ki(e,n){var s=Me;Me|=2;var a=tp();(Je!==e||nt!==n)&&(vn=null,mr(e,n));do try{Kx();break}catch(p){ep(e,p)}while(!0);if(Ya(),Me=s,Vi.current=a,Ge!==null)throw Error(o(261));return Je=null,nt=0,qe}function Kx(){for(;Ge!==null;)np(Ge)}function Qx(){for(;Ge!==null&&!na();)np(Ge)}function np(e){var n=ip(e.alternate,e,kt);e.memoizedProps=e.pendingProps,n===null?rp(e):Ge=n,Cu.current=null}function rp(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Vx(s,n,kt),s!==null){Ge=s;return}}else{if(s=Bx(s,n),s!==null){s.flags&=32767,Ge=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ge=null;return}}if(n=n.sibling,n!==null){Ge=n;return}Ge=n=e}while(n!==null);qe===0&&(qe=5)}function hr(e,n,s){var a=De,p=Ot.transition;try{Ot.transition=null,De=1,qx(e,n,s,a)}finally{Ot.transition=p,De=a}return null}function qx(e,n,s,a){do lo();while(Vn!==null);if((Me&6)!==0)throw Error(o(327));s=e.finishedWork;var p=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(ri(e,v),e===Je&&(Ge=Je=null,nt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ui||(Ui=!0,lp(Ar,function(){return lo(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Ot.transition,Ot.transition=null;var E=De;De=1;var B=Me;Me|=4,Cu.current=null,Ux(e,s),Xf(s,e),xx(Ta),ii=!!Da,Ta=Da=null,e.current=s,Yx(s),Js(),Me=B,De=E,Ot.transition=v}else e.current=s;if(Ui&&(Ui=!1,Vn=e,Yi=p),v=e.pendingLanes,v===0&&(Hn=null),sa(s.stateNode),pt(e,Ve()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)p=n[s],a(p.value,{componentStack:p.stack,digest:p.digest});if(Wi)throw Wi=!1,e=bu,bu=null,e;return(Yi&1)!==0&&e.tag!==0&&lo(),v=e.pendingLanes,(v&1)!==0?e===Eu?ds++:(ds=0,Eu=e):ds=0,$n(),null}function lo(){if(Vn!==null){var e=Wc(Yi),n=Ot.transition,s=De;try{if(Ot.transition=null,De=16>e?16:e,Vn===null)var a=!1;else{if(e=Vn,Vn=null,Yi=0,(Me&6)!==0)throw Error(o(331));var p=Me;for(Me|=4,me=e.current;me!==null;){var v=me,E=v.child;if((me.flags&16)!==0){var B=v.deletions;if(B!==null){for(var Y=0;Y<B.length;Y++){var te=B[Y];for(me=te;me!==null;){var ie=me;switch(ie.tag){case 0:case 11:case 15:as(8,ie,v)}var ae=ie.child;if(ae!==null)ae.return=ie,me=ae;else for(;me!==null;){ie=me;var se=ie.sibling,fe=ie.return;if(Vf(ie),ie===te){me=null;break}if(se!==null){se.return=fe,me=se;break}me=fe}}}var he=v.alternate;if(he!==null){var ge=he.child;if(ge!==null){he.child=null;do{var Ye=ge.sibling;ge.sibling=null,ge=Ye}while(ge!==null)}}me=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,me=E;else e:for(;me!==null;){if(v=me,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:as(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,me=J;break e}me=v.return}}var G=e.current;for(me=G;me!==null;){E=me;var ee=E.child;if((E.subtreeFlags&2064)!==0&&ee!==null)ee.return=E,me=ee;else e:for(E=G;me!==null;){if(B=me,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Hi(9,B)}}catch(xe){Ue(B,B.return,xe)}if(B===E){me=null;break e}var de=B.sibling;if(de!==null){de.return=B.return,me=de;break e}me=B.return}}if(Me=p,$n(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(rr,e)}catch{}a=!0}return a}finally{De=s,Ot.transition=n}}return!1}function op(e,n,s){n=ro(s,n),n=Nf(e,n,1),e=Rn(e,n,1),n=at(),e!==null&&(or(e,1,n),pt(e,n))}function Ue(e,n,s){if(e.tag===3)op(e,e,s);else for(;n!==null;){if(n.tag===3){op(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Hn===null||!Hn.has(a))){e=ro(s,e),e=kf(n,e,1),n=Rn(n,e,1),e=at(),n!==null&&(or(n,1,e),pt(n,e));break}}n=n.return}}function Zx(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=at(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(nt&s)===s&&(qe===4||qe===3&&(nt&130023424)===nt&&500>Ve()-ju?mr(e,0):Iu|=s),pt(e,n)}function sp(e,n){n===0&&((e.mode&1)===0?n=1:(n=$r,$r<<=1,($r&130023424)===0&&($r=4194304)));var s=at();e=gn(e,n),e!==null&&(or(e,n,s),pt(e,s))}function Jx(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),sp(e,s)}function e0(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),sp(e,s)}var ip;ip=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ut.current)dt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return dt=!1,Hx(e,n,s);dt=(e.flags&131072)!==0}else dt=!1,Re&&(n.flags&1048576)!==0&&zd(n,Ci,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Ri(e,n),e=n.pendingProps;var p=Kr(n,rt.current);to(n,s),p=ru(null,n,a,e,p,s);var v=ou();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(a)?(v=!0,Si(n)):v=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Qa(n),p.updater=$i,n.stateNode=p,p._reactInternals=n,cu(n,a,e,s),n=mu(null,n,a,!0,v,s)):(n.tag=0,Re&&v&&Fa(n),lt(null,n,p,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Ri(e,n),e=n.pendingProps,p=a._init,a=p(a._payload),n.type=a,p=n.tag=n0(a),e=Rt(a,e),p){case 0:n=pu(null,n,a,e,s);break e;case 1:n=Df(null,n,a,e,s);break e;case 11:n=bf(null,n,a,e,s);break e;case 14:n=Ef(null,n,a,Rt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Rt(a,p),pu(e,n,a,p,s);case 1:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Rt(a,p),Df(e,n,a,p,s);case 3:e:{if(Tf(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,p=v.element,Xd(e,n),Mi(n,a,null,s);var E=n.memoizedState;if(a=E.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){p=ro(Error(o(423)),n),n=Of(e,n,a,s,p);break e}else if(a!==p){p=ro(Error(o(424)),n),n=Of(e,n,a,s,p);break e}else for(Nt=On(n.stateNode.containerInfo.firstChild),St=n,Re=!0,zt=null,s=Ud(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Zr(),a===p){n=yn(e,n,s);break e}lt(e,n,a,s)}n=n.child}return n;case 5:return Qd(n),e===null&&Ba(n),a=n.type,p=n.pendingProps,v=e!==null?e.memoizedProps:null,E=p.children,Oa(a,p)?E=null:v!==null&&Oa(a,v)&&(n.flags|=32),Pf(e,n),lt(e,n,E,s),n.child;case 6:return e===null&&Ba(n),null;case 13:return Af(e,n,s);case 4:return qa(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Jr(n,null,a,s):lt(e,n,a,s),n.child;case 11:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Rt(a,p),bf(e,n,a,p,s);case 7:return lt(e,n,n.pendingProps,s),n.child;case 8:return lt(e,n,n.pendingProps.children,s),n.child;case 12:return lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,p=n.pendingProps,v=n.memoizedProps,E=p.value,Ae(bi,a._currentValue),a._currentValue=E,v!==null)if($t(v.value,E)){if(v.children===p.children&&!ut.current){n=yn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var B=v.dependencies;if(B!==null){E=v.child;for(var Y=B.firstContext;Y!==null;){if(Y.context===a){if(v.tag===1){Y=xn(-1,s&-s),Y.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var ie=te.pending;ie===null?Y.next=Y:(Y.next=ie.next,ie.next=Y),te.pending=Y}}v.lanes|=s,Y=v.alternate,Y!==null&&(Y.lanes|=s),Ga(v.return,s,n),B.lanes|=s;break}Y=Y.next}}else if(v.tag===10)E=v.type===n.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(o(341));E.lanes|=s,B=E.alternate,B!==null&&(B.lanes|=s),Ga(E,s,n),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===n){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}lt(e,n,p.children,s),n=n.child}return n;case 9:return p=n.type,a=n.pendingProps.children,to(n,s),p=Dt(p),a=a(p),n.flags|=1,lt(e,n,a,s),n.child;case 14:return a=n.type,p=Rt(a,n.pendingProps),p=Rt(a.type,p),Ef(e,n,a,p,s);case 15:return _f(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Rt(a,p),Ri(e,n),n.tag=1,ct(a)?(e=!0,Si(n)):e=!1,to(n,s),wf(n,a,p),cu(n,a,p,s),mu(null,n,a,!0,e,s);case 19:return $f(e,n,s);case 22:return Mf(e,n,s)}throw Error(o(156,n.tag))};function lp(e,n){return qs(e,n)}function t0(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,n,s,a){return new t0(e,n,s,a)}function Ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function n0(e){if(typeof e=="function")return Ou(e)?1:0;if(e!=null){if(e=e.$$typeof,e===U)return 11;if(e===H)return 14}return 2}function Un(e,n){var s=e.alternate;return s===null?(s=At(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Qi(e,n,s,a,p,v){var E=2;if(a=e,typeof e=="function")Ou(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case W:return gr(s.children,p,v,n);case K:E=8,p|=8;break;case Q:return e=At(12,s,n,p|2),e.elementType=Q,e.lanes=v,e;case X:return e=At(13,s,n,p),e.elementType=X,e.lanes=v,e;case A:return e=At(19,s,n,p),e.elementType=A,e.lanes=v,e;case _:return qi(s,p,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:E=10;break e;case z:E=9;break e;case U:E=11;break e;case H:E=14;break e;case F:E=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=At(E,s,n,p),n.elementType=e,n.type=a,n.lanes=v,n}function gr(e,n,s,a){return e=At(7,e,a,n),e.lanes=s,e}function qi(e,n,s,a){return e=At(22,e,a,n),e.elementType=_,e.lanes=s,e.stateNode={isHidden:!1},e}function Au(e,n,s){return e=At(6,e,null,n),e.lanes=s,e}function Lu(e,n,s){return n=At(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function r0(e,n,s,a,p){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=a,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function $u(e,n,s,a,p,v,E,B,Y){return e=new r0(e,n,s,B,Y),n===1?(n=1,v===!0&&(n|=8)):n=0,v=At(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qa(v),e}function o0(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function ap(e){if(!e)return Ln;e=e._reactInternals;e:{if(Qt(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(ct(s))return Ad(e,s,n)}return n}function up(e,n,s,a,p,v,E,B,Y){return e=$u(s,a,!0,e,p,v,E,B,Y),e.context=ap(null),s=e.current,a=at(),p=Bn(s),v=xn(a,p),v.callback=n??null,Rn(s,v,p),e.current.lanes=p,or(e,p,a),pt(e,a),e}function Zi(e,n,s,a){var p=n.current,v=at(),E=Bn(p);return s=ap(s),n.context===null?n.context=s:n.pendingContext=s,n=xn(v,E),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Rn(p,n,E),e!==null&&(Vt(e,p,E,v),_i(e,p,E)),E}function Ji(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function zu(e,n){cp(e,n),(e=e.alternate)&&cp(e,n)}function s0(){return null}var dp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ru(e){this._internalRoot=e}el.prototype.render=Ru.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Zi(e,n,null,null)},el.prototype.unmount=Ru.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;pr(function(){Zi(null,e,null,null)}),n[fn]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var n=Xc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Pn.length&&n!==0&&n<Pn[s].priority;s++);Pn.splice(s,0,e),s===0&&Qc(e)}};function Fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fp(){}function i0(e,n,s,a,p){if(p){if(typeof a=="function"){var v=a;a=function(){var te=Ji(E);v.call(te)}}var E=up(n,a,e,0,null,!1,!1,"",fp);return e._reactRootContainer=E,e[fn]=E.current,Ko(e.nodeType===8?e.parentNode:e),pr(),E}for(;p=e.lastChild;)e.removeChild(p);if(typeof a=="function"){var B=a;a=function(){var te=Ji(Y);B.call(te)}}var Y=$u(e,0,!1,null,null,!1,!1,"",fp);return e._reactRootContainer=Y,e[fn]=Y.current,Ko(e.nodeType===8?e.parentNode:e),pr(function(){Zi(n,Y,s,a)}),Y}function nl(e,n,s,a,p){var v=s._reactRootContainer;if(v){var E=v;if(typeof p=="function"){var B=p;p=function(){var Y=Ji(E);B.call(Y)}}Zi(n,E,e,p)}else E=i0(s,n,e,p,a);return Ji(E)}Uc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=qt(n.pendingLanes);s!==0&&(ca(n,s|1),pt(n,Ve()),(Me&6)===0&&(io=Ve()+500,$n()))}break;case 13:pr(function(){var a=gn(e,1);if(a!==null){var p=at();Vt(a,e,1,p)}}),zu(e,1)}},da=function(e){if(e.tag===13){var n=gn(e,134217728);if(n!==null){var s=at();Vt(n,e,134217728,s)}zu(e,134217728)}},Yc=function(e){if(e.tag===13){var n=Bn(e),s=gn(e,n);if(s!==null){var a=at();Vt(s,e,n,a)}zu(e,n)}},Xc=function(){return De},Gc=function(e,n){var s=De;try{return De=e,n()}finally{De=s}},bo=function(e,n,s){switch(n){case"input":if(Xe(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var p=vi(a);if(!p)throw Error(o(90));ke(a),Xe(a,p)}}}break;case"textarea":Dr(e,s);break;case"select":n=s.value,n!=null&&Et(e,!!s.multiple,n,!1)}},Ys=Pu,Xs=pr;var l0={usingClientEntryPoint:!1,Events:[Zo,Xr,vi,Ws,Us,Pu]},fs={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a0={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ks(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||s0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{rr=rl.inject(a0),_t=rl}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0,mt.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fu(n))throw Error(o(200));return o0(e,n,null,s)},mt.createRoot=function(e,n){if(!Fu(e))throw Error(o(299));var s=!1,a="",p=dp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=$u(e,1,!1,null,null,s,!1,a,p),e[fn]=n.current,Ko(e.nodeType===8?e.parentNode:e),new Ru(n)},mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Ks(n),e=e===null?null:e.stateNode,e},mt.flushSync=function(e){return pr(e)},mt.hydrate=function(e,n,s){if(!tl(n))throw Error(o(200));return nl(null,e,n,!0,s)},mt.hydrateRoot=function(e,n,s){if(!Fu(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,p=!1,v="",E=dp;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),n=up(n,null,e,1,s??null,p,!1,v,E),e[fn]=n.current,Ko(e),a)for(e=0;e<a.length;e++)s=a[e],p=s._getVersion,p=p(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,p]:n.mutableSourceEagerHydrationData.push(s,p);return new el(n)},mt.render=function(e,n,s){if(!tl(n))throw Error(o(200));return nl(null,e,n,!1,s)},mt.unmountComponentAtNode=function(e){if(!tl(e))throw Error(o(40));return e._reactRootContainer?(pr(function(){nl(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0):!1},mt.unstable_batchedUpdates=Pu,mt.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!tl(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return nl(e,n,s,!1,a)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var wp;function Rm(){if(wp)return Bu.exports;wp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Bu.exports=h0(),Bu.exports}var Sp;function g0(){if(Sp)return ol;Sp=1;var t=Rm();return ol.createRoot=t.createRoot,ol.hydrateRoot=t.hydrateRoot,ol}var x0=g0();function Ke(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=Ke(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var y0={value:()=>{}};function Al(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new xl(o)}function xl(t){this._=t}function v0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}xl.prototype=Al.prototype={constructor:xl,on:function(t,r){var o=this._,i=v0(t+"",o),l,c=-1,d=i.length;if(arguments.length<2){for(;++c<d;)if((l=(t=i[c]).type)&&(l=w0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++c<d;)if(l=(t=i[c]).type)o[l]=Np(o[l],t.name,r);else if(r==null)for(l in o)o[l]=Np(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new xl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,c;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],i=0,l=c.length;i<l;++i)c[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,c=i.length;l<c;++l)i[l].value.apply(r,o)}};function w0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function Np(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=y0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var lc="http://www.w3.org/1999/xhtml";const kp={svg:"http://www.w3.org/2000/svg",xhtml:lc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ll(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),kp.hasOwnProperty(r)?{space:kp[r],local:t}:t}function S0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===lc&&r.documentElement.namespaceURI===lc?r.createElement(t):r.createElementNS(o,t)}}function N0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fm(t){var r=Ll(t);return(r.local?N0:S0)(r)}function k0(){}function Ic(t){return t==null?k0:function(){return this.querySelector(t)}}function C0(t){typeof t!="function"&&(t=Ic(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=new Array(d),g,h,x=0;x<d;++x)(g=c[x])&&(h=t.call(g,g.__data__,x,c))&&("__data__"in g&&(h.__data__=g.__data__),f[x]=h);return new bt(i,this._parents)}function I0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function j0(){return[]}function Hm(t){return t==null?j0:function(){return this.querySelectorAll(t)}}function b0(t){return function(){return I0(t.apply(this,arguments))}}function E0(t){typeof t=="function"?t=b0(t):t=Hm(t);for(var r=this._groups,o=r.length,i=[],l=[],c=0;c<o;++c)for(var d=r[c],f=d.length,g,h=0;h<f;++h)(g=d[h])&&(i.push(t.call(g,g.__data__,h,d)),l.push(g));return new bt(i,l)}function Vm(t){return function(){return this.matches(t)}}function Bm(t){return function(r){return r.matches(t)}}var _0=Array.prototype.find;function M0(t){return function(){return _0.call(this.children,t)}}function P0(){return this.firstElementChild}function D0(t){return this.select(t==null?P0:M0(typeof t=="function"?t:Bm(t)))}var T0=Array.prototype.filter;function O0(){return Array.from(this.children)}function A0(t){return function(){return T0.call(this.children,t)}}function L0(t){return this.selectAll(t==null?O0:A0(typeof t=="function"?t:Bm(t)))}function $0(t){typeof t!="function"&&(t=Vm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],g,h=0;h<d;++h)(g=c[h])&&t.call(g,g.__data__,h,c)&&f.push(g);return new bt(i,this._parents)}function Wm(t){return new Array(t.length)}function z0(){return new bt(this._enter||this._groups.map(Wm),this._parents)}function kl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}kl.prototype={constructor:kl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function R0(t){return function(){return t}}function F0(t,r,o,i,l,c){for(var d=0,f,g=r.length,h=c.length;d<h;++d)(f=r[d])?(f.__data__=c[d],i[d]=f):o[d]=new kl(t,c[d]);for(;d<g;++d)(f=r[d])&&(l[d]=f)}function H0(t,r,o,i,l,c,d){var f,g,h=new Map,x=r.length,m=c.length,y=new Array(x),w;for(f=0;f<x;++f)(g=r[f])&&(y[f]=w=d.call(g,g.__data__,f,r)+"",h.has(w)?l[f]=g:h.set(w,g));for(f=0;f<m;++f)w=d.call(t,c[f],f,c)+"",(g=h.get(w))?(i[f]=g,g.__data__=c[f],h.delete(w)):o[f]=new kl(t,c[f]);for(f=0;f<x;++f)(g=r[f])&&h.get(y[f])===g&&(l[f]=g)}function V0(t){return t.__data__}function B0(t,r){if(!arguments.length)return Array.from(this,V0);var o=r?H0:F0,i=this._parents,l=this._groups;typeof t!="function"&&(t=R0(t));for(var c=l.length,d=new Array(c),f=new Array(c),g=new Array(c),h=0;h<c;++h){var x=i[h],m=l[h],y=m.length,w=W0(t.call(x,x&&x.__data__,h,i)),S=w.length,j=f[h]=new Array(S),I=d[h]=new Array(S),C=g[h]=new Array(y);o(x,m,j,I,C,w,r);for(var T=0,k=0,D,P;T<S;++T)if(D=j[T]){for(T>=k&&(k=T+1);!(P=I[k])&&++k<S;);D._next=P||null}}return d=new bt(d,i),d._enter=f,d._exit=g,d}function W0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function U0(){return new bt(this._exit||this._groups.map(Wm),this._parents)}function Y0(t,r,o){var i=this.enter(),l=this,c=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?c.remove():o(c),i&&l?i.merge(l).order():l}function X0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,c=i.length,d=Math.min(l,c),f=new Array(l),g=0;g<d;++g)for(var h=o[g],x=i[g],m=h.length,y=f[g]=new Array(m),w,S=0;S<m;++S)(w=h[S]||x[S])&&(y[S]=w);for(;g<l;++g)f[g]=o[g];return new bt(f,this._parents)}function G0(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,c=i[l],d;--l>=0;)(d=i[l])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function K0(t){t||(t=Q0);function r(m,y){return m&&y?t(m.__data__,y.__data__):!m-!y}for(var o=this._groups,i=o.length,l=new Array(i),c=0;c<i;++c){for(var d=o[c],f=d.length,g=l[c]=new Array(f),h,x=0;x<f;++x)(h=d[x])&&(g[x]=h);g.sort(r)}return new bt(l,this._parents).order()}function Q0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function q0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Z0(){return Array.from(this)}function J0(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length;l<c;++l){var d=i[l];if(d)return d}return null}function ey(){let t=0;for(const r of this)++t;return t}function ty(){return!this.node()}function ny(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],c=0,d=l.length,f;c<d;++c)(f=l[c])&&t.call(f,f.__data__,c,l);return this}function ry(t){return function(){this.removeAttribute(t)}}function oy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sy(t,r){return function(){this.setAttribute(t,r)}}function iy(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function ly(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function ay(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function uy(t,r){var o=Ll(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?oy:ry:typeof r=="function"?o.local?ay:ly:o.local?iy:sy)(o,r))}function Um(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cy(t){return function(){this.style.removeProperty(t)}}function dy(t,r,o){return function(){this.style.setProperty(t,r,o)}}function fy(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function py(t,r,o){return arguments.length>1?this.each((r==null?cy:typeof r=="function"?fy:dy)(t,r,o??"")):go(this.node(),t)}function go(t,r){return t.style.getPropertyValue(r)||Um(t).getComputedStyle(t,null).getPropertyValue(r)}function my(t){return function(){delete this[t]}}function hy(t,r){return function(){this[t]=r}}function gy(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function xy(t,r){return arguments.length>1?this.each((r==null?my:typeof r=="function"?gy:hy)(t,r)):this.node()[t]}function Ym(t){return t.trim().split(/^|\s+/)}function jc(t){return t.classList||new Xm(t)}function Xm(t){this._node=t,this._names=Ym(t.getAttribute("class")||"")}Xm.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Gm(t,r){for(var o=jc(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function Km(t,r){for(var o=jc(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function yy(t){return function(){Gm(this,t)}}function vy(t){return function(){Km(this,t)}}function wy(t,r){return function(){(r.apply(this,arguments)?Gm:Km)(this,t)}}function Sy(t,r){var o=Ym(t+"");if(arguments.length<2){for(var i=jc(this.node()),l=-1,c=o.length;++l<c;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?wy:r?yy:vy)(o,r))}function Ny(){this.textContent=""}function ky(t){return function(){this.textContent=t}}function Cy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Iy(t){return arguments.length?this.each(t==null?Ny:(typeof t=="function"?Cy:ky)(t)):this.node().textContent}function jy(){this.innerHTML=""}function by(t){return function(){this.innerHTML=t}}function Ey(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function _y(t){return arguments.length?this.each(t==null?jy:(typeof t=="function"?Ey:by)(t)):this.node().innerHTML}function My(){this.nextSibling&&this.parentNode.appendChild(this)}function Py(){return this.each(My)}function Dy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ty(){return this.each(Dy)}function Oy(t){var r=typeof t=="function"?t:Fm(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Ay(){return null}function Ly(t,r){var o=typeof t=="function"?t:Fm(t),i=r==null?Ay:typeof r=="function"?r:Ic(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function $y(){var t=this.parentNode;t&&t.removeChild(this)}function zy(){return this.each($y)}function Ry(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Fy(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Hy(t){return this.select(t?Fy:Ry)}function Vy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function By(t){return function(r){t.call(this,r,this.__data__)}}function Wy(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Uy(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,c;o<l;++o)c=r[o],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):r[++i]=c;++i?r.length=i:delete this.__on}}}function Yy(t,r,o){return function(){var i=this.__on,l,c=By(r);if(i){for(var d=0,f=i.length;d<f;++d)if((l=i[d]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=o),l.value=r;return}}this.addEventListener(t.type,c,o),l={type:t.type,name:t.name,value:r,listener:c,options:o},i?i.push(l):this.__on=[l]}}function Xy(t,r,o){var i=Wy(t+""),l,c=i.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var g=0,h=f.length,x;g<h;++g)for(l=0,x=f[g];l<c;++l)if((d=i[l]).type===x.type&&d.name===x.name)return x.value}return}for(f=r?Yy:Uy,l=0;l<c;++l)this.each(f(i[l],r,o));return this}function Qm(t,r,o){var i=Um(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function Gy(t,r){return function(){return Qm(this,t,r)}}function Ky(t,r){return function(){return Qm(this,t,r.apply(this,arguments))}}function Qy(t,r){return this.each((typeof r=="function"?Ky:Gy)(t,r))}function*qy(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length,d;l<c;++l)(d=i[l])&&(yield d)}var qm=[null];function bt(t,r){this._groups=t,this._parents=r}function Ts(){return new bt([[document.documentElement]],qm)}function Zy(){return this}bt.prototype=Ts.prototype={constructor:bt,select:C0,selectAll:E0,selectChild:D0,selectChildren:L0,filter:$0,data:B0,enter:z0,exit:U0,join:Y0,merge:X0,selection:Zy,order:G0,sort:K0,call:q0,nodes:Z0,node:J0,size:ey,empty:ty,each:ny,attr:uy,style:py,property:xy,classed:Sy,text:Iy,html:_y,raise:Py,lower:Ty,append:Oy,insert:Ly,remove:zy,clone:Hy,datum:Vy,on:Xy,dispatch:Qy,[Symbol.iterator]:qy};function Ct(t){return typeof t=="string"?new bt([[document.querySelector(t)]],[document.documentElement]):new bt([[t]],qm)}function Jy(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Bt(t,r){if(t=Jy(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const ev={passive:!1},ks={capture:!0,passive:!1};function Yu(t){t.stopImmediatePropagation()}function mo(t){t.preventDefault(),t.stopImmediatePropagation()}function Zm(t){var r=t.document.documentElement,o=Ct(t).on("dragstart.drag",mo,ks);"onselectstart"in r?o.on("selectstart.drag",mo,ks):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Jm(t,r){var o=t.document.documentElement,i=Ct(t).on("dragstart.drag",null);r&&(i.on("click.drag",mo,ks),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const sl=t=>()=>t;function ac(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:c,x:d,y:f,dx:g,dy:h,dispatch:x}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:x}})}ac.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function tv(t){return!t.ctrlKey&&!t.button}function nv(){return this.parentNode}function rv(t,r){return r??{x:t.x,y:t.y}}function ov(){return navigator.maxTouchPoints||"ontouchstart"in this}function eh(){var t=tv,r=nv,o=rv,i=ov,l={},c=Al("start","drag","end"),d=0,f,g,h,x,m=0;function y(D){D.on("mousedown.drag",w).filter(i).on("touchstart.drag",I).on("touchmove.drag",C,ev).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(D,P){if(!(x||!t.call(this,D,P))){var $=k(this,r.call(this,D,P),D,P,"mouse");$&&(Ct(D.view).on("mousemove.drag",S,ks).on("mouseup.drag",j,ks),Zm(D.view),Yu(D),h=!1,f=D.clientX,g=D.clientY,$("start",D))}}function S(D){if(mo(D),!h){var P=D.clientX-f,$=D.clientY-g;h=P*P+$*$>m}l.mouse("drag",D)}function j(D){Ct(D.view).on("mousemove.drag mouseup.drag",null),Jm(D.view,h),mo(D),l.mouse("end",D)}function I(D,P){if(t.call(this,D,P)){var $=D.changedTouches,W=r.call(this,D,P),K=$.length,Q,V;for(Q=0;Q<K;++Q)(V=k(this,W,D,P,$[Q].identifier,$[Q]))&&(Yu(D),V("start",D,$[Q]))}}function C(D){var P=D.changedTouches,$=P.length,W,K;for(W=0;W<$;++W)(K=l[P[W].identifier])&&(mo(D),K("drag",D,P[W]))}function T(D){var P=D.changedTouches,$=P.length,W,K;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),W=0;W<$;++W)(K=l[P[W].identifier])&&(Yu(D),K("end",D,P[W]))}function k(D,P,$,W,K,Q){var V=c.copy(),z=Bt(Q||$,P),U,X,A;if((A=o.call(D,new ac("beforestart",{sourceEvent:$,target:y,identifier:K,active:d,x:z[0],y:z[1],dx:0,dy:0,dispatch:V}),W))!=null)return U=A.x-z[0]||0,X=A.y-z[1]||0,function H(F,_,M){var N=z,R;switch(F){case"start":l[K]=H,R=d++;break;case"end":delete l[K],--d;case"drag":z=Bt(M||_,P),R=d;break}V.call(F,D,new ac(F,{sourceEvent:_,subject:A,target:y,identifier:K,active:R,x:z[0]+U,y:z[1]+X,dx:z[0]-N[0],dy:z[1]-N[1],dispatch:V}),W)}}return y.filter=function(D){return arguments.length?(t=typeof D=="function"?D:sl(!!D),y):t},y.container=function(D){return arguments.length?(r=typeof D=="function"?D:sl(D),y):r},y.subject=function(D){return arguments.length?(o=typeof D=="function"?D:sl(D),y):o},y.touchable=function(D){return arguments.length?(i=typeof D=="function"?D:sl(!!D),y):i},y.on=function(){var D=c.on.apply(c,arguments);return D===c?y:D},y.clickDistance=function(D){return arguments.length?(m=(D=+D)*D,y):Math.sqrt(m)},y}function bc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function th(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function Os(){}var Cs=.7,Cl=1/Cs,ho="\\s*([+-]?\\d+)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",on="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sv=/^#([0-9a-f]{3,8})$/,iv=new RegExp(`^rgb\\(${ho},${ho},${ho}\\)$`),lv=new RegExp(`^rgb\\(${on},${on},${on}\\)$`),av=new RegExp(`^rgba\\(${ho},${ho},${ho},${Is}\\)$`),uv=new RegExp(`^rgba\\(${on},${on},${on},${Is}\\)$`),cv=new RegExp(`^hsl\\(${Is},${on},${on}\\)$`),dv=new RegExp(`^hsla\\(${Is},${on},${on},${Is}\\)$`),Cp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bc(Os,kr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ip,formatHex:Ip,formatHex8:fv,formatHsl:pv,formatRgb:jp,toString:jp});function Ip(){return this.rgb().formatHex()}function fv(){return this.rgb().formatHex8()}function pv(){return nh(this).formatHsl()}function jp(){return this.rgb().formatRgb()}function kr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=sv.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?bp(r):o===3?new ht(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?il(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?il(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=iv.exec(t))?new ht(r[1],r[2],r[3],1):(r=lv.exec(t))?new ht(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=av.exec(t))?il(r[1],r[2],r[3],r[4]):(r=uv.exec(t))?il(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=cv.exec(t))?Mp(r[1],r[2]/100,r[3]/100,1):(r=dv.exec(t))?Mp(r[1],r[2]/100,r[3]/100,r[4]):Cp.hasOwnProperty(t)?bp(Cp[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function bp(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function il(t,r,o,i){return i<=0&&(t=r=o=NaN),new ht(t,r,o,i)}function mv(t){return t instanceof Os||(t=kr(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function uc(t,r,o,i){return arguments.length===1?mv(t):new ht(t,r,o,i??1)}function ht(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}bc(ht,uc,th(Os,{brighter(t){return t=t==null?Cl:Math.pow(Cl,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cs:Math.pow(Cs,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(Sr(this.r),Sr(this.g),Sr(this.b),Il(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ep,formatHex:Ep,formatHex8:hv,formatRgb:_p,toString:_p}));function Ep(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}`}function hv(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}${vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function _p(){const t=Il(this.opacity);return`${t===1?"rgb(":"rgba("}${Sr(this.r)}, ${Sr(this.g)}, ${Sr(this.b)}${t===1?")":`, ${t})`}`}function Il(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Sr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vr(t){return t=Sr(t),(t<16?"0":"")+t.toString(16)}function Mp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Ut(t,r,o,i)}function nh(t){if(t instanceof Ut)return new Ut(t.h,t.s,t.l,t.opacity);if(t instanceof Os||(t=kr(t)),!t)return new Ut;if(t instanceof Ut)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),c=Math.max(r,o,i),d=NaN,f=c-l,g=(c+l)/2;return f?(r===c?d=(o-i)/f+(o<i)*6:o===c?d=(i-r)/f+2:d=(r-o)/f+4,f/=g<.5?c+l:2-c-l,d*=60):f=g>0&&g<1?0:d,new Ut(d,f,g,t.opacity)}function gv(t,r,o,i){return arguments.length===1?nh(t):new Ut(t,r,o,i??1)}function Ut(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}bc(Ut,gv,th(Os,{brighter(t){return t=t==null?Cl:Math.pow(Cl,t),new Ut(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cs:Math.pow(Cs,t),new Ut(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new ht(Xu(t>=240?t-240:t+120,l,i),Xu(t,l,i),Xu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Ut(Pp(this.h),ll(this.s),ll(this.l),Il(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Il(this.opacity);return`${t===1?"hsl(":"hsla("}${Pp(this.h)}, ${ll(this.s)*100}%, ${ll(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pp(t){return t=(t||0)%360,t<0?t+360:t}function ll(t){return Math.max(0,Math.min(1,t||0))}function Xu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const Ec=t=>()=>t;function xv(t,r){return function(o){return t+o*r}}function yv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function vv(t){return(t=+t)==1?rh:function(r,o){return o-r?yv(r,o,t):Ec(isNaN(r)?o:r)}}function rh(t,r){var o=r-t;return o?xv(t,o):Ec(isNaN(t)?r:t)}const jl=(function t(r){var o=vv(r);function i(l,c){var d=o((l=uc(l)).r,(c=uc(c)).r),f=o(l.g,c.g),g=o(l.b,c.b),h=rh(l.opacity,c.opacity);return function(x){return l.r=d(x),l.g=f(x),l.b=g(x),l.opacity=h(x),l+""}}return i.gamma=t,i})(1);function wv(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(c){for(l=0;l<o;++l)i[l]=t[l]*(1-c)+r[l]*c;return i}}function Sv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Nv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),c=new Array(o),d;for(d=0;d<i;++d)l[d]=Ss(t[d],r[d]);for(;d<o;++d)c[d]=r[d];return function(f){for(d=0;d<i;++d)c[d]=l[d](f);return c}}function kv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function rn(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function Cv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=Ss(t[l],r[l]):i[l]=r[l];return function(c){for(l in o)i[l]=o[l](c);return i}}var cc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gu=new RegExp(cc.source,"g");function Iv(t){return function(){return t}}function jv(t){return function(r){return t(r)+""}}function oh(t,r){var o=cc.lastIndex=Gu.lastIndex=0,i,l,c,d=-1,f=[],g=[];for(t=t+"",r=r+"";(i=cc.exec(t))&&(l=Gu.exec(r));)(c=l.index)>o&&(c=r.slice(o,c),f[d]?f[d]+=c:f[++d]=c),(i=i[0])===(l=l[0])?f[d]?f[d]+=l:f[++d]=l:(f[++d]=null,g.push({i:d,x:rn(i,l)})),o=Gu.lastIndex;return o<r.length&&(c=r.slice(o),f[d]?f[d]+=c:f[++d]=c),f.length<2?g[0]?jv(g[0].x):Iv(r):(r=g.length,function(h){for(var x=0,m;x<r;++x)f[(m=g[x]).i]=m.x(h);return f.join("")})}function Ss(t,r){var o=typeof r,i;return r==null||o==="boolean"?Ec(r):(o==="number"?rn:o==="string"?(i=kr(r))?(r=i,jl):oh:r instanceof kr?jl:r instanceof Date?kv:Sv(r)?wv:Array.isArray(r)?Nv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Cv:rn)(t,r)}var Dp=180/Math.PI,dc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sh(t,r,o,i,l,c){var d,f,g;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(g=t*o+r*i)&&(o-=t*g,i-=r*g),(f=Math.sqrt(o*o+i*i))&&(o/=f,i/=f,g/=f),t*i<r*o&&(t=-t,r=-r,g=-g,d=-d),{translateX:l,translateY:c,rotate:Math.atan2(r,t)*Dp,skewX:Math.atan(g)*Dp,scaleX:d,scaleY:f}}var al;function bv(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?dc:sh(r.a,r.b,r.c,r.d,r.e,r.f)}function Ev(t){return t==null||(al||(al=document.createElementNS("http://www.w3.org/2000/svg","g")),al.setAttribute("transform",t),!(t=al.transform.baseVal.consolidate()))?dc:(t=t.matrix,sh(t.a,t.b,t.c,t.d,t.e,t.f))}function ih(t,r,o,i){function l(h){return h.length?h.pop()+" ":""}function c(h,x,m,y,w,S){if(h!==m||x!==y){var j=w.push("translate(",null,r,null,o);S.push({i:j-4,x:rn(h,m)},{i:j-2,x:rn(x,y)})}else(m||y)&&w.push("translate("+m+r+y+o)}function d(h,x,m,y){h!==x?(h-x>180?x+=360:x-h>180&&(h+=360),y.push({i:m.push(l(m)+"rotate(",null,i)-2,x:rn(h,x)})):x&&m.push(l(m)+"rotate("+x+i)}function f(h,x,m,y){h!==x?y.push({i:m.push(l(m)+"skewX(",null,i)-2,x:rn(h,x)}):x&&m.push(l(m)+"skewX("+x+i)}function g(h,x,m,y,w,S){if(h!==m||x!==y){var j=w.push(l(w)+"scale(",null,",",null,")");S.push({i:j-4,x:rn(h,m)},{i:j-2,x:rn(x,y)})}else(m!==1||y!==1)&&w.push(l(w)+"scale("+m+","+y+")")}return function(h,x){var m=[],y=[];return h=t(h),x=t(x),c(h.translateX,h.translateY,x.translateX,x.translateY,m,y),d(h.rotate,x.rotate,m,y),f(h.skewX,x.skewX,m,y),g(h.scaleX,h.scaleY,x.scaleX,x.scaleY,m,y),h=x=null,function(w){for(var S=-1,j=y.length,I;++S<j;)m[(I=y[S]).i]=I.x(w);return m.join("")}}}var _v=ih(bv,"px, ","px)","deg)"),Mv=ih(Ev,", ",")",")"),Pv=1e-12;function Tp(t){return((t=Math.exp(t))+1/t)/2}function Dv(t){return((t=Math.exp(t))-1/t)/2}function Tv(t){return((t=Math.exp(2*t))-1)/(t+1)}const yl=(function t(r,o,i){function l(c,d){var f=c[0],g=c[1],h=c[2],x=d[0],m=d[1],y=d[2],w=x-f,S=m-g,j=w*w+S*S,I,C;if(j<Pv)C=Math.log(y/h)/r,I=function(W){return[f+W*w,g+W*S,h*Math.exp(r*W*C)]};else{var T=Math.sqrt(j),k=(y*y-h*h+i*j)/(2*h*o*T),D=(y*y-h*h-i*j)/(2*y*o*T),P=Math.log(Math.sqrt(k*k+1)-k),$=Math.log(Math.sqrt(D*D+1)-D);C=($-P)/r,I=function(W){var K=W*C,Q=Tp(P),V=h/(o*T)*(Q*Tv(r*K+P)-Dv(P));return[f+V*w,g+V*S,h*Q/Tp(r*K+P)]}}return I.duration=C*1e3*r/Math.SQRT2,I}return l.rho=function(c){var d=Math.max(.001,+c),f=d*d,g=f*f;return t(d,f,g)},l})(Math.SQRT2,2,4);var xo=0,ys=0,ms=0,lh=1e3,bl,vs,El=0,Cr=0,$l=0,js=typeof performance=="object"&&performance.now?performance:Date,ah=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _c(){return Cr||(ah(Ov),Cr=js.now()+$l)}function Ov(){Cr=0}function _l(){this._call=this._time=this._next=null}_l.prototype=uh.prototype={constructor:_l,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?_c():+o)+(r==null?0:+r),!this._next&&vs!==this&&(vs?vs._next=this:bl=this,vs=this),this._call=t,this._time=o,fc()},stop:function(){this._call&&(this._call=null,this._time=1/0,fc())}};function uh(t,r,o){var i=new _l;return i.restart(t,r,o),i}function Av(){_c(),++xo;for(var t=bl,r;t;)(r=Cr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--xo}function Op(){Cr=(El=js.now())+$l,xo=ys=0;try{Av()}finally{xo=0,$v(),Cr=0}}function Lv(){var t=js.now(),r=t-El;r>lh&&($l-=r,El=t)}function $v(){for(var t,r=bl,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:bl=o);vs=t,fc(i)}function fc(t){if(!xo){ys&&(ys=clearTimeout(ys));var r=t-Cr;r>24?(t<1/0&&(ys=setTimeout(Op,t-js.now()-$l)),ms&&(ms=clearInterval(ms))):(ms||(El=js.now(),ms=setInterval(Lv,lh)),xo=1,ah(Op))}}function Ap(t,r,o){var i=new _l;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var zv=Al("start","end","cancel","interrupt"),Rv=[],ch=0,Lp=1,pc=2,vl=3,$p=4,mc=5,wl=6;function zl(t,r,o,i,l,c){var d=t.__transition;if(!d)t.__transition={};else if(o in d)return;Fv(t,o,{name:r,index:i,group:l,on:zv,tween:Rv,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:ch})}function Mc(t,r){var o=Kt(t,r);if(o.state>ch)throw new Error("too late; already scheduled");return o}function ln(t,r){var o=Kt(t,r);if(o.state>vl)throw new Error("too late; already running");return o}function Kt(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function Fv(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=uh(c,0,o.time);function c(h){o.state=Lp,o.timer.restart(d,o.delay,o.time),o.delay<=h&&d(h-o.delay)}function d(h){var x,m,y,w;if(o.state!==Lp)return g();for(x in i)if(w=i[x],w.name===o.name){if(w.state===vl)return Ap(d);w.state===$p?(w.state=wl,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[x]):+x<r&&(w.state=wl,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[x])}if(Ap(function(){o.state===vl&&(o.state=$p,o.timer.restart(f,o.delay,o.time),f(h))}),o.state=pc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===pc){for(o.state=vl,l=new Array(y=o.tween.length),x=0,m=-1;x<y;++x)(w=o.tween[x].value.call(t,t.__data__,o.index,o.group))&&(l[++m]=w);l.length=m+1}}function f(h){for(var x=h<o.duration?o.ease.call(null,h/o.duration):(o.timer.restart(g),o.state=mc,1),m=-1,y=l.length;++m<y;)l[m].call(t,x);o.state===mc&&(o.on.call("end",t,t.__data__,o.index,o.group),g())}function g(){o.state=wl,o.timer.stop(),delete i[r];for(var h in i)return;delete t.__transition}}function Sl(t,r){var o=t.__transition,i,l,c=!0,d;if(o){r=r==null?null:r+"";for(d in o){if((i=o[d]).name!==r){c=!1;continue}l=i.state>pc&&i.state<mc,i.state=wl,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[d]}c&&delete t.__transition}}function Hv(t){return this.each(function(){Sl(this,t)})}function Vv(t,r){var o,i;return function(){var l=ln(this,t),c=l.tween;if(c!==o){i=o=c;for(var d=0,f=i.length;d<f;++d)if(i[d].name===r){i=i.slice(),i.splice(d,1);break}}l.tween=i}}function Bv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var c=ln(this,t),d=c.tween;if(d!==i){l=(i=d).slice();for(var f={name:r,value:o},g=0,h=l.length;g<h;++g)if(l[g].name===r){l[g]=f;break}g===h&&l.push(f)}c.tween=l}}function Wv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=Kt(this.node(),o).tween,l=0,c=i.length,d;l<c;++l)if((d=i[l]).name===t)return d.value;return null}return this.each((r==null?Vv:Bv)(o,t,r))}function Pc(t,r,o){var i=t._id;return t.each(function(){var l=ln(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return Kt(l,i).value[r]}}function dh(t,r){var o;return(typeof r=="number"?rn:r instanceof kr?jl:(o=kr(r))?(r=o,jl):oh)(t,r)}function Uv(t){return function(){this.removeAttribute(t)}}function Yv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttribute(t);return d===l?null:d===i?c:c=r(i=d,o)}}function Gv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===l?null:d===i?c:c=r(i=d,o)}}function Kv(t,r,o){var i,l,c;return function(){var d,f=o(this),g;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),g=f+"",d===g?null:d===i&&g===l?c:(l=g,c=r(i=d,f)))}}function Qv(t,r,o){var i,l,c;return function(){var d,f=o(this),g;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),g=f+"",d===g?null:d===i&&g===l?c:(l=g,c=r(i=d,f)))}}function qv(t,r){var o=Ll(t),i=o==="transform"?Mv:dh;return this.attrTween(t,typeof r=="function"?(o.local?Qv:Kv)(o,i,Pc(this,"attr."+t,r)):r==null?(o.local?Yv:Uv)(o):(o.local?Gv:Xv)(o,i,r))}function Zv(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function Jv(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function ew(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&Jv(t,c)),o}return l._value=r,l}function tw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&Zv(t,c)),o}return l._value=r,l}function nw(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=Ll(t);return this.tween(o,(i.local?ew:tw)(i,r))}function rw(t,r){return function(){Mc(this,t).delay=+r.apply(this,arguments)}}function ow(t,r){return r=+r,function(){Mc(this,t).delay=r}}function sw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?rw:ow)(r,t)):Kt(this.node(),r).delay}function iw(t,r){return function(){ln(this,t).duration=+r.apply(this,arguments)}}function lw(t,r){return r=+r,function(){ln(this,t).duration=r}}function aw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?iw:lw)(r,t)):Kt(this.node(),r).duration}function uw(t,r){if(typeof r!="function")throw new Error;return function(){ln(this,t).ease=r}}function cw(t){var r=this._id;return arguments.length?this.each(uw(r,t)):Kt(this.node(),r).ease}function dw(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;ln(this,t).ease=o}}function fw(t){if(typeof t!="function")throw new Error;return this.each(dw(this._id,t))}function pw(t){typeof t!="function"&&(t=Vm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],g,h=0;h<d;++h)(g=c[h])&&t.call(g,g.__data__,h,c)&&f.push(g);return new kn(i,this._parents,this._name,this._id)}function mw(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,c=Math.min(i,l),d=new Array(i),f=0;f<c;++f)for(var g=r[f],h=o[f],x=g.length,m=d[f]=new Array(x),y,w=0;w<x;++w)(y=g[w]||h[w])&&(m[w]=y);for(;f<i;++f)d[f]=r[f];return new kn(d,this._parents,this._name,this._id)}function hw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function gw(t,r,o){var i,l,c=hw(r)?Mc:ln;return function(){var d=c(this,t),f=d.on;f!==i&&(l=(i=f).copy()).on(r,o),d.on=l}}function xw(t,r){var o=this._id;return arguments.length<2?Kt(this.node(),o).on.on(t):this.each(gw(o,t,r))}function yw(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function vw(){return this.on("end.remove",yw(this._id))}function ww(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Ic(t));for(var i=this._groups,l=i.length,c=new Array(l),d=0;d<l;++d)for(var f=i[d],g=f.length,h=c[d]=new Array(g),x,m,y=0;y<g;++y)(x=f[y])&&(m=t.call(x,x.__data__,y,f))&&("__data__"in x&&(m.__data__=x.__data__),h[y]=m,zl(h[y],r,o,y,h,Kt(x,o)));return new kn(c,this._parents,r,o)}function Sw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Hm(t));for(var i=this._groups,l=i.length,c=[],d=[],f=0;f<l;++f)for(var g=i[f],h=g.length,x,m=0;m<h;++m)if(x=g[m]){for(var y=t.call(x,x.__data__,m,g),w,S=Kt(x,o),j=0,I=y.length;j<I;++j)(w=y[j])&&zl(w,r,o,j,y,S);c.push(y),d.push(x)}return new kn(c,d,r,o)}var Nw=Ts.prototype.constructor;function kw(){return new Nw(this._groups,this._parents)}function Cw(t,r){var o,i,l;return function(){var c=go(this,t),d=(this.style.removeProperty(t),go(this,t));return c===d?null:c===o&&d===i?l:l=r(o=c,i=d)}}function fh(t){return function(){this.style.removeProperty(t)}}function Iw(t,r,o){var i,l=o+"",c;return function(){var d=go(this,t);return d===l?null:d===i?c:c=r(i=d,o)}}function jw(t,r,o){var i,l,c;return function(){var d=go(this,t),f=o(this),g=f+"";return f==null&&(g=f=(this.style.removeProperty(t),go(this,t))),d===g?null:d===i&&g===l?c:(l=g,c=r(i=d,f))}}function bw(t,r){var o,i,l,c="style."+r,d="end."+c,f;return function(){var g=ln(this,t),h=g.on,x=g.value[c]==null?f||(f=fh(r)):void 0;(h!==o||l!==x)&&(i=(o=h).copy()).on(d,l=x),g.on=i}}function Ew(t,r,o){var i=(t+="")=="transform"?_v:dh;return r==null?this.styleTween(t,Cw(t,i)).on("end.style."+t,fh(t)):typeof r=="function"?this.styleTween(t,jw(t,i,Pc(this,"style."+t,r))).each(bw(this._id,t)):this.styleTween(t,Iw(t,i,r),o).on("end.style."+t,null)}function _w(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function Mw(t,r,o){var i,l;function c(){var d=r.apply(this,arguments);return d!==l&&(i=(l=d)&&_w(t,d,o)),i}return c._value=r,c}function Pw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,Mw(t,r,o??""))}function Dw(t){return function(){this.textContent=t}}function Tw(t){return function(){var r=t(this);this.textContent=r??""}}function Ow(t){return this.tween("text",typeof t=="function"?Tw(Pc(this,"text",t)):Dw(t==null?"":t+""))}function Aw(t){return function(r){this.textContent=t.call(this,r)}}function Lw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&Aw(l)),r}return i._value=t,i}function $w(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Lw(t))}function zw(){for(var t=this._name,r=this._id,o=ph(),i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,g,h=0;h<f;++h)if(g=d[h]){var x=Kt(g,r);zl(g,t,o,h,d,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new kn(i,this._parents,t,o)}function Rw(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(c,d){var f={value:d},g={value:function(){--l===0&&c()}};o.each(function(){var h=ln(this,i),x=h.on;x!==t&&(r=(t=x).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(g)),h.on=r}),l===0&&c()})}var Fw=0;function kn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function ph(){return++Fw}var wn=Ts.prototype;kn.prototype={constructor:kn,select:ww,selectAll:Sw,selectChild:wn.selectChild,selectChildren:wn.selectChildren,filter:pw,merge:mw,selection:kw,transition:zw,call:wn.call,nodes:wn.nodes,node:wn.node,size:wn.size,empty:wn.empty,each:wn.each,on:xw,attr:qv,attrTween:nw,style:Ew,styleTween:Pw,text:Ow,textTween:$w,remove:vw,tween:Wv,delay:sw,duration:aw,ease:cw,easeVarying:fw,end:Rw,[Symbol.iterator]:wn[Symbol.iterator]};function Hw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Vw={time:null,delay:0,duration:250,ease:Hw};function Bw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Ww(t){var r,o;t instanceof kn?(r=t._id,t=t._name):(r=ph(),(o=Vw).time=_c(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,g,h=0;h<f;++h)(g=d[h])&&zl(g,t,r,h,d,o||Bw(g,r));return new kn(i,this._parents,t,r)}Ts.prototype.interrupt=Hv;Ts.prototype.transition=Ww;const ul=t=>()=>t;function Uw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function Nn(t,r,o){this.k=t,this.x=r,this.y=o}Nn.prototype={constructor:Nn,scale:function(t){return t===1?this:new Nn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new Nn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rl=new Nn(1,0,0);mh.prototype=Nn.prototype;function mh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Rl;return t.__zoom}function Ku(t){t.stopImmediatePropagation()}function hs(t){t.preventDefault(),t.stopImmediatePropagation()}function Yw(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Xw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function zp(){return this.__zoom||Rl}function Gw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Kw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],c=t.invertY(r[0][1])-o[0][1],d=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function hh(){var t=Yw,r=Xw,o=Qw,i=Gw,l=Kw,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,g=yl,h=Al("start","zoom","end"),x,m,y,w=500,S=150,j=0,I=10;function C(A){A.property("__zoom",zp).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",Q).on("dblclick.zoom",V).filter(l).on("touchstart.zoom",z).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(A,H,F,_){var M=A.selection?A.selection():A;M.property("__zoom",zp),A!==M?P(A,H,F,_):M.interrupt().each(function(){$(this,arguments).event(_).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},C.scaleBy=function(A,H,F,_){C.scaleTo(A,function(){var M=this.__zoom.k,N=typeof H=="function"?H.apply(this,arguments):H;return M*N},F,_)},C.scaleTo=function(A,H,F,_){C.transform(A,function(){var M=r.apply(this,arguments),N=this.__zoom,R=F==null?D(M):typeof F=="function"?F.apply(this,arguments):F,b=N.invert(R),O=typeof H=="function"?H.apply(this,arguments):H;return o(k(T(N,O),R,b),M,d)},F,_)},C.translateBy=function(A,H,F,_){C.transform(A,function(){return o(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof F=="function"?F.apply(this,arguments):F),r.apply(this,arguments),d)},null,_)},C.translateTo=function(A,H,F,_,M){C.transform(A,function(){var N=r.apply(this,arguments),R=this.__zoom,b=_==null?D(N):typeof _=="function"?_.apply(this,arguments):_;return o(Rl.translate(b[0],b[1]).scale(R.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof F=="function"?-F.apply(this,arguments):-F),N,d)},_,M)};function T(A,H){return H=Math.max(c[0],Math.min(c[1],H)),H===A.k?A:new Nn(H,A.x,A.y)}function k(A,H,F){var _=H[0]-F[0]*A.k,M=H[1]-F[1]*A.k;return _===A.x&&M===A.y?A:new Nn(A.k,_,M)}function D(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function P(A,H,F,_){A.on("start.zoom",function(){$(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(_).end()}).tween("zoom",function(){var M=this,N=arguments,R=$(M,N).event(_),b=r.apply(M,N),O=F==null?D(b):typeof F=="function"?F.apply(M,N):F,Z=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),q=M.__zoom,ne=typeof H=="function"?H.apply(M,N):H,oe=g(q.invert(O).concat(Z/q.k),ne.invert(O).concat(Z/ne.k));return function(ue){if(ue===1)ue=ne;else{var re=oe(ue),ce=Z/re[2];ue=new Nn(ce,O[0]-re[0]*ce,O[1]-re[1]*ce)}R.zoom(null,ue)}})}function $(A,H,F){return!F&&A.__zooming||new W(A,H)}function W(A,H){this.that=A,this.args=H,this.active=0,this.sourceEvent=null,this.extent=r.apply(A,H),this.taps=0}W.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,H){return this.mouse&&A!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var H=Ct(this.that).datum();h.call(A,this.that,new Uw(A,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:h}),H)}};function K(A,...H){if(!t.apply(this,arguments))return;var F=$(this,H).event(A),_=this.__zoom,M=Math.max(c[0],Math.min(c[1],_.k*Math.pow(2,i.apply(this,arguments)))),N=Bt(A);if(F.wheel)(F.mouse[0][0]!==N[0]||F.mouse[0][1]!==N[1])&&(F.mouse[1]=_.invert(F.mouse[0]=N)),clearTimeout(F.wheel);else{if(_.k===M)return;F.mouse=[N,_.invert(N)],Sl(this),F.start()}hs(A),F.wheel=setTimeout(R,S),F.zoom("mouse",o(k(T(_,M),F.mouse[0],F.mouse[1]),F.extent,d));function R(){F.wheel=null,F.end()}}function Q(A,...H){if(y||!t.apply(this,arguments))return;var F=A.currentTarget,_=$(this,H,!0).event(A),M=Ct(A.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",Z,!0),N=Bt(A,F),R=A.clientX,b=A.clientY;Zm(A.view),Ku(A),_.mouse=[N,this.__zoom.invert(N)],Sl(this),_.start();function O(q){if(hs(q),!_.moved){var ne=q.clientX-R,oe=q.clientY-b;_.moved=ne*ne+oe*oe>j}_.event(q).zoom("mouse",o(k(_.that.__zoom,_.mouse[0]=Bt(q,F),_.mouse[1]),_.extent,d))}function Z(q){M.on("mousemove.zoom mouseup.zoom",null),Jm(q.view,_.moved),hs(q),_.event(q).end()}}function V(A,...H){if(t.apply(this,arguments)){var F=this.__zoom,_=Bt(A.changedTouches?A.changedTouches[0]:A,this),M=F.invert(_),N=F.k*(A.shiftKey?.5:2),R=o(k(T(F,N),_,M),r.apply(this,H),d);hs(A),f>0?Ct(this).transition().duration(f).call(P,R,_,A):Ct(this).call(C.transform,R,_,A)}}function z(A,...H){if(t.apply(this,arguments)){var F=A.touches,_=F.length,M=$(this,H,A.changedTouches.length===_).event(A),N,R,b,O;for(Ku(A),R=0;R<_;++R)b=F[R],O=Bt(b,this),O=[O,this.__zoom.invert(O),b.identifier],M.touch0?!M.touch1&&M.touch0[2]!==O[2]&&(M.touch1=O,M.taps=0):(M.touch0=O,N=!0,M.taps=1+!!x);x&&(x=clearTimeout(x)),N&&(M.taps<2&&(m=O[0],x=setTimeout(function(){x=null},w)),Sl(this),M.start())}}function U(A,...H){if(this.__zooming){var F=$(this,H).event(A),_=A.changedTouches,M=_.length,N,R,b,O;for(hs(A),N=0;N<M;++N)R=_[N],b=Bt(R,this),F.touch0&&F.touch0[2]===R.identifier?F.touch0[0]=b:F.touch1&&F.touch1[2]===R.identifier&&(F.touch1[0]=b);if(R=F.that.__zoom,F.touch1){var Z=F.touch0[0],q=F.touch0[1],ne=F.touch1[0],oe=F.touch1[1],ue=(ue=ne[0]-Z[0])*ue+(ue=ne[1]-Z[1])*ue,re=(re=oe[0]-q[0])*re+(re=oe[1]-q[1])*re;R=T(R,Math.sqrt(ue/re)),b=[(Z[0]+ne[0])/2,(Z[1]+ne[1])/2],O=[(q[0]+oe[0])/2,(q[1]+oe[1])/2]}else if(F.touch0)b=F.touch0[0],O=F.touch0[1];else return;F.zoom("touch",o(k(R,b,O),F.extent,d))}}function X(A,...H){if(this.__zooming){var F=$(this,H).event(A),_=A.changedTouches,M=_.length,N,R;for(Ku(A),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),N=0;N<M;++N)R=_[N],F.touch0&&F.touch0[2]===R.identifier?delete F.touch0:F.touch1&&F.touch1[2]===R.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(R=Bt(R,this),Math.hypot(m[0]-R[0],m[1]-R[1])<I)){var b=Ct(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return C.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:ul(+A),C):i},C.filter=function(A){return arguments.length?(t=typeof A=="function"?A:ul(!!A),C):t},C.touchable=function(A){return arguments.length?(l=typeof A=="function"?A:ul(!!A),C):l},C.extent=function(A){return arguments.length?(r=typeof A=="function"?A:ul([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),C):r},C.scaleExtent=function(A){return arguments.length?(c[0]=+A[0],c[1]=+A[1],C):[c[0],c[1]]},C.translateExtent=function(A){return arguments.length?(d[0][0]=+A[0][0],d[1][0]=+A[1][0],d[0][1]=+A[0][1],d[1][1]=+A[1][1],C):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},C.constrain=function(A){return arguments.length?(o=A,C):o},C.duration=function(A){return arguments.length?(f=+A,C):f},C.interpolate=function(A){return arguments.length?(g=A,C):g},C.on=function(){var A=h.on.apply(h,arguments);return A===h?C:A},C.clickDistance=function(A){return arguments.length?(j=(A=+A)*A,C):Math.sqrt(j)},C.tapDistance=function(A){return arguments.length?(I=+A,C):I},C}const sn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},bs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gh=["Enter"," ","Escape"],xh={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var yo;(function(t){t.Strict="strict",t.Loose="loose"})(yo||(yo={}));var Nr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Nr||(Nr={}));var Es;(function(t){t.Partial="partial",t.Full="full"})(Es||(Es={}));const yh={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Kn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Kn||(Kn={}));var Ml;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ml||(Ml={}));var ye;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ye||(ye={}));const Rp={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function vh(t){return t===null?null:t?"valid":"invalid"}const wh=t=>"id"in t&&"source"in t&&"target"in t,qw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Dc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),As=(t,r=[0,0])=>{const{width:o,height:i}=Cn(t),l=t.origin??r,c=o*l[0],d=i*l[1];return{x:t.position.x-c,y:t.position.y-d}},Zw=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const c=typeof l=="string";let d=!r.nodeLookup&&!c?l:void 0;r.nodeLookup&&(d=c?r.nodeLookup.get(l):Dc(l)?l:r.nodeLookup.get(l.id));const f=d?Pl(d,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fl(i,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Hl(o)},Ls=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Fl(o,Pl(l)),i=!0)}),i?Hl(o):{x:0,y:0,width:0,height:0}},Tc=(t,r,[o,i,l]=[0,0,1],c=!1,d=!1)=>{const f={...zs(r,[o,i,l]),width:r.width/l,height:r.height/l},g=[];for(const h of t.values()){const{measured:x,selectable:m=!0,hidden:y=!1}=h;if(d&&!m||y)continue;const w=x.width??h.width??h.initialWidth??null,S=x.height??h.height??h.initialHeight??null,j=_s(f,wo(h)),I=(w??0)*(S??0),C=c&&j>0;(!h.internals.handleBounds||C||j>=I||h.dragging)&&g.push(h)}return g},Jw=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function e1(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function t1({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:c},d){if(t.size===0)return Promise.resolve(!0);const f=e1(t,d),g=Ls(f),h=Oc(g,r,o,(d==null?void 0:d.minZoom)??l,(d==null?void 0:d.maxZoom)??c,(d==null?void 0:d.padding)??.1);return await i.setViewport(h,{duration:d==null?void 0:d.duration,ease:d==null?void 0:d.ease,interpolate:d==null?void 0:d.interpolate}),Promise.resolve(!0)}function Sh({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:c}){const d=o.get(t),f=d.parentId?o.get(d.parentId):void 0,{x:g,y:h}=f?f.internals.positionAbsolute:{x:0,y:0},x=d.origin??i;let m=d.extent||l;if(d.extent==="parent"&&!d.expandParent)if(!f)c==null||c("005",sn.error005());else{const w=f.measured.width,S=f.measured.height;w&&S&&(m=[[g,h],[g+w,h+S]])}else f&&So(d.extent)&&(m=[[d.extent[0][0]+g,d.extent[0][1]+h],[d.extent[1][0]+g,d.extent[1][1]+h]]);const y=So(m)?Ir(r,m,d.measured):r;return(d.measured.width===void 0||d.measured.height===void 0)&&(c==null||c("015",sn.error015())),{position:{x:y.x-g+(d.measured.width??0)*x[0],y:y.y-h+(d.measured.height??0)*x[1]},positionAbsolute:y}}async function n1({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const c=new Set(t.map(y=>y.id)),d=[];for(const y of o){if(y.deletable===!1)continue;const w=c.has(y.id),S=!w&&y.parentId&&d.find(j=>j.id===y.parentId);(w||S)&&d.push(y)}const f=new Set(r.map(y=>y.id)),g=i.filter(y=>y.deletable!==!1),x=Jw(d,g);for(const y of g)f.has(y.id)&&!x.find(S=>S.id===y.id)&&x.push(y);if(!l)return{edges:x,nodes:d};const m=await l({nodes:d,edges:x});return typeof m=="boolean"?m?{edges:x,nodes:d}:{edges:[],nodes:[]}:m}const vo=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),Ir=(t={x:0,y:0},r,o)=>({x:vo(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:vo(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function Nh(t,r,o){const{width:i,height:l}=Cn(o),{x:c,y:d}=o.internals.positionAbsolute;return Ir(t,[[c,d],[c+i,d+l]],r)}const Fp=(t,r,o)=>t<r?vo(Math.abs(t-r),1,r)/r:t>o?-vo(Math.abs(t-o),1,r)/r:0,kh=(t,r,o=15,i=40)=>{const l=Fp(t.x,i,r.width-i)*o,c=Fp(t.y,i,r.height-i)*o;return[l,c]},Fl=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),hc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Hl=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),wo=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Dc(t)?t.internals.positionAbsolute:As(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0}},Pl=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Dc(t)?t.internals.positionAbsolute:As(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0)}},Ch=(t,r)=>Hl(Fl(hc(t),hc(r))),_s=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Hp=t=>Xt(t.width)&&Xt(t.height)&&Xt(t.x)&&Xt(t.y),Xt=t=>!isNaN(t)&&isFinite(t),r1=(t,r)=>{},$s=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),zs=({x:t,y:r},[o,i,l],c=!1,d=[1,1])=>{const f={x:(t-o)/l,y:(r-i)/l};return c?$s(f,d):f},Dl=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function ao(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function o1(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=ao(t,o),l=ao(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=ao(t.top??t.y??0,o),l=ao(t.bottom??t.y??0,o),c=ao(t.left??t.x??0,r),d=ao(t.right??t.x??0,r);return{top:i,right:d,bottom:l,left:c,x:c+d,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function s1(t,r,o,i,l,c){const{x:d,y:f}=Dl(t,[r,o,i]),{x:g,y:h}=Dl({x:t.x+t.width,y:t.y+t.height},[r,o,i]),x=l-g,m=c-h;return{left:Math.floor(d),top:Math.floor(f),right:Math.floor(x),bottom:Math.floor(m)}}const Oc=(t,r,o,i,l,c)=>{const d=o1(c,r,o),f=(r-d.x)/t.width,g=(o-d.y)/t.height,h=Math.min(f,g),x=vo(h,i,l),m=t.x+t.width/2,y=t.y+t.height/2,w=r/2-m*x,S=o/2-y*x,j=s1(t,w,S,x,r,o),I={left:Math.min(j.left-d.left,0),top:Math.min(j.top-d.top,0),right:Math.min(j.right-d.right,0),bottom:Math.min(j.bottom-d.bottom,0)};return{x:w-I.left+I.right,y:S-I.top+I.bottom,zoom:x}},Ms=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function So(t){return t!=null&&t!=="parent"}function Cn(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function Ih(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function jh(t,r={width:0,height:0},o,i,l){const c={...t},d=i.get(o);if(d){const f=d.origin||l;c.x+=d.internals.positionAbsolute.x-(r.width??0)*f[0],c.y+=d.internals.positionAbsolute.y-(r.height??0)*f[1]}return c}function Vp(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function i1(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function l1(t){return{...xh,...t||{}}}function Ns(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:c,y:d}=Gt(t),f=zs({x:c-((l==null?void 0:l.left)??0),y:d-((l==null?void 0:l.top)??0)},i),{x:g,y:h}=o?$s(f,r):f;return{xSnapped:g,ySnapped:h,...f}}const Ac=t=>({width:t.offsetWidth,height:t.offsetHeight}),bh=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},a1=["INPUT","SELECT","TEXTAREA"];function Eh(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:a1.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const _h=t=>"clientX"in t,Gt=(t,r)=>{var c,d;const o=_h(t),i=o?t.clientX:(c=t.touches)==null?void 0:c[0].clientX,l=o?t.clientY:(d=t.touches)==null?void 0:d[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Bp=(t,r,o,i,l)=>{const c=r.querySelectorAll(`.${t}`);return!c||!c.length?null:Array.from(c).map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:l,position:d.getAttribute("data-handlepos"),x:(f.left-o.left)/i,y:(f.top-o.top)/i,...Ac(d)}})};function Mh({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:f}){const g=t*.125+l*.375+d*.375+o*.125,h=r*.125+c*.375+f*.375+i*.125,x=Math.abs(g-t),m=Math.abs(h-r);return[g,h,x,m]}function cl(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Wp({pos:t,x1:r,y1:o,x2:i,y2:l,c}){switch(t){case ye.Left:return[r-cl(r-i,c),o];case ye.Right:return[r+cl(i-r,c),o];case ye.Top:return[r,o-cl(o-l,c)];case ye.Bottom:return[r,o+cl(l-o,c)]}}function Vl({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:c=ye.Top,curvature:d=.25}){const[f,g]=Wp({pos:o,x1:t,y1:r,x2:i,y2:l,c:d}),[h,x]=Wp({pos:c,x1:i,y1:l,x2:t,y2:r,c:d}),[m,y,w,S]=Mh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:f,sourceControlY:g,targetControlX:h,targetControlY:x});return[`M${t},${r} C${f},${g} ${h},${x} ${i},${l}`,m,y,w,S]}function Ph({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,c=o<t?o+l:o-l,d=Math.abs(i-r)/2,f=i<r?i+d:i-d;return[c,f,l,d]}function u1({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:c="basic"}){if(c==="manual")return i;const d=l&&o?i+1e3:i,f=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return d+f}function c1({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const c=Fl(Pl(t),Pl(r));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return _s(d,Hl(c))>0}const d1=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,f1=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),p1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||d1;let l;return wh(t)?l={...t}:l={...t,id:i(t)},f1(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Dh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,c,d,f]=Ph({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,c,d,f]}const Up={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},m1=({source:t,sourcePosition:r=ye.Bottom,target:o})=>r===ye.Left||r===ye.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},Yp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function h1({source:t,sourcePosition:r=ye.Bottom,target:o,targetPosition:i=ye.Top,center:l,offset:c,stepPosition:d}){const f=Up[r],g=Up[i],h={x:t.x+f.x*c,y:t.y+f.y*c},x={x:o.x+g.x*c,y:o.y+g.y*c},m=m1({source:h,sourcePosition:r,target:x}),y=m.x!==0?"x":"y",w=m[y];let S=[],j,I;const C={x:0,y:0},T={x:0,y:0},[,,k,D]=Ph({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(f[y]*g[y]===-1){y==="x"?(j=l.x??h.x+(x.x-h.x)*d,I=l.y??(h.y+x.y)/2):(j=l.x??(h.x+x.x)/2,I=l.y??h.y+(x.y-h.y)*d);const $=[{x:j,y:h.y},{x:j,y:x.y}],W=[{x:h.x,y:I},{x:x.x,y:I}];f[y]===w?S=y==="x"?$:W:S=y==="x"?W:$}else{const $=[{x:h.x,y:x.y}],W=[{x:x.x,y:h.y}];if(y==="x"?S=f.x===w?W:$:S=f.y===w?$:W,r===i){const U=Math.abs(t[y]-o[y]);if(U<=c){const X=Math.min(c-1,c-U);f[y]===w?C[y]=(h[y]>t[y]?-1:1)*X:T[y]=(x[y]>o[y]?-1:1)*X}}if(r!==i){const U=y==="x"?"y":"x",X=f[y]===g[U],A=h[U]>x[U],H=h[U]<x[U];(f[y]===1&&(!X&&A||X&&H)||f[y]!==1&&(!X&&H||X&&A))&&(S=y==="x"?$:W)}const K={x:h.x+C.x,y:h.y+C.y},Q={x:x.x+T.x,y:x.y+T.y},V=Math.max(Math.abs(K.x-S[0].x),Math.abs(Q.x-S[0].x)),z=Math.max(Math.abs(K.y-S[0].y),Math.abs(Q.y-S[0].y));V>=z?(j=(K.x+Q.x)/2,I=S[0].y):(j=S[0].x,I=(K.y+Q.y)/2)}return[[t,{x:h.x+C.x,y:h.y+C.y},...S,{x:x.x+T.x,y:x.y+T.y},o],j,I,k,D]}function g1(t,r,o,i){const l=Math.min(Yp(t,r)/2,Yp(r,o)/2,i),{x:c,y:d}=r;if(t.x===c&&c===o.x||t.y===d&&d===o.y)return`L${c} ${d}`;if(t.y===d){const h=t.x<o.x?-1:1,x=t.y<o.y?1:-1;return`L ${c+l*h},${d}Q ${c},${d} ${c},${d+l*x}`}const f=t.x<o.x?1:-1,g=t.y<o.y?-1:1;return`L ${c},${d+l*g}Q ${c},${d} ${c+l*f},${d}`}function gc({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:c=ye.Top,borderRadius:d=5,centerX:f,centerY:g,offset:h=20,stepPosition:x=.5}){const[m,y,w,S,j]=h1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:c,center:{x:f,y:g},offset:h,stepPosition:x});return[m.reduce((C,T,k)=>{let D="";return k>0&&k<m.length-1?D=g1(m[k-1],T,m[k+1],d):D=`${k===0?"M":"L"}${T.x} ${T.y}`,C+=D,C},""),y,w,S,j]}function Xp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function x1(t){var m;const{sourceNode:r,targetNode:o}=t;if(!Xp(r)||!Xp(o))return null;const i=r.internals.handleBounds||Gp(r.handles),l=o.internals.handleBounds||Gp(o.handles),c=Kp((i==null?void 0:i.source)??[],t.sourceHandle),d=Kp(t.connectionMode===yo.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!c||!d)return(m=t.onError)==null||m.call(t,"008",sn.error008(c?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=(c==null?void 0:c.position)||ye.Bottom,g=(d==null?void 0:d.position)||ye.Top,h=jr(r,c,f),x=jr(o,d,g);return{sourceX:h.x,sourceY:h.y,targetX:x.x,targetY:x.y,sourcePosition:f,targetPosition:g}}function Gp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function jr(t,r,o=ye.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,c=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:d,height:f}=r??Cn(t);if(i)return{x:l+d/2,y:c+f/2};switch((r==null?void 0:r.position)??o){case ye.Top:return{x:l+d/2,y:c};case ye.Right:return{x:l+d,y:c+f/2};case ye.Bottom:return{x:l+d/2,y:c+f};case ye.Left:return{x:l,y:c+f/2}}}function Kp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function xc(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function y1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const c=new Set;return t.reduce((d,f)=>([f.markerStart||i,f.markerEnd||l].forEach(g=>{if(g&&typeof g=="object"){const h=xc(g,r);c.has(h)||(d.push({id:h,color:g.color||o,...g}),c.add(h))}}),d),[]).sort((d,f)=>d.id.localeCompare(f.id))}const Th=1e3,v1=10,Lc={nodeOrigin:[0,0],nodeExtent:bs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},w1={...Lc,checkEquality:!0};function $c(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function S1(t,r,o){const i=$c(Lc,o);for(const l of t.values())if(l.parentId)Rc(l,t,r,i);else{const c=As(l,i.nodeOrigin),d=So(l.extent)?l.extent:i.nodeExtent,f=Ir(c,d,Cn(l));l.internals.positionAbsolute=f}}function N1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const c={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(c):l.type==="target"&&i.push(c)}return{source:o,target:i}}function zc(t){return t==="manual"}function yc(t,r,o,i={}){var h,x;const l=$c(w1,i),c={i:0},d=new Map(r),f=l!=null&&l.elevateNodesOnSelect&&!zc(l.zIndexMode)?Th:0;let g=t.length>0;r.clear(),o.clear();for(const m of t){let y=d.get(m.id);if(l.checkEquality&&m===(y==null?void 0:y.internals.userNode))r.set(m.id,y);else{const w=As(m,l.nodeOrigin),S=So(m.extent)?m.extent:l.nodeExtent,j=Ir(w,S,Cn(m));y={...l.defaults,...m,measured:{width:(h=m.measured)==null?void 0:h.width,height:(x=m.measured)==null?void 0:x.height},internals:{positionAbsolute:j,handleBounds:N1(m,y),z:Oh(m,f,l.zIndexMode),userNode:m}},r.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(g=!1),m.parentId&&Rc(y,r,o,i,c)}return g}function k1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function Rc(t,r,o,i,l){const{elevateNodesOnSelect:c,nodeOrigin:d,nodeExtent:f,zIndexMode:g}=$c(Lc,i),h=t.parentId,x=r.get(h);if(!x){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}k1(t,o),l&&!x.parentId&&x.internals.rootParentIndex===void 0&&g==="auto"&&(x.internals.rootParentIndex=++l.i,x.internals.z=x.internals.z+l.i*v1),l&&x.internals.rootParentIndex!==void 0&&(l.i=x.internals.rootParentIndex);const m=c&&!zc(g)?Th:0,{x:y,y:w,z:S}=C1(t,x,d,f,m,g),{positionAbsolute:j}=t.internals,I=y!==j.x||w!==j.y;(I||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:I?{x:y,y:w}:j,z:S}})}function Oh(t,r,o){const i=Xt(t.zIndex)?t.zIndex:0;return zc(o)?i:i+(t.selected?r:0)}function C1(t,r,o,i,l,c){const{x:d,y:f}=r.internals.positionAbsolute,g=Cn(t),h=As(t,o),x=So(t.extent)?Ir(h,t.extent,g):h;let m=Ir({x:d+x.x,y:f+x.y},i,g);t.extent==="parent"&&(m=Nh(m,g,r));const y=Oh(t,l,c),w=r.internals.z??0;return{x:m.x,y:m.y,z:w>=y?w+1:y}}function Fc(t,r,o,i=[0,0]){var d;const l=[],c=new Map;for(const f of t){const g=r.get(f.parentId);if(!g)continue;const h=((d=c.get(f.parentId))==null?void 0:d.expandedRect)??wo(g),x=Ch(h,f.rect);c.set(f.parentId,{expandedRect:x,parent:g})}return c.size>0&&c.forEach(({expandedRect:f,parent:g},h)=>{var k;const x=g.internals.positionAbsolute,m=Cn(g),y=g.origin??i,w=f.x<x.x?Math.round(Math.abs(x.x-f.x)):0,S=f.y<x.y?Math.round(Math.abs(x.y-f.y)):0,j=Math.max(m.width,Math.round(f.width)),I=Math.max(m.height,Math.round(f.height)),C=(j-m.width)*y[0],T=(I-m.height)*y[1];(w>0||S>0||C||T)&&(l.push({id:h,type:"position",position:{x:g.position.x-w+C,y:g.position.y-S+T}}),(k=o.get(h))==null||k.forEach(D=>{t.some(P=>P.id===D.id)||l.push({id:D.id,type:"position",position:{x:D.position.x+w,y:D.position.y+S}})})),(m.width<f.width||m.height<f.height||w||S)&&l.push({id:h,type:"dimensions",setAttributes:!0,dimensions:{width:j+(w?y[0]*w-C:0),height:I+(S?y[1]*S-T:0)}})}),l}function I1(t,r,o,i,l,c,d){const f=i==null?void 0:i.querySelector(".xyflow__viewport");let g=!1;if(!f)return{changes:[],updatedInternals:g};const h=[],x=window.getComputedStyle(f),{m22:m}=new window.DOMMatrixReadOnly(x.transform),y=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),g=!0;continue}const j=Ac(w.nodeElement),I=S.measured.width!==j.width||S.measured.height!==j.height;if(!!(j.width&&j.height&&(I||!S.internals.handleBounds||w.force))){const T=w.nodeElement.getBoundingClientRect(),k=So(S.extent)?S.extent:c;let{positionAbsolute:D}=S.internals;S.parentId&&S.extent==="parent"?D=Nh(D,j,r.get(S.parentId)):k&&(D=Ir(D,k,j));const P={...S,measured:j,internals:{...S.internals,positionAbsolute:D,handleBounds:{source:Bp("source",w.nodeElement,T,m,S.id),target:Bp("target",w.nodeElement,T,m,S.id)}}};r.set(S.id,P),S.parentId&&Rc(P,r,o,{nodeOrigin:l,zIndexMode:d}),g=!0,I&&(h.push({id:S.id,type:"dimensions",dimensions:j}),S.expandParent&&S.parentId&&y.push({id:S.id,parentId:S.parentId,rect:wo(P,l)}))}}if(y.length>0){const w=Fc(y,r,o,l);h.push(...w)}return{changes:h,updatedInternals:g}}async function j1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:c}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const d=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,c]],i),f=!!d&&(d.x!==o[0]||d.y!==o[1]||d.k!==o[2]);return Promise.resolve(f)}function Qp(t,r,o,i,l,c){let d=l;const f=i.get(d)||new Map;i.set(d,f.set(o,r)),d=`${l}-${t}`;const g=i.get(d)||new Map;if(i.set(d,g.set(o,r)),c){d=`${l}-${t}-${c}`;const h=i.get(d)||new Map;i.set(d,h.set(o,r))}}function Ah(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:c,sourceHandle:d=null,targetHandle:f=null}=i,g={edgeId:i.id,source:l,target:c,sourceHandle:d,targetHandle:f},h=`${l}-${d}--${c}-${f}`,x=`${c}-${f}--${l}-${d}`;Qp("source",g,x,t,l,d),Qp("target",g,h,t,c,f),r.set(i.id,i)}}function Lh(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:Lh(o,r):!1}function qp(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function b1(t,r,o,i){const l=new Map;for(const[c,d]of t)if((d.selected||d.id===i)&&(!d.parentId||!Lh(d,t))&&(d.draggable||r&&typeof d.draggable>"u")){const f=t.get(c);f&&l.set(c,{id:c,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return l}function Qu({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var d,f,g;const l=[];for(const[h,x]of r){const m=(d=o.get(h))==null?void 0:d.internals.userNode;m&&l.push({...m,position:x.position,dragging:i})}if(!t)return[l[0],l];const c=(f=o.get(t))==null?void 0:f.internals.userNode;return[c?{...c,position:((g=r.get(t))==null?void 0:g.position)||c.position,dragging:i}:l[0],l]}function E1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const c={x:o-l.distance.x,y:i-l.distance.y},d=$s(c,r);return{x:d.x-c.x,y:d.y-c.y}}function _1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let c={x:null,y:null},d=0,f=new Map,g=!1,h={x:0,y:0},x=null,m=!1,y=null,w=!1,S=!1,j=null;function I({noDragClassName:T,handleSelector:k,domNode:D,isSelectable:P,nodeId:$,nodeClickDistance:W=0}){y=Ct(D);function K({x:U,y:X}){const{nodeLookup:A,nodeExtent:H,snapGrid:F,snapToGrid:_,nodeOrigin:M,onNodeDrag:N,onSelectionDrag:R,onError:b,updateNodePositions:O}=r();c={x:U,y:X};let Z=!1;const q=f.size>1,ne=q&&H?hc(Ls(f)):null,oe=q&&_?E1({dragItems:f,snapGrid:F,x:U,y:X}):null;for(const[ue,re]of f){if(!A.has(ue))continue;let ce={x:U-re.distance.x,y:X-re.distance.y};_&&(ce=oe?{x:Math.round(ce.x+oe.x),y:Math.round(ce.y+oe.y)}:$s(ce,F));let ve=null;if(q&&H&&!re.extent&&ne){const{positionAbsolute:we}=re.internals,be=we.x-ne.x+H[0][0],Te=we.x+re.measured.width-ne.x2+H[1][0],Ee=we.y-ne.y+H[0][1],Xe=we.y+re.measured.height-ne.y2+H[1][1];ve=[[be,Ee],[Te,Xe]]}const{position:Ce,positionAbsolute:ke}=Sh({nodeId:ue,nextPosition:ce,nodeLookup:A,nodeExtent:ve||H,nodeOrigin:M,onError:b});Z=Z||re.position.x!==Ce.x||re.position.y!==Ce.y,re.position=Ce,re.internals.positionAbsolute=ke}if(S=S||Z,!!Z&&(O(f,!0),j&&(i||N||!$&&R))){const[ue,re]=Qu({nodeId:$,dragItems:f,nodeLookup:A});i==null||i(j,f,ue,re),N==null||N(j,ue,re),$||R==null||R(j,re)}}async function Q(){if(!x)return;const{transform:U,panBy:X,autoPanSpeed:A,autoPanOnNodeDrag:H}=r();if(!H){g=!1,cancelAnimationFrame(d);return}const[F,_]=kh(h,x,A);(F!==0||_!==0)&&(c.x=(c.x??0)-F/U[2],c.y=(c.y??0)-_/U[2],await X({x:F,y:_})&&K(c)),d=requestAnimationFrame(Q)}function V(U){var q;const{nodeLookup:X,multiSelectionActive:A,nodesDraggable:H,transform:F,snapGrid:_,snapToGrid:M,selectNodesOnDrag:N,onNodeDragStart:R,onSelectionDragStart:b,unselectNodesAndEdges:O}=r();m=!0,(!N||!P)&&!A&&$&&((q=X.get($))!=null&&q.selected||O()),P&&N&&$&&(t==null||t($));const Z=Ns(U.sourceEvent,{transform:F,snapGrid:_,snapToGrid:M,containerBounds:x});if(c=Z,f=b1(X,H,Z,$),f.size>0&&(o||R||!$&&b)){const[ne,oe]=Qu({nodeId:$,dragItems:f,nodeLookup:X});o==null||o(U.sourceEvent,f,ne,oe),R==null||R(U.sourceEvent,ne,oe),$||b==null||b(U.sourceEvent,oe)}}const z=eh().clickDistance(W).on("start",U=>{const{domNode:X,nodeDragThreshold:A,transform:H,snapGrid:F,snapToGrid:_}=r();x=(X==null?void 0:X.getBoundingClientRect())||null,w=!1,S=!1,j=U.sourceEvent,A===0&&V(U),c=Ns(U.sourceEvent,{transform:H,snapGrid:F,snapToGrid:_,containerBounds:x}),h=Gt(U.sourceEvent,x)}).on("drag",U=>{const{autoPanOnNodeDrag:X,transform:A,snapGrid:H,snapToGrid:F,nodeDragThreshold:_,nodeLookup:M}=r(),N=Ns(U.sourceEvent,{transform:A,snapGrid:H,snapToGrid:F,containerBounds:x});if(j=U.sourceEvent,(U.sourceEvent.type==="touchmove"&&U.sourceEvent.touches.length>1||$&&!M.has($))&&(w=!0),!w){if(!g&&X&&m&&(g=!0,Q()),!m){const R=Gt(U.sourceEvent,x),b=R.x-h.x,O=R.y-h.y;Math.sqrt(b*b+O*O)>_&&V(U)}(c.x!==N.xSnapped||c.y!==N.ySnapped)&&f&&m&&(h=Gt(U.sourceEvent,x),K(N))}}).on("end",U=>{if(!(!m||w)&&(g=!1,m=!1,cancelAnimationFrame(d),f.size>0)){const{nodeLookup:X,updateNodePositions:A,onNodeDragStop:H,onSelectionDragStop:F}=r();if(S&&(A(f,!1),S=!1),l||H||!$&&F){const[_,M]=Qu({nodeId:$,dragItems:f,nodeLookup:X,dragging:!1});l==null||l(U.sourceEvent,f,_,M),H==null||H(U.sourceEvent,_,M),$||F==null||F(U.sourceEvent,M)}}}).filter(U=>{const X=U.target;return!U.button&&(!T||!qp(X,`.${T}`,D))&&(!k||qp(X,k,D))});y.call(z)}function C(){y==null||y.on(".drag",null)}return{update:I,destroy:C}}function M1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const c of r.values())_s(l,wo(c))>0&&i.push(c);return i}const P1=250;function D1(t,r,o,i){var f,g;let l=[],c=1/0;const d=M1(t,o,r+P1);for(const h of d){const x=[...((f=h.internals.handleBounds)==null?void 0:f.source)??[],...((g=h.internals.handleBounds)==null?void 0:g.target)??[]];for(const m of x){if(i.nodeId===m.nodeId&&i.type===m.type&&i.id===m.id)continue;const{x:y,y:w}=jr(h,m,m.position,!0),S=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(w-t.y,2));S>r||(S<c?(l=[{...m,x:y,y:w}],c=S):S===c&&l.push({...m,x:y,y:w}))}}if(!l.length)return null;if(l.length>1){const h=i.type==="source"?"target":"source";return l.find(x=>x.type===h)??l[0]}return l[0]}function $h(t,r,o,i,l,c=!1){var h,x,m;const d=i.get(t);if(!d)return null;const f=l==="strict"?(h=d.internals.handleBounds)==null?void 0:h[r]:[...((x=d.internals.handleBounds)==null?void 0:x.source)??[],...((m=d.internals.handleBounds)==null?void 0:m.target)??[]],g=(o?f==null?void 0:f.find(y=>y.id===o):f==null?void 0:f[0])??null;return g&&c?{...g,...jr(d,g,g.position,!0)}:g}function zh(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function T1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const Rh=()=>!0;function O1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:c,isTarget:d,domNode:f,nodeLookup:g,lib:h,autoPanOnConnect:x,flowId:m,panBy:y,cancelConnection:w,onConnectStart:S,onConnect:j,onConnectEnd:I,isValidConnection:C=Rh,onReconnectEnd:T,updateConnection:k,getTransform:D,getFromHandle:P,autoPanSpeed:$,dragThreshold:W=1,handleDomNode:K}){const Q=bh(t.target);let V=0,z;const{x:U,y:X}=Gt(t),A=zh(c,K),H=f==null?void 0:f.getBoundingClientRect();let F=!1;if(!H||!A)return;const _=$h(l,A,i,g,r);if(!_)return;let M=Gt(t,H),N=!1,R=null,b=!1,O=null;function Z(){if(!x||!H)return;const[Ce,ke]=kh(M,H,$);y({x:Ce,y:ke}),V=requestAnimationFrame(Z)}const q={..._,nodeId:l,type:A,position:_.position},ne=g.get(l);let ue={inProgress:!0,isValid:null,from:jr(ne,q,ye.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:ne,to:M,toHandle:null,toPosition:Rp[q.position],toNode:null,pointer:M};function re(){F=!0,k(ue),S==null||S(t,{nodeId:l,handleId:i,handleType:A})}W===0&&re();function ce(Ce){if(!F){const{x:Xe,y:Lt}=Gt(Ce),xt=Xe-U,yt=Lt-X;if(!(xt*xt+yt*yt>W*W))return;re()}if(!P()||!q){ve(Ce);return}const ke=D();M=Gt(Ce,H),z=D1(zs(M,ke,!1,[1,1]),o,g,q),N||(Z(),N=!0);const we=Fh(Ce,{handle:z,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:d?"target":"source",isValidConnection:C,doc:Q,lib:h,flowId:m,nodeLookup:g});O=we.handleDomNode,R=we.connection,b=T1(!!z,we.isValid);const be=g.get(l),Te=be?jr(be,q,ye.Left,!0):ue.from,Ee={...ue,from:Te,isValid:b,to:we.toHandle&&b?Dl({x:we.toHandle.x,y:we.toHandle.y},ke):M,toHandle:we.toHandle,toPosition:b&&we.toHandle?we.toHandle.position:Rp[q.position],toNode:we.toHandle?g.get(we.toHandle.nodeId):null,pointer:M};k(Ee),ue=Ee}function ve(Ce){if(!("touches"in Ce&&Ce.touches.length>0)){if(F){(z||O)&&R&&b&&(j==null||j(R));const{inProgress:ke,...we}=ue,be={...we,toPosition:ue.toHandle?ue.toPosition:null};I==null||I(Ce,be),c&&(T==null||T(Ce,be))}w(),cancelAnimationFrame(V),N=!1,b=!1,R=null,O=null,Q.removeEventListener("mousemove",ce),Q.removeEventListener("mouseup",ve),Q.removeEventListener("touchmove",ce),Q.removeEventListener("touchend",ve)}}Q.addEventListener("mousemove",ce),Q.addEventListener("mouseup",ve),Q.addEventListener("touchmove",ce),Q.addEventListener("touchend",ve)}function Fh(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:c,doc:d,lib:f,flowId:g,isValidConnection:h=Rh,nodeLookup:x}){const m=c==="target",y=r?d.querySelector(`.${f}-flow__handle[data-id="${g}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=Gt(t),j=d.elementFromPoint(w,S),I=j!=null&&j.classList.contains(`${f}-flow__handle`)?j:y,C={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const T=zh(void 0,I),k=I.getAttribute("data-nodeid"),D=I.getAttribute("data-handleid"),P=I.classList.contains("connectable"),$=I.classList.contains("connectableend");if(!k||!T)return C;const W={source:m?k:i,sourceHandle:m?D:l,target:m?i:k,targetHandle:m?l:D};C.connection=W;const Q=P&&$&&(o===yo.Strict?m&&T==="source"||!m&&T==="target":k!==i||D!==l);C.isValid=Q&&h(W),C.toHandle=$h(k,T,D,x,o,!0)}return C}const vc={onPointerDown:O1,isValid:Fh};function A1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=Ct(t);function c({translateExtent:f,width:g,height:h,zoomStep:x=1,pannable:m=!0,zoomable:y=!0,inversePan:w=!1}){const S=k=>{if(k.sourceEvent.type!=="wheel"||!r)return;const D=o(),P=k.sourceEvent.ctrlKey&&Ms()?10:1,$=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*x,W=D[2]*Math.pow(2,$*P);r.scaleTo(W)};let j=[0,0];const I=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(j=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},C=k=>{const D=o();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!r)return;const P=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],$=[P[0]-j[0],P[1]-j[1]];j=P;const W=i()*Math.max(D[2],Math.log(D[2]))*(w?-1:1),K={x:D[0]-$[0]*W,y:D[1]-$[1]*W},Q=[[0,0],[g,h]];r.setViewportConstrained({x:K.x,y:K.y,zoom:D[2]},Q,f)},T=hh().on("start",I).on("zoom",m?C:null).on("zoom.wheel",y?S:null);l.call(T,{})}function d(){l.on("zoom",null)}return{update:c,destroy:d,pointer:Bt}}const Bl=t=>({x:t.x,y:t.y,zoom:t.k}),qu=({x:t,y:r,zoom:o})=>Rl.translate(t,r).scale(o),fo=(t,r)=>t.target.closest(`.${r}`),Hh=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),L1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Zu=(t,r=0,o=L1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},Vh=t=>{const r=t.ctrlKey&&Ms()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function $1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:c,zoomOnPinch:d,onPanZoomStart:f,onPanZoom:g,onPanZoomEnd:h}){return x=>{if(fo(x,r))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const m=o.property("__zoom").k||1;if(x.ctrlKey&&d){const I=Bt(x),C=Vh(x),T=m*Math.pow(2,C);i.scaleTo(o,T,I,x);return}const y=x.deltaMode===1?20:1;let w=l===Nr.Vertical?0:x.deltaX*y,S=l===Nr.Horizontal?0:x.deltaY*y;!Ms()&&x.shiftKey&&l!==Nr.Vertical&&(w=x.deltaY*y,S=0),i.translateBy(o,-(w/m)*c,-(S/m)*c,{internal:!0});const j=Bl(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(g==null||g(x,j),t.panScrollTimeout=setTimeout(()=>{h==null||h(x,j),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,f==null||f(x,j))}}function z1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const c=i.type==="wheel",d=!r&&c&&!i.ctrlKey,f=fo(i,t);if(i.ctrlKey&&c&&f&&i.preventDefault(),d||f)return null;i.preventDefault(),o.call(this,i,l)}}function R1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var c,d,f;if((c=i.sourceEvent)!=null&&c.internal)return;const l=Bl(i.transform);t.mouseButton=((d=i.sourceEvent)==null?void 0:d.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((f=i.sourceEvent)==null?void 0:f.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function F1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return c=>{var d,f;t.usedRightMouseButton=!!(o&&Hh(r,t.mouseButton??0)),(d=c.sourceEvent)!=null&&d.sync||i([c.transform.x,c.transform.y,c.transform.k]),l&&!((f=c.sourceEvent)!=null&&f.internal)&&(l==null||l(c.sourceEvent,Bl(c.transform)))}}function H1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:c}){return d=>{var f;if(!((f=d.sourceEvent)!=null&&f.internal)&&(t.isZoomingOrPanning=!1,c&&Hh(r,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&c(d.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const g=Bl(d.transform);t.prevViewport=g,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(d.sourceEvent,g)},o?150:0)}}}function V1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:c,userSelectionActive:d,noWheelClassName:f,noPanClassName:g,lib:h,connectionInProgress:x}){return m=>{var I;const y=t||r,w=o&&m.ctrlKey,S=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(fo(m,`${h}-flow__node`)||fo(m,`${h}-flow__edge`)))return!0;if(!i&&!y&&!l&&!c&&!o||d||x&&!S||fo(m,f)&&S||fo(m,g)&&(!S||l&&S&&!t)||!o&&m.ctrlKey&&S)return!1;if(!o&&m.type==="touchstart"&&((I=m.touches)==null?void 0:I.length)>1)return m.preventDefault(),!1;if(!y&&!l&&!w&&S||!i&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(i)&&!i.includes(m.button)&&m.type==="mousedown")return!1;const j=Array.isArray(i)&&i.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||S)&&j}}function B1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:f,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=t.getBoundingClientRect(),m=hh().scaleExtent([r,o]).translateExtent(i),y=Ct(t).call(m);T({x:l.x,y:l.y,zoom:vo(l.zoom,r,o)},[[0,0],[x.width,x.height]],i);const w=y.on("wheel.zoom"),S=y.on("dblclick.zoom");m.wheelDelta(Vh);function j(z,U){return y?new Promise(X=>{m==null||m.interpolate((U==null?void 0:U.interpolate)==="linear"?Ss:yl).transform(Zu(y,U==null?void 0:U.duration,U==null?void 0:U.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function I({noWheelClassName:z,noPanClassName:U,onPaneContextMenu:X,userSelectionActive:A,panOnScroll:H,panOnDrag:F,panOnScrollMode:_,panOnScrollSpeed:M,preventScrolling:N,zoomOnPinch:R,zoomOnScroll:b,zoomOnDoubleClick:O,zoomActivationKeyPressed:Z,lib:q,onTransformChange:ne,connectionInProgress:oe,paneClickDistance:ue,selectionOnDrag:re}){A&&!h.isZoomingOrPanning&&C();const ce=H&&!Z&&!A;m.clickDistance(re?1/0:!Xt(ue)||ue<0?0:ue);const ve=ce?$1({zoomPanValues:h,noWheelClassName:z,d3Selection:y,d3Zoom:m,panOnScrollMode:_,panOnScrollSpeed:M,zoomOnPinch:R,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:f}):z1({noWheelClassName:z,preventScrolling:N,d3ZoomHandler:w});if(y.on("wheel.zoom",ve,{passive:!1}),!A){const ke=R1({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:d});m.on("start",ke);const we=F1({zoomPanValues:h,panOnDrag:F,onPaneContextMenu:!!X,onPanZoom:c,onTransformChange:ne});m.on("zoom",we);const be=H1({zoomPanValues:h,panOnDrag:F,panOnScroll:H,onPaneContextMenu:X,onPanZoomEnd:f,onDraggingChange:g});m.on("end",be)}const Ce=V1({zoomActivationKeyPressed:Z,panOnDrag:F,zoomOnScroll:b,panOnScroll:H,zoomOnDoubleClick:O,zoomOnPinch:R,userSelectionActive:A,noPanClassName:U,noWheelClassName:z,lib:q,connectionInProgress:oe});m.filter(Ce),O?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function C(){m.on("zoom",null)}async function T(z,U,X){const A=qu(z),H=m==null?void 0:m.constrain()(A,U,X);return H&&await j(H),new Promise(F=>F(H))}async function k(z,U){const X=qu(z);return await j(X,U),new Promise(A=>A(X))}function D(z){if(y){const U=qu(z),X=y.property("__zoom");(X.k!==z.zoom||X.x!==z.x||X.y!==z.y)&&(m==null||m.transform(y,U,null,{sync:!0}))}}function P(){const z=y?mh(y.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function $(z,U){return y?new Promise(X=>{m==null||m.interpolate((U==null?void 0:U.interpolate)==="linear"?Ss:yl).scaleTo(Zu(y,U==null?void 0:U.duration,U==null?void 0:U.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function W(z,U){return y?new Promise(X=>{m==null||m.interpolate((U==null?void 0:U.interpolate)==="linear"?Ss:yl).scaleBy(Zu(y,U==null?void 0:U.duration,U==null?void 0:U.ease,()=>X(!0)),z)}):Promise.resolve(!1)}function K(z){m==null||m.scaleExtent(z)}function Q(z){m==null||m.translateExtent(z)}function V(z){const U=!Xt(z)||z<0?0:z;m==null||m.clickDistance(U)}return{update:I,destroy:C,setViewport:k,setViewportConstrained:T,getViewport:P,scaleTo:$,scaleBy:W,setScaleExtent:K,setTranslateExtent:Q,syncViewport:D,setClickDistance:V}}var br;(function(t){t.Line="line",t.Handle="handle"})(br||(br={}));const W1=["top-left","top-right","bottom-left","bottom-right"],U1=["top","right","bottom","left"];function Y1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:c}){const d=t-r,f=o-i,g=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&l&&(g[0]=g[0]*-1),f&&c&&(g[1]=g[1]*-1),g}function Zp(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Xn(t,r){return Math.max(0,r-t)}function Gn(t,r){return Math.max(0,t-r)}function dl(t,r,o){return Math.max(0,r-t,t-o)}function Jp(t,r){return t?!r:r}function X1(t,r,o,i,l,c,d,f){let{affectsX:g,affectsY:h}=r;const{isHorizontal:x,isVertical:m}=r,y=x&&m,{xSnapped:w,ySnapped:S}=o,{minWidth:j,maxWidth:I,minHeight:C,maxHeight:T}=i,{x:k,y:D,width:P,height:$,aspectRatio:W}=t;let K=Math.floor(x?w-t.pointerX:0),Q=Math.floor(m?S-t.pointerY:0);const V=P+(g?-K:K),z=$+(h?-Q:Q),U=-c[0]*P,X=-c[1]*$;let A=dl(V,j,I),H=dl(z,C,T);if(d){let M=0,N=0;g&&K<0?M=Xn(k+K+U,d[0][0]):!g&&K>0&&(M=Gn(k+V+U,d[1][0])),h&&Q<0?N=Xn(D+Q+X,d[0][1]):!h&&Q>0&&(N=Gn(D+z+X,d[1][1])),A=Math.max(A,M),H=Math.max(H,N)}if(f){let M=0,N=0;g&&K>0?M=Gn(k+K,f[0][0]):!g&&K<0&&(M=Xn(k+V,f[1][0])),h&&Q>0?N=Gn(D+Q,f[0][1]):!h&&Q<0&&(N=Xn(D+z,f[1][1])),A=Math.max(A,M),H=Math.max(H,N)}if(l){if(x){const M=dl(V/W,C,T)*W;if(A=Math.max(A,M),d){let N=0;!g&&!h||g&&!h&&y?N=Gn(D+X+V/W,d[1][1])*W:N=Xn(D+X+(g?K:-K)/W,d[0][1])*W,A=Math.max(A,N)}if(f){let N=0;!g&&!h||g&&!h&&y?N=Xn(D+V/W,f[1][1])*W:N=Gn(D+(g?K:-K)/W,f[0][1])*W,A=Math.max(A,N)}}if(m){const M=dl(z*W,j,I)/W;if(H=Math.max(H,M),d){let N=0;!g&&!h||h&&!g&&y?N=Gn(k+z*W+U,d[1][0])/W:N=Xn(k+(h?Q:-Q)*W+U,d[0][0])/W,H=Math.max(H,N)}if(f){let N=0;!g&&!h||h&&!g&&y?N=Xn(k+z*W,f[1][0])/W:N=Gn(k+(h?Q:-Q)*W,f[0][0])/W,H=Math.max(H,N)}}}Q=Q+(Q<0?H:-H),K=K+(K<0?A:-A),l&&(y?V>z*W?Q=(Jp(g,h)?-K:K)/W:K=(Jp(g,h)?-Q:Q)*W:x?(Q=K/W,h=g):(K=Q*W,g=h));const F=g?k+K:k,_=h?D+Q:D;return{width:P+(g?-K:K),height:$+(h?-Q:Q),x:c[0]*K*(g?-1:1)+F,y:c[1]*Q*(h?-1:1)+_}}const Bh={width:0,height:0,x:0,y:0},G1={...Bh,pointerX:0,pointerY:0,aspectRatio:1};function K1(t){return[[0,0],[t.measured.width,t.measured.height]]}function Q1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,c=t.measured.width??0,d=t.measured.height??0,f=o[0]*c,g=o[1]*d;return[[i-f,l-g],[i+c-f,l+d-g]]}function q1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const c=Ct(t);let d={controlDirection:Zp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:h,boundaries:x,keepAspectRatio:m,resizeDirection:y,onResizeStart:w,onResize:S,onResizeEnd:j,shouldResize:I}){let C={...Bh},T={...G1};d={boundaries:x,resizeDirection:y,keepAspectRatio:m,controlDirection:Zp(h)};let k,D=null,P=[],$,W,K,Q=!1;const V=eh().on("start",z=>{const{nodeLookup:U,transform:X,snapGrid:A,snapToGrid:H,nodeOrigin:F,paneDomNode:_}=o();if(k=U.get(r),!k)return;D=(_==null?void 0:_.getBoundingClientRect())??null;const{xSnapped:M,ySnapped:N}=Ns(z.sourceEvent,{transform:X,snapGrid:A,snapToGrid:H,containerBounds:D});C={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},T={...C,pointerX:M,pointerY:N,aspectRatio:C.width/C.height},$=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&($=U.get(k.parentId),W=$&&k.extent==="parent"?K1($):void 0),P=[],K=void 0;for(const[R,b]of U)if(b.parentId===r&&(P.push({id:R,position:{...b.position},extent:b.extent}),b.extent==="parent"||b.expandParent)){const O=Q1(b,k,b.origin??F);K?K=[[Math.min(O[0][0],K[0][0]),Math.min(O[0][1],K[0][1])],[Math.max(O[1][0],K[1][0]),Math.max(O[1][1],K[1][1])]]:K=O}w==null||w(z,{...C})}).on("drag",z=>{const{transform:U,snapGrid:X,snapToGrid:A,nodeOrigin:H}=o(),F=Ns(z.sourceEvent,{transform:U,snapGrid:X,snapToGrid:A,containerBounds:D}),_=[];if(!k)return;const{x:M,y:N,width:R,height:b}=C,O={},Z=k.origin??H,{width:q,height:ne,x:oe,y:ue}=X1(T,d.controlDirection,F,d.boundaries,d.keepAspectRatio,Z,W,K),re=q!==R,ce=ne!==b,ve=oe!==M&&re,Ce=ue!==N&&ce;if(!ve&&!Ce&&!re&&!ce)return;if((ve||Ce||Z[0]===1||Z[1]===1)&&(O.x=ve?oe:C.x,O.y=Ce?ue:C.y,C.x=O.x,C.y=O.y,P.length>0)){const Te=oe-M,Ee=ue-N;for(const Xe of P)Xe.position={x:Xe.position.x-Te+Z[0]*(q-R),y:Xe.position.y-Ee+Z[1]*(ne-b)},_.push(Xe)}if((re||ce)&&(O.width=re&&(!d.resizeDirection||d.resizeDirection==="horizontal")?q:C.width,O.height=ce&&(!d.resizeDirection||d.resizeDirection==="vertical")?ne:C.height,C.width=O.width,C.height=O.height),$&&k.expandParent){const Te=Z[0]*(O.width??0);O.x&&O.x<Te&&(C.x=Te,T.x=T.x-(O.x-Te));const Ee=Z[1]*(O.height??0);O.y&&O.y<Ee&&(C.y=Ee,T.y=T.y-(O.y-Ee))}const ke=Y1({width:C.width,prevWidth:R,height:C.height,prevHeight:b,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),we={...C,direction:ke};(I==null?void 0:I(z,we))!==!1&&(Q=!0,S==null||S(z,we),i(O,_))}).on("end",z=>{Q&&(j==null||j(z,{...C}),l==null||l({...C}),Q=!1)});c.call(V)}function g(){c.on(".drag",null)}return{update:f,destroy:g}}var Ju={exports:{}},ec={},tc={exports:{}},nc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Z1(){if(em)return nc;em=1;var t=Ds();function r(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(m,y){var w=y(),S=i({inst:{value:w,getSnapshot:y}}),j=S[0].inst,I=S[1];return c(function(){j.value=w,j.getSnapshot=y,g(j)&&I({inst:j})},[m,w,y]),l(function(){return g(j)&&I({inst:j}),m(function(){g(j)&&I({inst:j})})},[m]),d(w),w}function g(m){var y=m.getSnapshot;m=m.value;try{var w=y();return!o(m,w)}catch{return!0}}function h(m,y){return y()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return nc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,nc}var tm;function J1(){return tm||(tm=1,tc.exports=Z1()),tc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function eS(){if(nm)return ec;nm=1;var t=Ds(),r=J1();function o(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,c=t.useRef,d=t.useEffect,f=t.useMemo,g=t.useDebugValue;return ec.useSyncExternalStoreWithSelector=function(h,x,m,y,w){var S=c(null);if(S.current===null){var j={hasValue:!1,value:null};S.current=j}else j=S.current;S=f(function(){function C($){if(!T){if(T=!0,k=$,$=y($),w!==void 0&&j.hasValue){var W=j.value;if(w(W,$))return D=W}return D=$}if(W=D,i(k,$))return W;var K=y($);return w!==void 0&&w(W,K)?(k=$,W):(k=$,D=K)}var T=!1,k,D,P=m===void 0?null:m;return[function(){return C(x())},P===null?void 0:function(){return C(P())}]},[x,m,y,w]);var I=l(h,S[0],S[1]);return d(function(){j.hasValue=!0,j.value=I},[I]),g(I),I},ec}var rm;function tS(){return rm||(rm=1,Ju.exports=eS()),Ju.exports}var nS=tS();const rS=zm(nS),oS={},om=t=>{let r;const o=new Set,i=(x,m)=>{const y=typeof x=="function"?x(r):x;if(!Object.is(y,r)){const w=r;r=m??(typeof y!="object"||y===null)?y:Object.assign({},r,y),o.forEach(S=>S(r,w))}},l=()=>r,g={setState:i,getState:l,getInitialState:()=>h,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(oS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},h=r=t(i,l,g);return g},sS=t=>t?om(t):om,{useDebugValue:iS}=xs,{useSyncExternalStoreWithSelector:lS}=rS,aS=t=>t;function Wh(t,r=aS,o){const i=lS(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return iS(i),i}const sm=(t,r)=>{const o=sS(t),i=(l,c=r)=>Wh(o,l,c);return Object.assign(i,o),i},uS=(t,r)=>t?sm(t,r):sm;function Fe(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var cS=Rm();const Wl=L.createContext(null),dS=Wl.Provider,Uh=sn.error001();function _e(t,r){const o=L.useContext(Wl);if(o===null)throw new Error(Uh);return Wh(o,t,r)}function He(){const t=L.useContext(Wl);if(t===null)throw new Error(Uh);return L.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const im={display:"none"},fS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Yh="react-flow__node-desc",Xh="react-flow__edge-desc",pS="react-flow__aria-live",mS=t=>t.ariaLiveMessage,hS=t=>t.ariaLabelConfig;function gS({rfId:t}){const r=_e(mS);return u.jsx("div",{id:`${pS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:fS,children:r})}function xS({rfId:t,disableKeyboardA11y:r}){const o=_e(hS);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${Yh}-${t}`,style:im,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${Xh}-${t}`,style:im,children:o["edge.a11yDescription.default"]}),!r&&u.jsx(gS,{rfId:t})]})}const Ul=L.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},c)=>{const d=`${t}`.split("-");return u.jsx("div",{className:Ke(["react-flow__panel",o,...d]),style:i,ref:c,...l,children:r})});Ul.displayName="Panel";function yS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:u.jsx(Ul,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const vS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},fl=t=>t.id;function wS(t,r){return Fe(t.selectedNodes.map(fl),r.selectedNodes.map(fl))&&Fe(t.selectedEdges.map(fl),r.selectedEdges.map(fl))}function SS({onSelectionChange:t}){const r=He(),{selectedNodes:o,selectedEdges:i}=_e(vS,wS);return L.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(c=>c(l))},[o,i,t]),null}const NS=t=>!!t.onSelectionChangeHandlers;function kS({onSelectionChange:t}){const r=_e(NS);return t||r?u.jsx(SS,{onSelectionChange:t}):null}const Gh=[0,0],CS={x:0,y:0,zoom:1},IS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],lm=[...IS,"rfId"],jS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),am={translateExtent:bs,nodeOrigin:Gh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function bS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:c,setNodeExtent:d,reset:f,setDefaultNodesAndEdges:g}=_e(jS,Fe),h=He();L.useEffect(()=>(g(t.defaultNodes,t.defaultEdges),()=>{x.current=am,f()}),[]);const x=L.useRef(am);return L.useEffect(()=>{for(const m of lm){const y=t[m],w=x.current[m];y!==w&&(typeof t[m]>"u"||(m==="nodes"?r(y):m==="edges"?o(y):m==="minZoom"?i(y):m==="maxZoom"?l(y):m==="translateExtent"?c(y):m==="nodeExtent"?d(y):m==="ariaLabelConfig"?h.setState({ariaLabelConfig:l1(y)}):m==="fitView"?h.setState({fitViewQueued:y}):m==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[m]:y})))}x.current=t},lm.map(m=>t[m])),null}function um(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ES(t){var i;const[r,o]=L.useState(t==="system"?null:t);return L.useEffect(()=>{if(t!=="system"){o(t);return}const l=um(),c=()=>o(l!=null&&l.matches?"dark":"light");return c(),l==null||l.addEventListener("change",c),()=>{l==null||l.removeEventListener("change",c)}},[t]),r!==null?r:(i=um())!=null&&i.matches?"dark":"light"}const cm=typeof document<"u"?document:null;function Ps(t=null,r={target:cm,actInsideInputWithModifier:!0}){const[o,i]=L.useState(!1),l=L.useRef(!1),c=L.useRef(new Set([])),[d,f]=L.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=h.reduce((m,y)=>m.concat(...y),[]);return[h,x]}return[[],[]]},[t]);return L.useEffect(()=>{const g=(r==null?void 0:r.target)??cm,h=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const x=w=>{var I,C;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!h)&&Eh(w))return!1;const j=fm(w.code,f);if(c.current.add(w[j]),dm(d,c.current,!1)){const T=((C=(I=w.composedPath)==null?void 0:I.call(w))==null?void 0:C[0])||w.target,k=(T==null?void 0:T.nodeName)==="BUTTON"||(T==null?void 0:T.nodeName)==="A";r.preventDefault!==!1&&(l.current||!k)&&w.preventDefault(),i(!0)}},m=w=>{const S=fm(w.code,f);dm(d,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(w[S]),w.key==="Meta"&&c.current.clear(),l.current=!1},y=()=>{c.current.clear(),i(!1)};return g==null||g.addEventListener("keydown",x),g==null||g.addEventListener("keyup",m),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g==null||g.removeEventListener("keydown",x),g==null||g.removeEventListener("keyup",m),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[t,i]),o}function dm(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function fm(t,r){return r.includes(t)?"code":"key"}const _S=()=>{const t=He();return L.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,c],panZoom:d}=t.getState();return d?(await d.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??c},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:c,maxZoom:d,panZoom:f}=t.getState(),g=Oc(r,i,l,c,d,(o==null?void 0:o.padding)??.1);return f?(await f.setViewport(g,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:c,domNode:d}=t.getState();if(!d)return r;const{x:f,y:g}=d.getBoundingClientRect(),h={x:r.x-f,y:r.y-g},x=o.snapGrid??l,m=o.snapToGrid??c;return zs(h,i,m,x)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),d=Dl(r,o);return{x:d.x+l,y:d.y+c}}}),[])};function Kh(t,r){const o=[],i=new Map,l=[];for(const c of t)if(c.type==="add"){l.push(c);continue}else if(c.type==="remove"||c.type==="replace")i.set(c.id,[c]);else{const d=i.get(c.id);d?d.push(c):i.set(c.id,[c])}for(const c of r){const d=i.get(c.id);if(!d){o.push(c);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){o.push({...d[0].item});continue}const f={...c};for(const g of d)MS(g,f);o.push(f)}return l.length&&l.forEach(c=>{c.index!==void 0?o.splice(c.index,0,{...c.item}):o.push({...c.item})}),o}function MS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function PS(t,r){return Kh(t,r)}function DS(t,r){return Kh(t,r)}function yr(t,r){return{id:t,type:"select",selected:r}}function po(t,r=new Set,o=!1){const i=[];for(const[l,c]of t){const d=r.has(l);!(c.selected===void 0&&!d)&&c.selected!==d&&(o&&(c.selected=d),i.push(yr(c.id,d)))}return i}function pm({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,d]of t.entries()){const f=r.get(d.id),g=((l=f==null?void 0:f.internals)==null?void 0:l.userNode)??f;g!==void 0&&g!==d&&o.push({id:d.id,item:d,type:"replace"}),g===void 0&&o.push({item:d,type:"add",index:c})}for(const[c]of r)i.get(c)===void 0&&o.push({id:c,type:"remove"});return o}function mm(t){return{id:t.id,type:"remove"}}const hm=t=>qw(t),TS=t=>wh(t);function Qh(t){return L.forwardRef(t)}const OS=typeof window<"u"?L.useLayoutEffect:L.useEffect;function gm(t){const[r,o]=L.useState(BigInt(0)),[i]=L.useState(()=>AS(()=>o(l=>l+BigInt(1))));return OS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function AS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const qh=L.createContext(null);function LS({children:t}){const r=He(),o=L.useCallback(f=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:x,onNodesChange:m,nodeLookup:y,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let j=g;for(const C of f)j=typeof C=="function"?C(j):C;let I=pm({items:j,lookup:y});for(const C of S.values())I=C(I);x&&h(j),I.length>0?m==null||m(I):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:C,nodes:T,setNodes:k}=r.getState();C&&k(T)})},[]),i=gm(o),l=L.useCallback(f=>{const{edges:g=[],setEdges:h,hasDefaultEdges:x,onEdgesChange:m,edgeLookup:y}=r.getState();let w=g;for(const S of f)w=typeof S=="function"?S(w):S;x?h(w):m&&m(pm({items:w,lookup:y}))},[]),c=gm(l),d=L.useMemo(()=>({nodeQueue:i,edgeQueue:c}),[]);return u.jsx(qh.Provider,{value:d,children:t})}function $S(){const t=L.useContext(qh);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const zS=t=>!!t.panZoom;function Pr(){const t=_S(),r=He(),o=$S(),i=_e(zS),l=L.useMemo(()=>{const c=m=>r.getState().nodeLookup.get(m),d=m=>{o.nodeQueue.push(m)},f=m=>{o.edgeQueue.push(m)},g=m=>{var C,T;const{nodeLookup:y,nodeOrigin:w}=r.getState(),S=hm(m)?m:y.get(m.id),j=S.parentId?jh(S.position,S.measured,S.parentId,y,w):S.position,I={...S,position:j,width:((C=S.measured)==null?void 0:C.width)??S.width,height:((T=S.measured)==null?void 0:T.height)??S.height};return wo(I)},h=(m,y,w={replace:!1})=>{d(S=>S.map(j=>{if(j.id===m){const I=typeof y=="function"?y(j):y;return w.replace&&hm(I)?I:{...j,...I}}return j}))},x=(m,y,w={replace:!1})=>{f(S=>S.map(j=>{if(j.id===m){const I=typeof y=="function"?y(j):y;return w.replace&&TS(I)?I:{...j,...I}}return j}))};return{getNodes:()=>r.getState().nodes.map(m=>({...m})),getNode:m=>{var y;return(y=c(m))==null?void 0:y.internals.userNode},getInternalNode:c,getEdges:()=>{const{edges:m=[]}=r.getState();return m.map(y=>({...y}))},getEdge:m=>r.getState().edgeLookup.get(m),setNodes:d,setEdges:f,addNodes:m=>{const y=Array.isArray(m)?m:[m];o.nodeQueue.push(w=>[...w,...y])},addEdges:m=>{const y=Array.isArray(m)?m:[m];o.edgeQueue.push(w=>[...w,...y])},toObject:()=>{const{nodes:m=[],edges:y=[],transform:w}=r.getState(),[S,j,I]=w;return{nodes:m.map(C=>({...C})),edges:y.map(C=>({...C})),viewport:{x:S,y:j,zoom:I}}},deleteElements:async({nodes:m=[],edges:y=[]})=>{const{nodes:w,edges:S,onNodesDelete:j,onEdgesDelete:I,triggerNodeChanges:C,triggerEdgeChanges:T,onDelete:k,onBeforeDelete:D}=r.getState(),{nodes:P,edges:$}=await n1({nodesToRemove:m,edgesToRemove:y,nodes:w,edges:S,onBeforeDelete:D}),W=$.length>0,K=P.length>0;if(W){const Q=$.map(mm);I==null||I($),T(Q)}if(K){const Q=P.map(mm);j==null||j(P),C(Q)}return(K||W)&&(k==null||k({nodes:P,edges:$})),{deletedNodes:P,deletedEdges:$}},getIntersectingNodes:(m,y=!0,w)=>{const S=Hp(m),j=S?m:g(m),I=w!==void 0;return j?(w||r.getState().nodes).filter(C=>{const T=r.getState().nodeLookup.get(C.id);if(T&&!S&&(C.id===m.id||!T.internals.positionAbsolute))return!1;const k=wo(I?C:T),D=_s(k,j);return y&&D>0||D>=k.width*k.height||D>=j.width*j.height}):[]},isNodeIntersecting:(m,y,w=!0)=>{const j=Hp(m)?m:g(m);if(!j)return!1;const I=_s(j,y);return w&&I>0||I>=y.width*y.height||I>=j.width*j.height},updateNode:h,updateNodeData:(m,y,w={replace:!1})=>{h(m,S=>{const j=typeof y=="function"?y(S):y;return w.replace?{...S,data:j}:{...S,data:{...S.data,...j}}},w)},updateEdge:x,updateEdgeData:(m,y,w={replace:!1})=>{x(m,S=>{const j=typeof y=="function"?y(S):y;return w.replace?{...S,data:j}:{...S,data:{...S.data,...j}}},w)},getNodesBounds:m=>{const{nodeLookup:y,nodeOrigin:w}=r.getState();return Zw(m,{nodeLookup:y,nodeOrigin:w})},getHandleConnections:({type:m,id:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${m}${y?`-${y}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:m,handleId:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${m?y?`-${m}-${y}`:`-${m}`:""}`))==null?void 0:S.values())??[])},fitView:async m=>{const y=r.getState().fitViewResolver??i1();return r.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:y}),o.nodeQueue.push(w=>[...w]),y.promise}}},[]);return L.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const xm=t=>t.selected,RS=typeof window<"u"?window:void 0;function FS({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=He(),{deleteElements:i}=Pr(),l=Ps(t,{actInsideInputWithModifier:!1}),c=Ps(r,{target:RS});L.useEffect(()=>{if(l){const{edges:d,nodes:f}=o.getState();i({nodes:f.filter(xm),edges:d.filter(xm)}),o.setState({nodesSelectionActive:!1})}},[l]),L.useEffect(()=>{o.setState({multiSelectionActive:c})},[c])}function HS(t){const r=He();L.useEffect(()=>{const o=()=>{var l,c,d,f;if(!t.current||!(((c=(l=t.current).checkVisibility)==null?void 0:c.call(l))??!0))return!1;const i=Ac(t.current);(i.height===0||i.width===0)&&((f=(d=r.getState()).onError)==null||f.call(d,"004",sn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Yl={position:"absolute",width:"100%",height:"100%",top:0,left:0},VS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function BS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Nr.Free,zoomOnDoubleClick:d=!0,panOnDrag:f=!0,defaultViewport:g,translateExtent:h,minZoom:x,maxZoom:m,zoomActivationKeyCode:y,preventScrolling:w=!0,children:S,noWheelClassName:j,noPanClassName:I,onViewportChange:C,isControlledViewport:T,paneClickDistance:k,selectionOnDrag:D}){const P=He(),$=L.useRef(null),{userSelectionActive:W,lib:K,connectionInProgress:Q}=_e(VS,Fe),V=Ps(y),z=L.useRef();HS($);const U=L.useCallback(X=>{C==null||C({x:X[0],y:X[1],zoom:X[2]}),T||P.setState({transform:X})},[C,T]);return L.useEffect(()=>{if($.current){z.current=B1({domNode:$.current,minZoom:x,maxZoom:m,translateExtent:h,viewport:g,onDraggingChange:F=>P.setState({paneDragging:F}),onPanZoomStart:(F,_)=>{const{onViewportChangeStart:M,onMoveStart:N}=P.getState();N==null||N(F,_),M==null||M(_)},onPanZoom:(F,_)=>{const{onViewportChange:M,onMove:N}=P.getState();N==null||N(F,_),M==null||M(_)},onPanZoomEnd:(F,_)=>{const{onViewportChangeEnd:M,onMoveEnd:N}=P.getState();N==null||N(F,_),M==null||M(_)}});const{x:X,y:A,zoom:H}=z.current.getViewport();return P.setState({panZoom:z.current,transform:[X,A,H],domNode:$.current.closest(".react-flow")}),()=>{var F;(F=z.current)==null||F.destroy()}}},[]),L.useEffect(()=>{var X;(X=z.current)==null||X.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:f,zoomActivationKeyPressed:V,preventScrolling:w,noPanClassName:I,userSelectionActive:W,noWheelClassName:j,lib:K,onTransformChange:U,connectionInProgress:Q,selectionOnDrag:D,paneClickDistance:k})},[t,r,o,i,l,c,d,f,V,w,I,W,j,K,U,Q,D,k]),u.jsx("div",{className:"react-flow__renderer",ref:$,style:Yl,children:S})}const WS=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function US(){const{userSelectionActive:t,userSelectionRect:r}=_e(WS,Fe);return t&&r?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const rc=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},YS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function XS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=Es.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:c,onSelectionStart:d,onSelectionEnd:f,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:x,onPaneMouseEnter:m,onPaneMouseMove:y,onPaneMouseLeave:w,children:S}){const j=He(),{userSelectionActive:I,elementsSelectable:C,dragging:T,connectionInProgress:k}=_e(YS,Fe),D=C&&(t||I),P=L.useRef(null),$=L.useRef(),W=L.useRef(new Set),K=L.useRef(new Set),Q=L.useRef(!1),V=M=>{if(Q.current||k){Q.current=!1;return}g==null||g(M),j.getState().resetSelectedElements(),j.setState({nodesSelectionActive:!1})},z=M=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){M.preventDefault();return}h==null||h(M)},U=x?M=>x(M):void 0,X=M=>{Q.current&&(M.stopPropagation(),Q.current=!1)},A=M=>{var ne,oe;const{domNode:N}=j.getState();if($.current=N==null?void 0:N.getBoundingClientRect(),!$.current)return;const R=M.target===P.current;if(!R&&!!M.target.closest(".nokey")||!t||!(c&&R||r)||M.button!==0||!M.isPrimary)return;(oe=(ne=M.target)==null?void 0:ne.setPointerCapture)==null||oe.call(ne,M.pointerId),Q.current=!1;const{x:Z,y:q}=Gt(M.nativeEvent,$.current);j.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:q,x:Z,y:q}}),R||(M.stopPropagation(),M.preventDefault())},H=M=>{const{userSelectionRect:N,transform:R,nodeLookup:b,edgeLookup:O,connectionLookup:Z,triggerNodeChanges:q,triggerEdgeChanges:ne,defaultEdgeOptions:oe,resetSelectedElements:ue}=j.getState();if(!$.current||!N)return;const{x:re,y:ce}=Gt(M.nativeEvent,$.current),{startX:ve,startY:Ce}=N;if(!Q.current){const Ee=r?0:l;if(Math.hypot(re-ve,ce-Ce)<=Ee)return;ue(),d==null||d(M)}Q.current=!0;const ke={startX:ve,startY:Ce,x:re<ve?re:ve,y:ce<Ce?ce:Ce,width:Math.abs(re-ve),height:Math.abs(ce-Ce)},we=W.current,be=K.current;W.current=new Set(Tc(b,ke,R,o===Es.Partial,!0).map(Ee=>Ee.id)),K.current=new Set;const Te=(oe==null?void 0:oe.selectable)??!0;for(const Ee of W.current){const Xe=Z.get(Ee);if(Xe)for(const{edgeId:Lt}of Xe.values()){const xt=O.get(Lt);xt&&(xt.selectable??Te)&&K.current.add(Lt)}}if(!Vp(we,W.current)){const Ee=po(b,W.current,!0);q(Ee)}if(!Vp(be,K.current)){const Ee=po(O,K.current);ne(Ee)}j.setState({userSelectionRect:ke,userSelectionActive:!0,nodesSelectionActive:!1})},F=M=>{var N,R;M.button===0&&((R=(N=M.target)==null?void 0:N.releasePointerCapture)==null||R.call(N,M.pointerId),!I&&M.target===P.current&&j.getState().userSelectionRect&&(V==null||V(M)),j.setState({userSelectionActive:!1,userSelectionRect:null}),Q.current&&(f==null||f(M),j.setState({nodesSelectionActive:W.current.size>0})))},_=i===!0||Array.isArray(i)&&i.includes(0);return u.jsxs("div",{className:Ke(["react-flow__pane",{draggable:_,dragging:T,selection:t}]),onClick:D?void 0:rc(V,P),onContextMenu:rc(z,P),onWheel:rc(U,P),onPointerEnter:D?void 0:m,onPointerMove:D?H:y,onPointerUp:D?F:void 0,onPointerDownCapture:D?A:void 0,onClickCapture:D?X:void 0,onPointerLeave:w,ref:P,style:Yl,children:[S,u.jsx(US,{})]})}function wc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:c,multiSelectionActive:d,nodeLookup:f,onError:g}=r.getState(),h=f.get(t);if(!h){g==null||g("012",sn.error012(t));return}r.setState({nodesSelectionActive:!1}),h.selected?(o||h.selected&&d)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>{var x;return(x=i==null?void 0:i.current)==null?void 0:x.blur()})):l([t])}function Zh({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:c,nodeClickDistance:d}){const f=He(),[g,h]=L.useState(!1),x=L.useRef();return L.useEffect(()=>{x.current=_1({getStoreItems:()=>f.getState(),onNodeMouseDown:m=>{wc({id:m,store:f,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),L.useEffect(()=>{var m,y;if(r)(m=x.current)==null||m.destroy();else if(t.current)return(y=x.current)==null||y.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:c,nodeId:l,nodeClickDistance:d}),()=>{var w;(w=x.current)==null||w.destroy()}},[o,i,r,c,t,l]),g}const GS=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function Jh(){const t=He();return L.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:c,nodesDraggable:d,onError:f,updateNodePositions:g,nodeLookup:h,nodeOrigin:x}=t.getState(),m=new Map,y=GS(d),w=l?c[0]:5,S=l?c[1]:5,j=o.direction.x*w*o.factor,I=o.direction.y*S*o.factor;for(const[,C]of h){if(!y(C))continue;let T={x:C.internals.positionAbsolute.x+j,y:C.internals.positionAbsolute.y+I};l&&(T=$s(T,c));const{position:k,positionAbsolute:D}=Sh({nodeId:C.id,nextPosition:T,nodeLookup:h,nodeExtent:i,nodeOrigin:x,onError:f});C.position=k,C.internals.positionAbsolute=D,m.set(C.id,C)}g(m)},[])}const Hc=L.createContext(null),KS=Hc.Provider;Hc.Consumer;const eg=()=>L.useContext(Hc),QS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),qS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:c,connection:d}=i,{fromHandle:f,toHandle:g,isValid:h}=d,x=(g==null?void 0:g.nodeId)===t&&(g==null?void 0:g.id)===r&&(g==null?void 0:g.type)===o;return{connectingFrom:(f==null?void 0:f.nodeId)===t&&(f==null?void 0:f.id)===r&&(f==null?void 0:f.type)===o,connectingTo:x,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:c===yo.Strict?(f==null?void 0:f.type)!==o:t!==(f==null?void 0:f.nodeId)||r!==(f==null?void 0:f.id),connectionInProcess:!!f,clickConnectionInProcess:!!l,valid:x&&h}};function ZS({type:t="source",position:r=ye.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:c=!0,id:d,onConnect:f,children:g,className:h,onMouseDown:x,onTouchStart:m,...y},w){var H,F;const S=d||null,j=t==="target",I=He(),C=eg(),{connectOnClick:T,noPanClassName:k,rfId:D}=_e(QS,Fe),{connectingFrom:P,connectingTo:$,clickConnecting:W,isPossibleEndHandle:K,connectionInProcess:Q,clickConnectionInProcess:V,valid:z}=_e(qS(C,S,t),Fe);C||(F=(H=I.getState()).onError)==null||F.call(H,"010",sn.error010());const U=_=>{const{defaultEdgeOptions:M,onConnect:N,hasDefaultEdges:R}=I.getState(),b={...M,..._};if(R){const{edges:O,setEdges:Z}=I.getState();Z(p1(b,O))}N==null||N(b),f==null||f(b)},X=_=>{if(!C)return;const M=_h(_.nativeEvent);if(l&&(M&&_.button===0||!M)){const N=I.getState();vc.onPointerDown(_.nativeEvent,{handleDomNode:_.currentTarget,autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:j,handleId:S,nodeId:C,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:U,isValidConnection:o||N.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed,dragThreshold:N.connectionDragThreshold})}M?x==null||x(_):m==null||m(_)},A=_=>{const{onClickConnectStart:M,onClickConnectEnd:N,connectionClickStartHandle:R,connectionMode:b,isValidConnection:O,lib:Z,rfId:q,nodeLookup:ne,connection:oe}=I.getState();if(!C||!R&&!l)return;if(!R){M==null||M(_.nativeEvent,{nodeId:C,handleId:S,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:C,type:t,id:S}});return}const ue=bh(_.target),re=o||O,{connection:ce,isValid:ve}=vc.isValid(_.nativeEvent,{handle:{nodeId:C,id:S,type:t},connectionMode:b,fromNodeId:R.nodeId,fromHandleId:R.id||null,fromType:R.type,isValidConnection:re,flowId:q,doc:ue,lib:Z,nodeLookup:ne});ve&&ce&&U(ce);const Ce=structuredClone(oe);delete Ce.inProgress,Ce.toPosition=Ce.toHandle?Ce.toHandle.position:null,N==null||N(_,Ce),I.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":S,"data-nodeid":C,"data-handlepos":r,"data-id":`${D}-${C}-${S}-${t}`,className:Ke(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",k,h,{source:!j,target:j,connectable:i,connectablestart:l,connectableend:c,clickconnecting:W,connectingfrom:P,connectingto:$,valid:z,connectionindicator:i&&(!Q||K)&&(Q||V?c:l)}]),onMouseDown:X,onTouchStart:X,onClick:T?A:void 0,ref:w,...y,children:g})}const Er=L.memo(Qh(ZS));function JS({data:t,isConnectable:r,sourcePosition:o=ye.Bottom}){return u.jsxs(u.Fragment,{children:[t==null?void 0:t.label,u.jsx(Er,{type:"source",position:o,isConnectable:r})]})}function eN({data:t,isConnectable:r,targetPosition:o=ye.Top,sourcePosition:i=ye.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(Er,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,u.jsx(Er,{type:"source",position:i,isConnectable:r})]})}function tN(){return null}function nN({data:t,isConnectable:r,targetPosition:o=ye.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(Er,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const Tl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ym={input:JS,default:eN,output:nN,group:tN};function rN(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const oN=t=>{const{width:r,height:o,x:i,y:l}=Ls(t.nodeLookup,{filter:c=>!!c.selected});return{width:Xt(r)?r:null,height:Xt(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function sN({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=He(),{width:l,height:c,transformString:d,userSelectionActive:f}=_e(oN,Fe),g=Jh(),h=L.useRef(null);if(L.useEffect(()=>{var y;o||(y=h.current)==null||y.focus({preventScroll:!0})},[o]),Zh({nodeRef:h}),f||!l||!c)return null;const x=t?y=>{const w=i.getState().nodes.filter(S=>S.selected);t(y,w)}:void 0,m=y=>{Object.prototype.hasOwnProperty.call(Tl,y.key)&&(y.preventDefault(),g({direction:Tl[y.key],factor:y.shiftKey?4:1}))};return u.jsx("div",{className:Ke(["react-flow__nodesselection","react-flow__container",r]),style:{transform:d},children:u.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:o?void 0:-1,onKeyDown:o?void 0:m,style:{width:l,height:c}})})}const vm=typeof window<"u"?window:void 0,iN=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function tg({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,paneClickDistance:f,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:x,selectionMode:m,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:I,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:D,panOnScrollSpeed:P,panOnScrollMode:$,zoomOnDoubleClick:W,panOnDrag:K,defaultViewport:Q,translateExtent:V,minZoom:z,maxZoom:U,preventScrolling:X,onSelectionContextMenu:A,noWheelClassName:H,noPanClassName:F,disableKeyboardA11y:_,onViewportChange:M,isControlledViewport:N}){const{nodesSelectionActive:R,userSelectionActive:b}=_e(iN,Fe),O=Ps(h,{target:vm}),Z=Ps(j,{target:vm}),q=Z||K,ne=Z||D,oe=x&&q!==!0,ue=O||b||oe;return FS({deleteKeyCode:g,multiSelectionKeyCode:S}),u.jsx(BS,{onPaneContextMenu:c,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:ne,panOnScrollSpeed:P,panOnScrollMode:$,zoomOnDoubleClick:W,panOnDrag:!O&&q,defaultViewport:Q,translateExtent:V,minZoom:z,maxZoom:U,zoomActivationKeyCode:I,preventScrolling:X,noWheelClassName:H,noPanClassName:F,onViewportChange:M,isControlledViewport:N,paneClickDistance:f,selectionOnDrag:oe,children:u.jsxs(XS,{onSelectionStart:y,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:q,isSelecting:!!ue,selectionMode:m,selectionKeyPressed:O,paneClickDistance:f,selectionOnDrag:oe,children:[t,R&&u.jsx(sN,{onSelectionContextMenu:A,noPanClassName:F,disableKeyboardA11y:_})]})})}tg.displayName="FlowRenderer";const lN=L.memo(tg),aN=t=>r=>t?Tc(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function uN(t){return _e(L.useCallback(aN(t),[t]),Fe)}const cN=t=>t.updateNodeInternals;function dN(){const t=_e(cN),[r]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const c=l.target.getAttribute("data-id");i.set(c,{id:c,nodeElement:l.target,force:!0})}),t(i)}));return L.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function fN({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=He(),c=L.useRef(null),d=L.useRef(null),f=L.useRef(t.sourcePosition),g=L.useRef(t.targetPosition),h=L.useRef(r),x=o&&!!t.internals.handleBounds;return L.useEffect(()=>{c.current&&!t.hidden&&(!x||d.current!==c.current)&&(d.current&&(i==null||i.unobserve(d.current)),i==null||i.observe(c.current),d.current=c.current)},[x,t.hidden]),L.useEffect(()=>()=>{d.current&&(i==null||i.unobserve(d.current),d.current=null)},[]),L.useEffect(()=>{if(c.current){const m=h.current!==r,y=f.current!==t.sourcePosition,w=g.current!==t.targetPosition;(m||y||w)&&(h.current=r,f.current=t.sourcePosition,g.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:c.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),c}function pN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:c,onDoubleClick:d,nodesDraggable:f,elementsSelectable:g,nodesConnectable:h,nodesFocusable:x,resizeObserver:m,noDragClassName:y,noPanClassName:w,disableKeyboardA11y:S,rfId:j,nodeTypes:I,nodeClickDistance:C,onError:T}){const{node:k,internals:D,isParent:P}=_e(re=>{const ce=re.nodeLookup.get(t),ve=re.parentLookup.has(t);return{node:ce,internals:ce.internals,isParent:ve}},Fe);let $=k.type||"default",W=(I==null?void 0:I[$])||ym[$];W===void 0&&(T==null||T("003",sn.error003($)),$="default",W=(I==null?void 0:I.default)||ym.default);const K=!!(k.draggable||f&&typeof k.draggable>"u"),Q=!!(k.selectable||g&&typeof k.selectable>"u"),V=!!(k.connectable||h&&typeof k.connectable>"u"),z=!!(k.focusable||x&&typeof k.focusable>"u"),U=He(),X=Ih(k),A=fN({node:k,nodeType:$,hasDimensions:X,resizeObserver:m}),H=Zh({nodeRef:A,disabled:k.hidden||!K,noDragClassName:y,handleSelector:k.dragHandle,nodeId:t,isSelectable:Q,nodeClickDistance:C}),F=Jh();if(k.hidden)return null;const _=Cn(k),M=rN(k),N=Q||K||r||o||i||l,R=o?re=>o(re,{...D.userNode}):void 0,b=i?re=>i(re,{...D.userNode}):void 0,O=l?re=>l(re,{...D.userNode}):void 0,Z=c?re=>c(re,{...D.userNode}):void 0,q=d?re=>d(re,{...D.userNode}):void 0,ne=re=>{const{selectNodesOnDrag:ce,nodeDragThreshold:ve}=U.getState();Q&&(!ce||!K||ve>0)&&wc({id:t,store:U,nodeRef:A}),r&&r(re,{...D.userNode})},oe=re=>{if(!(Eh(re.nativeEvent)||S)){if(gh.includes(re.key)&&Q){const ce=re.key==="Escape";wc({id:t,store:U,unselect:ce,nodeRef:A})}else if(K&&k.selected&&Object.prototype.hasOwnProperty.call(Tl,re.key)){re.preventDefault();const{ariaLabelConfig:ce}=U.getState();U.setState({ariaLiveMessage:ce["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~D.positionAbsolute.x,y:~~D.positionAbsolute.y})}),F({direction:Tl[re.key],factor:re.shiftKey?4:1})}}},ue=()=>{var be;if(S||!((be=A.current)!=null&&be.matches(":focus-visible")))return;const{transform:re,width:ce,height:ve,autoPanOnNodeFocus:Ce,setCenter:ke}=U.getState();if(!Ce)return;Tc(new Map([[t,k]]),{x:0,y:0,width:ce,height:ve},re,!0).length>0||ke(k.position.x+_.width/2,k.position.y+_.height/2,{zoom:re[2]})};return u.jsx("div",{className:Ke(["react-flow__node",`react-flow__node-${$}`,{[w]:K},k.className,{selected:k.selected,selectable:Q,parent:P,draggable:K,dragging:H}]),ref:A,style:{zIndex:D.z,transform:`translate(${D.positionAbsolute.x}px,${D.positionAbsolute.y}px)`,pointerEvents:N?"all":"none",visibility:X?"visible":"hidden",...k.style,...M},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:R,onMouseMove:b,onMouseLeave:O,onContextMenu:Z,onClick:ne,onDoubleClick:q,onKeyDown:z?oe:void 0,tabIndex:z?0:void 0,onFocus:z?ue:void 0,role:k.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Yh}-${j}`,"aria-label":k.ariaLabel,...k.domAttributes,children:u.jsx(KS,{value:t,children:u.jsx(W,{id:t,data:k.data,type:$,positionAbsoluteX:D.positionAbsolute.x,positionAbsoluteY:D.positionAbsolute.y,selected:k.selected??!1,selectable:Q,draggable:K,deletable:k.deletable??!0,isConnectable:V,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:H,dragHandle:k.dragHandle,zIndex:D.z,parentId:k.parentId,..._})})})}var mN=L.memo(pN);const hN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function ng(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:c}=_e(hN,Fe),d=uN(t.onlyRenderVisibleElements),f=dN();return u.jsx("div",{className:"react-flow__nodes",style:Yl,children:d.map(g=>u.jsx(mN,{id:g,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:c},g))})}ng.displayName="NodeRenderer";const gN=L.memo(ng);function xN(t){return _e(L.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const c=o.nodeLookup.get(l.source),d=o.nodeLookup.get(l.target);c&&d&&c1({sourceNode:c,targetNode:d,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),Fe)}const yN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return u.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},vN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return u.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},wm={[Ml.Arrow]:yN,[Ml.ArrowClosed]:vN};function wN(t){const r=He();return L.useMemo(()=>{var l,c;return Object.prototype.hasOwnProperty.call(wm,t)?wm[t]:((c=(l=r.getState()).onError)==null||c.call(l,"009",sn.error009(t)),null)},[t])}const SN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const g=wN(r);return g?u.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0",children:u.jsx(g,{color:o,strokeWidth:d})}):null},rg=({defaultColor:t,rfId:r})=>{const o=_e(c=>c.edges),i=_e(c=>c.defaultEdgeOptions),l=L.useMemo(()=>y1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:l.map(c=>u.jsx(SN,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};rg.displayName="MarkerDefinitions";var NN=L.memo(rg);function og({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:g,className:h,...x}){const[m,y]=L.useState({x:1,y:0,width:0,height:0}),w=Ke(["react-flow__edge-textwrapper",h]),S=L.useRef(null);return L.useEffect(()=>{if(S.current){const j=S.current.getBBox();y({x:j.x,y:j.y,width:j.width,height:j.height})}},[o]),o?u.jsxs("g",{transform:`translate(${t-m.width/2} ${r-m.height/2})`,className:w,visibility:m.width?"visible":"hidden",...x,children:[l&&u.jsx("rect",{width:m.width+2*d[0],x:-d[0],y:-d[1],height:m.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:o}),g]}):null}og.displayName="EdgeText";const kN=L.memo(og);function No({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,interactionWidth:h=20,...x}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...x,d:t,fill:"none",className:Ke(["react-flow__edge-path",x.className])}),h?u.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,i&&Xt(r)&&Xt(o)?u.jsx(kN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g}):null]})}function Sm({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===ye.Left||t===ye.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function sg({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:c=ye.Top}){const[d,f]=Sm({pos:o,x1:t,y1:r,x2:i,y2:l}),[g,h]=Sm({pos:c,x1:i,y1:l,x2:t,y2:r}),[x,m,y,w]=Mh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:d,sourceControlY:f,targetControlX:g,targetControlY:h});return[`M${t},${r} C${d},${f} ${g},${h} ${i},${l}`,x,m,y,w]}function ig(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:I,interactionWidth:C})=>{const[T,k,D]=sg({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),P=t.isInternal?void 0:r;return u.jsx(No,{id:P,path:T,labelX:k,labelY:D,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:I,interactionWidth:C})})}const CN=ig({isInternal:!1}),lg=ig({isInternal:!0});CN.displayName="SimpleBezierEdge";lg.displayName="SimpleBezierEdgeInternal";function ag(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,sourcePosition:w=ye.Bottom,targetPosition:S=ye.Top,markerEnd:j,markerStart:I,pathOptions:C,interactionWidth:T})=>{const[k,D,P]=gc({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:c,targetPosition:S,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset,stepPosition:C==null?void 0:C.stepPosition}),$=t.isInternal?void 0:r;return u.jsx(No,{id:$,path:k,labelX:D,labelY:P,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:j,markerStart:I,interactionWidth:T})})}const ug=ag({isInternal:!1}),cg=ag({isInternal:!0});ug.displayName="SmoothStepEdge";cg.displayName="SmoothStepEdgeInternal";function dg(t){return L.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return u.jsx(ug,{...o,id:i,pathOptions:L.useMemo(()=>{var c;return{borderRadius:0,offset:(c=o.pathOptions)==null?void 0:c.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const IN=dg({isInternal:!1}),fg=dg({isInternal:!0});IN.displayName="StepEdge";fg.displayName="StepEdgeInternal";function pg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:j})=>{const[I,C,T]=Dh({sourceX:o,sourceY:i,targetX:l,targetY:c}),k=t.isInternal?void 0:r;return u.jsx(No,{id:k,path:I,labelX:C,labelY:T,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:j})})}const jN=pg({isInternal:!1}),mg=pg({isInternal:!0});jN.displayName="StraightEdge";mg.displayName="StraightEdgeInternal";function hg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d=ye.Bottom,targetPosition:f=ye.Top,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:I,pathOptions:C,interactionWidth:T})=>{const[k,D,P]=Vl({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f,curvature:C==null?void 0:C.curvature}),$=t.isInternal?void 0:r;return u.jsx(No,{id:$,path:k,labelX:D,labelY:P,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:I,interactionWidth:T})})}const bN=hg({isInternal:!1}),gg=hg({isInternal:!0});bN.displayName="BezierEdge";gg.displayName="BezierEdgeInternal";const Nm={default:gg,straight:mg,step:fg,smoothstep:cg,simplebezier:lg},km={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},EN=(t,r,o)=>o===ye.Left?t-r:o===ye.Right?t+r:t,_N=(t,r,o)=>o===ye.Top?t-r:o===ye.Bottom?t+r:t,Cm="react-flow__edgeupdater";function Im({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:c,onMouseOut:d,type:f}){return u.jsx("circle",{onMouseDown:l,onMouseEnter:c,onMouseOut:d,className:Ke([Cm,`${Cm}-${f}`]),cx:EN(r,i,t),cy:_N(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function MN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:c,targetY:d,sourcePosition:f,targetPosition:g,onReconnect:h,onReconnectStart:x,onReconnectEnd:m,setReconnecting:y,setUpdateHover:w}){const S=He(),j=(D,P)=>{if(D.button!==0)return;const{autoPanOnConnect:$,domNode:W,isValidConnection:K,connectionMode:Q,connectionRadius:V,lib:z,onConnectStart:U,onConnectEnd:X,cancelConnection:A,nodeLookup:H,rfId:F,panBy:_,updateConnection:M}=S.getState(),N=P.type==="target",R=(Z,q)=>{y(!1),m==null||m(Z,o,P.type,q)},b=Z=>h==null?void 0:h(o,Z),O=(Z,q)=>{y(!0),x==null||x(D,o,P.type),U==null||U(Z,q)};vc.onPointerDown(D.nativeEvent,{autoPanOnConnect:$,connectionMode:Q,connectionRadius:V,domNode:W,handleId:P.id,nodeId:P.nodeId,nodeLookup:H,isTarget:N,edgeUpdaterType:P.type,lib:z,flowId:F,cancelConnection:A,panBy:_,isValidConnection:K,onConnect:b,onConnectStart:O,onConnectEnd:X,onReconnectEnd:R,updateConnection:M,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:D.currentTarget})},I=D=>j(D,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),C=D=>j(D,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),T=()=>w(!0),k=()=>w(!1);return u.jsxs(u.Fragment,{children:[(t===!0||t==="source")&&u.jsx(Im,{position:f,centerX:i,centerY:l,radius:r,onMouseDown:I,onMouseEnter:T,onMouseOut:k,type:"source"}),(t===!0||t==="target")&&u.jsx(Im,{position:g,centerX:c,centerY:d,radius:r,onMouseDown:C,onMouseEnter:T,onMouseOut:k,type:"target"})]})}function PN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:c,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:h,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,rfId:S,edgeTypes:j,noPanClassName:I,onError:C,disableKeyboardA11y:T}){let k=_e(ke=>ke.edgeLookup.get(t));const D=_e(ke=>ke.defaultEdgeOptions);k=D?{...D,...k}:k;let P=k.type||"default",$=(j==null?void 0:j[P])||Nm[P];$===void 0&&(C==null||C("011",sn.error011(P)),P="default",$=(j==null?void 0:j.default)||Nm.default);const W=!!(k.focusable||r&&typeof k.focusable>"u"),K=typeof m<"u"&&(k.reconnectable||o&&typeof k.reconnectable>"u"),Q=!!(k.selectable||i&&typeof k.selectable>"u"),V=L.useRef(null),[z,U]=L.useState(!1),[X,A]=L.useState(!1),H=He(),{zIndex:F,sourceX:_,sourceY:M,targetX:N,targetY:R,sourcePosition:b,targetPosition:O}=_e(L.useCallback(ke=>{const we=ke.nodeLookup.get(k.source),be=ke.nodeLookup.get(k.target);if(!we||!be)return{zIndex:k.zIndex,...km};const Te=x1({id:t,sourceNode:we,targetNode:be,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:ke.connectionMode,onError:C});return{zIndex:u1({selected:k.selected,zIndex:k.zIndex,sourceNode:we,targetNode:be,elevateOnSelect:ke.elevateEdgesOnSelect,zIndexMode:ke.zIndexMode}),...Te||km}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Fe),Z=L.useMemo(()=>k.markerStart?`url('#${xc(k.markerStart,S)}')`:void 0,[k.markerStart,S]),q=L.useMemo(()=>k.markerEnd?`url('#${xc(k.markerEnd,S)}')`:void 0,[k.markerEnd,S]);if(k.hidden||_===null||M===null||N===null||R===null)return null;const ne=ke=>{var Ee;const{addSelectedEdges:we,unselectNodesAndEdges:be,multiSelectionActive:Te}=H.getState();Q&&(H.setState({nodesSelectionActive:!1}),k.selected&&Te?(be({nodes:[],edges:[k]}),(Ee=V.current)==null||Ee.blur()):we([t])),l&&l(ke,k)},oe=c?ke=>{c(ke,{...k})}:void 0,ue=d?ke=>{d(ke,{...k})}:void 0,re=f?ke=>{f(ke,{...k})}:void 0,ce=g?ke=>{g(ke,{...k})}:void 0,ve=h?ke=>{h(ke,{...k})}:void 0,Ce=ke=>{var we;if(!T&&gh.includes(ke.key)&&Q){const{unselectNodesAndEdges:be,addSelectedEdges:Te}=H.getState();ke.key==="Escape"?((we=V.current)==null||we.blur(),be({edges:[k]})):Te([t])}};return u.jsx("svg",{style:{zIndex:F},children:u.jsxs("g",{className:Ke(["react-flow__edge",`react-flow__edge-${P}`,k.className,I,{selected:k.selected,animated:k.animated,inactive:!Q&&!l,updating:z,selectable:Q}]),onClick:ne,onDoubleClick:oe,onContextMenu:ue,onMouseEnter:re,onMouseMove:ce,onMouseLeave:ve,onKeyDown:W?Ce:void 0,tabIndex:W?0:void 0,role:k.ariaRole??(W?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":W?`${Xh}-${S}`:void 0,ref:V,...k.domAttributes,children:[!X&&u.jsx($,{id:t,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:Q,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:_,sourceY:M,targetX:N,targetY:R,sourcePosition:b,targetPosition:O,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:Z,markerEnd:q,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),K&&u.jsx(MN,{edge:k,isReconnectable:K,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,sourceX:_,sourceY:M,targetX:N,targetY:R,sourcePosition:b,targetPosition:O,setUpdateHover:U,setReconnecting:A})]})})}var DN=L.memo(PN);const TN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function xg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:x,reconnectRadius:m,onEdgeDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:j}){const{edgesFocusable:I,edgesReconnectable:C,elementsSelectable:T,onError:k}=_e(TN,Fe),D=xN(r);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(NN,{defaultColor:t,rfId:o}),D.map(P=>u.jsx(DN,{id:P,edgesFocusable:I,edgesReconnectable:C,elementsSelectable:T,noPanClassName:l,onReconnect:c,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:h,onClick:x,reconnectRadius:m,onDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:k,edgeTypes:i,disableKeyboardA11y:j},P))]})}xg.displayName="EdgeRenderer";const ON=L.memo(xg),AN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function LN({children:t}){const r=_e(AN);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function $N(t){const r=Pr(),o=L.useRef(!1);L.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const zN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function RN(t){const r=_e(zN),o=He();return L.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function FN(t){return t.connection.inProgress?{...t.connection,to:zs(t.connection.to,t.transform)}:{...t.connection}}function HN(t){return FN}function VN(t){const r=HN();return _e(r,Fe)}const BN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function WN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:c,height:d,isValid:f,inProgress:g}=_e(BN,Fe);return!(c&&l&&g)?null:u.jsx("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:Ke(["react-flow__connection",vh(f)]),children:u.jsx(yg,{style:r,type:o,CustomComponent:i,isValid:f})})})}const yg=({style:t,type:r=Kn.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:c,fromNode:d,fromHandle:f,fromPosition:g,to:h,toNode:x,toHandle:m,toPosition:y,pointer:w}=VN();if(!l)return;if(o)return u.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:d,fromHandle:f,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:vh(i),toNode:x,toHandle:m,pointer:w});let S="";const j={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(r){case Kn.Bezier:[S]=Vl(j);break;case Kn.SimpleBezier:[S]=sg(j);break;case Kn.Step:[S]=gc({...j,borderRadius:0});break;case Kn.SmoothStep:[S]=gc(j);break;default:[S]=Dh(j)}return u.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};yg.displayName="ConnectionLine";const UN={};function jm(t=UN){L.useRef(t),He(),L.useEffect(()=>{},[t])}function YN(){He(),L.useRef(!1),L.useEffect(()=>{},[])}function vg({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:x,onSelectionContextMenu:m,onSelectionStart:y,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:j,connectionLineComponent:I,connectionLineContainerStyle:C,selectionKeyCode:T,selectionOnDrag:k,selectionMode:D,multiSelectionKeyCode:P,panActivationKeyCode:$,zoomActivationKeyCode:W,deleteKeyCode:K,onlyRenderVisibleElements:Q,elementsSelectable:V,defaultViewport:z,translateExtent:U,minZoom:X,maxZoom:A,preventScrolling:H,defaultMarkerColor:F,zoomOnScroll:_,zoomOnPinch:M,panOnScroll:N,panOnScrollSpeed:R,panOnScrollMode:b,zoomOnDoubleClick:O,panOnDrag:Z,onPaneClick:q,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ue,onPaneScroll:re,onPaneContextMenu:ce,paneClickDistance:ve,nodeClickDistance:Ce,onEdgeContextMenu:ke,onEdgeMouseEnter:we,onEdgeMouseMove:be,onEdgeMouseLeave:Te,reconnectRadius:Ee,onReconnect:Xe,onReconnectStart:Lt,onReconnectEnd:xt,noDragClassName:yt,noWheelClassName:Et,noPanClassName:an,disableKeyboardA11y:In,nodeExtent:Dr,rfId:qn,viewport:un,onViewportChange:cn}){return jm(t),jm(r),YN(),$N(o),RN(un),u.jsx(lN,{onPaneClick:q,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ue,onPaneContextMenu:ce,onPaneScroll:re,paneClickDistance:ve,deleteKeyCode:K,selectionKeyCode:T,selectionOnDrag:k,selectionMode:D,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:P,panActivationKeyCode:$,zoomActivationKeyCode:W,elementsSelectable:V,zoomOnScroll:_,zoomOnPinch:M,zoomOnDoubleClick:O,panOnScroll:N,panOnScrollSpeed:R,panOnScrollMode:b,panOnDrag:Z,defaultViewport:z,translateExtent:U,minZoom:X,maxZoom:A,onSelectionContextMenu:m,preventScrolling:H,noDragClassName:yt,noWheelClassName:Et,noPanClassName:an,disableKeyboardA11y:In,onViewportChange:cn,isControlledViewport:!!un,children:u.jsxs(LN,{children:[u.jsx(ON,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:Xe,onReconnectStart:Lt,onReconnectEnd:xt,onlyRenderVisibleElements:Q,onEdgeContextMenu:ke,onEdgeMouseEnter:we,onEdgeMouseMove:be,onEdgeMouseLeave:Te,reconnectRadius:Ee,defaultMarkerColor:F,noPanClassName:an,disableKeyboardA11y:In,rfId:qn}),u.jsx(WN,{style:j,type:S,component:I,containerStyle:C}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(gN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:x,nodeClickDistance:Ce,onlyRenderVisibleElements:Q,noPanClassName:an,noDragClassName:yt,disableKeyboardA11y:In,nodeExtent:Dr,rfId:qn}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}vg.displayName="GraphView";const XN=L.memo(vg),bm=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:g=.5,maxZoom:h=2,nodeOrigin:x,nodeExtent:m,zIndexMode:y="basic"}={})=>{const w=new Map,S=new Map,j=new Map,I=new Map,C=i??r??[],T=o??t??[],k=x??[0,0],D=m??bs;Ah(j,I,C);const P=yc(T,w,S,{nodeOrigin:k,nodeExtent:D,zIndexMode:y});let $=[0,0,1];if(d&&l&&c){const W=Ls(w,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:K,y:Q,zoom:V}=Oc(W,l,c,g,h,(f==null?void 0:f.padding)??.1);$=[K,Q,V]}return{rfId:"1",width:l??0,height:c??0,transform:$,nodes:T,nodesInitialized:P,nodeLookup:w,parentLookup:S,edges:C,edgeLookup:I,connectionLookup:j,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:bs,nodeExtent:D,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:yo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:f,fitViewResolver:null,connection:{...yh},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:r1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:xh,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},GN=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:g,maxZoom:h,nodeOrigin:x,nodeExtent:m,zIndexMode:y})=>uS((w,S)=>{async function j(){const{nodeLookup:I,panZoom:C,fitViewOptions:T,fitViewResolver:k,width:D,height:P,minZoom:$,maxZoom:W}=S();C&&(await t1({nodes:I,width:D,height:P,panZoom:C,minZoom:$,maxZoom:W},T),k==null||k.resolve(!0),w({fitViewResolver:null}))}return{...bm({nodes:t,edges:r,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:g,maxZoom:h,nodeOrigin:x,nodeExtent:m,defaultNodes:o,defaultEdges:i,zIndexMode:y}),setNodes:I=>{const{nodeLookup:C,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:D,fitViewQueued:P,zIndexMode:$}=S(),W=yc(I,C,T,{nodeOrigin:k,nodeExtent:m,elevateNodesOnSelect:D,checkEquality:!0,zIndexMode:$});P&&W?(j(),w({nodes:I,nodesInitialized:W,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:I,nodesInitialized:W})},setEdges:I=>{const{connectionLookup:C,edgeLookup:T}=S();Ah(C,T,I),w({edges:I})},setDefaultNodesAndEdges:(I,C)=>{if(I){const{setNodes:T}=S();T(I),w({hasDefaultNodes:!0})}if(C){const{setEdges:T}=S();T(C),w({hasDefaultEdges:!0})}},updateNodeInternals:I=>{const{triggerNodeChanges:C,nodeLookup:T,parentLookup:k,domNode:D,nodeOrigin:P,nodeExtent:$,debug:W,fitViewQueued:K,zIndexMode:Q}=S(),{changes:V,updatedInternals:z}=I1(I,T,k,D,P,$,Q);z&&(S1(T,k,{nodeOrigin:P,nodeExtent:$,zIndexMode:Q}),K?(j(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(V==null?void 0:V.length)>0&&(W&&console.log("React Flow: trigger node changes",V),C==null||C(V)))},updateNodePositions:(I,C=!1)=>{const T=[];let k=[];const{nodeLookup:D,triggerNodeChanges:P,connection:$,updateConnection:W,onNodesChangeMiddlewareMap:K}=S();for(const[Q,V]of I){const z=D.get(Q),U=!!(z!=null&&z.expandParent&&(z!=null&&z.parentId)&&(V!=null&&V.position)),X={id:Q,type:"position",position:U?{x:Math.max(0,V.position.x),y:Math.max(0,V.position.y)}:V.position,dragging:C};if(z&&$.inProgress&&$.fromNode.id===z.id){const A=jr(z,$.fromHandle,ye.Left,!0);W({...$,from:A})}U&&z.parentId&&T.push({id:Q,parentId:z.parentId,rect:{...V.internals.positionAbsolute,width:V.measured.width??0,height:V.measured.height??0}}),k.push(X)}if(T.length>0){const{parentLookup:Q,nodeOrigin:V}=S(),z=Fc(T,D,Q,V);k.push(...z)}for(const Q of K.values())k=Q(k);P(k)},triggerNodeChanges:I=>{const{onNodesChange:C,setNodes:T,nodes:k,hasDefaultNodes:D,debug:P}=S();if(I!=null&&I.length){if(D){const $=PS(I,k);T($)}P&&console.log("React Flow: trigger node changes",I),C==null||C(I)}},triggerEdgeChanges:I=>{const{onEdgesChange:C,setEdges:T,edges:k,hasDefaultEdges:D,debug:P}=S();if(I!=null&&I.length){if(D){const $=DS(I,k);T($)}P&&console.log("React Flow: trigger edge changes",I),C==null||C(I)}},addSelectedNodes:I=>{const{multiSelectionActive:C,edgeLookup:T,nodeLookup:k,triggerNodeChanges:D,triggerEdgeChanges:P}=S();if(C){const $=I.map(W=>yr(W,!0));D($);return}D(po(k,new Set([...I]),!0)),P(po(T))},addSelectedEdges:I=>{const{multiSelectionActive:C,edgeLookup:T,nodeLookup:k,triggerNodeChanges:D,triggerEdgeChanges:P}=S();if(C){const $=I.map(W=>yr(W,!0));P($);return}P(po(T,new Set([...I]))),D(po(k,new Set,!0))},unselectNodesAndEdges:({nodes:I,edges:C}={})=>{const{edges:T,nodes:k,nodeLookup:D,triggerNodeChanges:P,triggerEdgeChanges:$}=S(),W=I||k,K=C||T,Q=W.map(z=>{const U=D.get(z.id);return U&&(U.selected=!1),yr(z.id,!1)}),V=K.map(z=>yr(z.id,!1));P(Q),$(V)},setMinZoom:I=>{const{panZoom:C,maxZoom:T}=S();C==null||C.setScaleExtent([I,T]),w({minZoom:I})},setMaxZoom:I=>{const{panZoom:C,minZoom:T}=S();C==null||C.setScaleExtent([T,I]),w({maxZoom:I})},setTranslateExtent:I=>{var C;(C=S().panZoom)==null||C.setTranslateExtent(I),w({translateExtent:I})},resetSelectedElements:()=>{const{edges:I,nodes:C,triggerNodeChanges:T,triggerEdgeChanges:k,elementsSelectable:D}=S();if(!D)return;const P=C.reduce((W,K)=>K.selected?[...W,yr(K.id,!1)]:W,[]),$=I.reduce((W,K)=>K.selected?[...W,yr(K.id,!1)]:W,[]);T(P),k($)},setNodeExtent:I=>{const{nodes:C,nodeLookup:T,parentLookup:k,nodeOrigin:D,elevateNodesOnSelect:P,nodeExtent:$,zIndexMode:W}=S();I[0][0]===$[0][0]&&I[0][1]===$[0][1]&&I[1][0]===$[1][0]&&I[1][1]===$[1][1]||(yc(C,T,k,{nodeOrigin:D,nodeExtent:I,elevateNodesOnSelect:P,checkEquality:!1,zIndexMode:W}),w({nodeExtent:I}))},panBy:I=>{const{transform:C,width:T,height:k,panZoom:D,translateExtent:P}=S();return j1({delta:I,panZoom:D,transform:C,translateExtent:P,width:T,height:k})},setCenter:async(I,C,T)=>{const{width:k,height:D,maxZoom:P,panZoom:$}=S();if(!$)return Promise.resolve(!1);const W=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:P;return await $.setViewport({x:k/2-I*W,y:D/2-C*W,zoom:W},{duration:T==null?void 0:T.duration,ease:T==null?void 0:T.ease,interpolate:T==null?void 0:T.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...yh}})},updateConnection:I=>{w({connection:I})},reset:()=>w({...bm()})}},Object.is);function Xl({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:c,initialMinZoom:d,initialMaxZoom:f,initialFitViewOptions:g,fitView:h,nodeOrigin:x,nodeExtent:m,zIndexMode:y,children:w}){const[S]=L.useState(()=>GN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:h,minZoom:d,maxZoom:f,fitViewOptions:g,nodeOrigin:x,nodeExtent:m,zIndexMode:y}));return u.jsx(dS,{value:S,children:u.jsx(LS,{children:w})})}function KN({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:c,height:d,fitView:f,fitViewOptions:g,minZoom:h,maxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w}){return L.useContext(Wl)?u.jsx(u.Fragment,{children:t}):u.jsx(Xl,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:c,initialHeight:d,fitView:f,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w,children:t})}const QN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:c,edgeTypes:d,onNodeClick:f,onEdgeClick:g,onInit:h,onMove:x,onMoveStart:m,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:j,onClickConnectStart:I,onClickConnectEnd:C,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:D,onNodeContextMenu:P,onNodeDoubleClick:$,onNodeDragStart:W,onNodeDrag:K,onNodeDragStop:Q,onNodesDelete:V,onEdgesDelete:z,onDelete:U,onSelectionChange:X,onSelectionDragStart:A,onSelectionDrag:H,onSelectionDragStop:F,onSelectionContextMenu:_,onSelectionStart:M,onSelectionEnd:N,onBeforeDelete:R,connectionMode:b,connectionLineType:O=Kn.Bezier,connectionLineStyle:Z,connectionLineComponent:q,connectionLineContainerStyle:ne,deleteKeyCode:oe="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:re=!1,selectionMode:ce=Es.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:Ce=Ms()?"Meta":"Control",zoomActivationKeyCode:ke=Ms()?"Meta":"Control",snapToGrid:we,snapGrid:be,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:Ee,nodesDraggable:Xe,autoPanOnNodeFocus:Lt,nodesConnectable:xt,nodesFocusable:yt,nodeOrigin:Et=Gh,edgesFocusable:an,edgesReconnectable:In,elementsSelectable:Dr=!0,defaultViewport:qn=CS,minZoom:un=.5,maxZoom:cn=2,translateExtent:Zn=bs,preventScrolling:Fs=!0,nodeExtent:dn,defaultMarkerColor:Jn="#b1b1b7",zoomOnScroll:Kl=!0,zoomOnPinch:Hs=!0,panOnScroll:Vs=!1,panOnScrollSpeed:Ql=.5,panOnScrollMode:ko=Nr.Free,zoomOnDoubleClick:Co=!0,panOnDrag:Io=!0,onPaneClick:jo,onPaneMouseEnter:bo,onPaneMouseMove:jn,onPaneMouseLeave:bn,onPaneScroll:Bs,onPaneContextMenu:Ws,paneClickDistance:Us=1,nodeClickDistance:Ys=0,children:Xs,onReconnect:Eo,onReconnectStart:Gs,onReconnectEnd:er,onEdgeContextMenu:_o,onEdgeDoubleClick:tr,onEdgeMouseEnter:ql,onEdgeMouseMove:nr,onEdgeMouseLeave:Tr,reconnectRadius:Or=10,onNodesChange:Mo,onEdgesChange:Zl,noDragClassName:Jl="nodrag",noWheelClassName:ea="nowheel",noPanClassName:Qt="nopan",fitView:Po,fitViewOptions:Do,connectOnClick:ta,attributionPosition:Ks,proOptions:Qs,defaultEdgeOptions:qs,elevateNodesOnSelect:Zs=!0,elevateEdgesOnSelect:na=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Ve,autoPanOnNodeDrag:ra,autoPanSpeed:To,connectionRadius:ei,isValidConnection:Ar,onError:oa,style:ti,id:rr,nodeDragThreshold:_t,connectionDragThreshold:sa,viewport:vt,onViewportChange:ia,width:la,height:aa,colorMode:Lr="light",debug:$r,onScroll:qt,ariaLabelConfig:zr,zIndexMode:ni="basic",...ua},Oo){const Rr=rr||"1",Ao=ES(Lr),or=L.useCallback(ri=>{ri.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),qt==null||qt(ri)},[qt]);return u.jsx("div",{"data-testid":"rf__wrapper",...ua,onScroll:or,style:{...ti,...QN},ref:Oo,className:Ke(["react-flow",l,Ao]),id:rr,role:"application",children:u.jsxs(KN,{nodes:t,edges:r,width:la,height:aa,fitView:Po,fitViewOptions:Do,minZoom:un,maxZoom:cn,nodeOrigin:Et,nodeExtent:dn,zIndexMode:ni,children:[u.jsx(XN,{onInit:h,onNodeClick:f,onEdgeClick:g,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:D,onNodeContextMenu:P,onNodeDoubleClick:$,nodeTypes:c,edgeTypes:d,connectionLineType:O,connectionLineStyle:Z,connectionLineComponent:q,connectionLineContainerStyle:ne,selectionKeyCode:ue,selectionOnDrag:re,selectionMode:ce,deleteKeyCode:oe,multiSelectionKeyCode:Ce,panActivationKeyCode:ve,zoomActivationKeyCode:ke,onlyRenderVisibleElements:Te,defaultViewport:qn,translateExtent:Zn,minZoom:un,maxZoom:cn,preventScrolling:Fs,zoomOnScroll:Kl,zoomOnPinch:Hs,zoomOnDoubleClick:Co,panOnScroll:Vs,panOnScrollSpeed:Ql,panOnScrollMode:ko,panOnDrag:Io,onPaneClick:jo,onPaneMouseEnter:bo,onPaneMouseMove:jn,onPaneMouseLeave:bn,onPaneScroll:Bs,onPaneContextMenu:Ws,paneClickDistance:Us,nodeClickDistance:Ys,onSelectionContextMenu:_,onSelectionStart:M,onSelectionEnd:N,onReconnect:Eo,onReconnectStart:Gs,onReconnectEnd:er,onEdgeContextMenu:_o,onEdgeDoubleClick:tr,onEdgeMouseEnter:ql,onEdgeMouseMove:nr,onEdgeMouseLeave:Tr,reconnectRadius:Or,defaultMarkerColor:Jn,noDragClassName:Jl,noWheelClassName:ea,noPanClassName:Qt,rfId:Rr,disableKeyboardA11y:Js,nodeExtent:dn,viewport:vt,onViewportChange:ia}),u.jsx(bS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:j,onClickConnectStart:I,onClickConnectEnd:C,nodesDraggable:Xe,autoPanOnNodeFocus:Lt,nodesConnectable:xt,nodesFocusable:yt,edgesFocusable:an,edgesReconnectable:In,elementsSelectable:Dr,elevateNodesOnSelect:Zs,elevateEdgesOnSelect:na,minZoom:un,maxZoom:cn,nodeExtent:dn,onNodesChange:Mo,onEdgesChange:Zl,snapToGrid:we,snapGrid:be,connectionMode:b,translateExtent:Zn,connectOnClick:ta,defaultEdgeOptions:qs,fitView:Po,fitViewOptions:Do,onNodesDelete:V,onEdgesDelete:z,onDelete:U,onNodeDragStart:W,onNodeDrag:K,onNodeDragStop:Q,onSelectionDrag:H,onSelectionDragStart:A,onSelectionDragStop:F,onMove:x,onMoveStart:m,onMoveEnd:y,noPanClassName:Qt,nodeOrigin:Et,rfId:Rr,autoPanOnConnect:Ve,autoPanOnNodeDrag:ra,autoPanSpeed:To,onError:oa,connectionRadius:ei,isValidConnection:Ar,selectNodesOnDrag:Ee,nodeDragThreshold:_t,connectionDragThreshold:sa,onBeforeDelete:R,debug:$r,ariaLabelConfig:zr,zIndexMode:ni}),u.jsx(kS,{onSelectionChange:X}),Xs,u.jsx(yS,{proOptions:Qs,position:Ks}),u.jsx(xS,{rfId:Rr,disableKeyboardA11y:Js})]})})}var wg=Qh(qN);const ZN=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function Sg({children:t}){const r=_e(ZN);return r?cS.createPortal(t,r):null}function JN({dimensions:t,lineWidth:r,variant:o,className:i}){return u.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ke(["react-flow__background-pattern",o,i])})}function ek({radius:t,className:r}){return u.jsx("circle",{cx:t,cy:t,r:t,className:Ke(["react-flow__background-pattern","dots",r])})}var Qn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Qn||(Qn={}));const tk={[Qn.Dots]:1,[Qn.Lines]:1,[Qn.Cross]:6},nk=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Ng({id:t,variant:r=Qn.Dots,gap:o=20,size:i,lineWidth:l=1,offset:c=0,color:d,bgColor:f,style:g,className:h,patternClassName:x}){const m=L.useRef(null),{transform:y,patternId:w}=_e(nk,Fe),S=i||tk[r],j=r===Qn.Dots,I=r===Qn.Cross,C=Array.isArray(o)?o:[o,o],T=[C[0]*y[2]||1,C[1]*y[2]||1],k=S*y[2],D=Array.isArray(c)?c:[c,c],P=I?[k,k]:T,$=[D[0]*y[2]||1+P[0]/2,D[1]*y[2]||1+P[1]/2],W=`${w}${t||""}`;return u.jsxs("svg",{className:Ke(["react-flow__background",h]),style:{...g,...Yl,"--xy-background-color-props":f,"--xy-background-pattern-color-props":d},ref:m,"data-testid":"rf__background",children:[u.jsx("pattern",{id:W,x:y[0]%T[0],y:y[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`,children:j?u.jsx(ek,{radius:k/2,className:x}):u.jsx(JN,{dimensions:P,lineWidth:l,variant:r,className:x})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}Ng.displayName="Background";const kg=L.memo(Ng);function rk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ok(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function sk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ik(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function lk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function pl({children:t,className:r,...o}){return u.jsx("button",{type:"button",className:Ke(["react-flow__controls-button",r]),...o,children:t})}const ak=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Cg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:c,onZoomOut:d,onFitView:f,onInteractiveChange:g,className:h,children:x,position:m="bottom-left",orientation:y="vertical","aria-label":w}){const S=He(),{isInteractive:j,minZoomReached:I,maxZoomReached:C,ariaLabelConfig:T}=_e(ak,Fe),{zoomIn:k,zoomOut:D,fitView:P}=Pr(),$=()=>{k(),c==null||c()},W=()=>{D(),d==null||d()},K=()=>{P(l),f==null||f()},Q=()=>{S.setState({nodesDraggable:!j,nodesConnectable:!j,elementsSelectable:!j}),g==null||g(!j)},V=y==="horizontal"?"horizontal":"vertical";return u.jsxs(Ul,{className:Ke(["react-flow__controls",V,h]),position:m,style:t,"data-testid":"rf__controls","aria-label":w??T["controls.ariaLabel"],children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(pl,{onClick:$,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:C,children:u.jsx(rk,{})}),u.jsx(pl,{onClick:W,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:I,children:u.jsx(ok,{})})]}),o&&u.jsx(pl,{className:"react-flow__controls-fitview",onClick:K,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:u.jsx(sk,{})}),i&&u.jsx(pl,{className:"react-flow__controls-interactive",onClick:Q,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:j?u.jsx(lk,{}):u.jsx(ik,{})}),x]})}Cg.displayName="Controls";const Ig=L.memo(Cg);function uk({id:t,x:r,y:o,width:i,height:l,style:c,color:d,strokeColor:f,strokeWidth:g,className:h,borderRadius:x,shapeRendering:m,selected:y,onClick:w}){const{background:S,backgroundColor:j}=c||{},I=d||S||j;return u.jsx("rect",{className:Ke(["react-flow__minimap-node",{selected:y},h]),x:r,y:o,rx:x,ry:x,width:i,height:l,style:{fill:I,stroke:f,strokeWidth:g},shapeRendering:m,onClick:w?C=>w(C,t):void 0})}const ck=L.memo(uk),dk=t=>t.nodes.map(r=>r.id),oc=t=>t instanceof Function?t:()=>t;function fk({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:c=ck,onClick:d}){const f=_e(dk,Fe),g=oc(r),h=oc(t),x=oc(o),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(y=>u.jsx(mk,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:x,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:c,onClick:d,shapeRendering:m},y))})}function pk({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:c,shapeRendering:d,NodeComponent:f,onClick:g}){const{node:h,x,y:m,width:y,height:w}=_e(S=>{const{internals:j}=S.nodeLookup.get(t),I=j.userNode,{x:C,y:T}=j.positionAbsolute,{width:k,height:D}=Cn(I);return{node:I,x:C,y:T,width:k,height:D}},Fe);return!h||h.hidden||!Ih(h)?null:u.jsx(f,{x,y:m,width:y,height:w,style:h.style,selected:!!h.selected,className:i(h),color:r(h),borderRadius:l,strokeColor:o(h),strokeWidth:c,shapeRendering:d,onClick:g,id:h.id})}const mk=L.memo(pk);var hk=L.memo(fk);const gk=200,xk=150,yk=t=>!t.hidden,vk=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?Ch(Ls(t.nodeLookup,{filter:yk}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},wk="react-flow__minimap-desc";function jg({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:g,maskColor:h,maskStrokeColor:x,maskStrokeWidth:m,position:y="bottom-right",onClick:w,onNodeClick:S,pannable:j=!1,zoomable:I=!1,ariaLabel:C,inversePan:T,zoomStep:k=1,offsetScale:D=5}){const P=He(),$=L.useRef(null),{boundingRect:W,viewBB:K,rfId:Q,panZoom:V,translateExtent:z,flowWidth:U,flowHeight:X,ariaLabelConfig:A}=_e(vk,Fe),H=(t==null?void 0:t.width)??gk,F=(t==null?void 0:t.height)??xk,_=W.width/H,M=W.height/F,N=Math.max(_,M),R=N*H,b=N*F,O=D*N,Z=W.x-(R-W.width)/2-O,q=W.y-(b-W.height)/2-O,ne=R+O*2,oe=b+O*2,ue=`${wk}-${Q}`,re=L.useRef(0),ce=L.useRef();re.current=N,L.useEffect(()=>{if($.current&&V)return ce.current=A1({domNode:$.current,panZoom:V,getTransform:()=>P.getState().transform,getViewScale:()=>re.current}),()=>{var we;(we=ce.current)==null||we.destroy()}},[V]),L.useEffect(()=>{var we;(we=ce.current)==null||we.update({translateExtent:z,width:U,height:X,inversePan:T,pannable:j,zoomStep:k,zoomable:I})},[j,I,T,k,z,U,X]);const ve=w?we=>{var Ee;const[be,Te]=((Ee=ce.current)==null?void 0:Ee.pointer(we))||[0,0];w(we,{x:be,y:Te})}:void 0,Ce=S?L.useCallback((we,be)=>{const Te=P.getState().nodeLookup.get(be).internals.userNode;S(we,Te)},[]):void 0,ke=C??A["minimap.ariaLabel"];return u.jsx(Ul,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*N:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:Ke(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:H,height:F,viewBox:`${Z} ${q} ${ne} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:$,onClick:ve,children:[ke&&u.jsx("title",{id:ue,children:ke}),u.jsx(hk,{onClick:Ce,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-O},${q-O}h${ne+O*2}v${oe+O*2}h${-ne-O*2}z
        M${K.x},${K.y}h${K.width}v${K.height}h${-K.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}jg.displayName="MiniMap";const Sk=L.memo(jg),Nk=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,kk={[br.Line]:"right",[br.Handle]:"bottom-right"};function Ck({nodeId:t,position:r,variant:o=br.Handle,className:i,style:l=void 0,children:c,color:d,minWidth:f=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:y,autoScale:w=!0,shouldResize:S,onResizeStart:j,onResize:I,onResizeEnd:C}){const T=eg(),k=typeof t=="string"?t:T,D=He(),P=L.useRef(null),$=o===br.Handle,W=_e(L.useCallback(Nk($&&w),[$,w]),Fe),K=L.useRef(null),Q=r??kk[o];L.useEffect(()=>{if(!(!P.current||!k))return K.current||(K.current=q1({domNode:P.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:z,transform:U,snapGrid:X,snapToGrid:A,nodeOrigin:H,domNode:F}=D.getState();return{nodeLookup:z,transform:U,snapGrid:X,snapToGrid:A,nodeOrigin:H,paneDomNode:F}},onChange:(z,U)=>{const{triggerNodeChanges:X,nodeLookup:A,parentLookup:H,nodeOrigin:F}=D.getState(),_=[],M={x:z.x,y:z.y},N=A.get(k);if(N&&N.expandParent&&N.parentId){const R=N.origin??F,b=z.width??N.measured.width??0,O=z.height??N.measured.height??0,Z={id:N.id,parentId:N.parentId,rect:{width:b,height:O,...jh({x:z.x??N.position.x,y:z.y??N.position.y},{width:b,height:O},N.parentId,A,R)}},q=Fc([Z],A,H,F);_.push(...q),M.x=z.x?Math.max(R[0]*b,z.x):void 0,M.y=z.y?Math.max(R[1]*O,z.y):void 0}if(M.x!==void 0&&M.y!==void 0){const R={id:k,type:"position",position:{...M}};_.push(R)}if(z.width!==void 0&&z.height!==void 0){const b={id:k,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};_.push(b)}for(const R of U){const b={...R,type:"position"};_.push(b)}X(_)},onEnd:({width:z,height:U})=>{const X={id:k,type:"dimensions",resizing:!1,dimensions:{width:z,height:U}};D.getState().triggerNodeChanges([X])}})),K.current.update({controlPosition:Q,boundaries:{minWidth:f,minHeight:g,maxWidth:h,maxHeight:x},keepAspectRatio:m,resizeDirection:y,onResizeStart:j,onResize:I,onResizeEnd:C,shouldResize:S}),()=>{var z;(z=K.current)==null||z.destroy()}},[Q,f,g,h,x,m,j,I,C,S]);const V=Q.split("-");return u.jsx("div",{className:Ke(["react-flow__resize-control","nodrag",...V,o,i]),ref:P,style:{...l,scale:W,...d&&{[$?"backgroundColor":"borderColor"]:d}},children:c})}const Em=L.memo(Ck);function Ik({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:c,color:d,minWidth:f=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,autoScale:y=!0,shouldResize:w,onResizeStart:S,onResize:j,onResizeEnd:I}){return r?u.jsxs(u.Fragment,{children:[U1.map(C=>u.jsx(Em,{className:l,style:c,nodeId:t,position:C,variant:br.Line,color:d,minWidth:f,minHeight:g,maxWidth:h,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:j,onResizeEnd:I},C)),W1.map(C=>u.jsx(Em,{className:o,style:i,nodeId:t,position:C,color:d,minWidth:f,minHeight:g,maxWidth:h,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:j,onResizeEnd:I},C))]}):null}const _m=t=>{let r;const o=new Set,i=(h,x)=>{const m=typeof h=="function"?h(r):h;if(!Object.is(m,r)){const y=r;r=x??(typeof m!="object"||m===null)?m:Object.assign({},r,m),o.forEach(w=>w(r,y))}},l=()=>r,f={setState:i,getState:l,getInitialState:()=>g,subscribe:h=>(o.add(h),()=>o.delete(h))},g=r=t(i,l,f);return f},jk=(t=>t?_m(t):_m),bk=t=>t;function Ek(t,r=bk){const o=xs.useSyncExternalStore(t.subscribe,xs.useCallback(()=>r(t.getState()),[t,r]),xs.useCallback(()=>r(t.getInitialState()),[t,r]));return xs.useDebugValue(o),o}const Mm=t=>{const r=jk(t),o=i=>Ek(r,i);return Object.assign(o,r),o},Rs=(t=>t?Mm(t):Mm),_k="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Sn=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=_k[o[t]&63];return r};const It="__station_input__",Yt="__station_output__",Mk=100,Pk=["energycells"];function Dk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return Mk}function Tk(t,r){return Pk.includes(t)?r/100:1}const bg=3600,gs={food:75,medical:45,per:200,cycle:600},ml={food:50,medical:30,per:200},Ok="foodrations",Ak="medicalsupplies";function Lk(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),c=Math.max(i-t,0),d=t>0?Math.min(i/t,1):0,f=l*(gs.food/gs.per),g=c*(ml.food/ml.per),h=l*(gs.medical/gs.per),x=c*(ml.medical/ml.per),m=bg/gs.cycle,y=(f+g)*m,w=(h+x)*m;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:c,workerRatio:d,foodDemand:y,medicalDemand:w}}function $k(t,r){return 1+t*r}function zk(t,r){if(t.totalCapacity<=0||r<=0)return[];const o=r/t.totalCapacity,i=[];return t.foodDemand>0&&i.push({wareId:Ok,amount:t.foodDemand*o}),t.medicalDemand>0&&i.push({wareId:Ak,amount:t.medicalDemand*o}),i}function Rk(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const c=`${o}_default`;if(r[c])return r[c];for(const d of Object.values(r))if(d.wareId===o)return d;return null}function Sc(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Fk(t,r,o,i){const l=Sc(t.blueprintId,r),c=[],d=[];if(l==="production"){const f=r.modules.production[t.blueprintId];if(f){const g=Rk(f,r.recipes);if(g){const h=Tk(f.producedWareId,o),x=$k(g.workforceBonus,i),m=h*x,y=bg/g.time,w=g.amount*t.count*m*y;d.push({wareId:f.producedWareId,amount:w});for(const S of g.inputs){const j=S.amount*t.count*y;c.push({wareId:S.ware,amount:j})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:c,grossOutputs:d,netInputs:[...c],netOutputs:[...d]}}function uo(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Hk(t,r,o){const i=Dk(t,r),l=t.fillHabitats??!1,c=t.moduleConnections??[];let d=0,f=0;for(const N of t.modules){const R=Sc(N.blueprintId,o);if(R==="production"){const b=o.modules.production[N.blueprintId];b&&(d+=b.workforceMax*N.count)}else if(R==="habitat"){const b=o.modules.habitat[N.blueprintId];b&&(f+=b.workforceCapacity*N.count)}}const g=Lk(d,f,l),h=t.modules.map(N=>Fk(N,o,i,g.workerRatio)),x=new Map;for(const N of h)x.set(N.moduleId,N);for(const N of t.modules)if(Sc(N.blueprintId,o)==="habitat"){const b=o.modules.habitat[N.blueprintId],O=x.get(N.id);if(b&&O){const Z=b.workforceCapacity*N.count,q=zk(g,Z);O.grossInputs.push(...q),O.netInputs=[...O.grossInputs]}}const m=new Map;for(const N of h)m.set(N.moduleId,new Map);const y=new Map;for(const N of h)y.set(N.moduleId,new Map);const w=new Map;for(const N of h){const R=new Map;for(const b of N.grossOutputs)R.set(b.wareId,b.amount);w.set(N.moduleId,R)}const S=new Map;for(const N of h){const R=new Map;for(const b of N.grossInputs)R.set(b.wareId,b.amount);S.set(N.moduleId,R)}const j=c.filter(N=>N.sourceModuleId!==It&&N.targetModuleId!==Yt),I=c.filter(N=>N.sourceModuleId===It),C=c.filter(N=>N.targetModuleId===Yt),T=[];for(const N of j){const R=N.mode??"auto",b=w.get(N.sourceModuleId),O=(b==null?void 0:b.get(N.wareId))??0,Z=S.get(N.targetModuleId),q=(Z==null?void 0:Z.get(N.wareId))??0;let ne,oe=!1,ue=!1;switch(R){case"custom":ne=Math.min(N.amount,O,q),oe=N.amount>O,ue=N.amount>q;break;case"max":ne=Math.min(O,q),oe=O<q,ue=q<O;break;case"auto":default:ne=Math.min(O,q),oe=O<q,ue=q<O;break}T.push({connectionId:N.id,effectiveAmount:ne,sourceConstrained:oe,targetConstrained:ue}),b&&b.set(N.wareId,O-ne),Z&&Z.set(N.wareId,q-ne);const re=m.get(N.targetModuleId);if(re){const ve=re.get(N.wareId)||0;re.set(N.wareId,ve+ne)}const ce=y.get(N.sourceModuleId);if(ce){const ve=ce.get(N.wareId)||0;ce.set(N.wareId,ve+ne)}}for(const N of I){const R=N.mode??"auto",b=S.get(N.targetModuleId),O=(b==null?void 0:b.get(N.wareId))??0;let Z,q=!1,ne=!1;switch(R){case"custom":Z=Math.min(N.amount,O),ne=N.amount>O;break;case"max":case"auto":default:Z=O;break}T.push({connectionId:N.id,effectiveAmount:Z,sourceConstrained:q,targetConstrained:ne}),b&&b.set(N.wareId,O-Z)}for(const N of C){const R=N.mode??"auto",b=w.get(N.sourceModuleId),O=(b==null?void 0:b.get(N.wareId))??0;let Z,q=!1,ne=!1;switch(R){case"custom":Z=Math.min(N.amount,O),q=N.amount>O;break;case"max":case"auto":default:Z=O;break}T.push({connectionId:N.id,effectiveAmount:Z,sourceConstrained:q,targetConstrained:ne}),b&&b.set(N.wareId,O-Z)}for(const N of h){const R=m.get(N.moduleId)||new Map,b=y.get(N.moduleId)||new Map;N.netInputs=[];for(const O of N.grossInputs){const Z=R.get(O.wareId)||0,q=O.amount-Z;q>.01&&N.netInputs.push({wareId:O.wareId,amount:q})}N.netOutputs=[];for(const O of N.grossOutputs){const Z=b.get(O.wareId)||0,q=O.amount-Z;q>.01&&N.netOutputs.push({wareId:O.wareId,amount:q})}}const k=[],D=[],P=[],$=[];for(const N of h)k.push(...N.grossInputs),D.push(...N.grossOutputs),P.push(...N.netInputs),$.push(...N.netOutputs);const W=uo(k),K=uo(D),Q=uo(P),V=uo($),z=I.map(N=>{const R=T.find(b=>b.connectionId===N.id);return{wareId:N.wareId,amount:(R==null?void 0:R.effectiveAmount)??N.amount}}),U=C.map(N=>{const R=T.find(b=>b.connectionId===N.id);return{wareId:N.wareId,amount:(R==null?void 0:R.effectiveAmount)??N.amount}}),X=uo(z),A=uo(U),H=new Map;for(const N of X)H.set(N.wareId,N.amount);const F=new Map;for(const N of A)F.set(N.wareId,N.amount);const _=[];for(const N of Q){const R=H.get(N.wareId)||0,b=N.amount-R;b>.01&&_.push({wareId:N.wareId,amount:b})}const M=[];for(const N of V){const R=F.get(N.wareId)||0,b=N.amount-R;b>.01&&M.push({wareId:N.wareId,amount:b})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:d,totalWorkforceCapacity:f,actualPopulation:g.actualPopulation,workforceFoodDemand:g.foodDemand,workforceMedicalDemand:g.medicalDemand,modules:h,grossInputs:W,grossOutputs:K,netInputs:Q,netOutputs:V,availableForImport:_,availableForExport:M,stationInputs:X,stationOutputs:A,externallySupplied:[],externallyConsumed:[],remainingInputs:[...X],remainingOutputs:[...A],moduleConnections:T}}function Pm(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Vk(t,r){const o=t.stations.map(y=>Hk(y,t.sectors,r)),i=new Map;for(const y of o)i.set(y.stationId,y);const l=new Map,c=new Map,d=new Map,f=new Map;for(const y of t.stations)l.set(y.id,new Map),c.set(y.id,new Map),d.set(y.id,new Map),f.set(y.id,new Map);for(const y of o){const w=d.get(y.stationId),S=f.get(y.stationId);for(const j of y.stationOutputs){const I=y.netOutputs.find(T=>T.wareId===j.wareId),C=Math.min(j.amount,(I==null?void 0:I.amount)??j.amount);w.set(j.wareId,C)}for(const j of y.stationInputs)S.set(j.wareId,j.amount)}const g=[];for(const y of t.connections){const w=y.mode??"auto",S=d.get(y.sourceStationId),j=(S==null?void 0:S.get(y.wareId))??0,I=f.get(y.targetStationId),C=(I==null?void 0:I.get(y.wareId))??0;let T,k=!1,D=!1;switch(w){case"custom":T=Math.min(y.amount,j,C),k=y.amount>j,D=y.amount>C;break;case"max":T=Math.min(j,C),k=j<C,D=C<j;break;case"auto":default:T=Math.min(j,C),k=j<C,D=C<j;break}g.push({connectionId:y.id,effectiveAmount:T,sourceConstrained:k,targetConstrained:D}),S&&S.set(y.wareId,j-T),I&&I.set(y.wareId,C-T);const P=l.get(y.targetStationId);if(P){const W=P.get(y.wareId)||0;P.set(y.wareId,W+T)}const $=c.get(y.sourceStationId);if($){const W=$.get(y.wareId)||0;$.set(y.wareId,W+T)}}for(const y of o){const w=l.get(y.stationId)||new Map,S=c.get(y.stationId)||new Map;y.externallySupplied=Array.from(w.entries()).map(([I,C])=>({wareId:I,amount:C})).filter(I=>I.amount>.01),y.externallyConsumed=Array.from(S.entries()).map(([I,C])=>({wareId:I,amount:C})).filter(I=>I.amount>.01),y.remainingInputs=[];for(const I of y.stationInputs){const C=w.get(I.wareId)||0,T=I.amount-C;T>.01&&y.remainingInputs.push({wareId:I.wareId,amount:T})}y.remainingOutputs=[];for(const I of y.stationOutputs){const C=S.get(I.wareId)||0,T=I.amount-C;T>.01&&y.remainingOutputs.push({wareId:I.wareId,amount:T})}const j=t.stations.find(I=>I.id===y.stationId);if(j){const I=j.moduleConnections??[];for(const[C,T]of w.entries()){if(T<.01)continue;const k=I.filter($=>$.sourceModuleId===It&&$.wareId===C);if(k.length===0)continue;const D=k.reduce(($,W)=>$+W.amount,0);if(D<.01)continue;const P=Math.min(T/D,1);for(const $ of k){const W=y.modules.find(V=>V.moduleId===$.targetModuleId);if(!W)continue;const K=$.amount*P,Q=W.netInputs.findIndex(V=>V.wareId===C);if(Q!==-1){const z=W.netInputs[Q].amount-K;z>.01?W.netInputs[Q].amount=z:W.netInputs.splice(Q,1)}}}for(const[C,T]of S.entries()){if(T<.01)continue;const k=I.filter($=>$.targetModuleId===Yt&&$.wareId===C);if(k.length===0)continue;const D=k.reduce(($,W)=>$+W.amount,0);if(D<.01)continue;const P=Math.min(T/D,1);for(const $ of k){const W=y.modules.find(V=>V.moduleId===$.sourceModuleId);if(!W)continue;const K=$.amount*P,Q=W.netOutputs.findIndex(V=>V.wareId===C);if(Q!==-1){const z=W.netOutputs[Q].amount-K;z>.01?W.netOutputs[Q].amount=z:W.netOutputs.splice(Q,1)}}}}}const h=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const S of y.stationInputs){const j=w.get(S.wareId)||0;j<S.amount-.01&&h.push({wareId:S.wareId,stationId:y.stationId,required:S.amount,supplied:j,deficit:S.amount-j})}}const x=[],m=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const j of y.netInputs){const I=w.get(j.wareId)||0,C=j.amount-I;C>0&&x.push({wareId:j.wareId,amount:C})}const S=new Map;for(const j of t.connections)if(j.sourceStationId===y.stationId){const I=S.get(j.wareId)||0;S.set(j.wareId,I+j.amount)}for(const j of y.netOutputs){const I=S.get(j.wareId)||0,C=j.amount-I;C>0&&m.push({wareId:j.wareId,amount:C})}}return{stations:o,connections:g,totalInputs:Pm(x),totalOutputs:Pm(m),deficits:h}}function Eg(t,r){return t.connections.find(o=>o.connectionId===r)}function _r(t,r){return t.stations.find(o=>o.stationId===r)}function Nl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function wr(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const Oe=Rs((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function Dm(t,r="swi",o=[]){const i=new Date().toISOString();return{id:Sn(),name:t,version:1,gameMode:r,tags:o,createdAt:i,updatedAt:i,sectors:[],stations:[],connections:[]}}function hl(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const le=Rs((t,r)=>({plan:Dm("New Plan"),computed:hl(),createPlan:o=>{t({plan:Dm(o),computed:hl()})},loadPlan:o=>{const i={...o,gameMode:o.gameMode||"swi",tags:o.tags||[],stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(c=>({...c,locked:c.locked??!1,ratio:c.ratio??1}))}))};t({plan:i,computed:hl()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:Sn(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(c=>({plan:{...c.plan,sectors:[...c.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:Sn(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(c=>({plan:{...c.plan,stations:[...c.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,sectorId:i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const c={id:Sn(),blueprintId:i,count:1,position:l};t(d=>({plan:{...d.plan,stations:d.plan.stations.map(f=>f.id===o?{...f,modules:[...f.modules,c]}:f),updatedAt:new Date().toISOString()}})),r().recompute()},updateModule:(o,i,l)=>{const d=r().plan.stations.find(h=>h.id===o),f=d==null?void 0:d.modules.find(h=>h.id===i);if(l.count!==void 0&&f&&l.count!==f.count&&f){const h=l.count/f.count,x=((d==null?void 0:d.moduleConnections)??[]).map(m=>m.sourceModuleId===i&&!m.locked?{...m,amount:m.amount*h}:m.targetModuleId===i&&m.sourceModuleId===It&&!m.locked?{...m,amount:m.amount*h}:m);t(m=>({plan:{...m.plan,stations:m.plan.stations.map(y=>y.id===o?{...y,modules:y.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:x}:y),updatedAt:new Date().toISOString()}}))}else t(h=>({plan:{...h.plan,stations:h.plan.stations.map(x=>x.id===o?{...x,modules:x.modules.map(m=>m.id===i?{...m,...l}:m)}:x),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,modules:c.modules.filter(d=>d.id!==i),moduleConnections:(c.moduleConnections??[]).filter(d=>d.sourceModuleId!==i&&d.targetModuleId!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:Sn(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:Sn(),...i};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:[...d.moduleConnections??[],l]}:d),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:(d.moduleConnections??[]).map(f=>f.id===i?{...f,...l}:f)}:d),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).filter(d=>d.id!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=Oe.getState().gameData;if(!i){t({computed:hl()});return}const l=Vk(o,i);t({computed:l})}}));let Tm=!1;function Bk(t){Tm||(Tm=!0,le.subscribe((r,o)=>{r.plan!==o.plan&&t(r.plan)}))}const pe=Rs(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,plansOpen:!1,theme:"system",language:"en",contextMenu:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setPlansOpen:r=>t({plansOpen:r}),setTheme:r=>t({theme:r}),setLanguage:r=>t({language:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null})})),xr="x4-plan-index",co="x4-current-plan-id",Om="x4-planner-plan";function nn(t){return`x4-plan:${t}`}function sc(t){return{id:t.id,name:t.name,gameMode:t.gameMode,tags:t.tags,createdAt:t.createdAt,updatedAt:t.updatedAt}}const Wt=Rs((t,r)=>({planIndex:[],currentPlanId:null,initializePlanManager:()=>{var d;const o=localStorage.getItem(Om);if(o)try{const f=JSON.parse(o),g=((d=f.state)==null?void 0:d.plan)??f.plan??f;g.gameMode||(g.gameMode="swi"),g.tags||(g.tags=[]);const h=g.id||Sn();g.id=h,localStorage.setItem(nn(h),JSON.stringify(g));const m=[sc(g)];localStorage.setItem(xr,JSON.stringify(m)),localStorage.setItem(co,h),localStorage.removeItem(Om),t({planIndex:m,currentPlanId:h}),le.getState().loadPlan(g);return}catch(f){console.error("Failed to migrate legacy plan:",f)}const i=localStorage.getItem(xr),l=i?JSON.parse(i):[],c=localStorage.getItem(co);if(t({planIndex:l,currentPlanId:c}),c){const f=localStorage.getItem(nn(c));if(f)try{const g=JSON.parse(f);le.getState().loadPlan(g)}catch(g){console.error("Failed to load current plan:",g)}}else l.length===0&&r().createPlan("New Plan",[],"swi")},createPlan:(o,i,l)=>{const c=new Date().toISOString(),d={id:Sn(),name:o,version:1,gameMode:l,tags:i,createdAt:c,updatedAt:c,sectors:[],stations:[],connections:[]};localStorage.setItem(nn(d.id),JSON.stringify(d));const f=sc(d),{planIndex:g}=r(),h=[...g,f];localStorage.setItem(xr,JSON.stringify(h)),localStorage.setItem(co,d.id),t({planIndex:h,currentPlanId:d.id}),le.getState().loadPlan(d)},saveCurrentPlan:o=>{const{currentPlanId:i,planIndex:l}=r();if(!i||o.id!==i)return;localStorage.setItem(nn(o.id),JSON.stringify(o));const c=l.map(d=>d.id===o.id?{...d,name:o.name,tags:o.tags,updatedAt:o.updatedAt}:d);localStorage.setItem(xr,JSON.stringify(c)),t({planIndex:c})},loadPlanById:o=>{const i=localStorage.getItem(nn(o));if(i)try{const l=JSON.parse(i);localStorage.setItem(co,o),t({currentPlanId:o}),le.getState().loadPlan(l)}catch(l){console.error("Failed to load plan:",l)}},deletePlan:o=>{const{planIndex:i,currentPlanId:l}=r();localStorage.removeItem(nn(o));const c=i.filter(d=>d.id!==o);localStorage.setItem(xr,JSON.stringify(c)),o===l?c.length>0?(t({planIndex:c}),r().loadPlanById(c[0].id)):(localStorage.removeItem(co),t({planIndex:c,currentPlanId:null}),r().createPlan("New Plan",[],"swi")):t({planIndex:c})},duplicatePlan:(o,i,l)=>{const c=localStorage.getItem(nn(o));if(c)try{const d=JSON.parse(c),f=new Date().toISOString(),g={...d,id:Sn(),name:i,tags:l,createdAt:f,updatedAt:f};localStorage.setItem(nn(g.id),JSON.stringify(g));const h=sc(g),{planIndex:x}=r(),m=[...x,h];localStorage.setItem(xr,JSON.stringify(m)),localStorage.setItem(co,g.id),t({planIndex:m,currentPlanId:g.id}),le.getState().loadPlan(g)}catch(d){console.error("Failed to duplicate plan:",d)}},updatePlanMeta:(o,i)=>{const{planIndex:l}=r(),c=l.map(f=>f.id===o?{...f,...i,updatedAt:new Date().toISOString()}:f);localStorage.setItem(xr,JSON.stringify(c)),t({planIndex:c});const d=localStorage.getItem(nn(o));if(d)try{const f=JSON.parse(d);i.name!==void 0&&(f.name=i.name),i.tags!==void 0&&(f.tags=i.tags),f.updatedAt=new Date().toISOString(),localStorage.setItem(nn(o),JSON.stringify(f));const{currentPlanId:g}=r();o===g&&(i.name!==void 0&&le.getState().renamePlan(i.name),i.tags!==void 0&&le.setState(h=>({plan:{...h.plan,tags:i.tags}})))}catch(f){console.error("Failed to update plan meta:",f)}}})),_g="x4-game-mode";function Wk(){try{const t=localStorage.getItem(_g);if(t==="base"||t==="swi")return t}catch{}return"swi"}const Ol=Rs(t=>({gameMode:Wk(),setGameMode:r=>{localStorage.setItem(_g,r),t({gameMode:r})}}));let ws=null,Nc=null;async function Mg(t="swi"){if(ws&&Nc===t)return ws;const o=await fetch(`/Station-Planner-For-X4-Foundations/${t==="base"?"gamedata-base.json":"gamedata-swi.json"}`);if(!o.ok)throw new Error(`Failed to load game data: ${o.statusText}`);return ws=await o.json(),Nc=t,ws}function Uk(){ws=null,Nc=null}function Vc({open:t,onClose:r,title:o,children:i,footer:l,size:c="md"}){if(L.useEffect(()=>{if(!t)return;const f=g=>{g.key==="Escape"&&r()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[t,r]),!t)return null;const d=c==="sm"?"max-w-sm":c==="lg"?"max-w-2xl":"max-w-lg";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:r}),u.jsxs("div",{className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 bg-card border border-border rounded-lg shadow-xl w-full ${d} flex flex-col max-h-[80vh]`,children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:o}),u.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i}),l&&u.jsx("div",{className:"px-4 py-3 border-t border-border flex items-center justify-end gap-2",children:l})]})]})}function Yk(){const t=Ol(m=>m.gameMode),r=Ol(m=>m.setGameMode),o=Oe(m=>m.setGameData),i=Oe(m=>m.setLoading),l=Oe(m=>m.setError),c=pe(m=>m.setPlansOpen),[d,f]=L.useState(!1),g=t==="swi"?"base":"swi",h=g==="swi"?"SWI Mod":"Base Game",x=async m=>{if(f(!1),m){const I=le.getState().plan;Wt.getState().saveCurrentPlan(I)}r(g),Uk(),i(!0);try{const I=await Mg(g);o(I)}catch(I){l(I instanceof Error?I.message:"Failed to load game data");return}const{planIndex:y,createPlan:w,loadPlanById:S}=Wt.getState(),j=y.filter(I=>I.gameMode===g);if(j.length>0){const I=[...j].sort((C,T)=>new Date(T.updatedAt).getTime()-new Date(C.updatedAt).getTime());S(I[0].id),le.getState().recompute(),c(!0)}else w("New Plan",[],g),le.getState().recompute()};return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(!0),className:`px-3 py-1.5 text-sm rounded transition-colors font-medium ${t==="swi"?"bg-amber-600 text-white hover:bg-amber-700":"bg-blue-600 text-white hover:bg-blue-700"}`,title:`Switch to ${h}`,children:t==="swi"?"SWI":"Base"}),u.jsxs(Vc,{open:d,onClose:()=>f(!1),title:`Switch to ${h}?`,size:"sm",footer:u.jsxs("div",{className:"flex items-center gap-2 w-full",children:[u.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("div",{className:"flex-1"}),u.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Don't Save"}),u.jsx("button",{onClick:()=>x(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Save & Switch"})]}),children:[u.jsxs("p",{className:"text-sm text-muted-foreground",children:["You are about to switch to ",u.jsx("span",{className:"font-medium text-foreground",children:h})," mode. Game data will be reloaded with different wares and modules."]}),u.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Would you like to save the current plan before switching?"})]})]})}function Xk({tags:t,onChange:r,placeholder:o="Add tag..."}){const[i,l]=L.useState(""),c=g=>{const h=g.trim().toLowerCase();h&&!t.includes(h)&&r([...t,h]),l("")},d=g=>{r(t.filter((h,x)=>x!==g))},f=g=>{g.key==="Enter"||g.key===","?(g.preventDefault(),c(i)):g.key==="Backspace"&&!i&&t.length>0&&d(t.length-1)};return u.jsxs("div",{children:[u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:t.map((g,h)=>u.jsxs("span",{className:"bg-secondary text-secondary-foreground rounded-full px-2 py-0.5 text-xs flex items-center gap-1",children:[g,u.jsx("button",{type:"button",onClick:()=>d(h),className:"hover:text-destructive transition-colors","aria-label":`Remove tag ${g}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},g))}),u.jsx("input",{type:"text",value:i,onChange:g=>l(g.target.value),onKeyDown:f,onBlur:()=>{i.trim()&&c(i)},placeholder:o,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]})}function ic({open:t,onClose:r,onSubmit:o,title:i,submitLabel:l,initialName:c="",initialTags:d=[]}){const[f,g]=L.useState(c),[h,x]=L.useState(d),m=()=>{const y=f.trim();y&&(o(y,h),g(""),x([]),r())};return u.jsx(Vc,{open:t,onClose:r,title:i,size:"sm",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:m,disabled:!f.trim(),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50",children:l})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Plan Name"}),u.jsx("input",{type:"text",value:f,onChange:y=>g(y.target.value),onKeyDown:y=>{y.key==="Enter"&&m()},placeholder:"My Station Plan",autoFocus:!0,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Tags"}),u.jsx(Xk,{tags:h,onChange:x})]})]})})}function Gk({open:t,onClose:r,gameMode:o}){const i=Wt(U=>U.planIndex),l=Wt(U=>U.currentPlanId),c=Wt(U=>U.loadPlanById),d=Wt(U=>U.deletePlan),f=Wt(U=>U.createPlan),g=Wt(U=>U.duplicatePlan),h=Wt(U=>U.updatePlanMeta),x=le(U=>U.plan),[m,y]=L.useState(""),[w,S]=L.useState(null),[j,I]=L.useState(!1),[C,T]=L.useState(!1),[k,D]=L.useState(null),P=i.filter(U=>U.gameMode===o).filter(U=>{if(!m)return!0;const X=m.toLowerCase();return U.name.toLowerCase().includes(X)||U.tags.some(A=>A.toLowerCase().includes(X))}).sort((U,X)=>new Date(X.updatedAt).getTime()-new Date(U.updatedAt).getTime()),$=U=>{c(U),r()},W=U=>{d(U),S(null)},K=(U,X)=>{f(U,X,o),I(!1),r()},Q=(U,X)=>{l&&g(l,U,X),T(!1),r()},V=(U,X)=>{k&&(h(k.id,{name:U,tags:X}),D(null))},z=U=>{try{return new Date(U).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return U}};return u.jsxs(u.Fragment,{children:[u.jsxs(Vc,{open:t,onClose:r,title:"Plans",size:"lg",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>I(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"New Plan"}),u.jsx("button",{onClick:()=>T(!0),disabled:!l,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors disabled:opacity-50",children:"Save As"})]}),children:[u.jsx("div",{className:"mb-3",children:u.jsx("input",{type:"text",value:m,onChange:U=>y(U.target.value),placeholder:"Search plans by name or tag...",className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsxs("div",{className:"space-y-1",children:[P.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:m?"No plans match your search.":"No plans yet. Create one!"}),P.map(U=>u.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded cursor-pointer transition-colors ${U.id===l?"bg-primary/10 border border-primary/30":"hover:bg-muted border border-transparent"}`,onClick:()=>$(U.id),children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:U.name}),U.id===l&&u.jsx("span",{className:"text-xs text-primary font-medium",children:"(current)"})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[U.tags.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:U.tags.map(X=>u.jsx("span",{className:"bg-secondary text-secondary-foreground rounded-full px-1.5 py-0 text-[10px]",children:X},X))}),u.jsx("span",{className:"text-xs text-muted-foreground",children:z(U.updatedAt)})]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[u.jsx("button",{onClick:()=>D({id:U.id,name:U.name,tags:U.tags}),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",title:"Edit name & tags",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),w===U.id?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>W(U.id),className:"px-2 py-0.5 text-xs rounded bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors",children:"Delete"}),u.jsx("button",{onClick:()=>S(null),className:"px-2 py-0.5 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"})]}):u.jsx("button",{onClick:()=>S(U.id),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-destructive",title:"Delete plan",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},U.id))]})]}),u.jsx(ic,{open:j,onClose:()=>I(!1),onSubmit:K,title:"New Plan",submitLabel:"Create"}),u.jsx(ic,{open:C,onClose:()=>T(!1),onSubmit:Q,title:"Save As",submitLabel:"Save",initialName:x?`${x.name} (copy)`:"",initialTags:(x==null?void 0:x.tags)??[]}),k&&u.jsx(ic,{open:!0,onClose:()=>D(null),onSubmit:V,title:"Edit Plan",submitLabel:"Save",initialName:k.name,initialTags:k.tags})]})}function Kk(){const t=le(S=>S.plan),r=le(S=>S.renamePlan),o=pe(S=>S.toggleReport),i=pe(S=>S.reportOpen),l=pe(S=>S.plansOpen),c=pe(S=>S.setPlansOpen),d=pe(S=>S.theme),f=pe(S=>S.setTheme),g=pe(S=>S.language),h=pe(S=>S.setLanguage),x=Oe(S=>S.gameData),m=Ol(S=>S.gameMode),y=()=>{f(d==="light"?"dark":d==="dark"?"system":"light")},w=m==="swi"?"X4 SWI Station Planner":"X4 Station Planner";return u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Yk,{}),u.jsx("h1",{className:"text-lg font-semibold text-foreground",children:w}),u.jsx("span",{className:"text-muted-foreground",children:"|"}),u.jsx("input",{type:"text",value:t.name,onChange:S=>r(S.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[(x==null?void 0:x.languages)&&u.jsx("select",{value:g,onChange:S=>h(S.target.value),className:"px-2 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors border-none cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring",title:"Language",children:Object.entries(x.languages).map(([S,j])=>u.jsx("option",{value:S,children:j},S))}),u.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${d}`,children:[d==="light"&&"",d==="dark"&&"",d==="system"&&"",u.jsx("span",{className:"text-xs",children:d.charAt(0).toUpperCase()+d.slice(1)})]}),u.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Plans"}),u.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"})]})]}),u.jsx(Gk,{open:l,onClose:()=>c(!1),gameMode:m})]})}function gt(){const t=pe(o=>o.language);return{language:t,t:(o,i)=>o?typeof o=="string"?o:o[t]??o.en??Object.values(o)[0]??i??"":i??""}}function Qk({station:t}){const r=le(k=>k.updateStation),o=le(k=>k.removeStation),i=le(k=>k.plan),l=le(k=>k.computed),c=Oe(k=>k.gameData),{t:d}=gt(),f=t.sectorId?i.sectors.find(k=>k.id===t.sectorId):null,g=t.sunlightOverride??(f==null?void 0:f.sunlight)??100,h=_r(l,t.id),x=k=>{r(t.id,{name:k.target.value})},m=k=>{const D=k.target.value;if(D==="")r(t.id,{sunlightOverride:null});else{const P=parseInt(D,10);!isNaN(P)&&P>=0&&P<=500&&r(t.id,{sunlightOverride:P})}},y=()=>{r(t.id,{sunlightOverride:null})},w=k=>{r(t.id,{fillHabitats:k.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},j=k=>{var D;return d((D=c==null?void 0:c.wares[k])==null?void 0:D.name,k)},I=k=>k>=1e4?`${(k/1e3).toFixed(1)}k`:k>=1e3?`${(k/1e3).toFixed(2)}k`:k.toFixed(0),C=h&&h.totalWorkforceRequired>0,T=h&&h.totalWorkforceCapacity>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),u.jsx("input",{type:"text",value:t.name,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:f?f.name:"Not assigned"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:m,placeholder:`${(f==null?void 0:f.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&u.jsx("button",{onClick:y,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",g,"%",t.sunlightOverride===null&&f&&" (from sector)",t.sunlightOverride===null&&!f&&" (default)"]})]}),(C||T)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),h&&u.jsxs("div",{className:"text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Required:"}),u.jsx("span",{children:h.totalWorkforceRequired.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),u.jsx("span",{children:h.totalWorkforceCapacity.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population:"}),u.jsx("span",{children:h.actualPopulation.toLocaleString()})]})]}),T&&u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[u.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:w,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?u.jsx("p",{children:"No modules added yet."}):u.jsxs("p",{children:[t.modules.length," module(s)"]})}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),h&&(h.netOutputs.length>0||h.netInputs.length>0)&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),h.netOutputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),h.netOutputs.slice(0,5).map(k=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-green-500 truncate",children:j(k.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",I(k.amount)]})]},k.wareId)),h.netOutputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",h.netOutputs.length-5," more..."]})]}),h.netInputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),h.netInputs.slice(0,5).map(k=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-blue-400 truncate",children:j(k.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",I(k.amount)]})]},k.wareId)),h.netInputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",h.netInputs.length-5," more..."]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:k=>r(t.id,{locked:k.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function qk({sector:t}){const r=le(P=>P.updateSector),o=le(P=>P.removeSector),i=le(P=>P.plan),l=Oe(P=>P.gameData),[c,d]=L.useState(t.name),[f,g]=L.useState(!1),[h,x]=L.useState(-1),m=L.useRef(null),y=L.useRef(null);L.useEffect(()=>{d(t.name)},[t.id,t.name]);const w=L.useMemo(()=>l!=null&&l.sectors?Object.values(l.sectors).sort((P,$)=>P.name.localeCompare($.name)):[],[l]),S=L.useMemo(()=>{if(!c.trim())return w.slice(0,15);const P=c.toLowerCase();return w.filter($=>$.name.toLowerCase().includes(P)).slice(0,15)},[w,c]);L.useEffect(()=>{const P=$=>{y.current&&!y.current.contains($.target)&&m.current&&!m.current.contains($.target)&&g(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const j=i.stations.filter(P=>P.sectorId===t.id),I=(P,$)=>{d(P),g(!1),x(-1);const W={name:P};$!==void 0&&(W.sunlight=$),r(t.id,W)},C=P=>{const $=P.target.value;d($),g(!0),x(-1),r(t.id,{name:$})},T=P=>{var $,W;if(P.key==="ArrowDown")P.preventDefault(),g(!0),x(K=>K<S.length-1?K+1:K);else if(P.key==="ArrowUp")P.preventDefault(),x(K=>K>0?K-1:-1);else if(P.key==="Enter"){if(P.preventDefault(),h>=0&&h<S.length){const K=S[h];I(K.name,K.sunlight)}else{const K=w.find(Q=>Q.name.toLowerCase()===c.toLowerCase());K?I(K.name,K.sunlight):g(!1)}($=m.current)==null||$.blur()}else P.key==="Escape"&&(g(!1),x(-1),(W=m.current)==null||W.blur())};L.useEffect(()=>{var P;h>=0&&y.current&&((P=y.current.querySelectorAll("[data-sector-item]")[h])==null||P.scrollIntoView({block:"nearest"}))},[h]);const k=P=>{const $=parseInt(P.target.value,10);!isNaN($)&&$>=0&&$<=500&&r(t.id,{sunlight:$})},D=()=>{const P=j.length,$=P>0?`Delete sector "${t.name}"? ${P} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm($)&&o(t.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5 relative",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),u.jsx("input",{ref:m,type:"text",value:c,onChange:C,onFocus:()=>g(!0),onKeyDown:T,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",autoComplete:"off"}),f&&S.length>0&&u.jsx("div",{ref:y,className:"absolute z-50 mt-1 w-full max-h-60 overflow-y-auto rounded-md border border-border bg-background shadow-md",children:S.map((P,$)=>u.jsxs("button",{"data-sector-item":!0,onMouseDown:W=>{W.preventDefault(),I(P.name,P.sunlight)},onMouseEnter:()=>x($),className:`w-full flex items-center justify-between px-3 py-1.5 text-sm text-left transition-colors ${$===h?"bg-accent text-accent-foreground":"hover:bg-accent/50"}`,children:[u.jsx("span",{className:"truncate text-foreground",children:P.name}),u.jsxs("span",{className:"flex items-center gap-2 ml-2 shrink-0 text-xs text-muted-foreground",children:[P.owner&&u.jsx("span",{className:"truncate max-w-[80px]",children:P.owner}),u.jsxs("span",{children:[P.sunlight,"%"]})]})]},P.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:k,className:"flex-1"}),u.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:k,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",j.length,")"]}),j.length===0?u.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):u.jsx("ul",{className:"text-sm space-y-1",children:j.map(P=>u.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[u.jsx("span",{className:"text-foreground",children:P.name}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:[P.modules.length," modules"]})]},P.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:P=>r(t.id,{locked:P.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:D,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const Am={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function Zk(){const t=Oe(w=>w.gameData),r=le(w=>w.addModule),o=pe(w=>w.activeStationId),i=le(w=>w.plan.stations),{t:l}=gt(),[c,d]=L.useState("production"),[f,g]=L.useState(""),h=L.useMemo(()=>i.find(w=>w.id===o),[i,o]),x=L.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const w=f.toLowerCase(),S=j=>Object.values(j).filter(I=>l(I.name).toLowerCase().includes(w));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,f,l]),m=w=>{if(!o||!h)return;const S=h.modules.length,j=S%3,I=Math.floor(S/3),C={x:j*220+50,y:I*150+50};r(o,w,C)},y=w=>{d(S=>S===w?null:w)};return t?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Search modules...",value:f,onChange:w=>g(w.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(Am).map(w=>{const{label:S,icon:j}=Am[w],I=x[w],C=c===w;return u.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[u.jsxs("button",{onClick:()=>y(w),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[u.jsx("span",{children:j}),S,u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",I.length,")"]})]}),u.jsx("span",{className:"text-muted-foreground",children:C?"":"+"})]}),C&&u.jsx("div",{className:"max-h-48 overflow-y-auto",children:I.length===0?u.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):I.map(T=>u.jsxs("button",{onClick:()=>m(T.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[u.jsx("span",{className:"text-foreground truncate",children:l(T.name)}),u.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},T.id))})]},w)}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):u.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function Jk({stationId:t,module:r}){const o=Oe(I=>I.gameData),i=Oe(I=>I.getModule),l=Oe(I=>I.getModuleType),c=le(I=>I.updateModule),d=le(I=>I.removeModule),f=pe(I=>I.clearSelection),{t:g}=gt(),h=i(r.blueprintId),x=l(r.blueprintId),m=L.useMemo(()=>{if(!o||!x)return[];const I=o.modules[x];return Object.values(I).sort((C,T)=>g(C.name).localeCompare(g(T.name)))},[o,x,g]),y=I=>{c(t,r.id,{blueprintId:I.target.value})},w=I=>{const C=Math.max(1,r.count+I);c(t,r.id,{count:C})},S=I=>{const C=parseInt(I.target.value,10);!isNaN(C)&&C>=1&&c(t,r.id,{count:C})},j=()=>{confirm(`Delete this ${g(h==null?void 0:h.name,"module")}?`)&&(d(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-lg",children:x==="production"?"":x==="habitat"?"":""}),u.jsxs("span",{className:"text-muted-foreground capitalize",children:[x," Module"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),u.jsx("select",{value:r.blueprintId,onChange:y,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:m.map(I=>u.jsx("option",{value:I.id,children:g(I.name)},I.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>w(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),u.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("button",{onClick:()=>w(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),h&&u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),u.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[x==="production"&&"producedWareId"in h&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Produces: ",h.producedWareId]}),u.jsxs("p",{children:["Workforce: ",h.workforceMax*r.count]})]}),x==="habitat"&&"workforceCapacity"in h&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Race: ",h.race]}),u.jsxs("p",{children:["Capacity: ",h.workforceCapacity*r.count," workers"]})]}),x==="storage"&&"cargoMax"in h&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Type: ",h.cargoType]}),u.jsxs("p",{children:["Capacity: ",h.cargoMax*r.count]})]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r.locked??!1,onChange:I=>c(t,r.id,{locked:I.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:j,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function e2({connection:t}){var V;const r=le(z=>z.updateConnection),o=le(z=>z.removeConnection),i=le(z=>z.plan),l=le(z=>z.computed),c=Oe(z=>z.gameData),{t:d}=gt(),f=i.stations.find(z=>z.id===t.sourceStationId),g=i.stations.find(z=>z.id===t.targetStationId),h=L.useMemo(()=>_r(l,t.sourceStationId),[l,t.sourceStationId]),x=L.useMemo(()=>_r(l,t.targetStationId),[l,t.targetStationId]),m=t.wareId?d((V=c==null?void 0:c.wares[t.wareId])==null?void 0:V.name,t.wareId):"Unknown",y=h==null?void 0:h.netOutputs.find(z=>z.wareId===t.wareId),w=(y==null?void 0:y.amount)??0,S=x==null?void 0:x.netInputs.find(z=>z.wareId===t.wareId),j=(S==null?void 0:S.amount)??0,I=L.useMemo(()=>Eg(l,t.id),[l,t.id]),C=(I==null?void 0:I.effectiveAmount)??t.amount,T=t.mode??"auto",k=z=>z>=1e4?`${(z/1e3).toFixed(1)}k`:z>=1e3?`${(z/1e3).toFixed(2)}k`:z.toFixed(0),D=z=>{r(t.id,{mode:z,amount:z==="custom"?C:t.amount})},P=z=>{const U=z.target.value;if(U==="")r(t.id,{amount:0});else{const X=parseFloat(U);!isNaN(X)&&X>=0&&r(t.id,{amount:X})}},$=()=>{r(t.id,{mode:"custom",amount:w})},W=()=>{const z=Math.min(w,j);r(t.id,{mode:"custom",amount:z})},K=()=>{confirm("Delete this connection?")&&o(t.id)},Q=l.deficits.find(z=>z.stationId===t.targetStationId&&z.wareId===t.wareId);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(f==null?void 0:f.name)??"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(g==null?void 0:g.name)??"Unknown"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:m}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:T,onChange:z=>D(z.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[T==="auto"&&"Transfers min(source available, target need)",T==="max"&&"Takes all available from source up to target need",T==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[T==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),T==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:P,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:k(C)}),T==="custom"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:$,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",k(w),")"]}),j>0&&u.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",k(Math.min(w,j)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source available:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[k(w),"/hr"]})]}),j>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[k(j),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${I!=null&&I.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[k(C),"/hr"]})]}),T==="custom"&&t.amount!==C&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[k(t.amount),"/hr"]})]}),(I==null?void 0:I.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(I==null?void 0:I.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),Q&&Q.deficit>0&&u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",k(Q.deficit),"/hr still needed"]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",k(Q.supplied),"/hr but needs"," ",k(Q.required),"/hr"]})]}),t.wareId&&!Q&&u.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:u.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:K,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function t2({stationId:t,connection:r}){var M;const o=le(N=>N.updateModuleConnection),i=le(N=>N.removeModuleConnection),l=le(N=>N.plan.stations),c=le(N=>N.computed),d=Oe(N=>N.gameData),f=pe(N=>N.clearSelection),{t:g}=gt(),h=l.find(N=>N.id===t),x=h==null?void 0:h.modules.find(N=>N.id===r.sourceModuleId),m=h==null?void 0:h.modules.find(N=>N.id===r.targetModuleId),y=r.sourceModuleId===It,w=r.targetModuleId===Yt,S=N=>{var b,O,Z;if(!N||!d)return"Unknown";const R=((b=d.modules.production[N])==null?void 0:b.name)??((O=d.modules.habitat[N])==null?void 0:O.name)??((Z=d.modules.storage[N])==null?void 0:Z.name);return g(R,N)},j=y?"Station Input":S(x==null?void 0:x.blueprintId),I=w?"Station Output":S(m==null?void 0:m.blueprintId),C=L.useMemo(()=>y?null:wr(c,t,r.sourceModuleId),[c,t,r.sourceModuleId,y]),T=L.useMemo(()=>w?null:wr(c,t,r.targetModuleId),[c,t,r.targetModuleId,w]),k=L.useMemo(()=>{const N=_r(c,t);return N==null?void 0:N.moduleConnections.find(R=>R.connectionId===r.id)},[c,t,r.id]),D=(k==null?void 0:k.effectiveAmount)??r.amount,P=r.mode??"auto",$=g((M=d==null?void 0:d.wares[r.wareId])==null?void 0:M.name,r.wareId),W=C==null?void 0:C.grossOutputs.find(N=>N.wareId===r.wareId),K=(W==null?void 0:W.amount)??0,Q=T==null?void 0:T.grossInputs.find(N=>N.wareId===r.wareId),V=(Q==null?void 0:Q.amount)??0,z=N=>N>=1e4?`${(N/1e3).toFixed(1)}k`:N>=1e3?`${(N/1e3).toFixed(2)}k`:N.toFixed(0),U=N=>{o(t,r.id,{mode:N,amount:N==="custom"?D:r.amount})},X=N=>{const R=N.target.value;if(R==="")o(t,r.id,{amount:0});else{const b=parseFloat(R);if(!isNaN(b)&&b>=0){const O=!y&&K>0?b/K:r.ratio;o(t,r.id,{amount:b,ratio:O})}}},A=()=>{o(t,r.id,{locked:!r.locked})},H=()=>{o(t,r.id,{mode:"custom",amount:K,ratio:1})},F=()=>{const N=Math.min(K,V),R=K>0?N/K:0;o(t,r.id,{mode:"custom",amount:N,ratio:R})},_=()=>{confirm("Delete this connection?")&&(i(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:j})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:I})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:$})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:P,onChange:N=>U(N.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[P==="auto"&&"Transfers min(source available, target need)",P==="max"&&"Takes all available from source up to target need",P==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[P==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),P==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:X,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:z(D)}),P==="custom"&&!y&&K>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:H,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",z(K),")"]}),!w&&V>0&&u.jsxs("button",{onClick:F,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",z(Math.min(K,V)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!y&&K>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source produces:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[z(K),"/hr"]})]}),!w&&V>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[z(V),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${k!=null&&k.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[z(D),"/hr"]})]}),P==="custom"&&r.amount!==D&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[z(r.amount),"/hr"]})]}),(k==null?void 0:k.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(k==null?void 0:k.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!y&&r.ratio!==void 0&&P==="custom"&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Ratio:"}),u.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),u.jsx("button",{onClick:A,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:_,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function n2(){const t=pe(S=>S.sidebarOpen),r=pe(S=>S.selectedNodeId),o=pe(S=>S.selectedEdgeId),i=pe(S=>S.viewMode),l=pe(S=>S.activeStationId),c=le(S=>S.plan);if(!t)return null;const d=i==="network"?c.stations.find(S=>S.id===r):null,f=i==="network"?c.sectors.find(S=>S.id===r):null,g=c.connections.find(S=>S.id===o),h=c.stations.find(S=>S.id===l),x=i==="station"&&h?h.modules.find(S=>S.id===r):null,m=i==="station"&&h&&o?(h.moduleConnections??[]).find(S=>S.id===o):null;let y="Network";i==="station"?m?y="Connection":x?y="Module":y="Add Modules":d?y="Station":f?y="Sector":g&&(y="Connection");const w=()=>i==="station"?m&&l?u.jsx(t2,{stationId:l,connection:m}):x&&l?u.jsx(Jk,{stationId:l,module:x}):u.jsx(Zk,{}):d?u.jsx(Qk,{station:d}):f?u.jsx(qk,{sector:f}):g?u.jsx(e2,{connection:g}):u.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[u.jsx("p",{children:"Select a station or sector to view details."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),u.jsxs("ul",{className:"text-xs space-y-1",children:[u.jsx("li",{children:"Right-click on the canvas to add stations"}),u.jsx("li",{children:"Drag from one station handle to another to connect"}),u.jsx("li",{children:"Press Delete to remove selected items"}),u.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return u.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col",children:[u.jsx("div",{className:"p-4 border-b border-border",children:u.jsx("h2",{className:"font-semibold text-foreground",children:y})}),u.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:w()}),u.jsx("div",{className:"p-4 border-t border-border",children:u.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:i==="station"&&h?u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Modules: ",h.modules.length]}),u.jsxs("p",{children:["Station: ",h.name]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Stations: ",c.stations.length]}),u.jsxs("p",{children:["Sectors: ",c.sectors.length]}),u.jsxs("p",{children:["Connections: ",c.connections.length]})]})})})]})}function r2(){const t=pe(d=>d.viewMode),r=pe(d=>d.activeStationId),o=pe(d=>d.exitStationView),i=le(d=>d.plan),l=i.stations.find(d=>d.id===r),c=l!=null&&l.sectorId?i.sectors.find(d=>d.id===l.sectorId):null;return t==="network"?null:u.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[u.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),c&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-muted-foreground",children:c.name})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function o2(){const t=le(x=>x.computed),r=Oe(x=>x.gameData),{t:o}=gt(),i=x=>{var m;return o((m=r==null?void 0:r.wares[x])==null?void 0:m.name,x)},l=x=>Math.abs(x)>=1e4?`${(x/1e3).toFixed(1)}k`:Math.abs(x)>=1e3?`${(x/1e3).toFixed(2)}k`:x.toFixed(0),c=L.useMemo(()=>{const x=new Map;for(const y of t.totalOutputs)x.set(y.wareId,(x.get(y.wareId)??0)+y.amount);for(const y of t.totalInputs)x.set(y.wareId,(x.get(y.wareId)??0)-y.amount);const m=[];for(const[y,w]of x)Math.abs(w)>.01&&m.push({wareId:y,amount:w});return m.sort((y,w)=>w.amount-y.amount)},[t.totalOutputs,t.totalInputs]),d=c.filter(x=>x.amount>0),f=c.filter(x=>x.amount<0),g=L.useMemo(()=>[...t.totalOutputs].sort((x,m)=>m.amount-x.amount),[t.totalOutputs]),h=L.useMemo(()=>[...t.totalInputs].sort((x,m)=>m.amount-x.amount),[t.totalInputs]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),u.jsx("div",{className:"space-y-1",children:d.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-green-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),u.jsx("div",{className:"space-y-1",children:f.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:[l(x.amount),"/hr"]})]},x.wareId))})]}),d.length===0&&f.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",g.length," wares)"]})]}),g.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",h.length," wares)"]})]}),h.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-blue-400",children:["-",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((x,m)=>u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:["-",l(x.deficit),"/hr"]})]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",l(x.required),", getting ",l(x.supplied)]})]},`${x.stationId}-${x.wareId}-${m}`))})]})]})}function s2(){const t=le(h=>h.plan.stations),r=le(h=>h.plan.sectors),o=le(h=>h.computed),i=Oe(h=>h.gameData),{t:l}=gt(),c=h=>{var x;return l((x=i==null?void 0:i.wares[h])==null?void 0:x.name,h)},d=h=>Math.abs(h)>=1e4?`${(h/1e3).toFixed(1)}k`:Math.abs(h)>=1e3?`${(h/1e3).toFixed(2)}k`:h.toFixed(0),f=h=>{var x;return h?((x=r.find(m=>m.id===h))==null?void 0:x.name)??null:null},g=L.useMemo(()=>[...t].sort((h,x)=>{const m=Nl(o,h.id),y=Nl(o,x.id);return m!==y?y-m:h.name.localeCompare(x.name)}),[t,o]);return t.length===0?u.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):u.jsx("div",{className:"space-y-4",children:g.map(h=>{const x=_r(o,h.id),m=Nl(o,h.id),y=f(h.sectorId),w=o.deficits.filter(j=>j.stationId===h.id),S=x&&x.totalWorkforceRequired>0?Math.min(x.actualPopulation/x.totalWorkforceRequired,1):0;return u.jsxs("div",{className:`p-3 rounded-lg border ${m>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center text-[10px] ${h.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/30"}`,children:h.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h4",{className:`font-medium ${h.completed?"text-muted-foreground line-through":"text-foreground"}`,children:h.name}),m>0&&u.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[m," deficit",m>1?"s":""]})]}),y&&u.jsx("span",{className:"text-xs text-muted-foreground",children:y})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-yellow-500",children:[" ",(x==null?void 0:x.effectiveSunlight)??100,"%"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:h.modules.length})]}),x&&x.totalWorkforceRequired>0&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[x.actualPopulation,"/",x.totalWorkforceRequired]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:x.totalWorkforceCapacity})]})]})]}),x&&u.jsxs("div",{className:"space-y-2",children:[x.netOutputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netOutputs.map(j=>u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:"text-green-400",children:c(j.wareId)}),u.jsxs("span",{className:"font-mono text-green-400/70",children:["+",d(j.amount)]})]},j.wareId))})]}),x.netInputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netInputs.map(j=>{const I=w.some(C=>C.wareId===j.wareId);return u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:I?"text-red-400":"text-blue-400",children:c(j.wareId)}),u.jsxs("span",{className:`font-mono ${I?"text-red-400/70":"text-blue-400/70"}`,children:["-",d(j.amount)]})]},j.wareId)})})]}),w.length>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[u.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),u.jsx("div",{className:"space-y-1",children:w.map(j=>u.jsxs("div",{className:"text-xs flex items-center justify-between",children:[u.jsx("span",{className:"text-red-400",children:c(j.wareId)}),u.jsxs("span",{className:"text-muted-foreground",children:[d(j.supplied),"/",d(j.required),u.jsxs("span",{className:"text-red-400 ml-1",children:["(-",d(j.deficit),")"]})]})]},j.wareId))})]})]}),h.modules.length===0&&u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},h.id)})})}function i2(){const t=pe(l=>l.reportOpen),r=pe(l=>l.setReportOpen),[o,i]=L.useState("network");return t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),u.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),u.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsxs("div",{className:"flex border-b border-border",children:[u.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),u.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?u.jsx(o2,{}):u.jsx(s2,{})}),u.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function Le(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Bc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const l2={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},a2={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},u2={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},c2={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function Gl({wareId:t,type:r,amount:o,status:i,preset:l,handleId:c,isDeficit:d=!1,drag:f,handleTooltip:g,amountTooltip:h}){const x=Oe(P=>P.gameData),{t:m}=gt(),y=r==="input",w=y?l.inputColors:l.outputColors,j=(P=>{var $;return m(($=x==null?void 0:x.wares[P])==null?void 0:$.name,P)})(t),I=()=>{const P=y?"handle-left":"handle-right",$="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${P} ${$} ${l.handle.colorClass}`;const W=i==="satisfied"?y?"handle-input-satisfied":"handle-output-satisfied":y?"handle-input":"handle-output";return`${l.handle.baseClass} ${P} ${$} ${W}`},C=()=>i==="satisfied"?w.satisfied:d&&w.deficit?w.deficit:w.default,T=()=>{const P=o.fulfilled??0,$=P>.01;if(y)if(i==="satisfied"){const W=P>.01?P:o.primary;return u.jsxs("span",{className:"text-green-600 font-bold",title:h,children:["",Le(W)]})}else if($){const W=i==="partial"?o.primary-P:o.primary;return u.jsxs("span",{className:"text-red-400 font-bold",title:h,children:["-",Le(W)]})}else return u.jsxs("span",{className:"text-red-600/60",title:h,children:["",Le(o.primary)]});else return $?u.jsx("span",{className:"text-gray-400",title:h,children:Le(o.primary)}):u.jsx("span",{className:"text-gray-500/60",title:h,children:Le(o.primary)})},k=()=>!l.hasDrag||!f?null:u.jsx("div",{draggable:!0,onDragStart:f.onDragStart,onDragEnd:f.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:u.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),D=()=>u.jsx(Er,{type:y?"target":"source",position:y?ye.Left:ye.Right,id:c,className:I(),title:g??j});return u.jsxs("div",{onDragOver:f==null?void 0:f.onDragOver,onDragLeave:f==null?void 0:f.onDragLeave,onDrop:f==null?void 0:f.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${f!=null&&f.isDragging?"opacity-50":""}
        ${f!=null&&f.isDragOver?"bg-primary/20 rounded":""}
      `,children:[y&&l.handle.inline&&D(),!y&&l.hasDrag&&k(),y&&!l.handle.inline&&D(),u.jsxs("div",{className:`flex-1 flex items-center justify-between ${y?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[y&&u.jsx("span",{className:"font-mono ml-1",children:T()}),u.jsx("span",{className:`truncate ${l.nameMaxWidth} ${C()}`,children:j}),!y&&u.jsx("span",{className:"font-mono mr-2",children:T()})]}),y&&l.hasDrag&&k(),!y&&l.handle.inline&&D(),!y&&!l.handle.inline&&D()]})}const d2=L.memo(function({data:r,selected:o}){const{station:i}=r,l=le(_=>_.plan.sectors),c=le(_=>_.computed),d=le(_=>_.updateStation),f=pe(_=>_.drillIntoStation),[g,h]=L.useState(null),[x,m]=L.useState(null),y=i.sectorId?l.find(_=>_.id===i.sectorId):null,w=L.useMemo(()=>_r(c,i.id),[c,i.id]),S=L.useMemo(()=>Nl(c,i.id),[c,i.id]),j=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(y==null?void 0:y.sunlight)??100,I=L.useCallback(()=>{f(i.id)},[f,i.id]),C=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,T=w&&w.totalWorkforceRequired>0,k=L.useMemo(()=>c.deficits.filter(_=>_.stationId===i.id),[c.deficits,i.id]),D=_=>k.some(M=>M.wareId===_),P=L.useCallback((_,M)=>{if(!M||M.length===0)return _;const N=new Map(_.map(O=>[O.wareId,O])),R=[],b=new Set;for(const O of M){const Z=N.get(O);Z&&(R.push(Z),b.add(O))}for(const O of _)b.has(O.wareId)||R.push(O);return R},[]),$=L.useMemo(()=>P((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,P]),W=L.useMemo(()=>P((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,P]),K=L.useMemo(()=>{const _=new Map;for(const M of(w==null?void 0:w.externallySupplied)??[])_.set(M.wareId,M.amount);return _},[w==null?void 0:w.externallySupplied]),Q=L.useMemo(()=>{const _=new Map;for(const M of(w==null?void 0:w.externallyConsumed)??[])_.set(M.wareId,M.amount);return _},[w==null?void 0:w.externallyConsumed]),V=L.useCallback((_,M,N)=>{_.stopPropagation(),h(`${N}-${M}`),_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("text/plain",`${N}-${M}`)},[]),z=L.useCallback((_,M,N)=>{_.preventDefault(),_.stopPropagation();const R=`${N}-${M}`;g&&g!==R&&g.startsWith(N)&&(m(R),_.dataTransfer.dropEffect="move")},[g]),U=L.useCallback(()=>{m(null)},[]),X=L.useCallback((_,M,N)=>{if(_.preventDefault(),_.stopPropagation(),!g||!g.startsWith(N)){h(null),m(null);return}const R=g.replace(`${N}-`,"");if(R===M){h(null),m(null);return}const O=(N==="output"?$:W).map(oe=>oe.wareId),Z=O.indexOf(R),q=O.indexOf(M);if(Z===-1||q===-1){h(null),m(null);return}const ne=[...O];ne.splice(Z,1),ne.splice(q,0,R),N==="output"?d(i.id,{outputOrder:ne}):d(i.id,{inputOrder:ne}),h(null),m(null)},[g,$,W,d,i.id]),A=L.useCallback(()=>{h(null),m(null)},[]),H=L.useCallback((_,M)=>{const N=`${M}-${_}`;return{isDragging:g===N,isDragOver:x===N,onDragStart:R=>V(R,_,M),onDragEnd:A,onDragOver:R=>z(R,_,M),onDragLeave:U,onDrop:R=>X(R,_,M)}},[g,x,V,A,z,U,X]),F=(_,M)=>{const N=M==="input",R=`${M}-${_.wareId}`,b=N&&D(_.wareId),O=N?K.get(_.wareId)??0:0,Z=N?0:Q.get(_.wareId)??0,q=N?O:Z,ne=_.amount-q,oe=Bc(ne,q),ue=N?"Need":"Export",re=N?"Supplied":"Consumed";let ce;return oe==="satisfied"?ce=`${ue}: ${Le(_.amount)}, ${re}: ${Le(q)}`:oe==="partial"?ce=`${ue}: ${Le(_.amount)}, ${re}: ${Le(q)}, Remaining: ${Le(ne)}`:ce=`${ue}: ${Le(_.amount)}, No external ${N?"supply":"consumers"}`,u.jsx(Gl,{wareId:_.wareId,type:M,handleId:R,amount:{primary:_.amount,secondary:q>.01?q:void 0,fulfilled:q},status:oe,preset:a2,isDeficit:b,drag:H(_.wareId,M),amountTooltip:ce},_.wareId)};return u.jsxs("div",{className:`
        min-w-[240px] max-w-[240px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:I,children:[S>0&&u.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),u.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("button",{onClick:_=>{_.stopPropagation(),d(i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h3",{className:`font-medium text-sm truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:i.name}),y&&u.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:y.name})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[u.jsx("span",{className:"text-yellow-500",children:""}),j,"%",i.sunlightOverride===null&&y&&u.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),T&&u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population"}),u.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),u.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all ${C>=1?"bg-green-500":C>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${C*100}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[$.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pr-2",children:$.map(_=>F(_,"output"))})]}),W.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pl-2",children:W.map(_=>F(_,"input"))})]})]}),i.modules.length===0&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),f2=160,p2=100,m2=L.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,c=le(y=>y.updateSector),d=le(y=>y.plan.stations),f=le(y=>y.moveStationToSector),[g,h]=L.useState(!1),x=L.useCallback((y,w)=>{c(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,c]),m=L.useCallback((y,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};d.forEach(j=>{const I=j.position.x+f2/2,C=j.position.y+p2/2,T=I>=S.left&&I<=S.right&&C>=S.top&&C<=S.bottom;T&&j.sectorId!==r?f(j.id,r):!T&&j.sectorId===r&&f(j.id,null)})},[r,d,f]);return u.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[u.jsx(Ik,{minWidth:200,minHeight:150,isVisible:i||g,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:x,onResizeEnd:m}),u.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[u.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),u.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),h2={production:"",habitat:"",storage:""},Lm={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},g2=L.memo(function({data:r,selected:o}){const{module:i}=r,l=pe(b=>b.activeStationId),c=le(b=>b.computed),d=le(b=>b.updateModule),f=Oe(b=>b.getModule),g=Oe(b=>b.getModuleType),h=Oe(b=>b.gameData),{t:x}=gt(),[m,y]=L.useState(null),[w,S]=L.useState(null),[j,I]=L.useState(!1),C=f(i.blueprintId),T=g(i.blueprintId)??"production",k=Lm[T]??Lm.production,D=h2[T]??"",P=L.useMemo(()=>{if(l)return wr(c,l,i.id)},[c,l,i.id]),$=L.useCallback(b=>{var O;return x((O=h==null?void 0:h.wares[b])==null?void 0:O.name,b)},[h,x]),W=L.useCallback((b,O)=>{if(!O||O.length===0)return b;const Z=new Map(b.map(oe=>[oe.wareId,oe])),q=[],ne=new Set;for(const oe of O){const ue=Z.get(oe);ue&&(q.push(ue),ne.add(oe))}for(const oe of b)ne.has(oe.wareId)||q.push(oe);return q},[]),K=L.useMemo(()=>W((P==null?void 0:P.netOutputs)??[],i.outputOrder),[P==null?void 0:P.netOutputs,i.outputOrder,W]),Q=L.useMemo(()=>W((P==null?void 0:P.netInputs)??[],i.inputOrder),[P==null?void 0:P.netInputs,i.inputOrder,W]),V=L.useMemo(()=>W((P==null?void 0:P.grossOutputs)??[],i.outputOrder),[P==null?void 0:P.grossOutputs,i.outputOrder,W]),z=L.useMemo(()=>W((P==null?void 0:P.grossInputs)??[],i.inputOrder),[P==null?void 0:P.grossInputs,i.inputOrder,W]),U=L.useMemo(()=>{if(!P)return!1;const b=P.grossOutputs.reduce((ne,oe)=>ne+oe.amount,0),O=P.netOutputs.reduce((ne,oe)=>ne+oe.amount,0),Z=P.grossInputs.reduce((ne,oe)=>ne+oe.amount,0),q=P.netInputs.reduce((ne,oe)=>ne+oe.amount,0);return Math.abs(b-O)>.01||Math.abs(Z-q)>.01},[P]),X=L.useCallback((b,O,Z)=>{b.stopPropagation(),y(`${Z}-${O}`),b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",`${Z}-${O}`)},[]),A=L.useCallback((b,O,Z)=>{b.preventDefault(),b.stopPropagation();const q=`${Z}-${O}`;m&&m!==q&&m.startsWith(Z)&&(S(q),b.dataTransfer.dropEffect="move")},[m]),H=L.useCallback(()=>{S(null)},[]),F=L.useCallback((b,O,Z)=>{if(b.preventDefault(),b.stopPropagation(),!m||!m.startsWith(Z)||!l){y(null),S(null);return}const q=m.replace(`${Z}-`,"");if(q===O){y(null),S(null);return}const oe=(Z==="output"?V:z).map(ve=>ve.wareId),ue=oe.indexOf(q),re=oe.indexOf(O);if(ue===-1||re===-1){y(null),S(null);return}const ce=[...oe];ce.splice(ue,1),ce.splice(re,0,q),Z==="output"?d(l,i.id,{outputOrder:ce}):d(l,i.id,{inputOrder:ce}),y(null),S(null)},[m,V,z,d,l,i.id]),_=L.useCallback(()=>{y(null),S(null)},[]),M=L.useCallback((b,O)=>{var q;return P?((q=(O==="output"?P.netOutputs:P.netInputs).find(ne=>ne.wareId===b))==null?void 0:q.amount)??0:0},[P]),N=L.useCallback((b,O)=>{const Z=`${O}-${b}`;return{isDragging:m===Z,isDragOver:w===Z,onDragStart:q=>X(q,b,O),onDragEnd:_,onDragOver:q=>A(q,b,O),onDragLeave:H,onDrop:q=>F(q,b,O)}},[m,w,X,_,A,H,F]),R=(b,O)=>{const Z=`${O}-${b.wareId}`,q=M(b.wareId,O),ne=q<.01;return u.jsx(Gl,{wareId:b.wareId,type:O,handleId:Z,amount:{primary:q,fulfilled:b.amount-q},status:ne?"satisfied":"unsatisfied",preset:l2,drag:N(b.wareId,O),amountTooltip:`Full: ${Le(b.amount)}/hr`},b.wareId)};return u.jsxs("div",{className:`
        w-[240px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":k.border}
      `,children:[u.jsx("div",{className:`px-3 py-2 border-b border-border ${k.bg} rounded-t-lg`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:b=>{b.stopPropagation(),l&&d(l,i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("span",{className:"text-base",children:D}),u.jsx("h3",{className:`text-xs truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:x(C==null?void 0:C.name,i.blueprintId)})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Count"}),u.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),T==="habitat"&&C&&"workforceCapacity"in C&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsx("span",{className:"text-foreground",children:C.workforceCapacity*i.count})]}),T==="storage"&&C&&"cargoMax"in C&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:C.cargoMax*i.count})]}),(T==="production"||T==="habitat")&&P&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[V.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:V.map(b=>R(b,"output"))})]}),z.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:z.map(b=>R(b,"input"))})]}),K.length===0&&Q.length===0&&U&&u.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(V.length>0||z.length>0)&&u.jsxs("div",{className:"pt-1 border-t border-border/30",children:[u.jsxs("button",{onClick:b=>{b.stopPropagation(),I(!j)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[u.jsx("span",{children:j?"":""}),u.jsx("span",{children:"Full Production"})]}),j&&u.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[V.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),V.map(b=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:$(b.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",Le(b.amount)]})]},b.wareId))]}),z.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),z.map(b=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:$(b.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",Le(b.amount)]})]},b.wareId))]})]})]})]}),(T==="production"||T==="habitat")&&!P&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),x2="generic-import",y2=L.memo(function({selected:r}){const o=pe(V=>V.activeStationId),i=le(V=>V.computed),l=Oe(V=>V.gameData),c=le(V=>V.plan.stations),d=le(V=>V.updateStation),{t:f}=gt(),[g,h]=L.useState(null),[x,m]=L.useState(null),y=L.useMemo(()=>{if(o)return c.find(V=>V.id===o)},[c,o]),w=L.useMemo(()=>{if(!(!o||!i))return i.stations.find(V=>V.stationId===o)},[i,o]),S=V=>{var z;return f((z=l==null?void 0:l.wares[V])==null?void 0:z.name,V)},j=(w==null?void 0:w.stationInputs)??[],I=(w==null?void 0:w.externallySupplied)??[],C=(w==null?void 0:w.remainingInputs)??[],T=L.useMemo(()=>{const V=new Map;for(const X of j){const A=V.get(X.wareId)||{connected:0,supplied:0,remaining:0};A.connected=X.amount,V.set(X.wareId,A)}for(const X of I){const A=V.get(X.wareId);A&&(A.supplied=X.amount)}for(const X of C){const A=V.get(X.wareId);A&&(A.remaining=X.amount)}const z=Array.from(V.entries()).map(([X,A])=>({wareId:X,connected:A.connected,supplied:A.supplied,remaining:A.remaining})),U=y==null?void 0:y.inputOrder;if(U&&U.length>0){const X=new Map(U.map((A,H)=>[A,H]));z.sort((A,H)=>{const F=X.get(A.wareId)??1/0,_=X.get(H.wareId)??1/0;return F!==_?F-_:H.connected-A.connected})}else z.sort((X,A)=>A.connected-X.connected);return z},[j,I,C,y==null?void 0:y.inputOrder]),k=L.useCallback((V,z)=>{V.stopPropagation(),h(z),V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",z)},[]),D=L.useCallback((V,z)=>{V.preventDefault(),V.stopPropagation(),g&&g!==z&&(m(z),V.dataTransfer.dropEffect="move")},[g]),P=L.useCallback(()=>{m(null)},[]),$=L.useCallback((V,z)=>{if(V.preventDefault(),V.stopPropagation(),!g||!o){h(null),m(null);return}const U=g;if(U===z){h(null),m(null);return}const X=T.map(_=>_.wareId),A=X.indexOf(U),H=X.indexOf(z);if(A===-1||H===-1){h(null),m(null);return}const F=[...X];F.splice(A,1),F.splice(H,0,U),d(o,{inputOrder:F}),h(null),m(null)},[g,T,d,o]),W=L.useCallback(()=>{h(null),m(null)},[]),K=L.useCallback(V=>({isDragging:g===V,isDragOver:x===V,onDragStart:z=>k(z,V),onDragEnd:W,onDragOver:z=>D(z,V),onDragLeave:P,onDrop:z=>$(z,V)}),[g,x,k,W,D,P,$]),Q=V=>{const z=`output-${V.wareId}`,U=Bc(V.remaining,V.supplied);let X;return U==="satisfied"?X=`Need: ${Le(V.connected)}, Supplied: ${Le(V.supplied)}`:U==="partial"?X=`Need: ${Le(V.connected)}, Supplied: ${Le(V.supplied)}, Remaining: ${Le(V.remaining)}`:X=`Need: ${Le(V.connected)}, No external supply`,u.jsx(Gl,{wareId:V.wareId,type:"output",handleId:z,amount:{primary:V.supplied-V.connected?V.supplied-V.connected:V.supplied,secondary:V.supplied>.01?V.supplied:void 0,fulfilled:V.supplied},status:U,preset:u2,drag:K(V.wareId),amountTooltip:X,handleTooltip:`Import ${S(V.wareId)}`},V.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),u.jsx("div",{className:"px-1 py-2",children:T.length>0?u.jsx("div",{className:"space-y-0 pr-3",children:T.map(V=>Q(V))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),u.jsx(Er,{type:"source",position:ye.Right,id:x2,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),v2="generic-export",w2=L.memo(function({selected:r}){const o=pe(V=>V.activeStationId),i=le(V=>V.computed),l=Oe(V=>V.gameData),c=le(V=>V.plan.stations),d=le(V=>V.updateStation),{t:f}=gt(),[g,h]=L.useState(null),[x,m]=L.useState(null),y=L.useMemo(()=>{if(o)return c.find(V=>V.id===o)},[c,o]),w=L.useMemo(()=>{if(!(!o||!i))return i.stations.find(V=>V.stationId===o)},[i,o]),S=V=>{var z;return f((z=l==null?void 0:l.wares[V])==null?void 0:z.name,V)},j=(w==null?void 0:w.stationOutputs)??[],I=(w==null?void 0:w.externallyConsumed)??[],C=(w==null?void 0:w.remainingOutputs)??[],T=L.useMemo(()=>{const V=new Map;for(const X of j){const A=V.get(X.wareId)||{connected:0,consumed:0,remaining:0};A.connected=X.amount,V.set(X.wareId,A)}for(const X of I){const A=V.get(X.wareId);A&&(A.consumed=X.amount)}for(const X of C){const A=V.get(X.wareId);A&&(A.remaining=X.amount)}const z=Array.from(V.entries()).map(([X,A])=>({wareId:X,connected:A.connected,consumed:A.consumed,remaining:A.remaining})),U=y==null?void 0:y.outputOrder;if(U&&U.length>0){const X=new Map(U.map((A,H)=>[A,H]));z.sort((A,H)=>{const F=X.get(A.wareId)??1/0,_=X.get(H.wareId)??1/0;return F!==_?F-_:H.connected-A.connected})}else z.sort((X,A)=>A.connected-X.connected);return z},[j,I,C,y==null?void 0:y.outputOrder]),k=L.useCallback((V,z)=>{V.stopPropagation(),h(z),V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",z)},[]),D=L.useCallback((V,z)=>{V.preventDefault(),V.stopPropagation(),g&&g!==z&&(m(z),V.dataTransfer.dropEffect="move")},[g]),P=L.useCallback(()=>{m(null)},[]),$=L.useCallback((V,z)=>{if(V.preventDefault(),V.stopPropagation(),!g||!o){h(null),m(null);return}const U=g;if(U===z){h(null),m(null);return}const X=T.map(_=>_.wareId),A=X.indexOf(U),H=X.indexOf(z);if(A===-1||H===-1){h(null),m(null);return}const F=[...X];F.splice(A,1),F.splice(H,0,U),d(o,{outputOrder:F}),h(null),m(null)},[g,T,d,o]),W=L.useCallback(()=>{h(null),m(null)},[]),K=L.useCallback(V=>({isDragging:g===V,isDragOver:x===V,onDragStart:z=>k(z,V),onDragEnd:W,onDragOver:z=>D(z,V),onDragLeave:P,onDrop:z=>$(z,V)}),[g,x,k,W,D,P,$]),Q=V=>{const z=`input-${V.wareId}`,U=Bc(V.remaining,V.consumed);let X;return U==="satisfied"?X=`Exporting: ${Le(V.connected)}, Consumed: ${Le(V.consumed)}`:U==="partial"?X=`Exporting: ${Le(V.connected)}, Consumed: ${Le(V.consumed)}, Remaining: ${Le(V.remaining)}`:X=`Exporting: ${Le(V.connected)}, No external consumers`,u.jsx(Gl,{wareId:V.wareId,type:"input",handleId:z,amount:{primary:V.connected,secondary:V.consumed>.01?V.consumed:void 0,fulfilled:V.consumed},status:U,preset:c2,drag:K(V.wareId),amountTooltip:X,handleTooltip:`Export ${S(V.wareId)}`},V.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),u.jsx("div",{className:"px-1 py-2",children:T.length>0?u.jsx("div",{className:"space-y-0 pl-3",children:T.map(V=>Q(V))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),u.jsx(Er,{type:"target",position:ye.Left,id:v2,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),S2=L.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:g,selected:h}){const x=le(k=>k.computed),m=g==null?void 0:g.connection,y=L.useMemo(()=>{if(m)return Eg(x,m.id)},[x,m]),[w,S,j]=Vl({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),I=k=>k>=1e3?`${(k/1e3).toFixed(1)}k`:k.toFixed(0),C=x.deficits.find(k=>k.stationId===(m==null?void 0:m.targetStationId)&&k.wareId===(m==null?void 0:m.wareId));let T="#64748b";return m!=null&&m.wareId?C?C.supplied/C.required>=.8?T="#eab308":T="#f97316":T="#22c55e":T="#ef4444",u.jsxs(u.Fragment,{children:[u.jsx(No,{id:r,path:w,style:{stroke:T,strokeWidth:h?3:2,strokeDasharray:m!=null&&m.wareId?void 0:"5,5"}}),(m==null?void 0:m.wareId)&&u.jsx(Sg,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${j}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${h?"ring-2 ring-primary":""}
              ${y!=null&&y.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:m.mode==="custom"?`Custom: ${I(m.amount)}, Actual: ${I((y==null?void 0:y.effectiveAmount)??0)}`:`Auto: ${I((y==null?void 0:y.effectiveAmount)??0)}`,children:I((y==null?void 0:y.effectiveAmount)??0)})})]})}),N2=L.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:g,selected:h}){const x=g==null?void 0:g.connection,m=le(D=>D.computed),y=pe(D=>D.activeStationId),w=L.useMemo(()=>{if(!x||!y)return;const D=_r(m,y);return D==null?void 0:D.moduleConnections.find(P=>P.connectionId===x.id)},[m,y,x]),[S,j,I]=Vl({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),C=D=>D>=1e3?`${(D/1e3).toFixed(1)}k`:D.toFixed(0),T=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",k=(w==null?void 0:w.effectiveAmount)??(x==null?void 0:x.amount)??0;return u.jsxs(u.Fragment,{children:[u.jsx(No,{id:r,path:S,style:{stroke:T,strokeWidth:h?3:2,strokeDasharray:x!=null&&x.wareId?void 0:"5,5"}}),(x==null?void 0:x.wareId)&&u.jsx(Sg,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${j}px,${I}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${h?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:x.mode==="custom"?`Custom: ${C(x.amount)}, Actual: ${C(k)}`:`${x.mode??"auto"}: ${C(k)}`,children:C(k)})})]})});function jt({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",c=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return u.jsxs("button",{onClick:d=>{d.stopPropagation(),i(d)},className:`${l} ${c}`,children:[r&&u.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function k2(){const{screenToFlowPosition:t}=Pr(),r=pe(g=>g.contextMenu),o=pe(g=>g.closeContextMenu),i=le(g=>g.plan),l=le(g=>g.addStation),c=le(g=>g.addSector),d=L.useCallback(g=>{if(g.stopPropagation(),!r)return;const h=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,h),o()},[t,r,i.stations.length,l,o]),f=L.useCallback(g=>{if(g.stopPropagation(),!r)return;const h=t({x:r.x,y:r.y});c(`Sector ${i.sectors.length+1}`,h),o()},[t,r,i.sectors.length,c,o]);return u.jsxs(u.Fragment,{children:[u.jsx(jt,{label:"Add Station",icon:"+",onClick:d}),u.jsx(jt,{label:"Add Sector",icon:"",onClick:f})]})}const gl={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function C2(){const{screenToFlowPosition:t}=Pr(),r=L.useRef(null),o=Oe(S=>S.gameData),i=le(S=>S.addModule),l=pe(S=>S.activeStationId),c=pe(S=>S.contextMenu),d=pe(S=>S.closeContextMenu),{t:f}=gt(),[g,h]=L.useState(null),[x,m]=L.useState(""),y=L.useMemo(()=>{if(!o||!x.trim())return null;const S=x.toLowerCase(),j=[];return Object.keys(gl).forEach(I=>{Object.values(o.modules[I]).forEach(C=>{f(C.name).toLowerCase().includes(S)&&j.push({id:C.id,name:f(C.name),category:I})})}),j.slice(0,15)},[o,x,f]);L.useEffect(()=>{var S;(S=r.current)==null||S.focus()},[]);const w=L.useCallback((S,j)=>{if(S.stopPropagation(),!l||!c)return;const I=t({x:c.x,y:c.y});i(l,j,I),d()},[t,c,l,i,d]);return o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-2 pb-0",children:u.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:x,onChange:S=>m(S.target.value),onKeyDown:S=>S.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsx("div",{className:"p-1 pt-1",children:y?u.jsx("div",{className:"max-h-64 overflow-y-auto",children:y.length===0?u.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):y.map(S=>u.jsxs("button",{onClick:j=>w(j,S.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:gl[S.category].icon}),u.jsx("span",{className:"truncate",children:S.name})]},S.id))}):u.jsx(u.Fragment,{children:Object.keys(gl).map(S=>{const{label:j,icon:I}=gl[S],C=Object.values(o.modules[S]),T=g===S;return u.jsxs("div",{children:[u.jsxs("button",{onClick:k=>{k.stopPropagation(),h(T?null:S)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{children:I}),j]}),u.jsx("span",{className:"text-muted-foreground text-xs",children:T?"":""})]}),T&&u.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[C.slice(0,20).map(k=>u.jsx("button",{onClick:D=>w(D,k.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:f(k.name)},k.id)),C.length>20&&u.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",C.length-20," more (use search)"]})]})]},S)})})})]}):null}function Mr(){return u.jsx("div",{className:"my-1 h-px bg-border"})}function kc({label:t,value:r,type:o="text",min:i,max:l,step:c,onSubmit:d}){const[f,g]=L.useState(!1),[h,x]=L.useState(String(r)),m=L.useRef(null);L.useEffect(()=>{var w,S;f&&((w=m.current)==null||w.focus(),(S=m.current)==null||S.select())},[f]);const y=()=>{d(h),g(!1)};return f?u.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("input",{ref:m,type:o,min:i,max:l,step:c,value:h,onChange:w=>x(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&y(),w.key==="Escape"&&g(!1)},onBlur:y,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):u.jsxs("button",{onClick:w=>{w.stopPropagation(),x(String(r)),g(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:t}),u.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function I2({nodeId:t}){const r=le(g=>g.plan.stations),o=le(g=>g.updateStation),i=le(g=>g.removeStation),l=pe(g=>g.drillIntoStation),c=pe(g=>g.closeContextMenu),d=pe(g=>g.clearSelection),f=r.find(g=>g.id===t);return f?u.jsxs(u.Fragment,{children:[u.jsx(jt,{label:"Open Station",onClick:()=>{l(t)}}),u.jsx(Mr,{}),u.jsx(kc,{label:"Change Name",value:f.name,onSubmit:g=>{g.trim()&&o(t,{name:g.trim()})}}),u.jsx(kc,{label:"Sunlight Override",value:f.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:g=>{const h=parseInt(g,10);o(t,{sunlightOverride:isNaN(h)?void 0:h})}}),u.jsx(jt,{label:f.locked?"Unlock Position":"Lock Position",icon:f.locked?"":"",onClick:()=>{o(t,{locked:!f.locked}),c()}}),u.jsx(Mr,{}),u.jsx(jt,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),d(),c()}})]}):null}function j2({value:t,onSelect:r}){const[o,i]=L.useState(!1),[l,c]=L.useState(t),d=L.useRef(null),f=Oe(x=>x.gameData),g=L.useMemo(()=>f!=null&&f.sectors?Object.values(f.sectors).sort((x,m)=>x.name.localeCompare(m.name)):[],[f]),h=L.useMemo(()=>{if(!l.trim())return g.slice(0,10);const x=l.toLowerCase();return g.filter(m=>m.name.toLowerCase().includes(x)).slice(0,10)},[g,l]);return L.useEffect(()=>{var x,m;o&&((x=d.current)==null||x.focus(),(m=d.current)==null||m.select())},[o]),o?u.jsxs("div",{className:"px-3 py-1.5",onClick:x=>x.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),u.jsx("input",{ref:d,type:"text",value:l,onChange:x=>c(x.target.value),onKeyDown:x=>{if(x.stopPropagation(),x.key==="Enter"){const m=g.find(y=>y.name.toLowerCase()===l.toLowerCase());r((m==null?void 0:m.name)??l,m==null?void 0:m.sunlight),i(!1)}x.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),h.length>0&&u.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:h.map(x=>u.jsxs("button",{onClick:m=>{m.stopPropagation(),r(x.name,x.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[u.jsx("span",{className:"truncate text-foreground",children:x.name}),u.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[x.sunlight,"%"]})]},x.id))})]}):u.jsxs("button",{onClick:x=>{x.stopPropagation(),c(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:"Change Name"}),u.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function b2({nodeId:t}){const r=le(m=>m.plan),o=le(m=>m.updateSector),i=le(m=>m.removeSector),l=le(m=>m.addStation),c=le(m=>m.moveStationToSector),d=pe(m=>m.contextMenu),f=pe(m=>m.closeContextMenu),g=pe(m=>m.clearSelection),h=r.sectors.find(m=>m.id===t);if(!h)return null;const x=r.stations.filter(m=>m.sectorId===t);return u.jsxs(u.Fragment,{children:[u.jsx(j2,{value:h.name,onSelect:(m,y)=>{const w={name:m};y!==void 0&&(w.sunlight=y),o(t,w)}}),u.jsx(kc,{label:"Sunlight",value:h.sunlight,type:"number",min:0,max:500,onSubmit:m=>{const y=parseInt(m,10);!isNaN(y)&&y>=0&&o(t,{sunlight:y})}}),u.jsx(Mr,{}),u.jsx(jt,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const m=(d==null?void 0:d.flowPosition)??{x:h.position.x+50,y:h.position.y+80},y=`Station ${r.stations.length+1}`;l(y,m);const w=(S=le.getState().plan.stations.at(-1))==null?void 0:S.id;w&&c(w,t),f()}}),u.jsx(jt,{label:h.locked?"Unlock Position":"Lock Position",icon:h.locked?"":"",onClick:()=>{o(t,{locked:!h.locked}),f()}}),u.jsx(Mr,{}),u.jsx(jt,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{x.length>0&&!confirm(`This sector contains ${x.length} station(s). They will be unassigned. Continue?`)||(i(t),g(),f())}})]})}function E2({label:t,value:r,min:o=1,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),u.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const c=parseInt(l.target.value,10);!isNaN(c)&&c>=o&&i(c)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),u.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function Cc({label:t,value:r,options:o,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value))})]})}function _2({nodeId:t}){const r=pe(S=>S.activeStationId),o=pe(S=>S.closeContextMenu),i=pe(S=>S.clearSelection),l=le(S=>S.plan.stations),c=le(S=>S.updateModule),d=le(S=>S.removeModule),f=Oe(S=>S.gameData),g=Oe(S=>S.getModuleType),{t:h}=gt(),x=l.find(S=>S.id===r),m=x==null?void 0:x.modules.find(S=>S.id===t),y=m?g(m.blueprintId):null,w=L.useMemo(()=>{if(!f||!y)return[];const S=f.modules[y];return Object.values(S).sort((j,I)=>h(j.name).localeCompare(h(I.name))).map(j=>({value:j.id,label:h(j.name)}))},[f,y,h]);return!x||!m||!r?null:u.jsxs(u.Fragment,{children:[u.jsx(E2,{label:"Amount",value:m.count,min:1,onChange:S=>c(r,m.id,{count:S})}),y==="production"&&w.length>1&&u.jsx(Cc,{label:"Blueprint",value:m.blueprintId,options:w,onChange:S=>c(r,m.id,{blueprintId:S})}),u.jsx(jt,{label:m.locked?"Unlock Position":"Lock Position",icon:m.locked?"":"",onClick:()=>{c(r,m.id,{locked:!m.locked}),o()}}),u.jsx(Mr,{}),u.jsx(jt,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{d(r,m.id),i(),o()}})]})}function M2({nodeId:t}){const r=pe(x=>x.activeStationId),o=pe(x=>x.closeContextMenu),i=le(x=>x.plan.stations),l=le(x=>x.removeModuleConnection),c=i.find(x=>x.id===r);if(!c||!r)return null;const d=c.moduleConnections??[],f=t===It,g=f?"Station Input":"Station Output",h=d.filter(x=>f?x.sourceModuleId===It:x.targetModuleId===Yt);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[g,"  ",h.length," connection",h.length!==1?"s":""]}),u.jsx(jt,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{h.forEach(x=>{l(r,x.id)}),o()}})]})}const $m=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function P2({edgeId:t,viewMode:r}){var j,I;const o=pe(C=>C.closeContextMenu),i=pe(C=>C.clearSelection),l=pe(C=>C.activeStationId),c=le(C=>C.plan),d=le(C=>C.updateConnection),f=le(C=>C.removeConnection),g=le(C=>C.updateModuleConnection),h=le(C=>C.removeModuleConnection),x=Oe(C=>C.gameData),{t:m}=gt();if(r==="network"){const C=c.connections.find(k=>k.id===t);if(!C)return null;const T=C.wareId?m((j=x==null?void 0:x.wares[C.wareId])==null?void 0:j.name,C.wareId):"Unknown";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:T}),u.jsx(Cc,{label:"Mode",value:C.mode??"auto",options:$m,onChange:k=>d(C.id,{mode:k})}),u.jsx(Mr,{}),u.jsx(jt,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{f(C.id),i(),o()}})]})}if(!l)return null;const y=c.stations.find(C=>C.id===l),w=((y==null?void 0:y.moduleConnections)??[]).find(C=>C.id===t);if(!w)return null;const S=m((I=x==null?void 0:x.wares[w.wareId])==null?void 0:I.name,w.wareId);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:S}),u.jsx(Cc,{label:"Mode",value:w.mode??"auto",options:$m,onChange:C=>g(l,w.id,{mode:C})}),u.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:C=>C.stopPropagation(),children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),u.jsx("button",{onClick:C=>{C.stopPropagation(),g(l,w.id,{locked:!w.locked})},className:`w-10 h-5 rounded-full transition-colors ${w.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${w.locked?"translate-x-5":"translate-x-0.5"}`})})]}),u.jsx(Mr,{}),u.jsx(jt,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{h(l,w.id),i(),o()}})]})}function Pg(){const t=pe(x=>x.contextMenu),r=pe(x=>x.closeContextMenu),o=L.useRef(null),i=L.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const x=o.current.getBoundingClientRect();let{x:m,y}=t;return m+x.width>window.innerWidth&&(m=window.innerWidth-x.width-8),y+x.height>window.innerHeight&&(y=window.innerHeight-x.height-8),m<8&&(m=8),y<8&&(y=8),{left:m,top:y}},[t]);if(L.useEffect(()=>{if(!t)return;const x=y=>{o.current&&!o.current.contains(y.target)&&r()},m=setTimeout(()=>{document.addEventListener("mousedown",x)},0);return()=>{clearTimeout(m),document.removeEventListener("mousedown",x)}},[t,r]),L.useEffect(()=>{if(!t)return;const x=m=>{m.key==="Escape"&&r()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,r]),!t)return null;const{target:l}=t,d=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return u.jsx(k2,{});if(l.viewMode==="station")return u.jsx(C2,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return u.jsx(I2,{nodeId:l.nodeId});if(l.nodeType==="sector")return u.jsx(b2,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===It||l.nodeId===Yt)return u.jsx(M2,{nodeId:l.nodeId});if(l.nodeType==="module")return u.jsx(_2,{nodeId:l.nodeId})}}return l.type==="edge"?u.jsx(P2,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!d)return null;const g=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",h=i();return u.jsx("div",{ref:o,className:`fixed z-50 ${g} rounded-md border border-border bg-popover shadow-lg`,style:{left:h.left||t.x,top:h.top||t.y},onClick:x=>x.stopPropagation(),onMouseDown:x=>x.stopPropagation(),children:u.jsx("div",{className:"p-1",children:d})})}const D2={station:d2,sector:m2},T2={resource:S2};function O2(){const{setViewport:t,screenToFlowPosition:r}=Pr(),o=le(_=>_.plan.stations),i=le(_=>_.plan.sectors),l=le(_=>_.plan.connections),c=le(_=>_.computed),d=le(_=>_.updateStation),f=le(_=>_.updateSector),g=le(_=>_.removeStation),h=le(_=>_.removeSector),x=le(_=>_.moveStationToSector),m=le(_=>_.addConnection),y=le(_=>_.removeConnection),w=pe(_=>_.selectNode),S=pe(_=>_.selectEdge),j=pe(_=>_.clearSelection),I=pe(_=>_.openContextMenu),C=pe(_=>_.closeContextMenu),T=L.useRef(null),k=L.useMemo(()=>{const _=i.map(N=>({id:N.id,type:"sector",position:N.position,data:{sector:N},width:N.size.width,height:N.size.height,zIndex:-1,draggable:!N.locked})),M=o.map(N=>({id:N.id,type:"station",position:N.position,data:{station:N},zIndex:1,draggable:!N.locked}));return[..._,...M]},[i,o]),D=L.useMemo(()=>l.map(_=>({id:_.id,source:_.sourceStationId,target:_.targetStationId,sourceHandle:_.wareId?`output-${_.wareId}`:void 0,targetHandle:_.wareId?`input-${_.wareId}`:void 0,type:"resource",data:{connection:_}})),[l]),P=L.useCallback((_,M)=>{for(const N of i)if(_>=N.position.x&&_<=N.position.x+N.size.width&&M>=N.position.y&&M<=N.position.y+N.size.height)return N.id;return null},[i]),$=L.useCallback(_=>{_.forEach(M=>{if(M.type==="position"&&M.position){const N=o.find(b=>b.id===M.id),R=i.find(b=>b.id===M.id);if(N)d(M.id,{position:M.position});else if(R){const b=M.position.x-R.position.x,O=M.position.y-R.position.y;f(M.id,{position:M.position}),(b!==0||O!==0)&&o.filter(Z=>Z.sectorId===R.id).forEach(Z=>{d(Z.id,{position:{x:Z.position.x+b,y:Z.position.y+O}})})}}else if(M.type==="remove"){const N=o.find(b=>b.id===M.id),R=i.find(b=>b.id===M.id);N?g(M.id):R&&h(M.id)}else M.type==="select"&&M.selected&&w(M.id)})},[o,i,d,f,g,h,w]),W=L.useCallback((_,M)=>{const N=o.find(Z=>Z.id===M.id);if(!N)return;const R=M.position.x+80,b=M.position.y+50,O=P(R,b);O!==N.sectorId&&x(N.id,O)},[o,P,x]),K=L.useCallback(_=>{_.forEach(M=>{M.type==="remove"?y(M.id):M.type==="select"&&M.selected&&S(M.id)})},[y,S]),Q=_=>_?_.split("-").slice(1).join("-"):"",V=L.useCallback(_=>{if(_.source&&_.target&&_.sourceHandle){const M=Q(_.sourceHandle),N=c.stations.find(q=>q.stationId===_.source),R=N==null?void 0:N.remainingOutputs.find(q=>q.wareId===M),b=c.stations.find(q=>q.stationId===_.target),O=b==null?void 0:b.remainingInputs.find(q=>q.wareId===M),Z=O?Math.min((R==null?void 0:R.amount)??0,O.amount):(R==null?void 0:R.amount)??0;m({sourceStationId:_.source,targetStationId:_.target,wareId:M,amount:Z,mode:"auto"})}},[m,c.stations]),z=L.useCallback(()=>{j(),C()},[j,C]),U=L.useCallback(_=>{_.preventDefault(),I({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"pane",viewMode:"network"}})},[I,r]),X=L.useCallback((_,M)=>{_.preventDefault(),w(M.id),I({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"node",nodeId:M.id,nodeType:M.type??"station",viewMode:"network"}})},[I,r,w]),A=L.useCallback((_,M)=>{_.preventDefault(),S(M.id),I({x:_.clientX,y:_.clientY,flowPosition:r({x:_.clientX,y:_.clientY}),target:{type:"edge",edgeId:M.id,edgeType:M.type??"resource",viewMode:"network"}})},[I,r,S]),H=L.useCallback(_=>{if(_.key==="Delete"||_.key==="Backspace"){const M=pe.getState().selectedNodeId,N=pe.getState().selectedEdgeId;if(M){const R=o.find(O=>O.id===M),b=i.find(O=>O.id===M);R?g(M):b&&h(M),j()}else N&&(y(N),j())}},[o,i,g,h,y,j]),F=L.useCallback(_=>{const M=Math.round(_.x),N=Math.round(_.y),R=Math.round(_.zoom*100)/100;(M!==_.x||N!==_.y||R!==_.zoom)&&t({x:M,y:N,zoom:R})},[t]);return u.jsxs("div",{ref:T,className:"flex-1 relative",onKeyDown:H,tabIndex:0,children:[u.jsxs(wg,{nodes:k,edges:D,onNodesChange:$,onEdgesChange:K,onConnect:V,onNodeDragStop:W,onPaneClick:z,onPaneContextMenu:U,onNodeContextMenu:X,onEdgeContextMenu:A,onViewportChange:F,nodeTypes:D2,edgeTypes:T2,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(kg,{gap:16,size:1}),u.jsx(Ig,{}),u.jsx(Sk,{nodeColor:_=>_.type==="sector"?_.selected?"#3b82f6":"#475569":_.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),u.jsx(Pg,{})]})}function A2(){return u.jsx(Xl,{children:u.jsx(O2,{})})}const L2={module:g2,stationInput:y2,stationOutput:w2},$2={module:N2};function z2(){const{setViewport:t,screenToFlowPosition:r}=Pr(),o=pe(H=>H.activeStationId),i=le(H=>H.plan.stations),l=le(H=>H.computed),c=le(H=>H.updateModule),d=le(H=>H.removeModule),f=le(H=>H.addModuleConnection),g=le(H=>H.removeModuleConnection),h=pe(H=>H.selectNode),x=pe(H=>H.selectEdge),m=pe(H=>H.clearSelection),y=pe(H=>H.openContextMenu),w=pe(H=>H.closeContextMenu),S=L.useRef(null),j=L.useMemo(()=>i.find(H=>H.id===o),[i,o]),I={x:-300,y:100},C={x:400,y:100},T=L.useMemo(()=>{if(!j)return[];const H=j.modules.map(M=>({id:M.id,type:"module",position:M.position,data:{module:M},draggable:!M.locked})),F={id:It,type:"stationInput",position:j.stationInputPosition??I,data:{},deletable:!1},_={id:Yt,type:"stationOutput",position:j.stationOutputPosition??C,data:{},deletable:!1};return[F,...H,_]},[j]),k=L.useMemo(()=>j?(j.moduleConnections??[]).map(F=>({id:F.id,source:F.sourceModuleId,target:F.targetModuleId,sourceHandle:F.wareId?`output-${F.wareId}`:void 0,targetHandle:F.wareId?`input-${F.wareId}`:void 0,type:"module",data:{connection:F}})):[],[j]),D=le(H=>H.updateStation),P=L.useCallback(H=>{o&&H.forEach(F=>{F.type==="position"&&F.position?F.id===It?D(o,{stationInputPosition:F.position}):F.id===Yt?D(o,{stationOutputPosition:F.position}):c(o,F.id,{position:F.position}):F.type==="remove"?F.id!==It&&F.id!==Yt&&d(o,F.id):F.type==="select"&&F.selected&&h(F.id)})},[o,c,D,d,h]),$=L.useCallback(H=>{o&&H.forEach(F=>{F.type==="remove"?g(o,F.id):F.type==="select"&&F.selected&&x(F.id)})},[o,g,x]),W=H=>H?H.split("-").slice(1).join("-"):"",K=L.useCallback(H=>{if(!o||!H.source||!H.target)return;let F,_=0,M;if(H.source===It){if(!H.targetHandle)return;F=W(H.targetHandle);const N=wr(l,o,H.target),R=N==null?void 0:N.netInputs.find(b=>b.wareId===F);_=(R==null?void 0:R.amount)??0}else if(H.target===Yt){if(!H.sourceHandle)return;F=W(H.sourceHandle);const N=wr(l,o,H.source),R=N==null?void 0:N.netOutputs.find(b=>b.wareId===F);_=(R==null?void 0:R.amount)??0}else{if(!H.sourceHandle)return;F=W(H.sourceHandle);const N=wr(l,o,H.source),R=N==null?void 0:N.grossOutputs.find(q=>q.wareId===F),b=(R==null?void 0:R.amount)??0,O=wr(l,o,H.target),Z=O==null?void 0:O.grossInputs.find(q=>q.wareId===F);_=Z?Math.min(b,Z.amount):b,M=b>0?_/b:0}F&&f(o,{sourceModuleId:H.source,targetModuleId:H.target,wareId:F,amount:_,mode:"auto",locked:!1,ratio:M})},[o,l,f]),Q=L.useCallback(()=>{m(),w()},[m,w]),V=L.useCallback(H=>{H.preventDefault(),y({x:H.clientX,y:H.clientY,flowPosition:r({x:H.clientX,y:H.clientY}),target:{type:"pane",viewMode:"station"}})},[y,r]),z=L.useCallback((H,F)=>{H.preventDefault(),h(F.id),y({x:H.clientX,y:H.clientY,flowPosition:r({x:H.clientX,y:H.clientY}),target:{type:"node",nodeId:F.id,nodeType:F.type??"module",viewMode:"station"}})},[y,r,h]),U=L.useCallback((H,F)=>{H.preventDefault(),x(F.id),y({x:H.clientX,y:H.clientY,flowPosition:r({x:H.clientX,y:H.clientY}),target:{type:"edge",edgeId:F.id,edgeType:F.type??"module",viewMode:"station"}})},[y,r,x]),X=L.useCallback(H=>{if(H.key==="Delete"||H.key==="Backspace"){const F=pe.getState().selectedNodeId,_=pe.getState().selectedEdgeId;F&&o?F!==It&&F!==Yt&&(d(o,F),m()):_&&o&&(g(o,_),m())}},[o,d,g,m]),A=L.useCallback(H=>{const F=Math.round(H.x),_=Math.round(H.y),M=Math.round(H.zoom*100)/100;(F!==H.x||_!==H.y||M!==H.zoom)&&t({x:F,y:_,zoom:M})},[t]);return j?u.jsxs("div",{ref:S,className:"flex-1 relative",onKeyDown:X,tabIndex:0,children:[u.jsxs(wg,{nodes:T,edges:k,onNodesChange:P,onEdgesChange:$,onConnect:K,onPaneClick:Q,onPaneContextMenu:V,onNodeContextMenu:z,onEdgeContextMenu:U,onViewportChange:A,nodeTypes:L2,edgeTypes:$2,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(kg,{gap:16,size:1}),u.jsx(Ig,{})]}),u.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[u.jsx("h2",{className:"font-medium text-foreground",children:j.name}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.modules.length," module",j.modules.length!==1?"s":"",","," ",(j.moduleConnections??[]).length," connection",(j.moduleConnections??[]).length!==1?"s":""]})]}),u.jsx(Pg,{})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:u.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function R2(){return u.jsx(Xl,{children:u.jsx(z2,{})})}function F2(){const t=pe(o=>o.theme),r=pe(o=>o.setTheme);L.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),L.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const c=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",c)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function H2(){const t=pe(o=>o.language),r=pe(o=>o.setLanguage);L.useEffect(()=>{const o=localStorage.getItem("x4-planner-language");o&&r(o)},[r]),L.useEffect(()=>{localStorage.setItem("x4-planner-language",t)},[t])}function V2(){F2(),H2();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=Oe(),c=pe(f=>f.viewMode),d=Ol(f=>f.gameMode);return L.useEffect(()=>{Wt.getState().initializePlanManager(),Bk(f=>Wt.getState().saveCurrentPlan(f)),Mg(d).then(f=>{i(f),le.getState().recompute()}).catch(f=>l(f.message))},[i,l,d]),r?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):u.jsx(Xl,{children:u.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[u.jsx(Kk,{}),u.jsx(r2,{}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c==="network"?u.jsx(A2,{}):u.jsx(R2,{}),u.jsx(n2,{})]}),u.jsx(i2,{}),t&&u.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]})]})})}x0.createRoot(document.getElementById("root")).render(u.jsx(L.StrictMode,{children:u.jsx(V2,{})}));
