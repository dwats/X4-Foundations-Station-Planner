(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=o(l);fetch(l.href,c)}})();function Vm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wu={exports:{}},gs={},Uu={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function g0(){if(gp)return _e;gp=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),m=Symbol.iterator;function y(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function k(E,z,J){this.props=E,this.context=z,this.refs=C,this.updater=J||w}k.prototype.isReactComponent={},k.prototype.setState=function(E,z){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,z,"setState")},k.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function b(){}b.prototype=k.prototype;function T(E,z,J){this.props=E,this.context=z,this.refs=C,this.updater=J||w}var j=T.prototype=new b;j.constructor=T,S(j,k.prototype),j.isPureReactComponent=!0;var _=Array.isArray,A=Object.prototype.hasOwnProperty,L={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function U(E,z,J){var te,Q={},ie=null,le=null;if(z!=null)for(te in z.ref!==void 0&&(le=z.ref),z.key!==void 0&&(ie=""+z.key),z)A.call(z,te)&&!P.hasOwnProperty(te)&&(Q[te]=z[te]);var oe=arguments.length-2;if(oe===1)Q.children=J;else if(1<oe){for(var ae=Array(oe),me=0;me<oe;me++)ae[me]=arguments[me+2];Q.children=ae}if(E&&E.defaultProps)for(te in oe=E.defaultProps,oe)Q[te]===void 0&&(Q[te]=oe[te]);return{$$typeof:t,type:E,key:ie,ref:le,props:Q,_owner:L.current}}function K(E,z){return{$$typeof:t,type:E.type,key:z,ref:E.ref,props:E.props,_owner:E._owner}}function se(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function B(E){var z={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(J){return z[J]})}var M=/\/+/g;function X(E,z){return typeof E=="object"&&E!==null&&E.key!=null?B(""+E.key):z.toString(36)}function R(E,z,J,te,Q){var ie=typeof E;(ie==="undefined"||ie==="boolean")&&(E=null);var le=!1;if(E===null)le=!0;else switch(ie){case"string":case"number":le=!0;break;case"object":switch(E.$$typeof){case t:case r:le=!0}}if(le)return le=E,Q=Q(le),E=te===""?"."+X(le,0):te,_(Q)?(J="",E!=null&&(J=E.replace(M,"$&/")+"/"),R(Q,z,J,"",function(me){return me})):Q!=null&&(se(Q)&&(Q=K(Q,J+(!Q.key||le&&le.key===Q.key?"":(""+Q.key).replace(M,"$&/")+"/")+E)),z.push(Q)),1;if(le=0,te=te===""?".":te+":",_(E))for(var oe=0;oe<E.length;oe++){ie=E[oe];var ae=te+X(ie,oe);le+=R(ie,z,J,ae,Q)}else if(ae=y(E),typeof ae=="function")for(E=ae.call(E),oe=0;!(ie=E.next()).done;)ie=ie.value,ae=te+X(ie,oe++),le+=R(ie,z,J,ae,Q);else if(ie==="object")throw z=String(E),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return le}function W(E,z,J){if(E==null)return E;var te=[],Q=0;return R(E,te,"","",function(ie){return z.call(J,ie,Q++)}),te}function V(E){if(E._status===-1){var z=E._result;z=z(),z.then(function(J){(E._status===0||E._status===-1)&&(E._status=1,E._result=J)},function(J){(E._status===0||E._status===-1)&&(E._status=2,E._result=J)}),E._status===-1&&(E._status=0,E._result=z)}if(E._status===1)return E._result.default;throw E._result}var H={current:null},$={transition:null},N={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:$,ReactCurrentOwner:L};function O(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:W,forEach:function(E,z,J){W(E,function(){z.apply(this,arguments)},J)},count:function(E){var z=0;return W(E,function(){z++}),z},toArray:function(E){return W(E,function(z){return z})||[]},only:function(E){if(!se(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},_e.Component=k,_e.Fragment=o,_e.Profiler=l,_e.PureComponent=T,_e.StrictMode=i,_e.Suspense=g,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,_e.act=O,_e.cloneElement=function(E,z,J){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var te=S({},E.props),Q=E.key,ie=E.ref,le=E._owner;if(z!=null){if(z.ref!==void 0&&(ie=z.ref,le=L.current),z.key!==void 0&&(Q=""+z.key),E.type&&E.type.defaultProps)var oe=E.type.defaultProps;for(ae in z)A.call(z,ae)&&!P.hasOwnProperty(ae)&&(te[ae]=z[ae]===void 0&&oe!==void 0?oe[ae]:z[ae])}var ae=arguments.length-2;if(ae===1)te.children=J;else if(1<ae){oe=Array(ae);for(var me=0;me<ae;me++)oe[me]=arguments[me+2];te.children=oe}return{$$typeof:t,type:E.type,key:Q,ref:ie,props:te,_owner:le}},_e.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},_e.createElement=U,_e.createFactory=function(E){var z=U.bind(null,E);return z.type=E,z},_e.createRef=function(){return{current:null}},_e.forwardRef=function(E){return{$$typeof:f,render:E}},_e.isValidElement=se,_e.lazy=function(E){return{$$typeof:x,_payload:{_status:-1,_result:E},_init:V}},_e.memo=function(E,z){return{$$typeof:h,type:E,compare:z===void 0?null:z}},_e.startTransition=function(E){var z=$.transition;$.transition={};try{E()}finally{$.transition=z}},_e.unstable_act=O,_e.useCallback=function(E,z){return H.current.useCallback(E,z)},_e.useContext=function(E){return H.current.useContext(E)},_e.useDebugValue=function(){},_e.useDeferredValue=function(E){return H.current.useDeferredValue(E)},_e.useEffect=function(E,z){return H.current.useEffect(E,z)},_e.useId=function(){return H.current.useId()},_e.useImperativeHandle=function(E,z,J){return H.current.useImperativeHandle(E,z,J)},_e.useInsertionEffect=function(E,z){return H.current.useInsertionEffect(E,z)},_e.useLayoutEffect=function(E,z){return H.current.useLayoutEffect(E,z)},_e.useMemo=function(E,z){return H.current.useMemo(E,z)},_e.useReducer=function(E,z,J){return H.current.useReducer(E,z,J)},_e.useRef=function(E){return H.current.useRef(E)},_e.useState=function(E){return H.current.useState(E)},_e.useSyncExternalStore=function(E,z,J){return H.current.useSyncExternalStore(E,z,J)},_e.useTransition=function(){return H.current.useTransition()},_e.version="18.3.1",_e}var xp;function As(){return xp||(xp=1,Uu.exports=g0()),Uu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function x0(){if(yp)return gs;yp=1;var t=As(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,g,h){var x,m={},y=null,w=null;h!==void 0&&(y=""+h),g.key!==void 0&&(y=""+g.key),g.ref!==void 0&&(w=g.ref);for(x in g)i.call(g,x)&&!c.hasOwnProperty(x)&&(m[x]=g[x]);if(f&&f.defaultProps)for(x in g=f.defaultProps,g)m[x]===void 0&&(m[x]=g[x]);return{$$typeof:r,type:f,key:y,ref:w,props:m,_owner:l.current}}return gs.Fragment=o,gs.jsx=d,gs.jsxs=d,gs}var vp;function y0(){return vp||(vp=1,Wu.exports=x0()),Wu.exports}var u=y0(),D=As();const ws=Vm(D);var il={},Yu={exports:{}},bt={},Xu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function v0(){return wp||(wp=1,(function(t){function r($,N){var O=$.length;$.push(N);e:for(;0<O;){var E=O-1>>>1,z=$[E];if(0<l(z,N))$[E]=N,$[O]=z,O=E;else break e}}function o($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var N=$[0],O=$.pop();if(O!==N){$[0]=O;e:for(var E=0,z=$.length,J=z>>>1;E<J;){var te=2*(E+1)-1,Q=$[te],ie=te+1,le=$[ie];if(0>l(Q,O))ie<z&&0>l(le,Q)?($[E]=le,$[ie]=O,E=ie):($[E]=Q,$[te]=O,E=te);else if(ie<z&&0>l(le,O))$[E]=le,$[ie]=O,E=ie;else break e}}return N}function l($,N){var O=$.sortIndex-N.sortIndex;return O!==0?O:$.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var g=[],h=[],x=1,m=null,y=3,w=!1,S=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j($){for(var N=o(h);N!==null;){if(N.callback===null)i(h);else if(N.startTime<=$)i(h),N.sortIndex=N.expirationTime,r(g,N);else break;N=o(h)}}function _($){if(C=!1,j($),!S)if(o(g)!==null)S=!0,V(A);else{var N=o(h);N!==null&&H(_,N.startTime-$)}}function A($,N){S=!1,C&&(C=!1,b(U),U=-1),w=!0;var O=y;try{for(j(N),m=o(g);m!==null&&(!(m.expirationTime>N)||$&&!B());){var E=m.callback;if(typeof E=="function"){m.callback=null,y=m.priorityLevel;var z=E(m.expirationTime<=N);N=t.unstable_now(),typeof z=="function"?m.callback=z:m===o(g)&&i(g),j(N)}else i(g);m=o(g)}if(m!==null)var J=!0;else{var te=o(h);te!==null&&H(_,te.startTime-N),J=!1}return J}finally{m=null,y=O,w=!1}}var L=!1,P=null,U=-1,K=5,se=-1;function B(){return!(t.unstable_now()-se<K)}function M(){if(P!==null){var $=t.unstable_now();se=$;var N=!0;try{N=P(!0,$)}finally{N?X():(L=!1,P=null)}}else L=!1}var X;if(typeof T=="function")X=function(){T(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,W=R.port2;R.port1.onmessage=M,X=function(){W.postMessage(null)}}else X=function(){k(M,0)};function V($){P=$,L||(L=!0,X())}function H($,N){U=k(function(){$(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,V(A))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return o(g)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var N=3;break;default:N=y}var O=y;y=N;try{return $()}finally{y=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,N){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var O=y;y=$;try{return N()}finally{y=O}},t.unstable_scheduleCallback=function($,N,O){var E=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?E+O:E):O=E,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=O+z,$={id:x++,callback:N,priorityLevel:$,startTime:O,expirationTime:z,sortIndex:-1},O>E?($.sortIndex=O,r(h,$),o(g)===null&&$===o(h)&&(C?(b(U),U=-1):C=!0,H(_,O-E))):($.sortIndex=z,r(g,$),S||w||(S=!0,V(A))),$},t.unstable_shouldYield=B,t.unstable_wrapCallback=function($){var N=y;return function(){var O=y;y=N;try{return $.apply(this,arguments)}finally{y=O}}}})(Gu)),Gu}var Sp;function w0(){return Sp||(Sp=1,Xu.exports=v0()),Xu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function S0(){if(Np)return bt;Np=1;var t=As(),r=w0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},m={};function y(e){return g.call(m,e)?!0:g.call(x,e)?!1:h.test(e)?m[e]=!0:(x[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function C(e,n,s,a,p,v,I){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=I}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];k[n]=new C(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(b,T);k[n]=new C(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(b,T);k[n]=new C(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(b,T);k[n]=new C(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function j(e,n,s,a){var p=k.hasOwnProperty(n)?k[n]:null;(p!==null?p.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,p,a)&&(s=null),a||p===null?y(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):p.mustUseProperty?e[p.propertyName]=s===null?p.type===3?!1:"":s:(n=p.attributeName,a=p.attributeNamespace,s===null?e.removeAttribute(n):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var _=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),L=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),B=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),$=Symbol.iterator;function N(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var O=Object.assign,E;function z(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var J=!1;function te(e,n){if(!e||J)return"";J=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(re){var a=re}Reflect.construct(e,[],n)}else{try{n.call()}catch(re){a=re}e.call(n.prototype)}else{try{throw Error()}catch(re){a=re}e()}}catch(re){if(re&&a&&typeof re.stack=="string"){for(var p=re.stack.split(`
`),v=a.stack.split(`
`),I=p.length-1,F=v.length-1;1<=I&&0<=F&&p[I]!==v[F];)F--;for(;1<=I&&0<=F;I--,F--)if(p[I]!==v[F]){if(I!==1||F!==1)do if(I--,F--,0>F||p[I]!==v[F]){var Y=`
`+p[I].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=I&&0<=F);break}}}finally{J=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?z(e):""}function Q(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=te(e.type,!1),e;case 11:return e=te(e.type.render,!1),e;case 1:return e=te(e.type,!0),e;default:return""}}function ie(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case L:return"Portal";case K:return"Profiler";case U:return"StrictMode";case X:return"Suspense";case R:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case se:return(e._context.displayName||"Context")+".Provider";case M:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return n=e.displayName||null,n!==null?n:ie(e.type)||"Memo";case V:n=e._payload,e=e._init;try{return ie(e(n))}catch{}}return null}function le(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(n);case 8:return n===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ae(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function me(e){var n=ae(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(I){a=""+I,v.call(this,I)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(I){a=""+I},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function be(e){e._valueTracker||(e._valueTracker=me(e))}function q(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=ae(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function ee(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function he(e,n){var s=n.checked;return O({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function we(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=oe(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function xe(e,n){n=n.checked,n!=null&&j(e,"checked",n,!1)}function Me(e,n){xe(e,n);var s=oe(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ke(e,n.type,s):n.hasOwnProperty("defaultValue")&&Ke(e,n.type,oe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function $e(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Ke(e,n,s){(n!=="number"||ee(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ze=Array.isArray;function Je(e,n,s,a){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&a&&(e[s].defaultSelected=!0)}else{for(s=""+oe(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function Lt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return O({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function at(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(Ze(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:oe(s)}}function vt(e,n){var s=oe(n.value),a=oe(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function pt(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function It(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?It(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yt,zt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,p){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,p)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Yt=Yt||document.createElement("div"),Yt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Yt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function yn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zl=["Webkit","ms","Moz","O"];Object.keys(rr).forEach(function(e){Zl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),rr[n]=rr[e]})});function Bs(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||rr.hasOwnProperty(e)&&rr[e]?(""+n).trim():n+"px"}function Ws(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,p=Bs(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,p):e[s]=p}}var Jl=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(e,n){if(n){if(Jl[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Io(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=null;function Mo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _o=null,Pn=null,Dn=null;function Us(e){if(e=ts(e)){if(typeof _o!="function")throw Error(o(280));var n=e.stateNode;n&&(n=Si(n),_o(e.stateNode,e.type,n))}}function Ys(e){Pn?Dn?Dn.push(e):Dn=[e]:Pn=e}function Xs(){if(Pn){var e=Pn,n=Dn;if(Dn=Pn=null,Us(e),n)for(e=0;e<n.length;e++)Us(n[e])}}function Gs(e,n){return e(n)}function Ks(){}var Po=!1;function Qs(e,n,s){if(Po)return e(n,s);Po=!0;try{return Gs(e,n,s)}finally{Po=!1,(Pn!==null||Dn!==null)&&(Ks(),Xs())}}function or(e,n){var s=e.stateNode;if(s===null)return null;var a=Si(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Do=!1;if(f)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Do=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Do=!1}function ea(e,n,s,a,p,v,I,F,Y){var re=Array.prototype.slice.call(arguments,3);try{n.apply(s,re)}catch(de){this.onError(de)}}var ir=!1,zr=null,$r=!1,To=null,ta={onError:function(e){ir=!0,zr=e}};function na(e,n,s,a,p,v,I,F,Y){ir=!1,zr=null,ea.apply(ta,arguments)}function ra(e,n,s,a,p,v,I,F,Y){if(na.apply(this,arguments),ir){if(ir){var re=zr;ir=!1,zr=null}else throw Error(o(198));$r||($r=!0,To=re)}}function ln(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Oo(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Ao(e){if(ln(e)!==e)throw Error(o(188))}function oa(e){var n=e.alternate;if(!n){if(n=ln(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var p=s.return;if(p===null)break;var v=p.alternate;if(v===null){if(a=p.return,a!==null){s=a;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===s)return Ao(p),e;if(v===a)return Ao(p),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=p,a=v;else{for(var I=!1,F=p.child;F;){if(F===s){I=!0,s=p,a=v;break}if(F===a){I=!0,a=p,s=v;break}F=F.sibling}if(!I){for(F=v.child;F;){if(F===s){I=!0,s=v,a=p;break}if(F===a){I=!0,a=v,s=p;break}F=F.sibling}if(!I)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function qs(e){return e=oa(e),e!==null?Zs(e):null}function Zs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Zs(e);if(n!==null)return n;e=e.sibling}return null}var Js=r.unstable_scheduleCallback,ei=r.unstable_cancelCallback,sa=r.unstable_shouldYield,ti=r.unstable_requestPaint,We=r.unstable_now,ia=r.unstable_getCurrentPriorityLevel,Lo=r.unstable_ImmediatePriority,ni=r.unstable_UserBlockingPriority,Rr=r.unstable_NormalPriority,la=r.unstable_LowPriority,ri=r.unstable_IdlePriority,lr=null,$t=null;function aa(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(lr,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:da,ua=Math.log,ca=Math.LN2;function da(e){return e>>>=0,e===0?32:31-(ua(e)/ca|0)|0}var Fr=64,Hr=4194304;function an(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,p=e.suspendedLanes,v=e.pingedLanes,I=s&268435455;if(I!==0){var F=I&~p;F!==0?a=an(F):(v&=I,v!==0&&(a=an(v)))}else I=s&~p,I!==0?a=an(I):v!==0&&(a=an(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&p)===0&&(p=a&-a,v=n&-n,p>=v||p===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-Et(n),p=1<<s,a|=e[s],n&=~p;return a}function oi(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fa(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,v=e.pendingLanes;0<v;){var I=31-Et(v),F=1<<I,Y=p[I];Y===-1?((F&s)===0||(F&a)!==0)&&(p[I]=oi(F,n)):Y<=n&&(e.expiredLanes|=F),v&=~F}}function zo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Br(){var e=Fr;return Fr<<=1,(Fr&4194240)===0&&(Fr=64),e}function $o(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ar(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Et(n),e[n]=s}function si(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var p=31-Et(s),v=1<<p;n[p]=0,a[p]=-1,e[p]=-1,s&=~v}}function pa(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-Et(s),p=1<<a;p&n|e[a]&n&&(e[a]|=n),s&=~p}}var Ae=0;function Xc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Gc,ma,Kc,Qc,qc,ha=!1,ii=[],Tn=null,On=null,An=null,Ro=new Map,Fo=new Map,Ln=[],$g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zc(e,n){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Ro.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(n.pointerId)}}function Ho(e,n,s,a,p,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[p]},n!==null&&(n=ts(n),n!==null&&ma(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Rg(e,n,s,a,p){switch(n){case"focusin":return Tn=Ho(Tn,e,n,s,a,p),!0;case"dragenter":return On=Ho(On,e,n,s,a,p),!0;case"mouseover":return An=Ho(An,e,n,s,a,p),!0;case"pointerover":var v=p.pointerId;return Ro.set(v,Ho(Ro.get(v)||null,e,n,s,a,p)),!0;case"gotpointercapture":return v=p.pointerId,Fo.set(v,Ho(Fo.get(v)||null,e,n,s,a,p)),!0}return!1}function Jc(e){var n=ur(e.target);if(n!==null){var s=ln(n);if(s!==null){if(n=s.tag,n===13){if(n=Oo(s),n!==null){e.blockedOn=n,qc(e.priority,function(){Kc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function li(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=xa(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);Eo=a,s.target.dispatchEvent(a),Eo=null}else return n=ts(s),n!==null&&ma(n),e.blockedOn=s,!1;n.shift()}return!0}function ed(e,n,s){li(e)&&s.delete(n)}function Fg(){ha=!1,Tn!==null&&li(Tn)&&(Tn=null),On!==null&&li(On)&&(On=null),An!==null&&li(An)&&(An=null),Ro.forEach(ed),Fo.forEach(ed)}function Vo(e,n){e.blockedOn===n&&(e.blockedOn=null,ha||(ha=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fg)))}function Bo(e){function n(p){return Vo(p,e)}if(0<ii.length){Vo(ii[0],e);for(var s=1;s<ii.length;s++){var a=ii[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Tn!==null&&Vo(Tn,e),On!==null&&Vo(On,e),An!==null&&Vo(An,e),Ro.forEach(n),Fo.forEach(n),s=0;s<Ln.length;s++)a=Ln[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ln.length&&(s=Ln[0],s.blockedOn===null);)Jc(s),s.blockedOn===null&&Ln.shift()}var Wr=_.ReactCurrentBatchConfig,ai=!0;function Hg(e,n,s,a){var p=Ae,v=Wr.transition;Wr.transition=null;try{Ae=1,ga(e,n,s,a)}finally{Ae=p,Wr.transition=v}}function Vg(e,n,s,a){var p=Ae,v=Wr.transition;Wr.transition=null;try{Ae=4,ga(e,n,s,a)}finally{Ae=p,Wr.transition=v}}function ga(e,n,s,a){if(ai){var p=xa(e,n,s,a);if(p===null)Oa(e,n,a,ui,s),Zc(e,a);else if(Rg(p,e,n,s,a))a.stopPropagation();else if(Zc(e,a),n&4&&-1<$g.indexOf(e)){for(;p!==null;){var v=ts(p);if(v!==null&&Gc(v),v=xa(e,n,s,a),v===null&&Oa(e,n,a,ui,s),v===p)break;p=v}p!==null&&a.stopPropagation()}else Oa(e,n,a,null,s)}}var ui=null;function xa(e,n,s,a){if(ui=null,e=Mo(a),e=ur(e),e!==null)if(n=ln(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Oo(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ui=e,null}function td(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ia()){case Lo:return 1;case ni:return 4;case Rr:case la:return 16;case ri:return 536870912;default:return 16}default:return 16}}var zn=null,ya=null,ci=null;function nd(){if(ci)return ci;var e,n=ya,s=n.length,a,p="value"in zn?zn.value:zn.textContent,v=p.length;for(e=0;e<s&&n[e]===p[e];e++);var I=s-e;for(a=1;a<=I&&n[s-a]===p[v-a];a++);return ci=p.slice(e,1<a?1-a:void 0)}function di(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fi(){return!0}function rd(){return!1}function Mt(e){function n(s,a,p,v,I){this._reactName=s,this._targetInst=p,this.type=a,this.nativeEvent=v,this.target=I,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(s=e[F],this[F]=s?s(v):v[F]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?fi:rd,this.isPropagationStopped=rd,this}return O(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),n}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Mt(Ur),Wo=O({},Ur,{view:0,detail:0}),Bg=Mt(Wo),wa,Sa,Uo,pi=O({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uo&&(Uo&&e.type==="mousemove"?(wa=e.screenX-Uo.screenX,Sa=e.screenY-Uo.screenY):Sa=wa=0,Uo=e),wa)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),od=Mt(pi),Wg=O({},pi,{dataTransfer:0}),Ug=Mt(Wg),Yg=O({},Wo,{relatedTarget:0}),Na=Mt(Yg),Xg=O({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Gg=Mt(Xg),Kg=O({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qg=Mt(Kg),qg=O({},Ur,{data:0}),sd=Mt(qg),Zg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tx(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ex[e])?!!n[e]:!1}function ka(){return tx}var nx=O({},Wo,{key:function(e){if(e.key){var n=Zg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ka,charCode:function(e){return e.type==="keypress"?di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rx=Mt(nx),ox=O({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=Mt(ox),sx=O({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ka}),ix=Mt(sx),lx=O({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=Mt(lx),ux=O({},pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cx=Mt(ux),dx=[9,13,27,32],ja=f&&"CompositionEvent"in window,Yo=null;f&&"documentMode"in document&&(Yo=document.documentMode);var fx=f&&"TextEvent"in window&&!Yo,ld=f&&(!ja||Yo&&8<Yo&&11>=Yo),ad=" ",ud=!1;function cd(e,n){switch(e){case"keyup":return dx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function px(e,n){switch(e){case"compositionend":return dd(n);case"keypress":return n.which!==32?null:(ud=!0,ad);case"textInput":return e=n.data,e===ad&&ud?null:e;default:return null}}function mx(e,n){if(Yr)return e==="compositionend"||!ja&&cd(e,n)?(e=nd(),ci=ya=zn=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ld&&n.locale!=="ko"?null:n.data;default:return null}}var hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!hx[e.type]:n==="textarea"}function pd(e,n,s,a){Ys(a),n=yi(n,"onChange"),0<n.length&&(s=new va("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Xo=null,Go=null;function gx(e){Pd(e,0)}function mi(e){var n=qr(e);if(q(n))return e}function xx(e,n){if(e==="change")return n}var md=!1;if(f){var ba;if(f){var Ca="oninput"in document;if(!Ca){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),Ca=typeof hd.oninput=="function"}ba=Ca}else ba=!1;md=ba&&(!document.documentMode||9<document.documentMode)}function gd(){Xo&&(Xo.detachEvent("onpropertychange",xd),Go=Xo=null)}function xd(e){if(e.propertyName==="value"&&mi(Go)){var n=[];pd(n,Go,e,Mo(e)),Qs(gx,n)}}function yx(e,n,s){e==="focusin"?(gd(),Xo=n,Go=s,Xo.attachEvent("onpropertychange",xd)):e==="focusout"&&gd()}function vx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mi(Go)}function wx(e,n){if(e==="click")return mi(n)}function Sx(e,n){if(e==="input"||e==="change")return mi(n)}function Nx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Xt=typeof Object.is=="function"?Object.is:Nx;function Ko(e,n){if(Xt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var p=s[a];if(!g.call(n,p)||!Xt(e[p],n[p]))return!1}return!0}function yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vd(e,n){var s=yd(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=yd(s)}}function wd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?wd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Sd(){for(var e=window,n=ee();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ee(e.document)}return n}function Ia(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function kx(e){var n=Sd(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&wd(s.ownerDocument.documentElement,s)){if(a!==null&&Ia(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var p=s.textContent.length,v=Math.min(a.start,p);a=a.end===void 0?v:Math.min(a.end,p),!e.extend&&v>a&&(p=a,a=v,v=p),p=vd(s,v);var I=vd(s,a);p&&I&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(I.node,I.offset)):(n.setEnd(I.node,I.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jx=f&&"documentMode"in document&&11>=document.documentMode,Xr=null,Ea=null,Qo=null,Ma=!1;function Nd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ma||Xr==null||Xr!==ee(a)||(a=Xr,"selectionStart"in a&&Ia(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Qo&&Ko(Qo,a)||(Qo=a,a=yi(Ea,"onSelect"),0<a.length&&(n=new va("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Xr)))}function hi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Gr={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionend:hi("Transition","TransitionEnd")},_a={},kd={};f&&(kd=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function gi(e){if(_a[e])return _a[e];if(!Gr[e])return e;var n=Gr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in kd)return _a[e]=n[s];return e}var jd=gi("animationend"),bd=gi("animationiteration"),Cd=gi("animationstart"),Id=gi("transitionend"),Ed=new Map,Md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,n){Ed.set(e,n),c(n,[e])}for(var Pa=0;Pa<Md.length;Pa++){var Da=Md[Pa],bx=Da.toLowerCase(),Cx=Da[0].toUpperCase()+Da.slice(1);$n(bx,"on"+Cx)}$n(jd,"onAnimationEnd"),$n(bd,"onAnimationIteration"),$n(Cd,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(Id,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ix=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function _d(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,ra(a,n,void 0,e),e.currentTarget=null}function Pd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],p=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var I=a.length-1;0<=I;I--){var F=a[I],Y=F.instance,re=F.currentTarget;if(F=F.listener,Y!==v&&p.isPropagationStopped())break e;_d(p,F,re),v=Y}else for(I=0;I<a.length;I++){if(F=a[I],Y=F.instance,re=F.currentTarget,F=F.listener,Y!==v&&p.isPropagationStopped())break e;_d(p,F,re),v=Y}}}if($r)throw e=To,$r=!1,To=null,e}function Re(e,n){var s=n[Fa];s===void 0&&(s=n[Fa]=new Set);var a=e+"__bubble";s.has(a)||(Dd(n,e,2,!1),s.add(a))}function Ta(e,n,s){var a=0;n&&(a|=4),Dd(s,e,a,n)}var xi="_reactListening"+Math.random().toString(36).slice(2);function Zo(e){if(!e[xi]){e[xi]=!0,i.forEach(function(s){s!=="selectionchange"&&(Ix.has(s)||Ta(s,!1,e),Ta(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[xi]||(n[xi]=!0,Ta("selectionchange",!1,n))}}function Dd(e,n,s,a){switch(td(n)){case 1:var p=Hg;break;case 4:p=Vg;break;default:p=ga}s=p.bind(null,n,s,e),p=void 0,!Do||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function Oa(e,n,s,a,p){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var I=a.tag;if(I===3||I===4){var F=a.stateNode.containerInfo;if(F===p||F.nodeType===8&&F.parentNode===p)break;if(I===4)for(I=a.return;I!==null;){var Y=I.tag;if((Y===3||Y===4)&&(Y=I.stateNode.containerInfo,Y===p||Y.nodeType===8&&Y.parentNode===p))return;I=I.return}for(;F!==null;){if(I=ur(F),I===null)return;if(Y=I.tag,Y===5||Y===6){a=v=I;continue e}F=F.parentNode}}a=a.return}Qs(function(){var re=v,de=Mo(s),fe=[];e:{var ue=Ed.get(e);if(ue!==void 0){var ye=va,Se=e;switch(e){case"keypress":if(di(s)===0)break e;case"keydown":case"keyup":ye=rx;break;case"focusin":Se="focus",ye=Na;break;case"focusout":Se="blur",ye=Na;break;case"beforeblur":case"afterblur":ye=Na;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ug;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=ix;break;case jd:case bd:case Cd:ye=Gg;break;case Id:ye=ax;break;case"scroll":ye=Bg;break;case"wheel":ye=cx;break;case"copy":case"cut":case"paste":ye=Qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=id}var Ne=(n&4)!==0,Ge=!Ne&&e==="scroll",Z=Ne?ue!==null?ue+"Capture":null:ue;Ne=[];for(var G=re,ne;G!==null;){ne=G;var pe=ne.stateNode;if(ne.tag===5&&pe!==null&&(ne=pe,Z!==null&&(pe=or(G,Z),pe!=null&&Ne.push(Jo(G,pe,ne)))),Ge)break;G=G.return}0<Ne.length&&(ue=new ye(ue,Se,null,s,de),fe.push({event:ue,listeners:Ne}))}}if((n&7)===0){e:{if(ue=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",ue&&s!==Eo&&(Se=s.relatedTarget||s.fromElement)&&(ur(Se)||Se[vn]))break e;if((ye||ue)&&(ue=de.window===de?de:(ue=de.ownerDocument)?ue.defaultView||ue.parentWindow:window,ye?(Se=s.relatedTarget||s.toElement,ye=re,Se=Se?ur(Se):null,Se!==null&&(Ge=ln(Se),Se!==Ge||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ye=null,Se=re),ye!==Se)){if(Ne=od,pe="onMouseLeave",Z="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=id,pe="onPointerLeave",Z="onPointerEnter",G="pointer"),Ge=ye==null?ue:qr(ye),ne=Se==null?ue:qr(Se),ue=new Ne(pe,G+"leave",ye,s,de),ue.target=Ge,ue.relatedTarget=ne,pe=null,ur(de)===re&&(Ne=new Ne(Z,G+"enter",Se,s,de),Ne.target=ne,Ne.relatedTarget=Ge,pe=Ne),Ge=pe,ye&&Se)t:{for(Ne=ye,Z=Se,G=0,ne=Ne;ne;ne=Kr(ne))G++;for(ne=0,pe=Z;pe;pe=Kr(pe))ne++;for(;0<G-ne;)Ne=Kr(Ne),G--;for(;0<ne-G;)Z=Kr(Z),ne--;for(;G--;){if(Ne===Z||Z!==null&&Ne===Z.alternate)break t;Ne=Kr(Ne),Z=Kr(Z)}Ne=null}else Ne=null;ye!==null&&Td(fe,ue,ye,Ne,!1),Se!==null&&Ge!==null&&Td(fe,Ge,Se,Ne,!0)}}e:{if(ue=re?qr(re):window,ye=ue.nodeName&&ue.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ue.type==="file")var ke=xx;else if(fd(ue))if(md)ke=Sx;else{ke=vx;var Ce=yx}else(ye=ue.nodeName)&&ye.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(ke=wx);if(ke&&(ke=ke(e,re))){pd(fe,ke,s,de);break e}Ce&&Ce(e,ue,re),e==="focusout"&&(Ce=ue._wrapperState)&&Ce.controlled&&ue.type==="number"&&Ke(ue,"number",ue.value)}switch(Ce=re?qr(re):window,e){case"focusin":(fd(Ce)||Ce.contentEditable==="true")&&(Xr=Ce,Ea=re,Qo=null);break;case"focusout":Qo=Ea=Xr=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,Nd(fe,s,de);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":Nd(fe,s,de)}var Ie;if(ja)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Yr?cd(e,s)&&(Ee="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ee="onCompositionStart");Ee&&(ld&&s.locale!=="ko"&&(Yr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Yr&&(Ie=nd()):(zn=de,ya="value"in zn?zn.value:zn.textContent,Yr=!0)),Ce=yi(re,Ee),0<Ce.length&&(Ee=new sd(Ee,e,null,s,de),fe.push({event:Ee,listeners:Ce}),Ie?Ee.data=Ie:(Ie=dd(s),Ie!==null&&(Ee.data=Ie)))),(Ie=fx?px(e,s):mx(e,s))&&(re=yi(re,"onBeforeInput"),0<re.length&&(de=new sd("onBeforeInput","beforeinput",null,s,de),fe.push({event:de,listeners:re}),de.data=Ie))}Pd(fe,n)})}function Jo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function yi(e,n){for(var s=n+"Capture",a=[];e!==null;){var p=e,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=or(e,s),v!=null&&a.unshift(Jo(e,v,p)),v=or(e,n),v!=null&&a.push(Jo(e,v,p))),e=e.return}return a}function Kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Td(e,n,s,a,p){for(var v=n._reactName,I=[];s!==null&&s!==a;){var F=s,Y=F.alternate,re=F.stateNode;if(Y!==null&&Y===a)break;F.tag===5&&re!==null&&(F=re,p?(Y=or(s,v),Y!=null&&I.unshift(Jo(s,Y,F))):p||(Y=or(s,v),Y!=null&&I.push(Jo(s,Y,F)))),s=s.return}I.length!==0&&e.push({event:n,listeners:I})}var Ex=/\r\n?/g,Mx=/\u0000|\uFFFD/g;function Od(e){return(typeof e=="string"?e:""+e).replace(Ex,`
`).replace(Mx,"")}function vi(e,n,s){if(n=Od(n),Od(e)!==n&&s)throw Error(o(425))}function wi(){}var Aa=null,La=null;function za(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $a=typeof setTimeout=="function"?setTimeout:void 0,_x=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,Px=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(e){return Ad.resolve(null).then(e).catch(Dx)}:$a;function Dx(e){setTimeout(function(){throw e})}function Ra(e,n){var s=n,a=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(a===0){e.removeChild(p),Bo(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=p}while(s);Bo(n)}function Rn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ld(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),un="__reactFiber$"+Qr,es="__reactProps$"+Qr,vn="__reactContainer$"+Qr,Fa="__reactEvents$"+Qr,Tx="__reactListeners$"+Qr,Ox="__reactHandles$"+Qr;function ur(e){var n=e[un];if(n)return n;for(var s=e.parentNode;s;){if(n=s[vn]||s[un]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Ld(e);e!==null;){if(s=e[un])return s;e=Ld(e)}return n}e=s,s=e.parentNode}return null}function ts(e){return e=e[un]||e[vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Si(e){return e[es]||null}var Ha=[],Zr=-1;function Fn(e){return{current:e}}function Fe(e){0>Zr||(e.current=Ha[Zr],Ha[Zr]=null,Zr--)}function Le(e,n){Zr++,Ha[Zr]=e.current,e.current=n}var Hn={},ut=Fn(Hn),wt=Fn(!1),cr=Hn;function Jr(e,n){var s=e.type.contextTypes;if(!s)return Hn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in s)p[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=p),p}function St(e){return e=e.childContextTypes,e!=null}function Ni(){Fe(wt),Fe(ut)}function zd(e,n,s){if(ut.current!==Hn)throw Error(o(168));Le(ut,n),Le(wt,s)}function $d(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var p in a)if(!(p in n))throw Error(o(108,le(e)||"Unknown",p));return O({},s,a)}function ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,cr=ut.current,Le(ut,e),Le(wt,wt.current),!0}function Rd(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=$d(e,n,cr),a.__reactInternalMemoizedMergedChildContext=e,Fe(wt),Fe(ut),Le(ut,e)):Fe(wt),Le(wt,s)}var wn=null,ji=!1,Va=!1;function Fd(e){wn===null?wn=[e]:wn.push(e)}function Ax(e){ji=!0,Fd(e)}function Vn(){if(!Va&&wn!==null){Va=!0;var e=0,n=Ae;try{var s=wn;for(Ae=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}wn=null,ji=!1}catch(p){throw wn!==null&&(wn=wn.slice(e+1)),Js(Lo,Vn),p}finally{Ae=n,Va=!1}}return null}var eo=[],to=0,bi=null,Ci=0,Rt=[],Ft=0,dr=null,Sn=1,Nn="";function fr(e,n){eo[to++]=Ci,eo[to++]=bi,bi=e,Ci=n}function Hd(e,n,s){Rt[Ft++]=Sn,Rt[Ft++]=Nn,Rt[Ft++]=dr,dr=e;var a=Sn;e=Nn;var p=32-Et(a)-1;a&=~(1<<p),s+=1;var v=32-Et(n)+p;if(30<v){var I=p-p%5;v=(a&(1<<I)-1).toString(32),a>>=I,p-=I,Sn=1<<32-Et(n)+p|s<<p|a,Nn=v+e}else Sn=1<<v|s<<p|a,Nn=e}function Ba(e){e.return!==null&&(fr(e,1),Hd(e,1,0))}function Wa(e){for(;e===bi;)bi=eo[--to],eo[to]=null,Ci=eo[--to],eo[to]=null;for(;e===dr;)dr=Rt[--Ft],Rt[Ft]=null,Nn=Rt[--Ft],Rt[Ft]=null,Sn=Rt[--Ft],Rt[Ft]=null}var _t=null,Pt=null,Ve=!1,Gt=null;function Vd(e,n){var s=Wt(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Bd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,_t=e,Pt=Rn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,_t=e,Pt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=dr!==null?{id:Sn,overflow:Nn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Wt(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,_t=e,Pt=null,!0):!1;default:return!1}}function Ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ya(e){if(Ve){var n=Pt;if(n){var s=n;if(!Bd(e,n)){if(Ua(e))throw Error(o(418));n=Rn(s.nextSibling);var a=_t;n&&Bd(e,n)?Vd(a,s):(e.flags=e.flags&-4097|2,Ve=!1,_t=e)}}else{if(Ua(e))throw Error(o(418));e.flags=e.flags&-4097|2,Ve=!1,_t=e}}}function Wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function Ii(e){if(e!==_t)return!1;if(!Ve)return Wd(e),Ve=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!za(e.type,e.memoizedProps)),n&&(n=Pt)){if(Ua(e))throw Ud(),Error(o(418));for(;n;)Vd(e,n),n=Rn(n.nextSibling)}if(Wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Pt=Rn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Pt=null}}else Pt=_t?Rn(e.stateNode.nextSibling):null;return!0}function Ud(){for(var e=Pt;e;)e=Rn(e.nextSibling)}function no(){Pt=_t=null,Ve=!1}function Xa(e){Gt===null?Gt=[e]:Gt.push(e)}var Lx=_.ReactCurrentBatchConfig;function ns(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var p=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(I){var F=p.refs;I===null?delete F[v]:F[v]=I},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function Ei(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Yd(e){var n=e._init;return n(e._payload)}function Xd(e){function n(Z,G){if(e){var ne=Z.deletions;ne===null?(Z.deletions=[G],Z.flags|=16):ne.push(G)}}function s(Z,G){if(!e)return null;for(;G!==null;)n(Z,G),G=G.sibling;return null}function a(Z,G){for(Z=new Map;G!==null;)G.key!==null?Z.set(G.key,G):Z.set(G.index,G),G=G.sibling;return Z}function p(Z,G){return Z=Qn(Z,G),Z.index=0,Z.sibling=null,Z}function v(Z,G,ne){return Z.index=ne,e?(ne=Z.alternate,ne!==null?(ne=ne.index,ne<G?(Z.flags|=2,G):ne):(Z.flags|=2,G)):(Z.flags|=1048576,G)}function I(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function F(Z,G,ne,pe){return G===null||G.tag!==6?(G=$u(ne,Z.mode,pe),G.return=Z,G):(G=p(G,ne),G.return=Z,G)}function Y(Z,G,ne,pe){var ke=ne.type;return ke===P?de(Z,G,ne.props.children,pe,ne.key):G!==null&&(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===V&&Yd(ke)===G.type)?(pe=p(G,ne.props),pe.ref=ns(Z,G,ne),pe.return=Z,pe):(pe=Zi(ne.type,ne.key,ne.props,null,Z.mode,pe),pe.ref=ns(Z,G,ne),pe.return=Z,pe)}function re(Z,G,ne,pe){return G===null||G.tag!==4||G.stateNode.containerInfo!==ne.containerInfo||G.stateNode.implementation!==ne.implementation?(G=Ru(ne,Z.mode,pe),G.return=Z,G):(G=p(G,ne.children||[]),G.return=Z,G)}function de(Z,G,ne,pe,ke){return G===null||G.tag!==7?(G=wr(ne,Z.mode,pe,ke),G.return=Z,G):(G=p(G,ne),G.return=Z,G)}function fe(Z,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number")return G=$u(""+G,Z.mode,ne),G.return=Z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return ne=Zi(G.type,G.key,G.props,null,Z.mode,ne),ne.ref=ns(Z,null,G),ne.return=Z,ne;case L:return G=Ru(G,Z.mode,ne),G.return=Z,G;case V:var pe=G._init;return fe(Z,pe(G._payload),ne)}if(Ze(G)||N(G))return G=wr(G,Z.mode,ne,null),G.return=Z,G;Ei(Z,G)}return null}function ue(Z,G,ne,pe){var ke=G!==null?G.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ke!==null?null:F(Z,G,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case A:return ne.key===ke?Y(Z,G,ne,pe):null;case L:return ne.key===ke?re(Z,G,ne,pe):null;case V:return ke=ne._init,ue(Z,G,ke(ne._payload),pe)}if(Ze(ne)||N(ne))return ke!==null?null:de(Z,G,ne,pe,null);Ei(Z,ne)}return null}function ye(Z,G,ne,pe,ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Z=Z.get(ne)||null,F(G,Z,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case A:return Z=Z.get(pe.key===null?ne:pe.key)||null,Y(G,Z,pe,ke);case L:return Z=Z.get(pe.key===null?ne:pe.key)||null,re(G,Z,pe,ke);case V:var Ce=pe._init;return ye(Z,G,ne,Ce(pe._payload),ke)}if(Ze(pe)||N(pe))return Z=Z.get(ne)||null,de(G,Z,pe,ke,null);Ei(G,pe)}return null}function Se(Z,G,ne,pe){for(var ke=null,Ce=null,Ie=G,Ee=G=0,ot=null;Ie!==null&&Ee<ne.length;Ee++){Ie.index>Ee?(ot=Ie,Ie=null):ot=Ie.sibling;var Te=ue(Z,Ie,ne[Ee],pe);if(Te===null){Ie===null&&(Ie=ot);break}e&&Ie&&Te.alternate===null&&n(Z,Ie),G=v(Te,G,Ee),Ce===null?ke=Te:Ce.sibling=Te,Ce=Te,Ie=ot}if(Ee===ne.length)return s(Z,Ie),Ve&&fr(Z,Ee),ke;if(Ie===null){for(;Ee<ne.length;Ee++)Ie=fe(Z,ne[Ee],pe),Ie!==null&&(G=v(Ie,G,Ee),Ce===null?ke=Ie:Ce.sibling=Ie,Ce=Ie);return Ve&&fr(Z,Ee),ke}for(Ie=a(Z,Ie);Ee<ne.length;Ee++)ot=ye(Ie,Z,Ee,ne[Ee],pe),ot!==null&&(e&&ot.alternate!==null&&Ie.delete(ot.key===null?Ee:ot.key),G=v(ot,G,Ee),Ce===null?ke=ot:Ce.sibling=ot,Ce=ot);return e&&Ie.forEach(function(qn){return n(Z,qn)}),Ve&&fr(Z,Ee),ke}function Ne(Z,G,ne,pe){var ke=N(ne);if(typeof ke!="function")throw Error(o(150));if(ne=ke.call(ne),ne==null)throw Error(o(151));for(var Ce=ke=null,Ie=G,Ee=G=0,ot=null,Te=ne.next();Ie!==null&&!Te.done;Ee++,Te=ne.next()){Ie.index>Ee?(ot=Ie,Ie=null):ot=Ie.sibling;var qn=ue(Z,Ie,Te.value,pe);if(qn===null){Ie===null&&(Ie=ot);break}e&&Ie&&qn.alternate===null&&n(Z,Ie),G=v(qn,G,Ee),Ce===null?ke=qn:Ce.sibling=qn,Ce=qn,Ie=ot}if(Te.done)return s(Z,Ie),Ve&&fr(Z,Ee),ke;if(Ie===null){for(;!Te.done;Ee++,Te=ne.next())Te=fe(Z,Te.value,pe),Te!==null&&(G=v(Te,G,Ee),Ce===null?ke=Te:Ce.sibling=Te,Ce=Te);return Ve&&fr(Z,Ee),ke}for(Ie=a(Z,Ie);!Te.done;Ee++,Te=ne.next())Te=ye(Ie,Z,Ee,Te.value,pe),Te!==null&&(e&&Te.alternate!==null&&Ie.delete(Te.key===null?Ee:Te.key),G=v(Te,G,Ee),Ce===null?ke=Te:Ce.sibling=Te,Ce=Te);return e&&Ie.forEach(function(h0){return n(Z,h0)}),Ve&&fr(Z,Ee),ke}function Ge(Z,G,ne,pe){if(typeof ne=="object"&&ne!==null&&ne.type===P&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case A:e:{for(var ke=ne.key,Ce=G;Ce!==null;){if(Ce.key===ke){if(ke=ne.type,ke===P){if(Ce.tag===7){s(Z,Ce.sibling),G=p(Ce,ne.props.children),G.return=Z,Z=G;break e}}else if(Ce.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===V&&Yd(ke)===Ce.type){s(Z,Ce.sibling),G=p(Ce,ne.props),G.ref=ns(Z,Ce,ne),G.return=Z,Z=G;break e}s(Z,Ce);break}else n(Z,Ce);Ce=Ce.sibling}ne.type===P?(G=wr(ne.props.children,Z.mode,pe,ne.key),G.return=Z,Z=G):(pe=Zi(ne.type,ne.key,ne.props,null,Z.mode,pe),pe.ref=ns(Z,G,ne),pe.return=Z,Z=pe)}return I(Z);case L:e:{for(Ce=ne.key;G!==null;){if(G.key===Ce)if(G.tag===4&&G.stateNode.containerInfo===ne.containerInfo&&G.stateNode.implementation===ne.implementation){s(Z,G.sibling),G=p(G,ne.children||[]),G.return=Z,Z=G;break e}else{s(Z,G);break}else n(Z,G);G=G.sibling}G=Ru(ne,Z.mode,pe),G.return=Z,Z=G}return I(Z);case V:return Ce=ne._init,Ge(Z,G,Ce(ne._payload),pe)}if(Ze(ne))return Se(Z,G,ne,pe);if(N(ne))return Ne(Z,G,ne,pe);Ei(Z,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,G!==null&&G.tag===6?(s(Z,G.sibling),G=p(G,ne),G.return=Z,Z=G):(s(Z,G),G=$u(ne,Z.mode,pe),G.return=Z,Z=G),I(Z)):s(Z,G)}return Ge}var ro=Xd(!0),Gd=Xd(!1),Mi=Fn(null),_i=null,oo=null,Ga=null;function Ka(){Ga=oo=_i=null}function Qa(e){var n=Mi.current;Fe(Mi),e._currentValue=n}function qa(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function so(e,n){_i=e,Ga=oo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Nt=!0),e.firstContext=null)}function Ht(e){var n=e._currentValue;if(Ga!==e)if(e={context:e,memoizedValue:n,next:null},oo===null){if(_i===null)throw Error(o(308));oo=e,_i.dependencies={lanes:0,firstContext:e}}else oo=oo.next=e;return n}var pr=null;function Za(e){pr===null?pr=[e]:pr.push(e)}function Kd(e,n,s,a){var p=n.interleaved;return p===null?(s.next=s,Za(n)):(s.next=p.next,p.next=s),n.interleaved=s,kn(e,a)}function kn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Bn=!1;function Ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Wn(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(De&2)!==0){var p=a.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),a.pending=n,kn(e,s)}return p=a.interleaved,p===null?(n.next=n,Za(a)):(n.next=p.next,p.next=n),a.interleaved=n,kn(e,s)}function Pi(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,pa(e,s)}}function qd(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var p=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var I={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?p=v=I:v=v.next=I,s=s.next}while(s!==null);v===null?p=v=n:v=v.next=n}else p=v=n;s={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Di(e,n,s,a){var p=e.updateQueue;Bn=!1;var v=p.firstBaseUpdate,I=p.lastBaseUpdate,F=p.shared.pending;if(F!==null){p.shared.pending=null;var Y=F,re=Y.next;Y.next=null,I===null?v=re:I.next=re,I=Y;var de=e.alternate;de!==null&&(de=de.updateQueue,F=de.lastBaseUpdate,F!==I&&(F===null?de.firstBaseUpdate=re:F.next=re,de.lastBaseUpdate=Y))}if(v!==null){var fe=p.baseState;I=0,de=re=Y=null,F=v;do{var ue=F.lane,ye=F.eventTime;if((a&ue)===ue){de!==null&&(de=de.next={eventTime:ye,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Se=e,Ne=F;switch(ue=n,ye=s,Ne.tag){case 1:if(Se=Ne.payload,typeof Se=="function"){fe=Se.call(ye,fe,ue);break e}fe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ne.payload,ue=typeof Se=="function"?Se.call(ye,fe,ue):Se,ue==null)break e;fe=O({},fe,ue);break e;case 2:Bn=!0}}F.callback!==null&&F.lane!==0&&(e.flags|=64,ue=p.effects,ue===null?p.effects=[F]:ue.push(F))}else ye={eventTime:ye,lane:ue,tag:F.tag,payload:F.payload,callback:F.callback,next:null},de===null?(re=de=ye,Y=fe):de=de.next=ye,I|=ue;if(F=F.next,F===null){if(F=p.shared.pending,F===null)break;ue=F,F=ue.next,ue.next=null,p.lastBaseUpdate=ue,p.shared.pending=null}}while(!0);if(de===null&&(Y=fe),p.baseState=Y,p.firstBaseUpdate=re,p.lastBaseUpdate=de,n=p.shared.interleaved,n!==null){p=n;do I|=p.lane,p=p.next;while(p!==n)}else v===null&&(p.shared.lanes=0);gr|=I,e.lanes=I,e.memoizedState=fe}}function Zd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],p=a.callback;if(p!==null){if(a.callback=null,a=s,typeof p!="function")throw Error(o(191,p));p.call(a)}}}var rs={},cn=Fn(rs),os=Fn(rs),ss=Fn(rs);function mr(e){if(e===rs)throw Error(o(174));return e}function eu(e,n){switch(Le(ss,n),Le(os,e),Le(cn,rs),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:mt(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=mt(n,e)}Fe(cn),Le(cn,n)}function io(){Fe(cn),Fe(os),Fe(ss)}function Jd(e){mr(ss.current);var n=mr(cn.current),s=mt(n,e.type);n!==s&&(Le(os,e),Le(cn,s))}function tu(e){os.current===e&&(Fe(cn),Fe(os))}var Ue=Fn(0);function Ti(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var nu=[];function ru(){for(var e=0;e<nu.length;e++)nu[e]._workInProgressVersionPrimary=null;nu.length=0}var Oi=_.ReactCurrentDispatcher,ou=_.ReactCurrentBatchConfig,hr=0,Ye=null,et=null,nt=null,Ai=!1,is=!1,ls=0,zx=0;function ct(){throw Error(o(321))}function su(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Xt(e[s],n[s]))return!1;return!0}function iu(e,n,s,a,p,v){if(hr=v,Ye=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Oi.current=e===null||e.memoizedState===null?Hx:Vx,e=s(a,p),is){v=0;do{if(is=!1,ls=0,25<=v)throw Error(o(301));v+=1,nt=et=null,n.updateQueue=null,Oi.current=Bx,e=s(a,p)}while(is)}if(Oi.current=$i,n=et!==null&&et.next!==null,hr=0,nt=et=Ye=null,Ai=!1,n)throw Error(o(300));return e}function lu(){var e=ls!==0;return ls=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Ye.memoizedState=nt=e:nt=nt.next=e,nt}function Vt(){if(et===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var n=nt===null?Ye.memoizedState:nt.next;if(n!==null)nt=n,et=e;else{if(e===null)throw Error(o(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},nt===null?Ye.memoizedState=nt=e:nt=nt.next=e}return nt}function as(e,n){return typeof n=="function"?n(e):n}function au(e){var n=Vt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=et,p=a.baseQueue,v=s.pending;if(v!==null){if(p!==null){var I=p.next;p.next=v.next,v.next=I}a.baseQueue=p=v,s.pending=null}if(p!==null){v=p.next,a=a.baseState;var F=I=null,Y=null,re=v;do{var de=re.lane;if((hr&de)===de)Y!==null&&(Y=Y.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),a=re.hasEagerState?re.eagerState:e(a,re.action);else{var fe={lane:de,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};Y===null?(F=Y=fe,I=a):Y=Y.next=fe,Ye.lanes|=de,gr|=de}re=re.next}while(re!==null&&re!==v);Y===null?I=a:Y.next=F,Xt(a,n.memoizedState)||(Nt=!0),n.memoizedState=a,n.baseState=I,n.baseQueue=Y,s.lastRenderedState=a}if(e=s.interleaved,e!==null){p=e;do v=p.lane,Ye.lanes|=v,gr|=v,p=p.next;while(p!==e)}else p===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function uu(e){var n=Vt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,p=s.pending,v=n.memoizedState;if(p!==null){s.pending=null;var I=p=p.next;do v=e(v,I.action),I=I.next;while(I!==p);Xt(v,n.memoizedState)||(Nt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function ef(){}function tf(e,n){var s=Ye,a=Vt(),p=n(),v=!Xt(a.memoizedState,p);if(v&&(a.memoizedState=p,Nt=!0),a=a.queue,cu(of.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||nt!==null&&nt.memoizedState.tag&1){if(s.flags|=2048,us(9,rf.bind(null,s,a,p,n),void 0,null),rt===null)throw Error(o(349));(hr&30)!==0||nf(s,n,p)}return p}function nf(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ye.updateQueue,n===null?(n={lastEffect:null,stores:null},Ye.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function rf(e,n,s,a){n.value=s,n.getSnapshot=a,sf(n)&&lf(e)}function of(e,n,s){return s(function(){sf(n)&&lf(e)})}function sf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Xt(e,s)}catch{return!0}}function lf(e){var n=kn(e,1);n!==null&&Zt(n,e,1,-1)}function af(e){var n=dn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:e},n.queue=e,e=e.dispatch=Fx.bind(null,Ye,e),[n.memoizedState,e]}function us(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Ye.updateQueue,n===null?(n={lastEffect:null,stores:null},Ye.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function uf(){return Vt().memoizedState}function Li(e,n,s,a){var p=dn();Ye.flags|=e,p.memoizedState=us(1|n,s,void 0,a===void 0?null:a)}function zi(e,n,s,a){var p=Vt();a=a===void 0?null:a;var v=void 0;if(et!==null){var I=et.memoizedState;if(v=I.destroy,a!==null&&su(a,I.deps)){p.memoizedState=us(n,s,v,a);return}}Ye.flags|=e,p.memoizedState=us(1|n,s,v,a)}function cf(e,n){return Li(8390656,8,e,n)}function cu(e,n){return zi(2048,8,e,n)}function df(e,n){return zi(4,2,e,n)}function ff(e,n){return zi(4,4,e,n)}function pf(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function mf(e,n,s){return s=s!=null?s.concat([e]):null,zi(4,4,pf.bind(null,n,e),s)}function du(){}function hf(e,n){var s=Vt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&su(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function gf(e,n){var s=Vt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&su(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function xf(e,n,s){return(hr&21)===0?(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=s):(Xt(s,n)||(s=Br(),Ye.lanes|=s,gr|=s,e.baseState=!0),n)}function $x(e,n){var s=Ae;Ae=s!==0&&4>s?s:4,e(!0);var a=ou.transition;ou.transition={};try{e(!1),n()}finally{Ae=s,ou.transition=a}}function yf(){return Vt().memoizedState}function Rx(e,n,s){var a=Gn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},vf(e))wf(n,s);else if(s=Kd(e,n,s,a),s!==null){var p=gt();Zt(s,e,a,p),Sf(s,n,a)}}function Fx(e,n,s){var a=Gn(e),p={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(vf(e))wf(n,p);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var I=n.lastRenderedState,F=v(I,s);if(p.hasEagerState=!0,p.eagerState=F,Xt(F,I)){var Y=n.interleaved;Y===null?(p.next=p,Za(n)):(p.next=Y.next,Y.next=p),n.interleaved=p;return}}catch{}finally{}s=Kd(e,n,p,a),s!==null&&(p=gt(),Zt(s,e,a,p),Sf(s,n,a))}}function vf(e){var n=e.alternate;return e===Ye||n!==null&&n===Ye}function wf(e,n){is=Ai=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Sf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,pa(e,s)}}var $i={readContext:Ht,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Hx={readContext:Ht,useCallback:function(e,n){return dn().memoizedState=[e,n===void 0?null:n],e},useContext:Ht,useEffect:cf,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Li(4194308,4,pf.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Li(4194308,4,e,n)},useInsertionEffect:function(e,n){return Li(4,2,e,n)},useMemo:function(e,n){var s=dn();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=dn();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Rx.bind(null,Ye,e),[a.memoizedState,e]},useRef:function(e){var n=dn();return e={current:e},n.memoizedState=e},useState:af,useDebugValue:du,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=af(!1),n=e[0];return e=$x.bind(null,e[1]),dn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Ye,p=dn();if(Ve){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),rt===null)throw Error(o(349));(hr&30)!==0||nf(a,n,s)}p.memoizedState=s;var v={value:s,getSnapshot:n};return p.queue=v,cf(of.bind(null,a,v,e),[e]),a.flags|=2048,us(9,rf.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=dn(),n=rt.identifierPrefix;if(Ve){var s=Nn,a=Sn;s=(a&~(1<<32-Et(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=ls++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=zx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Vx={readContext:Ht,useCallback:hf,useContext:Ht,useEffect:cu,useImperativeHandle:mf,useInsertionEffect:df,useLayoutEffect:ff,useMemo:gf,useReducer:au,useRef:uf,useState:function(){return au(as)},useDebugValue:du,useDeferredValue:function(e){var n=Vt();return xf(n,et.memoizedState,e)},useTransition:function(){var e=au(as)[0],n=Vt().memoizedState;return[e,n]},useMutableSource:ef,useSyncExternalStore:tf,useId:yf,unstable_isNewReconciler:!1},Bx={readContext:Ht,useCallback:hf,useContext:Ht,useEffect:cu,useImperativeHandle:mf,useInsertionEffect:df,useLayoutEffect:ff,useMemo:gf,useReducer:uu,useRef:uf,useState:function(){return uu(as)},useDebugValue:du,useDeferredValue:function(e){var n=Vt();return et===null?n.memoizedState=e:xf(n,et.memoizedState,e)},useTransition:function(){var e=uu(as)[0],n=Vt().memoizedState;return[e,n]},useMutableSource:ef,useSyncExternalStore:tf,useId:yf,unstable_isNewReconciler:!1};function Kt(e,n){if(e&&e.defaultProps){n=O({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function fu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:O({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ri={isMounted:function(e){return(e=e._reactInternals)?ln(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=gt(),p=Gn(e),v=jn(a,p);v.payload=n,s!=null&&(v.callback=s),n=Wn(e,v,p),n!==null&&(Zt(n,e,p,a),Pi(n,e,p))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=gt(),p=Gn(e),v=jn(a,p);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=Wn(e,v,p),n!==null&&(Zt(n,e,p,a),Pi(n,e,p))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=gt(),a=Gn(e),p=jn(s,a);p.tag=2,n!=null&&(p.callback=n),n=Wn(e,p,a),n!==null&&(Zt(n,e,a,s),Pi(n,e,a))}};function Nf(e,n,s,a,p,v,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,I):n.prototype&&n.prototype.isPureReactComponent?!Ko(s,a)||!Ko(p,v):!0}function kf(e,n,s){var a=!1,p=Hn,v=n.contextType;return typeof v=="object"&&v!==null?v=Ht(v):(p=St(n)?cr:ut.current,a=n.contextTypes,v=(a=a!=null)?Jr(e,p):Hn),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ri,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=v),n}function jf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&Ri.enqueueReplaceState(n,n.state,null)}function pu(e,n,s,a){var p=e.stateNode;p.props=s,p.state=e.memoizedState,p.refs={},Ja(e);var v=n.contextType;typeof v=="object"&&v!==null?p.context=Ht(v):(v=St(n)?cr:ut.current,p.context=Jr(e,v)),p.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(fu(e,n,v,s),p.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&Ri.enqueueReplaceState(p,p.state,null),Di(e,s,p,a),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function lo(e,n){try{var s="",a=n;do s+=Q(a),a=a.return;while(a);var p=s}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:p,digest:null}}function mu(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function hu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Wx=typeof WeakMap=="function"?WeakMap:Map;function bf(e,n,s){s=jn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){Yi||(Yi=!0,_u=a),hu(e,n)},s}function Cf(e,n,s){s=jn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var p=n.value;s.payload=function(){return a(p)},s.callback=function(){hu(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){hu(e,n),typeof a!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var I=n.stack;this.componentDidCatch(n.value,{componentStack:I!==null?I:""})}),s}function If(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Wx;var p=new Set;a.set(n,p)}else p=a.get(n),p===void 0&&(p=new Set,a.set(n,p));p.has(s)||(p.add(s),e=o0.bind(null,e,n,s),n.then(e,e))}function Ef(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Mf(e,n,s,a,p){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=jn(-1,1),n.tag=2,Wn(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var Ux=_.ReactCurrentOwner,Nt=!1;function ht(e,n,s,a){n.child=e===null?Gd(n,null,s,a):ro(n,e.child,s,a)}function _f(e,n,s,a,p){s=s.render;var v=n.ref;return so(n,p),a=iu(e,n,s,a,v,p),s=lu(),e!==null&&!Nt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,bn(e,n,p)):(Ve&&s&&Ba(n),n.flags|=1,ht(e,n,a,p),n.child)}function Pf(e,n,s,a,p){if(e===null){var v=s.type;return typeof v=="function"&&!zu(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,Df(e,n,v,a,p)):(e=Zi(s.type,null,a,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&p)===0){var I=v.memoizedProps;if(s=s.compare,s=s!==null?s:Ko,s(I,a)&&e.ref===n.ref)return bn(e,n,p)}return n.flags|=1,e=Qn(v,a),e.ref=n.ref,e.return=n,n.child=e}function Df(e,n,s,a,p){if(e!==null){var v=e.memoizedProps;if(Ko(v,a)&&e.ref===n.ref)if(Nt=!1,n.pendingProps=a=v,(e.lanes&p)!==0)(e.flags&131072)!==0&&(Nt=!0);else return n.lanes=e.lanes,bn(e,n,p)}return gu(e,n,s,a,p)}function Tf(e,n,s){var a=n.pendingProps,p=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(uo,Dt),Dt|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Le(uo,Dt),Dt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Le(uo,Dt),Dt|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Le(uo,Dt),Dt|=a;return ht(e,n,p,s),n.child}function Of(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function gu(e,n,s,a,p){var v=St(s)?cr:ut.current;return v=Jr(n,v),so(n,p),s=iu(e,n,s,a,v,p),a=lu(),e!==null&&!Nt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,bn(e,n,p)):(Ve&&a&&Ba(n),n.flags|=1,ht(e,n,s,p),n.child)}function Af(e,n,s,a,p){if(St(s)){var v=!0;ki(n)}else v=!1;if(so(n,p),n.stateNode===null)Hi(e,n),kf(n,s,a),pu(n,s,a,p),a=!0;else if(e===null){var I=n.stateNode,F=n.memoizedProps;I.props=F;var Y=I.context,re=s.contextType;typeof re=="object"&&re!==null?re=Ht(re):(re=St(s)?cr:ut.current,re=Jr(n,re));var de=s.getDerivedStateFromProps,fe=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function";fe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(F!==a||Y!==re)&&jf(n,I,a,re),Bn=!1;var ue=n.memoizedState;I.state=ue,Di(n,a,I,p),Y=n.memoizedState,F!==a||ue!==Y||wt.current||Bn?(typeof de=="function"&&(fu(n,s,de,a),Y=n.memoizedState),(F=Bn||Nf(n,s,F,a,ue,Y,re))?(fe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(n.flags|=4194308)):(typeof I.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=Y),I.props=a,I.state=Y,I.context=re,a=F):(typeof I.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{I=n.stateNode,Qd(e,n),F=n.memoizedProps,re=n.type===n.elementType?F:Kt(n.type,F),I.props=re,fe=n.pendingProps,ue=I.context,Y=s.contextType,typeof Y=="object"&&Y!==null?Y=Ht(Y):(Y=St(s)?cr:ut.current,Y=Jr(n,Y));var ye=s.getDerivedStateFromProps;(de=typeof ye=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(F!==fe||ue!==Y)&&jf(n,I,a,Y),Bn=!1,ue=n.memoizedState,I.state=ue,Di(n,a,I,p);var Se=n.memoizedState;F!==fe||ue!==Se||wt.current||Bn?(typeof ye=="function"&&(fu(n,s,ye,a),Se=n.memoizedState),(re=Bn||Nf(n,s,re,a,ue,Se,Y)||!1)?(de||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(a,Se,Y),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(a,Se,Y)),typeof I.componentDidUpdate=="function"&&(n.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof I.componentDidUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(n.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=Se),I.props=a,I.state=Se,I.context=Y,a=re):(typeof I.componentDidUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(n.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&ue===e.memoizedState||(n.flags|=1024),a=!1)}return xu(e,n,s,a,v,p)}function xu(e,n,s,a,p,v){Of(e,n);var I=(n.flags&128)!==0;if(!a&&!I)return p&&Rd(n,s,!1),bn(e,n,v);a=n.stateNode,Ux.current=n;var F=I&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&I?(n.child=ro(n,e.child,null,v),n.child=ro(n,null,F,v)):ht(e,n,F,v),n.memoizedState=a.state,p&&Rd(n,s,!0),n.child}function Lf(e){var n=e.stateNode;n.pendingContext?zd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&zd(e,n.context,!1),eu(e,n.containerInfo)}function zf(e,n,s,a,p){return no(),Xa(p),n.flags|=256,ht(e,n,s,a),n.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function vu(e){return{baseLanes:e,cachePool:null,transitions:null}}function $f(e,n,s){var a=n.pendingProps,p=Ue.current,v=!1,I=(n.flags&128)!==0,F;if((F=I)||(F=e!==null&&e.memoizedState===null?!1:(p&2)!==0),F?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),Le(Ue,p&1),e===null)return Ya(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(I=a.children,e=a.fallback,v?(a=n.mode,v=n.child,I={mode:"hidden",children:I},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=I):v=Ji(I,a,0,null),e=wr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=vu(s),n.memoizedState=yu,e):wu(n,I));if(p=e.memoizedState,p!==null&&(F=p.dehydrated,F!==null))return Yx(e,n,I,a,F,p,s);if(v){v=a.fallback,I=n.mode,p=e.child,F=p.sibling;var Y={mode:"hidden",children:a.children};return(I&1)===0&&n.child!==p?(a=n.child,a.childLanes=0,a.pendingProps=Y,n.deletions=null):(a=Qn(p,Y),a.subtreeFlags=p.subtreeFlags&14680064),F!==null?v=Qn(F,v):(v=wr(v,I,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,I=e.child.memoizedState,I=I===null?vu(s):{baseLanes:I.baseLanes|s,cachePool:null,transitions:I.transitions},v.memoizedState=I,v.childLanes=e.childLanes&~s,n.memoizedState=yu,a}return v=e.child,e=v.sibling,a=Qn(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function wu(e,n){return n=Ji({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Fi(e,n,s,a){return a!==null&&Xa(a),ro(n,e.child,null,s),e=wu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Yx(e,n,s,a,p,v,I){if(s)return n.flags&256?(n.flags&=-257,a=mu(Error(o(422))),Fi(e,n,I,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,p=n.mode,a=Ji({mode:"visible",children:a.children},p,0,null),v=wr(v,p,I,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&ro(n,e.child,null,I),n.child.memoizedState=vu(I),n.memoizedState=yu,v);if((n.mode&1)===0)return Fi(e,n,I,null);if(p.data==="$!"){if(a=p.nextSibling&&p.nextSibling.dataset,a)var F=a.dgst;return a=F,v=Error(o(419)),a=mu(v,a,void 0),Fi(e,n,I,a)}if(F=(I&e.childLanes)!==0,Nt||F){if(a=rt,a!==null){switch(I&-I){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(a.suspendedLanes|I))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,kn(e,p),Zt(a,e,p,-1))}return Lu(),a=mu(Error(o(421))),Fi(e,n,I,a)}return p.data==="$?"?(n.flags|=128,n.child=e.child,n=s0.bind(null,e),p._reactRetry=n,null):(e=v.treeContext,Pt=Rn(p.nextSibling),_t=n,Ve=!0,Gt=null,e!==null&&(Rt[Ft++]=Sn,Rt[Ft++]=Nn,Rt[Ft++]=dr,Sn=e.id,Nn=e.overflow,dr=n),n=wu(n,a.children),n.flags|=4096,n)}function Rf(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),qa(e.return,n,s)}function Su(e,n,s,a,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=p)}function Ff(e,n,s){var a=n.pendingProps,p=a.revealOrder,v=a.tail;if(ht(e,n,a.children,s),a=Ue.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rf(e,s,n);else if(e.tag===19)Rf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Le(Ue,a),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&Ti(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),Su(n,!1,p,s,v);break;case"backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&Ti(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}Su(n,!0,s,null,v);break;case"together":Su(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hi(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function bn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),gr|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Qn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Qn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Xx(e,n,s){switch(n.tag){case 3:Lf(n),no();break;case 5:Jd(n);break;case 1:St(n.type)&&ki(n);break;case 4:eu(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,p=n.memoizedProps.value;Le(Mi,a._currentValue),a._currentValue=p;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Le(Ue,Ue.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?$f(e,n,s):(Le(Ue,Ue.current&1),e=bn(e,n,s),e!==null?e.sibling:null);Le(Ue,Ue.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return Ff(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Le(Ue,Ue.current),a)break;return null;case 22:case 23:return n.lanes=0,Tf(e,n,s)}return bn(e,n,s)}var Hf,Nu,Vf,Bf;Hf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Nu=function(){},Vf=function(e,n,s,a){var p=e.memoizedProps;if(p!==a){e=n.stateNode,mr(cn.current);var v=null;switch(s){case"input":p=he(e,p),a=he(e,a),v=[];break;case"select":p=O({},p,{value:void 0}),a=O({},a,{value:void 0}),v=[];break;case"textarea":p=Lt(e,p),a=Lt(e,a),v=[];break;default:typeof p.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=wi)}Co(s,a);var I;s=null;for(re in p)if(!a.hasOwnProperty(re)&&p.hasOwnProperty(re)&&p[re]!=null)if(re==="style"){var F=p[re];for(I in F)F.hasOwnProperty(I)&&(s||(s={}),s[I]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(l.hasOwnProperty(re)?v||(v=[]):(v=v||[]).push(re,null));for(re in a){var Y=a[re];if(F=p!=null?p[re]:void 0,a.hasOwnProperty(re)&&Y!==F&&(Y!=null||F!=null))if(re==="style")if(F){for(I in F)!F.hasOwnProperty(I)||Y&&Y.hasOwnProperty(I)||(s||(s={}),s[I]="");for(I in Y)Y.hasOwnProperty(I)&&F[I]!==Y[I]&&(s||(s={}),s[I]=Y[I])}else s||(v||(v=[]),v.push(re,s)),s=Y;else re==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,F=F?F.__html:void 0,Y!=null&&F!==Y&&(v=v||[]).push(re,Y)):re==="children"?typeof Y!="string"&&typeof Y!="number"||(v=v||[]).push(re,""+Y):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(l.hasOwnProperty(re)?(Y!=null&&re==="onScroll"&&Re("scroll",e),v||F===Y||(v=[])):(v=v||[]).push(re,Y))}s&&(v=v||[]).push("style",s);var re=v;(n.updateQueue=re)&&(n.flags|=4)}},Bf=function(e,n,s,a){s!==a&&(n.flags|=4)};function cs(e,n){if(!Ve)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function dt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags&14680064,a|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function Gx(e,n,s){var a=n.pendingProps;switch(Wa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(n),null;case 1:return St(n.type)&&Ni(),dt(n),null;case 3:return a=n.stateNode,io(),Fe(wt),Fe(ut),ru(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ii(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Gt!==null&&(Tu(Gt),Gt=null))),Nu(e,n),dt(n),null;case 5:tu(n);var p=mr(ss.current);if(s=n.type,e!==null&&n.stateNode!=null)Vf(e,n,s,a,p),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return dt(n),null}if(e=mr(cn.current),Ii(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[un]=n,a[es]=v,e=(n.mode&1)!==0,s){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(p=0;p<qo.length;p++)Re(qo[p],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":we(a,v),Re("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},Re("invalid",a);break;case"textarea":at(a,v),Re("invalid",a)}Co(s,v),p=null;for(var I in v)if(v.hasOwnProperty(I)){var F=v[I];I==="children"?typeof F=="string"?a.textContent!==F&&(v.suppressHydrationWarning!==!0&&vi(a.textContent,F,e),p=["children",F]):typeof F=="number"&&a.textContent!==""+F&&(v.suppressHydrationWarning!==!0&&vi(a.textContent,F,e),p=["children",""+F]):l.hasOwnProperty(I)&&F!=null&&I==="onScroll"&&Re("scroll",a)}switch(s){case"input":be(a),$e(a,v,!0);break;case"textarea":be(a),pt(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=wi)}a=p,n.updateQueue=a,a!==null&&(n.flags|=4)}else{I=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=It(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=I.createElement(s,{is:a.is}):(e=I.createElement(s),s==="select"&&(I=e,a.multiple?I.multiple=!0:a.size&&(I.size=a.size))):e=I.createElementNS(e,s),e[un]=n,e[es]=a,Hf(e,n,!1,!1),n.stateNode=e;e:{switch(I=Io(s,a),s){case"dialog":Re("cancel",e),Re("close",e),p=a;break;case"iframe":case"object":case"embed":Re("load",e),p=a;break;case"video":case"audio":for(p=0;p<qo.length;p++)Re(qo[p],e);p=a;break;case"source":Re("error",e),p=a;break;case"img":case"image":case"link":Re("error",e),Re("load",e),p=a;break;case"details":Re("toggle",e),p=a;break;case"input":we(e,a),p=he(e,a),Re("invalid",e);break;case"option":p=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},p=O({},a,{value:void 0}),Re("invalid",e);break;case"textarea":at(e,a),p=Lt(e,a),Re("invalid",e);break;default:p=a}Co(s,p),F=p;for(v in F)if(F.hasOwnProperty(v)){var Y=F[v];v==="style"?Ws(e,Y):v==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&zt(e,Y)):v==="children"?typeof Y=="string"?(s!=="textarea"||Y!=="")&&yn(e,Y):typeof Y=="number"&&yn(e,""+Y):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?Y!=null&&v==="onScroll"&&Re("scroll",e):Y!=null&&j(e,v,Y,I))}switch(s){case"input":be(e),$e(e,a,!1);break;case"textarea":be(e),pt(e);break;case"option":a.value!=null&&e.setAttribute("value",""+oe(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?Je(e,!!a.multiple,v,!1):a.defaultValue!=null&&Je(e,!!a.multiple,a.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=wi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return dt(n),null;case 6:if(e&&n.stateNode!=null)Bf(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=mr(ss.current),mr(cn.current),Ii(n)){if(a=n.stateNode,s=n.memoizedProps,a[un]=n,(v=a.nodeValue!==s)&&(e=_t,e!==null))switch(e.tag){case 3:vi(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vi(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[un]=n,n.stateNode=a}return dt(n),null;case 13:if(Fe(Ue),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Pt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Ud(),no(),n.flags|=98560,v=!1;else if(v=Ii(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[un]=n}else no(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;dt(n),v=!1}else Gt!==null&&(Tu(Gt),Gt=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ue.current&1)!==0?tt===0&&(tt=3):Lu())),n.updateQueue!==null&&(n.flags|=4),dt(n),null);case 4:return io(),Nu(e,n),e===null&&Zo(n.stateNode.containerInfo),dt(n),null;case 10:return Qa(n.type._context),dt(n),null;case 17:return St(n.type)&&Ni(),dt(n),null;case 19:if(Fe(Ue),v=n.memoizedState,v===null)return dt(n),null;if(a=(n.flags&128)!==0,I=v.rendering,I===null)if(a)cs(v,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(I=Ti(e),I!==null){for(n.flags|=128,cs(v,!1),a=I.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,e=I.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Le(Ue,Ue.current&1|2),n.child}e=e.sibling}v.tail!==null&&We()>co&&(n.flags|=128,a=!0,cs(v,!1),n.lanes=4194304)}else{if(!a)if(e=Ti(I),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),cs(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!Ve)return dt(n),null}else 2*We()-v.renderingStartTime>co&&s!==1073741824&&(n.flags|=128,a=!0,cs(v,!1),n.lanes=4194304);v.isBackwards?(I.sibling=n.child,n.child=I):(s=v.last,s!==null?s.sibling=I:n.child=I,v.last=I)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=We(),n.sibling=null,s=Ue.current,Le(Ue,a?s&1|2:s&1),n):(dt(n),null);case 22:case 23:return Au(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(Dt&1073741824)!==0&&(dt(n),n.subtreeFlags&6&&(n.flags|=8192)):dt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Kx(e,n){switch(Wa(n),n.tag){case 1:return St(n.type)&&Ni(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return io(),Fe(wt),Fe(ut),ru(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return tu(n),null;case 13:if(Fe(Ue),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));no()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Fe(Ue),null;case 4:return io(),null;case 10:return Qa(n.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var Vi=!1,ft=!1,Qx=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ao(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Xe(e,n,a)}else s.current=null}function ku(e,n,s){try{s()}catch(a){Xe(e,n,a)}}var Wf=!1;function qx(e,n){if(Aa=ai,e=Sd(),Ia(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var p=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var I=0,F=-1,Y=-1,re=0,de=0,fe=e,ue=null;t:for(;;){for(var ye;fe!==s||p!==0&&fe.nodeType!==3||(F=I+p),fe!==v||a!==0&&fe.nodeType!==3||(Y=I+a),fe.nodeType===3&&(I+=fe.nodeValue.length),(ye=fe.firstChild)!==null;)ue=fe,fe=ye;for(;;){if(fe===e)break t;if(ue===s&&++re===p&&(F=I),ue===v&&++de===a&&(Y=I),(ye=fe.nextSibling)!==null)break;fe=ue,ue=fe.parentNode}fe=ye}s=F===-1||Y===-1?null:{start:F,end:Y}}else s=null}s=s||{start:0,end:0}}else s=null;for(La={focusedElem:e,selectionRange:s},ai=!1,ve=n;ve!==null;)if(n=ve,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ve=e;else for(;ve!==null;){n=ve;try{var Se=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ne=Se.memoizedProps,Ge=Se.memoizedState,Z=n.stateNode,G=Z.getSnapshotBeforeUpdate(n.elementType===n.type?Ne:Kt(n.type,Ne),Ge);Z.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var ne=n.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(pe){Xe(n,n.return,pe)}if(e=n.sibling,e!==null){e.return=n.return,ve=e;break}ve=n.return}return Se=Wf,Wf=!1,Se}function ds(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&e)===e){var v=p.destroy;p.destroy=void 0,v!==void 0&&ku(n,s,v)}p=p.next}while(p!==a)}}function Bi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function ju(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Uf(e){var n=e.alternate;n!==null&&(e.alternate=null,Uf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[un],delete n[es],delete n[Fa],delete n[Tx],delete n[Ox])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yf(e){return e.tag===5||e.tag===3||e.tag===4}function Xf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=wi));else if(a!==4&&(e=e.child,e!==null))for(bu(e,n,s),e=e.sibling;e!==null;)bu(e,n,s),e=e.sibling}function Cu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Cu(e,n,s),e=e.sibling;e!==null;)Cu(e,n,s),e=e.sibling}var st=null,Qt=!1;function Un(e,n,s){for(s=s.child;s!==null;)Gf(e,n,s),s=s.sibling}function Gf(e,n,s){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(lr,s)}catch{}switch(s.tag){case 5:ft||ao(s,n);case 6:var a=st,p=Qt;st=null,Un(e,n,s),st=a,Qt=p,st!==null&&(Qt?(e=st,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):st.removeChild(s.stateNode));break;case 18:st!==null&&(Qt?(e=st,s=s.stateNode,e.nodeType===8?Ra(e.parentNode,s):e.nodeType===1&&Ra(e,s),Bo(e)):Ra(st,s.stateNode));break;case 4:a=st,p=Qt,st=s.stateNode.containerInfo,Qt=!0,Un(e,n,s),st=a,Qt=p;break;case 0:case 11:case 14:case 15:if(!ft&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){p=a=a.next;do{var v=p,I=v.destroy;v=v.tag,I!==void 0&&((v&2)!==0||(v&4)!==0)&&ku(s,n,I),p=p.next}while(p!==a)}Un(e,n,s);break;case 1:if(!ft&&(ao(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(F){Xe(s,n,F)}Un(e,n,s);break;case 21:Un(e,n,s);break;case 22:s.mode&1?(ft=(a=ft)||s.memoizedState!==null,Un(e,n,s),ft=a):Un(e,n,s);break;default:Un(e,n,s)}}function Kf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Qx),n.forEach(function(a){var p=i0.bind(null,e,a);s.has(a)||(s.add(a),a.then(p,p))})}}function qt(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var p=s[a];try{var v=e,I=n,F=I;e:for(;F!==null;){switch(F.tag){case 5:st=F.stateNode,Qt=!1;break e;case 3:st=F.stateNode.containerInfo,Qt=!0;break e;case 4:st=F.stateNode.containerInfo,Qt=!0;break e}F=F.return}if(st===null)throw Error(o(160));Gf(v,I,p),st=null,Qt=!1;var Y=p.alternate;Y!==null&&(Y.return=null),p.return=null}catch(re){Xe(p,n,re)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Qf(n,e),n=n.sibling}function Qf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qt(n,e),fn(e),a&4){try{ds(3,e,e.return),Bi(3,e)}catch(Ne){Xe(e,e.return,Ne)}try{ds(5,e,e.return)}catch(Ne){Xe(e,e.return,Ne)}}break;case 1:qt(n,e),fn(e),a&512&&s!==null&&ao(s,s.return);break;case 5:if(qt(n,e),fn(e),a&512&&s!==null&&ao(s,s.return),e.flags&32){var p=e.stateNode;try{yn(p,"")}catch(Ne){Xe(e,e.return,Ne)}}if(a&4&&(p=e.stateNode,p!=null)){var v=e.memoizedProps,I=s!==null?s.memoizedProps:v,F=e.type,Y=e.updateQueue;if(e.updateQueue=null,Y!==null)try{F==="input"&&v.type==="radio"&&v.name!=null&&xe(p,v),Io(F,I);var re=Io(F,v);for(I=0;I<Y.length;I+=2){var de=Y[I],fe=Y[I+1];de==="style"?Ws(p,fe):de==="dangerouslySetInnerHTML"?zt(p,fe):de==="children"?yn(p,fe):j(p,de,fe,re)}switch(F){case"input":Me(p,v);break;case"textarea":vt(p,v);break;case"select":var ue=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var ye=v.value;ye!=null?Je(p,!!v.multiple,ye,!1):ue!==!!v.multiple&&(v.defaultValue!=null?Je(p,!!v.multiple,v.defaultValue,!0):Je(p,!!v.multiple,v.multiple?[]:"",!1))}p[es]=v}catch(Ne){Xe(e,e.return,Ne)}}break;case 6:if(qt(n,e),fn(e),a&4){if(e.stateNode===null)throw Error(o(162));p=e.stateNode,v=e.memoizedProps;try{p.nodeValue=v}catch(Ne){Xe(e,e.return,Ne)}}break;case 3:if(qt(n,e),fn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Bo(n.containerInfo)}catch(Ne){Xe(e,e.return,Ne)}break;case 4:qt(n,e),fn(e);break;case 13:qt(n,e),fn(e),p=e.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Mu=We())),a&4&&Kf(e);break;case 22:if(de=s!==null&&s.memoizedState!==null,e.mode&1?(ft=(re=ft)||de,qt(n,e),ft=re):qt(n,e),fn(e),a&8192){if(re=e.memoizedState!==null,(e.stateNode.isHidden=re)&&!de&&(e.mode&1)!==0)for(ve=e,de=e.child;de!==null;){for(fe=ve=de;ve!==null;){switch(ue=ve,ye=ue.child,ue.tag){case 0:case 11:case 14:case 15:ds(4,ue,ue.return);break;case 1:ao(ue,ue.return);var Se=ue.stateNode;if(typeof Se.componentWillUnmount=="function"){a=ue,s=ue.return;try{n=a,Se.props=n.memoizedProps,Se.state=n.memoizedState,Se.componentWillUnmount()}catch(Ne){Xe(a,s,Ne)}}break;case 5:ao(ue,ue.return);break;case 22:if(ue.memoizedState!==null){Jf(fe);continue}}ye!==null?(ye.return=ue,ve=ye):Jf(fe)}de=de.sibling}e:for(de=null,fe=e;;){if(fe.tag===5){if(de===null){de=fe;try{p=fe.stateNode,re?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(F=fe.stateNode,Y=fe.memoizedProps.style,I=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,F.style.display=Bs("display",I))}catch(Ne){Xe(e,e.return,Ne)}}}else if(fe.tag===6){if(de===null)try{fe.stateNode.nodeValue=re?"":fe.memoizedProps}catch(Ne){Xe(e,e.return,Ne)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===e)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===e)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===e)break e;de===fe&&(de=null),fe=fe.return}de===fe&&(de=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:qt(n,e),fn(e),a&4&&Kf(e);break;case 21:break;default:qt(n,e),fn(e)}}function fn(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Yf(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var p=a.stateNode;a.flags&32&&(yn(p,""),a.flags&=-33);var v=Xf(e);Cu(e,v,p);break;case 3:case 4:var I=a.stateNode.containerInfo,F=Xf(e);bu(e,F,I);break;default:throw Error(o(161))}}catch(Y){Xe(e,e.return,Y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Zx(e,n,s){ve=e,qf(e)}function qf(e,n,s){for(var a=(e.mode&1)!==0;ve!==null;){var p=ve,v=p.child;if(p.tag===22&&a){var I=p.memoizedState!==null||Vi;if(!I){var F=p.alternate,Y=F!==null&&F.memoizedState!==null||ft;F=Vi;var re=ft;if(Vi=I,(ft=Y)&&!re)for(ve=p;ve!==null;)I=ve,Y=I.child,I.tag===22&&I.memoizedState!==null?ep(p):Y!==null?(Y.return=I,ve=Y):ep(p);for(;v!==null;)ve=v,qf(v),v=v.sibling;ve=p,Vi=F,ft=re}Zf(e)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ve=v):Zf(e)}}function Zf(e){for(;ve!==null;){var n=ve;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:ft||Bi(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!ft)if(s===null)a.componentDidMount();else{var p=n.elementType===n.type?s.memoizedProps:Kt(n.type,s.memoizedProps);a.componentDidUpdate(p,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Zd(n,v,a);break;case 3:var I=n.updateQueue;if(I!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Zd(n,I,s)}break;case 5:var F=n.stateNode;if(s===null&&n.flags&4){s=F;var Y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&s.focus();break;case"img":Y.src&&(s.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var re=n.alternate;if(re!==null){var de=re.memoizedState;if(de!==null){var fe=de.dehydrated;fe!==null&&Bo(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ft||n.flags&512&&ju(n)}catch(ue){Xe(n,n.return,ue)}}if(n===e){ve=null;break}if(s=n.sibling,s!==null){s.return=n.return,ve=s;break}ve=n.return}}function Jf(e){for(;ve!==null;){var n=ve;if(n===e){ve=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ve=s;break}ve=n.return}}function ep(e){for(;ve!==null;){var n=ve;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Bi(4,n)}catch(Y){Xe(n,s,Y)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var p=n.return;try{a.componentDidMount()}catch(Y){Xe(n,p,Y)}}var v=n.return;try{ju(n)}catch(Y){Xe(n,v,Y)}break;case 5:var I=n.return;try{ju(n)}catch(Y){Xe(n,I,Y)}}}catch(Y){Xe(n,n.return,Y)}if(n===e){ve=null;break}var F=n.sibling;if(F!==null){F.return=n.return,ve=F;break}ve=n.return}}var Jx=Math.ceil,Wi=_.ReactCurrentDispatcher,Iu=_.ReactCurrentOwner,Bt=_.ReactCurrentBatchConfig,De=0,rt=null,Qe=null,it=0,Dt=0,uo=Fn(0),tt=0,fs=null,gr=0,Ui=0,Eu=0,ps=null,kt=null,Mu=0,co=1/0,Cn=null,Yi=!1,_u=null,Yn=null,Xi=!1,Xn=null,Gi=0,ms=0,Pu=null,Ki=-1,Qi=0;function gt(){return(De&6)!==0?We():Ki!==-1?Ki:Ki=We()}function Gn(e){return(e.mode&1)===0?1:(De&2)!==0&&it!==0?it&-it:Lx.transition!==null?(Qi===0&&(Qi=Br()),Qi):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:td(e.type)),e)}function Zt(e,n,s,a){if(50<ms)throw ms=0,Pu=null,Error(o(185));ar(e,s,a),((De&2)===0||e!==rt)&&(e===rt&&((De&2)===0&&(Ui|=s),tt===4&&Kn(e,it)),jt(e,a),s===1&&De===0&&(n.mode&1)===0&&(co=We()+500,ji&&Vn()))}function jt(e,n){var s=e.callbackNode;fa(e,n);var a=Vr(e,e===rt?it:0);if(a===0)s!==null&&ei(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&ei(s),n===1)e.tag===0?Ax(np.bind(null,e)):Fd(np.bind(null,e)),Px(function(){(De&6)===0&&Vn()}),s=null;else{switch(Xc(a)){case 1:s=Lo;break;case 4:s=ni;break;case 16:s=Rr;break;case 536870912:s=ri;break;default:s=Rr}s=cp(s,tp.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function tp(e,n){if(Ki=-1,Qi=0,(De&6)!==0)throw Error(o(327));var s=e.callbackNode;if(fo()&&e.callbackNode!==s)return null;var a=Vr(e,e===rt?it:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=qi(e,a);else{n=a;var p=De;De|=2;var v=op();(rt!==e||it!==n)&&(Cn=null,co=We()+500,yr(e,n));do try{n0();break}catch(F){rp(e,F)}while(!0);Ka(),Wi.current=v,De=p,Qe!==null?n=0:(rt=null,it=0,n=tt)}if(n!==0){if(n===2&&(p=zo(e),p!==0&&(a=p,n=Du(e,p))),n===1)throw s=fs,yr(e,0),Kn(e,a),jt(e,We()),s;if(n===6)Kn(e,a);else{if(p=e.current.alternate,(a&30)===0&&!e0(p)&&(n=qi(e,a),n===2&&(v=zo(e),v!==0&&(a=v,n=Du(e,v))),n===1))throw s=fs,yr(e,0),Kn(e,a),jt(e,We()),s;switch(e.finishedWork=p,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:vr(e,kt,Cn);break;case 3:if(Kn(e,a),(a&130023424)===a&&(n=Mu+500-We(),10<n)){if(Vr(e,0)!==0)break;if(p=e.suspendedLanes,(p&a)!==a){gt(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=$a(vr.bind(null,e,kt,Cn),n);break}vr(e,kt,Cn);break;case 4:if(Kn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,p=-1;0<a;){var I=31-Et(a);v=1<<I,I=n[I],I>p&&(p=I),a&=~v}if(a=p,a=We()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Jx(a/1960))-a,10<a){e.timeoutHandle=$a(vr.bind(null,e,kt,Cn),a);break}vr(e,kt,Cn);break;case 5:vr(e,kt,Cn);break;default:throw Error(o(329))}}}return jt(e,We()),e.callbackNode===s?tp.bind(null,e):null}function Du(e,n){var s=ps;return e.current.memoizedState.isDehydrated&&(yr(e,n).flags|=256),e=qi(e,n),e!==2&&(n=kt,kt=s,n!==null&&Tu(n)),e}function Tu(e){kt===null?kt=e:kt.push.apply(kt,e)}function e0(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var p=s[a],v=p.getSnapshot;p=p.value;try{if(!Xt(v(),p))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Kn(e,n){for(n&=~Eu,n&=~Ui,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Et(n),a=1<<s;e[s]=-1,n&=~a}}function np(e){if((De&6)!==0)throw Error(o(327));fo();var n=Vr(e,0);if((n&1)===0)return jt(e,We()),null;var s=qi(e,n);if(e.tag!==0&&s===2){var a=zo(e);a!==0&&(n=a,s=Du(e,a))}if(s===1)throw s=fs,yr(e,0),Kn(e,n),jt(e,We()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,vr(e,kt,Cn),jt(e,We()),null}function Ou(e,n){var s=De;De|=1;try{return e(n)}finally{De=s,De===0&&(co=We()+500,ji&&Vn())}}function xr(e){Xn!==null&&Xn.tag===0&&(De&6)===0&&fo();var n=De;De|=1;var s=Bt.transition,a=Ae;try{if(Bt.transition=null,Ae=1,e)return e()}finally{Ae=a,Bt.transition=s,De=n,(De&6)===0&&Vn()}}function Au(){Dt=uo.current,Fe(uo)}function yr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,_x(s)),Qe!==null)for(s=Qe.return;s!==null;){var a=s;switch(Wa(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ni();break;case 3:io(),Fe(wt),Fe(ut),ru();break;case 5:tu(a);break;case 4:io();break;case 13:Fe(Ue);break;case 19:Fe(Ue);break;case 10:Qa(a.type._context);break;case 22:case 23:Au()}s=s.return}if(rt=e,Qe=e=Qn(e.current,null),it=Dt=n,tt=0,fs=null,Eu=Ui=gr=0,kt=ps=null,pr!==null){for(n=0;n<pr.length;n++)if(s=pr[n],a=s.interleaved,a!==null){s.interleaved=null;var p=a.next,v=s.pending;if(v!==null){var I=v.next;v.next=p,a.next=I}s.pending=a}pr=null}return e}function rp(e,n){do{var s=Qe;try{if(Ka(),Oi.current=$i,Ai){for(var a=Ye.memoizedState;a!==null;){var p=a.queue;p!==null&&(p.pending=null),a=a.next}Ai=!1}if(hr=0,nt=et=Ye=null,is=!1,ls=0,Iu.current=null,s===null||s.return===null){tt=1,fs=n,Qe=null;break}e:{var v=e,I=s.return,F=s,Y=n;if(n=it,F.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var re=Y,de=F,fe=de.tag;if((de.mode&1)===0&&(fe===0||fe===11||fe===15)){var ue=de.alternate;ue?(de.updateQueue=ue.updateQueue,de.memoizedState=ue.memoizedState,de.lanes=ue.lanes):(de.updateQueue=null,de.memoizedState=null)}var ye=Ef(I);if(ye!==null){ye.flags&=-257,Mf(ye,I,F,v,n),ye.mode&1&&If(v,re,n),n=ye,Y=re;var Se=n.updateQueue;if(Se===null){var Ne=new Set;Ne.add(Y),n.updateQueue=Ne}else Se.add(Y);break e}else{if((n&1)===0){If(v,re,n),Lu();break e}Y=Error(o(426))}}else if(Ve&&F.mode&1){var Ge=Ef(I);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Mf(Ge,I,F,v,n),Xa(lo(Y,F));break e}}v=Y=lo(Y,F),tt!==4&&(tt=2),ps===null?ps=[v]:ps.push(v),v=I;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var Z=bf(v,Y,n);qd(v,Z);break e;case 1:F=Y;var G=v.type,ne=v.stateNode;if((v.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Yn===null||!Yn.has(ne)))){v.flags|=65536,n&=-n,v.lanes|=n;var pe=Cf(v,F,n);qd(v,pe);break e}}v=v.return}while(v!==null)}ip(s)}catch(ke){n=ke,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(!0)}function op(){var e=Wi.current;return Wi.current=$i,e===null?$i:e}function Lu(){(tt===0||tt===3||tt===2)&&(tt=4),rt===null||(gr&268435455)===0&&(Ui&268435455)===0||Kn(rt,it)}function qi(e,n){var s=De;De|=2;var a=op();(rt!==e||it!==n)&&(Cn=null,yr(e,n));do try{t0();break}catch(p){rp(e,p)}while(!0);if(Ka(),De=s,Wi.current=a,Qe!==null)throw Error(o(261));return rt=null,it=0,tt}function t0(){for(;Qe!==null;)sp(Qe)}function n0(){for(;Qe!==null&&!sa();)sp(Qe)}function sp(e){var n=up(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,n===null?ip(e):Qe=n,Iu.current=null}function ip(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Gx(s,n,Dt),s!==null){Qe=s;return}}else{if(s=Kx(s,n),s!==null){s.flags&=32767,Qe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Qe=null;return}}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);tt===0&&(tt=5)}function vr(e,n,s){var a=Ae,p=Bt.transition;try{Bt.transition=null,Ae=1,r0(e,n,s,a)}finally{Bt.transition=p,Ae=a}return null}function r0(e,n,s,a){do fo();while(Xn!==null);if((De&6)!==0)throw Error(o(327));s=e.finishedWork;var p=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(si(e,v),e===rt&&(Qe=rt=null,it=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Xi||(Xi=!0,cp(Rr,function(){return fo(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Bt.transition,Bt.transition=null;var I=Ae;Ae=1;var F=De;De|=4,Iu.current=null,qx(e,s),Qf(s,e),kx(La),ai=!!Aa,La=Aa=null,e.current=s,Zx(s),ti(),De=F,Ae=I,Bt.transition=v}else e.current=s;if(Xi&&(Xi=!1,Xn=e,Gi=p),v=e.pendingLanes,v===0&&(Yn=null),aa(s.stateNode),jt(e,We()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)p=n[s],a(p.value,{componentStack:p.stack,digest:p.digest});if(Yi)throw Yi=!1,e=_u,_u=null,e;return(Gi&1)!==0&&e.tag!==0&&fo(),v=e.pendingLanes,(v&1)!==0?e===Pu?ms++:(ms=0,Pu=e):ms=0,Vn(),null}function fo(){if(Xn!==null){var e=Xc(Gi),n=Bt.transition,s=Ae;try{if(Bt.transition=null,Ae=16>e?16:e,Xn===null)var a=!1;else{if(e=Xn,Xn=null,Gi=0,(De&6)!==0)throw Error(o(331));var p=De;for(De|=4,ve=e.current;ve!==null;){var v=ve,I=v.child;if((ve.flags&16)!==0){var F=v.deletions;if(F!==null){for(var Y=0;Y<F.length;Y++){var re=F[Y];for(ve=re;ve!==null;){var de=ve;switch(de.tag){case 0:case 11:case 15:ds(8,de,v)}var fe=de.child;if(fe!==null)fe.return=de,ve=fe;else for(;ve!==null;){de=ve;var ue=de.sibling,ye=de.return;if(Uf(de),de===re){ve=null;break}if(ue!==null){ue.return=ye,ve=ue;break}ve=ye}}}var Se=v.alternate;if(Se!==null){var Ne=Se.child;if(Ne!==null){Se.child=null;do{var Ge=Ne.sibling;Ne.sibling=null,Ne=Ge}while(Ne!==null)}}ve=v}}if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,ve=I;else e:for(;ve!==null;){if(v=ve,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ds(9,v,v.return)}var Z=v.sibling;if(Z!==null){Z.return=v.return,ve=Z;break e}ve=v.return}}var G=e.current;for(ve=G;ve!==null;){I=ve;var ne=I.child;if((I.subtreeFlags&2064)!==0&&ne!==null)ne.return=I,ve=ne;else e:for(I=G;ve!==null;){if(F=ve,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Bi(9,F)}}catch(ke){Xe(F,F.return,ke)}if(F===I){ve=null;break e}var pe=F.sibling;if(pe!==null){pe.return=F.return,ve=pe;break e}ve=F.return}}if(De=p,Vn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(lr,e)}catch{}a=!0}return a}finally{Ae=s,Bt.transition=n}}return!1}function lp(e,n,s){n=lo(s,n),n=bf(e,n,1),e=Wn(e,n,1),n=gt(),e!==null&&(ar(e,1,n),jt(e,n))}function Xe(e,n,s){if(e.tag===3)lp(e,e,s);else for(;n!==null;){if(n.tag===3){lp(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Yn===null||!Yn.has(a))){e=lo(s,e),e=Cf(n,e,1),n=Wn(n,e,1),e=gt(),n!==null&&(ar(n,1,e),jt(n,e));break}}n=n.return}}function o0(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=gt(),e.pingedLanes|=e.suspendedLanes&s,rt===e&&(it&s)===s&&(tt===4||tt===3&&(it&130023424)===it&&500>We()-Mu?yr(e,0):Eu|=s),jt(e,n)}function ap(e,n){n===0&&((e.mode&1)===0?n=1:(n=Hr,Hr<<=1,(Hr&130023424)===0&&(Hr=4194304)));var s=gt();e=kn(e,n),e!==null&&(ar(e,n,s),jt(e,s))}function s0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),ap(e,s)}function i0(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),ap(e,s)}var up;up=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||wt.current)Nt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return Nt=!1,Xx(e,n,s);Nt=(e.flags&131072)!==0}else Nt=!1,Ve&&(n.flags&1048576)!==0&&Hd(n,Ci,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Hi(e,n),e=n.pendingProps;var p=Jr(n,ut.current);so(n,s),p=iu(null,n,a,e,p,s);var v=lu();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,St(a)?(v=!0,ki(n)):v=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ja(n),p.updater=Ri,n.stateNode=p,p._reactInternals=n,pu(n,a,e,s),n=xu(null,n,a,!0,v,s)):(n.tag=0,Ve&&v&&Ba(n),ht(null,n,p,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Hi(e,n),e=n.pendingProps,p=a._init,a=p(a._payload),n.type=a,p=n.tag=a0(a),e=Kt(a,e),p){case 0:n=gu(null,n,a,e,s);break e;case 1:n=Af(null,n,a,e,s);break e;case 11:n=_f(null,n,a,e,s);break e;case 14:n=Pf(null,n,a,Kt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Kt(a,p),gu(e,n,a,p,s);case 1:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Kt(a,p),Af(e,n,a,p,s);case 3:e:{if(Lf(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,p=v.element,Qd(e,n),Di(n,a,null,s);var I=n.memoizedState;if(a=I.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){p=lo(Error(o(423)),n),n=zf(e,n,a,s,p);break e}else if(a!==p){p=lo(Error(o(424)),n),n=zf(e,n,a,s,p);break e}else for(Pt=Rn(n.stateNode.containerInfo.firstChild),_t=n,Ve=!0,Gt=null,s=Gd(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(no(),a===p){n=bn(e,n,s);break e}ht(e,n,a,s)}n=n.child}return n;case 5:return Jd(n),e===null&&Ya(n),a=n.type,p=n.pendingProps,v=e!==null?e.memoizedProps:null,I=p.children,za(a,p)?I=null:v!==null&&za(a,v)&&(n.flags|=32),Of(e,n),ht(e,n,I,s),n.child;case 6:return e===null&&Ya(n),null;case 13:return $f(e,n,s);case 4:return eu(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=ro(n,null,a,s):ht(e,n,a,s),n.child;case 11:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Kt(a,p),_f(e,n,a,p,s);case 7:return ht(e,n,n.pendingProps,s),n.child;case 8:return ht(e,n,n.pendingProps.children,s),n.child;case 12:return ht(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,p=n.pendingProps,v=n.memoizedProps,I=p.value,Le(Mi,a._currentValue),a._currentValue=I,v!==null)if(Xt(v.value,I)){if(v.children===p.children&&!wt.current){n=bn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var F=v.dependencies;if(F!==null){I=v.child;for(var Y=F.firstContext;Y!==null;){if(Y.context===a){if(v.tag===1){Y=jn(-1,s&-s),Y.tag=2;var re=v.updateQueue;if(re!==null){re=re.shared;var de=re.pending;de===null?Y.next=Y:(Y.next=de.next,de.next=Y),re.pending=Y}}v.lanes|=s,Y=v.alternate,Y!==null&&(Y.lanes|=s),qa(v.return,s,n),F.lanes|=s;break}Y=Y.next}}else if(v.tag===10)I=v.type===n.type?null:v.child;else if(v.tag===18){if(I=v.return,I===null)throw Error(o(341));I.lanes|=s,F=I.alternate,F!==null&&(F.lanes|=s),qa(I,s,n),I=v.sibling}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===n){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}ht(e,n,p.children,s),n=n.child}return n;case 9:return p=n.type,a=n.pendingProps.children,so(n,s),p=Ht(p),a=a(p),n.flags|=1,ht(e,n,a,s),n.child;case 14:return a=n.type,p=Kt(a,n.pendingProps),p=Kt(a.type,p),Pf(e,n,a,p,s);case 15:return Df(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,p=n.pendingProps,p=n.elementType===a?p:Kt(a,p),Hi(e,n),n.tag=1,St(a)?(e=!0,ki(n)):e=!1,so(n,s),kf(n,a,p),pu(n,a,p,s),xu(null,n,a,!0,e,s);case 19:return Ff(e,n,s);case 22:return Tf(e,n,s)}throw Error(o(156,n.tag))};function cp(e,n){return Js(e,n)}function l0(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,n,s,a){return new l0(e,n,s,a)}function zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a0(e){if(typeof e=="function")return zu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===M)return 11;if(e===W)return 14}return 2}function Qn(e,n){var s=e.alternate;return s===null?(s=Wt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Zi(e,n,s,a,p,v){var I=2;if(a=e,typeof e=="function")zu(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case P:return wr(s.children,p,v,n);case U:I=8,p|=8;break;case K:return e=Wt(12,s,n,p|2),e.elementType=K,e.lanes=v,e;case X:return e=Wt(13,s,n,p),e.elementType=X,e.lanes=v,e;case R:return e=Wt(19,s,n,p),e.elementType=R,e.lanes=v,e;case H:return Ji(s,p,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case se:I=10;break e;case B:I=9;break e;case M:I=11;break e;case W:I=14;break e;case V:I=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Wt(I,s,n,p),n.elementType=e,n.type=a,n.lanes=v,n}function wr(e,n,s,a){return e=Wt(7,e,a,n),e.lanes=s,e}function Ji(e,n,s,a){return e=Wt(22,e,a,n),e.elementType=H,e.lanes=s,e.stateNode={isHidden:!1},e}function $u(e,n,s){return e=Wt(6,e,null,n),e.lanes=s,e}function Ru(e,n,s){return n=Wt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function u0(e,n,s,a,p){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$o(0),this.expirationTimes=$o(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$o(0),this.identifierPrefix=a,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Fu(e,n,s,a,p,v,I,F,Y){return e=new u0(e,n,s,F,Y),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Wt(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ja(v),e}function c0(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function dp(e){if(!e)return Hn;e=e._reactInternals;e:{if(ln(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(St(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(St(s))return $d(e,s,n)}return n}function fp(e,n,s,a,p,v,I,F,Y){return e=Fu(s,a,!0,e,p,v,I,F,Y),e.context=dp(null),s=e.current,a=gt(),p=Gn(s),v=jn(a,p),v.callback=n??null,Wn(s,v,p),e.current.lanes=p,ar(e,p,a),jt(e,a),e}function el(e,n,s,a){var p=n.current,v=gt(),I=Gn(p);return s=dp(s),n.context===null?n.context=s:n.pendingContext=s,n=jn(v,I),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Wn(p,n,I),e!==null&&(Zt(e,p,I,v),Pi(e,p,I)),I}function tl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Hu(e,n){pp(e,n),(e=e.alternate)&&pp(e,n)}function d0(){return null}var mp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}nl.prototype.render=Vu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));el(e,n,null,null)},nl.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;xr(function(){el(null,e,null,null)}),n[vn]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Qc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ln.length&&n!==0&&n<Ln[s].priority;s++);Ln.splice(s,0,e),s===0&&Jc(e)}};function Bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hp(){}function f0(e,n,s,a,p){if(p){if(typeof a=="function"){var v=a;a=function(){var re=tl(I);v.call(re)}}var I=fp(n,a,e,0,null,!1,!1,"",hp);return e._reactRootContainer=I,e[vn]=I.current,Zo(e.nodeType===8?e.parentNode:e),xr(),I}for(;p=e.lastChild;)e.removeChild(p);if(typeof a=="function"){var F=a;a=function(){var re=tl(Y);F.call(re)}}var Y=Fu(e,0,!1,null,null,!1,!1,"",hp);return e._reactRootContainer=Y,e[vn]=Y.current,Zo(e.nodeType===8?e.parentNode:e),xr(function(){el(n,Y,s,a)}),Y}function ol(e,n,s,a,p){var v=s._reactRootContainer;if(v){var I=v;if(typeof p=="function"){var F=p;p=function(){var Y=tl(I);F.call(Y)}}el(n,I,e,p)}else I=f0(s,n,e,p,a);return tl(I)}Gc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=an(n.pendingLanes);s!==0&&(pa(n,s|1),jt(n,We()),(De&6)===0&&(co=We()+500,Vn()))}break;case 13:xr(function(){var a=kn(e,1);if(a!==null){var p=gt();Zt(a,e,1,p)}}),Hu(e,1)}},ma=function(e){if(e.tag===13){var n=kn(e,134217728);if(n!==null){var s=gt();Zt(n,e,134217728,s)}Hu(e,134217728)}},Kc=function(e){if(e.tag===13){var n=Gn(e),s=kn(e,n);if(s!==null){var a=gt();Zt(s,e,n,a)}Hu(e,n)}},Qc=function(){return Ae},qc=function(e,n){var s=Ae;try{return Ae=e,n()}finally{Ae=s}},_o=function(e,n,s){switch(n){case"input":if(Me(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var p=Si(a);if(!p)throw Error(o(90));q(a),Me(a,p)}}}break;case"textarea":vt(e,s);break;case"select":n=s.value,n!=null&&Je(e,!!s.multiple,n,!1)}},Gs=Ou,Ks=xr;var p0={usingClientEntryPoint:!1,Events:[ts,qr,Si,Ys,Xs,Ou]},hs={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m0={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qs(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||d0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{lr=sl.inject(m0),$t=sl}catch{}}return bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p0,bt.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(n))throw Error(o(200));return c0(e,n,null,s)},bt.createRoot=function(e,n){if(!Bu(e))throw Error(o(299));var s=!1,a="",p=mp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=Fu(e,1,!1,null,null,s,!1,a,p),e[vn]=n.current,Zo(e.nodeType===8?e.parentNode:e),new Vu(n)},bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=qs(n),e=e===null?null:e.stateNode,e},bt.flushSync=function(e){return xr(e)},bt.hydrate=function(e,n,s){if(!rl(n))throw Error(o(200));return ol(null,e,n,!0,s)},bt.hydrateRoot=function(e,n,s){if(!Bu(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,p=!1,v="",I=mp;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(I=s.onRecoverableError)),n=fp(n,null,e,1,s??null,p,!1,v,I),e[vn]=n.current,Zo(e),a)for(e=0;e<a.length;e++)s=a[e],p=s._getVersion,p=p(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,p]:n.mutableSourceEagerHydrationData.push(s,p);return new nl(n)},bt.render=function(e,n,s){if(!rl(n))throw Error(o(200));return ol(null,e,n,!1,s)},bt.unmountComponentAtNode=function(e){if(!rl(e))throw Error(o(40));return e._reactRootContainer?(xr(function(){ol(null,null,e,!1,function(){e._reactRootContainer=null,e[vn]=null})}),!0):!1},bt.unstable_batchedUpdates=Ou,bt.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!rl(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return ol(e,n,s,!1,a)},bt.version="18.3.1-next-f1338f8080-20240426",bt}var kp;function Bm(){if(kp)return Yu.exports;kp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Yu.exports=S0(),Yu.exports}var jp;function N0(){if(jp)return il;jp=1;var t=Bm();return il.createRoot=t.createRoot,il.hydrateRoot=t.hydrateRoot,il}var k0=N0();function qe(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=qe(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var j0={value:()=>{}};function $l(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new wl(o)}function wl(t){this._=t}function b0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}wl.prototype=$l.prototype={constructor:wl,on:function(t,r){var o=this._,i=b0(t+"",o),l,c=-1,d=i.length;if(arguments.length<2){for(;++c<d;)if((l=(t=i[c]).type)&&(l=C0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++c<d;)if(l=(t=i[c]).type)o[l]=bp(o[l],t.name,r);else if(r==null)for(l in o)o[l]=bp(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new wl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,c;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],i=0,l=c.length;i<l;++i)c[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,c=i.length;l<c;++l)i[l].value.apply(r,o)}};function C0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function bp(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=j0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var uc="http://www.w3.org/1999/xhtml";const Cp={svg:"http://www.w3.org/2000/svg",xhtml:uc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rl(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),Cp.hasOwnProperty(r)?{space:Cp[r],local:t}:t}function I0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===uc&&r.documentElement.namespaceURI===uc?r.createElement(t):r.createElementNS(o,t)}}function E0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wm(t){var r=Rl(t);return(r.local?E0:I0)(r)}function M0(){}function Ic(t){return t==null?M0:function(){return this.querySelector(t)}}function _0(t){typeof t!="function"&&(t=Ic(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=new Array(d),g,h,x=0;x<d;++x)(g=c[x])&&(h=t.call(g,g.__data__,x,c))&&("__data__"in g&&(h.__data__=g.__data__),f[x]=h);return new At(i,this._parents)}function P0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function D0(){return[]}function Um(t){return t==null?D0:function(){return this.querySelectorAll(t)}}function T0(t){return function(){return P0(t.apply(this,arguments))}}function O0(t){typeof t=="function"?t=T0(t):t=Um(t);for(var r=this._groups,o=r.length,i=[],l=[],c=0;c<o;++c)for(var d=r[c],f=d.length,g,h=0;h<f;++h)(g=d[h])&&(i.push(t.call(g,g.__data__,h,d)),l.push(g));return new At(i,l)}function Ym(t){return function(){return this.matches(t)}}function Xm(t){return function(r){return r.matches(t)}}var A0=Array.prototype.find;function L0(t){return function(){return A0.call(this.children,t)}}function z0(){return this.firstElementChild}function $0(t){return this.select(t==null?z0:L0(typeof t=="function"?t:Xm(t)))}var R0=Array.prototype.filter;function F0(){return Array.from(this.children)}function H0(t){return function(){return R0.call(this.children,t)}}function V0(t){return this.selectAll(t==null?F0:H0(typeof t=="function"?t:Xm(t)))}function B0(t){typeof t!="function"&&(t=Ym(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],g,h=0;h<d;++h)(g=c[h])&&t.call(g,g.__data__,h,c)&&f.push(g);return new At(i,this._parents)}function Gm(t){return new Array(t.length)}function W0(){return new At(this._enter||this._groups.map(Gm),this._parents)}function Cl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}Cl.prototype={constructor:Cl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function U0(t){return function(){return t}}function Y0(t,r,o,i,l,c){for(var d=0,f,g=r.length,h=c.length;d<h;++d)(f=r[d])?(f.__data__=c[d],i[d]=f):o[d]=new Cl(t,c[d]);for(;d<g;++d)(f=r[d])&&(l[d]=f)}function X0(t,r,o,i,l,c,d){var f,g,h=new Map,x=r.length,m=c.length,y=new Array(x),w;for(f=0;f<x;++f)(g=r[f])&&(y[f]=w=d.call(g,g.__data__,f,r)+"",h.has(w)?l[f]=g:h.set(w,g));for(f=0;f<m;++f)w=d.call(t,c[f],f,c)+"",(g=h.get(w))?(i[f]=g,g.__data__=c[f],h.delete(w)):o[f]=new Cl(t,c[f]);for(f=0;f<x;++f)(g=r[f])&&h.get(y[f])===g&&(l[f]=g)}function G0(t){return t.__data__}function K0(t,r){if(!arguments.length)return Array.from(this,G0);var o=r?X0:Y0,i=this._parents,l=this._groups;typeof t!="function"&&(t=U0(t));for(var c=l.length,d=new Array(c),f=new Array(c),g=new Array(c),h=0;h<c;++h){var x=i[h],m=l[h],y=m.length,w=Q0(t.call(x,x&&x.__data__,h,i)),S=w.length,C=f[h]=new Array(S),k=d[h]=new Array(S),b=g[h]=new Array(y);o(x,m,C,k,b,w,r);for(var T=0,j=0,_,A;T<S;++T)if(_=C[T]){for(T>=j&&(j=T+1);!(A=k[j])&&++j<S;);_._next=A||null}}return d=new At(d,i),d._enter=f,d._exit=g,d}function Q0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function q0(){return new At(this._exit||this._groups.map(Gm),this._parents)}function Z0(t,r,o){var i=this.enter(),l=this,c=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?c.remove():o(c),i&&l?i.merge(l).order():l}function J0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,c=i.length,d=Math.min(l,c),f=new Array(l),g=0;g<d;++g)for(var h=o[g],x=i[g],m=h.length,y=f[g]=new Array(m),w,S=0;S<m;++S)(w=h[S]||x[S])&&(y[S]=w);for(;g<l;++g)f[g]=o[g];return new At(f,this._parents)}function ey(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,c=i[l],d;--l>=0;)(d=i[l])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function ty(t){t||(t=ny);function r(m,y){return m&&y?t(m.__data__,y.__data__):!m-!y}for(var o=this._groups,i=o.length,l=new Array(i),c=0;c<i;++c){for(var d=o[c],f=d.length,g=l[c]=new Array(f),h,x=0;x<f;++x)(h=d[x])&&(g[x]=h);g.sort(r)}return new At(l,this._parents).order()}function ny(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function ry(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oy(){return Array.from(this)}function sy(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length;l<c;++l){var d=i[l];if(d)return d}return null}function iy(){let t=0;for(const r of this)++t;return t}function ly(){return!this.node()}function ay(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],c=0,d=l.length,f;c<d;++c)(f=l[c])&&t.call(f,f.__data__,c,l);return this}function uy(t){return function(){this.removeAttribute(t)}}function cy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dy(t,r){return function(){this.setAttribute(t,r)}}function fy(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function py(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function my(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function hy(t,r){var o=Rl(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?cy:uy:typeof r=="function"?o.local?my:py:o.local?fy:dy)(o,r))}function Km(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gy(t){return function(){this.style.removeProperty(t)}}function xy(t,r,o){return function(){this.style.setProperty(t,r,o)}}function yy(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function vy(t,r,o){return arguments.length>1?this.each((r==null?gy:typeof r=="function"?yy:xy)(t,r,o??"")):vo(this.node(),t)}function vo(t,r){return t.style.getPropertyValue(r)||Km(t).getComputedStyle(t,null).getPropertyValue(r)}function wy(t){return function(){delete this[t]}}function Sy(t,r){return function(){this[t]=r}}function Ny(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function ky(t,r){return arguments.length>1?this.each((r==null?wy:typeof r=="function"?Ny:Sy)(t,r)):this.node()[t]}function Qm(t){return t.trim().split(/^|\s+/)}function Ec(t){return t.classList||new qm(t)}function qm(t){this._node=t,this._names=Qm(t.getAttribute("class")||"")}qm.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Zm(t,r){for(var o=Ec(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function Jm(t,r){for(var o=Ec(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function jy(t){return function(){Zm(this,t)}}function by(t){return function(){Jm(this,t)}}function Cy(t,r){return function(){(r.apply(this,arguments)?Zm:Jm)(this,t)}}function Iy(t,r){var o=Qm(t+"");if(arguments.length<2){for(var i=Ec(this.node()),l=-1,c=o.length;++l<c;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?Cy:r?jy:by)(o,r))}function Ey(){this.textContent=""}function My(t){return function(){this.textContent=t}}function _y(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Py(t){return arguments.length?this.each(t==null?Ey:(typeof t=="function"?_y:My)(t)):this.node().textContent}function Dy(){this.innerHTML=""}function Ty(t){return function(){this.innerHTML=t}}function Oy(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Ay(t){return arguments.length?this.each(t==null?Dy:(typeof t=="function"?Oy:Ty)(t)):this.node().innerHTML}function Ly(){this.nextSibling&&this.parentNode.appendChild(this)}function zy(){return this.each(Ly)}function $y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ry(){return this.each($y)}function Fy(t){var r=typeof t=="function"?t:Wm(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Hy(){return null}function Vy(t,r){var o=typeof t=="function"?t:Wm(t),i=r==null?Hy:typeof r=="function"?r:Ic(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function By(){var t=this.parentNode;t&&t.removeChild(this)}function Wy(){return this.each(By)}function Uy(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Yy(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Xy(t){return this.select(t?Yy:Uy)}function Gy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ky(t){return function(r){t.call(this,r,this.__data__)}}function Qy(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function qy(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,c;o<l;++o)c=r[o],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):r[++i]=c;++i?r.length=i:delete this.__on}}}function Zy(t,r,o){return function(){var i=this.__on,l,c=Ky(r);if(i){for(var d=0,f=i.length;d<f;++d)if((l=i[d]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=o),l.value=r;return}}this.addEventListener(t.type,c,o),l={type:t.type,name:t.name,value:r,listener:c,options:o},i?i.push(l):this.__on=[l]}}function Jy(t,r,o){var i=Qy(t+""),l,c=i.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var g=0,h=f.length,x;g<h;++g)for(l=0,x=f[g];l<c;++l)if((d=i[l]).type===x.type&&d.name===x.name)return x.value}return}for(f=r?Zy:qy,l=0;l<c;++l)this.each(f(i[l],r,o));return this}function eh(t,r,o){var i=Km(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function ev(t,r){return function(){return eh(this,t,r)}}function tv(t,r){return function(){return eh(this,t,r.apply(this,arguments))}}function nv(t,r){return this.each((typeof r=="function"?tv:ev)(t,r))}function*rv(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,c=i.length,d;l<c;++l)(d=i[l])&&(yield d)}var th=[null];function At(t,r){this._groups=t,this._parents=r}function Ls(){return new At([[document.documentElement]],th)}function ov(){return this}At.prototype=Ls.prototype={constructor:At,select:_0,selectAll:O0,selectChild:$0,selectChildren:V0,filter:B0,data:K0,enter:W0,exit:q0,join:Z0,merge:J0,selection:ov,order:ey,sort:ty,call:ry,nodes:oy,node:sy,size:iy,empty:ly,each:ay,attr:hy,style:vy,property:ky,classed:Iy,text:Py,html:Ay,raise:zy,lower:Ry,append:Fy,insert:Vy,remove:Wy,clone:Xy,datum:Gy,on:Jy,dispatch:nv,[Symbol.iterator]:rv};function Tt(t){return typeof t=="string"?new At([[document.querySelector(t)]],[document.documentElement]):new At([[t]],th)}function sv(t){let r;for(;r=t.sourceEvent;)t=r;return t}function tn(t,r){if(t=sv(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const iv={passive:!1},Cs={capture:!0,passive:!1};function Ku(t){t.stopImmediatePropagation()}function xo(t){t.preventDefault(),t.stopImmediatePropagation()}function nh(t){var r=t.document.documentElement,o=Tt(t).on("dragstart.drag",xo,Cs);"onselectstart"in r?o.on("selectstart.drag",xo,Cs):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function rh(t,r){var o=t.document.documentElement,i=Tt(t).on("dragstart.drag",null);r&&(i.on("click.drag",xo,Cs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const ll=t=>()=>t;function cc(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:c,x:d,y:f,dx:g,dy:h,dispatch:x}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:x}})}cc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function lv(t){return!t.ctrlKey&&!t.button}function av(){return this.parentNode}function uv(t,r){return r??{x:t.x,y:t.y}}function cv(){return navigator.maxTouchPoints||"ontouchstart"in this}function oh(){var t=lv,r=av,o=uv,i=cv,l={},c=$l("start","drag","end"),d=0,f,g,h,x,m=0;function y(_){_.on("mousedown.drag",w).filter(i).on("touchstart.drag",k).on("touchmove.drag",b,iv).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(_,A){if(!(x||!t.call(this,_,A))){var L=j(this,r.call(this,_,A),_,A,"mouse");L&&(Tt(_.view).on("mousemove.drag",S,Cs).on("mouseup.drag",C,Cs),nh(_.view),Ku(_),h=!1,f=_.clientX,g=_.clientY,L("start",_))}}function S(_){if(xo(_),!h){var A=_.clientX-f,L=_.clientY-g;h=A*A+L*L>m}l.mouse("drag",_)}function C(_){Tt(_.view).on("mousemove.drag mouseup.drag",null),rh(_.view,h),xo(_),l.mouse("end",_)}function k(_,A){if(t.call(this,_,A)){var L=_.changedTouches,P=r.call(this,_,A),U=L.length,K,se;for(K=0;K<U;++K)(se=j(this,P,_,A,L[K].identifier,L[K]))&&(Ku(_),se("start",_,L[K]))}}function b(_){var A=_.changedTouches,L=A.length,P,U;for(P=0;P<L;++P)(U=l[A[P].identifier])&&(xo(_),U("drag",_,A[P]))}function T(_){var A=_.changedTouches,L=A.length,P,U;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),P=0;P<L;++P)(U=l[A[P].identifier])&&(Ku(_),U("end",_,A[P]))}function j(_,A,L,P,U,K){var se=c.copy(),B=tn(K||L,A),M,X,R;if((R=o.call(_,new cc("beforestart",{sourceEvent:L,target:y,identifier:U,active:d,x:B[0],y:B[1],dx:0,dy:0,dispatch:se}),P))!=null)return M=R.x-B[0]||0,X=R.y-B[1]||0,function W(V,H,$){var N=B,O;switch(V){case"start":l[U]=W,O=d++;break;case"end":delete l[U],--d;case"drag":B=tn($||H,A),O=d;break}se.call(V,_,new cc(V,{sourceEvent:H,subject:R,target:y,identifier:U,active:O,x:B[0]+M,y:B[1]+X,dx:B[0]-N[0],dy:B[1]-N[1],dispatch:se}),P)}}return y.filter=function(_){return arguments.length?(t=typeof _=="function"?_:ll(!!_),y):t},y.container=function(_){return arguments.length?(r=typeof _=="function"?_:ll(_),y):r},y.subject=function(_){return arguments.length?(o=typeof _=="function"?_:ll(_),y):o},y.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:ll(!!_),y):i},y.on=function(){var _=c.on.apply(c,arguments);return _===c?y:_},y.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,y):Math.sqrt(m)},y}function Mc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function sh(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function zs(){}var Is=.7,Il=1/Is,yo="\\s*([+-]?\\d+)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dv=/^#([0-9a-f]{3,8})$/,fv=new RegExp(`^rgb\\(${yo},${yo},${yo}\\)$`),pv=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),mv=new RegExp(`^rgba\\(${yo},${yo},${yo},${Es}\\)$`),hv=new RegExp(`^rgba\\(${hn},${hn},${hn},${Es}\\)$`),gv=new RegExp(`^hsl\\(${Es},${hn},${hn}\\)$`),xv=new RegExp(`^hsla\\(${Es},${hn},${hn},${Es}\\)$`),Ip={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mc(zs,Ir,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ep,formatHex:Ep,formatHex8:yv,formatHsl:vv,formatRgb:Mp,toString:Mp});function Ep(){return this.rgb().formatHex()}function yv(){return this.rgb().formatHex8()}function vv(){return ih(this).formatHsl()}function Mp(){return this.rgb().formatRgb()}function Ir(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=dv.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?_p(r):o===3?new Ct(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?al(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?al(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=fv.exec(t))?new Ct(r[1],r[2],r[3],1):(r=pv.exec(t))?new Ct(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=mv.exec(t))?al(r[1],r[2],r[3],r[4]):(r=hv.exec(t))?al(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=gv.exec(t))?Tp(r[1],r[2]/100,r[3]/100,1):(r=xv.exec(t))?Tp(r[1],r[2]/100,r[3]/100,r[4]):Ip.hasOwnProperty(t)?_p(Ip[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function _p(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function al(t,r,o,i){return i<=0&&(t=r=o=NaN),new Ct(t,r,o,i)}function wv(t){return t instanceof zs||(t=Ir(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function dc(t,r,o,i){return arguments.length===1?wv(t):new Ct(t,r,o,i??1)}function Ct(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}Mc(Ct,dc,sh(zs,{brighter(t){return t=t==null?Il:Math.pow(Il,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Is:Math.pow(Is,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(br(this.r),br(this.g),br(this.b),El(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pp,formatHex:Pp,formatHex8:Sv,formatRgb:Dp,toString:Dp}));function Pp(){return`#${jr(this.r)}${jr(this.g)}${jr(this.b)}`}function Sv(){return`#${jr(this.r)}${jr(this.g)}${jr(this.b)}${jr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dp(){const t=El(this.opacity);return`${t===1?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${t===1?")":`, ${t})`}`}function El(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function br(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jr(t){return t=br(t),(t<16?"0":"")+t.toString(16)}function Tp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new nn(t,r,o,i)}function ih(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof zs||(t=Ir(t)),!t)return new nn;if(t instanceof nn)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),c=Math.max(r,o,i),d=NaN,f=c-l,g=(c+l)/2;return f?(r===c?d=(o-i)/f+(o<i)*6:o===c?d=(i-r)/f+2:d=(r-o)/f+4,f/=g<.5?c+l:2-c-l,d*=60):f=g>0&&g<1?0:d,new nn(d,f,g,t.opacity)}function Nv(t,r,o,i){return arguments.length===1?ih(t):new nn(t,r,o,i??1)}function nn(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}Mc(nn,Nv,sh(zs,{brighter(t){return t=t==null?Il:Math.pow(Il,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Is:Math.pow(Is,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new Ct(Qu(t>=240?t-240:t+120,l,i),Qu(t,l,i),Qu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new nn(Op(this.h),ul(this.s),ul(this.l),El(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=El(this.opacity);return`${t===1?"hsl(":"hsla("}${Op(this.h)}, ${ul(this.s)*100}%, ${ul(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Op(t){return t=(t||0)%360,t<0?t+360:t}function ul(t){return Math.max(0,Math.min(1,t||0))}function Qu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const _c=t=>()=>t;function kv(t,r){return function(o){return t+o*r}}function jv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function bv(t){return(t=+t)==1?lh:function(r,o){return o-r?jv(r,o,t):_c(isNaN(r)?o:r)}}function lh(t,r){var o=r-t;return o?kv(t,o):_c(isNaN(t)?r:t)}const Ml=(function t(r){var o=bv(r);function i(l,c){var d=o((l=dc(l)).r,(c=dc(c)).r),f=o(l.g,c.g),g=o(l.b,c.b),h=lh(l.opacity,c.opacity);return function(x){return l.r=d(x),l.g=f(x),l.b=g(x),l.opacity=h(x),l+""}}return i.gamma=t,i})(1);function Cv(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(c){for(l=0;l<o;++l)i[l]=t[l]*(1-c)+r[l]*c;return i}}function Iv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ev(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),c=new Array(o),d;for(d=0;d<i;++d)l[d]=js(t[d],r[d]);for(;d<o;++d)c[d]=r[d];return function(f){for(d=0;d<i;++d)c[d]=l[d](f);return c}}function Mv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function pn(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function _v(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=js(t[l],r[l]):i[l]=r[l];return function(c){for(l in o)i[l]=o[l](c);return i}}var fc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qu=new RegExp(fc.source,"g");function Pv(t){return function(){return t}}function Dv(t){return function(r){return t(r)+""}}function ah(t,r){var o=fc.lastIndex=qu.lastIndex=0,i,l,c,d=-1,f=[],g=[];for(t=t+"",r=r+"";(i=fc.exec(t))&&(l=qu.exec(r));)(c=l.index)>o&&(c=r.slice(o,c),f[d]?f[d]+=c:f[++d]=c),(i=i[0])===(l=l[0])?f[d]?f[d]+=l:f[++d]=l:(f[++d]=null,g.push({i:d,x:pn(i,l)})),o=qu.lastIndex;return o<r.length&&(c=r.slice(o),f[d]?f[d]+=c:f[++d]=c),f.length<2?g[0]?Dv(g[0].x):Pv(r):(r=g.length,function(h){for(var x=0,m;x<r;++x)f[(m=g[x]).i]=m.x(h);return f.join("")})}function js(t,r){var o=typeof r,i;return r==null||o==="boolean"?_c(r):(o==="number"?pn:o==="string"?(i=Ir(r))?(r=i,Ml):ah:r instanceof Ir?Ml:r instanceof Date?Mv:Iv(r)?Cv:Array.isArray(r)?Ev:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?_v:pn)(t,r)}var Ap=180/Math.PI,pc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uh(t,r,o,i,l,c){var d,f,g;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(g=t*o+r*i)&&(o-=t*g,i-=r*g),(f=Math.sqrt(o*o+i*i))&&(o/=f,i/=f,g/=f),t*i<r*o&&(t=-t,r=-r,g=-g,d=-d),{translateX:l,translateY:c,rotate:Math.atan2(r,t)*Ap,skewX:Math.atan(g)*Ap,scaleX:d,scaleY:f}}var cl;function Tv(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?pc:uh(r.a,r.b,r.c,r.d,r.e,r.f)}function Ov(t){return t==null||(cl||(cl=document.createElementNS("http://www.w3.org/2000/svg","g")),cl.setAttribute("transform",t),!(t=cl.transform.baseVal.consolidate()))?pc:(t=t.matrix,uh(t.a,t.b,t.c,t.d,t.e,t.f))}function ch(t,r,o,i){function l(h){return h.length?h.pop()+" ":""}function c(h,x,m,y,w,S){if(h!==m||x!==y){var C=w.push("translate(",null,r,null,o);S.push({i:C-4,x:pn(h,m)},{i:C-2,x:pn(x,y)})}else(m||y)&&w.push("translate("+m+r+y+o)}function d(h,x,m,y){h!==x?(h-x>180?x+=360:x-h>180&&(h+=360),y.push({i:m.push(l(m)+"rotate(",null,i)-2,x:pn(h,x)})):x&&m.push(l(m)+"rotate("+x+i)}function f(h,x,m,y){h!==x?y.push({i:m.push(l(m)+"skewX(",null,i)-2,x:pn(h,x)}):x&&m.push(l(m)+"skewX("+x+i)}function g(h,x,m,y,w,S){if(h!==m||x!==y){var C=w.push(l(w)+"scale(",null,",",null,")");S.push({i:C-4,x:pn(h,m)},{i:C-2,x:pn(x,y)})}else(m!==1||y!==1)&&w.push(l(w)+"scale("+m+","+y+")")}return function(h,x){var m=[],y=[];return h=t(h),x=t(x),c(h.translateX,h.translateY,x.translateX,x.translateY,m,y),d(h.rotate,x.rotate,m,y),f(h.skewX,x.skewX,m,y),g(h.scaleX,h.scaleY,x.scaleX,x.scaleY,m,y),h=x=null,function(w){for(var S=-1,C=y.length,k;++S<C;)m[(k=y[S]).i]=k.x(w);return m.join("")}}}var Av=ch(Tv,"px, ","px)","deg)"),Lv=ch(Ov,", ",")",")"),zv=1e-12;function Lp(t){return((t=Math.exp(t))+1/t)/2}function $v(t){return((t=Math.exp(t))-1/t)/2}function Rv(t){return((t=Math.exp(2*t))-1)/(t+1)}const Sl=(function t(r,o,i){function l(c,d){var f=c[0],g=c[1],h=c[2],x=d[0],m=d[1],y=d[2],w=x-f,S=m-g,C=w*w+S*S,k,b;if(C<zv)b=Math.log(y/h)/r,k=function(P){return[f+P*w,g+P*S,h*Math.exp(r*P*b)]};else{var T=Math.sqrt(C),j=(y*y-h*h+i*C)/(2*h*o*T),_=(y*y-h*h-i*C)/(2*y*o*T),A=Math.log(Math.sqrt(j*j+1)-j),L=Math.log(Math.sqrt(_*_+1)-_);b=(L-A)/r,k=function(P){var U=P*b,K=Lp(A),se=h/(o*T)*(K*Rv(r*U+A)-$v(A));return[f+se*w,g+se*S,h*K/Lp(r*U+A)]}}return k.duration=b*1e3*r/Math.SQRT2,k}return l.rho=function(c){var d=Math.max(.001,+c),f=d*d,g=f*f;return t(d,f,g)},l})(Math.SQRT2,2,4);var wo=0,Ss=0,xs=0,dh=1e3,_l,Ns,Pl=0,Er=0,Fl=0,Ms=typeof performance=="object"&&performance.now?performance:Date,fh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pc(){return Er||(fh(Fv),Er=Ms.now()+Fl)}function Fv(){Er=0}function Dl(){this._call=this._time=this._next=null}Dl.prototype=ph.prototype={constructor:Dl,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?Pc():+o)+(r==null?0:+r),!this._next&&Ns!==this&&(Ns?Ns._next=this:_l=this,Ns=this),this._call=t,this._time=o,mc()},stop:function(){this._call&&(this._call=null,this._time=1/0,mc())}};function ph(t,r,o){var i=new Dl;return i.restart(t,r,o),i}function Hv(){Pc(),++wo;for(var t=_l,r;t;)(r=Er-t._time)>=0&&t._call.call(void 0,r),t=t._next;--wo}function zp(){Er=(Pl=Ms.now())+Fl,wo=Ss=0;try{Hv()}finally{wo=0,Bv(),Er=0}}function Vv(){var t=Ms.now(),r=t-Pl;r>dh&&(Fl-=r,Pl=t)}function Bv(){for(var t,r=_l,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:_l=o);Ns=t,mc(i)}function mc(t){if(!wo){Ss&&(Ss=clearTimeout(Ss));var r=t-Er;r>24?(t<1/0&&(Ss=setTimeout(zp,t-Ms.now()-Fl)),xs&&(xs=clearInterval(xs))):(xs||(Pl=Ms.now(),xs=setInterval(Vv,dh)),wo=1,fh(zp))}}function $p(t,r,o){var i=new Dl;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var Wv=$l("start","end","cancel","interrupt"),Uv=[],mh=0,Rp=1,hc=2,Nl=3,Fp=4,gc=5,kl=6;function Hl(t,r,o,i,l,c){var d=t.__transition;if(!d)t.__transition={};else if(o in d)return;Yv(t,o,{name:r,index:i,group:l,on:Wv,tween:Uv,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:mh})}function Dc(t,r){var o=sn(t,r);if(o.state>mh)throw new Error("too late; already scheduled");return o}function xn(t,r){var o=sn(t,r);if(o.state>Nl)throw new Error("too late; already running");return o}function sn(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function Yv(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=ph(c,0,o.time);function c(h){o.state=Rp,o.timer.restart(d,o.delay,o.time),o.delay<=h&&d(h-o.delay)}function d(h){var x,m,y,w;if(o.state!==Rp)return g();for(x in i)if(w=i[x],w.name===o.name){if(w.state===Nl)return $p(d);w.state===Fp?(w.state=kl,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[x]):+x<r&&(w.state=kl,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[x])}if($p(function(){o.state===Nl&&(o.state=Fp,o.timer.restart(f,o.delay,o.time),f(h))}),o.state=hc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===hc){for(o.state=Nl,l=new Array(y=o.tween.length),x=0,m=-1;x<y;++x)(w=o.tween[x].value.call(t,t.__data__,o.index,o.group))&&(l[++m]=w);l.length=m+1}}function f(h){for(var x=h<o.duration?o.ease.call(null,h/o.duration):(o.timer.restart(g),o.state=gc,1),m=-1,y=l.length;++m<y;)l[m].call(t,x);o.state===gc&&(o.on.call("end",t,t.__data__,o.index,o.group),g())}function g(){o.state=kl,o.timer.stop(),delete i[r];for(var h in i)return;delete t.__transition}}function jl(t,r){var o=t.__transition,i,l,c=!0,d;if(o){r=r==null?null:r+"";for(d in o){if((i=o[d]).name!==r){c=!1;continue}l=i.state>hc&&i.state<gc,i.state=kl,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[d]}c&&delete t.__transition}}function Xv(t){return this.each(function(){jl(this,t)})}function Gv(t,r){var o,i;return function(){var l=xn(this,t),c=l.tween;if(c!==o){i=o=c;for(var d=0,f=i.length;d<f;++d)if(i[d].name===r){i=i.slice(),i.splice(d,1);break}}l.tween=i}}function Kv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var c=xn(this,t),d=c.tween;if(d!==i){l=(i=d).slice();for(var f={name:r,value:o},g=0,h=l.length;g<h;++g)if(l[g].name===r){l[g]=f;break}g===h&&l.push(f)}c.tween=l}}function Qv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=sn(this.node(),o).tween,l=0,c=i.length,d;l<c;++l)if((d=i[l]).name===t)return d.value;return null}return this.each((r==null?Gv:Kv)(o,t,r))}function Tc(t,r,o){var i=t._id;return t.each(function(){var l=xn(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return sn(l,i).value[r]}}function hh(t,r){var o;return(typeof r=="number"?pn:r instanceof Ir?Ml:(o=Ir(r))?(r=o,Ml):ah)(t,r)}function qv(t){return function(){this.removeAttribute(t)}}function Zv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jv(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttribute(t);return d===l?null:d===i?c:c=r(i=d,o)}}function ew(t,r,o){var i,l=o+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===l?null:d===i?c:c=r(i=d,o)}}function tw(t,r,o){var i,l,c;return function(){var d,f=o(this),g;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),g=f+"",d===g?null:d===i&&g===l?c:(l=g,c=r(i=d,f)))}}function nw(t,r,o){var i,l,c;return function(){var d,f=o(this),g;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),g=f+"",d===g?null:d===i&&g===l?c:(l=g,c=r(i=d,f)))}}function rw(t,r){var o=Rl(t),i=o==="transform"?Lv:hh;return this.attrTween(t,typeof r=="function"?(o.local?nw:tw)(o,i,Tc(this,"attr."+t,r)):r==null?(o.local?Zv:qv)(o):(o.local?ew:Jv)(o,i,r))}function ow(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function sw(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function iw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&sw(t,c)),o}return l._value=r,l}function lw(t,r){var o,i;function l(){var c=r.apply(this,arguments);return c!==i&&(o=(i=c)&&ow(t,c)),o}return l._value=r,l}function aw(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=Rl(t);return this.tween(o,(i.local?iw:lw)(i,r))}function uw(t,r){return function(){Dc(this,t).delay=+r.apply(this,arguments)}}function cw(t,r){return r=+r,function(){Dc(this,t).delay=r}}function dw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?uw:cw)(r,t)):sn(this.node(),r).delay}function fw(t,r){return function(){xn(this,t).duration=+r.apply(this,arguments)}}function pw(t,r){return r=+r,function(){xn(this,t).duration=r}}function mw(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?fw:pw)(r,t)):sn(this.node(),r).duration}function hw(t,r){if(typeof r!="function")throw new Error;return function(){xn(this,t).ease=r}}function gw(t){var r=this._id;return arguments.length?this.each(hw(r,t)):sn(this.node(),r).ease}function xw(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;xn(this,t).ease=o}}function yw(t){if(typeof t!="function")throw new Error;return this.each(xw(this._id,t))}function vw(t){typeof t!="function"&&(t=Ym(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var c=r[l],d=c.length,f=i[l]=[],g,h=0;h<d;++h)(g=c[h])&&t.call(g,g.__data__,h,c)&&f.push(g);return new Mn(i,this._parents,this._name,this._id)}function ww(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,c=Math.min(i,l),d=new Array(i),f=0;f<c;++f)for(var g=r[f],h=o[f],x=g.length,m=d[f]=new Array(x),y,w=0;w<x;++w)(y=g[w]||h[w])&&(m[w]=y);for(;f<i;++f)d[f]=r[f];return new Mn(d,this._parents,this._name,this._id)}function Sw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function Nw(t,r,o){var i,l,c=Sw(r)?Dc:xn;return function(){var d=c(this,t),f=d.on;f!==i&&(l=(i=f).copy()).on(r,o),d.on=l}}function kw(t,r){var o=this._id;return arguments.length<2?sn(this.node(),o).on.on(t):this.each(Nw(o,t,r))}function jw(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function bw(){return this.on("end.remove",jw(this._id))}function Cw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Ic(t));for(var i=this._groups,l=i.length,c=new Array(l),d=0;d<l;++d)for(var f=i[d],g=f.length,h=c[d]=new Array(g),x,m,y=0;y<g;++y)(x=f[y])&&(m=t.call(x,x.__data__,y,f))&&("__data__"in x&&(m.__data__=x.__data__),h[y]=m,Hl(h[y],r,o,y,h,sn(x,o)));return new Mn(c,this._parents,r,o)}function Iw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Um(t));for(var i=this._groups,l=i.length,c=[],d=[],f=0;f<l;++f)for(var g=i[f],h=g.length,x,m=0;m<h;++m)if(x=g[m]){for(var y=t.call(x,x.__data__,m,g),w,S=sn(x,o),C=0,k=y.length;C<k;++C)(w=y[C])&&Hl(w,r,o,C,y,S);c.push(y),d.push(x)}return new Mn(c,d,r,o)}var Ew=Ls.prototype.constructor;function Mw(){return new Ew(this._groups,this._parents)}function _w(t,r){var o,i,l;return function(){var c=vo(this,t),d=(this.style.removeProperty(t),vo(this,t));return c===d?null:c===o&&d===i?l:l=r(o=c,i=d)}}function gh(t){return function(){this.style.removeProperty(t)}}function Pw(t,r,o){var i,l=o+"",c;return function(){var d=vo(this,t);return d===l?null:d===i?c:c=r(i=d,o)}}function Dw(t,r,o){var i,l,c;return function(){var d=vo(this,t),f=o(this),g=f+"";return f==null&&(g=f=(this.style.removeProperty(t),vo(this,t))),d===g?null:d===i&&g===l?c:(l=g,c=r(i=d,f))}}function Tw(t,r){var o,i,l,c="style."+r,d="end."+c,f;return function(){var g=xn(this,t),h=g.on,x=g.value[c]==null?f||(f=gh(r)):void 0;(h!==o||l!==x)&&(i=(o=h).copy()).on(d,l=x),g.on=i}}function Ow(t,r,o){var i=(t+="")=="transform"?Av:hh;return r==null?this.styleTween(t,_w(t,i)).on("end.style."+t,gh(t)):typeof r=="function"?this.styleTween(t,Dw(t,i,Tc(this,"style."+t,r))).each(Tw(this._id,t)):this.styleTween(t,Pw(t,i,r),o).on("end.style."+t,null)}function Aw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function Lw(t,r,o){var i,l;function c(){var d=r.apply(this,arguments);return d!==l&&(i=(l=d)&&Aw(t,d,o)),i}return c._value=r,c}function zw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,Lw(t,r,o??""))}function $w(t){return function(){this.textContent=t}}function Rw(t){return function(){var r=t(this);this.textContent=r??""}}function Fw(t){return this.tween("text",typeof t=="function"?Rw(Tc(this,"text",t)):$w(t==null?"":t+""))}function Hw(t){return function(r){this.textContent=t.call(this,r)}}function Vw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&Hw(l)),r}return i._value=t,i}function Bw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Vw(t))}function Ww(){for(var t=this._name,r=this._id,o=xh(),i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,g,h=0;h<f;++h)if(g=d[h]){var x=sn(g,r);Hl(g,t,o,h,d,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new Mn(i,this._parents,t,o)}function Uw(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(c,d){var f={value:d},g={value:function(){--l===0&&c()}};o.each(function(){var h=xn(this,i),x=h.on;x!==t&&(r=(t=x).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(g)),h.on=r}),l===0&&c()})}var Yw=0;function Mn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function xh(){return++Yw}var In=Ls.prototype;Mn.prototype={constructor:Mn,select:Cw,selectAll:Iw,selectChild:In.selectChild,selectChildren:In.selectChildren,filter:vw,merge:ww,selection:Mw,transition:Ww,call:In.call,nodes:In.nodes,node:In.node,size:In.size,empty:In.empty,each:In.each,on:kw,attr:rw,attrTween:aw,style:Ow,styleTween:zw,text:Fw,textTween:Bw,remove:bw,tween:Qv,delay:dw,duration:mw,ease:gw,easeVarying:yw,end:Uw,[Symbol.iterator]:In[Symbol.iterator]};function Xw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gw={time:null,delay:0,duration:250,ease:Xw};function Kw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Qw(t){var r,o;t instanceof Mn?(r=t._id,t=t._name):(r=xh(),(o=Gw).time=Pc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,c=0;c<l;++c)for(var d=i[c],f=d.length,g,h=0;h<f;++h)(g=d[h])&&Hl(g,t,r,h,d,o||Kw(g,r));return new Mn(i,this._parents,t,r)}Ls.prototype.interrupt=Xv;Ls.prototype.transition=Qw;const dl=t=>()=>t;function qw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function En(t,r,o){this.k=t,this.x=r,this.y=o}En.prototype={constructor:En,scale:function(t){return t===1?this:new En(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new En(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vl=new En(1,0,0);yh.prototype=En.prototype;function yh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Vl;return t.__zoom}function Zu(t){t.stopImmediatePropagation()}function ys(t){t.preventDefault(),t.stopImmediatePropagation()}function Zw(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Jw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hp(){return this.__zoom||Vl}function e1(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function t1(){return navigator.maxTouchPoints||"ontouchstart"in this}function n1(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],c=t.invertY(r[0][1])-o[0][1],d=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function vh(){var t=Zw,r=Jw,o=n1,i=e1,l=t1,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,g=Sl,h=$l("start","zoom","end"),x,m,y,w=500,S=150,C=0,k=10;function b(R){R.property("__zoom",Hp).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",se).filter(l).on("touchstart.zoom",B).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(R,W,V,H){var $=R.selection?R.selection():R;$.property("__zoom",Hp),R!==$?A(R,W,V,H):$.interrupt().each(function(){L(this,arguments).event(H).start().zoom(null,typeof W=="function"?W.apply(this,arguments):W).end()})},b.scaleBy=function(R,W,V,H){b.scaleTo(R,function(){var $=this.__zoom.k,N=typeof W=="function"?W.apply(this,arguments):W;return $*N},V,H)},b.scaleTo=function(R,W,V,H){b.transform(R,function(){var $=r.apply(this,arguments),N=this.__zoom,O=V==null?_($):typeof V=="function"?V.apply(this,arguments):V,E=N.invert(O),z=typeof W=="function"?W.apply(this,arguments):W;return o(j(T(N,z),O,E),$,d)},V,H)},b.translateBy=function(R,W,V,H){b.transform(R,function(){return o(this.__zoom.translate(typeof W=="function"?W.apply(this,arguments):W,typeof V=="function"?V.apply(this,arguments):V),r.apply(this,arguments),d)},null,H)},b.translateTo=function(R,W,V,H,$){b.transform(R,function(){var N=r.apply(this,arguments),O=this.__zoom,E=H==null?_(N):typeof H=="function"?H.apply(this,arguments):H;return o(Vl.translate(E[0],E[1]).scale(O.k).translate(typeof W=="function"?-W.apply(this,arguments):-W,typeof V=="function"?-V.apply(this,arguments):-V),N,d)},H,$)};function T(R,W){return W=Math.max(c[0],Math.min(c[1],W)),W===R.k?R:new En(W,R.x,R.y)}function j(R,W,V){var H=W[0]-V[0]*R.k,$=W[1]-V[1]*R.k;return H===R.x&&$===R.y?R:new En(R.k,H,$)}function _(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function A(R,W,V,H){R.on("start.zoom",function(){L(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(H).end()}).tween("zoom",function(){var $=this,N=arguments,O=L($,N).event(H),E=r.apply($,N),z=V==null?_(E):typeof V=="function"?V.apply($,N):V,J=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),te=$.__zoom,Q=typeof W=="function"?W.apply($,N):W,ie=g(te.invert(z).concat(J/te.k),Q.invert(z).concat(J/Q.k));return function(le){if(le===1)le=Q;else{var oe=ie(le),ae=J/oe[2];le=new En(ae,z[0]-oe[0]*ae,z[1]-oe[1]*ae)}O.zoom(null,le)}})}function L(R,W,V){return!V&&R.__zooming||new P(R,W)}function P(R,W){this.that=R,this.args=W,this.active=0,this.sourceEvent=null,this.extent=r.apply(R,W),this.taps=0}P.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,W){return this.mouse&&R!=="mouse"&&(this.mouse[1]=W.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=W.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=W.invert(this.touch1[0])),this.that.__zoom=W,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var W=Tt(this.that).datum();h.call(R,this.that,new qw(R,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:h}),W)}};function U(R,...W){if(!t.apply(this,arguments))return;var V=L(this,W).event(R),H=this.__zoom,$=Math.max(c[0],Math.min(c[1],H.k*Math.pow(2,i.apply(this,arguments)))),N=tn(R);if(V.wheel)(V.mouse[0][0]!==N[0]||V.mouse[0][1]!==N[1])&&(V.mouse[1]=H.invert(V.mouse[0]=N)),clearTimeout(V.wheel);else{if(H.k===$)return;V.mouse=[N,H.invert(N)],jl(this),V.start()}ys(R),V.wheel=setTimeout(O,S),V.zoom("mouse",o(j(T(H,$),V.mouse[0],V.mouse[1]),V.extent,d));function O(){V.wheel=null,V.end()}}function K(R,...W){if(y||!t.apply(this,arguments))return;var V=R.currentTarget,H=L(this,W,!0).event(R),$=Tt(R.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",J,!0),N=tn(R,V),O=R.clientX,E=R.clientY;nh(R.view),Zu(R),H.mouse=[N,this.__zoom.invert(N)],jl(this),H.start();function z(te){if(ys(te),!H.moved){var Q=te.clientX-O,ie=te.clientY-E;H.moved=Q*Q+ie*ie>C}H.event(te).zoom("mouse",o(j(H.that.__zoom,H.mouse[0]=tn(te,V),H.mouse[1]),H.extent,d))}function J(te){$.on("mousemove.zoom mouseup.zoom",null),rh(te.view,H.moved),ys(te),H.event(te).end()}}function se(R,...W){if(t.apply(this,arguments)){var V=this.__zoom,H=tn(R.changedTouches?R.changedTouches[0]:R,this),$=V.invert(H),N=V.k*(R.shiftKey?.5:2),O=o(j(T(V,N),H,$),r.apply(this,W),d);ys(R),f>0?Tt(this).transition().duration(f).call(A,O,H,R):Tt(this).call(b.transform,O,H,R)}}function B(R,...W){if(t.apply(this,arguments)){var V=R.touches,H=V.length,$=L(this,W,R.changedTouches.length===H).event(R),N,O,E,z;for(Zu(R),O=0;O<H;++O)E=V[O],z=tn(E,this),z=[z,this.__zoom.invert(z),E.identifier],$.touch0?!$.touch1&&$.touch0[2]!==z[2]&&($.touch1=z,$.taps=0):($.touch0=z,N=!0,$.taps=1+!!x);x&&(x=clearTimeout(x)),N&&($.taps<2&&(m=z[0],x=setTimeout(function(){x=null},w)),jl(this),$.start())}}function M(R,...W){if(this.__zooming){var V=L(this,W).event(R),H=R.changedTouches,$=H.length,N,O,E,z;for(ys(R),N=0;N<$;++N)O=H[N],E=tn(O,this),V.touch0&&V.touch0[2]===O.identifier?V.touch0[0]=E:V.touch1&&V.touch1[2]===O.identifier&&(V.touch1[0]=E);if(O=V.that.__zoom,V.touch1){var J=V.touch0[0],te=V.touch0[1],Q=V.touch1[0],ie=V.touch1[1],le=(le=Q[0]-J[0])*le+(le=Q[1]-J[1])*le,oe=(oe=ie[0]-te[0])*oe+(oe=ie[1]-te[1])*oe;O=T(O,Math.sqrt(le/oe)),E=[(J[0]+Q[0])/2,(J[1]+Q[1])/2],z=[(te[0]+ie[0])/2,(te[1]+ie[1])/2]}else if(V.touch0)E=V.touch0[0],z=V.touch0[1];else return;V.zoom("touch",o(j(O,E,z),V.extent,d))}}function X(R,...W){if(this.__zooming){var V=L(this,W).event(R),H=R.changedTouches,$=H.length,N,O;for(Zu(R),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),N=0;N<$;++N)O=H[N],V.touch0&&V.touch0[2]===O.identifier?delete V.touch0:V.touch1&&V.touch1[2]===O.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(O=tn(O,this),Math.hypot(m[0]-O[0],m[1]-O[1])<k)){var E=Tt(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return b.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:dl(+R),b):i},b.filter=function(R){return arguments.length?(t=typeof R=="function"?R:dl(!!R),b):t},b.touchable=function(R){return arguments.length?(l=typeof R=="function"?R:dl(!!R),b):l},b.extent=function(R){return arguments.length?(r=typeof R=="function"?R:dl([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),b):r},b.scaleExtent=function(R){return arguments.length?(c[0]=+R[0],c[1]=+R[1],b):[c[0],c[1]]},b.translateExtent=function(R){return arguments.length?(d[0][0]=+R[0][0],d[1][0]=+R[1][0],d[0][1]=+R[0][1],d[1][1]=+R[1][1],b):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},b.constrain=function(R){return arguments.length?(o=R,b):o},b.duration=function(R){return arguments.length?(f=+R,b):f},b.interpolate=function(R){return arguments.length?(g=R,b):g},b.on=function(){var R=h.on.apply(h,arguments);return R===h?b:R},b.clickDistance=function(R){return arguments.length?(C=(R=+R)*R,b):Math.sqrt(C)},b.tapDistance=function(R){return arguments.length?(k=+R,b):k},b}const gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},_s=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wh=["Enter"," ","Escape"],Sh={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var So;(function(t){t.Strict="strict",t.Loose="loose"})(So||(So={}));var Cr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Cr||(Cr={}));var Ps;(function(t){t.Partial="partial",t.Full="full"})(Ps||(Ps={}));const Nh={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var tr;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(tr||(tr={}));var Tl;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Tl||(Tl={}));var je;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(je||(je={}));const Vp={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top};function kh(t){return t===null?null:t?"valid":"invalid"}const jh=t=>"id"in t&&"source"in t&&"target"in t,r1=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Oc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),$s=(t,r=[0,0])=>{const{width:o,height:i}=_n(t),l=t.origin??r,c=o*l[0],d=i*l[1];return{x:t.position.x-c,y:t.position.y-d}},o1=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const c=typeof l=="string";let d=!r.nodeLookup&&!c?l:void 0;r.nodeLookup&&(d=c?r.nodeLookup.get(l):Oc(l)?l:r.nodeLookup.get(l.id));const f=d?Ol(d,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bl(i,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Wl(o)},Rs=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Bl(o,Ol(l)),i=!0)}),i?Wl(o):{x:0,y:0,width:0,height:0}},Ac=(t,r,[o,i,l]=[0,0,1],c=!1,d=!1)=>{const f={...Hs(r,[o,i,l]),width:r.width/l,height:r.height/l},g=[];for(const h of t.values()){const{measured:x,selectable:m=!0,hidden:y=!1}=h;if(d&&!m||y)continue;const w=x.width??h.width??h.initialWidth??null,S=x.height??h.height??h.initialHeight??null,C=Ds(f,ko(h)),k=(w??0)*(S??0),b=c&&C>0;(!h.internals.handleBounds||b||C>=k||h.dragging)&&g.push(h)}return g},s1=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function i1(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function l1({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:c},d){if(t.size===0)return Promise.resolve(!0);const f=i1(t,d),g=Rs(f),h=Lc(g,r,o,(d==null?void 0:d.minZoom)??l,(d==null?void 0:d.maxZoom)??c,(d==null?void 0:d.padding)??.1);return await i.setViewport(h,{duration:d==null?void 0:d.duration,ease:d==null?void 0:d.ease,interpolate:d==null?void 0:d.interpolate}),Promise.resolve(!0)}function bh({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:c}){const d=o.get(t),f=d.parentId?o.get(d.parentId):void 0,{x:g,y:h}=f?f.internals.positionAbsolute:{x:0,y:0},x=d.origin??i;let m=d.extent||l;if(d.extent==="parent"&&!d.expandParent)if(!f)c==null||c("005",gn.error005());else{const w=f.measured.width,S=f.measured.height;w&&S&&(m=[[g,h],[g+w,h+S]])}else f&&jo(d.extent)&&(m=[[d.extent[0][0]+g,d.extent[0][1]+h],[d.extent[1][0]+g,d.extent[1][1]+h]]);const y=jo(m)?Mr(r,m,d.measured):r;return(d.measured.width===void 0||d.measured.height===void 0)&&(c==null||c("015",gn.error015())),{position:{x:y.x-g+(d.measured.width??0)*x[0],y:y.y-h+(d.measured.height??0)*x[1]},positionAbsolute:y}}async function a1({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const c=new Set(t.map(y=>y.id)),d=[];for(const y of o){if(y.deletable===!1)continue;const w=c.has(y.id),S=!w&&y.parentId&&d.find(C=>C.id===y.parentId);(w||S)&&d.push(y)}const f=new Set(r.map(y=>y.id)),g=i.filter(y=>y.deletable!==!1),x=s1(d,g);for(const y of g)f.has(y.id)&&!x.find(S=>S.id===y.id)&&x.push(y);if(!l)return{edges:x,nodes:d};const m=await l({nodes:d,edges:x});return typeof m=="boolean"?m?{edges:x,nodes:d}:{edges:[],nodes:[]}:m}const No=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),Mr=(t={x:0,y:0},r,o)=>({x:No(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:No(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function Ch(t,r,o){const{width:i,height:l}=_n(o),{x:c,y:d}=o.internals.positionAbsolute;return Mr(t,[[c,d],[c+i,d+l]],r)}const Bp=(t,r,o)=>t<r?No(Math.abs(t-r),1,r)/r:t>o?-No(Math.abs(t-o),1,r)/r:0,Ih=(t,r,o=15,i=40)=>{const l=Bp(t.x,i,r.width-i)*o,c=Bp(t.y,i,r.height-i)*o;return[l,c]},Bl=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),xc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Wl=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),ko=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Oc(t)?t.internals.positionAbsolute:$s(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0}},Ol=(t,r=[0,0])=>{var l,c;const{x:o,y:i}=Oc(t)?t.internals.positionAbsolute:$s(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((c=t.measured)==null?void 0:c.height)??t.height??t.initialHeight??0)}},Eh=(t,r)=>Wl(Bl(xc(t),xc(r))),Ds=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Wp=t=>rn(t.width)&&rn(t.height)&&rn(t.x)&&rn(t.y),rn=t=>!isNaN(t)&&isFinite(t),u1=(t,r)=>{},Fs=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),Hs=({x:t,y:r},[o,i,l],c=!1,d=[1,1])=>{const f={x:(t-o)/l,y:(r-i)/l};return c?Fs(f,d):f},Al=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function po(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function c1(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=po(t,o),l=po(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=po(t.top??t.y??0,o),l=po(t.bottom??t.y??0,o),c=po(t.left??t.x??0,r),d=po(t.right??t.x??0,r);return{top:i,right:d,bottom:l,left:c,x:c+d,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function d1(t,r,o,i,l,c){const{x:d,y:f}=Al(t,[r,o,i]),{x:g,y:h}=Al({x:t.x+t.width,y:t.y+t.height},[r,o,i]),x=l-g,m=c-h;return{left:Math.floor(d),top:Math.floor(f),right:Math.floor(x),bottom:Math.floor(m)}}const Lc=(t,r,o,i,l,c)=>{const d=c1(c,r,o),f=(r-d.x)/t.width,g=(o-d.y)/t.height,h=Math.min(f,g),x=No(h,i,l),m=t.x+t.width/2,y=t.y+t.height/2,w=r/2-m*x,S=o/2-y*x,C=d1(t,w,S,x,r,o),k={left:Math.min(C.left-d.left,0),top:Math.min(C.top-d.top,0),right:Math.min(C.right-d.right,0),bottom:Math.min(C.bottom-d.bottom,0)};return{x:w-k.left+k.right,y:S-k.top+k.bottom,zoom:x}},Ts=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function jo(t){return t!=null&&t!=="parent"}function _n(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function Mh(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function _h(t,r={width:0,height:0},o,i,l){const c={...t},d=i.get(o);if(d){const f=d.origin||l;c.x+=d.internals.positionAbsolute.x-(r.width??0)*f[0],c.y+=d.internals.positionAbsolute.y-(r.height??0)*f[1]}return c}function Up(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function f1(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function p1(t){return{...Sh,...t||{}}}function bs(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:c,y:d}=on(t),f=Hs({x:c-((l==null?void 0:l.left)??0),y:d-((l==null?void 0:l.top)??0)},i),{x:g,y:h}=o?Fs(f,r):f;return{xSnapped:g,ySnapped:h,...f}}const zc=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ph=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},m1=["INPUT","SELECT","TEXTAREA"];function Dh(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:m1.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Th=t=>"clientX"in t,on=(t,r)=>{var c,d;const o=Th(t),i=o?t.clientX:(c=t.touches)==null?void 0:c[0].clientX,l=o?t.clientY:(d=t.touches)==null?void 0:d[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Yp=(t,r,o,i,l)=>{const c=r.querySelectorAll(`.${t}`);return!c||!c.length?null:Array.from(c).map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:l,position:d.getAttribute("data-handlepos"),x:(f.left-o.left)/i,y:(f.top-o.top)/i,...zc(d)}})};function Oh({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:f}){const g=t*.125+l*.375+d*.375+o*.125,h=r*.125+c*.375+f*.375+i*.125,x=Math.abs(g-t),m=Math.abs(h-r);return[g,h,x,m]}function fl(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Xp({pos:t,x1:r,y1:o,x2:i,y2:l,c}){switch(t){case je.Left:return[r-fl(r-i,c),o];case je.Right:return[r+fl(i-r,c),o];case je.Top:return[r,o-fl(o-l,c)];case je.Bottom:return[r,o+fl(l-o,c)]}}function Ul({sourceX:t,sourceY:r,sourcePosition:o=je.Bottom,targetX:i,targetY:l,targetPosition:c=je.Top,curvature:d=.25}){const[f,g]=Xp({pos:o,x1:t,y1:r,x2:i,y2:l,c:d}),[h,x]=Xp({pos:c,x1:i,y1:l,x2:t,y2:r,c:d}),[m,y,w,S]=Oh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:f,sourceControlY:g,targetControlX:h,targetControlY:x});return[`M${t},${r} C${f},${g} ${h},${x} ${i},${l}`,m,y,w,S]}function Ah({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,c=o<t?o+l:o-l,d=Math.abs(i-r)/2,f=i<r?i+d:i-d;return[c,f,l,d]}function h1({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:c="basic"}){if(c==="manual")return i;const d=l&&o?i+1e3:i,f=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return d+f}function g1({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const c=Bl(Ol(t),Ol(r));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return Ds(d,Wl(c))>0}const x1=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,y1=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),v1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||x1;let l;return jh(t)?l={...t}:l={...t,id:i(t)},y1(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Lh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,c,d,f]=Ah({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,c,d,f]}const Gp={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},w1=({source:t,sourcePosition:r=je.Bottom,target:o})=>r===je.Left||r===je.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},Kp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function S1({source:t,sourcePosition:r=je.Bottom,target:o,targetPosition:i=je.Top,center:l,offset:c,stepPosition:d}){const f=Gp[r],g=Gp[i],h={x:t.x+f.x*c,y:t.y+f.y*c},x={x:o.x+g.x*c,y:o.y+g.y*c},m=w1({source:h,sourcePosition:r,target:x}),y=m.x!==0?"x":"y",w=m[y];let S=[],C,k;const b={x:0,y:0},T={x:0,y:0},[,,j,_]=Ah({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(f[y]*g[y]===-1){y==="x"?(C=l.x??h.x+(x.x-h.x)*d,k=l.y??(h.y+x.y)/2):(C=l.x??(h.x+x.x)/2,k=l.y??h.y+(x.y-h.y)*d);const L=[{x:C,y:h.y},{x:C,y:x.y}],P=[{x:h.x,y:k},{x:x.x,y:k}];f[y]===w?S=y==="x"?L:P:S=y==="x"?P:L}else{const L=[{x:h.x,y:x.y}],P=[{x:x.x,y:h.y}];if(y==="x"?S=f.x===w?P:L:S=f.y===w?L:P,r===i){const M=Math.abs(t[y]-o[y]);if(M<=c){const X=Math.min(c-1,c-M);f[y]===w?b[y]=(h[y]>t[y]?-1:1)*X:T[y]=(x[y]>o[y]?-1:1)*X}}if(r!==i){const M=y==="x"?"y":"x",X=f[y]===g[M],R=h[M]>x[M],W=h[M]<x[M];(f[y]===1&&(!X&&R||X&&W)||f[y]!==1&&(!X&&W||X&&R))&&(S=y==="x"?L:P)}const U={x:h.x+b.x,y:h.y+b.y},K={x:x.x+T.x,y:x.y+T.y},se=Math.max(Math.abs(U.x-S[0].x),Math.abs(K.x-S[0].x)),B=Math.max(Math.abs(U.y-S[0].y),Math.abs(K.y-S[0].y));se>=B?(C=(U.x+K.x)/2,k=S[0].y):(C=S[0].x,k=(U.y+K.y)/2)}return[[t,{x:h.x+b.x,y:h.y+b.y},...S,{x:x.x+T.x,y:x.y+T.y},o],C,k,j,_]}function N1(t,r,o,i){const l=Math.min(Kp(t,r)/2,Kp(r,o)/2,i),{x:c,y:d}=r;if(t.x===c&&c===o.x||t.y===d&&d===o.y)return`L${c} ${d}`;if(t.y===d){const h=t.x<o.x?-1:1,x=t.y<o.y?1:-1;return`L ${c+l*h},${d}Q ${c},${d} ${c},${d+l*x}`}const f=t.x<o.x?1:-1,g=t.y<o.y?-1:1;return`L ${c},${d+l*g}Q ${c},${d} ${c+l*f},${d}`}function yc({sourceX:t,sourceY:r,sourcePosition:o=je.Bottom,targetX:i,targetY:l,targetPosition:c=je.Top,borderRadius:d=5,centerX:f,centerY:g,offset:h=20,stepPosition:x=.5}){const[m,y,w,S,C]=S1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:c,center:{x:f,y:g},offset:h,stepPosition:x});return[m.reduce((b,T,j)=>{let _="";return j>0&&j<m.length-1?_=N1(m[j-1],T,m[j+1],d):_=`${j===0?"M":"L"}${T.x} ${T.y}`,b+=_,b},""),y,w,S,C]}function Qp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function k1(t){var m;const{sourceNode:r,targetNode:o}=t;if(!Qp(r)||!Qp(o))return null;const i=r.internals.handleBounds||qp(r.handles),l=o.internals.handleBounds||qp(o.handles),c=Zp((i==null?void 0:i.source)??[],t.sourceHandle),d=Zp(t.connectionMode===So.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!c||!d)return(m=t.onError)==null||m.call(t,"008",gn.error008(c?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=(c==null?void 0:c.position)||je.Bottom,g=(d==null?void 0:d.position)||je.Top,h=_r(r,c,f),x=_r(o,d,g);return{sourceX:h.x,sourceY:h.y,targetX:x.x,targetY:x.y,sourcePosition:f,targetPosition:g}}function qp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function _r(t,r,o=je.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,c=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:d,height:f}=r??_n(t);if(i)return{x:l+d/2,y:c+f/2};switch((r==null?void 0:r.position)??o){case je.Top:return{x:l+d/2,y:c};case je.Right:return{x:l+d,y:c+f/2};case je.Bottom:return{x:l+d/2,y:c+f};case je.Left:return{x:l,y:c+f/2}}}function Zp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function vc(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function j1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const c=new Set;return t.reduce((d,f)=>([f.markerStart||i,f.markerEnd||l].forEach(g=>{if(g&&typeof g=="object"){const h=vc(g,r);c.has(h)||(d.push({id:h,color:g.color||o,...g}),c.add(h))}}),d),[]).sort((d,f)=>d.id.localeCompare(f.id))}const zh=1e3,b1=10,$c={nodeOrigin:[0,0],nodeExtent:_s,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},C1={...$c,checkEquality:!0};function Rc(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function I1(t,r,o){const i=Rc($c,o);for(const l of t.values())if(l.parentId)Hc(l,t,r,i);else{const c=$s(l,i.nodeOrigin),d=jo(l.extent)?l.extent:i.nodeExtent,f=Mr(c,d,_n(l));l.internals.positionAbsolute=f}}function E1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const c={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(c):l.type==="target"&&i.push(c)}return{source:o,target:i}}function Fc(t){return t==="manual"}function wc(t,r,o,i={}){var h,x;const l=Rc(C1,i),c={i:0},d=new Map(r),f=l!=null&&l.elevateNodesOnSelect&&!Fc(l.zIndexMode)?zh:0;let g=t.length>0;r.clear(),o.clear();for(const m of t){let y=d.get(m.id);if(l.checkEquality&&m===(y==null?void 0:y.internals.userNode))r.set(m.id,y);else{const w=$s(m,l.nodeOrigin),S=jo(m.extent)?m.extent:l.nodeExtent,C=Mr(w,S,_n(m));y={...l.defaults,...m,measured:{width:(h=m.measured)==null?void 0:h.width,height:(x=m.measured)==null?void 0:x.height},internals:{positionAbsolute:C,handleBounds:E1(m,y),z:$h(m,f,l.zIndexMode),userNode:m}},r.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(g=!1),m.parentId&&Hc(y,r,o,i,c)}return g}function M1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function Hc(t,r,o,i,l){const{elevateNodesOnSelect:c,nodeOrigin:d,nodeExtent:f,zIndexMode:g}=Rc($c,i),h=t.parentId,x=r.get(h);if(!x){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}M1(t,o),l&&!x.parentId&&x.internals.rootParentIndex===void 0&&g==="auto"&&(x.internals.rootParentIndex=++l.i,x.internals.z=x.internals.z+l.i*b1),l&&x.internals.rootParentIndex!==void 0&&(l.i=x.internals.rootParentIndex);const m=c&&!Fc(g)?zh:0,{x:y,y:w,z:S}=_1(t,x,d,f,m,g),{positionAbsolute:C}=t.internals,k=y!==C.x||w!==C.y;(k||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:k?{x:y,y:w}:C,z:S}})}function $h(t,r,o){const i=rn(t.zIndex)?t.zIndex:0;return Fc(o)?i:i+(t.selected?r:0)}function _1(t,r,o,i,l,c){const{x:d,y:f}=r.internals.positionAbsolute,g=_n(t),h=$s(t,o),x=jo(t.extent)?Mr(h,t.extent,g):h;let m=Mr({x:d+x.x,y:f+x.y},i,g);t.extent==="parent"&&(m=Ch(m,g,r));const y=$h(t,l,c),w=r.internals.z??0;return{x:m.x,y:m.y,z:w>=y?w+1:y}}function Vc(t,r,o,i=[0,0]){var d;const l=[],c=new Map;for(const f of t){const g=r.get(f.parentId);if(!g)continue;const h=((d=c.get(f.parentId))==null?void 0:d.expandedRect)??ko(g),x=Eh(h,f.rect);c.set(f.parentId,{expandedRect:x,parent:g})}return c.size>0&&c.forEach(({expandedRect:f,parent:g},h)=>{var j;const x=g.internals.positionAbsolute,m=_n(g),y=g.origin??i,w=f.x<x.x?Math.round(Math.abs(x.x-f.x)):0,S=f.y<x.y?Math.round(Math.abs(x.y-f.y)):0,C=Math.max(m.width,Math.round(f.width)),k=Math.max(m.height,Math.round(f.height)),b=(C-m.width)*y[0],T=(k-m.height)*y[1];(w>0||S>0||b||T)&&(l.push({id:h,type:"position",position:{x:g.position.x-w+b,y:g.position.y-S+T}}),(j=o.get(h))==null||j.forEach(_=>{t.some(A=>A.id===_.id)||l.push({id:_.id,type:"position",position:{x:_.position.x+w,y:_.position.y+S}})})),(m.width<f.width||m.height<f.height||w||S)&&l.push({id:h,type:"dimensions",setAttributes:!0,dimensions:{width:C+(w?y[0]*w-b:0),height:k+(S?y[1]*S-T:0)}})}),l}function P1(t,r,o,i,l,c,d){const f=i==null?void 0:i.querySelector(".xyflow__viewport");let g=!1;if(!f)return{changes:[],updatedInternals:g};const h=[],x=window.getComputedStyle(f),{m22:m}=new window.DOMMatrixReadOnly(x.transform),y=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),g=!0;continue}const C=zc(w.nodeElement),k=S.measured.width!==C.width||S.measured.height!==C.height;if(!!(C.width&&C.height&&(k||!S.internals.handleBounds||w.force))){const T=w.nodeElement.getBoundingClientRect(),j=jo(S.extent)?S.extent:c;let{positionAbsolute:_}=S.internals;S.parentId&&S.extent==="parent"?_=Ch(_,C,r.get(S.parentId)):j&&(_=Mr(_,j,C));const A={...S,measured:C,internals:{...S.internals,positionAbsolute:_,handleBounds:{source:Yp("source",w.nodeElement,T,m,S.id),target:Yp("target",w.nodeElement,T,m,S.id)}}};r.set(S.id,A),S.parentId&&Hc(A,r,o,{nodeOrigin:l,zIndexMode:d}),g=!0,k&&(h.push({id:S.id,type:"dimensions",dimensions:C}),S.expandParent&&S.parentId&&y.push({id:S.id,parentId:S.parentId,rect:ko(A,l)}))}}if(y.length>0){const w=Vc(y,r,o,l);h.push(...w)}return{changes:h,updatedInternals:g}}async function D1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:c}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const d=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,c]],i),f=!!d&&(d.x!==o[0]||d.y!==o[1]||d.k!==o[2]);return Promise.resolve(f)}function Jp(t,r,o,i,l,c){let d=l;const f=i.get(d)||new Map;i.set(d,f.set(o,r)),d=`${l}-${t}`;const g=i.get(d)||new Map;if(i.set(d,g.set(o,r)),c){d=`${l}-${t}-${c}`;const h=i.get(d)||new Map;i.set(d,h.set(o,r))}}function Rh(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:c,sourceHandle:d=null,targetHandle:f=null}=i,g={edgeId:i.id,source:l,target:c,sourceHandle:d,targetHandle:f},h=`${l}-${d}--${c}-${f}`,x=`${c}-${f}--${l}-${d}`;Jp("source",g,x,t,l,d),Jp("target",g,h,t,c,f),r.set(i.id,i)}}function Fh(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:Fh(o,r):!1}function em(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function T1(t,r,o,i){const l=new Map;for(const[c,d]of t)if((d.selected||d.id===i)&&(!d.parentId||!Fh(d,t))&&(d.draggable||r&&typeof d.draggable>"u")){const f=t.get(c);f&&l.set(c,{id:c,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return l}function Ju({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var d,f,g;const l=[];for(const[h,x]of r){const m=(d=o.get(h))==null?void 0:d.internals.userNode;m&&l.push({...m,position:x.position,dragging:i})}if(!t)return[l[0],l];const c=(f=o.get(t))==null?void 0:f.internals.userNode;return[c?{...c,position:((g=r.get(t))==null?void 0:g.position)||c.position,dragging:i}:l[0],l]}function O1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const c={x:o-l.distance.x,y:i-l.distance.y},d=Fs(c,r);return{x:d.x-c.x,y:d.y-c.y}}function A1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let c={x:null,y:null},d=0,f=new Map,g=!1,h={x:0,y:0},x=null,m=!1,y=null,w=!1,S=!1,C=null;function k({noDragClassName:T,handleSelector:j,domNode:_,isSelectable:A,nodeId:L,nodeClickDistance:P=0}){y=Tt(_);function U({x:M,y:X}){const{nodeLookup:R,nodeExtent:W,snapGrid:V,snapToGrid:H,nodeOrigin:$,onNodeDrag:N,onSelectionDrag:O,onError:E,updateNodePositions:z}=r();c={x:M,y:X};let J=!1;const te=f.size>1,Q=te&&W?xc(Rs(f)):null,ie=te&&H?O1({dragItems:f,snapGrid:V,x:M,y:X}):null;for(const[le,oe]of f){if(!R.has(le))continue;let ae={x:M-oe.distance.x,y:X-oe.distance.y};H&&(ae=ie?{x:Math.round(ae.x+ie.x),y:Math.round(ae.y+ie.y)}:Fs(ae,V));let me=null;if(te&&W&&!oe.extent&&Q){const{positionAbsolute:ee}=oe.internals,he=ee.x-Q.x+W[0][0],we=ee.x+oe.measured.width-Q.x2+W[1][0],xe=ee.y-Q.y+W[0][1],Me=ee.y+oe.measured.height-Q.y2+W[1][1];me=[[he,xe],[we,Me]]}const{position:be,positionAbsolute:q}=bh({nodeId:le,nextPosition:ae,nodeLookup:R,nodeExtent:me||W,nodeOrigin:$,onError:E});J=J||oe.position.x!==be.x||oe.position.y!==be.y,oe.position=be,oe.internals.positionAbsolute=q}if(S=S||J,!!J&&(z(f,!0),C&&(i||N||!L&&O))){const[le,oe]=Ju({nodeId:L,dragItems:f,nodeLookup:R});i==null||i(C,f,le,oe),N==null||N(C,le,oe),L||O==null||O(C,oe)}}async function K(){if(!x)return;const{transform:M,panBy:X,autoPanSpeed:R,autoPanOnNodeDrag:W}=r();if(!W){g=!1,cancelAnimationFrame(d);return}const[V,H]=Ih(h,x,R);(V!==0||H!==0)&&(c.x=(c.x??0)-V/M[2],c.y=(c.y??0)-H/M[2],await X({x:V,y:H})&&U(c)),d=requestAnimationFrame(K)}function se(M){var te;const{nodeLookup:X,multiSelectionActive:R,nodesDraggable:W,transform:V,snapGrid:H,snapToGrid:$,selectNodesOnDrag:N,onNodeDragStart:O,onSelectionDragStart:E,unselectNodesAndEdges:z}=r();m=!0,(!N||!A)&&!R&&L&&((te=X.get(L))!=null&&te.selected||z()),A&&N&&L&&(t==null||t(L));const J=bs(M.sourceEvent,{transform:V,snapGrid:H,snapToGrid:$,containerBounds:x});if(c=J,f=T1(X,W,J,L),f.size>0&&(o||O||!L&&E)){const[Q,ie]=Ju({nodeId:L,dragItems:f,nodeLookup:X});o==null||o(M.sourceEvent,f,Q,ie),O==null||O(M.sourceEvent,Q,ie),L||E==null||E(M.sourceEvent,ie)}}const B=oh().clickDistance(P).on("start",M=>{const{domNode:X,nodeDragThreshold:R,transform:W,snapGrid:V,snapToGrid:H}=r();x=(X==null?void 0:X.getBoundingClientRect())||null,w=!1,S=!1,C=M.sourceEvent,R===0&&se(M),c=bs(M.sourceEvent,{transform:W,snapGrid:V,snapToGrid:H,containerBounds:x}),h=on(M.sourceEvent,x)}).on("drag",M=>{const{autoPanOnNodeDrag:X,transform:R,snapGrid:W,snapToGrid:V,nodeDragThreshold:H,nodeLookup:$}=r(),N=bs(M.sourceEvent,{transform:R,snapGrid:W,snapToGrid:V,containerBounds:x});if(C=M.sourceEvent,(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||L&&!$.has(L))&&(w=!0),!w){if(!g&&X&&m&&(g=!0,K()),!m){const O=on(M.sourceEvent,x),E=O.x-h.x,z=O.y-h.y;Math.sqrt(E*E+z*z)>H&&se(M)}(c.x!==N.xSnapped||c.y!==N.ySnapped)&&f&&m&&(h=on(M.sourceEvent,x),U(N))}}).on("end",M=>{if(!(!m||w)&&(g=!1,m=!1,cancelAnimationFrame(d),f.size>0)){const{nodeLookup:X,updateNodePositions:R,onNodeDragStop:W,onSelectionDragStop:V}=r();if(S&&(R(f,!1),S=!1),l||W||!L&&V){const[H,$]=Ju({nodeId:L,dragItems:f,nodeLookup:X,dragging:!1});l==null||l(M.sourceEvent,f,H,$),W==null||W(M.sourceEvent,H,$),L||V==null||V(M.sourceEvent,$)}}}).filter(M=>{const X=M.target;return!M.button&&(!T||!em(X,`.${T}`,_))&&(!j||em(X,j,_))});y.call(B)}function b(){y==null||y.on(".drag",null)}return{update:k,destroy:b}}function L1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const c of r.values())Ds(l,ko(c))>0&&i.push(c);return i}const z1=250;function $1(t,r,o,i){var f,g;let l=[],c=1/0;const d=L1(t,o,r+z1);for(const h of d){const x=[...((f=h.internals.handleBounds)==null?void 0:f.source)??[],...((g=h.internals.handleBounds)==null?void 0:g.target)??[]];for(const m of x){if(i.nodeId===m.nodeId&&i.type===m.type&&i.id===m.id)continue;const{x:y,y:w}=_r(h,m,m.position,!0),S=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(w-t.y,2));S>r||(S<c?(l=[{...m,x:y,y:w}],c=S):S===c&&l.push({...m,x:y,y:w}))}}if(!l.length)return null;if(l.length>1){const h=i.type==="source"?"target":"source";return l.find(x=>x.type===h)??l[0]}return l[0]}function Hh(t,r,o,i,l,c=!1){var h,x,m;const d=i.get(t);if(!d)return null;const f=l==="strict"?(h=d.internals.handleBounds)==null?void 0:h[r]:[...((x=d.internals.handleBounds)==null?void 0:x.source)??[],...((m=d.internals.handleBounds)==null?void 0:m.target)??[]],g=(o?f==null?void 0:f.find(y=>y.id===o):f==null?void 0:f[0])??null;return g&&c?{...g,..._r(d,g,g.position,!0)}:g}function Vh(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function R1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const Bh=()=>!0;function F1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:c,isTarget:d,domNode:f,nodeLookup:g,lib:h,autoPanOnConnect:x,flowId:m,panBy:y,cancelConnection:w,onConnectStart:S,onConnect:C,onConnectEnd:k,isValidConnection:b=Bh,onReconnectEnd:T,updateConnection:j,getTransform:_,getFromHandle:A,autoPanSpeed:L,dragThreshold:P=1,handleDomNode:U}){const K=Ph(t.target);let se=0,B;const{x:M,y:X}=on(t),R=Vh(c,U),W=f==null?void 0:f.getBoundingClientRect();let V=!1;if(!W||!R)return;const H=Hh(l,R,i,g,r);if(!H)return;let $=on(t,W),N=!1,O=null,E=!1,z=null;function J(){if(!x||!W)return;const[be,q]=Ih($,W,L);y({x:be,y:q}),se=requestAnimationFrame(J)}const te={...H,nodeId:l,type:R,position:H.position},Q=g.get(l);let le={inProgress:!0,isValid:null,from:_r(Q,te,je.Left,!0),fromHandle:te,fromPosition:te.position,fromNode:Q,to:$,toHandle:null,toPosition:Vp[te.position],toNode:null,pointer:$};function oe(){V=!0,j(le),S==null||S(t,{nodeId:l,handleId:i,handleType:R})}P===0&&oe();function ae(be){if(!V){const{x:Me,y:$e}=on(be),Ke=Me-M,Ze=$e-X;if(!(Ke*Ke+Ze*Ze>P*P))return;oe()}if(!A()||!te){me(be);return}const q=_();$=on(be,W),B=$1(Hs($,q,!1,[1,1]),o,g,te),N||(J(),N=!0);const ee=Wh(be,{handle:B,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:d?"target":"source",isValidConnection:b,doc:K,lib:h,flowId:m,nodeLookup:g});z=ee.handleDomNode,O=ee.connection,E=R1(!!B,ee.isValid);const he=g.get(l),we=he?_r(he,te,je.Left,!0):le.from,xe={...le,from:we,isValid:E,to:ee.toHandle&&E?Al({x:ee.toHandle.x,y:ee.toHandle.y},q):$,toHandle:ee.toHandle,toPosition:E&&ee.toHandle?ee.toHandle.position:Vp[te.position],toNode:ee.toHandle?g.get(ee.toHandle.nodeId):null,pointer:$};j(xe),le=xe}function me(be){if(!("touches"in be&&be.touches.length>0)){if(V){(B||z)&&O&&E&&(C==null||C(O));const{inProgress:q,...ee}=le,he={...ee,toPosition:le.toHandle?le.toPosition:null};k==null||k(be,he),c&&(T==null||T(be,he))}w(),cancelAnimationFrame(se),N=!1,E=!1,O=null,z=null,K.removeEventListener("mousemove",ae),K.removeEventListener("mouseup",me),K.removeEventListener("touchmove",ae),K.removeEventListener("touchend",me)}}K.addEventListener("mousemove",ae),K.addEventListener("mouseup",me),K.addEventListener("touchmove",ae),K.addEventListener("touchend",me)}function Wh(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:c,doc:d,lib:f,flowId:g,isValidConnection:h=Bh,nodeLookup:x}){const m=c==="target",y=r?d.querySelector(`.${f}-flow__handle[data-id="${g}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=on(t),C=d.elementFromPoint(w,S),k=C!=null&&C.classList.contains(`${f}-flow__handle`)?C:y,b={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const T=Vh(void 0,k),j=k.getAttribute("data-nodeid"),_=k.getAttribute("data-handleid"),A=k.classList.contains("connectable"),L=k.classList.contains("connectableend");if(!j||!T)return b;const P={source:m?j:i,sourceHandle:m?_:l,target:m?i:j,targetHandle:m?l:_};b.connection=P;const K=A&&L&&(o===So.Strict?m&&T==="source"||!m&&T==="target":j!==i||_!==l);b.isValid=K&&h(P),b.toHandle=Hh(j,T,_,x,o,!0)}return b}const Sc={onPointerDown:F1,isValid:Wh};function H1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=Tt(t);function c({translateExtent:f,width:g,height:h,zoomStep:x=1,pannable:m=!0,zoomable:y=!0,inversePan:w=!1}){const S=j=>{if(j.sourceEvent.type!=="wheel"||!r)return;const _=o(),A=j.sourceEvent.ctrlKey&&Ts()?10:1,L=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*x,P=_[2]*Math.pow(2,L*A);r.scaleTo(P)};let C=[0,0];const k=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(C=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},b=j=>{const _=o();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!r)return;const A=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],L=[A[0]-C[0],A[1]-C[1]];C=A;const P=i()*Math.max(_[2],Math.log(_[2]))*(w?-1:1),U={x:_[0]-L[0]*P,y:_[1]-L[1]*P},K=[[0,0],[g,h]];r.setViewportConstrained({x:U.x,y:U.y,zoom:_[2]},K,f)},T=vh().on("start",k).on("zoom",m?b:null).on("zoom.wheel",y?S:null);l.call(T,{})}function d(){l.on("zoom",null)}return{update:c,destroy:d,pointer:tn}}const Yl=t=>({x:t.x,y:t.y,zoom:t.k}),ec=({x:t,y:r,zoom:o})=>Vl.translate(t,r).scale(o),ho=(t,r)=>t.target.closest(`.${r}`),Uh=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),V1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,tc=(t,r=0,o=V1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},Yh=t=>{const r=t.ctrlKey&&Ts()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function B1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:c,zoomOnPinch:d,onPanZoomStart:f,onPanZoom:g,onPanZoomEnd:h}){return x=>{if(ho(x,r))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const m=o.property("__zoom").k||1;if(x.ctrlKey&&d){const k=tn(x),b=Yh(x),T=m*Math.pow(2,b);i.scaleTo(o,T,k,x);return}const y=x.deltaMode===1?20:1;let w=l===Cr.Vertical?0:x.deltaX*y,S=l===Cr.Horizontal?0:x.deltaY*y;!Ts()&&x.shiftKey&&l!==Cr.Vertical&&(w=x.deltaY*y,S=0),i.translateBy(o,-(w/m)*c,-(S/m)*c,{internal:!0});const C=Yl(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(g==null||g(x,C),t.panScrollTimeout=setTimeout(()=>{h==null||h(x,C),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,f==null||f(x,C))}}function W1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const c=i.type==="wheel",d=!r&&c&&!i.ctrlKey,f=ho(i,t);if(i.ctrlKey&&c&&f&&i.preventDefault(),d||f)return null;i.preventDefault(),o.call(this,i,l)}}function U1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var c,d,f;if((c=i.sourceEvent)!=null&&c.internal)return;const l=Yl(i.transform);t.mouseButton=((d=i.sourceEvent)==null?void 0:d.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((f=i.sourceEvent)==null?void 0:f.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function Y1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return c=>{var d,f;t.usedRightMouseButton=!!(o&&Uh(r,t.mouseButton??0)),(d=c.sourceEvent)!=null&&d.sync||i([c.transform.x,c.transform.y,c.transform.k]),l&&!((f=c.sourceEvent)!=null&&f.internal)&&(l==null||l(c.sourceEvent,Yl(c.transform)))}}function X1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:c}){return d=>{var f;if(!((f=d.sourceEvent)!=null&&f.internal)&&(t.isZoomingOrPanning=!1,c&&Uh(r,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&c(d.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const g=Yl(d.transform);t.prevViewport=g,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(d.sourceEvent,g)},o?150:0)}}}function G1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:c,userSelectionActive:d,noWheelClassName:f,noPanClassName:g,lib:h,connectionInProgress:x}){return m=>{var k;const y=t||r,w=o&&m.ctrlKey,S=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(ho(m,`${h}-flow__node`)||ho(m,`${h}-flow__edge`)))return!0;if(!i&&!y&&!l&&!c&&!o||d||x&&!S||ho(m,f)&&S||ho(m,g)&&(!S||l&&S&&!t)||!o&&m.ctrlKey&&S)return!1;if(!o&&m.type==="touchstart"&&((k=m.touches)==null?void 0:k.length)>1)return m.preventDefault(),!1;if(!y&&!l&&!w&&S||!i&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(i)&&!i.includes(m.button)&&m.type==="mousedown")return!1;const C=Array.isArray(i)&&i.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||S)&&C}}function K1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:f,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=t.getBoundingClientRect(),m=vh().scaleExtent([r,o]).translateExtent(i),y=Tt(t).call(m);T({x:l.x,y:l.y,zoom:No(l.zoom,r,o)},[[0,0],[x.width,x.height]],i);const w=y.on("wheel.zoom"),S=y.on("dblclick.zoom");m.wheelDelta(Yh);function C(B,M){return y?new Promise(X=>{m==null||m.interpolate((M==null?void 0:M.interpolate)==="linear"?js:Sl).transform(tc(y,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>X(!0)),B)}):Promise.resolve(!1)}function k({noWheelClassName:B,noPanClassName:M,onPaneContextMenu:X,userSelectionActive:R,panOnScroll:W,panOnDrag:V,panOnScrollMode:H,panOnScrollSpeed:$,preventScrolling:N,zoomOnPinch:O,zoomOnScroll:E,zoomOnDoubleClick:z,zoomActivationKeyPressed:J,lib:te,onTransformChange:Q,connectionInProgress:ie,paneClickDistance:le,selectionOnDrag:oe}){R&&!h.isZoomingOrPanning&&b();const ae=W&&!J&&!R;m.clickDistance(oe?1/0:!rn(le)||le<0?0:le);const me=ae?B1({zoomPanValues:h,noWheelClassName:B,d3Selection:y,d3Zoom:m,panOnScrollMode:H,panOnScrollSpeed:$,zoomOnPinch:O,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:f}):W1({noWheelClassName:B,preventScrolling:N,d3ZoomHandler:w});if(y.on("wheel.zoom",me,{passive:!1}),!R){const q=U1({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:d});m.on("start",q);const ee=Y1({zoomPanValues:h,panOnDrag:V,onPaneContextMenu:!!X,onPanZoom:c,onTransformChange:Q});m.on("zoom",ee);const he=X1({zoomPanValues:h,panOnDrag:V,panOnScroll:W,onPaneContextMenu:X,onPanZoomEnd:f,onDraggingChange:g});m.on("end",he)}const be=G1({zoomActivationKeyPressed:J,panOnDrag:V,zoomOnScroll:E,panOnScroll:W,zoomOnDoubleClick:z,zoomOnPinch:O,userSelectionActive:R,noPanClassName:M,noWheelClassName:B,lib:te,connectionInProgress:ie});m.filter(be),z?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function b(){m.on("zoom",null)}async function T(B,M,X){const R=ec(B),W=m==null?void 0:m.constrain()(R,M,X);return W&&await C(W),new Promise(V=>V(W))}async function j(B,M){const X=ec(B);return await C(X,M),new Promise(R=>R(X))}function _(B){if(y){const M=ec(B),X=y.property("__zoom");(X.k!==B.zoom||X.x!==B.x||X.y!==B.y)&&(m==null||m.transform(y,M,null,{sync:!0}))}}function A(){const B=y?yh(y.node()):{x:0,y:0,k:1};return{x:B.x,y:B.y,zoom:B.k}}function L(B,M){return y?new Promise(X=>{m==null||m.interpolate((M==null?void 0:M.interpolate)==="linear"?js:Sl).scaleTo(tc(y,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>X(!0)),B)}):Promise.resolve(!1)}function P(B,M){return y?new Promise(X=>{m==null||m.interpolate((M==null?void 0:M.interpolate)==="linear"?js:Sl).scaleBy(tc(y,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>X(!0)),B)}):Promise.resolve(!1)}function U(B){m==null||m.scaleExtent(B)}function K(B){m==null||m.translateExtent(B)}function se(B){const M=!rn(B)||B<0?0:B;m==null||m.clickDistance(M)}return{update:k,destroy:b,setViewport:j,setViewportConstrained:T,getViewport:A,scaleTo:L,scaleBy:P,setScaleExtent:U,setTranslateExtent:K,syncViewport:_,setClickDistance:se}}var Pr;(function(t){t.Line="line",t.Handle="handle"})(Pr||(Pr={}));const Q1=["top-left","top-right","bottom-left","bottom-right"],q1=["top","right","bottom","left"];function Z1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:c}){const d=t-r,f=o-i,g=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&l&&(g[0]=g[0]*-1),f&&c&&(g[1]=g[1]*-1),g}function tm(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Zn(t,r){return Math.max(0,r-t)}function Jn(t,r){return Math.max(0,t-r)}function pl(t,r,o){return Math.max(0,r-t,t-o)}function nm(t,r){return t?!r:r}function J1(t,r,o,i,l,c,d,f){let{affectsX:g,affectsY:h}=r;const{isHorizontal:x,isVertical:m}=r,y=x&&m,{xSnapped:w,ySnapped:S}=o,{minWidth:C,maxWidth:k,minHeight:b,maxHeight:T}=i,{x:j,y:_,width:A,height:L,aspectRatio:P}=t;let U=Math.floor(x?w-t.pointerX:0),K=Math.floor(m?S-t.pointerY:0);const se=A+(g?-U:U),B=L+(h?-K:K),M=-c[0]*A,X=-c[1]*L;let R=pl(se,C,k),W=pl(B,b,T);if(d){let $=0,N=0;g&&U<0?$=Zn(j+U+M,d[0][0]):!g&&U>0&&($=Jn(j+se+M,d[1][0])),h&&K<0?N=Zn(_+K+X,d[0][1]):!h&&K>0&&(N=Jn(_+B+X,d[1][1])),R=Math.max(R,$),W=Math.max(W,N)}if(f){let $=0,N=0;g&&U>0?$=Jn(j+U,f[0][0]):!g&&U<0&&($=Zn(j+se,f[1][0])),h&&K>0?N=Jn(_+K,f[0][1]):!h&&K<0&&(N=Zn(_+B,f[1][1])),R=Math.max(R,$),W=Math.max(W,N)}if(l){if(x){const $=pl(se/P,b,T)*P;if(R=Math.max(R,$),d){let N=0;!g&&!h||g&&!h&&y?N=Jn(_+X+se/P,d[1][1])*P:N=Zn(_+X+(g?U:-U)/P,d[0][1])*P,R=Math.max(R,N)}if(f){let N=0;!g&&!h||g&&!h&&y?N=Zn(_+se/P,f[1][1])*P:N=Jn(_+(g?U:-U)/P,f[0][1])*P,R=Math.max(R,N)}}if(m){const $=pl(B*P,C,k)/P;if(W=Math.max(W,$),d){let N=0;!g&&!h||h&&!g&&y?N=Jn(j+B*P+M,d[1][0])/P:N=Zn(j+(h?K:-K)*P+M,d[0][0])/P,W=Math.max(W,N)}if(f){let N=0;!g&&!h||h&&!g&&y?N=Zn(j+B*P,f[1][0])/P:N=Jn(j+(h?K:-K)*P,f[0][0])/P,W=Math.max(W,N)}}}K=K+(K<0?W:-W),U=U+(U<0?R:-R),l&&(y?se>B*P?K=(nm(g,h)?-U:U)/P:U=(nm(g,h)?-K:K)*P:x?(K=U/P,h=g):(U=K*P,g=h));const V=g?j+U:j,H=h?_+K:_;return{width:A+(g?-U:U),height:L+(h?-K:K),x:c[0]*U*(g?-1:1)+V,y:c[1]*K*(h?-1:1)+H}}const Xh={width:0,height:0,x:0,y:0},eS={...Xh,pointerX:0,pointerY:0,aspectRatio:1};function tS(t){return[[0,0],[t.measured.width,t.measured.height]]}function nS(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,c=t.measured.width??0,d=t.measured.height??0,f=o[0]*c,g=o[1]*d;return[[i-f,l-g],[i+c-f,l+d-g]]}function rS({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const c=Tt(t);let d={controlDirection:tm("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:h,boundaries:x,keepAspectRatio:m,resizeDirection:y,onResizeStart:w,onResize:S,onResizeEnd:C,shouldResize:k}){let b={...Xh},T={...eS};d={boundaries:x,resizeDirection:y,keepAspectRatio:m,controlDirection:tm(h)};let j,_=null,A=[],L,P,U,K=!1;const se=oh().on("start",B=>{const{nodeLookup:M,transform:X,snapGrid:R,snapToGrid:W,nodeOrigin:V,paneDomNode:H}=o();if(j=M.get(r),!j)return;_=(H==null?void 0:H.getBoundingClientRect())??null;const{xSnapped:$,ySnapped:N}=bs(B.sourceEvent,{transform:X,snapGrid:R,snapToGrid:W,containerBounds:_});b={width:j.measured.width??0,height:j.measured.height??0,x:j.position.x??0,y:j.position.y??0},T={...b,pointerX:$,pointerY:N,aspectRatio:b.width/b.height},L=void 0,j.parentId&&(j.extent==="parent"||j.expandParent)&&(L=M.get(j.parentId),P=L&&j.extent==="parent"?tS(L):void 0),A=[],U=void 0;for(const[O,E]of M)if(E.parentId===r&&(A.push({id:O,position:{...E.position},extent:E.extent}),E.extent==="parent"||E.expandParent)){const z=nS(E,j,E.origin??V);U?U=[[Math.min(z[0][0],U[0][0]),Math.min(z[0][1],U[0][1])],[Math.max(z[1][0],U[1][0]),Math.max(z[1][1],U[1][1])]]:U=z}w==null||w(B,{...b})}).on("drag",B=>{const{transform:M,snapGrid:X,snapToGrid:R,nodeOrigin:W}=o(),V=bs(B.sourceEvent,{transform:M,snapGrid:X,snapToGrid:R,containerBounds:_}),H=[];if(!j)return;const{x:$,y:N,width:O,height:E}=b,z={},J=j.origin??W,{width:te,height:Q,x:ie,y:le}=J1(T,d.controlDirection,V,d.boundaries,d.keepAspectRatio,J,P,U),oe=te!==O,ae=Q!==E,me=ie!==$&&oe,be=le!==N&&ae;if(!me&&!be&&!oe&&!ae)return;if((me||be||J[0]===1||J[1]===1)&&(z.x=me?ie:b.x,z.y=be?le:b.y,b.x=z.x,b.y=z.y,A.length>0)){const we=ie-$,xe=le-N;for(const Me of A)Me.position={x:Me.position.x-we+J[0]*(te-O),y:Me.position.y-xe+J[1]*(Q-E)},H.push(Me)}if((oe||ae)&&(z.width=oe&&(!d.resizeDirection||d.resizeDirection==="horizontal")?te:b.width,z.height=ae&&(!d.resizeDirection||d.resizeDirection==="vertical")?Q:b.height,b.width=z.width,b.height=z.height),L&&j.expandParent){const we=J[0]*(z.width??0);z.x&&z.x<we&&(b.x=we,T.x=T.x-(z.x-we));const xe=J[1]*(z.height??0);z.y&&z.y<xe&&(b.y=xe,T.y=T.y-(z.y-xe))}const q=Z1({width:b.width,prevWidth:O,height:b.height,prevHeight:E,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),ee={...b,direction:q};(k==null?void 0:k(B,ee))!==!1&&(K=!0,S==null||S(B,ee),i(z,H))}).on("end",B=>{K&&(C==null||C(B,{...b}),l==null||l({...b}),K=!1)});c.call(se)}function g(){c.on(".drag",null)}return{update:f,destroy:g}}var nc={exports:{}},rc={},oc={exports:{}},sc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function oS(){if(rm)return sc;rm=1;var t=As();function r(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(m,y){var w=y(),S=i({inst:{value:w,getSnapshot:y}}),C=S[0].inst,k=S[1];return c(function(){C.value=w,C.getSnapshot=y,g(C)&&k({inst:C})},[m,w,y]),l(function(){return g(C)&&k({inst:C}),m(function(){g(C)&&k({inst:C})})},[m]),d(w),w}function g(m){var y=m.getSnapshot;m=m.value;try{var w=y();return!o(m,w)}catch{return!0}}function h(m,y){return y()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return sc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,sc}var om;function sS(){return om||(om=1,oc.exports=oS()),oc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function iS(){if(sm)return rc;sm=1;var t=As(),r=sS();function o(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,c=t.useRef,d=t.useEffect,f=t.useMemo,g=t.useDebugValue;return rc.useSyncExternalStoreWithSelector=function(h,x,m,y,w){var S=c(null);if(S.current===null){var C={hasValue:!1,value:null};S.current=C}else C=S.current;S=f(function(){function b(L){if(!T){if(T=!0,j=L,L=y(L),w!==void 0&&C.hasValue){var P=C.value;if(w(P,L))return _=P}return _=L}if(P=_,i(j,L))return P;var U=y(L);return w!==void 0&&w(P,U)?(j=L,P):(j=L,_=U)}var T=!1,j,_,A=m===void 0?null:m;return[function(){return b(x())},A===null?void 0:function(){return b(A())}]},[x,m,y,w]);var k=l(h,S[0],S[1]);return d(function(){C.hasValue=!0,C.value=k},[k]),g(k),k},rc}var im;function lS(){return im||(im=1,nc.exports=iS()),nc.exports}var aS=lS();const uS=Vm(aS),cS={},lm=t=>{let r;const o=new Set,i=(x,m)=>{const y=typeof x=="function"?x(r):x;if(!Object.is(y,r)){const w=r;r=m??(typeof y!="object"||y===null)?y:Object.assign({},r,y),o.forEach(S=>S(r,w))}},l=()=>r,g={setState:i,getState:l,getInitialState:()=>h,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(cS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},h=r=t(i,l,g);return g},dS=t=>t?lm(t):lm,{useDebugValue:fS}=ws,{useSyncExternalStoreWithSelector:pS}=uS,mS=t=>t;function Gh(t,r=mS,o){const i=pS(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return fS(i),i}const am=(t,r)=>{const o=dS(t),i=(l,c=r)=>Gh(o,l,c);return Object.assign(i,o),i},hS=(t,r)=>t?am(t,r):am;function Be(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var gS=Bm();const Xl=D.createContext(null),xS=Xl.Provider,Kh=gn.error001();function Pe(t,r){const o=D.useContext(Xl);if(o===null)throw new Error(Kh);return Gh(o,t,r)}function He(){const t=D.useContext(Xl);if(t===null)throw new Error(Kh);return D.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const um={display:"none"},yS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Qh="react-flow__node-desc",qh="react-flow__edge-desc",vS="react-flow__aria-live",wS=t=>t.ariaLiveMessage,SS=t=>t.ariaLabelConfig;function NS({rfId:t}){const r=Pe(wS);return u.jsx("div",{id:`${vS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:yS,children:r})}function kS({rfId:t,disableKeyboardA11y:r}){const o=Pe(SS);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${Qh}-${t}`,style:um,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${qh}-${t}`,style:um,children:o["edge.a11yDescription.default"]}),!r&&u.jsx(NS,{rfId:t})]})}const Gl=D.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},c)=>{const d=`${t}`.split("-");return u.jsx("div",{className:qe(["react-flow__panel",o,...d]),style:i,ref:c,...l,children:r})});Gl.displayName="Panel";function jS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:u.jsx(Gl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const bS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},ml=t=>t.id;function CS(t,r){return Be(t.selectedNodes.map(ml),r.selectedNodes.map(ml))&&Be(t.selectedEdges.map(ml),r.selectedEdges.map(ml))}function IS({onSelectionChange:t}){const r=He(),{selectedNodes:o,selectedEdges:i}=Pe(bS,CS);return D.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(c=>c(l))},[o,i,t]),null}const ES=t=>!!t.onSelectionChangeHandlers;function MS({onSelectionChange:t}){const r=Pe(ES);return t||r?u.jsx(IS,{onSelectionChange:t}):null}const Zh=[0,0],_S={x:0,y:0,zoom:1},PS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],cm=[...PS,"rfId"],DS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),dm={translateExtent:_s,nodeOrigin:Zh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function TS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:c,setNodeExtent:d,reset:f,setDefaultNodesAndEdges:g}=Pe(DS,Be),h=He();D.useEffect(()=>(g(t.defaultNodes,t.defaultEdges),()=>{x.current=dm,f()}),[]);const x=D.useRef(dm);return D.useEffect(()=>{for(const m of cm){const y=t[m],w=x.current[m];y!==w&&(typeof t[m]>"u"||(m==="nodes"?r(y):m==="edges"?o(y):m==="minZoom"?i(y):m==="maxZoom"?l(y):m==="translateExtent"?c(y):m==="nodeExtent"?d(y):m==="ariaLabelConfig"?h.setState({ariaLabelConfig:p1(y)}):m==="fitView"?h.setState({fitViewQueued:y}):m==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[m]:y})))}x.current=t},cm.map(m=>t[m])),null}function fm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function OS(t){var i;const[r,o]=D.useState(t==="system"?null:t);return D.useEffect(()=>{if(t!=="system"){o(t);return}const l=fm(),c=()=>o(l!=null&&l.matches?"dark":"light");return c(),l==null||l.addEventListener("change",c),()=>{l==null||l.removeEventListener("change",c)}},[t]),r!==null?r:(i=fm())!=null&&i.matches?"dark":"light"}const pm=typeof document<"u"?document:null;function Os(t=null,r={target:pm,actInsideInputWithModifier:!0}){const[o,i]=D.useState(!1),l=D.useRef(!1),c=D.useRef(new Set([])),[d,f]=D.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=h.reduce((m,y)=>m.concat(...y),[]);return[h,x]}return[[],[]]},[t]);return D.useEffect(()=>{const g=(r==null?void 0:r.target)??pm,h=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const x=w=>{var k,b;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!h)&&Dh(w))return!1;const C=hm(w.code,f);if(c.current.add(w[C]),mm(d,c.current,!1)){const T=((b=(k=w.composedPath)==null?void 0:k.call(w))==null?void 0:b[0])||w.target,j=(T==null?void 0:T.nodeName)==="BUTTON"||(T==null?void 0:T.nodeName)==="A";r.preventDefault!==!1&&(l.current||!j)&&w.preventDefault(),i(!0)}},m=w=>{const S=hm(w.code,f);mm(d,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(w[S]),w.key==="Meta"&&c.current.clear(),l.current=!1},y=()=>{c.current.clear(),i(!1)};return g==null||g.addEventListener("keydown",x),g==null||g.addEventListener("keyup",m),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g==null||g.removeEventListener("keydown",x),g==null||g.removeEventListener("keyup",m),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[t,i]),o}function mm(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function hm(t,r){return r.includes(t)?"code":"key"}const AS=()=>{const t=He();return D.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,c],panZoom:d}=t.getState();return d?(await d.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??c},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:c,maxZoom:d,panZoom:f}=t.getState(),g=Lc(r,i,l,c,d,(o==null?void 0:o.padding)??.1);return f?(await f.setViewport(g,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:c,domNode:d}=t.getState();if(!d)return r;const{x:f,y:g}=d.getBoundingClientRect(),h={x:r.x-f,y:r.y-g},x=o.snapGrid??l,m=o.snapToGrid??c;return Hs(h,i,m,x)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),d=Al(r,o);return{x:d.x+l,y:d.y+c}}}),[])};function Jh(t,r){const o=[],i=new Map,l=[];for(const c of t)if(c.type==="add"){l.push(c);continue}else if(c.type==="remove"||c.type==="replace")i.set(c.id,[c]);else{const d=i.get(c.id);d?d.push(c):i.set(c.id,[c])}for(const c of r){const d=i.get(c.id);if(!d){o.push(c);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){o.push({...d[0].item});continue}const f={...c};for(const g of d)LS(g,f);o.push(f)}return l.length&&l.forEach(c=>{c.index!==void 0?o.splice(c.index,0,{...c.item}):o.push({...c.item})}),o}function LS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function zS(t,r){return Jh(t,r)}function $S(t,r){return Jh(t,r)}function kr(t,r){return{id:t,type:"select",selected:r}}function go(t,r=new Set,o=!1){const i=[];for(const[l,c]of t){const d=r.has(l);!(c.selected===void 0&&!d)&&c.selected!==d&&(o&&(c.selected=d),i.push(kr(c.id,d)))}return i}function gm({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,d]of t.entries()){const f=r.get(d.id),g=((l=f==null?void 0:f.internals)==null?void 0:l.userNode)??f;g!==void 0&&g!==d&&o.push({id:d.id,item:d,type:"replace"}),g===void 0&&o.push({item:d,type:"add",index:c})}for(const[c]of r)i.get(c)===void 0&&o.push({id:c,type:"remove"});return o}function xm(t){return{id:t.id,type:"remove"}}const ym=t=>r1(t),RS=t=>jh(t);function eg(t){return D.forwardRef(t)}const FS=typeof window<"u"?D.useLayoutEffect:D.useEffect;function vm(t){const[r,o]=D.useState(BigInt(0)),[i]=D.useState(()=>HS(()=>o(l=>l+BigInt(1))));return FS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function HS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const tg=D.createContext(null);function VS({children:t}){const r=He(),o=D.useCallback(f=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:x,onNodesChange:m,nodeLookup:y,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let C=g;for(const b of f)C=typeof b=="function"?b(C):b;let k=gm({items:C,lookup:y});for(const b of S.values())k=b(k);x&&h(C),k.length>0?m==null||m(k):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:T,setNodes:j}=r.getState();b&&j(T)})},[]),i=vm(o),l=D.useCallback(f=>{const{edges:g=[],setEdges:h,hasDefaultEdges:x,onEdgesChange:m,edgeLookup:y}=r.getState();let w=g;for(const S of f)w=typeof S=="function"?S(w):S;x?h(w):m&&m(gm({items:w,lookup:y}))},[]),c=vm(l),d=D.useMemo(()=>({nodeQueue:i,edgeQueue:c}),[]);return u.jsx(tg.Provider,{value:d,children:t})}function BS(){const t=D.useContext(tg);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const WS=t=>!!t.panZoom;function Ar(){const t=AS(),r=He(),o=BS(),i=Pe(WS),l=D.useMemo(()=>{const c=m=>r.getState().nodeLookup.get(m),d=m=>{o.nodeQueue.push(m)},f=m=>{o.edgeQueue.push(m)},g=m=>{var b,T;const{nodeLookup:y,nodeOrigin:w}=r.getState(),S=ym(m)?m:y.get(m.id),C=S.parentId?_h(S.position,S.measured,S.parentId,y,w):S.position,k={...S,position:C,width:((b=S.measured)==null?void 0:b.width)??S.width,height:((T=S.measured)==null?void 0:T.height)??S.height};return ko(k)},h=(m,y,w={replace:!1})=>{d(S=>S.map(C=>{if(C.id===m){const k=typeof y=="function"?y(C):y;return w.replace&&ym(k)?k:{...C,...k}}return C}))},x=(m,y,w={replace:!1})=>{f(S=>S.map(C=>{if(C.id===m){const k=typeof y=="function"?y(C):y;return w.replace&&RS(k)?k:{...C,...k}}return C}))};return{getNodes:()=>r.getState().nodes.map(m=>({...m})),getNode:m=>{var y;return(y=c(m))==null?void 0:y.internals.userNode},getInternalNode:c,getEdges:()=>{const{edges:m=[]}=r.getState();return m.map(y=>({...y}))},getEdge:m=>r.getState().edgeLookup.get(m),setNodes:d,setEdges:f,addNodes:m=>{const y=Array.isArray(m)?m:[m];o.nodeQueue.push(w=>[...w,...y])},addEdges:m=>{const y=Array.isArray(m)?m:[m];o.edgeQueue.push(w=>[...w,...y])},toObject:()=>{const{nodes:m=[],edges:y=[],transform:w}=r.getState(),[S,C,k]=w;return{nodes:m.map(b=>({...b})),edges:y.map(b=>({...b})),viewport:{x:S,y:C,zoom:k}}},deleteElements:async({nodes:m=[],edges:y=[]})=>{const{nodes:w,edges:S,onNodesDelete:C,onEdgesDelete:k,triggerNodeChanges:b,triggerEdgeChanges:T,onDelete:j,onBeforeDelete:_}=r.getState(),{nodes:A,edges:L}=await a1({nodesToRemove:m,edgesToRemove:y,nodes:w,edges:S,onBeforeDelete:_}),P=L.length>0,U=A.length>0;if(P){const K=L.map(xm);k==null||k(L),T(K)}if(U){const K=A.map(xm);C==null||C(A),b(K)}return(U||P)&&(j==null||j({nodes:A,edges:L})),{deletedNodes:A,deletedEdges:L}},getIntersectingNodes:(m,y=!0,w)=>{const S=Wp(m),C=S?m:g(m),k=w!==void 0;return C?(w||r.getState().nodes).filter(b=>{const T=r.getState().nodeLookup.get(b.id);if(T&&!S&&(b.id===m.id||!T.internals.positionAbsolute))return!1;const j=ko(k?b:T),_=Ds(j,C);return y&&_>0||_>=j.width*j.height||_>=C.width*C.height}):[]},isNodeIntersecting:(m,y,w=!0)=>{const C=Wp(m)?m:g(m);if(!C)return!1;const k=Ds(C,y);return w&&k>0||k>=y.width*y.height||k>=C.width*C.height},updateNode:h,updateNodeData:(m,y,w={replace:!1})=>{h(m,S=>{const C=typeof y=="function"?y(S):y;return w.replace?{...S,data:C}:{...S,data:{...S.data,...C}}},w)},updateEdge:x,updateEdgeData:(m,y,w={replace:!1})=>{x(m,S=>{const C=typeof y=="function"?y(S):y;return w.replace?{...S,data:C}:{...S,data:{...S.data,...C}}},w)},getNodesBounds:m=>{const{nodeLookup:y,nodeOrigin:w}=r.getState();return o1(m,{nodeLookup:y,nodeOrigin:w})},getHandleConnections:({type:m,id:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${m}${y?`-${y}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:m,handleId:y,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${m?y?`-${m}-${y}`:`-${m}`:""}`))==null?void 0:S.values())??[])},fitView:async m=>{const y=r.getState().fitViewResolver??f1();return r.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:y}),o.nodeQueue.push(w=>[...w]),y.promise}}},[]);return D.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const wm=t=>t.selected,US=typeof window<"u"?window:void 0;function YS({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=He(),{deleteElements:i}=Ar(),l=Os(t,{actInsideInputWithModifier:!1}),c=Os(r,{target:US});D.useEffect(()=>{if(l){const{edges:d,nodes:f}=o.getState();i({nodes:f.filter(wm),edges:d.filter(wm)}),o.setState({nodesSelectionActive:!1})}},[l]),D.useEffect(()=>{o.setState({multiSelectionActive:c})},[c])}function XS(t){const r=He();D.useEffect(()=>{const o=()=>{var l,c,d,f;if(!t.current||!(((c=(l=t.current).checkVisibility)==null?void 0:c.call(l))??!0))return!1;const i=zc(t.current);(i.height===0||i.width===0)&&((f=(d=r.getState()).onError)==null||f.call(d,"004",gn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Kl={position:"absolute",width:"100%",height:"100%",top:0,left:0},GS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function KS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Cr.Free,zoomOnDoubleClick:d=!0,panOnDrag:f=!0,defaultViewport:g,translateExtent:h,minZoom:x,maxZoom:m,zoomActivationKeyCode:y,preventScrolling:w=!0,children:S,noWheelClassName:C,noPanClassName:k,onViewportChange:b,isControlledViewport:T,paneClickDistance:j,selectionOnDrag:_}){const A=He(),L=D.useRef(null),{userSelectionActive:P,lib:U,connectionInProgress:K}=Pe(GS,Be),se=Os(y),B=D.useRef();XS(L);const M=D.useCallback(X=>{b==null||b({x:X[0],y:X[1],zoom:X[2]}),T||A.setState({transform:X})},[b,T]);return D.useEffect(()=>{if(L.current){B.current=K1({domNode:L.current,minZoom:x,maxZoom:m,translateExtent:h,viewport:g,onDraggingChange:V=>A.setState({paneDragging:V}),onPanZoomStart:(V,H)=>{const{onViewportChangeStart:$,onMoveStart:N}=A.getState();N==null||N(V,H),$==null||$(H)},onPanZoom:(V,H)=>{const{onViewportChange:$,onMove:N}=A.getState();N==null||N(V,H),$==null||$(H)},onPanZoomEnd:(V,H)=>{const{onViewportChangeEnd:$,onMoveEnd:N}=A.getState();N==null||N(V,H),$==null||$(H)}});const{x:X,y:R,zoom:W}=B.current.getViewport();return A.setState({panZoom:B.current,transform:[X,R,W],domNode:L.current.closest(".react-flow")}),()=>{var V;(V=B.current)==null||V.destroy()}}},[]),D.useEffect(()=>{var X;(X=B.current)==null||X.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:f,zoomActivationKeyPressed:se,preventScrolling:w,noPanClassName:k,userSelectionActive:P,noWheelClassName:C,lib:U,onTransformChange:M,connectionInProgress:K,selectionOnDrag:_,paneClickDistance:j})},[t,r,o,i,l,c,d,f,se,w,k,P,C,U,M,K,_,j]),u.jsx("div",{className:"react-flow__renderer",ref:L,style:Kl,children:S})}const QS=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function qS(){const{userSelectionActive:t,userSelectionRect:r}=Pe(QS,Be);return t&&r?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const ic=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},ZS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function JS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=Ps.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:c,onSelectionStart:d,onSelectionEnd:f,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:x,onPaneMouseEnter:m,onPaneMouseMove:y,onPaneMouseLeave:w,children:S}){const C=He(),{userSelectionActive:k,elementsSelectable:b,dragging:T,connectionInProgress:j}=Pe(ZS,Be),_=b&&(t||k),A=D.useRef(null),L=D.useRef(),P=D.useRef(new Set),U=D.useRef(new Set),K=D.useRef(!1),se=$=>{if(K.current||j){K.current=!1;return}g==null||g($),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},B=$=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){$.preventDefault();return}h==null||h($)},M=x?$=>x($):void 0,X=$=>{K.current&&($.stopPropagation(),K.current=!1)},R=$=>{var Q,ie;const{domNode:N}=C.getState();if(L.current=N==null?void 0:N.getBoundingClientRect(),!L.current)return;const O=$.target===A.current;if(!O&&!!$.target.closest(".nokey")||!t||!(c&&O||r)||$.button!==0||!$.isPrimary)return;(ie=(Q=$.target)==null?void 0:Q.setPointerCapture)==null||ie.call(Q,$.pointerId),K.current=!1;const{x:J,y:te}=on($.nativeEvent,L.current);C.setState({userSelectionRect:{width:0,height:0,startX:J,startY:te,x:J,y:te}}),O||($.stopPropagation(),$.preventDefault())},W=$=>{const{userSelectionRect:N,transform:O,nodeLookup:E,edgeLookup:z,connectionLookup:J,triggerNodeChanges:te,triggerEdgeChanges:Q,defaultEdgeOptions:ie,resetSelectedElements:le}=C.getState();if(!L.current||!N)return;const{x:oe,y:ae}=on($.nativeEvent,L.current),{startX:me,startY:be}=N;if(!K.current){const xe=r?0:l;if(Math.hypot(oe-me,ae-be)<=xe)return;le(),d==null||d($)}K.current=!0;const q={startX:me,startY:be,x:oe<me?oe:me,y:ae<be?ae:be,width:Math.abs(oe-me),height:Math.abs(ae-be)},ee=P.current,he=U.current;P.current=new Set(Ac(E,q,O,o===Ps.Partial,!0).map(xe=>xe.id)),U.current=new Set;const we=(ie==null?void 0:ie.selectable)??!0;for(const xe of P.current){const Me=J.get(xe);if(Me)for(const{edgeId:$e}of Me.values()){const Ke=z.get($e);Ke&&(Ke.selectable??we)&&U.current.add($e)}}if(!Up(ee,P.current)){const xe=go(E,P.current,!0);te(xe)}if(!Up(he,U.current)){const xe=go(z,U.current);Q(xe)}C.setState({userSelectionRect:q,userSelectionActive:!0,nodesSelectionActive:!1})},V=$=>{var N,O;$.button===0&&((O=(N=$.target)==null?void 0:N.releasePointerCapture)==null||O.call(N,$.pointerId),!k&&$.target===A.current&&C.getState().userSelectionRect&&(se==null||se($)),C.setState({userSelectionActive:!1,userSelectionRect:null}),K.current&&(f==null||f($),C.setState({nodesSelectionActive:P.current.size>0})))},H=i===!0||Array.isArray(i)&&i.includes(0);return u.jsxs("div",{className:qe(["react-flow__pane",{draggable:H,dragging:T,selection:t}]),onClick:_?void 0:ic(se,A),onContextMenu:ic(B,A),onWheel:ic(M,A),onPointerEnter:_?void 0:m,onPointerMove:_?W:y,onPointerUp:_?V:void 0,onPointerDownCapture:_?R:void 0,onClickCapture:_?X:void 0,onPointerLeave:w,ref:A,style:Kl,children:[S,u.jsx(qS,{})]})}function Nc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:c,multiSelectionActive:d,nodeLookup:f,onError:g}=r.getState(),h=f.get(t);if(!h){g==null||g("012",gn.error012(t));return}r.setState({nodesSelectionActive:!1}),h.selected?(o||h.selected&&d)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>{var x;return(x=i==null?void 0:i.current)==null?void 0:x.blur()})):l([t])}function ng({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:c,nodeClickDistance:d}){const f=He(),[g,h]=D.useState(!1),x=D.useRef();return D.useEffect(()=>{x.current=A1({getStoreItems:()=>f.getState(),onNodeMouseDown:m=>{Nc({id:m,store:f,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),D.useEffect(()=>{var m,y;if(r)(m=x.current)==null||m.destroy();else if(t.current)return(y=x.current)==null||y.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:c,nodeId:l,nodeClickDistance:d}),()=>{var w;(w=x.current)==null||w.destroy()}},[o,i,r,c,t,l]),g}const eN=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function rg(){const t=He();return D.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:c,nodesDraggable:d,onError:f,updateNodePositions:g,nodeLookup:h,nodeOrigin:x}=t.getState(),m=new Map,y=eN(d),w=l?c[0]:5,S=l?c[1]:5,C=o.direction.x*w*o.factor,k=o.direction.y*S*o.factor;for(const[,b]of h){if(!y(b))continue;let T={x:b.internals.positionAbsolute.x+C,y:b.internals.positionAbsolute.y+k};l&&(T=Fs(T,c));const{position:j,positionAbsolute:_}=bh({nodeId:b.id,nextPosition:T,nodeLookup:h,nodeExtent:i,nodeOrigin:x,onError:f});b.position=j,b.internals.positionAbsolute=_,m.set(b.id,b)}g(m)},[])}const Bc=D.createContext(null),tN=Bc.Provider;Bc.Consumer;const og=()=>D.useContext(Bc),nN=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),rN=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:c,connection:d}=i,{fromHandle:f,toHandle:g,isValid:h}=d,x=(g==null?void 0:g.nodeId)===t&&(g==null?void 0:g.id)===r&&(g==null?void 0:g.type)===o;return{connectingFrom:(f==null?void 0:f.nodeId)===t&&(f==null?void 0:f.id)===r&&(f==null?void 0:f.type)===o,connectingTo:x,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:c===So.Strict?(f==null?void 0:f.type)!==o:t!==(f==null?void 0:f.nodeId)||r!==(f==null?void 0:f.id),connectionInProcess:!!f,clickConnectionInProcess:!!l,valid:x&&h}};function oN({type:t="source",position:r=je.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:c=!0,id:d,onConnect:f,children:g,className:h,onMouseDown:x,onTouchStart:m,...y},w){var W,V;const S=d||null,C=t==="target",k=He(),b=og(),{connectOnClick:T,noPanClassName:j,rfId:_}=Pe(nN,Be),{connectingFrom:A,connectingTo:L,clickConnecting:P,isPossibleEndHandle:U,connectionInProcess:K,clickConnectionInProcess:se,valid:B}=Pe(rN(b,S,t),Be);b||(V=(W=k.getState()).onError)==null||V.call(W,"010",gn.error010());const M=H=>{const{defaultEdgeOptions:$,onConnect:N,hasDefaultEdges:O}=k.getState(),E={...$,...H};if(O){const{edges:z,setEdges:J}=k.getState();J(v1(E,z))}N==null||N(E),f==null||f(E)},X=H=>{if(!b)return;const $=Th(H.nativeEvent);if(l&&($&&H.button===0||!$)){const N=k.getState();Sc.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:C,handleId:S,nodeId:b,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:M,isValidConnection:o||N.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed,dragThreshold:N.connectionDragThreshold})}$?x==null||x(H):m==null||m(H)},R=H=>{const{onClickConnectStart:$,onClickConnectEnd:N,connectionClickStartHandle:O,connectionMode:E,isValidConnection:z,lib:J,rfId:te,nodeLookup:Q,connection:ie}=k.getState();if(!b||!O&&!l)return;if(!O){$==null||$(H.nativeEvent,{nodeId:b,handleId:S,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:b,type:t,id:S}});return}const le=Ph(H.target),oe=o||z,{connection:ae,isValid:me}=Sc.isValid(H.nativeEvent,{handle:{nodeId:b,id:S,type:t},connectionMode:E,fromNodeId:O.nodeId,fromHandleId:O.id||null,fromType:O.type,isValidConnection:oe,flowId:te,doc:le,lib:J,nodeLookup:Q});me&&ae&&M(ae);const be=structuredClone(ie);delete be.inProgress,be.toPosition=be.toHandle?be.toHandle.position:null,N==null||N(H,be),k.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":S,"data-nodeid":b,"data-handlepos":r,"data-id":`${_}-${b}-${S}-${t}`,className:qe(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",j,h,{source:!C,target:C,connectable:i,connectablestart:l,connectableend:c,clickconnecting:P,connectingfrom:A,connectingto:L,valid:B,connectionindicator:i&&(!K||U)&&(K||se?c:l)}]),onMouseDown:X,onTouchStart:X,onClick:T?R:void 0,ref:w,...y,children:g})}const Dr=D.memo(eg(oN));function sN({data:t,isConnectable:r,sourcePosition:o=je.Bottom}){return u.jsxs(u.Fragment,{children:[t==null?void 0:t.label,u.jsx(Dr,{type:"source",position:o,isConnectable:r})]})}function iN({data:t,isConnectable:r,targetPosition:o=je.Top,sourcePosition:i=je.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(Dr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,u.jsx(Dr,{type:"source",position:i,isConnectable:r})]})}function lN(){return null}function aN({data:t,isConnectable:r,targetPosition:o=je.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(Dr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const Ll={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Sm={input:sN,default:iN,output:aN,group:lN};function uN(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const cN=t=>{const{width:r,height:o,x:i,y:l}=Rs(t.nodeLookup,{filter:c=>!!c.selected});return{width:rn(r)?r:null,height:rn(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function dN({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=He(),{width:l,height:c,transformString:d,userSelectionActive:f}=Pe(cN,Be),g=rg(),h=D.useRef(null);if(D.useEffect(()=>{var y;o||(y=h.current)==null||y.focus({preventScroll:!0})},[o]),ng({nodeRef:h}),f||!l||!c)return null;const x=t?y=>{const w=i.getState().nodes.filter(S=>S.selected);t(y,w)}:void 0,m=y=>{Object.prototype.hasOwnProperty.call(Ll,y.key)&&(y.preventDefault(),g({direction:Ll[y.key],factor:y.shiftKey?4:1}))};return u.jsx("div",{className:qe(["react-flow__nodesselection","react-flow__container",r]),style:{transform:d},children:u.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:o?void 0:-1,onKeyDown:o?void 0:m,style:{width:l,height:c}})})}const Nm=typeof window<"u"?window:void 0,fN=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function sg({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,paneClickDistance:f,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:x,selectionMode:m,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:b,zoomOnScroll:T,zoomOnPinch:j,panOnScroll:_,panOnScrollSpeed:A,panOnScrollMode:L,zoomOnDoubleClick:P,panOnDrag:U,defaultViewport:K,translateExtent:se,minZoom:B,maxZoom:M,preventScrolling:X,onSelectionContextMenu:R,noWheelClassName:W,noPanClassName:V,disableKeyboardA11y:H,onViewportChange:$,isControlledViewport:N}){const{nodesSelectionActive:O,userSelectionActive:E}=Pe(fN,Be),z=Os(h,{target:Nm}),J=Os(C,{target:Nm}),te=J||U,Q=J||_,ie=x&&te!==!0,le=z||E||ie;return YS({deleteKeyCode:g,multiSelectionKeyCode:S}),u.jsx(KS,{onPaneContextMenu:c,elementsSelectable:b,zoomOnScroll:T,zoomOnPinch:j,panOnScroll:Q,panOnScrollSpeed:A,panOnScrollMode:L,zoomOnDoubleClick:P,panOnDrag:!z&&te,defaultViewport:K,translateExtent:se,minZoom:B,maxZoom:M,zoomActivationKeyCode:k,preventScrolling:X,noWheelClassName:W,noPanClassName:V,onViewportChange:$,isControlledViewport:N,paneClickDistance:f,selectionOnDrag:ie,children:u.jsxs(JS,{onSelectionStart:y,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:te,isSelecting:!!le,selectionMode:m,selectionKeyPressed:z,paneClickDistance:f,selectionOnDrag:ie,children:[t,O&&u.jsx(dN,{onSelectionContextMenu:R,noPanClassName:V,disableKeyboardA11y:H})]})})}sg.displayName="FlowRenderer";const pN=D.memo(sg),mN=t=>r=>t?Ac(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function hN(t){return Pe(D.useCallback(mN(t),[t]),Be)}const gN=t=>t.updateNodeInternals;function xN(){const t=Pe(gN),[r]=D.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const c=l.target.getAttribute("data-id");i.set(c,{id:c,nodeElement:l.target,force:!0})}),t(i)}));return D.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function yN({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=He(),c=D.useRef(null),d=D.useRef(null),f=D.useRef(t.sourcePosition),g=D.useRef(t.targetPosition),h=D.useRef(r),x=o&&!!t.internals.handleBounds;return D.useEffect(()=>{c.current&&!t.hidden&&(!x||d.current!==c.current)&&(d.current&&(i==null||i.unobserve(d.current)),i==null||i.observe(c.current),d.current=c.current)},[x,t.hidden]),D.useEffect(()=>()=>{d.current&&(i==null||i.unobserve(d.current),d.current=null)},[]),D.useEffect(()=>{if(c.current){const m=h.current!==r,y=f.current!==t.sourcePosition,w=g.current!==t.targetPosition;(m||y||w)&&(h.current=r,f.current=t.sourcePosition,g.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:c.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),c}function vN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:c,onDoubleClick:d,nodesDraggable:f,elementsSelectable:g,nodesConnectable:h,nodesFocusable:x,resizeObserver:m,noDragClassName:y,noPanClassName:w,disableKeyboardA11y:S,rfId:C,nodeTypes:k,nodeClickDistance:b,onError:T}){const{node:j,internals:_,isParent:A}=Pe(oe=>{const ae=oe.nodeLookup.get(t),me=oe.parentLookup.has(t);return{node:ae,internals:ae.internals,isParent:me}},Be);let L=j.type||"default",P=(k==null?void 0:k[L])||Sm[L];P===void 0&&(T==null||T("003",gn.error003(L)),L="default",P=(k==null?void 0:k.default)||Sm.default);const U=!!(j.draggable||f&&typeof j.draggable>"u"),K=!!(j.selectable||g&&typeof j.selectable>"u"),se=!!(j.connectable||h&&typeof j.connectable>"u"),B=!!(j.focusable||x&&typeof j.focusable>"u"),M=He(),X=Mh(j),R=yN({node:j,nodeType:L,hasDimensions:X,resizeObserver:m}),W=ng({nodeRef:R,disabled:j.hidden||!U,noDragClassName:y,handleSelector:j.dragHandle,nodeId:t,isSelectable:K,nodeClickDistance:b}),V=rg();if(j.hidden)return null;const H=_n(j),$=uN(j),N=K||U||r||o||i||l,O=o?oe=>o(oe,{..._.userNode}):void 0,E=i?oe=>i(oe,{..._.userNode}):void 0,z=l?oe=>l(oe,{..._.userNode}):void 0,J=c?oe=>c(oe,{..._.userNode}):void 0,te=d?oe=>d(oe,{..._.userNode}):void 0,Q=oe=>{const{selectNodesOnDrag:ae,nodeDragThreshold:me}=M.getState();K&&(!ae||!U||me>0)&&Nc({id:t,store:M,nodeRef:R}),r&&r(oe,{..._.userNode})},ie=oe=>{if(!(Dh(oe.nativeEvent)||S)){if(wh.includes(oe.key)&&K){const ae=oe.key==="Escape";Nc({id:t,store:M,unselect:ae,nodeRef:R})}else if(U&&j.selected&&Object.prototype.hasOwnProperty.call(Ll,oe.key)){oe.preventDefault();const{ariaLabelConfig:ae}=M.getState();M.setState({ariaLiveMessage:ae["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),V({direction:Ll[oe.key],factor:oe.shiftKey?4:1})}}},le=()=>{var he;if(S||!((he=R.current)!=null&&he.matches(":focus-visible")))return;const{transform:oe,width:ae,height:me,autoPanOnNodeFocus:be,setCenter:q}=M.getState();if(!be)return;Ac(new Map([[t,j]]),{x:0,y:0,width:ae,height:me},oe,!0).length>0||q(j.position.x+H.width/2,j.position.y+H.height/2,{zoom:oe[2]})};return u.jsx("div",{className:qe(["react-flow__node",`react-flow__node-${L}`,{[w]:U},j.className,{selected:j.selected,selectable:K,parent:A,draggable:U,dragging:W}]),ref:R,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:N?"all":"none",visibility:X?"visible":"hidden",...j.style,...$},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:O,onMouseMove:E,onMouseLeave:z,onContextMenu:J,onClick:Q,onDoubleClick:te,onKeyDown:B?ie:void 0,tabIndex:B?0:void 0,onFocus:B?le:void 0,role:j.ariaRole??(B?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Qh}-${C}`,"aria-label":j.ariaLabel,...j.domAttributes,children:u.jsx(tN,{value:t,children:u.jsx(P,{id:t,data:j.data,type:L,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:j.selected??!1,selectable:K,draggable:U,deletable:j.deletable??!0,isConnectable:se,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:W,dragHandle:j.dragHandle,zIndex:_.z,parentId:j.parentId,...H})})})}var wN=D.memo(vN);const SN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function ig(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:c}=Pe(SN,Be),d=hN(t.onlyRenderVisibleElements),f=xN();return u.jsx("div",{className:"react-flow__nodes",style:Kl,children:d.map(g=>u.jsx(wN,{id:g,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:c},g))})}ig.displayName="NodeRenderer";const NN=D.memo(ig);function kN(t){return Pe(D.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const c=o.nodeLookup.get(l.source),d=o.nodeLookup.get(l.target);c&&d&&g1({sourceNode:c,targetNode:d,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),Be)}const jN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return u.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},bN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return u.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},km={[Tl.Arrow]:jN,[Tl.ArrowClosed]:bN};function CN(t){const r=He();return D.useMemo(()=>{var l,c;return Object.prototype.hasOwnProperty.call(km,t)?km[t]:((c=(l=r.getState()).onError)==null||c.call(l,"009",gn.error009(t)),null)},[t])}const IN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const g=CN(r);return g?u.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0",children:u.jsx(g,{color:o,strokeWidth:d})}):null},lg=({defaultColor:t,rfId:r})=>{const o=Pe(c=>c.edges),i=Pe(c=>c.defaultEdgeOptions),l=D.useMemo(()=>j1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:l.map(c=>u.jsx(IN,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};lg.displayName="MarkerDefinitions";var EN=D.memo(lg);function ag({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:g,className:h,...x}){const[m,y]=D.useState({x:1,y:0,width:0,height:0}),w=qe(["react-flow__edge-textwrapper",h]),S=D.useRef(null);return D.useEffect(()=>{if(S.current){const C=S.current.getBBox();y({x:C.x,y:C.y,width:C.width,height:C.height})}},[o]),o?u.jsxs("g",{transform:`translate(${t-m.width/2} ${r-m.height/2})`,className:w,visibility:m.width?"visible":"hidden",...x,children:[l&&u.jsx("rect",{width:m.width+2*d[0],x:-d[0],y:-d[1],height:m.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:o}),g]}):null}ag.displayName="EdgeText";const MN=D.memo(ag);function bo({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,interactionWidth:h=20,...x}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...x,d:t,fill:"none",className:qe(["react-flow__edge-path",x.className])}),h?u.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,i&&rn(r)&&rn(o)?u.jsx(MN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g}):null]})}function jm({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===je.Left||t===je.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function ug({sourceX:t,sourceY:r,sourcePosition:o=je.Bottom,targetX:i,targetY:l,targetPosition:c=je.Top}){const[d,f]=jm({pos:o,x1:t,y1:r,x2:i,y2:l}),[g,h]=jm({pos:c,x1:i,y1:l,x2:t,y2:r}),[x,m,y,w]=Oh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:d,sourceControlY:f,targetControlX:g,targetControlY:h});return[`M${t},${r} C${d},${f} ${g},${h} ${i},${l}`,x,m,y,w]}function cg(t){return D.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:k,interactionWidth:b})=>{const[T,j,_]=ug({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),A=t.isInternal?void 0:r;return u.jsx(bo,{id:A,path:T,labelX:j,labelY:_,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:k,interactionWidth:b})})}const _N=cg({isInternal:!1}),dg=cg({isInternal:!0});_N.displayName="SimpleBezierEdge";dg.displayName="SimpleBezierEdgeInternal";function fg(t){return D.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,sourcePosition:w=je.Bottom,targetPosition:S=je.Top,markerEnd:C,markerStart:k,pathOptions:b,interactionWidth:T})=>{const[j,_,A]=yc({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:c,targetPosition:S,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),L=t.isInternal?void 0:r;return u.jsx(bo,{id:L,path:j,labelX:_,labelY:A,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:C,markerStart:k,interactionWidth:T})})}const pg=fg({isInternal:!1}),mg=fg({isInternal:!0});pg.displayName="SmoothStepEdge";mg.displayName="SmoothStepEdgeInternal";function hg(t){return D.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return u.jsx(pg,{...o,id:i,pathOptions:D.useMemo(()=>{var c;return{borderRadius:0,offset:(c=o.pathOptions)==null?void 0:c.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const PN=hg({isInternal:!1}),gg=hg({isInternal:!0});PN.displayName="StepEdge";gg.displayName="StepEdgeInternal";function xg(t){return D.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:C})=>{const[k,b,T]=Lh({sourceX:o,sourceY:i,targetX:l,targetY:c}),j=t.isInternal?void 0:r;return u.jsx(bo,{id:j,path:k,labelX:b,labelY:T,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:m,style:y,markerEnd:w,markerStart:S,interactionWidth:C})})}const DN=xg({isInternal:!1}),yg=xg({isInternal:!0});DN.displayName="StraightEdge";yg.displayName="StraightEdgeInternal";function vg(t){return D.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d=je.Bottom,targetPosition:f=je.Top,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:k,pathOptions:b,interactionWidth:T})=>{const[j,_,A]=Ul({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f,curvature:b==null?void 0:b.curvature}),L=t.isInternal?void 0:r;return u.jsx(bo,{id:L,path:j,labelX:_,labelY:A,label:g,labelStyle:h,labelShowBg:x,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:w,style:S,markerEnd:C,markerStart:k,interactionWidth:T})})}const TN=vg({isInternal:!1}),wg=vg({isInternal:!0});TN.displayName="BezierEdge";wg.displayName="BezierEdgeInternal";const bm={default:wg,straight:yg,step:gg,smoothstep:mg,simplebezier:dg},Cm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ON=(t,r,o)=>o===je.Left?t-r:o===je.Right?t+r:t,AN=(t,r,o)=>o===je.Top?t-r:o===je.Bottom?t+r:t,Im="react-flow__edgeupdater";function Em({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:c,onMouseOut:d,type:f}){return u.jsx("circle",{onMouseDown:l,onMouseEnter:c,onMouseOut:d,className:qe([Im,`${Im}-${f}`]),cx:ON(r,i,t),cy:AN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function LN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:c,targetY:d,sourcePosition:f,targetPosition:g,onReconnect:h,onReconnectStart:x,onReconnectEnd:m,setReconnecting:y,setUpdateHover:w}){const S=He(),C=(_,A)=>{if(_.button!==0)return;const{autoPanOnConnect:L,domNode:P,isValidConnection:U,connectionMode:K,connectionRadius:se,lib:B,onConnectStart:M,onConnectEnd:X,cancelConnection:R,nodeLookup:W,rfId:V,panBy:H,updateConnection:$}=S.getState(),N=A.type==="target",O=(J,te)=>{y(!1),m==null||m(J,o,A.type,te)},E=J=>h==null?void 0:h(o,J),z=(J,te)=>{y(!0),x==null||x(_,o,A.type),M==null||M(J,te)};Sc.onPointerDown(_.nativeEvent,{autoPanOnConnect:L,connectionMode:K,connectionRadius:se,domNode:P,handleId:A.id,nodeId:A.nodeId,nodeLookup:W,isTarget:N,edgeUpdaterType:A.type,lib:B,flowId:V,cancelConnection:R,panBy:H,isValidConnection:U,onConnect:E,onConnectStart:z,onConnectEnd:X,onReconnectEnd:O,updateConnection:$,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:_.currentTarget})},k=_=>C(_,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),b=_=>C(_,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),T=()=>w(!0),j=()=>w(!1);return u.jsxs(u.Fragment,{children:[(t===!0||t==="source")&&u.jsx(Em,{position:f,centerX:i,centerY:l,radius:r,onMouseDown:k,onMouseEnter:T,onMouseOut:j,type:"source"}),(t===!0||t==="target")&&u.jsx(Em,{position:g,centerX:c,centerY:d,radius:r,onMouseDown:b,onMouseEnter:T,onMouseOut:j,type:"target"})]})}function zN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:c,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:h,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,rfId:S,edgeTypes:C,noPanClassName:k,onError:b,disableKeyboardA11y:T}){let j=Pe(q=>q.edgeLookup.get(t));const _=Pe(q=>q.defaultEdgeOptions);j=_?{..._,...j}:j;let A=j.type||"default",L=(C==null?void 0:C[A])||bm[A];L===void 0&&(b==null||b("011",gn.error011(A)),A="default",L=(C==null?void 0:C.default)||bm.default);const P=!!(j.focusable||r&&typeof j.focusable>"u"),U=typeof m<"u"&&(j.reconnectable||o&&typeof j.reconnectable>"u"),K=!!(j.selectable||i&&typeof j.selectable>"u"),se=D.useRef(null),[B,M]=D.useState(!1),[X,R]=D.useState(!1),W=He(),{zIndex:V,sourceX:H,sourceY:$,targetX:N,targetY:O,sourcePosition:E,targetPosition:z}=Pe(D.useCallback(q=>{const ee=q.nodeLookup.get(j.source),he=q.nodeLookup.get(j.target);if(!ee||!he)return{zIndex:j.zIndex,...Cm};const we=k1({id:t,sourceNode:ee,targetNode:he,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:q.connectionMode,onError:b});return{zIndex:h1({selected:j.selected,zIndex:j.zIndex,sourceNode:ee,targetNode:he,elevateOnSelect:q.elevateEdgesOnSelect,zIndexMode:q.zIndexMode}),...we||Cm}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),Be),J=D.useMemo(()=>j.markerStart?`url('#${vc(j.markerStart,S)}')`:void 0,[j.markerStart,S]),te=D.useMemo(()=>j.markerEnd?`url('#${vc(j.markerEnd,S)}')`:void 0,[j.markerEnd,S]);if(j.hidden||H===null||$===null||N===null||O===null)return null;const Q=q=>{var xe;const{addSelectedEdges:ee,unselectNodesAndEdges:he,multiSelectionActive:we}=W.getState();K&&(W.setState({nodesSelectionActive:!1}),j.selected&&we?(he({nodes:[],edges:[j]}),(xe=se.current)==null||xe.blur()):ee([t])),l&&l(q,j)},ie=c?q=>{c(q,{...j})}:void 0,le=d?q=>{d(q,{...j})}:void 0,oe=f?q=>{f(q,{...j})}:void 0,ae=g?q=>{g(q,{...j})}:void 0,me=h?q=>{h(q,{...j})}:void 0,be=q=>{var ee;if(!T&&wh.includes(q.key)&&K){const{unselectNodesAndEdges:he,addSelectedEdges:we}=W.getState();q.key==="Escape"?((ee=se.current)==null||ee.blur(),he({edges:[j]})):we([t])}};return u.jsx("svg",{style:{zIndex:V},children:u.jsxs("g",{className:qe(["react-flow__edge",`react-flow__edge-${A}`,j.className,k,{selected:j.selected,animated:j.animated,inactive:!K&&!l,updating:B,selectable:K}]),onClick:Q,onDoubleClick:ie,onContextMenu:le,onMouseEnter:oe,onMouseMove:ae,onMouseLeave:me,onKeyDown:P?be:void 0,tabIndex:P?0:void 0,role:j.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":P?`${qh}-${S}`:void 0,ref:se,...j.domAttributes,children:[!X&&u.jsx(L,{id:t,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:K,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:H,sourceY:$,targetX:N,targetY:O,sourcePosition:E,targetPosition:z,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:J,markerEnd:te,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),U&&u.jsx(LN,{edge:j,isReconnectable:U,reconnectRadius:x,onReconnect:m,onReconnectStart:y,onReconnectEnd:w,sourceX:H,sourceY:$,targetX:N,targetY:O,sourcePosition:E,targetPosition:z,setUpdateHover:M,setReconnecting:R})]})})}var $N=D.memo(zN);const RN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Sg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:x,reconnectRadius:m,onEdgeDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:C}){const{edgesFocusable:k,edgesReconnectable:b,elementsSelectable:T,onError:j}=Pe(RN,Be),_=kN(r);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(EN,{defaultColor:t,rfId:o}),_.map(A=>u.jsx($N,{id:A,edgesFocusable:k,edgesReconnectable:b,elementsSelectable:T,noPanClassName:l,onReconnect:c,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:h,onClick:x,reconnectRadius:m,onDoubleClick:y,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:j,edgeTypes:i,disableKeyboardA11y:C},A))]})}Sg.displayName="EdgeRenderer";const FN=D.memo(Sg),HN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function VN({children:t}){const r=Pe(HN);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function BN(t){const r=Ar(),o=D.useRef(!1);D.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const WN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function UN(t){const r=Pe(WN),o=He();return D.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function YN(t){return t.connection.inProgress?{...t.connection,to:Hs(t.connection.to,t.transform)}:{...t.connection}}function XN(t){return YN}function GN(t){const r=XN();return Pe(r,Be)}const KN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function QN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:c,height:d,isValid:f,inProgress:g}=Pe(KN,Be);return!(c&&l&&g)?null:u.jsx("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:qe(["react-flow__connection",kh(f)]),children:u.jsx(Ng,{style:r,type:o,CustomComponent:i,isValid:f})})})}const Ng=({style:t,type:r=tr.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:c,fromNode:d,fromHandle:f,fromPosition:g,to:h,toNode:x,toHandle:m,toPosition:y,pointer:w}=GN();if(!l)return;if(o)return u.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:d,fromHandle:f,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:kh(i),toNode:x,toHandle:m,pointer:w});let S="";const C={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(r){case tr.Bezier:[S]=Ul(C);break;case tr.SimpleBezier:[S]=ug(C);break;case tr.Step:[S]=yc({...C,borderRadius:0});break;case tr.SmoothStep:[S]=yc(C);break;default:[S]=Lh(C)}return u.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};Ng.displayName="ConnectionLine";const qN={};function Mm(t=qN){D.useRef(t),He(),D.useEffect(()=>{},[t])}function ZN(){He(),D.useRef(!1),D.useEffect(()=>{},[])}function kg({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:x,onSelectionContextMenu:m,onSelectionStart:y,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:C,connectionLineComponent:k,connectionLineContainerStyle:b,selectionKeyCode:T,selectionOnDrag:j,selectionMode:_,multiSelectionKeyCode:A,panActivationKeyCode:L,zoomActivationKeyCode:P,deleteKeyCode:U,onlyRenderVisibleElements:K,elementsSelectable:se,defaultViewport:B,translateExtent:M,minZoom:X,maxZoom:R,preventScrolling:W,defaultMarkerColor:V,zoomOnScroll:H,zoomOnPinch:$,panOnScroll:N,panOnScrollSpeed:O,panOnScrollMode:E,zoomOnDoubleClick:z,panOnDrag:J,onPaneClick:te,onPaneMouseEnter:Q,onPaneMouseMove:ie,onPaneMouseLeave:le,onPaneScroll:oe,onPaneContextMenu:ae,paneClickDistance:me,nodeClickDistance:be,onEdgeContextMenu:q,onEdgeMouseEnter:ee,onEdgeMouseMove:he,onEdgeMouseLeave:we,reconnectRadius:xe,onReconnect:Me,onReconnectStart:$e,onReconnectEnd:Ke,noDragClassName:Ze,noWheelClassName:Je,noPanClassName:Lt,disableKeyboardA11y:at,nodeExtent:vt,rfId:pt,viewport:It,onViewportChange:mt}){return Mm(t),Mm(r),ZN(),BN(o),UN(It),u.jsx(pN,{onPaneClick:te,onPaneMouseEnter:Q,onPaneMouseMove:ie,onPaneMouseLeave:le,onPaneContextMenu:ae,onPaneScroll:oe,paneClickDistance:me,deleteKeyCode:U,selectionKeyCode:T,selectionOnDrag:j,selectionMode:_,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:A,panActivationKeyCode:L,zoomActivationKeyCode:P,elementsSelectable:se,zoomOnScroll:H,zoomOnPinch:$,zoomOnDoubleClick:z,panOnScroll:N,panOnScrollSpeed:O,panOnScrollMode:E,panOnDrag:J,defaultViewport:B,translateExtent:M,minZoom:X,maxZoom:R,onSelectionContextMenu:m,preventScrolling:W,noDragClassName:Ze,noWheelClassName:Je,noPanClassName:Lt,disableKeyboardA11y:at,onViewportChange:mt,isControlledViewport:!!It,children:u.jsxs(VN,{children:[u.jsx(FN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:Me,onReconnectStart:$e,onReconnectEnd:Ke,onlyRenderVisibleElements:K,onEdgeContextMenu:q,onEdgeMouseEnter:ee,onEdgeMouseMove:he,onEdgeMouseLeave:we,reconnectRadius:xe,defaultMarkerColor:V,noPanClassName:Lt,disableKeyboardA11y:at,rfId:pt}),u.jsx(QN,{style:C,type:S,component:k,containerStyle:b}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(NN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:x,nodeClickDistance:be,onlyRenderVisibleElements:K,noPanClassName:Lt,noDragClassName:Ze,disableKeyboardA11y:at,nodeExtent:vt,rfId:pt}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}kg.displayName="GraphView";const JN=D.memo(kg),_m=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:g=.5,maxZoom:h=2,nodeOrigin:x,nodeExtent:m,zIndexMode:y="basic"}={})=>{const w=new Map,S=new Map,C=new Map,k=new Map,b=i??r??[],T=o??t??[],j=x??[0,0],_=m??_s;Rh(C,k,b);const A=wc(T,w,S,{nodeOrigin:j,nodeExtent:_,zIndexMode:y});let L=[0,0,1];if(d&&l&&c){const P=Rs(w,{filter:B=>!!((B.width||B.initialWidth)&&(B.height||B.initialHeight))}),{x:U,y:K,zoom:se}=Lc(P,l,c,g,h,(f==null?void 0:f.padding)??.1);L=[U,K,se]}return{rfId:"1",width:l??0,height:c??0,transform:L,nodes:T,nodesInitialized:A,nodeLookup:w,parentLookup:S,edges:b,edgeLookup:k,connectionLookup:C,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:_s,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:So.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:j,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:f,fitViewResolver:null,connection:{...Nh},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:u1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Sh,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ek=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:g,maxZoom:h,nodeOrigin:x,nodeExtent:m,zIndexMode:y})=>hS((w,S)=>{async function C(){const{nodeLookup:k,panZoom:b,fitViewOptions:T,fitViewResolver:j,width:_,height:A,minZoom:L,maxZoom:P}=S();b&&(await l1({nodes:k,width:_,height:A,panZoom:b,minZoom:L,maxZoom:P},T),j==null||j.resolve(!0),w({fitViewResolver:null}))}return{..._m({nodes:t,edges:r,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:g,maxZoom:h,nodeOrigin:x,nodeExtent:m,defaultNodes:o,defaultEdges:i,zIndexMode:y}),setNodes:k=>{const{nodeLookup:b,parentLookup:T,nodeOrigin:j,elevateNodesOnSelect:_,fitViewQueued:A,zIndexMode:L}=S(),P=wc(k,b,T,{nodeOrigin:j,nodeExtent:m,elevateNodesOnSelect:_,checkEquality:!0,zIndexMode:L});A&&P?(C(),w({nodes:k,nodesInitialized:P,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:k,nodesInitialized:P})},setEdges:k=>{const{connectionLookup:b,edgeLookup:T}=S();Rh(b,T,k),w({edges:k})},setDefaultNodesAndEdges:(k,b)=>{if(k){const{setNodes:T}=S();T(k),w({hasDefaultNodes:!0})}if(b){const{setEdges:T}=S();T(b),w({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:b,nodeLookup:T,parentLookup:j,domNode:_,nodeOrigin:A,nodeExtent:L,debug:P,fitViewQueued:U,zIndexMode:K}=S(),{changes:se,updatedInternals:B}=P1(k,T,j,_,A,L,K);B&&(I1(T,j,{nodeOrigin:A,nodeExtent:L,zIndexMode:K}),U?(C(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(se==null?void 0:se.length)>0&&(P&&console.log("React Flow: trigger node changes",se),b==null||b(se)))},updateNodePositions:(k,b=!1)=>{const T=[];let j=[];const{nodeLookup:_,triggerNodeChanges:A,connection:L,updateConnection:P,onNodesChangeMiddlewareMap:U}=S();for(const[K,se]of k){const B=_.get(K),M=!!(B!=null&&B.expandParent&&(B!=null&&B.parentId)&&(se!=null&&se.position)),X={id:K,type:"position",position:M?{x:Math.max(0,se.position.x),y:Math.max(0,se.position.y)}:se.position,dragging:b};if(B&&L.inProgress&&L.fromNode.id===B.id){const R=_r(B,L.fromHandle,je.Left,!0);P({...L,from:R})}M&&B.parentId&&T.push({id:K,parentId:B.parentId,rect:{...se.internals.positionAbsolute,width:se.measured.width??0,height:se.measured.height??0}}),j.push(X)}if(T.length>0){const{parentLookup:K,nodeOrigin:se}=S(),B=Vc(T,_,K,se);j.push(...B)}for(const K of U.values())j=K(j);A(j)},triggerNodeChanges:k=>{const{onNodesChange:b,setNodes:T,nodes:j,hasDefaultNodes:_,debug:A}=S();if(k!=null&&k.length){if(_){const L=zS(k,j);T(L)}A&&console.log("React Flow: trigger node changes",k),b==null||b(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:b,setEdges:T,edges:j,hasDefaultEdges:_,debug:A}=S();if(k!=null&&k.length){if(_){const L=$S(k,j);T(L)}A&&console.log("React Flow: trigger edge changes",k),b==null||b(k)}},addSelectedNodes:k=>{const{multiSelectionActive:b,edgeLookup:T,nodeLookup:j,triggerNodeChanges:_,triggerEdgeChanges:A}=S();if(b){const L=k.map(P=>kr(P,!0));_(L);return}_(go(j,new Set([...k]),!0)),A(go(T))},addSelectedEdges:k=>{const{multiSelectionActive:b,edgeLookup:T,nodeLookup:j,triggerNodeChanges:_,triggerEdgeChanges:A}=S();if(b){const L=k.map(P=>kr(P,!0));A(L);return}A(go(T,new Set([...k]))),_(go(j,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:b}={})=>{const{edges:T,nodes:j,nodeLookup:_,triggerNodeChanges:A,triggerEdgeChanges:L}=S(),P=k||j,U=b||T,K=P.map(B=>{const M=_.get(B.id);return M&&(M.selected=!1),kr(B.id,!1)}),se=U.map(B=>kr(B.id,!1));A(K),L(se)},setMinZoom:k=>{const{panZoom:b,maxZoom:T}=S();b==null||b.setScaleExtent([k,T]),w({minZoom:k})},setMaxZoom:k=>{const{panZoom:b,minZoom:T}=S();b==null||b.setScaleExtent([T,k]),w({maxZoom:k})},setTranslateExtent:k=>{var b;(b=S().panZoom)==null||b.setTranslateExtent(k),w({translateExtent:k})},resetSelectedElements:()=>{const{edges:k,nodes:b,triggerNodeChanges:T,triggerEdgeChanges:j,elementsSelectable:_}=S();if(!_)return;const A=b.reduce((P,U)=>U.selected?[...P,kr(U.id,!1)]:P,[]),L=k.reduce((P,U)=>U.selected?[...P,kr(U.id,!1)]:P,[]);T(A),j(L)},setNodeExtent:k=>{const{nodes:b,nodeLookup:T,parentLookup:j,nodeOrigin:_,elevateNodesOnSelect:A,nodeExtent:L,zIndexMode:P}=S();k[0][0]===L[0][0]&&k[0][1]===L[0][1]&&k[1][0]===L[1][0]&&k[1][1]===L[1][1]||(wc(b,T,j,{nodeOrigin:_,nodeExtent:k,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:P}),w({nodeExtent:k}))},panBy:k=>{const{transform:b,width:T,height:j,panZoom:_,translateExtent:A}=S();return D1({delta:k,panZoom:_,transform:b,translateExtent:A,width:T,height:j})},setCenter:async(k,b,T)=>{const{width:j,height:_,maxZoom:A,panZoom:L}=S();if(!L)return Promise.resolve(!1);const P=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:A;return await L.setViewport({x:j/2-k*P,y:_/2-b*P,zoom:P},{duration:T==null?void 0:T.duration,ease:T==null?void 0:T.ease,interpolate:T==null?void 0:T.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...Nh}})},updateConnection:k=>{w({connection:k})},reset:()=>w({..._m()})}},Object.is);function Ql({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:c,initialMinZoom:d,initialMaxZoom:f,initialFitViewOptions:g,fitView:h,nodeOrigin:x,nodeExtent:m,zIndexMode:y,children:w}){const[S]=D.useState(()=>ek({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:c,fitView:h,minZoom:d,maxZoom:f,fitViewOptions:g,nodeOrigin:x,nodeExtent:m,zIndexMode:y}));return u.jsx(xS,{value:S,children:u.jsx(VS,{children:w})})}function tk({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:c,height:d,fitView:f,fitViewOptions:g,minZoom:h,maxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w}){return D.useContext(Xl)?u.jsx(u.Fragment,{children:t}):u.jsx(Ql,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:c,initialHeight:d,fitView:f,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:x,nodeOrigin:m,nodeExtent:y,zIndexMode:w,children:t})}const nk={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function rk({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:c,edgeTypes:d,onNodeClick:f,onEdgeClick:g,onInit:h,onMove:x,onMoveStart:m,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:C,onClickConnectStart:k,onClickConnectEnd:b,onNodeMouseEnter:T,onNodeMouseMove:j,onNodeMouseLeave:_,onNodeContextMenu:A,onNodeDoubleClick:L,onNodeDragStart:P,onNodeDrag:U,onNodeDragStop:K,onNodesDelete:se,onEdgesDelete:B,onDelete:M,onSelectionChange:X,onSelectionDragStart:R,onSelectionDrag:W,onSelectionDragStop:V,onSelectionContextMenu:H,onSelectionStart:$,onSelectionEnd:N,onBeforeDelete:O,connectionMode:E,connectionLineType:z=tr.Bezier,connectionLineStyle:J,connectionLineComponent:te,connectionLineContainerStyle:Q,deleteKeyCode:ie="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:oe=!1,selectionMode:ae=Ps.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:be=Ts()?"Meta":"Control",zoomActivationKeyCode:q=Ts()?"Meta":"Control",snapToGrid:ee,snapGrid:he,onlyRenderVisibleElements:we=!1,selectNodesOnDrag:xe,nodesDraggable:Me,autoPanOnNodeFocus:$e,nodesConnectable:Ke,nodesFocusable:Ze,nodeOrigin:Je=Zh,edgesFocusable:Lt,edgesReconnectable:at,elementsSelectable:vt=!0,defaultViewport:pt=_S,minZoom:It=.5,maxZoom:mt=2,translateExtent:Yt=_s,preventScrolling:zt=!0,nodeExtent:yn,defaultMarkerColor:rr="#b1b1b7",zoomOnScroll:Zl=!0,zoomOnPinch:Bs=!0,panOnScroll:Ws=!1,panOnScrollSpeed:Jl=.5,panOnScrollMode:Co=Cr.Free,zoomOnDoubleClick:Io=!0,panOnDrag:Eo=!0,onPaneClick:Mo,onPaneMouseEnter:_o,onPaneMouseMove:Pn,onPaneMouseLeave:Dn,onPaneScroll:Us,onPaneContextMenu:Ys,paneClickDistance:Xs=1,nodeClickDistance:Gs=0,children:Ks,onReconnect:Po,onReconnectStart:Qs,onReconnectEnd:or,onEdgeContextMenu:Do,onEdgeDoubleClick:sr,onEdgeMouseEnter:ea,onEdgeMouseMove:ir,onEdgeMouseLeave:zr,reconnectRadius:$r=10,onNodesChange:To,onEdgesChange:ta,noDragClassName:na="nodrag",noWheelClassName:ra="nowheel",noPanClassName:ln="nopan",fitView:Oo,fitViewOptions:Ao,connectOnClick:oa,attributionPosition:qs,proOptions:Zs,defaultEdgeOptions:Js,elevateNodesOnSelect:ei=!0,elevateEdgesOnSelect:sa=!1,disableKeyboardA11y:ti=!1,autoPanOnConnect:We,autoPanOnNodeDrag:ia,autoPanSpeed:Lo,connectionRadius:ni,isValidConnection:Rr,onError:la,style:ri,id:lr,nodeDragThreshold:$t,connectionDragThreshold:aa,viewport:Et,onViewportChange:ua,width:ca,height:da,colorMode:Fr="light",debug:Hr,onScroll:an,ariaLabelConfig:Vr,zIndexMode:oi="basic",...fa},zo){const Br=lr||"1",$o=OS(Fr),ar=D.useCallback(si=>{si.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),an==null||an(si)},[an]);return u.jsx("div",{"data-testid":"rf__wrapper",...fa,onScroll:ar,style:{...ri,...nk},ref:zo,className:qe(["react-flow",l,$o]),id:lr,role:"application",children:u.jsxs(tk,{nodes:t,edges:r,width:ca,height:da,fitView:Oo,fitViewOptions:Ao,minZoom:It,maxZoom:mt,nodeOrigin:Je,nodeExtent:yn,zIndexMode:oi,children:[u.jsx(JN,{onInit:h,onNodeClick:f,onEdgeClick:g,onNodeMouseEnter:T,onNodeMouseMove:j,onNodeMouseLeave:_,onNodeContextMenu:A,onNodeDoubleClick:L,nodeTypes:c,edgeTypes:d,connectionLineType:z,connectionLineStyle:J,connectionLineComponent:te,connectionLineContainerStyle:Q,selectionKeyCode:le,selectionOnDrag:oe,selectionMode:ae,deleteKeyCode:ie,multiSelectionKeyCode:be,panActivationKeyCode:me,zoomActivationKeyCode:q,onlyRenderVisibleElements:we,defaultViewport:pt,translateExtent:Yt,minZoom:It,maxZoom:mt,preventScrolling:zt,zoomOnScroll:Zl,zoomOnPinch:Bs,zoomOnDoubleClick:Io,panOnScroll:Ws,panOnScrollSpeed:Jl,panOnScrollMode:Co,panOnDrag:Eo,onPaneClick:Mo,onPaneMouseEnter:_o,onPaneMouseMove:Pn,onPaneMouseLeave:Dn,onPaneScroll:Us,onPaneContextMenu:Ys,paneClickDistance:Xs,nodeClickDistance:Gs,onSelectionContextMenu:H,onSelectionStart:$,onSelectionEnd:N,onReconnect:Po,onReconnectStart:Qs,onReconnectEnd:or,onEdgeContextMenu:Do,onEdgeDoubleClick:sr,onEdgeMouseEnter:ea,onEdgeMouseMove:ir,onEdgeMouseLeave:zr,reconnectRadius:$r,defaultMarkerColor:rr,noDragClassName:na,noWheelClassName:ra,noPanClassName:ln,rfId:Br,disableKeyboardA11y:ti,nodeExtent:yn,viewport:Et,onViewportChange:ua}),u.jsx(TS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:C,onClickConnectStart:k,onClickConnectEnd:b,nodesDraggable:Me,autoPanOnNodeFocus:$e,nodesConnectable:Ke,nodesFocusable:Ze,edgesFocusable:Lt,edgesReconnectable:at,elementsSelectable:vt,elevateNodesOnSelect:ei,elevateEdgesOnSelect:sa,minZoom:It,maxZoom:mt,nodeExtent:yn,onNodesChange:To,onEdgesChange:ta,snapToGrid:ee,snapGrid:he,connectionMode:E,translateExtent:Yt,connectOnClick:oa,defaultEdgeOptions:Js,fitView:Oo,fitViewOptions:Ao,onNodesDelete:se,onEdgesDelete:B,onDelete:M,onNodeDragStart:P,onNodeDrag:U,onNodeDragStop:K,onSelectionDrag:W,onSelectionDragStart:R,onSelectionDragStop:V,onMove:x,onMoveStart:m,onMoveEnd:y,noPanClassName:ln,nodeOrigin:Je,rfId:Br,autoPanOnConnect:We,autoPanOnNodeDrag:ia,autoPanSpeed:Lo,onError:la,connectionRadius:ni,isValidConnection:Rr,selectNodesOnDrag:xe,nodeDragThreshold:$t,connectionDragThreshold:aa,onBeforeDelete:O,debug:Hr,ariaLabelConfig:Vr,zIndexMode:oi}),u.jsx(MS,{onSelectionChange:X}),Ks,u.jsx(jS,{proOptions:Zs,position:qs}),u.jsx(kS,{rfId:Br,disableKeyboardA11y:ti})]})})}var jg=eg(rk);const ok=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function bg({children:t}){const r=Pe(ok);return r?gS.createPortal(t,r):null}function Wc(){const t=He();return D.useCallback(r=>{const{domNode:o,updateNodeInternals:i}=t.getState(),l=Array.isArray(r)?r:[r],c=new Map;l.forEach(d=>{const f=o==null?void 0:o.querySelector(`.react-flow__node[data-id="${d}"]`);f&&c.set(d,{id:d,nodeElement:f,force:!0})}),requestAnimationFrame(()=>i(c,{triggerFitView:!1}))},[])}function sk({dimensions:t,lineWidth:r,variant:o,className:i}){return u.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:qe(["react-flow__background-pattern",o,i])})}function ik({radius:t,className:r}){return u.jsx("circle",{cx:t,cy:t,r:t,className:qe(["react-flow__background-pattern","dots",r])})}var nr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(nr||(nr={}));const lk={[nr.Dots]:1,[nr.Lines]:1,[nr.Cross]:6},ak=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Cg({id:t,variant:r=nr.Dots,gap:o=20,size:i,lineWidth:l=1,offset:c=0,color:d,bgColor:f,style:g,className:h,patternClassName:x}){const m=D.useRef(null),{transform:y,patternId:w}=Pe(ak,Be),S=i||lk[r],C=r===nr.Dots,k=r===nr.Cross,b=Array.isArray(o)?o:[o,o],T=[b[0]*y[2]||1,b[1]*y[2]||1],j=S*y[2],_=Array.isArray(c)?c:[c,c],A=k?[j,j]:T,L=[_[0]*y[2]||1+A[0]/2,_[1]*y[2]||1+A[1]/2],P=`${w}${t||""}`;return u.jsxs("svg",{className:qe(["react-flow__background",h]),style:{...g,...Kl,"--xy-background-color-props":f,"--xy-background-pattern-color-props":d},ref:m,"data-testid":"rf__background",children:[u.jsx("pattern",{id:P,x:y[0]%T[0],y:y[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${L[0]},-${L[1]})`,children:C?u.jsx(ik,{radius:j/2,className:x}):u.jsx(sk,{dimensions:A,lineWidth:l,variant:r,className:x})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}Cg.displayName="Background";const Ig=D.memo(Cg);function uk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ck(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function dk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function fk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function pk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function hl({children:t,className:r,...o}){return u.jsx("button",{type:"button",className:qe(["react-flow__controls-button",r]),...o,children:t})}const mk=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Eg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:c,onZoomOut:d,onFitView:f,onInteractiveChange:g,className:h,children:x,position:m="bottom-left",orientation:y="vertical","aria-label":w}){const S=He(),{isInteractive:C,minZoomReached:k,maxZoomReached:b,ariaLabelConfig:T}=Pe(mk,Be),{zoomIn:j,zoomOut:_,fitView:A}=Ar(),L=()=>{j(),c==null||c()},P=()=>{_(),d==null||d()},U=()=>{A(l),f==null||f()},K=()=>{S.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),g==null||g(!C)},se=y==="horizontal"?"horizontal":"vertical";return u.jsxs(Gl,{className:qe(["react-flow__controls",se,h]),position:m,style:t,"data-testid":"rf__controls","aria-label":w??T["controls.ariaLabel"],children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(hl,{onClick:L,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:b,children:u.jsx(uk,{})}),u.jsx(hl,{onClick:P,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:k,children:u.jsx(ck,{})})]}),o&&u.jsx(hl,{className:"react-flow__controls-fitview",onClick:U,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:u.jsx(dk,{})}),i&&u.jsx(hl,{className:"react-flow__controls-interactive",onClick:K,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:C?u.jsx(pk,{}):u.jsx(fk,{})}),x]})}Eg.displayName="Controls";const Mg=D.memo(Eg);function hk({id:t,x:r,y:o,width:i,height:l,style:c,color:d,strokeColor:f,strokeWidth:g,className:h,borderRadius:x,shapeRendering:m,selected:y,onClick:w}){const{background:S,backgroundColor:C}=c||{},k=d||S||C;return u.jsx("rect",{className:qe(["react-flow__minimap-node",{selected:y},h]),x:r,y:o,rx:x,ry:x,width:i,height:l,style:{fill:k,stroke:f,strokeWidth:g},shapeRendering:m,onClick:w?b=>w(b,t):void 0})}const gk=D.memo(hk),xk=t=>t.nodes.map(r=>r.id),lc=t=>t instanceof Function?t:()=>t;function yk({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:c=gk,onClick:d}){const f=Pe(xk,Be),g=lc(r),h=lc(t),x=lc(o),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(y=>u.jsx(wk,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:x,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:c,onClick:d,shapeRendering:m},y))})}function vk({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:c,shapeRendering:d,NodeComponent:f,onClick:g}){const{node:h,x,y:m,width:y,height:w}=Pe(S=>{const{internals:C}=S.nodeLookup.get(t),k=C.userNode,{x:b,y:T}=C.positionAbsolute,{width:j,height:_}=_n(k);return{node:k,x:b,y:T,width:j,height:_}},Be);return!h||h.hidden||!Mh(h)?null:u.jsx(f,{x,y:m,width:y,height:w,style:h.style,selected:!!h.selected,className:i(h),color:r(h),borderRadius:l,strokeColor:o(h),strokeWidth:c,shapeRendering:d,onClick:g,id:h.id})}const wk=D.memo(vk);var Sk=D.memo(yk);const Nk=200,kk=150,jk=t=>!t.hidden,bk=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?Eh(Rs(t.nodeLookup,{filter:jk}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},Ck="react-flow__minimap-desc";function _g({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:g,maskColor:h,maskStrokeColor:x,maskStrokeWidth:m,position:y="bottom-right",onClick:w,onNodeClick:S,pannable:C=!1,zoomable:k=!1,ariaLabel:b,inversePan:T,zoomStep:j=1,offsetScale:_=5}){const A=He(),L=D.useRef(null),{boundingRect:P,viewBB:U,rfId:K,panZoom:se,translateExtent:B,flowWidth:M,flowHeight:X,ariaLabelConfig:R}=Pe(bk,Be),W=(t==null?void 0:t.width)??Nk,V=(t==null?void 0:t.height)??kk,H=P.width/W,$=P.height/V,N=Math.max(H,$),O=N*W,E=N*V,z=_*N,J=P.x-(O-P.width)/2-z,te=P.y-(E-P.height)/2-z,Q=O+z*2,ie=E+z*2,le=`${Ck}-${K}`,oe=D.useRef(0),ae=D.useRef();oe.current=N,D.useEffect(()=>{if(L.current&&se)return ae.current=H1({domNode:L.current,panZoom:se,getTransform:()=>A.getState().transform,getViewScale:()=>oe.current}),()=>{var ee;(ee=ae.current)==null||ee.destroy()}},[se]),D.useEffect(()=>{var ee;(ee=ae.current)==null||ee.update({translateExtent:B,width:M,height:X,inversePan:T,pannable:C,zoomStep:j,zoomable:k})},[C,k,T,j,B,M,X]);const me=w?ee=>{var xe;const[he,we]=((xe=ae.current)==null?void 0:xe.pointer(ee))||[0,0];w(ee,{x:he,y:we})}:void 0,be=S?D.useCallback((ee,he)=>{const we=A.getState().nodeLookup.get(he).internals.userNode;S(ee,we)},[]):void 0,q=b??R["minimap.ariaLabel"];return u.jsx(Gl,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*N:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:qe(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:W,height:V,viewBox:`${J} ${te} ${Q} ${ie}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:L,onClick:me,children:[q&&u.jsx("title",{id:le,children:q}),u.jsx(Sk,{onClick:be,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${J-z},${te-z}h${Q+z*2}v${ie+z*2}h${-Q-z*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_g.displayName="MiniMap";const Pg=D.memo(_g),Ik=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,Ek={[Pr.Line]:"right",[Pr.Handle]:"bottom-right"};function Mk({nodeId:t,position:r,variant:o=Pr.Handle,className:i,style:l=void 0,children:c,color:d,minWidth:f=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:y,autoScale:w=!0,shouldResize:S,onResizeStart:C,onResize:k,onResizeEnd:b}){const T=og(),j=typeof t=="string"?t:T,_=He(),A=D.useRef(null),L=o===Pr.Handle,P=Pe(D.useCallback(Ik(L&&w),[L,w]),Be),U=D.useRef(null),K=r??Ek[o];D.useEffect(()=>{if(!(!A.current||!j))return U.current||(U.current=rS({domNode:A.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:B,transform:M,snapGrid:X,snapToGrid:R,nodeOrigin:W,domNode:V}=_.getState();return{nodeLookup:B,transform:M,snapGrid:X,snapToGrid:R,nodeOrigin:W,paneDomNode:V}},onChange:(B,M)=>{const{triggerNodeChanges:X,nodeLookup:R,parentLookup:W,nodeOrigin:V}=_.getState(),H=[],$={x:B.x,y:B.y},N=R.get(j);if(N&&N.expandParent&&N.parentId){const O=N.origin??V,E=B.width??N.measured.width??0,z=B.height??N.measured.height??0,J={id:N.id,parentId:N.parentId,rect:{width:E,height:z,..._h({x:B.x??N.position.x,y:B.y??N.position.y},{width:E,height:z},N.parentId,R,O)}},te=Vc([J],R,W,V);H.push(...te),$.x=B.x?Math.max(O[0]*E,B.x):void 0,$.y=B.y?Math.max(O[1]*z,B.y):void 0}if($.x!==void 0&&$.y!==void 0){const O={id:j,type:"position",position:{...$}};H.push(O)}if(B.width!==void 0&&B.height!==void 0){const E={id:j,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:B.width,height:B.height}};H.push(E)}for(const O of M){const E={...O,type:"position"};H.push(E)}X(H)},onEnd:({width:B,height:M})=>{const X={id:j,type:"dimensions",resizing:!1,dimensions:{width:B,height:M}};_.getState().triggerNodeChanges([X])}})),U.current.update({controlPosition:K,boundaries:{minWidth:f,minHeight:g,maxWidth:h,maxHeight:x},keepAspectRatio:m,resizeDirection:y,onResizeStart:C,onResize:k,onResizeEnd:b,shouldResize:S}),()=>{var B;(B=U.current)==null||B.destroy()}},[K,f,g,h,x,m,C,k,b,S]);const se=K.split("-");return u.jsx("div",{className:qe(["react-flow__resize-control","nodrag",...se,o,i]),ref:A,style:{...l,scale:P,...d&&{[L?"backgroundColor":"borderColor"]:d}},children:c})}const Pm=D.memo(Mk);function _k({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:c,color:d,minWidth:f=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:m=!1,autoScale:y=!0,shouldResize:w,onResizeStart:S,onResize:C,onResizeEnd:k}){return r?u.jsxs(u.Fragment,{children:[q1.map(b=>u.jsx(Pm,{className:l,style:c,nodeId:t,position:b,variant:Pr.Line,color:d,minWidth:f,minHeight:g,maxWidth:h,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:C,onResizeEnd:k},b)),Q1.map(b=>u.jsx(Pm,{className:o,style:i,nodeId:t,position:b,color:d,minWidth:f,minHeight:g,maxWidth:h,maxHeight:x,onResizeStart:S,keepAspectRatio:m,autoScale:y,shouldResize:w,onResize:C,onResizeEnd:k},b))]}):null}const Dm=t=>{let r;const o=new Set,i=(h,x)=>{const m=typeof h=="function"?h(r):h;if(!Object.is(m,r)){const y=r;r=x??(typeof m!="object"||m===null)?m:Object.assign({},r,m),o.forEach(w=>w(r,y))}},l=()=>r,f={setState:i,getState:l,getInitialState:()=>g,subscribe:h=>(o.add(h),()=>o.delete(h))},g=r=t(i,l,f);return f},Dg=(t=>t?Dm(t):Dm),Pk=t=>t;function Dk(t,r=Pk){const o=ws.useSyncExternalStore(t.subscribe,ws.useCallback(()=>r(t.getState()),[t,r]),ws.useCallback(()=>r(t.getInitialState()),[t,r]));return ws.useDebugValue(o),o}const Tm=t=>{const r=Dg(t),o=i=>Dk(r,i);return Object.assign(o,r),o},Vs=(t=>t?Tm(t):Tm);var Om=(t,r,o)=>(l,c)=>({pastStates:(o==null?void 0:o.pastStates)||[],futureStates:(o==null?void 0:o.futureStates)||[],undo:(d=1)=>{var f,g;if(c().pastStates.length){const h=((f=o==null?void 0:o.partialize)==null?void 0:f.call(o,r()))||r(),x=c().pastStates.splice(-d,d),m=x.shift();t(m),l({pastStates:c().pastStates,futureStates:c().futureStates.concat(((g=o==null?void 0:o.diff)==null?void 0:g.call(o,h,m))||h,x.reverse())})}},redo:(d=1)=>{var f,g;if(c().futureStates.length){const h=((f=o==null?void 0:o.partialize)==null?void 0:f.call(o,r()))||r(),x=c().futureStates.splice(-d,d),m=x.shift();t(m),l({pastStates:c().pastStates.concat(((g=o==null?void 0:o.diff)==null?void 0:g.call(o,h,m))||h,x.reverse()),futureStates:c().futureStates})}},clear:()=>l({pastStates:[],futureStates:[]}),isTracking:!0,pause:()=>l({isTracking:!1}),resume:()=>l({isTracking:!0}),setOnSave:d=>l({_onSave:d}),_onSave:o==null?void 0:o.onSave,_handleSet:(d,f,g,h)=>{var x,m;o!=null&&o.limit&&c().pastStates.length>=(o==null?void 0:o.limit)&&c().pastStates.shift(),(m=(x=c())._onSave)==null||m.call(x,d,g),l({pastStates:c().pastStates.concat(h||d),futureStates:[]})}}),Tk=(t,r)=>(i,l,c)=>{var h,x;c.temporal=Dg(((h=r==null?void 0:r.wrapTemporal)==null?void 0:h.call(r,Om(i,l,r)))||Om(i,l,r));const d=((x=r==null?void 0:r.handleSet)==null?void 0:x.call(r,c.temporal.getState()._handleSet))||c.temporal.getState()._handleSet,f=m=>{var S,C,k;if(!c.temporal.getState().isTracking)return;const y=((S=r==null?void 0:r.partialize)==null?void 0:S.call(r,l()))||l(),w=(C=r==null?void 0:r.diff)==null?void 0:C.call(r,m,y);w===null||(k=r==null?void 0:r.equality)!=null&&k.call(r,m,y)||d(m,void 0,y,w)},g=c.setState;return c.setState=(...m)=>{var w;const y=((w=r==null?void 0:r.partialize)==null?void 0:w.call(r,l()))||l();g(...m),f(y)},t((...m)=>{var w;const y=((w=r==null?void 0:r.partialize)==null?void 0:w.call(r,l()))||l();i(...m),f(y)},l,c)};const Ok="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let mn=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=Ok[o[t]&63];return r};const lt="__station_input__",xt="__station_output__",Ak=100,Lk=["energycells"];function zk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return Ak}function $k(t,r){return Lk.includes(t)?r/100:1}const Tg=3600,vs={food:75,medical:45,per:200,cycle:600},gl={food:50,medical:30,per:200},Rk="foodrations",Fk="medicalsupplies";function Hk(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),c=Math.max(i-t,0),d=t>0?Math.min(i/t,1):0,f=l*(vs.food/vs.per),g=c*(gl.food/gl.per),h=l*(vs.medical/vs.per),x=c*(gl.medical/gl.per),m=Tg/vs.cycle,y=(f+g)*m,w=(h+x)*m;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:c,workerRatio:d,foodDemand:y,medicalDemand:w}}function Vk(t,r){return 1+t*r}function Bk(t,r){if(t.totalCapacity<=0||r<=0)return[];const o=r/t.totalCapacity,i=[];return t.foodDemand>0&&i.push({wareId:Rk,amount:t.foodDemand*o}),t.medicalDemand>0&&i.push({wareId:Fk,amount:t.medicalDemand*o}),i}function Uc(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const c=`${o}_default`;if(r[c])return r[c];for(const d of Object.values(r))if(d.wareId===o)return d;return null}function kc(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Wk(t,r,o,i){const l=kc(t.blueprintId,r),c=[],d=[];if(l==="production"){const f=r.modules.production[t.blueprintId];if(f){const g=Uc(f,r.recipes);if(g){const h=$k(f.producedWareId,o),x=Vk(g.workforceBonus,i),m=h*x,y=Tg/g.time,w=g.amount*t.count*m*y;d.push({wareId:f.producedWareId,amount:w});for(const S of g.inputs){const C=S.amount*t.count*y;c.push({wareId:S.ware,amount:C})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:c,grossOutputs:d,netInputs:[...c],netOutputs:[...d]}}function mo(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Uk(t,r,o){const i=zk(t,r),l=t.fillHabitats??!1,c=t.moduleConnections??[];let d=0,f=0;for(const N of t.modules){const O=kc(N.blueprintId,o);if(O==="production"){const E=o.modules.production[N.blueprintId];E&&(d+=E.workforceMax*N.count)}else if(O==="habitat"){const E=o.modules.habitat[N.blueprintId];E&&(f+=E.workforceCapacity*N.count)}}const g=Hk(d,f,l),h=t.modules.map(N=>Wk(N,o,i,g.workerRatio)),x=new Map;for(const N of h)x.set(N.moduleId,N);for(const N of t.modules)if(kc(N.blueprintId,o)==="habitat"){const E=o.modules.habitat[N.blueprintId],z=x.get(N.id);if(E&&z){const J=E.workforceCapacity*N.count,te=Bk(g,J);z.grossInputs.push(...te),z.netInputs=[...z.grossInputs]}}const m=new Map;for(const N of h)m.set(N.moduleId,new Map);const y=new Map;for(const N of h)y.set(N.moduleId,new Map);const w=new Map;for(const N of h){const O=new Map;for(const E of N.grossOutputs)O.set(E.wareId,E.amount);w.set(N.moduleId,O)}const S=new Map;for(const N of h){const O=new Map;for(const E of N.grossInputs)O.set(E.wareId,E.amount);S.set(N.moduleId,O)}const C=c.filter(N=>N.sourceModuleId!==lt&&N.targetModuleId!==xt),k=c.filter(N=>N.sourceModuleId===lt),b=c.filter(N=>N.targetModuleId===xt),T=[];for(const N of C){const O=N.mode??"auto",E=w.get(N.sourceModuleId),z=(E==null?void 0:E.get(N.wareId))??0,J=S.get(N.targetModuleId),te=(J==null?void 0:J.get(N.wareId))??0;let Q,ie=!1,le=!1;switch(O){case"custom":Q=Math.min(N.amount,z,te),ie=N.amount>z,le=N.amount>te;break;case"max":Q=Math.min(z,te),ie=z<te,le=te<z;break;case"auto":default:Q=Math.min(z,te),ie=z<te,le=te<z;break}T.push({connectionId:N.id,effectiveAmount:Q,sourceConstrained:ie,targetConstrained:le}),E&&E.set(N.wareId,z-Q),J&&J.set(N.wareId,te-Q);const oe=m.get(N.targetModuleId);if(oe){const me=oe.get(N.wareId)||0;oe.set(N.wareId,me+Q)}const ae=y.get(N.sourceModuleId);if(ae){const me=ae.get(N.wareId)||0;ae.set(N.wareId,me+Q)}}for(const N of k){const O=N.mode??"auto",E=S.get(N.targetModuleId),z=(E==null?void 0:E.get(N.wareId))??0;let J,te=!1,Q=!1;switch(O){case"custom":J=Math.min(N.amount,z),Q=N.amount>z;break;case"max":case"auto":default:J=z;break}T.push({connectionId:N.id,effectiveAmount:J,sourceConstrained:te,targetConstrained:Q}),E&&E.set(N.wareId,z-J)}for(const N of b){const O=N.mode??"auto",E=w.get(N.sourceModuleId),z=(E==null?void 0:E.get(N.wareId))??0;let J,te=!1,Q=!1;switch(O){case"custom":J=Math.min(N.amount,z),te=N.amount>z;break;case"max":case"auto":default:J=z;break}T.push({connectionId:N.id,effectiveAmount:J,sourceConstrained:te,targetConstrained:Q}),E&&E.set(N.wareId,z-J)}for(const N of h){const O=m.get(N.moduleId)||new Map,E=y.get(N.moduleId)||new Map;N.netInputs=[];for(const z of N.grossInputs){const J=O.get(z.wareId)||0,te=z.amount-J;te>.01&&N.netInputs.push({wareId:z.wareId,amount:te})}N.netOutputs=[];for(const z of N.grossOutputs){const J=E.get(z.wareId)||0,te=z.amount-J;te>.01&&N.netOutputs.push({wareId:z.wareId,amount:te})}}const j=[],_=[],A=[],L=[];for(const N of h)j.push(...N.grossInputs),_.push(...N.grossOutputs),A.push(...N.netInputs),L.push(...N.netOutputs);const P=mo(j),U=mo(_),K=mo(A),se=mo(L),B=k.map(N=>{const O=T.find(E=>E.connectionId===N.id);return{wareId:N.wareId,amount:(O==null?void 0:O.effectiveAmount)??N.amount}}),M=b.map(N=>{const O=T.find(E=>E.connectionId===N.id);return{wareId:N.wareId,amount:(O==null?void 0:O.effectiveAmount)??N.amount}}),X=mo(B),R=mo(M),W=new Map;for(const N of X)W.set(N.wareId,N.amount);const V=new Map;for(const N of R)V.set(N.wareId,N.amount);const H=[];for(const N of K){const O=W.get(N.wareId)||0,E=N.amount-O;E>.01&&H.push({wareId:N.wareId,amount:E})}const $=[];for(const N of se){const O=V.get(N.wareId)||0,E=N.amount-O;E>.01&&$.push({wareId:N.wareId,amount:E})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:d,totalWorkforceCapacity:f,actualPopulation:g.actualPopulation,workforceFoodDemand:g.foodDemand,workforceMedicalDemand:g.medicalDemand,modules:h,grossInputs:P,grossOutputs:U,netInputs:K,netOutputs:se,availableForImport:H,availableForExport:$,stationInputs:X,stationOutputs:R,externallySupplied:[],externallyConsumed:[],remainingInputs:[...X],remainingOutputs:[...R],moduleConnections:T}}function Am(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Yk(t,r){const o=t.stations.map(y=>Uk(y,t.sectors,r)),i=new Map;for(const y of o)i.set(y.stationId,y);const l=new Map,c=new Map,d=new Map,f=new Map;for(const y of t.stations)l.set(y.id,new Map),c.set(y.id,new Map),d.set(y.id,new Map),f.set(y.id,new Map);for(const y of o){const w=d.get(y.stationId),S=f.get(y.stationId);for(const C of y.stationOutputs){const k=y.netOutputs.find(T=>T.wareId===C.wareId),b=Math.min(C.amount,(k==null?void 0:k.amount)??C.amount);w.set(C.wareId,b)}for(const C of y.stationInputs)S.set(C.wareId,C.amount)}const g=[];for(const y of t.connections){const w=y.mode??"auto",S=d.get(y.sourceStationId),C=(S==null?void 0:S.get(y.wareId))??0,k=f.get(y.targetStationId),b=(k==null?void 0:k.get(y.wareId))??0;let T,j=!1,_=!1;switch(w){case"custom":T=Math.min(y.amount,C,b),j=y.amount>C,_=y.amount>b;break;case"max":T=Math.min(C,b),j=C<b,_=b<C;break;case"auto":default:T=Math.min(C,b),j=C<b,_=b<C;break}g.push({connectionId:y.id,effectiveAmount:T,sourceConstrained:j,targetConstrained:_}),S&&S.set(y.wareId,C-T),k&&k.set(y.wareId,b-T);const A=l.get(y.targetStationId);if(A){const P=A.get(y.wareId)||0;A.set(y.wareId,P+T)}const L=c.get(y.sourceStationId);if(L){const P=L.get(y.wareId)||0;L.set(y.wareId,P+T)}}for(const y of o){const w=l.get(y.stationId)||new Map,S=c.get(y.stationId)||new Map;y.externallySupplied=Array.from(w.entries()).map(([k,b])=>({wareId:k,amount:b})).filter(k=>k.amount>.01),y.externallyConsumed=Array.from(S.entries()).map(([k,b])=>({wareId:k,amount:b})).filter(k=>k.amount>.01),y.remainingInputs=[];for(const k of y.stationInputs){const b=w.get(k.wareId)||0,T=k.amount-b;T>.01&&y.remainingInputs.push({wareId:k.wareId,amount:T})}y.remainingOutputs=[];for(const k of y.stationOutputs){const b=S.get(k.wareId)||0,T=k.amount-b;T>.01&&y.remainingOutputs.push({wareId:k.wareId,amount:T})}const C=t.stations.find(k=>k.id===y.stationId);if(C){const k=C.moduleConnections??[];for(const[b,T]of w.entries()){if(T<.01)continue;const j=k.filter(L=>L.sourceModuleId===lt&&L.wareId===b);if(j.length===0)continue;const _=j.reduce((L,P)=>L+P.amount,0);if(_<.01)continue;const A=Math.min(T/_,1);for(const L of j){const P=y.modules.find(se=>se.moduleId===L.targetModuleId);if(!P)continue;const U=L.amount*A,K=P.netInputs.findIndex(se=>se.wareId===b);if(K!==-1){const B=P.netInputs[K].amount-U;B>.01?P.netInputs[K].amount=B:P.netInputs.splice(K,1)}}}for(const[b,T]of S.entries()){if(T<.01)continue;const j=k.filter(L=>L.targetModuleId===xt&&L.wareId===b);if(j.length===0)continue;const _=j.reduce((L,P)=>L+P.amount,0);if(_<.01)continue;const A=Math.min(T/_,1);for(const L of j){const P=y.modules.find(se=>se.moduleId===L.sourceModuleId);if(!P)continue;const U=L.amount*A,K=P.netOutputs.findIndex(se=>se.wareId===b);if(K!==-1){const B=P.netOutputs[K].amount-U;B>.01?P.netOutputs[K].amount=B:P.netOutputs.splice(K,1)}}}}}const h=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const S of y.stationInputs){const C=w.get(S.wareId)||0;C<S.amount-.01&&h.push({wareId:S.wareId,stationId:y.stationId,required:S.amount,supplied:C,deficit:S.amount-C})}}const x=[],m=[];for(const y of o){const w=l.get(y.stationId)||new Map;for(const C of y.netInputs){const k=w.get(C.wareId)||0,b=C.amount-k;b>0&&x.push({wareId:C.wareId,amount:b})}const S=new Map;for(const C of t.connections)if(C.sourceStationId===y.stationId){const k=S.get(C.wareId)||0;S.set(C.wareId,k+C.amount)}for(const C of y.netOutputs){const k=S.get(C.wareId)||0,b=C.amount-k;b>0&&m.push({wareId:C.wareId,amount:b})}}return{stations:o,connections:g,totalInputs:Am(x),totalOutputs:Am(m),deficits:h}}function Og(t,r){return t.connections.find(o=>o.connectionId===r)}function Tr(t,r){return t.stations.find(o=>o.stationId===r)}function bl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function en(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const Oe=Vs((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function Lm(t,r="swi",o=[]){const i=new Date().toISOString();return{id:mn(),name:t,version:1,gameMode:r,tags:o,createdAt:i,updatedAt:i,sectors:[],stations:[],connections:[]}}function xl(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const ce=Vs()(Tk((t,r)=>({plan:Lm("New Plan"),computed:xl(),createPlan:o=>{t({plan:Lm(o),computed:xl()})},loadPlan:o=>{const i={...o,gameMode:o.gameMode||"swi",tags:o.tags||[],stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(c=>({...c,locked:c.locked??!1,ratio:c.ratio??1}))}))};t({plan:i,computed:xl()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:mn(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(c=>({plan:{...c.plan,sectors:[...c.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:mn(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(c=>({plan:{...c.plan,stations:[...c.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,sectorId:i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const c={id:mn(),blueprintId:i,count:1,position:l};return t(d=>({plan:{...d.plan,stations:d.plan.stations.map(f=>f.id===o?{...f,modules:[...f.modules,c]}:f),updatedAt:new Date().toISOString()}})),r().recompute(),c.id},updateModule:(o,i,l)=>{const d=r().plan.stations.find(h=>h.id===o),f=d==null?void 0:d.modules.find(h=>h.id===i);if(l.count!==void 0&&f&&l.count!==f.count&&f){const h=l.count/f.count,x=((d==null?void 0:d.moduleConnections)??[]).map(m=>m.sourceModuleId===i&&!m.locked?{...m,amount:m.amount*h}:m.targetModuleId===i&&m.sourceModuleId===lt&&!m.locked?{...m,amount:m.amount*h}:m);t(m=>({plan:{...m.plan,stations:m.plan.stations.map(y=>y.id===o?{...y,modules:y.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:x}:y),updatedAt:new Date().toISOString()}}))}else t(h=>({plan:{...h.plan,stations:h.plan.stations.map(x=>x.id===o?{...x,modules:x.modules.map(m=>m.id===i?{...m,...l}:m)}:x),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,modules:c.modules.filter(d=>d.id!==i),moduleConnections:(c.moduleConnections??[]).filter(d=>d.sourceModuleId!==i&&d.targetModuleId!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:mn(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(c=>c.id===o?{...c,...i}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:mn(),...i};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:[...d.moduleConnections??[],l]}:d),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(c=>({plan:{...c.plan,stations:c.plan.stations.map(d=>d.id===o?{...d,moduleConnections:(d.moduleConnections??[]).map(f=>f.id===i?{...f,...l}:f)}:d),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).filter(d=>d.id!==i)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=Oe.getState().gameData;if(!i){t({computed:xl()});return}const l=Yk(o,i);t({computed:l})}}),{partialize:t=>({plan:t.plan}),limit:50,equality:(t,r)=>t.plan===r.plan}));let zm=!1;function Xk(t){zm||(zm=!0,ce.subscribe((r,o)=>{r.plan!==o.plan&&t(r.plan)}))}let Sr=null;const ge=Vs(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,plansOpen:!1,theme:"system",language:"en",contextMenu:null,toast:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setPlansOpen:r=>t({plansOpen:r}),setTheme:r=>t({theme:r}),setLanguage:r=>t({language:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null}),showToast:(r,o="info")=>{Sr&&clearTimeout(Sr),t({toast:{message:r,type:o}}),Sr=setTimeout(()=>{t({toast:null}),Sr=null},3e3)},dismissToast:()=>{Sr&&(clearTimeout(Sr),Sr=null),t({toast:null})}})),er="x4-plan-index",Nr="x4-current-plan-id",$m="x4-planner-plan";function Jt(t){return`x4-plan:${t}`}function yl(t){return{id:t.id,name:t.name,gameMode:t.gameMode,tags:t.tags,createdAt:t.createdAt,updatedAt:t.updatedAt}}const Ut=Vs((t,r)=>({planIndex:[],currentPlanId:null,initializePlanManager:()=>{var d;const o=localStorage.getItem($m);if(o)try{const f=JSON.parse(o),g=((d=f.state)==null?void 0:d.plan)??f.plan??f;g.gameMode||(g.gameMode="swi"),g.tags||(g.tags=[]);const h=g.id||mn();g.id=h,localStorage.setItem(Jt(h),JSON.stringify(g));const m=[yl(g)];localStorage.setItem(er,JSON.stringify(m)),localStorage.setItem(Nr,h),localStorage.removeItem($m),t({planIndex:m,currentPlanId:h}),ce.getState().loadPlan(g);return}catch(f){console.error("Failed to migrate legacy plan:",f)}const i=localStorage.getItem(er),l=i?JSON.parse(i):[],c=localStorage.getItem(Nr);if(t({planIndex:l,currentPlanId:c}),c){const f=localStorage.getItem(Jt(c));if(f)try{const g=JSON.parse(f);ce.getState().loadPlan(g)}catch(g){console.error("Failed to load current plan:",g)}}else l.length===0&&r().createPlan("New Plan",[],"swi")},createPlan:(o,i,l)=>{const c=new Date().toISOString(),d={id:mn(),name:o,version:1,gameMode:l,tags:i,createdAt:c,updatedAt:c,sectors:[],stations:[],connections:[]};localStorage.setItem(Jt(d.id),JSON.stringify(d));const f=yl(d),{planIndex:g}=r(),h=[...g,f];localStorage.setItem(er,JSON.stringify(h)),localStorage.setItem(Nr,d.id),t({planIndex:h,currentPlanId:d.id}),ce.getState().loadPlan(d)},saveCurrentPlan:o=>{const{currentPlanId:i,planIndex:l}=r();if(!i||o.id!==i)return;localStorage.setItem(Jt(o.id),JSON.stringify(o));const c=l.map(d=>d.id===o.id?{...d,name:o.name,tags:o.tags,updatedAt:o.updatedAt}:d);localStorage.setItem(er,JSON.stringify(c)),t({planIndex:c})},loadPlanById:o=>{const i=localStorage.getItem(Jt(o));if(i)try{const l=JSON.parse(i);localStorage.setItem(Nr,o),t({currentPlanId:o}),ce.getState().loadPlan(l)}catch(l){console.error("Failed to load plan:",l)}},deletePlan:o=>{const{planIndex:i,currentPlanId:l}=r();localStorage.removeItem(Jt(o));const c=i.filter(d=>d.id!==o);localStorage.setItem(er,JSON.stringify(c)),o===l?c.length>0?(t({planIndex:c}),r().loadPlanById(c[0].id)):(localStorage.removeItem(Nr),t({planIndex:c,currentPlanId:null}),r().createPlan("New Plan",[],"swi")):t({planIndex:c})},duplicatePlan:(o,i,l)=>{const c=localStorage.getItem(Jt(o));if(c)try{const d=JSON.parse(c),f=new Date().toISOString(),g={...d,id:mn(),name:i,tags:l,createdAt:f,updatedAt:f};localStorage.setItem(Jt(g.id),JSON.stringify(g));const h=yl(g),{planIndex:x}=r(),m=[...x,h];localStorage.setItem(er,JSON.stringify(m)),localStorage.setItem(Nr,g.id),t({planIndex:m,currentPlanId:g.id}),ce.getState().loadPlan(g)}catch(d){console.error("Failed to duplicate plan:",d)}},updatePlanMeta:(o,i)=>{const{planIndex:l}=r(),c=l.map(f=>f.id===o?{...f,...i,updatedAt:new Date().toISOString()}:f);localStorage.setItem(er,JSON.stringify(c)),t({planIndex:c});const d=localStorage.getItem(Jt(o));if(d)try{const f=JSON.parse(d);i.name!==void 0&&(f.name=i.name),i.tags!==void 0&&(f.tags=i.tags),f.updatedAt=new Date().toISOString(),localStorage.setItem(Jt(o),JSON.stringify(f));const{currentPlanId:g}=r();o===g&&(i.name!==void 0&&ce.getState().renamePlan(i.name),i.tags!==void 0&&ce.setState(h=>({plan:{...h.plan,tags:i.tags}})))}catch(f){console.error("Failed to update plan meta:",f)}},importPlan:o=>{localStorage.setItem(Jt(o.id),JSON.stringify(o));const i=yl(o),{planIndex:l}=r(),c=[...l,i];localStorage.setItem(er,JSON.stringify(c)),localStorage.setItem(Nr,o.id),t({planIndex:c,currentPlanId:o.id}),ce.getState().loadPlan(o)}})),Ag="x4-game-mode";function Gk(){try{const t=localStorage.getItem(Ag);if(t==="base"||t==="swi")return t}catch{}return"swi"}const zl=Vs(t=>({gameMode:Gk(),setGameMode:r=>{localStorage.setItem(Ag,r),t({gameMode:r})}}));let ks=null,jc=null;async function Lg(t="swi"){if(ks&&jc===t)return ks;const o=await fetch(`/Station-Planner-For-X4-Foundations/${t==="base"?"gamedata-base.json":"gamedata-swi.json"}`);if(!o.ok)throw new Error(`Failed to load game data: ${o.statusText}`);return ks=await o.json(),jc=t,ks}function Kk(){ks=null,jc=null}function Lr({open:t,onClose:r,title:o,children:i,footer:l,size:c="md"}){if(D.useEffect(()=>{if(!t)return;const f=g=>{g.key==="Escape"&&r()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[t,r]),!t)return null;const d=c==="sm"?"max-w-sm":c==="lg"?"max-w-2xl":"max-w-lg";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:r}),u.jsxs("div",{className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 bg-card border border-border rounded-lg shadow-xl w-full ${d} flex flex-col max-h-[80vh]`,children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:o}),u.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i}),l&&u.jsx("div",{className:"px-4 py-3 border-t border-border flex items-center justify-end gap-2",children:l})]})]})}function Qk(){const t=zl(m=>m.gameMode),r=zl(m=>m.setGameMode),o=Oe(m=>m.setGameData),i=Oe(m=>m.setLoading),l=Oe(m=>m.setError),c=ge(m=>m.setPlansOpen),[d,f]=D.useState(!1),g=t==="swi"?"base":"swi",h=g==="swi"?"SWI Mod":"Base Game",x=async m=>{if(f(!1),m){const k=ce.getState().plan;Ut.getState().saveCurrentPlan(k)}r(g),Kk(),i(!0);try{const k=await Lg(g);o(k)}catch(k){l(k instanceof Error?k.message:"Failed to load game data");return}const{planIndex:y,createPlan:w,loadPlanById:S}=Ut.getState(),C=y.filter(k=>k.gameMode===g);if(C.length>0){const k=[...C].sort((b,T)=>new Date(T.updatedAt).getTime()-new Date(b.updatedAt).getTime());S(k[0].id),ce.getState().recompute(),c(!0)}else w("New Plan",[],g),ce.getState().recompute()};return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(!0),className:`px-3 py-1.5 text-sm rounded transition-colors font-medium ${t==="swi"?"bg-amber-600 text-white hover:bg-amber-700":"bg-blue-600 text-white hover:bg-blue-700"}`,title:`Switch to ${h}`,children:t==="swi"?"SWI":"Base"}),u.jsxs(Lr,{open:d,onClose:()=>f(!1),title:`Switch to ${h}?`,size:"sm",footer:u.jsxs("div",{className:"flex items-center gap-2 w-full",children:[u.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("div",{className:"flex-1"}),u.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Don't Save"}),u.jsx("button",{onClick:()=>x(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Save & Switch"})]}),children:[u.jsxs("p",{className:"text-sm text-muted-foreground",children:["You are about to switch to ",u.jsx("span",{className:"font-medium text-foreground",children:h})," mode. Game data will be reloaded with different wares and modules."]}),u.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Would you like to save the current plan before switching?"})]})]})}function qk({tags:t,onChange:r,placeholder:o="Add tag..."}){const[i,l]=D.useState(""),c=g=>{const h=g.trim().toLowerCase();h&&!t.includes(h)&&r([...t,h]),l("")},d=g=>{r(t.filter((h,x)=>x!==g))},f=g=>{g.key==="Enter"||g.key===","?(g.preventDefault(),c(i)):g.key==="Backspace"&&!i&&t.length>0&&d(t.length-1)};return u.jsxs("div",{children:[u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:t.map((g,h)=>u.jsxs("span",{className:"bg-secondary text-secondary-foreground rounded-full px-2 py-0.5 text-xs flex items-center gap-1",children:[g,u.jsx("button",{type:"button",onClick:()=>d(h),className:"hover:text-destructive transition-colors","aria-label":`Remove tag ${g}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},g))}),u.jsx("input",{type:"text",value:i,onChange:g=>l(g.target.value),onKeyDown:f,onBlur:()=>{i.trim()&&c(i)},placeholder:o,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]})}function ac({open:t,onClose:r,onSubmit:o,title:i,submitLabel:l,initialName:c="",initialTags:d=[]}){const[f,g]=D.useState(c),[h,x]=D.useState(d),m=()=>{const y=f.trim();y&&(o(y,h),g(""),x([]),r())};return u.jsx(Lr,{open:t,onClose:r,title:i,size:"sm",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:m,disabled:!f.trim(),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50",children:l})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Plan Name"}),u.jsx("input",{type:"text",value:f,onChange:y=>g(y.target.value),onKeyDown:y=>{y.key==="Enter"&&m()},placeholder:"My Station Plan",autoFocus:!0,className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Tags"}),u.jsx(qk,{tags:h,onChange:x})]})]})})}function Zk({open:t,onClose:r,gameMode:o}){const i=Ut(M=>M.planIndex),l=Ut(M=>M.currentPlanId),c=Ut(M=>M.loadPlanById),d=Ut(M=>M.deletePlan),f=Ut(M=>M.createPlan),g=Ut(M=>M.duplicatePlan),h=Ut(M=>M.updatePlanMeta),x=ce(M=>M.plan),[m,y]=D.useState(""),[w,S]=D.useState(null),[C,k]=D.useState(!1),[b,T]=D.useState(!1),[j,_]=D.useState(null),A=i.filter(M=>M.gameMode===o).filter(M=>{if(!m)return!0;const X=m.toLowerCase();return M.name.toLowerCase().includes(X)||M.tags.some(R=>R.toLowerCase().includes(X))}).sort((M,X)=>new Date(X.updatedAt).getTime()-new Date(M.updatedAt).getTime()),L=M=>{c(M),r()},P=M=>{d(M),S(null)},U=(M,X)=>{f(M,X,o),k(!1),r()},K=(M,X)=>{l&&g(l,M,X),T(!1),r()},se=(M,X)=>{j&&(h(j.id,{name:M,tags:X}),_(null))},B=M=>{try{return new Date(M).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return M}};return u.jsxs(u.Fragment,{children:[u.jsxs(Lr,{open:t,onClose:r,title:"Plans",size:"lg",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>k(!0),className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"New Plan"}),u.jsx("button",{onClick:()=>T(!0),disabled:!l,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors disabled:opacity-50",children:"Save As"})]}),children:[u.jsx("div",{className:"mb-3",children:u.jsx("input",{type:"text",value:m,onChange:M=>y(M.target.value),placeholder:"Search plans by name or tag...",className:"w-full px-3 py-1.5 text-sm rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsxs("div",{className:"space-y-1",children:[A.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:m?"No plans match your search.":"No plans yet. Create one!"}),A.map(M=>u.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded cursor-pointer transition-colors ${M.id===l?"bg-primary/10 border border-primary/30":"hover:bg-muted border border-transparent"}`,onClick:()=>L(M.id),children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:M.name}),M.id===l&&u.jsx("span",{className:"text-xs text-primary font-medium",children:"(current)"})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[M.tags.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:M.tags.map(X=>u.jsx("span",{className:"bg-secondary text-secondary-foreground rounded-full px-1.5 py-0 text-[10px]",children:X},X))}),u.jsx("span",{className:"text-xs text-muted-foreground",children:B(M.updatedAt)})]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[u.jsx("button",{onClick:()=>_({id:M.id,name:M.name,tags:M.tags}),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",title:"Edit name & tags",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),w===M.id?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>P(M.id),className:"px-2 py-0.5 text-xs rounded bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors",children:"Delete"}),u.jsx("button",{onClick:()=>S(null),className:"px-2 py-0.5 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"})]}):u.jsx("button",{onClick:()=>S(M.id),className:"p-1 rounded hover:bg-muted transition-colors text-muted-foreground hover:text-destructive",title:"Delete plan",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},M.id))]})]}),u.jsx(ac,{open:C,onClose:()=>k(!1),onSubmit:U,title:"New Plan",submitLabel:"Create"}),u.jsx(ac,{open:b,onClose:()=>T(!1),onSubmit:K,title:"Save As",submitLabel:"Save",initialName:x?`${x.name} (copy)`:"",initialTags:(x==null?void 0:x.tags)??[]}),j&&u.jsx(ac,{open:!0,onClose:()=>_(null),onSubmit:se,title:"Edit Plan",submitLabel:"Save",initialName:j.name,initialTags:j.tags})]})}function Jk(t){const r=JSON.stringify(t);return btoa(r)}function e2({open:t,onClose:r,plan:o}){const i=ge(f=>f.showToast),l=D.useMemo(()=>Jk(o),[o]),c=D.useMemo(()=>{const f=l.length;if(f<1024)return`${f} B`;const g=f/1024;return g<1024?`${g.toFixed(1)} KB`:`${(g/1024).toFixed(1)} MB`},[l]),d=async()=>{try{await navigator.clipboard.writeText(l),i("Copied to clipboard!","success"),r()}catch{i("Failed to copy to clipboard","error")}};return u.jsx(Lr,{open:t,onClose:r,title:"Export Plan",size:"md",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Close"}),u.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Copy to Clipboard"})]}),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:"Plan Name"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:o.name})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("div",{className:"text-sm font-medium text-foreground",children:"Exported Data"}),u.jsx("div",{className:"text-xs text-muted-foreground",children:c})]}),u.jsx("textarea",{readOnly:!0,value:l,className:"w-full h-48 px-3 py-2 text-xs font-mono rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring resize-none",onClick:f=>f.currentTarget.select()}),u.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Click to select all, then copy manually or use the button below"})]})]})})}function t2(t){try{const r=atob(t);let o;try{o=JSON.parse(r)}catch{return{success:!1,error:"Invalid JSON format"}}if(typeof o!="object"||o===null)return{success:!1,error:"Invalid plan format: not an object"};const i=o;if(typeof i.name!="string")return{success:!1,error:"Missing or invalid field: name"};if(typeof i.version!="number")return{success:!1,error:"Missing or invalid field: version"};if(!Array.isArray(i.stations))return{success:!1,error:"Missing or invalid field: stations"};if(!Array.isArray(i.sectors))return{success:!1,error:"Missing or invalid field: sectors"};if(!Array.isArray(i.connections))return{success:!1,error:"Missing or invalid field: connections"};const l=new Date().toISOString();return{success:!0,plan:{...i,id:mn(),createdAt:l,updatedAt:l}}}catch(r){return r instanceof Error?{success:!1,error:`Import failed: ${r.message}`}:{success:!1,error:"Invalid base64 encoding"}}}function n2({open:t,onClose:r,onImport:o}){const[i,l]=D.useState(""),[c,d]=D.useState(null),[f,g]=D.useState(null),h=()=>{if(d(null),g(null),!i.trim()){d("Please paste the exported plan data");return}const y=t2(i.trim());y.success?g(y.plan):d(y.error)},x=()=>{f&&(o(f),l(""),d(null),g(null),r())},m=()=>{l(""),d(null),g(null),r()};return u.jsx(Lr,{open:t,onClose:m,title:"Import Plan",size:"md",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:m,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Cancel"}),f?u.jsx("button",{onClick:x,className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Import"}):u.jsx("button",{onClick:h,className:"px-3 py-1.5 text-sm rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Validate"})]}),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:"Paste Exported Data"}),u.jsx("textarea",{value:i,onChange:y=>{l(y.target.value),d(null),g(null)},placeholder:"Paste the base64-encoded plan data here...",className:"w-full h-48 px-3 py-2 text-xs font-mono rounded border border-border bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring resize-none"})]}),c&&u.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/30 rounded px-3 py-2",children:c}),f&&u.jsxs("div",{className:"text-sm bg-primary/10 border border-primary/30 rounded px-3 py-2 space-y-1",children:[u.jsx("div",{className:"font-medium text-foreground",children:"Plan validated successfully!"}),u.jsxs("div",{className:"text-muted-foreground",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Name:"})," ",f.name]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Stations:"})," ",f.stations.length]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Sectors:"})," ",f.sectors.length]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Connections:"})," ",f.connections.length]})]})]})]})})}function r2({open:t,onClose:r}){return u.jsx(Lr,{open:t,onClose:r,title:"About Station Planner",size:"sm",children:u.jsxs("div",{className:"space-y-4 text-sm",children:[u.jsx("p",{className:"text-foreground",children:"Vibed by dwats"}),u.jsx("div",{children:u.jsx("a",{href:"https://github.com/dwats/Station-Planner-For-X4-Foundations",target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-primary transition-colors","aria-label":"GitHub Repository",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.009-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836a9.59 9.59 0 012.504.337c1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.163 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-1",children:"Built with"}),u.jsxs("ul",{className:"space-y-0.5 text-foreground",children:[u.jsx("li",{children:u.jsx("a",{href:"https://react.dev",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"React"})}),u.jsx("li",{children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"React Flow"})}),u.jsx("li",{children:u.jsx("a",{href:"https://zustand.docs.pmnd.rs",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Zustand"})}),u.jsx("li",{children:u.jsx("a",{href:"https://tailwindcss.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Tailwind CSS"})}),u.jsx("li",{children:u.jsx("a",{href:"https://vite.dev",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Vite"})})]})]})]})})}function o2(){const t=ce(P=>P.plan),r=ce(P=>P.renamePlan),o=ge(P=>P.toggleReport),i=ge(P=>P.reportOpen),l=ge(P=>P.plansOpen),c=ge(P=>P.setPlansOpen),d=ge(P=>P.showToast),f=ge(P=>P.theme),g=ge(P=>P.setTheme),h=ge(P=>P.language),x=ge(P=>P.setLanguage),m=Oe(P=>P.gameData),y=zl(P=>P.gameMode),w=Ut(P=>P.importPlan),[S,C]=D.useState(!1),[k,b]=D.useState(!1),[T,j]=D.useState(!1),_=()=>{g(f==="light"?"dark":f==="dark"?"system":"light")},A=P=>{w(P),d(`Imported "${P.name}" successfully!`,"success")},L=y==="swi"?"X4 SWI Station Planner":"X4 Station Planner";return u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Qk,{}),u.jsx("h1",{className:"text-lg font-semibold text-foreground",children:L}),u.jsx("span",{className:"text-muted-foreground",children:"|"}),u.jsx("input",{type:"text",value:t.name,onChange:P=>r(P.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[(m==null?void 0:m.languages)&&u.jsx("select",{value:h,onChange:P=>x(P.target.value),className:"px-2 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors border-none cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring",title:"Language",children:Object.entries(m.languages).map(([P,U])=>u.jsx("option",{value:P,children:U},P))}),u.jsxs("button",{onClick:_,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${f}`,children:[f==="light"&&"",f==="dark"&&"",f==="system"&&"",u.jsx("span",{className:"text-xs",children:f.charAt(0).toUpperCase()+f.slice(1)})]}),u.jsx("button",{onClick:()=>C(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Export"}),u.jsx("button",{onClick:()=>b(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Import"}),u.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Plans"}),u.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"}),u.jsx("button",{onClick:()=>j(!0),className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"About"})]})]}),u.jsx(Zk,{open:l,onClose:()=>c(!1),gameMode:y}),u.jsx(e2,{open:S,onClose:()=>C(!1),plan:t}),u.jsx(n2,{open:k,onClose:()=>b(!1),onImport:A}),u.jsx(r2,{open:T,onClose:()=>j(!1)})]})}function yt(){const t=ge(o=>o.language);return{language:t,t:(o,i)=>o?typeof o=="string"?o:o[t]??o.en??Object.values(o)[0]??i??"":i??""}}function s2({station:t}){const r=ce(j=>j.updateStation),o=ce(j=>j.removeStation),i=ce(j=>j.plan),l=ce(j=>j.computed),c=Oe(j=>j.gameData),{t:d}=yt(),f=t.sectorId?i.sectors.find(j=>j.id===t.sectorId):null,g=t.sunlightOverride??(f==null?void 0:f.sunlight)??100,h=Tr(l,t.id),x=j=>{r(t.id,{name:j.target.value})},m=j=>{const _=j.target.value;if(_==="")r(t.id,{sunlightOverride:null});else{const A=parseInt(_,10);!isNaN(A)&&A>=0&&A<=500&&r(t.id,{sunlightOverride:A})}},y=()=>{r(t.id,{sunlightOverride:null})},w=j=>{r(t.id,{fillHabitats:j.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},C=j=>{var _;return d((_=c==null?void 0:c.wares[j])==null?void 0:_.name,j)},k=j=>j>=1e4?`${(j/1e3).toFixed(1)}k`:j>=1e3?`${(j/1e3).toFixed(2)}k`:j.toFixed(0),b=h&&h.totalWorkforceRequired>0,T=h&&h.totalWorkforceCapacity>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),u.jsx("input",{type:"text",value:t.name,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:f?f.name:"Not assigned"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:m,placeholder:`${(f==null?void 0:f.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&u.jsx("button",{onClick:y,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",g,"%",t.sunlightOverride===null&&f&&" (from sector)",t.sunlightOverride===null&&!f&&" (default)"]})]}),(b||T)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),h&&u.jsxs("div",{className:"text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Required:"}),u.jsx("span",{children:h.totalWorkforceRequired.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),u.jsx("span",{children:h.totalWorkforceCapacity.toLocaleString()})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population:"}),u.jsx("span",{children:h.actualPopulation.toLocaleString()})]})]}),T&&u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[u.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:w,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?u.jsx("p",{children:"No modules added yet."}):u.jsxs("p",{children:[t.modules.length," module(s)"]})}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),h&&(h.netOutputs.length>0||h.netInputs.length>0)&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),h.netOutputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),h.netOutputs.slice(0,5).map(j=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-green-500 truncate",children:C(j.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",k(j.amount)]})]},j.wareId)),h.netOutputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",h.netOutputs.length-5," more..."]})]}),h.netInputs.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),h.netInputs.slice(0,5).map(j=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-blue-400 truncate",children:C(j.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",k(j.amount)]})]},j.wareId)),h.netInputs.length>5&&u.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",h.netInputs.length-5," more..."]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:j=>r(t.id,{locked:j.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function i2({sector:t}){const r=ce(A=>A.updateSector),o=ce(A=>A.removeSector),i=ce(A=>A.plan),l=Oe(A=>A.gameData),[c,d]=D.useState(t.name),[f,g]=D.useState(!1),[h,x]=D.useState(-1),m=D.useRef(null),y=D.useRef(null);D.useEffect(()=>{d(t.name)},[t.id,t.name]);const w=D.useMemo(()=>l!=null&&l.sectors?Object.values(l.sectors).sort((A,L)=>A.name.localeCompare(L.name)):[],[l]),S=D.useMemo(()=>{if(!c.trim())return w.slice(0,15);const A=c.toLowerCase();return w.filter(L=>L.name.toLowerCase().includes(A)).slice(0,15)},[w,c]);D.useEffect(()=>{const A=L=>{y.current&&!y.current.contains(L.target)&&m.current&&!m.current.contains(L.target)&&g(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const C=i.stations.filter(A=>A.sectorId===t.id),k=(A,L)=>{d(A),g(!1),x(-1);const P={name:A};L!==void 0&&(P.sunlight=L),r(t.id,P)},b=A=>{const L=A.target.value;d(L),g(!0),x(-1),r(t.id,{name:L})},T=A=>{var L,P;if(A.key==="ArrowDown")A.preventDefault(),g(!0),x(U=>U<S.length-1?U+1:U);else if(A.key==="ArrowUp")A.preventDefault(),x(U=>U>0?U-1:-1);else if(A.key==="Enter"){if(A.preventDefault(),h>=0&&h<S.length){const U=S[h];k(U.name,U.sunlight)}else{const U=w.find(K=>K.name.toLowerCase()===c.toLowerCase());U?k(U.name,U.sunlight):g(!1)}(L=m.current)==null||L.blur()}else A.key==="Escape"&&(g(!1),x(-1),(P=m.current)==null||P.blur())};D.useEffect(()=>{var A;h>=0&&y.current&&((A=y.current.querySelectorAll("[data-sector-item]")[h])==null||A.scrollIntoView({block:"nearest"}))},[h]);const j=A=>{const L=parseInt(A.target.value,10);!isNaN(L)&&L>=0&&L<=500&&r(t.id,{sunlight:L})},_=()=>{const A=C.length,L=A>0?`Delete sector "${t.name}"? ${A} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(L)&&o(t.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5 relative",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),u.jsx("input",{ref:m,type:"text",value:c,onChange:b,onFocus:()=>g(!0),onKeyDown:T,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",autoComplete:"off"}),f&&S.length>0&&u.jsx("div",{ref:y,className:"absolute z-50 mt-1 w-full max-h-60 overflow-y-auto rounded-md border border-border bg-background shadow-md",children:S.map((A,L)=>u.jsxs("button",{"data-sector-item":!0,onMouseDown:P=>{P.preventDefault(),k(A.name,A.sunlight)},onMouseEnter:()=>x(L),className:`w-full flex items-center justify-between px-3 py-1.5 text-sm text-left transition-colors ${L===h?"bg-accent text-accent-foreground":"hover:bg-accent/50"}`,children:[u.jsx("span",{className:"truncate text-foreground",children:A.name}),u.jsxs("span",{className:"flex items-center gap-2 ml-2 shrink-0 text-xs text-muted-foreground",children:[A.owner&&u.jsx("span",{className:"truncate max-w-[80px]",children:A.owner}),u.jsxs("span",{children:[A.sunlight,"%"]})]})]},A.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:j,className:"flex-1"}),u.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:j,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",C.length,")"]}),C.length===0?u.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):u.jsx("ul",{className:"text-sm space-y-1",children:C.map(A=>u.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[u.jsx("span",{className:"text-foreground",children:A.name}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:[A.modules.length," modules"]})]},A.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:A=>r(t.id,{locked:A.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:_,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const Rm={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function l2(){const t=Oe(w=>w.gameData),r=ce(w=>w.addModule),o=ge(w=>w.activeStationId),i=ce(w=>w.plan.stations),{t:l}=yt(),[c,d]=D.useState("production"),[f,g]=D.useState(""),h=D.useMemo(()=>i.find(w=>w.id===o),[i,o]),x=D.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const w=f.toLowerCase(),S=C=>Object.values(C).filter(k=>l(k.name).toLowerCase().includes(w));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,f,l]),m=w=>{if(!o||!h)return;const S=h.modules.length,C=S%3,k=Math.floor(S/3),b={x:C*220+50,y:k*150+50};r(o,w,b)},y=w=>{d(S=>S===w?null:w)};return t?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Search modules...",value:f,onChange:w=>g(w.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(Rm).map(w=>{const{label:S,icon:C}=Rm[w],k=x[w],b=c===w;return u.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[u.jsxs("button",{onClick:()=>y(w),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[u.jsx("span",{children:C}),S,u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",k.length,")"]})]}),u.jsx("span",{className:"text-muted-foreground",children:b?"":"+"})]}),b&&u.jsx("div",{className:"max-h-48 overflow-y-auto",children:k.length===0?u.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):k.map(T=>u.jsxs("button",{onClick:()=>m(T.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[u.jsx("span",{className:"text-foreground truncate",children:l(T.name)}),u.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},T.id))})]},w)}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):u.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function a2({stationId:t,module:r}){const o=Oe(k=>k.gameData),i=Oe(k=>k.getModule),l=Oe(k=>k.getModuleType),c=ce(k=>k.updateModule),d=ce(k=>k.removeModule),f=ge(k=>k.clearSelection),{t:g}=yt(),h=i(r.blueprintId),x=l(r.blueprintId),m=D.useMemo(()=>{if(!o||!x)return[];const k=o.modules[x];return Object.values(k).sort((b,T)=>g(b.name).localeCompare(g(T.name)))},[o,x,g]),y=k=>{c(t,r.id,{blueprintId:k.target.value})},w=k=>{const b=Math.max(1,r.count+k);c(t,r.id,{count:b})},S=k=>{const b=parseInt(k.target.value,10);!isNaN(b)&&b>=1&&c(t,r.id,{count:b})},C=()=>{confirm(`Delete this ${g(h==null?void 0:h.name,"module")}?`)&&(d(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-lg",children:x==="production"?"":x==="habitat"?"":""}),u.jsxs("span",{className:"text-muted-foreground capitalize",children:[x," Module"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),u.jsx("select",{value:r.blueprintId,onChange:y,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:m.map(k=>u.jsx("option",{value:k.id,children:g(k.name)},k.id))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>w(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),u.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),u.jsx("button",{onClick:()=>w(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),h&&u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),u.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[x==="production"&&"producedWareId"in h&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Produces: ",h.producedWareId]}),u.jsxs("p",{children:["Workforce: ",h.workforceMax*r.count]})]}),x==="habitat"&&"workforceCapacity"in h&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Race: ",h.race]}),u.jsxs("p",{children:["Capacity: ",h.workforceCapacity*r.count," workers"]})]}),x==="storage"&&"cargoMax"in h&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Type: ",h.cargoType]}),u.jsxs("p",{children:["Capacity: ",h.cargoMax*r.count]})]})]})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r.locked??!1,onChange:k=>c(t,r.id,{locked:k.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm",children:"Lock position"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),u.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:C,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function u2({connection:t}){var se;const r=ce(B=>B.updateConnection),o=ce(B=>B.removeConnection),i=ce(B=>B.plan),l=ce(B=>B.computed),c=Oe(B=>B.gameData),{t:d}=yt(),f=i.stations.find(B=>B.id===t.sourceStationId),g=i.stations.find(B=>B.id===t.targetStationId),h=D.useMemo(()=>Tr(l,t.sourceStationId),[l,t.sourceStationId]),x=D.useMemo(()=>Tr(l,t.targetStationId),[l,t.targetStationId]),m=t.wareId?d((se=c==null?void 0:c.wares[t.wareId])==null?void 0:se.name,t.wareId):"Unknown",y=h==null?void 0:h.netOutputs.find(B=>B.wareId===t.wareId),w=(y==null?void 0:y.amount)??0,S=x==null?void 0:x.netInputs.find(B=>B.wareId===t.wareId),C=(S==null?void 0:S.amount)??0,k=D.useMemo(()=>Og(l,t.id),[l,t.id]),b=(k==null?void 0:k.effectiveAmount)??t.amount,T=t.mode??"auto",j=B=>B>=1e4?`${(B/1e3).toFixed(1)}k`:B>=1e3?`${(B/1e3).toFixed(2)}k`:B.toFixed(0),_=B=>{r(t.id,{mode:B,amount:B==="custom"?b:t.amount})},A=B=>{const M=B.target.value;if(M==="")r(t.id,{amount:0});else{const X=parseFloat(M);!isNaN(X)&&X>=0&&r(t.id,{amount:X})}},L=()=>{r(t.id,{mode:"custom",amount:w})},P=()=>{const B=Math.min(w,C);r(t.id,{mode:"custom",amount:B})},U=()=>{confirm("Delete this connection?")&&o(t.id)},K=l.deficits.find(B=>B.stationId===t.targetStationId&&B.wareId===t.wareId);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(f==null?void 0:f.name)??"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:(g==null?void 0:g.name)??"Unknown"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:m}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:T,onChange:B=>_(B.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[T==="auto"&&"Transfers min(source available, target need)",T==="max"&&"Takes all available from source up to target need",T==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[T==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),T==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:A,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:j(b)}),T==="custom"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:L,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",j(w),")"]}),C>0&&u.jsxs("button",{onClick:P,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",j(Math.min(w,C)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source available:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[j(w),"/hr"]})]}),C>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[j(C),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${k!=null&&k.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[j(b),"/hr"]})]}),T==="custom"&&t.amount!==b&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[j(t.amount),"/hr"]})]}),(k==null?void 0:k.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(k==null?void 0:k.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),K&&K.deficit>0&&u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",j(K.deficit),"/hr still needed"]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",j(K.supplied),"/hr but needs"," ",j(K.required),"/hr"]})]}),t.wareId&&!K&&u.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:u.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:U,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function c2({stationId:t,connection:r}){var $;const o=ce(N=>N.updateModuleConnection),i=ce(N=>N.removeModuleConnection),l=ce(N=>N.plan.stations),c=ce(N=>N.computed),d=Oe(N=>N.gameData),f=ge(N=>N.clearSelection),{t:g}=yt(),h=l.find(N=>N.id===t),x=h==null?void 0:h.modules.find(N=>N.id===r.sourceModuleId),m=h==null?void 0:h.modules.find(N=>N.id===r.targetModuleId),y=r.sourceModuleId===lt,w=r.targetModuleId===xt,S=N=>{var E,z,J;if(!N||!d)return"Unknown";const O=((E=d.modules.production[N])==null?void 0:E.name)??((z=d.modules.habitat[N])==null?void 0:z.name)??((J=d.modules.storage[N])==null?void 0:J.name);return g(O,N)},C=y?"Station Input":S(x==null?void 0:x.blueprintId),k=w?"Station Output":S(m==null?void 0:m.blueprintId),b=D.useMemo(()=>y?null:en(c,t,r.sourceModuleId),[c,t,r.sourceModuleId,y]),T=D.useMemo(()=>w?null:en(c,t,r.targetModuleId),[c,t,r.targetModuleId,w]),j=D.useMemo(()=>{const N=Tr(c,t);return N==null?void 0:N.moduleConnections.find(O=>O.connectionId===r.id)},[c,t,r.id]),_=(j==null?void 0:j.effectiveAmount)??r.amount,A=r.mode??"auto",L=g(($=d==null?void 0:d.wares[r.wareId])==null?void 0:$.name,r.wareId),P=b==null?void 0:b.grossOutputs.find(N=>N.wareId===r.wareId),U=(P==null?void 0:P.amount)??0,K=T==null?void 0:T.grossInputs.find(N=>N.wareId===r.wareId),se=(K==null?void 0:K.amount)??0,B=N=>N>=1e4?`${(N/1e3).toFixed(1)}k`:N>=1e3?`${(N/1e3).toFixed(2)}k`:N.toFixed(0),M=N=>{o(t,r.id,{mode:N,amount:N==="custom"?_:r.amount})},X=N=>{const O=N.target.value;if(O==="")o(t,r.id,{amount:0});else{const E=parseFloat(O);if(!isNaN(E)&&E>=0){const z=!y&&U>0?E/U:r.ratio;o(t,r.id,{amount:E,ratio:z})}}},R=()=>{o(t,r.id,{locked:!r.locked})},W=()=>{o(t,r.id,{mode:"custom",amount:U,ratio:1})},V=()=>{const N=Math.min(U,se),O=U>0?N/U:0;o(t,r.id,{mode:"custom",amount:N,ratio:O})},H=()=>{confirm("Delete this connection?")&&(i(t,r.id),f())};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"From:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:C})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"To:"}),u.jsx("span",{className:"font-medium text-foreground truncate",children:k})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:L})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),u.jsxs("select",{value:A,onChange:N=>M(N.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[u.jsx("option",{value:"auto",children:"Auto (match availability)"}),u.jsx("option",{value:"max",children:"Max (take all available)"}),u.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[A==="auto"&&"Transfers min(source available, target need)",A==="max"&&"Takes all available from source up to target need",A==="custom"&&"Uses a fixed amount you specify"]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-foreground",children:[A==="custom"?"Custom Amount":"Effective Amount"," ",u.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),A==="custom"?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:X,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:B(_)}),A==="custom"&&!y&&U>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",B(U),")"]}),!w&&se>0&&u.jsxs("button",{onClick:V,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",B(Math.min(U,se)),")"]})]}),u.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!y&&U>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Source produces:"}),u.jsxs("span",{className:"font-mono text-green-400",children:[B(U),"/hr"]})]}),!w&&se>0&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Target needs:"}),u.jsxs("span",{className:"font-mono text-blue-400",children:[B(se),"/hr"]})]}),u.jsxs("div",{className:"flex justify-between font-medium",children:[u.jsx("span",{children:"Transferring:"}),u.jsxs("span",{className:`font-mono ${j!=null&&j.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[B(_),"/hr"]})]}),A==="custom"&&r.amount!==_&&u.jsxs("div",{className:"flex justify-between text-yellow-400",children:[u.jsx("span",{children:"Configured:"}),u.jsxs("span",{className:"font-mono",children:[B(r.amount),"/hr"]})]}),(j==null?void 0:j.sourceConstrained)&&u.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(j==null?void 0:j.targetConstrained)&&u.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!y&&r.ratio!==void 0&&A==="custom"&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Ratio:"}),u.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),u.jsx("button",{onClick:R,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsx("button",{onClick:H,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function d2(){const t=ge(k=>k.sidebarOpen),r=ge(k=>k.toggleSidebar),o=ge(k=>k.setSidebarOpen),i=ge(k=>k.selectedNodeId),l=ge(k=>k.selectedEdgeId),c=ge(k=>k.viewMode),d=ge(k=>k.activeStationId),f=ce(k=>k.plan);D.useEffect(()=>{const k=()=>{window.innerWidth<768&&o(!1)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[o]);const g=c==="network"?f.stations.find(k=>k.id===i):null,h=c==="network"?f.sectors.find(k=>k.id===i):null,x=f.connections.find(k=>k.id===l),m=f.stations.find(k=>k.id===d),y=c==="station"&&m?m.modules.find(k=>k.id===i):null,w=c==="station"&&m&&l?(m.moduleConnections??[]).find(k=>k.id===l):null;let S="Network";c==="station"?w?S="Connection":y?S="Module":S="Add Modules":g?S="Station":h?S="Sector":x&&(S="Connection");const C=()=>c==="station"?w&&d?u.jsx(c2,{stationId:d,connection:w}):y&&d?u.jsx(a2,{stationId:d,module:y}):u.jsx(l2,{}):g?u.jsx(s2,{station:g}):h?u.jsx(i2,{sector:h}):x?u.jsx(u2,{connection:x}):u.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[u.jsx("p",{children:"Select a station or sector to view details."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),u.jsxs("ul",{className:"text-xs space-y-1",children:[u.jsx("li",{children:"Right-click on the canvas to add stations"}),u.jsx("li",{children:"Drag from one station handle to another to connect"}),u.jsx("li",{children:"Press Delete to remove selected items"}),u.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return t?u.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col transition-all duration-200",children:[u.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[u.jsx("h2",{className:"font-semibold text-foreground",children:S}),u.jsx("button",{onClick:r,className:"p-1 hover:bg-accent rounded transition-colors",title:"Collapse sidebar","aria-label":"Collapse sidebar",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:u.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),u.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:C()}),u.jsx("div",{className:"p-4 border-t border-border",children:u.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:c==="station"&&m?u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Modules: ",m.modules.length]}),u.jsxs("p",{children:["Station: ",m.name]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Stations: ",f.stations.length]}),u.jsxs("p",{children:["Sectors: ",f.sectors.length]}),u.jsxs("p",{children:["Connections: ",f.connections.length]})]})})})]}):u.jsx("aside",{className:"w-10 border-l border-border bg-card flex flex-col transition-all duration-200",children:u.jsx("div",{className:"p-2 border-b border-border flex items-center justify-center",children:u.jsx("button",{onClick:r,className:"p-1 hover:bg-accent rounded transition-colors",title:"Expand sidebar","aria-label":"Expand sidebar",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:u.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(180 8 8)"})})})})})}function f2(){const t=ge(d=>d.viewMode),r=ge(d=>d.activeStationId),o=ge(d=>d.exitStationView),i=ce(d=>d.plan),l=i.stations.find(d=>d.id===r),c=l!=null&&l.sectorId?i.sectors.find(d=>d.id===l.sectorId):null;return t==="network"?null:u.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[u.jsx("button",{onClick:o,className:"mr-2 p-1 rounded hover:bg-muted-foreground/10 transition-colors","aria-label":"Back to sector view",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground hover:text-foreground",children:u.jsx("polyline",{points:"10 12 6 8 10 4"})})}),u.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),c&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-muted-foreground",children:c.name})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function p2(){const t=ce(x=>x.computed),r=Oe(x=>x.gameData),{t:o}=yt(),i=x=>{var m;return o((m=r==null?void 0:r.wares[x])==null?void 0:m.name,x)},l=x=>Math.abs(x)>=1e4?`${(x/1e3).toFixed(1)}k`:Math.abs(x)>=1e3?`${(x/1e3).toFixed(2)}k`:x.toFixed(0),c=D.useMemo(()=>{const x=new Map;for(const y of t.totalOutputs)x.set(y.wareId,(x.get(y.wareId)??0)+y.amount);for(const y of t.totalInputs)x.set(y.wareId,(x.get(y.wareId)??0)-y.amount);const m=[];for(const[y,w]of x)Math.abs(w)>.01&&m.push({wareId:y,amount:w});return m.sort((y,w)=>w.amount-y.amount)},[t.totalOutputs,t.totalInputs]),d=c.filter(x=>x.amount>0),f=c.filter(x=>x.amount<0),g=D.useMemo(()=>[...t.totalOutputs].sort((x,m)=>m.amount-x.amount),[t.totalOutputs]),h=D.useMemo(()=>[...t.totalInputs].sort((x,m)=>m.amount-x.amount),[t.totalInputs]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),u.jsx("div",{className:"space-y-1",children:d.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-green-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),u.jsx("div",{className:"space-y-1",children:f.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:[l(x.amount),"/hr"]})]},x.wareId))})]}),d.length===0&&f.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",g.length," wares)"]})]}),g.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-green-400",children:["+",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",u.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",h.length," wares)"]})]}),h.length>0?u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map(x=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-foreground",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-blue-400",children:["-",l(x.amount),"/hr"]})]},x.wareId))}):u.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((x,m)=>u.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-red-400",children:i(x.wareId)}),u.jsxs("span",{className:"font-mono text-red-400",children:["-",l(x.deficit),"/hr"]})]}),u.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",l(x.required),", getting ",l(x.supplied)]})]},`${x.stationId}-${x.wareId}-${m}`))})]})]})}function m2(){const t=ce(h=>h.plan.stations),r=ce(h=>h.plan.sectors),o=ce(h=>h.computed),i=Oe(h=>h.gameData),{t:l}=yt(),c=h=>{var x;return l((x=i==null?void 0:i.wares[h])==null?void 0:x.name,h)},d=h=>Math.abs(h)>=1e4?`${(h/1e3).toFixed(1)}k`:Math.abs(h)>=1e3?`${(h/1e3).toFixed(2)}k`:h.toFixed(0),f=h=>{var x;return h?((x=r.find(m=>m.id===h))==null?void 0:x.name)??null:null},g=D.useMemo(()=>[...t].sort((h,x)=>{const m=bl(o,h.id),y=bl(o,x.id);return m!==y?y-m:h.name.localeCompare(x.name)}),[t,o]);return t.length===0?u.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):u.jsx("div",{className:"space-y-4",children:g.map(h=>{const x=Tr(o,h.id),m=bl(o,h.id),y=f(h.sectorId),w=o.deficits.filter(C=>C.stationId===h.id),S=x&&x.totalWorkforceRequired>0?Math.min(x.actualPopulation/x.totalWorkforceRequired,1):0;return u.jsxs("div",{className:`p-3 rounded-lg border ${m>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center text-[10px] ${h.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/30"}`,children:h.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h4",{className:`font-medium ${h.completed?"text-muted-foreground line-through":"text-foreground"}`,children:h.name}),m>0&&u.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[m," deficit",m>1?"s":""]})]}),y&&u.jsx("span",{className:"text-xs text-muted-foreground",children:y})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-yellow-500",children:[" ",(x==null?void 0:x.effectiveSunlight)??100,"%"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:h.modules.length})]}),x&&x.totalWorkforceRequired>0&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[x.actualPopulation,"/",x.totalWorkforceRequired]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:x.totalWorkforceCapacity})]})]})]}),x&&u.jsxs("div",{className:"space-y-2",children:[x.netOutputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netOutputs.map(C=>u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:"text-green-400",children:c(C.wareId)}),u.jsxs("span",{className:"font-mono text-green-400/70",children:["+",d(C.amount)]})]},C.wareId))})]}),x.netInputs.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),u.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netInputs.map(C=>{const k=w.some(b=>b.wareId===C.wareId);return u.jsxs("div",{className:"text-xs flex items-center gap-1",children:[u.jsx("span",{className:k?"text-red-400":"text-blue-400",children:c(C.wareId)}),u.jsxs("span",{className:`font-mono ${k?"text-red-400/70":"text-blue-400/70"}`,children:["-",d(C.amount)]})]},C.wareId)})})]}),w.length>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[u.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),u.jsx("div",{className:"space-y-1",children:w.map(C=>u.jsxs("div",{className:"text-xs flex items-center justify-between",children:[u.jsx("span",{className:"text-red-400",children:c(C.wareId)}),u.jsxs("span",{className:"text-muted-foreground",children:[d(C.supplied),"/",d(C.required),u.jsxs("span",{className:"text-red-400 ml-1",children:["(-",d(C.deficit),")"]})]})]},C.wareId))})]})]}),h.modules.length===0&&u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},h.id)})})}function h2(){const t=ge(l=>l.reportOpen),r=ge(l=>l.setReportOpen),[o,i]=D.useState("network");return t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),u.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),u.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsxs("div",{className:"flex border-b border-border",children:[u.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),u.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?u.jsx(p2,{}):u.jsx(m2,{})}),u.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function ze(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Yc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const g2={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},x2={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},y2={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},v2={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function ql({wareId:t,type:r,amount:o,status:i,preset:l,handleId:c,isDeficit:d=!1,drag:f,handleTooltip:g,amountTooltip:h,onDoubleClick:x}){const m=Oe(L=>L.gameData),{t:y}=yt(),w=r==="input",S=w?l.inputColors:l.outputColors,k=(L=>{var P;return y((P=m==null?void 0:m.wares[L])==null?void 0:P.name,L)})(t),b=()=>{const L=w?"handle-left":"handle-right",P="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${L} ${P} ${l.handle.colorClass}`;const U=i==="satisfied"?w?"handle-input-satisfied":"handle-output-satisfied":w?"handle-input":"handle-output";return`${l.handle.baseClass} ${L} ${P} ${U}`},T=()=>i==="satisfied"?S.satisfied:d&&S.deficit?S.deficit:S.default,j=()=>{const L=o.fulfilled??0,P=L>.01;if(w)if(i==="satisfied"){const U=L>.01?L:o.primary;return u.jsxs("span",{className:"text-green-600 font-bold",title:h,children:["",ze(U)]})}else if(P){const U=i==="partial"?o.primary-L:o.primary;return u.jsxs("span",{className:"text-red-400 font-bold",title:h,children:["-",ze(U)]})}else return u.jsxs("span",{className:"text-red-600/60",title:h,children:["",ze(o.primary)]});else return P?u.jsx("span",{className:"text-gray-400",title:h,children:ze(o.primary)}):u.jsx("span",{className:"text-gray-500/60",title:h,children:ze(o.primary)})},_=()=>!l.hasDrag||!f?null:u.jsx("div",{draggable:!0,onDragStart:f.onDragStart,onDragEnd:f.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:u.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),A=()=>u.jsx(Dr,{type:w?"target":"source",position:w?je.Left:je.Right,id:c,className:b(),title:g??k});return u.jsxs("div",{onDoubleClick:x?L=>{L.stopPropagation(),x()}:void 0,onDragOver:f==null?void 0:f.onDragOver,onDragLeave:f==null?void 0:f.onDragLeave,onDrop:f==null?void 0:f.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${f!=null&&f.isDragging?"opacity-50":""}
        ${f!=null&&f.isDragOver?"bg-primary/20 rounded":""}
      `,children:[w&&l.handle.inline&&A(),!w&&l.hasDrag&&_(),w&&!l.handle.inline&&A(),u.jsxs("div",{className:`flex-1 flex items-center justify-between ${w?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[w&&u.jsx("span",{className:"font-mono ml-1",children:j()}),u.jsx("span",{className:`truncate ${l.nameMaxWidth} ${T()}`,children:k}),!w&&u.jsx("span",{className:"font-mono mr-2",children:j()})]}),w&&l.hasDrag&&_(),!w&&l.handle.inline&&A(),!w&&!l.handle.inline&&A()]})}const w2=D.memo(function({data:r,selected:o}){const{station:i}=r,l=ce(H=>H.plan.sectors),c=ce(H=>H.computed),d=ce(H=>H.updateStation),f=ge(H=>H.drillIntoStation),[g,h]=D.useState(null),[x,m]=D.useState(null),y=i.sectorId?l.find(H=>H.id===i.sectorId):null,w=D.useMemo(()=>Tr(c,i.id),[c,i.id]),S=D.useMemo(()=>bl(c,i.id),[c,i.id]),C=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(y==null?void 0:y.sunlight)??100,k=D.useCallback(()=>{f(i.id)},[f,i.id]),b=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,T=w&&w.totalWorkforceRequired>0,j=D.useMemo(()=>c.deficits.filter(H=>H.stationId===i.id),[c.deficits,i.id]),_=H=>j.some($=>$.wareId===H),A=D.useCallback((H,$)=>{if(!$||$.length===0)return H;const N=new Map(H.map(z=>[z.wareId,z])),O=[],E=new Set;for(const z of $){const J=N.get(z);J&&(O.push(J),E.add(z))}for(const z of H)E.has(z.wareId)||O.push(z);return O},[]),L=D.useMemo(()=>A((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,A]),P=D.useMemo(()=>A((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,A]),U=D.useMemo(()=>{const H=new Map;for(const $ of(w==null?void 0:w.externallySupplied)??[])H.set($.wareId,$.amount);return H},[w==null?void 0:w.externallySupplied]),K=D.useMemo(()=>{const H=new Map;for(const $ of(w==null?void 0:w.externallyConsumed)??[])H.set($.wareId,$.amount);return H},[w==null?void 0:w.externallyConsumed]),se=D.useCallback((H,$,N)=>{H.stopPropagation(),h(`${N}-${$}`),H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",`${N}-${$}`)},[]),B=D.useCallback((H,$,N)=>{H.preventDefault(),H.stopPropagation();const O=`${N}-${$}`;g&&g!==O&&g.startsWith(N)&&(m(O),H.dataTransfer.dropEffect="move")},[g]),M=D.useCallback(()=>{m(null)},[]),X=D.useCallback((H,$,N)=>{if(H.preventDefault(),H.stopPropagation(),!g||!g.startsWith(N)){h(null),m(null);return}const O=g.replace(`${N}-`,"");if(O===$){h(null),m(null);return}const z=(N==="output"?L:P).map(ie=>ie.wareId),J=z.indexOf(O),te=z.indexOf($);if(J===-1||te===-1){h(null),m(null);return}const Q=[...z];Q.splice(J,1),Q.splice(te,0,O),N==="output"?d(i.id,{outputOrder:Q}):d(i.id,{inputOrder:Q}),h(null),m(null)},[g,L,P,d,i.id]),R=D.useCallback(()=>{h(null),m(null)},[]),W=D.useCallback((H,$)=>{const N=`${$}-${H}`;return{isDragging:g===N,isDragOver:x===N,onDragStart:O=>se(O,H,$),onDragEnd:R,onDragOver:O=>B(O,H,$),onDragLeave:M,onDrop:O=>X(O,H,$)}},[g,x,se,R,B,M,X]),V=(H,$)=>{const N=$==="input",O=`${$}-${H.wareId}`,E=N&&_(H.wareId),z=N?U.get(H.wareId)??0:0,J=N?0:K.get(H.wareId)??0,te=N?z:J,Q=H.amount-te,ie=Yc(Q,te),le=N?"Need":"Export",oe=N?"Supplied":"Consumed";let ae;return ie==="satisfied"?ae=`${le}: ${ze(H.amount)}, ${oe}: ${ze(te)}`:ie==="partial"?ae=`${le}: ${ze(H.amount)}, ${oe}: ${ze(te)}, Remaining: ${ze(Q)}`:ae=`${le}: ${ze(H.amount)}, No external ${N?"supply":"consumers"}`,u.jsx(ql,{wareId:H.wareId,type:$,handleId:O,amount:{primary:H.amount,secondary:te>.01?te:void 0,fulfilled:te},status:ie,preset:x2,isDeficit:E,drag:W(H.wareId,$),amountTooltip:ae},H.wareId)};return u.jsxs("div",{className:`
        min-w-[240px] max-w-[240px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:k,children:[S>0&&u.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),u.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("button",{onClick:H=>{H.stopPropagation(),d(i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("h3",{className:`font-medium text-sm truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:i.name}),y&&u.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:y.name})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),u.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[u.jsx("span",{className:"text-yellow-500",children:""}),C,"%",i.sunlightOverride===null&&y&&u.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),T&&u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Population"}),u.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),u.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all ${b>=1?"bg-green-500":b>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b*100}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Modules"}),u.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[L.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pr-2",children:L.map(H=>V(H,"output"))})]}),P.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0 pl-2",children:P.map(H=>V(H,"input"))})]})]}),i.modules.length===0&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),S2=160,N2=100,k2=D.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,c=ce(y=>y.updateSector),d=ce(y=>y.plan.stations),f=ce(y=>y.moveStationToSector),[g,h]=D.useState(!1),x=D.useCallback((y,w)=>{c(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,c]),m=D.useCallback((y,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};d.forEach(C=>{const k=C.position.x+S2/2,b=C.position.y+N2/2,T=k>=S.left&&k<=S.right&&b>=S.top&&b<=S.bottom;T&&C.sectorId!==r?f(C.id,r):!T&&C.sectorId===r&&f(C.id,null)})},[r,d,f]);return u.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[u.jsx(_k,{minWidth:200,minHeight:150,isVisible:i||g,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:x,onResizeEnd:m}),u.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[u.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),u.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),j2={production:"",habitat:"",storage:""},Fm={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},b2=D.memo(function({data:r,selected:o}){const{module:i,onWareDoubleClick:l}=r,c=Wc(),d=ge(Q=>Q.activeStationId),f=ce(Q=>Q.computed),g=ce(Q=>Q.updateModule),h=Oe(Q=>Q.getModule),x=Oe(Q=>Q.getModuleType),m=Oe(Q=>Q.gameData),{t:y}=yt(),[w,S]=D.useState(null),[C,k]=D.useState(null),[b,T]=D.useState(!1),j=h(i.blueprintId),_=x(i.blueprintId)??"production",A=Fm[_]??Fm.production,L=j2[_]??"",P=D.useMemo(()=>{if(d)return en(f,d,i.id)},[f,d,i.id]),U=D.useCallback(Q=>{var ie;return y((ie=m==null?void 0:m.wares[Q])==null?void 0:ie.name,Q)},[m,y]),K=D.useCallback((Q,ie)=>{if(!ie||ie.length===0)return Q;const le=new Map(Q.map(me=>[me.wareId,me])),oe=[],ae=new Set;for(const me of ie){const be=le.get(me);be&&(oe.push(be),ae.add(me))}for(const me of Q)ae.has(me.wareId)||oe.push(me);return oe},[]),se=D.useMemo(()=>K((P==null?void 0:P.netOutputs)??[],i.outputOrder),[P==null?void 0:P.netOutputs,i.outputOrder,K]),B=D.useMemo(()=>K((P==null?void 0:P.netInputs)??[],i.inputOrder),[P==null?void 0:P.netInputs,i.inputOrder,K]),M=D.useMemo(()=>K((P==null?void 0:P.grossOutputs)??[],i.outputOrder),[P==null?void 0:P.grossOutputs,i.outputOrder,K]),X=D.useMemo(()=>K((P==null?void 0:P.grossInputs)??[],i.inputOrder),[P==null?void 0:P.grossInputs,i.inputOrder,K]),R=M.map(Q=>Q.wareId).join(","),W=X.map(Q=>Q.wareId).join(",");D.useEffect(()=>{(R||W)&&requestAnimationFrame(()=>{c(i.id)})},[R,W,c,i.id]);const V=D.useMemo(()=>{if(!P)return!1;const Q=P.grossOutputs.reduce((ae,me)=>ae+me.amount,0),ie=P.netOutputs.reduce((ae,me)=>ae+me.amount,0),le=P.grossInputs.reduce((ae,me)=>ae+me.amount,0),oe=P.netInputs.reduce((ae,me)=>ae+me.amount,0);return Math.abs(Q-ie)>.01||Math.abs(le-oe)>.01},[P]),H=D.useCallback((Q,ie,le)=>{Q.stopPropagation(),S(`${le}-${ie}`),Q.dataTransfer.effectAllowed="move",Q.dataTransfer.setData("text/plain",`${le}-${ie}`)},[]),$=D.useCallback((Q,ie,le)=>{Q.preventDefault(),Q.stopPropagation();const oe=`${le}-${ie}`;w&&w!==oe&&w.startsWith(le)&&(k(oe),Q.dataTransfer.dropEffect="move")},[w]),N=D.useCallback(()=>{k(null)},[]),O=D.useCallback((Q,ie,le)=>{if(Q.preventDefault(),Q.stopPropagation(),!w||!w.startsWith(le)||!d){S(null),k(null);return}const oe=w.replace(`${le}-`,"");if(oe===ie){S(null),k(null);return}const me=(le==="output"?M:X).map(he=>he.wareId),be=me.indexOf(oe),q=me.indexOf(ie);if(be===-1||q===-1){S(null),k(null);return}const ee=[...me];ee.splice(be,1),ee.splice(q,0,oe),le==="output"?g(d,i.id,{outputOrder:ee}):g(d,i.id,{inputOrder:ee}),S(null),k(null)},[w,M,X,g,d,i.id]),E=D.useCallback(()=>{S(null),k(null)},[]),z=D.useCallback((Q,ie)=>{var oe;return P?((oe=(ie==="output"?P.netOutputs:P.netInputs).find(ae=>ae.wareId===Q))==null?void 0:oe.amount)??0:0},[P]),J=D.useCallback((Q,ie)=>{const le=`${ie}-${Q}`;return{isDragging:w===le,isDragOver:C===le,onDragStart:oe=>H(oe,Q,ie),onDragEnd:E,onDragOver:oe=>$(oe,Q,ie),onDragLeave:N,onDrop:oe=>O(oe,Q,ie)}},[w,C,H,E,$,N,O]),te=(Q,ie)=>{const le=`${ie}-${Q.wareId}`,oe=z(Q.wareId,ie),ae=oe<.01;return u.jsx(ql,{wareId:Q.wareId,type:ie,handleId:le,amount:{primary:oe,fulfilled:Q.amount-oe},status:ae?"satisfied":"unsatisfied",preset:g2,drag:J(Q.wareId,ie),amountTooltip:`Full: ${ze(Q.amount)}/hr`,onDoubleClick:l?()=>l(Q.wareId,i.id,ie):void 0},Q.wareId)};return u.jsxs("div",{className:`
        w-[240px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":A.border}
      `,children:[u.jsx("div",{className:`px-3 py-2 border-b border-border ${A.bg} rounded-t-lg`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:Q=>{Q.stopPropagation(),d&&g(d,i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),u.jsx("span",{className:"text-base",children:L}),u.jsx("h3",{className:`text-xs truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:y(j==null?void 0:j.name,i.blueprintId)})]})}),u.jsxs("div",{className:"px-3 py-2 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Count"}),u.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),_==="habitat"&&j&&"workforceCapacity"in j&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),u.jsx("span",{className:"text-foreground",children:j.workforceCapacity*i.count})]}),_==="storage"&&j&&"cargoMax"in j&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),u.jsx("span",{className:"text-foreground",children:j.cargoMax*i.count})]}),(_==="production"||_==="habitat")&&P&&u.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[M.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:M.map(Q=>te(Q,"output"))})]}),X.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",u.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),u.jsx("div",{className:"space-y-0",children:X.map(Q=>te(Q,"input"))})]}),se.length===0&&B.length===0&&V&&u.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(M.length>0||X.length>0)&&u.jsxs("div",{className:"pt-1 border-t border-border/30",children:[u.jsxs("button",{onClick:Q=>{Q.stopPropagation(),T(!b)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[u.jsx("span",{children:b?"":""}),u.jsx("span",{children:"Full Production"})]}),b&&u.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[M.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),M.map(Q=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:U(Q.wareId)}),u.jsxs("span",{className:"font-mono",children:["+",ze(Q.amount)]})]},Q.wareId))]}),X.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),X.map(Q=>u.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[u.jsx("span",{className:"truncate max-w-[70px]",children:U(Q.wareId)}),u.jsxs("span",{className:"font-mono",children:["-",ze(Q.amount)]})]},Q.wareId))]})]})]})]}),(_==="production"||_==="habitat")&&!P&&u.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),C2="generic-import",I2=D.memo(function({selected:r}){const o=Wc(),i=ge(M=>M.activeStationId),l=ce(M=>M.computed),c=Oe(M=>M.gameData),d=ce(M=>M.plan.stations),f=ce(M=>M.updateStation),{t:g}=yt(),[h,x]=D.useState(null),[m,y]=D.useState(null),w=D.useMemo(()=>{if(i)return d.find(M=>M.id===i)},[d,i]),S=D.useMemo(()=>{if(!(!i||!l))return l.stations.find(M=>M.stationId===i)},[l,i]),C=M=>{var X;return g((X=c==null?void 0:c.wares[M])==null?void 0:X.name,M)},k=(S==null?void 0:S.stationInputs)??[],b=(S==null?void 0:S.externallySupplied)??[],T=(S==null?void 0:S.remainingInputs)??[],j=D.useMemo(()=>{const M=new Map;for(const W of k){const V=M.get(W.wareId)||{connected:0,supplied:0,remaining:0};V.connected=W.amount,M.set(W.wareId,V)}for(const W of b){const V=M.get(W.wareId);V&&(V.supplied=W.amount)}for(const W of T){const V=M.get(W.wareId);V&&(V.remaining=W.amount)}const X=Array.from(M.entries()).map(([W,V])=>({wareId:W,connected:V.connected,supplied:V.supplied,remaining:V.remaining})),R=w==null?void 0:w.inputOrder;if(R&&R.length>0){const W=new Map(R.map((V,H)=>[V,H]));X.sort((V,H)=>{const $=W.get(V.wareId)??1/0,N=W.get(H.wareId)??1/0;return $!==N?$-N:H.connected-V.connected})}else X.sort((W,V)=>V.connected-W.connected);return X},[k,b,T,w==null?void 0:w.inputOrder]),_=j.map(M=>M.wareId).join(",");D.useEffect(()=>{_&&requestAnimationFrame(()=>{o(lt)})},[_,o]);const A=D.useCallback((M,X)=>{M.stopPropagation(),x(X),M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",X)},[]),L=D.useCallback((M,X)=>{M.preventDefault(),M.stopPropagation(),h&&h!==X&&(y(X),M.dataTransfer.dropEffect="move")},[h]),P=D.useCallback(()=>{y(null)},[]),U=D.useCallback((M,X)=>{if(M.preventDefault(),M.stopPropagation(),!h||!i){x(null),y(null);return}const R=h;if(R===X){x(null),y(null);return}const W=j.map(N=>N.wareId),V=W.indexOf(R),H=W.indexOf(X);if(V===-1||H===-1){x(null),y(null);return}const $=[...W];$.splice(V,1),$.splice(H,0,R),f(i,{inputOrder:$}),x(null),y(null)},[h,j,f,i]),K=D.useCallback(()=>{x(null),y(null)},[]),se=D.useCallback(M=>({isDragging:h===M,isDragOver:m===M,onDragStart:X=>A(X,M),onDragEnd:K,onDragOver:X=>L(X,M),onDragLeave:P,onDrop:X=>U(X,M)}),[h,m,A,K,L,P,U]),B=M=>{const X=`output-${M.wareId}`,R=Yc(M.remaining,M.supplied);let W;return R==="satisfied"?W=`Need: ${ze(M.connected)}, Supplied: ${ze(M.supplied)}`:R==="partial"?W=`Need: ${ze(M.connected)}, Supplied: ${ze(M.supplied)}, Remaining: ${ze(M.remaining)}`:W=`Need: ${ze(M.connected)}, No external supply`,u.jsx(ql,{wareId:M.wareId,type:"output",handleId:X,amount:{primary:M.supplied-M.connected?M.supplied-M.connected:M.supplied,secondary:M.supplied>.01?M.supplied:void 0,fulfilled:M.supplied},status:R,preset:y2,drag:se(M.wareId),amountTooltip:W,handleTooltip:`Import ${C(M.wareId)}`},M.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),u.jsx("div",{className:"px-1 py-2",children:j.length>0?u.jsx("div",{className:"space-y-0 pr-3",children:j.map(M=>B(M))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),u.jsx(Dr,{type:"source",position:je.Right,id:C2,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),E2="generic-export",M2=D.memo(function({selected:r}){const o=Wc(),i=ge(M=>M.activeStationId),l=ce(M=>M.computed),c=Oe(M=>M.gameData),d=ce(M=>M.plan.stations),f=ce(M=>M.updateStation),{t:g}=yt(),[h,x]=D.useState(null),[m,y]=D.useState(null),w=D.useMemo(()=>{if(i)return d.find(M=>M.id===i)},[d,i]),S=D.useMemo(()=>{if(!(!i||!l))return l.stations.find(M=>M.stationId===i)},[l,i]),C=M=>{var X;return g((X=c==null?void 0:c.wares[M])==null?void 0:X.name,M)},k=(S==null?void 0:S.stationOutputs)??[],b=(S==null?void 0:S.externallyConsumed)??[],T=(S==null?void 0:S.remainingOutputs)??[],j=D.useMemo(()=>{const M=new Map;for(const W of k){const V=M.get(W.wareId)||{connected:0,consumed:0,remaining:0};V.connected=W.amount,M.set(W.wareId,V)}for(const W of b){const V=M.get(W.wareId);V&&(V.consumed=W.amount)}for(const W of T){const V=M.get(W.wareId);V&&(V.remaining=W.amount)}const X=Array.from(M.entries()).map(([W,V])=>({wareId:W,connected:V.connected,consumed:V.consumed,remaining:V.remaining})),R=w==null?void 0:w.outputOrder;if(R&&R.length>0){const W=new Map(R.map((V,H)=>[V,H]));X.sort((V,H)=>{const $=W.get(V.wareId)??1/0,N=W.get(H.wareId)??1/0;return $!==N?$-N:H.connected-V.connected})}else X.sort((W,V)=>V.connected-W.connected);return X},[k,b,T,w==null?void 0:w.outputOrder]),_=j.map(M=>M.wareId).join(",");D.useEffect(()=>{_&&requestAnimationFrame(()=>{o(xt)})},[_,o]);const A=D.useCallback((M,X)=>{M.stopPropagation(),x(X),M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",X)},[]),L=D.useCallback((M,X)=>{M.preventDefault(),M.stopPropagation(),h&&h!==X&&(y(X),M.dataTransfer.dropEffect="move")},[h]),P=D.useCallback(()=>{y(null)},[]),U=D.useCallback((M,X)=>{if(M.preventDefault(),M.stopPropagation(),!h||!i){x(null),y(null);return}const R=h;if(R===X){x(null),y(null);return}const W=j.map(N=>N.wareId),V=W.indexOf(R),H=W.indexOf(X);if(V===-1||H===-1){x(null),y(null);return}const $=[...W];$.splice(V,1),$.splice(H,0,R),f(i,{outputOrder:$}),x(null),y(null)},[h,j,f,i]),K=D.useCallback(()=>{x(null),y(null)},[]),se=D.useCallback(M=>({isDragging:h===M,isDragOver:m===M,onDragStart:X=>A(X,M),onDragEnd:K,onDragOver:X=>L(X,M),onDragLeave:P,onDrop:X=>U(X,M)}),[h,m,A,K,L,P,U]),B=M=>{const X=`input-${M.wareId}`,R=Yc(M.remaining,M.consumed);let W;return R==="satisfied"?W=`Exporting: ${ze(M.connected)}, Consumed: ${ze(M.consumed)}`:R==="partial"?W=`Exporting: ${ze(M.connected)}, Consumed: ${ze(M.consumed)}, Remaining: ${ze(M.remaining)}`:W=`Exporting: ${ze(M.connected)}, No external consumers`,u.jsx(ql,{wareId:M.wareId,type:"input",handleId:X,amount:{primary:M.connected,secondary:M.consumed>.01?M.consumed:void 0,fulfilled:M.consumed},status:R,preset:v2,drag:se(M.wareId),amountTooltip:W,handleTooltip:`Export ${C(M.wareId)}`},M.wareId)};return u.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[u.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-base",children:""}),u.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),u.jsx("div",{className:"px-1 py-2",children:j.length>0?u.jsx("div",{className:"space-y-0 pl-3",children:j.map(M=>B(M))}):u.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),u.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[u.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),u.jsx(Dr,{type:"target",position:je.Left,id:E2,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),_2=D.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:g,selected:h}){const x=ce(j=>j.computed),m=g==null?void 0:g.connection,y=D.useMemo(()=>{if(m)return Og(x,m.id)},[x,m]),[w,S,C]=Ul({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),k=j=>j>=1e3?`${(j/1e3).toFixed(1)}k`:j.toFixed(0),b=x.deficits.find(j=>j.stationId===(m==null?void 0:m.targetStationId)&&j.wareId===(m==null?void 0:m.wareId));let T="#64748b";return m!=null&&m.wareId?b?b.supplied/b.required>=.8?T="#eab308":T="#f97316":T="#22c55e":T="#ef4444",u.jsxs(u.Fragment,{children:[u.jsx(bo,{id:r,path:w,style:{stroke:T,strokeWidth:h?3:2,strokeDasharray:m!=null&&m.wareId?void 0:"5,5"}}),(m==null?void 0:m.wareId)&&u.jsx(bg,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${C}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${h?"ring-2 ring-primary":""}
              ${y!=null&&y.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:m.mode==="custom"?`Custom: ${k(m.amount)}, Actual: ${k((y==null?void 0:y.effectiveAmount)??0)}`:`Auto: ${k((y==null?void 0:y.effectiveAmount)??0)}`,children:k((y==null?void 0:y.effectiveAmount)??0)})})]})}),P2=D.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,data:g,selected:h}){const x=g==null?void 0:g.connection,m=ce(_=>_.computed),y=ge(_=>_.activeStationId),w=D.useMemo(()=>{if(!x||!y)return;const _=Tr(m,y);return _==null?void 0:_.moduleConnections.find(A=>A.connectionId===x.id)},[m,y,x]),[S,C,k]=Ul({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:c,targetPosition:f}),b=_=>_>=1e3?`${(_/1e3).toFixed(1)}k`:_.toFixed(0),T=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",j=(w==null?void 0:w.effectiveAmount)??(x==null?void 0:x.amount)??0;return u.jsxs(u.Fragment,{children:[u.jsx(bo,{id:r,path:S,style:{stroke:T,strokeWidth:h?3:2,strokeDasharray:x!=null&&x.wareId?void 0:"5,5"}}),(x==null?void 0:x.wareId)&&u.jsx(bg,{children:u.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${C}px,${k}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${h?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:x.mode==="custom"?`Custom: ${b(x.amount)}, Actual: ${b(j)}`:`${x.mode??"auto"}: ${b(j)}`,children:b(j)})})]})});function Ot({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",c=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return u.jsxs("button",{onClick:d=>{d.stopPropagation(),i(d)},className:`${l} ${c}`,children:[r&&u.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function D2(){const{screenToFlowPosition:t}=Ar(),r=ge(g=>g.contextMenu),o=ge(g=>g.closeContextMenu),i=ce(g=>g.plan),l=ce(g=>g.addStation),c=ce(g=>g.addSector),d=D.useCallback(g=>{if(g.stopPropagation(),!r)return;const h=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,h),o()},[t,r,i.stations.length,l,o]),f=D.useCallback(g=>{if(g.stopPropagation(),!r)return;const h=t({x:r.x,y:r.y});c(`Sector ${i.sectors.length+1}`,h),o()},[t,r,i.sectors.length,c,o]);return u.jsxs(u.Fragment,{children:[u.jsx(Ot,{label:"Add Station",icon:"+",onClick:d}),u.jsx(Ot,{label:"Add Sector",icon:"",onClick:f})]})}const vl={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function T2(){const{screenToFlowPosition:t}=Ar(),r=D.useRef(null),o=Oe(S=>S.gameData),i=ce(S=>S.addModule),l=ge(S=>S.activeStationId),c=ge(S=>S.contextMenu),d=ge(S=>S.closeContextMenu),{t:f}=yt(),[g,h]=D.useState(null),[x,m]=D.useState(""),y=D.useMemo(()=>{if(!o||!x.trim())return null;const S=x.toLowerCase(),C=[];return Object.keys(vl).forEach(k=>{Object.values(o.modules[k]).forEach(b=>{f(b.name).toLowerCase().includes(S)&&C.push({id:b.id,name:f(b.name),category:k})})}),C.slice(0,15)},[o,x,f]);D.useEffect(()=>{var S;(S=r.current)==null||S.focus()},[]);const w=D.useCallback((S,C)=>{if(S.stopPropagation(),!l||!c)return;const k=t({x:c.x,y:c.y});i(l,C,k),d()},[t,c,l,i,d]);return o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-2 pb-0",children:u.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:x,onChange:S=>m(S.target.value),onKeyDown:S=>S.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),u.jsx("div",{className:"p-1 pt-1",children:y?u.jsx("div",{className:"max-h-64 overflow-y-auto",children:y.length===0?u.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):y.map(S=>u.jsxs("button",{onClick:C=>w(C,S.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:vl[S.category].icon}),u.jsx("span",{className:"truncate",children:S.name})]},S.id))}):u.jsx(u.Fragment,{children:Object.keys(vl).map(S=>{const{label:C,icon:k}=vl[S],b=Object.values(o.modules[S]),T=g===S;return u.jsxs("div",{children:[u.jsxs("button",{onClick:j=>{j.stopPropagation(),h(T?null:S)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{children:k}),C]}),u.jsx("span",{className:"text-muted-foreground text-xs",children:T?"":""})]}),T&&u.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[b.slice(0,20).map(j=>u.jsx("button",{onClick:_=>w(_,j.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:f(j.name)},j.id)),b.length>20&&u.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",b.length-20," more (use search)"]})]})]},S)})})})]}):null}function Or(){return u.jsx("div",{className:"my-1 h-px bg-border"})}function bc({label:t,value:r,type:o="text",min:i,max:l,step:c,onSubmit:d}){const[f,g]=D.useState(!1),[h,x]=D.useState(String(r)),m=D.useRef(null);D.useEffect(()=>{var w,S;f&&((w=m.current)==null||w.focus(),(S=m.current)==null||S.select())},[f]);const y=()=>{d(h),g(!1)};return f?u.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("input",{ref:m,type:o,min:i,max:l,step:c,value:h,onChange:w=>x(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&y(),w.key==="Escape"&&g(!1)},onBlur:y,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):u.jsxs("button",{onClick:w=>{w.stopPropagation(),x(String(r)),g(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:t}),u.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function O2({nodeId:t}){const r=ce(g=>g.plan.stations),o=ce(g=>g.updateStation),i=ce(g=>g.removeStation),l=ge(g=>g.drillIntoStation),c=ge(g=>g.closeContextMenu),d=ge(g=>g.clearSelection),f=r.find(g=>g.id===t);return f?u.jsxs(u.Fragment,{children:[u.jsx(Ot,{label:"Open Station",onClick:()=>{l(t)}}),u.jsx(Or,{}),u.jsx(bc,{label:"Change Name",value:f.name,onSubmit:g=>{g.trim()&&o(t,{name:g.trim()})}}),u.jsx(bc,{label:"Sunlight Override",value:f.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:g=>{const h=parseInt(g,10);o(t,{sunlightOverride:isNaN(h)?void 0:h})}}),u.jsx(Ot,{label:f.locked?"Unlock Position":"Lock Position",icon:f.locked?"":"",onClick:()=>{o(t,{locked:!f.locked}),c()}}),u.jsx(Or,{}),u.jsx(Ot,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),d(),c()}})]}):null}function A2({value:t,onSelect:r}){const[o,i]=D.useState(!1),[l,c]=D.useState(t),d=D.useRef(null),f=Oe(x=>x.gameData),g=D.useMemo(()=>f!=null&&f.sectors?Object.values(f.sectors).sort((x,m)=>x.name.localeCompare(m.name)):[],[f]),h=D.useMemo(()=>{if(!l.trim())return g.slice(0,10);const x=l.toLowerCase();return g.filter(m=>m.name.toLowerCase().includes(x)).slice(0,10)},[g,l]);return D.useEffect(()=>{var x,m;o&&((x=d.current)==null||x.focus(),(m=d.current)==null||m.select())},[o]),o?u.jsxs("div",{className:"px-3 py-1.5",onClick:x=>x.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),u.jsx("input",{ref:d,type:"text",value:l,onChange:x=>c(x.target.value),onKeyDown:x=>{if(x.stopPropagation(),x.key==="Enter"){const m=g.find(y=>y.name.toLowerCase()===l.toLowerCase());r((m==null?void 0:m.name)??l,m==null?void 0:m.sunlight),i(!1)}x.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),h.length>0&&u.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:h.map(x=>u.jsxs("button",{onClick:m=>{m.stopPropagation(),r(x.name,x.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[u.jsx("span",{className:"truncate text-foreground",children:x.name}),u.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[x.sunlight,"%"]})]},x.id))})]}):u.jsxs("button",{onClick:x=>{x.stopPropagation(),c(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[u.jsx("span",{children:"Change Name"}),u.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function L2({nodeId:t}){const r=ce(m=>m.plan),o=ce(m=>m.updateSector),i=ce(m=>m.removeSector),l=ce(m=>m.addStation),c=ce(m=>m.moveStationToSector),d=ge(m=>m.contextMenu),f=ge(m=>m.closeContextMenu),g=ge(m=>m.clearSelection),h=r.sectors.find(m=>m.id===t);if(!h)return null;const x=r.stations.filter(m=>m.sectorId===t);return u.jsxs(u.Fragment,{children:[u.jsx(A2,{value:h.name,onSelect:(m,y)=>{const w={name:m};y!==void 0&&(w.sunlight=y),o(t,w)}}),u.jsx(bc,{label:"Sunlight",value:h.sunlight,type:"number",min:0,max:500,onSubmit:m=>{const y=parseInt(m,10);!isNaN(y)&&y>=0&&o(t,{sunlight:y})}}),u.jsx(Or,{}),u.jsx(Ot,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const m=(d==null?void 0:d.flowPosition)??{x:h.position.x+50,y:h.position.y+80},y=`Station ${r.stations.length+1}`;l(y,m);const w=(S=ce.getState().plan.stations.at(-1))==null?void 0:S.id;w&&c(w,t),f()}}),u.jsx(Ot,{label:h.locked?"Unlock Position":"Lock Position",icon:h.locked?"":"",onClick:()=>{o(t,{locked:!h.locked}),f()}}),u.jsx(Or,{}),u.jsx(Ot,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{x.length>0&&!confirm(`This sector contains ${x.length} station(s). They will be unassigned. Continue?`)||(i(t),g(),f())}})]})}function z2({label:t,value:r,min:o=1,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),u.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const c=parseInt(l.target.value,10);!isNaN(c)&&c>=o&&i(c)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),u.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function Cc({label:t,value:r,options:o,onChange:i}){return u.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[u.jsx("label",{className:"text-xs text-muted-foreground",children:t}),u.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value))})]})}function $2({nodeId:t}){const r=ge(S=>S.activeStationId),o=ge(S=>S.closeContextMenu),i=ge(S=>S.clearSelection),l=ce(S=>S.plan.stations),c=ce(S=>S.updateModule),d=ce(S=>S.removeModule),f=Oe(S=>S.gameData),g=Oe(S=>S.getModuleType),{t:h}=yt(),x=l.find(S=>S.id===r),m=x==null?void 0:x.modules.find(S=>S.id===t),y=m?g(m.blueprintId):null,w=D.useMemo(()=>{if(!f||!y)return[];const S=f.modules[y];return Object.values(S).sort((C,k)=>h(C.name).localeCompare(h(k.name))).map(C=>({value:C.id,label:h(C.name)}))},[f,y,h]);return!x||!m||!r?null:u.jsxs(u.Fragment,{children:[u.jsx(z2,{label:"Amount",value:m.count,min:1,onChange:S=>c(r,m.id,{count:S})}),y==="production"&&w.length>1&&u.jsx(Cc,{label:"Blueprint",value:m.blueprintId,options:w,onChange:S=>c(r,m.id,{blueprintId:S})}),u.jsx(Ot,{label:m.locked?"Unlock Position":"Lock Position",icon:m.locked?"":"",onClick:()=>{c(r,m.id,{locked:!m.locked}),o()}}),u.jsx(Or,{}),u.jsx(Ot,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{d(r,m.id),i(),o()}})]})}function R2({nodeId:t}){const r=ge(x=>x.activeStationId),o=ge(x=>x.closeContextMenu),i=ce(x=>x.plan.stations),l=ce(x=>x.removeModuleConnection),c=i.find(x=>x.id===r);if(!c||!r)return null;const d=c.moduleConnections??[],f=t===lt,g=f?"Station Input":"Station Output",h=d.filter(x=>f?x.sourceModuleId===lt:x.targetModuleId===xt);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[g,"  ",h.length," connection",h.length!==1?"s":""]}),u.jsx(Ot,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{h.forEach(x=>{l(r,x.id)}),o()}})]})}const Hm=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function F2({edgeId:t,viewMode:r}){var C,k;const o=ge(b=>b.closeContextMenu),i=ge(b=>b.clearSelection),l=ge(b=>b.activeStationId),c=ce(b=>b.plan),d=ce(b=>b.updateConnection),f=ce(b=>b.removeConnection),g=ce(b=>b.updateModuleConnection),h=ce(b=>b.removeModuleConnection),x=Oe(b=>b.gameData),{t:m}=yt();if(r==="network"){const b=c.connections.find(j=>j.id===t);if(!b)return null;const T=b.wareId?m((C=x==null?void 0:x.wares[b.wareId])==null?void 0:C.name,b.wareId):"Unknown";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:T}),u.jsx(Cc,{label:"Mode",value:b.mode??"auto",options:Hm,onChange:j=>d(b.id,{mode:j})}),u.jsx(Or,{}),u.jsx(Ot,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{f(b.id),i(),o()}})]})}if(!l)return null;const y=c.stations.find(b=>b.id===l),w=((y==null?void 0:y.moduleConnections)??[]).find(b=>b.id===t);if(!w)return null;const S=m((k=x==null?void 0:x.wares[w.wareId])==null?void 0:k.name,w.wareId);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:S}),u.jsx(Cc,{label:"Mode",value:w.mode??"auto",options:Hm,onChange:b=>g(l,w.id,{mode:b})}),u.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:b=>b.stopPropagation(),children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),u.jsx("button",{onClick:b=>{b.stopPropagation(),g(l,w.id,{locked:!w.locked})},className:`w-10 h-5 rounded-full transition-colors ${w.locked?"bg-primary":"bg-muted"}`,children:u.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${w.locked?"translate-x-5":"translate-x-0.5"}`})})]}),u.jsx(Or,{}),u.jsx(Ot,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{h(l,w.id),i(),o()}})]})}function zg(){const t=ge(x=>x.contextMenu),r=ge(x=>x.closeContextMenu),o=D.useRef(null),i=D.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const x=o.current.getBoundingClientRect();let{x:m,y}=t;return m+x.width>window.innerWidth&&(m=window.innerWidth-x.width-8),y+x.height>window.innerHeight&&(y=window.innerHeight-x.height-8),m<8&&(m=8),y<8&&(y=8),{left:m,top:y}},[t]);if(D.useEffect(()=>{if(!t)return;const x=y=>{o.current&&!o.current.contains(y.target)&&r()},m=setTimeout(()=>{document.addEventListener("mousedown",x)},0);return()=>{clearTimeout(m),document.removeEventListener("mousedown",x)}},[t,r]),D.useEffect(()=>{if(!t)return;const x=m=>{m.key==="Escape"&&r()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,r]),!t)return null;const{target:l}=t,d=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return u.jsx(D2,{});if(l.viewMode==="station")return u.jsx(T2,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return u.jsx(O2,{nodeId:l.nodeId});if(l.nodeType==="sector")return u.jsx(L2,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===lt||l.nodeId===xt)return u.jsx(R2,{nodeId:l.nodeId});if(l.nodeType==="module")return u.jsx($2,{nodeId:l.nodeId})}}return l.type==="edge"?u.jsx(F2,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!d)return null;const g=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",h=i();return u.jsx("div",{ref:o,className:`fixed z-50 ${g} rounded-md border border-border bg-popover shadow-lg`,style:{left:h.left||t.x,top:h.top||t.y},onClick:x=>x.stopPropagation(),onMouseDown:x=>x.stopPropagation(),children:u.jsx("div",{className:"p-1",children:d})})}const H2={station:w2,sector:k2},V2={resource:_2};function B2(){const{setViewport:t,screenToFlowPosition:r}=Ar(),o=ce(N=>N.plan.stations),i=ce(N=>N.plan.sectors),l=ce(N=>N.plan.connections),c=ce(N=>N.computed),d=ce(N=>N.updateStation),f=ce(N=>N.updateSector),g=ce(N=>N.removeStation),h=ce(N=>N.removeSector),x=ce(N=>N.moveStationToSector),m=ce(N=>N.addConnection),y=ce(N=>N.removeConnection),w=ge(N=>N.selectNode),S=ge(N=>N.selectEdge),C=ge(N=>N.clearSelection),k=ge(N=>N.openContextMenu),b=ge(N=>N.closeContextMenu),T=D.useRef(null),[j,_]=D.useState(new Map),A=D.useMemo(()=>{const N=i.map(E=>({id:E.id,type:"sector",position:E.position,data:{sector:E},width:E.size.width,height:E.size.height,zIndex:-1,draggable:!E.locked})),O=o.map(E=>({id:E.id,type:"station",position:E.position,data:{station:E},zIndex:1,draggable:!E.locked,...j.get(E.id)?{measured:j.get(E.id)}:{initialWidth:260,initialHeight:140}}));return[...N,...O]},[i,o,j]),L=D.useMemo(()=>l.map(N=>({id:N.id,source:N.sourceStationId,target:N.targetStationId,sourceHandle:N.wareId?`output-${N.wareId}`:void 0,targetHandle:N.wareId?`input-${N.wareId}`:void 0,type:"resource",data:{connection:N}})),[l]),P=D.useCallback((N,O)=>{for(const E of i)if(N>=E.position.x&&N<=E.position.x+E.size.width&&O>=E.position.y&&O<=E.position.y+E.size.height)return E.id;return null},[i]),U=D.useCallback(N=>{N.forEach(O=>{if(O.type==="position"&&O.position){const E=o.find(J=>J.id===O.id),z=i.find(J=>J.id===O.id);if(E)d(O.id,{position:O.position});else if(z){const J=O.position.x-z.position.x,te=O.position.y-z.position.y;f(O.id,{position:O.position}),(J!==0||te!==0)&&o.filter(Q=>Q.sectorId===z.id).forEach(Q=>{d(Q.id,{position:{x:Q.position.x+J,y:Q.position.y+te}})})}}else if(O.type==="remove"){const E=o.find(J=>J.id===O.id),z=i.find(J=>J.id===O.id);E?g(O.id):z&&h(O.id)}else O.type==="select"?O.selected&&w(O.id):O.type==="dimensions"&&O.dimensions&&_(E=>{const z=E.get(O.id);if((z==null?void 0:z.width)===O.dimensions.width&&(z==null?void 0:z.height)===O.dimensions.height)return E;const J=new Map(E);return J.set(O.id,O.dimensions),J})})},[o,i,d,f,g,h,w]),K=D.useCallback((N,O)=>{const E=o.find(Q=>Q.id===O.id);if(!E)return;const z=O.position.x+80,J=O.position.y+50,te=P(z,J);te!==E.sectorId&&x(E.id,te)},[o,P,x]),se=D.useCallback(N=>{N.forEach(O=>{O.type==="remove"?y(O.id):O.type==="select"&&O.selected&&S(O.id)})},[y,S]),B=N=>N?N.split("-").slice(1).join("-"):"",M=D.useCallback(N=>{if(N.source&&N.target&&N.sourceHandle){const O=B(N.sourceHandle),E=c.stations.find(ie=>ie.stationId===N.source),z=E==null?void 0:E.remainingOutputs.find(ie=>ie.wareId===O),J=c.stations.find(ie=>ie.stationId===N.target),te=J==null?void 0:J.remainingInputs.find(ie=>ie.wareId===O),Q=te?Math.min((z==null?void 0:z.amount)??0,te.amount):(z==null?void 0:z.amount)??0;m({sourceStationId:N.source,targetStationId:N.target,wareId:O,amount:Q,mode:"auto"})}},[m,c.stations]),X=D.useCallback(()=>{C(),b()},[C,b]),R=D.useCallback(N=>{N.preventDefault(),k({x:N.clientX,y:N.clientY,flowPosition:r({x:N.clientX,y:N.clientY}),target:{type:"pane",viewMode:"network"}})},[k,r]),W=D.useCallback((N,O)=>{N.preventDefault(),w(O.id),k({x:N.clientX,y:N.clientY,flowPosition:r({x:N.clientX,y:N.clientY}),target:{type:"node",nodeId:O.id,nodeType:O.type??"station",viewMode:"network"}})},[k,r,w]),V=D.useCallback((N,O)=>{N.preventDefault(),S(O.id),k({x:N.clientX,y:N.clientY,flowPosition:r({x:N.clientX,y:N.clientY}),target:{type:"edge",edgeId:O.id,edgeType:O.type??"resource",viewMode:"network"}})},[k,r,S]),H=D.useCallback(N=>{if(N.key==="Delete"||N.key==="Backspace"){const O=ge.getState().selectedNodeId,E=ge.getState().selectedEdgeId;if(O){const z=o.find(te=>te.id===O),J=i.find(te=>te.id===O);z?g(O):J&&h(O),C()}else E&&(y(E),C())}},[o,i,g,h,y,C]),$=D.useCallback(N=>{const O=Math.round(N.x),E=Math.round(N.y),z=Math.round(N.zoom*100)/100;(O!==N.x||E!==N.y||z!==N.zoom)&&t({x:O,y:E,zoom:z})},[t]);return u.jsxs("div",{ref:T,className:"flex-1 relative",onKeyDown:H,tabIndex:0,children:[u.jsxs(jg,{nodes:A,edges:L,onNodesChange:U,onEdgesChange:se,onConnect:M,onNodeDragStop:K,onPaneClick:X,onPaneContextMenu:R,onNodeContextMenu:W,onEdgeContextMenu:V,onViewportChange:$,nodeTypes:H2,edgeTypes:V2,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(Ig,{gap:16,size:1}),u.jsx(Mg,{}),u.jsx(Pg,{nodeColor:N=>N.selected?"#3b82f6":N.type==="sector"?"#475569":"#94a3b8",maskColor:"rgba(0, 0, 0, 0.4)"})]}),u.jsx(zg,{})]})}function W2(){return u.jsx(Ql,{children:u.jsx(B2,{})})}function U2({open:t,onClose:r,candidates:o,onSelect:i}){const{t:l}=yt(),c=Oe(d=>d.gameData);return u.jsx(Lr,{open:t,onClose:r,title:"Select Module",size:"sm",children:u.jsx("div",{className:"space-y-1",children:o.map(d=>{const f=c?Uc(d,c.recipes):null;return u.jsxs("button",{onClick:()=>i(d.id),className:"w-full text-left px-3 py-2 rounded hover:bg-muted transition-colors flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-sm text-foreground truncate",children:l(d.name,d.id)}),f&&f.method!=="default"&&u.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground flex-shrink-0",children:f.method})]},d.id)})})})}const Y2={module:b2,stationInput:I2,stationOutput:M2},X2={module:P2};function G2(){const{setViewport:t,screenToFlowPosition:r}=Ar(),o=ge(q=>q.activeStationId),i=ce(q=>q.plan.stations),l=ce(q=>q.computed),c=ce(q=>q.updateModule),d=ce(q=>q.removeModule),f=ce(q=>q.addModuleConnection),g=ce(q=>q.removeModuleConnection),h=ge(q=>q.selectNode),x=ge(q=>q.selectEdge),m=ge(q=>q.clearSelection),y=ge(q=>q.openContextMenu),w=ge(q=>q.closeContextMenu),S=ce(q=>q.addModule),C=Oe(q=>q.gameData),k=Oe(q=>q.getModuleType),b=D.useRef(null),[T,j]=D.useState(new Map),[_,A]=D.useState(null),L=D.useRef(null),P=D.useRef(!1),U=D.useMemo(()=>i.find(q=>q.id===o),[i,o]),K={x:-300,y:100},se={x:400,y:100},B=D.useCallback(q=>C?Object.values(C.modules.production).filter(ee=>ee.producedWareId===q):[],[C]),M=D.useCallback(q=>C?Object.values(C.modules.production).filter(ee=>{const he=Uc(ee,C.recipes);return(he==null?void 0:he.inputs.some(we=>we.ware===q))??!1}):[],[C]),X=D.useCallback((q,ee,he,we,xe)=>{var Ke,Ze,Je,Lt;if(!o)return;const Me=S(o,q,xe),$e=ce.getState().computed;if(we==="producer"){const at=en($e,o,Me),vt=en($e,o,he),pt=((Ke=at==null?void 0:at.grossOutputs.find(zt=>zt.wareId===ee))==null?void 0:Ke.amount)??0,It=((Ze=vt==null?void 0:vt.grossInputs.find(zt=>zt.wareId===ee))==null?void 0:Ze.amount)??0,mt=Math.min(pt,It),Yt=pt>0?mt/pt:0;f(o,{sourceModuleId:Me,targetModuleId:he,wareId:ee,amount:mt,mode:"auto",locked:!1,ratio:Yt})}else{const at=en($e,o,he),vt=en($e,o,Me),pt=((Je=at==null?void 0:at.grossOutputs.find(zt=>zt.wareId===ee))==null?void 0:Je.amount)??0,It=((Lt=vt==null?void 0:vt.grossInputs.find(zt=>zt.wareId===ee))==null?void 0:Lt.amount)??0,mt=Math.min(pt,It),Yt=pt>0?mt/pt:0;f(o,{sourceModuleId:he,targetModuleId:Me,wareId:ee,amount:mt,mode:"auto",locked:!1,ratio:Yt})}},[o,S,f]),R=D.useCallback((q,ee,he,we)=>{const xe=he==="producer"?B(q):M(q);xe.length!==0&&(xe.length===1?X(xe[0].id,q,ee,he,we):A({wareId:q,existingModuleId:ee,candidates:xe,direction:he,position:we}))},[B,M,X]),W=D.useCallback((q,ee,he)=>{const we=U==null?void 0:U.modules.find(Me=>Me.id===ee),xe=(we==null?void 0:we.position)??{x:0,y:0};he==="input"?R(q,ee,"producer",{x:xe.x-320,y:xe.y}):R(q,ee,"consumer",{x:xe.x+320,y:xe.y})},[U,R]),V=D.useCallback(q=>{_&&(X(q,_.wareId,_.existingModuleId,_.direction,_.position),A(null))},[_,X]),H=D.useCallback((q,ee)=>{P.current=!1,ee.nodeId&&ee.handleId&&ee.handleType&&(L.current={nodeId:ee.nodeId,handleId:ee.handleId,handleType:ee.handleType})},[]),$=D.useCallback(q=>{if(P.current||!L.current){L.current=null;return}const ee=L.current;if(L.current=null,ee.nodeId===lt||ee.nodeId===xt)return;const he=q;if(!he.clientX&&!he.clientY)return;const we=r({x:he.clientX,y:he.clientY}),xe=te(ee.handleId);xe&&(ee.handleType==="source"?R(xe,ee.nodeId,"consumer",we):R(xe,ee.nodeId,"producer",we))},[r,R]),N=D.useMemo(()=>{if(!U)return[];const q=U.modules.map(we=>({id:we.id,type:"module",position:we.position,data:{module:we,onWareDoubleClick:W},draggable:!we.locked,...T.get(we.id)?{measured:T.get(we.id)}:{initialWidth:240,initialHeight:200}})),ee={id:lt,type:"stationInput",position:U.stationInputPosition??K,data:{},deletable:!1,...T.get(lt)?{measured:T.get(lt)}:{initialWidth:200,initialHeight:110}},he={id:xt,type:"stationOutput",position:U.stationOutputPosition??se,data:{},deletable:!1,...T.get(xt)?{measured:T.get(xt)}:{initialWidth:200,initialHeight:110}};return[ee,...q,he]},[U,W,T]),O=D.useMemo(()=>U?(U.moduleConnections??[]).map(ee=>({id:ee.id,source:ee.sourceModuleId,target:ee.targetModuleId,sourceHandle:ee.wareId?`output-${ee.wareId}`:void 0,targetHandle:ee.wareId?`input-${ee.wareId}`:void 0,type:"module",data:{connection:ee}})):[],[U]),E=ce(q=>q.updateStation),z=D.useCallback(q=>{o&&q.forEach(ee=>{ee.type==="position"&&ee.position?ee.id===lt?E(o,{stationInputPosition:ee.position}):ee.id===xt?E(o,{stationOutputPosition:ee.position}):c(o,ee.id,{position:ee.position}):ee.type==="remove"?ee.id!==lt&&ee.id!==xt&&d(o,ee.id):ee.type==="select"?ee.selected&&h(ee.id):ee.type==="dimensions"&&ee.dimensions&&j(he=>{const we=he.get(ee.id);if((we==null?void 0:we.width)===ee.dimensions.width&&(we==null?void 0:we.height)===ee.dimensions.height)return he;const xe=new Map(he);return xe.set(ee.id,ee.dimensions),xe})})},[o,c,E,d,h]),J=D.useCallback(q=>{o&&q.forEach(ee=>{ee.type==="remove"?g(o,ee.id):ee.type==="select"&&ee.selected&&x(ee.id)})},[o,g,x]),te=q=>q?q.split("-").slice(1).join("-"):"",Q=D.useCallback(q=>{if(P.current=!0,!o||!q.source||!q.target)return;let ee,he=0,we;if(q.source===lt){if(!q.targetHandle)return;ee=te(q.targetHandle);const xe=en(l,o,q.target),Me=xe==null?void 0:xe.netInputs.find($e=>$e.wareId===ee);he=(Me==null?void 0:Me.amount)??0}else if(q.target===xt){if(!q.sourceHandle)return;ee=te(q.sourceHandle);const xe=en(l,o,q.source),Me=xe==null?void 0:xe.netOutputs.find($e=>$e.wareId===ee);he=(Me==null?void 0:Me.amount)??0}else{if(!q.sourceHandle)return;ee=te(q.sourceHandle);const xe=en(l,o,q.source),Me=xe==null?void 0:xe.grossOutputs.find(Je=>Je.wareId===ee),$e=(Me==null?void 0:Me.amount)??0,Ke=en(l,o,q.target),Ze=Ke==null?void 0:Ke.grossInputs.find(Je=>Je.wareId===ee);he=Ze?Math.min($e,Ze.amount):$e,we=$e>0?he/$e:0}ee&&f(o,{sourceModuleId:q.source,targetModuleId:q.target,wareId:ee,amount:he,mode:"auto",locked:!1,ratio:we})},[o,l,f]),ie=D.useCallback(()=>{m(),w()},[m,w]),le=D.useCallback(q=>{q.preventDefault(),y({x:q.clientX,y:q.clientY,flowPosition:r({x:q.clientX,y:q.clientY}),target:{type:"pane",viewMode:"station"}})},[y,r]),oe=D.useCallback((q,ee)=>{q.preventDefault(),h(ee.id),y({x:q.clientX,y:q.clientY,flowPosition:r({x:q.clientX,y:q.clientY}),target:{type:"node",nodeId:ee.id,nodeType:ee.type??"module",viewMode:"station"}})},[y,r,h]),ae=D.useCallback((q,ee)=>{q.preventDefault(),x(ee.id),y({x:q.clientX,y:q.clientY,flowPosition:r({x:q.clientX,y:q.clientY}),target:{type:"edge",edgeId:ee.id,edgeType:ee.type??"module",viewMode:"station"}})},[y,r,x]),me=D.useCallback(q=>{if(q.key==="Delete"||q.key==="Backspace"){const ee=ge.getState().selectedNodeId,he=ge.getState().selectedEdgeId;ee&&o?ee!==lt&&ee!==xt&&(d(o,ee),m()):he&&o&&(g(o,he),m())}},[o,d,g,m]),be=D.useCallback(q=>{const ee=Math.round(q.x),he=Math.round(q.y),we=Math.round(q.zoom*100)/100;(ee!==q.x||he!==q.y||we!==q.zoom)&&t({x:ee,y:he,zoom:we})},[t]);return U?u.jsxs("div",{ref:b,className:"flex-1 relative",onKeyDown:me,tabIndex:0,children:[u.jsxs(jg,{nodes:N,edges:O,onNodesChange:z,onEdgesChange:J,onConnect:Q,onConnectStart:H,onConnectEnd:$,onPaneClick:ie,onPaneContextMenu:le,onNodeContextMenu:oe,onEdgeContextMenu:ae,onViewportChange:be,nodeTypes:Y2,edgeTypes:X2,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[u.jsx(Ig,{gap:16,size:1}),u.jsx(Mg,{}),u.jsx(Pg,{nodeColor:q=>{var ee,he;if(q.selected)return"#3b82f6";if(q.type==="stationInput")return"#a855f7";if(q.type==="stationOutput")return"#14b8a6";if(q.type==="module"){const we=(he=(ee=q.data)==null?void 0:ee.module)==null?void 0:he.blueprintId;if(we){const xe=k(we);if(xe==="production")return"#fb923c";if(xe==="habitat")return"#22c55e";if(xe==="storage")return"#3b82f6"}}return"#64748b"},maskColor:"rgba(0, 0, 0, 0.4)"})]}),u.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[u.jsx("h2",{className:"font-medium text-foreground",children:U.name}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[U.modules.length," module",U.modules.length!==1?"s":"",","," ",(U.moduleConnections??[]).length," connection",(U.moduleConnections??[]).length!==1?"s":""]})]}),u.jsx(zg,{}),u.jsx(U2,{open:_!==null,onClose:()=>A(null),candidates:(_==null?void 0:_.candidates)??[],onSelect:V})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:u.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function K2(){return u.jsx(Ql,{children:u.jsx(G2,{})})}function Q2(){const t=ge(c=>c.toast),r=ge(c=>c.dismissToast),[o,i]=D.useState(!1);if(D.useEffect(()=>{i(!!t)},[t]),!t)return null;const l={success:"bg-green-500 text-white",error:"bg-red-500 text-white",info:"bg-blue-500 text-white"};return u.jsxs("div",{className:`
        fixed bottom-6 right-6 z-50
        flex items-center gap-3
        px-4 py-3 rounded-lg shadow-lg
        min-w-[300px] max-w-[500px]
        transition-all duration-300 ease-in-out
        ${l[t.type]}
        ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
      `,children:[u.jsx("p",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:r,className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Dismiss notification",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}function q2(){const t=ge(o=>o.theme),r=ge(o=>o.setTheme);D.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),D.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const c=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",c)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function Z2(){const t=ge(o=>o.language),r=ge(o=>o.setLanguage);D.useEffect(()=>{const o=localStorage.getItem("x4-planner-language");o&&r(o)},[r]),D.useEffect(()=>{localStorage.setItem("x4-planner-language",t)},[t])}function J2(){D.useEffect(()=>{const t=r=>{if(!(r.metaKey||r.ctrlKey)||r.key.toLowerCase()!=="z")return;const i=r.target;if(i.tagName==="INPUT"||i.tagName==="TEXTAREA")return;r.preventDefault();const l=ce.temporal.getState(),c=ge.getState().showToast;r.shiftKey?l.futureStates.length>0&&(l.redo(),ce.getState().recompute(),c("Redo","info")):l.pastStates.length>0&&(l.undo(),ce.getState().recompute(),c("Undo","info"))};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[])}function ej(){q2(),Z2(),J2();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=Oe(),c=ge(h=>h.viewMode),d=zl(h=>h.gameMode),[f,g]=D.useState(!0);return D.useEffect(()=>{const h=setTimeout(()=>g(!1),5e3);return()=>clearTimeout(h)},[]),D.useEffect(()=>{Ut.getState().initializePlanManager(),Xk(h=>Ut.getState().saveCurrentPlan(h)),Lg(d).then(h=>{i(h),ce.getState().recompute()}).catch(h=>l(h.message))},[i,l,d]),r?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?u.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):u.jsx(Ql,{children:u.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[u.jsx(o2,{}),u.jsx(f2,{}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c==="network"?u.jsx(W2,{}):u.jsx(K2,{}),u.jsx(d2,{})]}),u.jsx(h2,{}),t&&u.jsxs("div",{className:`absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded transition-opacity duration-1000 pointer-events-none ${f?"opacity-100":"opacity-0"}`,children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]}),u.jsx(Q2,{})]})})}k0.createRoot(document.getElementById("root")).render(u.jsx(D.StrictMode,{children:u.jsx(ej,{})}));
