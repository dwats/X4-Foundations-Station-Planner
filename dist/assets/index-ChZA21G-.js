(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();function Sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Du={exports:{}},is={},Tu={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function U0(){if(Jf)return _e;Jf=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function k(P,z,q){this.props=P,this.context=z,this.refs=N,this.updater=q||S}k.prototype.isReactComponent={},k.prototype.setState=function(P,z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,z,"setState")},k.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function I(){}I.prototype=k.prototype;function M(P,z,q){this.props=P,this.context=z,this.refs=N,this.updater=q||S}var _=M.prototype=new I;_.constructor=M,w(_,k.prototype),_.isPureReactComponent=!0;var C=Array.isArray,W=Object.prototype.hasOwnProperty,T={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function K(P,z,q){var ee,ne={},oe=null,ae=null;if(z!=null)for(ee in z.ref!==void 0&&(ae=z.ref),z.key!==void 0&&(oe=""+z.key),z)W.call(z,ee)&&!V.hasOwnProperty(ee)&&(ne[ee]=z[ee]);var re=arguments.length-2;if(re===1)ne.children=q;else if(1<re){for(var ce=Array(re),ye=0;ye<re;ye++)ce[ye]=arguments[ye+2];ne.children=ce}if(P&&P.defaultProps)for(ee in re=P.defaultProps,re)ne[ee]===void 0&&(ne[ee]=re[ee]);return{$$typeof:t,type:P,key:oe,ref:ae,props:ne,_owner:T.current}}function O(P,z){return{$$typeof:t,type:P.type,key:z,ref:P.ref,props:P.props,_owner:P._owner}}function Y(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function Q(P){var z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(q){return z[q]})}var A=/\/+/g;function U(P,z){return typeof P=="object"&&P!==null&&P.key!=null?Q(""+P.key):z.toString(36)}function b(P,z,q,ee,ne){var oe=typeof P;(oe==="undefined"||oe==="boolean")&&(P=null);var ae=!1;if(P===null)ae=!0;else switch(oe){case"string":case"number":ae=!0;break;case"object":switch(P.$$typeof){case t:case r:ae=!0}}if(ae)return ae=P,ne=ne(ae),P=ee===""?"."+U(ae,0):ee,C(ne)?(q="",P!=null&&(q=P.replace(A,"$&/")+"/"),b(ne,z,q,"",function(ye){return ye})):ne!=null&&(Y(ne)&&(ne=O(ne,q+(!ne.key||ae&&ae.key===ne.key?"":(""+ne.key).replace(A,"$&/")+"/")+P)),z.push(ne)),1;if(ae=0,ee=ee===""?".":ee+":",C(P))for(var re=0;re<P.length;re++){oe=P[re];var ce=ee+U(oe,re);ae+=b(oe,z,q,ce,ne)}else if(ce=g(P),typeof ce=="function")for(P=ce.call(P),re=0;!(oe=P.next()).done;)oe=oe.value,ce=ee+U(oe,re++),ae+=b(oe,z,q,ce,ne);else if(oe==="object")throw z=String(P),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ae}function B(P,z,q){if(P==null)return P;var ee=[],ne=0;return b(P,ee,"","",function(oe){return z.call(q,oe,ne++)}),ee}function R(P){if(P._status===-1){var z=P._result;z=z(),z.then(function(q){(P._status===0||P._status===-1)&&(P._status=1,P._result=q)},function(q){(P._status===0||P._status===-1)&&(P._status=2,P._result=q)}),P._status===-1&&(P._status=0,P._result=z)}if(P._status===1)return P._result.default;throw P._result}var L={current:null},D={transition:null},$={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:T};function j(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:B,forEach:function(P,z,q){B(P,function(){z.apply(this,arguments)},q)},count:function(P){var z=0;return B(P,function(){z++}),z},toArray:function(P){return B(P,function(z){return z})||[]},only:function(P){if(!Y(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},_e.Component=k,_e.Fragment=o,_e.Profiler=l,_e.PureComponent=M,_e.StrictMode=i,_e.Suspense=h,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,_e.act=j,_e.cloneElement=function(P,z,q){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ee=w({},P.props),ne=P.key,oe=P.ref,ae=P._owner;if(z!=null){if(z.ref!==void 0&&(oe=z.ref,ae=T.current),z.key!==void 0&&(ne=""+z.key),P.type&&P.type.defaultProps)var re=P.type.defaultProps;for(ce in z)W.call(z,ce)&&!V.hasOwnProperty(ce)&&(ee[ce]=z[ce]===void 0&&re!==void 0?re[ce]:z[ce])}var ce=arguments.length-2;if(ce===1)ee.children=q;else if(1<ce){re=Array(ce);for(var ye=0;ye<ce;ye++)re[ye]=arguments[ye+2];ee.children=re}return{$$typeof:t,type:P.type,key:ne,ref:oe,props:ee,_owner:ae}},_e.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:u,_context:P},P.Consumer=P},_e.createElement=K,_e.createFactory=function(P){var z=K.bind(null,P);return z.type=P,z},_e.createRef=function(){return{current:null}},_e.forwardRef=function(P){return{$$typeof:p,render:P}},_e.isValidElement=Y,_e.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:R}},_e.memo=function(P,z){return{$$typeof:m,type:P,compare:z===void 0?null:z}},_e.startTransition=function(P){var z=D.transition;D.transition={};try{P()}finally{D.transition=z}},_e.unstable_act=j,_e.useCallback=function(P,z){return L.current.useCallback(P,z)},_e.useContext=function(P){return L.current.useContext(P)},_e.useDebugValue=function(){},_e.useDeferredValue=function(P){return L.current.useDeferredValue(P)},_e.useEffect=function(P,z){return L.current.useEffect(P,z)},_e.useId=function(){return L.current.useId()},_e.useImperativeHandle=function(P,z,q){return L.current.useImperativeHandle(P,z,q)},_e.useInsertionEffect=function(P,z){return L.current.useInsertionEffect(P,z)},_e.useLayoutEffect=function(P,z){return L.current.useLayoutEffect(P,z)},_e.useMemo=function(P,z){return L.current.useMemo(P,z)},_e.useReducer=function(P,z,q){return L.current.useReducer(P,z,q)},_e.useRef=function(P){return L.current.useRef(P)},_e.useState=function(P){return L.current.useState(P)},_e.useSyncExternalStore=function(P,z,q){return L.current.useSyncExternalStore(P,z,q)},_e.useTransition=function(){return L.current.useTransition()},_e.version="18.3.1",_e}var ep;function Is(){return ep||(ep=1,Tu.exports=U0()),Tu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function Y0(){if(tp)return is;tp=1;var t=Is(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(p,h,m){var v,x={},g=null,S=null;m!==void 0&&(g=""+m),h.key!==void 0&&(g=""+h.key),h.ref!==void 0&&(S=h.ref);for(v in h)i.call(h,v)&&!u.hasOwnProperty(v)&&(x[v]=h[v]);if(p&&p.defaultProps)for(v in h=p.defaultProps,h)x[v]===void 0&&(x[v]=h[v]);return{$$typeof:r,type:p,key:g,ref:S,props:x,_owner:l.current}}return is.Fragment=o,is.jsx=c,is.jsxs=c,is}var np;function X0(){return np||(np=1,Du.exports=Y0()),Du.exports}var d=X0(),H=Is();const cs=Sh(H);var Gi={},Ou={exports:{}},ht={},Au={exports:{}},zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function Q0(){return rp||(rp=1,(function(t){function r(D,$){var j=D.length;D.push($);e:for(;0<j;){var P=j-1>>>1,z=D[P];if(0<l(z,$))D[P]=$,D[j]=z,j=P;else break e}}function o(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var $=D[0],j=D.pop();if(j!==$){D[0]=j;e:for(var P=0,z=D.length,q=z>>>1;P<q;){var ee=2*(P+1)-1,ne=D[ee],oe=ee+1,ae=D[oe];if(0>l(ne,j))oe<z&&0>l(ae,ne)?(D[P]=ae,D[oe]=j,P=oe):(D[P]=ne,D[ee]=j,P=ee);else if(oe<z&&0>l(ae,j))D[P]=ae,D[oe]=j,P=oe;else break e}}return $}function l(D,$){var j=D.sortIndex-$.sortIndex;return j!==0?j:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,p=c.now();t.unstable_now=function(){return c.now()-p}}var h=[],m=[],v=1,x=null,g=3,S=!1,w=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var $=o(m);$!==null;){if($.callback===null)i(m);else if($.startTime<=D)i(m),$.sortIndex=$.expirationTime,r(h,$);else break;$=o(m)}}function C(D){if(N=!1,_(D),!w)if(o(h)!==null)w=!0,R(W);else{var $=o(m);$!==null&&L(C,$.startTime-D)}}function W(D,$){w=!1,N&&(N=!1,I(K),K=-1),S=!0;var j=g;try{for(_($),x=o(h);x!==null&&(!(x.expirationTime>$)||D&&!Q());){var P=x.callback;if(typeof P=="function"){x.callback=null,g=x.priorityLevel;var z=P(x.expirationTime<=$);$=t.unstable_now(),typeof z=="function"?x.callback=z:x===o(h)&&i(h),_($)}else i(h);x=o(h)}if(x!==null)var q=!0;else{var ee=o(m);ee!==null&&L(C,ee.startTime-$),q=!1}return q}finally{x=null,g=j,S=!1}}var T=!1,V=null,K=-1,O=5,Y=-1;function Q(){return!(t.unstable_now()-Y<O)}function A(){if(V!==null){var D=t.unstable_now();Y=D;var $=!0;try{$=V(!0,D)}finally{$?U():(T=!1,V=null)}}else T=!1}var U;if(typeof M=="function")U=function(){M(A)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,B=b.port2;b.port1.onmessage=A,U=function(){B.postMessage(null)}}else U=function(){k(A,0)};function R(D){V=D,T||(T=!0,U())}function L(D,$){K=k(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){w||S||(w=!0,R(W))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return o(h)},t.unstable_next=function(D){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var j=g;g=$;try{return D()}finally{g=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=g;g=D;try{return $()}finally{g=j}},t.unstable_scheduleCallback=function(D,$,j){var P=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?P+j:P):j=P,D){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=j+z,D={id:v++,callback:$,priorityLevel:D,startTime:j,expirationTime:z,sortIndex:-1},j>P?(D.sortIndex=j,r(m,D),o(h)===null&&D===o(m)&&(N?(I(K),K=-1):N=!0,L(C,j-P))):(D.sortIndex=z,r(h,D),w||S||(w=!0,R(W))),D},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(D){var $=g;return function(){var j=g;g=$;try{return D.apply(this,arguments)}finally{g=j}}}})(zu)),zu}var op;function G0(){return op||(op=1,Au.exports=Q0()),Au.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function K0(){if(sp)return ht;sp=1;var t=Is(),r=G0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function u(e,n){c(e,n),c(e+"Capture",n)}function c(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},x={};function g(e){return h.call(x,e)?!0:h.call(v,e)?!1:m.test(e)?x[e]=!0:(v[e]=!0,!1)}function S(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w(e,n,s,a){if(n===null||typeof n>"u"||S(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function N(e,n,s,a,f,y,E){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=y,this.removeEmptyString=E}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new N(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];k[n]=new N(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new N(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new N(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new N(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new N(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new N(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new N(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new N(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(I,M);k[n]=new N(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(I,M);k[n]=new N(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(I,M);k[n]=new N(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new N(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new N(e,1,!1,e.toLowerCase(),null,!0,!0)});function _(e,n,s,a){var f=k.hasOwnProperty(n)?k[n]:null;(f!==null?f.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(w(n,s,f,a)&&(s=null),a||f===null?g(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):f.mustUseProperty?e[f.propertyName]=s===null?f.type===3?!1:"":s:(n=f.attributeName,a=f.attributeNamespace,s===null?e.removeAttribute(n):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),T=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),Q=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),D=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var j=Object.assign,P;function z(e){if(P===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);P=n&&n[1]||""}return`
`+P+e}var q=!1;function ee(e,n){if(!e||q)return"";q=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(te){var a=te}Reflect.construct(e,[],n)}else{try{n.call()}catch(te){a=te}e.call(n.prototype)}else{try{throw Error()}catch(te){a=te}e()}}catch(te){if(te&&a&&typeof te.stack=="string"){for(var f=te.stack.split(`
`),y=a.stack.split(`
`),E=f.length-1,F=y.length-1;1<=E&&0<=F&&f[E]!==y[F];)F--;for(;1<=E&&0<=F;E--,F--)if(f[E]!==y[F]){if(E!==1||F!==1)do if(E--,F--,0>F||f[E]!==y[F]){var X=`
`+f[E].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=E&&0<=F);break}}}finally{q=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?z(e):""}function ne(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case T:return"Portal";case O:return"Profiler";case K:return"StrictMode";case U:return"Suspense";case b:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q:return(e.displayName||"Context")+".Consumer";case Y:return(e._context.displayName||"Context")+".Provider";case A:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case R:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}function ae(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function re(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ce(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ye(e){var n=ce(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,y=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(E){a=""+E,y.call(this,E)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function we(e){e._valueTracker||(e._valueTracker=ye(e))}function ke(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=ce(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function ve(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ce(e,n){var s=n.checked;return j({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Te(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=re(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function je(e,n){n=n.checked,n!=null&&_(e,"checked",n,!1)}function Ye(e,n){je(e,n);var s=re(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?gt(e,n.type,s):n.hasOwnProperty("defaultValue")&&gt(e,n.type,re(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Tt(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function gt(e,n,s){(n!=="number"||ve(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var xt=Array.isArray;function _t(e,n,s,a){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&a&&(e[s].defaultSelected=!0)}else{for(s=""+re(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function nn(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return j({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wn(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(xt(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:re(s)}}function _r(e,n){var s=re(n.value),a=re(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Yn(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function rn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function on(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?rn(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xn,Ps=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,f){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,f)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Xn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function sn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fl=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(e){Fl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Qn[n]=Qn[e]})});function Ds(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Qn.hasOwnProperty(e)&&Qn[e]?(""+n).trim():n+"px"}function Ts(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,f=Ds(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,f):e[s]=f}}var Hl=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function go(e,n){if(n){if(Hl[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function xo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yo=null;function vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wo=null,Sn=null,Nn=null;function Os(e){if(e=Uo(e)){if(typeof wo!="function")throw Error(o(280));var n=e.stateNode;n&&(n=ci(n),wo(e.stateNode,e.type,n))}}function As(e){Sn?Nn?Nn.push(e):Nn=[e]:Sn=e}function zs(){if(Sn){var e=Sn,n=Nn;if(Nn=Sn=null,Os(e),n)for(e=0;e<n.length;e++)Os(n[e])}}function $s(e,n){return e(n)}function Ls(){}var So=!1;function Rs(e,n,s){if(So)return e(n,s);So=!0;try{return $s(e,n,s)}finally{So=!1,(Sn!==null||Nn!==null)&&(Ls(),zs())}}function Gn(e,n){var s=e.stateNode;if(s===null)return null;var a=ci(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var No=!1;if(p)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){No=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{No=!1}function Vl(e,n,s,a,f,y,E,F,X){var te=Array.prototype.slice.call(arguments,3);try{n.apply(s,te)}catch(ie){this.onError(ie)}}var qn=!1,Er=null,Cr=!1,ko=null,Bl={onError:function(e){qn=!0,Er=e}};function Wl(e,n,s,a,f,y,E,F,X){qn=!1,Er=null,Vl.apply(Bl,arguments)}function Ul(e,n,s,a,f,y,E,F,X){if(Wl.apply(this,arguments),qn){if(qn){var te=Er;qn=!1,Er=null}else throw Error(o(198));Cr||(Cr=!0,ko=te)}}function Ut(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Io(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _o(e){if(Ut(e)!==e)throw Error(o(188))}function Yl(e){var n=e.alternate;if(!n){if(n=Ut(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var f=s.return;if(f===null)break;var y=f.alternate;if(y===null){if(a=f.return,a!==null){s=a;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===s)return _o(f),e;if(y===a)return _o(f),n;y=y.sibling}throw Error(o(188))}if(s.return!==a.return)s=f,a=y;else{for(var E=!1,F=f.child;F;){if(F===s){E=!0,s=f,a=y;break}if(F===a){E=!0,a=f,s=y;break}F=F.sibling}if(!E){for(F=y.child;F;){if(F===s){E=!0,s=y,a=f;break}if(F===a){E=!0,a=y,s=f;break}F=F.sibling}if(!E)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Fs(e){return e=Yl(e),e!==null?Hs(e):null}function Hs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Hs(e);if(n!==null)return n;e=e.sibling}return null}var Vs=r.unstable_scheduleCallback,Bs=r.unstable_cancelCallback,Xl=r.unstable_shouldYield,Ws=r.unstable_requestPaint,He=r.unstable_now,Ql=r.unstable_getCurrentPriorityLevel,Eo=r.unstable_ImmediatePriority,Us=r.unstable_UserBlockingPriority,jr=r.unstable_NormalPriority,Gl=r.unstable_LowPriority,Ys=r.unstable_IdlePriority,Zn=null,Et=null;function Kl(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Zn,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:Jl,ql=Math.log,Zl=Math.LN2;function Jl(e){return e>>>=0,e===0?32:31-(ql(e)/Zl|0)|0}var Mr=64,br=4194304;function Yt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,f=e.suspendedLanes,y=e.pingedLanes,E=s&268435455;if(E!==0){var F=E&~f;F!==0?a=Yt(F):(y&=E,y!==0&&(a=Yt(y)))}else E=s&~f,E!==0?a=Yt(E):y!==0&&(a=Yt(y));if(a===0)return 0;if(n!==0&&n!==a&&(n&f)===0&&(f=a&-a,y=n&-n,f>=y||f===16&&(y&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-yt(n),f=1<<s,a|=e[s],n&=~f;return a}function Xs(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ea(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,y=e.pendingLanes;0<y;){var E=31-yt(y),F=1<<E,X=f[E];X===-1?((F&s)===0||(F&a)!==0)&&(f[E]=Xs(F,n)):X<=n&&(e.expiredLanes|=F),y&=~F}}function Co(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dr(){var e=Mr;return Mr<<=1,(Mr&4194240)===0&&(Mr=64),e}function jo(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Jn(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-yt(n),e[n]=s}function Qs(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var f=31-yt(s),y=1<<f;n[f]=0,a[f]=-1,e[f]=-1,s&=~y}}function ta(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-yt(s),f=1<<a;f&n|e[a]&n&&(e[a]|=n),s&=~f}}var De=0;function bc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Pc,na,Dc,Tc,Oc,ra=!1,Gs=[],kn=null,In=null,_n=null,Mo=new Map,bo=new Map,En=[],pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ac(e,n){switch(e){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Mo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(n.pointerId)}}function Po(e,n,s,a,f,y){return e===null||e.nativeEvent!==y?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:y,targetContainers:[f]},n!==null&&(n=Uo(n),n!==null&&na(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function hg(e,n,s,a,f){switch(n){case"focusin":return kn=Po(kn,e,n,s,a,f),!0;case"dragenter":return In=Po(In,e,n,s,a,f),!0;case"mouseover":return _n=Po(_n,e,n,s,a,f),!0;case"pointerover":var y=f.pointerId;return Mo.set(y,Po(Mo.get(y)||null,e,n,s,a,f)),!0;case"gotpointercapture":return y=f.pointerId,bo.set(y,Po(bo.get(y)||null,e,n,s,a,f)),!0}return!1}function zc(e){var n=er(e.target);if(n!==null){var s=Ut(n);if(s!==null){if(n=s.tag,n===13){if(n=Io(s),n!==null){e.blockedOn=n,Oc(e.priority,function(){Dc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ks(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=sa(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);yo=a,s.target.dispatchEvent(a),yo=null}else return n=Uo(s),n!==null&&na(n),e.blockedOn=s,!1;n.shift()}return!0}function $c(e,n,s){Ks(e)&&s.delete(n)}function mg(){ra=!1,kn!==null&&Ks(kn)&&(kn=null),In!==null&&Ks(In)&&(In=null),_n!==null&&Ks(_n)&&(_n=null),Mo.forEach($c),bo.forEach($c)}function Do(e,n){e.blockedOn===n&&(e.blockedOn=null,ra||(ra=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mg)))}function To(e){function n(f){return Do(f,e)}if(0<Gs.length){Do(Gs[0],e);for(var s=1;s<Gs.length;s++){var a=Gs[s];a.blockedOn===e&&(a.blockedOn=null)}}for(kn!==null&&Do(kn,e),In!==null&&Do(In,e),_n!==null&&Do(_n,e),Mo.forEach(n),bo.forEach(n),s=0;s<En.length;s++)a=En[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<En.length&&(s=En[0],s.blockedOn===null);)zc(s),s.blockedOn===null&&En.shift()}var Tr=C.ReactCurrentBatchConfig,qs=!0;function gg(e,n,s,a){var f=De,y=Tr.transition;Tr.transition=null;try{De=1,oa(e,n,s,a)}finally{De=f,Tr.transition=y}}function xg(e,n,s,a){var f=De,y=Tr.transition;Tr.transition=null;try{De=4,oa(e,n,s,a)}finally{De=f,Tr.transition=y}}function oa(e,n,s,a){if(qs){var f=sa(e,n,s,a);if(f===null)Na(e,n,a,Zs,s),Ac(e,a);else if(hg(f,e,n,s,a))a.stopPropagation();else if(Ac(e,a),n&4&&-1<pg.indexOf(e)){for(;f!==null;){var y=Uo(f);if(y!==null&&Pc(y),y=sa(e,n,s,a),y===null&&Na(e,n,a,Zs,s),y===f)break;f=y}f!==null&&a.stopPropagation()}else Na(e,n,a,null,s)}}var Zs=null;function sa(e,n,s,a){if(Zs=null,e=vo(a),e=er(e),e!==null)if(n=Ut(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Io(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Zs=e,null}function Lc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ql()){case Eo:return 1;case Us:return 4;case jr:case Gl:return 16;case Ys:return 536870912;default:return 16}default:return 16}}var Cn=null,ia=null,Js=null;function Rc(){if(Js)return Js;var e,n=ia,s=n.length,a,f="value"in Cn?Cn.value:Cn.textContent,y=f.length;for(e=0;e<s&&n[e]===f[e];e++);var E=s-e;for(a=1;a<=E&&n[s-a]===f[y-a];a++);return Js=f.slice(e,1<a?1-a:void 0)}function ei(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function Fc(){return!1}function vt(e){function n(s,a,f,y,E){this._reactName=s,this._targetInst=f,this.type=a,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(s=e[F],this[F]=s?s(y):y[F]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ti:Fc,this.isPropagationStopped=Fc,this}return j(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),n}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=vt(Or),Oo=j({},Or,{view:0,detail:0}),yg=vt(Oo),aa,ua,Ao,ni=j({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ao&&(Ao&&e.type==="mousemove"?(aa=e.screenX-Ao.screenX,ua=e.screenY-Ao.screenY):ua=aa=0,Ao=e),aa)},movementY:function(e){return"movementY"in e?e.movementY:ua}}),Hc=vt(ni),vg=j({},ni,{dataTransfer:0}),wg=vt(vg),Sg=j({},Oo,{relatedTarget:0}),ca=vt(Sg),Ng=j({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),kg=vt(Ng),Ig=j({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_g=vt(Ig),Eg=j({},Or,{data:0}),Vc=vt(Eg),Cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Mg[e])?!!n[e]:!1}function da(){return bg}var Pg=j({},Oo,{key:function(e){if(e.key){var n=Cg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(e){return e.type==="keypress"?ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dg=vt(Pg),Tg=j({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=vt(Tg),Og=j({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),Ag=vt(Og),zg=j({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),$g=vt(zg),Lg=j({},ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rg=vt(Lg),Fg=[9,13,27,32],fa=p&&"CompositionEvent"in window,zo=null;p&&"documentMode"in document&&(zo=document.documentMode);var Hg=p&&"TextEvent"in window&&!zo,Wc=p&&(!fa||zo&&8<zo&&11>=zo),Uc=" ",Yc=!1;function Xc(e,n){switch(e){case"keyup":return Fg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ar=!1;function Vg(e,n){switch(e){case"compositionend":return Qc(n);case"keypress":return n.which!==32?null:(Yc=!0,Uc);case"textInput":return e=n.data,e===Uc&&Yc?null:e;default:return null}}function Bg(e,n){if(Ar)return e==="compositionend"||!fa&&Xc(e,n)?(e=Rc(),Js=ia=Cn=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Wc&&n.locale!=="ko"?null:n.data;default:return null}}var Wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Wg[e.type]:n==="textarea"}function Kc(e,n,s,a){As(a),n=li(n,"onChange"),0<n.length&&(s=new la("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var $o=null,Lo=null;function Ug(e){hd(e,0)}function ri(e){var n=Fr(e);if(ke(n))return e}function Yg(e,n){if(e==="change")return n}var qc=!1;if(p){var pa;if(p){var ha="oninput"in document;if(!ha){var Zc=document.createElement("div");Zc.setAttribute("oninput","return;"),ha=typeof Zc.oninput=="function"}pa=ha}else pa=!1;qc=pa&&(!document.documentMode||9<document.documentMode)}function Jc(){$o&&($o.detachEvent("onpropertychange",ed),Lo=$o=null)}function ed(e){if(e.propertyName==="value"&&ri(Lo)){var n=[];Kc(n,Lo,e,vo(e)),Rs(Ug,n)}}function Xg(e,n,s){e==="focusin"?(Jc(),$o=n,Lo=s,$o.attachEvent("onpropertychange",ed)):e==="focusout"&&Jc()}function Qg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ri(Lo)}function Gg(e,n){if(e==="click")return ri(n)}function Kg(e,n){if(e==="input"||e==="change")return ri(n)}function qg(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ot=typeof Object.is=="function"?Object.is:qg;function Ro(e,n){if(Ot(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var f=s[a];if(!h.call(n,f)||!Ot(e[f],n[f]))return!1}return!0}function td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,n){var s=td(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=td(s)}}function rd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?rd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function od(){for(var e=window,n=ve();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ve(e.document)}return n}function ma(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Zg(e){var n=od(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&rd(s.ownerDocument.documentElement,s)){if(a!==null&&ma(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var f=s.textContent.length,y=Math.min(a.start,f);a=a.end===void 0?y:Math.min(a.end,f),!e.extend&&y>a&&(f=a,a=y,y=f),f=nd(s,y);var E=nd(s,a);f&&E&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==E.node||e.focusOffset!==E.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),e.removeAllRanges(),y>a?(e.addRange(n),e.extend(E.node,E.offset)):(n.setEnd(E.node,E.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jg=p&&"documentMode"in document&&11>=document.documentMode,zr=null,ga=null,Fo=null,xa=!1;function sd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xa||zr==null||zr!==ve(a)||(a=zr,"selectionStart"in a&&ma(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Fo&&Ro(Fo,a)||(Fo=a,a=li(ga,"onSelect"),0<a.length&&(n=new la("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=zr)))}function oi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var $r={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionend:oi("Transition","TransitionEnd")},ya={},id={};p&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function si(e){if(ya[e])return ya[e];if(!$r[e])return e;var n=$r[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in id)return ya[e]=n[s];return e}var ld=si("animationend"),ad=si("animationiteration"),ud=si("animationstart"),cd=si("transitionend"),dd=new Map,fd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,n){dd.set(e,n),u(n,[e])}for(var va=0;va<fd.length;va++){var wa=fd[va],e0=wa.toLowerCase(),t0=wa[0].toUpperCase()+wa.slice(1);jn(e0,"on"+t0)}jn(ld,"onAnimationEnd"),jn(ad,"onAnimationIteration"),jn(ud,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(cd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function pd(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,Ul(a,n,void 0,e),e.currentTarget=null}function hd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],f=a.event;a=a.listeners;e:{var y=void 0;if(n)for(var E=a.length-1;0<=E;E--){var F=a[E],X=F.instance,te=F.currentTarget;if(F=F.listener,X!==y&&f.isPropagationStopped())break e;pd(f,F,te),y=X}else for(E=0;E<a.length;E++){if(F=a[E],X=F.instance,te=F.currentTarget,F=F.listener,X!==y&&f.isPropagationStopped())break e;pd(f,F,te),y=X}}}if(Cr)throw e=ko,Cr=!1,ko=null,e}function ze(e,n){var s=n[ja];s===void 0&&(s=n[ja]=new Set);var a=e+"__bubble";s.has(a)||(md(n,e,2,!1),s.add(a))}function Sa(e,n,s){var a=0;n&&(a|=4),md(s,e,a,n)}var ii="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[ii]){e[ii]=!0,i.forEach(function(s){s!=="selectionchange"&&(n0.has(s)||Sa(s,!1,e),Sa(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ii]||(n[ii]=!0,Sa("selectionchange",!1,n))}}function md(e,n,s,a){switch(Lc(n)){case 1:var f=gg;break;case 4:f=xg;break;default:f=oa}s=f.bind(null,n,s,e),f=void 0,!No||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function Na(e,n,s,a,f){var y=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var E=a.tag;if(E===3||E===4){var F=a.stateNode.containerInfo;if(F===f||F.nodeType===8&&F.parentNode===f)break;if(E===4)for(E=a.return;E!==null;){var X=E.tag;if((X===3||X===4)&&(X=E.stateNode.containerInfo,X===f||X.nodeType===8&&X.parentNode===f))return;E=E.return}for(;F!==null;){if(E=er(F),E===null)return;if(X=E.tag,X===5||X===6){a=y=E;continue e}F=F.parentNode}}a=a.return}Rs(function(){var te=y,ie=vo(s),le=[];e:{var se=dd.get(e);if(se!==void 0){var fe=la,he=e;switch(e){case"keypress":if(ei(s)===0)break e;case"keydown":case"keyup":fe=Dg;break;case"focusin":he="focus",fe=ca;break;case"focusout":he="blur",fe=ca;break;case"beforeblur":case"afterblur":fe=ca;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Ag;break;case ld:case ad:case ud:fe=kg;break;case cd:fe=$g;break;case"scroll":fe=yg;break;case"wheel":fe=Rg;break;case"copy":case"cut":case"paste":fe=_g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Bc}var me=(n&4)!==0,Ue=!me&&e==="scroll",Z=me?se!==null?se+"Capture":null:se;me=[];for(var G=te,J;G!==null;){J=G;var ue=J.stateNode;if(J.tag===5&&ue!==null&&(J=ue,Z!==null&&(ue=Gn(G,Z),ue!=null&&me.push(Bo(G,ue,J)))),Ue)break;G=G.return}0<me.length&&(se=new fe(se,he,null,s,ie),le.push({event:se,listeners:me}))}}if((n&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",se&&s!==yo&&(he=s.relatedTarget||s.fromElement)&&(er(he)||he[ln]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(he=s.relatedTarget||s.toElement,fe=te,he=he?er(he):null,he!==null&&(Ue=Ut(he),he!==Ue||he.tag!==5&&he.tag!==6)&&(he=null)):(fe=null,he=te),fe!==he)){if(me=Hc,ue="onMouseLeave",Z="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(me=Bc,ue="onPointerLeave",Z="onPointerEnter",G="pointer"),Ue=fe==null?se:Fr(fe),J=he==null?se:Fr(he),se=new me(ue,G+"leave",fe,s,ie),se.target=Ue,se.relatedTarget=J,ue=null,er(ie)===te&&(me=new me(Z,G+"enter",he,s,ie),me.target=J,me.relatedTarget=Ue,ue=me),Ue=ue,fe&&he)t:{for(me=fe,Z=he,G=0,J=me;J;J=Lr(J))G++;for(J=0,ue=Z;ue;ue=Lr(ue))J++;for(;0<G-J;)me=Lr(me),G--;for(;0<J-G;)Z=Lr(Z),J--;for(;G--;){if(me===Z||Z!==null&&me===Z.alternate)break t;me=Lr(me),Z=Lr(Z)}me=null}else me=null;fe!==null&&gd(le,se,fe,me,!1),he!==null&&Ue!==null&&gd(le,Ue,he,me,!0)}}e:{if(se=te?Fr(te):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var ge=Yg;else if(Gc(se))if(qc)ge=Kg;else{ge=Qg;var Se=Xg}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(ge=Gg);if(ge&&(ge=ge(e,te))){Kc(le,ge,s,ie);break e}Se&&Se(e,se,te),e==="focusout"&&(Se=se._wrapperState)&&Se.controlled&&se.type==="number"&&gt(se,"number",se.value)}switch(Se=te?Fr(te):window,e){case"focusin":(Gc(Se)||Se.contentEditable==="true")&&(zr=Se,ga=te,Fo=null);break;case"focusout":Fo=ga=zr=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,sd(le,s,ie);break;case"selectionchange":if(Jg)break;case"keydown":case"keyup":sd(le,s,ie)}var Ne;if(fa)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ar?Xc(e,s)&&(Ie="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ie="onCompositionStart");Ie&&(Wc&&s.locale!=="ko"&&(Ar||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ar&&(Ne=Rc()):(Cn=ie,ia="value"in Cn?Cn.value:Cn.textContent,Ar=!0)),Se=li(te,Ie),0<Se.length&&(Ie=new Vc(Ie,e,null,s,ie),le.push({event:Ie,listeners:Se}),Ne?Ie.data=Ne:(Ne=Qc(s),Ne!==null&&(Ie.data=Ne)))),(Ne=Hg?Vg(e,s):Bg(e,s))&&(te=li(te,"onBeforeInput"),0<te.length&&(ie=new Vc("onBeforeInput","beforeinput",null,s,ie),le.push({event:ie,listeners:te}),ie.data=Ne))}hd(le,n)})}function Bo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function li(e,n){for(var s=n+"Capture",a=[];e!==null;){var f=e,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Gn(e,s),y!=null&&a.unshift(Bo(e,y,f)),y=Gn(e,n),y!=null&&a.push(Bo(e,y,f))),e=e.return}return a}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gd(e,n,s,a,f){for(var y=n._reactName,E=[];s!==null&&s!==a;){var F=s,X=F.alternate,te=F.stateNode;if(X!==null&&X===a)break;F.tag===5&&te!==null&&(F=te,f?(X=Gn(s,y),X!=null&&E.unshift(Bo(s,X,F))):f||(X=Gn(s,y),X!=null&&E.push(Bo(s,X,F)))),s=s.return}E.length!==0&&e.push({event:n,listeners:E})}var r0=/\r\n?/g,o0=/\u0000|\uFFFD/g;function xd(e){return(typeof e=="string"?e:""+e).replace(r0,`
`).replace(o0,"")}function ai(e,n,s){if(n=xd(n),xd(e)!==n&&s)throw Error(o(425))}function ui(){}var ka=null,Ia=null;function _a(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,s0=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(e){return yd.resolve(null).then(e).catch(l0)}:Ea;function l0(e){setTimeout(function(){throw e})}function Ca(e,n){var s=n,a=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(a===0){e.removeChild(f),To(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=f}while(s);To(n)}function Mn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function vd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Rr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Rr,Wo="__reactProps$"+Rr,ln="__reactContainer$"+Rr,ja="__reactEvents$"+Rr,a0="__reactListeners$"+Rr,u0="__reactHandles$"+Rr;function er(e){var n=e[Xt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ln]||s[Xt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=vd(e);e!==null;){if(s=e[Xt])return s;e=vd(e)}return n}e=s,s=e.parentNode}return null}function Uo(e){return e=e[Xt]||e[ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function ci(e){return e[Wo]||null}var Ma=[],Hr=-1;function bn(e){return{current:e}}function $e(e){0>Hr||(e.current=Ma[Hr],Ma[Hr]=null,Hr--)}function Oe(e,n){Hr++,Ma[Hr]=e.current,e.current=n}var Pn={},rt=bn(Pn),ut=bn(!1),tr=Pn;function Vr(e,n){var s=e.type.contextTypes;if(!s)return Pn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in s)f[y]=n[y];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=f),f}function ct(e){return e=e.childContextTypes,e!=null}function di(){$e(ut),$e(rt)}function wd(e,n,s){if(rt.current!==Pn)throw Error(o(168));Oe(rt,n),Oe(ut,s)}function Sd(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var f in a)if(!(f in n))throw Error(o(108,ae(e)||"Unknown",f));return j({},s,a)}function fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pn,tr=rt.current,Oe(rt,e),Oe(ut,ut.current),!0}function Nd(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=Sd(e,n,tr),a.__reactInternalMemoizedMergedChildContext=e,$e(ut),$e(rt),Oe(rt,e)):$e(ut),Oe(ut,s)}var an=null,pi=!1,ba=!1;function kd(e){an===null?an=[e]:an.push(e)}function c0(e){pi=!0,kd(e)}function Dn(){if(!ba&&an!==null){ba=!0;var e=0,n=De;try{var s=an;for(De=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}an=null,pi=!1}catch(f){throw an!==null&&(an=an.slice(e+1)),Vs(Eo,Dn),f}finally{De=n,ba=!1}}return null}var Br=[],Wr=0,hi=null,mi=0,Ct=[],jt=0,nr=null,un=1,cn="";function rr(e,n){Br[Wr++]=mi,Br[Wr++]=hi,hi=e,mi=n}function Id(e,n,s){Ct[jt++]=un,Ct[jt++]=cn,Ct[jt++]=nr,nr=e;var a=un;e=cn;var f=32-yt(a)-1;a&=~(1<<f),s+=1;var y=32-yt(n)+f;if(30<y){var E=f-f%5;y=(a&(1<<E)-1).toString(32),a>>=E,f-=E,un=1<<32-yt(n)+f|s<<f|a,cn=y+e}else un=1<<y|s<<f|a,cn=e}function Pa(e){e.return!==null&&(rr(e,1),Id(e,1,0))}function Da(e){for(;e===hi;)hi=Br[--Wr],Br[Wr]=null,mi=Br[--Wr],Br[Wr]=null;for(;e===nr;)nr=Ct[--jt],Ct[jt]=null,cn=Ct[--jt],Ct[jt]=null,un=Ct[--jt],Ct[jt]=null}var wt=null,St=null,Le=!1,At=null;function _d(e,n){var s=Dt(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Ed(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,wt=e,St=Mn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,wt=e,St=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=nr!==null?{id:un,overflow:cn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Dt(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,wt=e,St=null,!0):!1;default:return!1}}function Ta(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Oa(e){if(Le){var n=St;if(n){var s=n;if(!Ed(e,n)){if(Ta(e))throw Error(o(418));n=Mn(s.nextSibling);var a=wt;n&&Ed(e,n)?_d(a,s):(e.flags=e.flags&-4097|2,Le=!1,wt=e)}}else{if(Ta(e))throw Error(o(418));e.flags=e.flags&-4097|2,Le=!1,wt=e}}}function Cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function gi(e){if(e!==wt)return!1;if(!Le)return Cd(e),Le=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!_a(e.type,e.memoizedProps)),n&&(n=St)){if(Ta(e))throw jd(),Error(o(418));for(;n;)_d(e,n),n=Mn(n.nextSibling)}if(Cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){St=Mn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}St=null}}else St=wt?Mn(e.stateNode.nextSibling):null;return!0}function jd(){for(var e=St;e;)e=Mn(e.nextSibling)}function Ur(){St=wt=null,Le=!1}function Aa(e){At===null?At=[e]:At.push(e)}var d0=C.ReactCurrentBatchConfig;function Yo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var f=a,y=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===y?n.ref:(n=function(E){var F=f.refs;E===null?delete F[y]:F[y]=E},n._stringRef=y,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function xi(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Md(e){var n=e._init;return n(e._payload)}function bd(e){function n(Z,G){if(e){var J=Z.deletions;J===null?(Z.deletions=[G],Z.flags|=16):J.push(G)}}function s(Z,G){if(!e)return null;for(;G!==null;)n(Z,G),G=G.sibling;return null}function a(Z,G){for(Z=new Map;G!==null;)G.key!==null?Z.set(G.key,G):Z.set(G.index,G),G=G.sibling;return Z}function f(Z,G){return Z=Fn(Z,G),Z.index=0,Z.sibling=null,Z}function y(Z,G,J){return Z.index=J,e?(J=Z.alternate,J!==null?(J=J.index,J<G?(Z.flags|=2,G):J):(Z.flags|=2,G)):(Z.flags|=1048576,G)}function E(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function F(Z,G,J,ue){return G===null||G.tag!==6?(G=Eu(J,Z.mode,ue),G.return=Z,G):(G=f(G,J),G.return=Z,G)}function X(Z,G,J,ue){var ge=J.type;return ge===V?ie(Z,G,J.props.children,ue,J.key):G!==null&&(G.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&Md(ge)===G.type)?(ue=f(G,J.props),ue.ref=Yo(Z,G,J),ue.return=Z,ue):(ue=Hi(J.type,J.key,J.props,null,Z.mode,ue),ue.ref=Yo(Z,G,J),ue.return=Z,ue)}function te(Z,G,J,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=Cu(J,Z.mode,ue),G.return=Z,G):(G=f(G,J.children||[]),G.return=Z,G)}function ie(Z,G,J,ue,ge){return G===null||G.tag!==7?(G=dr(J,Z.mode,ue,ge),G.return=Z,G):(G=f(G,J),G.return=Z,G)}function le(Z,G,J){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Eu(""+G,Z.mode,J),G.return=Z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case W:return J=Hi(G.type,G.key,G.props,null,Z.mode,J),J.ref=Yo(Z,null,G),J.return=Z,J;case T:return G=Cu(G,Z.mode,J),G.return=Z,G;case R:var ue=G._init;return le(Z,ue(G._payload),J)}if(xt(G)||$(G))return G=dr(G,Z.mode,J,null),G.return=Z,G;xi(Z,G)}return null}function se(Z,G,J,ue){var ge=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return ge!==null?null:F(Z,G,""+J,ue);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case W:return J.key===ge?X(Z,G,J,ue):null;case T:return J.key===ge?te(Z,G,J,ue):null;case R:return ge=J._init,se(Z,G,ge(J._payload),ue)}if(xt(J)||$(J))return ge!==null?null:ie(Z,G,J,ue,null);xi(Z,J)}return null}function fe(Z,G,J,ue,ge){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Z=Z.get(J)||null,F(G,Z,""+ue,ge);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case W:return Z=Z.get(ue.key===null?J:ue.key)||null,X(G,Z,ue,ge);case T:return Z=Z.get(ue.key===null?J:ue.key)||null,te(G,Z,ue,ge);case R:var Se=ue._init;return fe(Z,G,J,Se(ue._payload),ge)}if(xt(ue)||$(ue))return Z=Z.get(J)||null,ie(G,Z,ue,ge,null);xi(G,ue)}return null}function he(Z,G,J,ue){for(var ge=null,Se=null,Ne=G,Ie=G=0,Je=null;Ne!==null&&Ie<J.length;Ie++){Ne.index>Ie?(Je=Ne,Ne=null):Je=Ne.sibling;var Pe=se(Z,Ne,J[Ie],ue);if(Pe===null){Ne===null&&(Ne=Je);break}e&&Ne&&Pe.alternate===null&&n(Z,Ne),G=y(Pe,G,Ie),Se===null?ge=Pe:Se.sibling=Pe,Se=Pe,Ne=Je}if(Ie===J.length)return s(Z,Ne),Le&&rr(Z,Ie),ge;if(Ne===null){for(;Ie<J.length;Ie++)Ne=le(Z,J[Ie],ue),Ne!==null&&(G=y(Ne,G,Ie),Se===null?ge=Ne:Se.sibling=Ne,Se=Ne);return Le&&rr(Z,Ie),ge}for(Ne=a(Z,Ne);Ie<J.length;Ie++)Je=fe(Ne,Z,Ie,J[Ie],ue),Je!==null&&(e&&Je.alternate!==null&&Ne.delete(Je.key===null?Ie:Je.key),G=y(Je,G,Ie),Se===null?ge=Je:Se.sibling=Je,Se=Je);return e&&Ne.forEach(function(Hn){return n(Z,Hn)}),Le&&rr(Z,Ie),ge}function me(Z,G,J,ue){var ge=$(J);if(typeof ge!="function")throw Error(o(150));if(J=ge.call(J),J==null)throw Error(o(151));for(var Se=ge=null,Ne=G,Ie=G=0,Je=null,Pe=J.next();Ne!==null&&!Pe.done;Ie++,Pe=J.next()){Ne.index>Ie?(Je=Ne,Ne=null):Je=Ne.sibling;var Hn=se(Z,Ne,Pe.value,ue);if(Hn===null){Ne===null&&(Ne=Je);break}e&&Ne&&Hn.alternate===null&&n(Z,Ne),G=y(Hn,G,Ie),Se===null?ge=Hn:Se.sibling=Hn,Se=Hn,Ne=Je}if(Pe.done)return s(Z,Ne),Le&&rr(Z,Ie),ge;if(Ne===null){for(;!Pe.done;Ie++,Pe=J.next())Pe=le(Z,Pe.value,ue),Pe!==null&&(G=y(Pe,G,Ie),Se===null?ge=Pe:Se.sibling=Pe,Se=Pe);return Le&&rr(Z,Ie),ge}for(Ne=a(Z,Ne);!Pe.done;Ie++,Pe=J.next())Pe=fe(Ne,Z,Ie,Pe.value,ue),Pe!==null&&(e&&Pe.alternate!==null&&Ne.delete(Pe.key===null?Ie:Pe.key),G=y(Pe,G,Ie),Se===null?ge=Pe:Se.sibling=Pe,Se=Pe);return e&&Ne.forEach(function(W0){return n(Z,W0)}),Le&&rr(Z,Ie),ge}function Ue(Z,G,J,ue){if(typeof J=="object"&&J!==null&&J.type===V&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case W:e:{for(var ge=J.key,Se=G;Se!==null;){if(Se.key===ge){if(ge=J.type,ge===V){if(Se.tag===7){s(Z,Se.sibling),G=f(Se,J.props.children),G.return=Z,Z=G;break e}}else if(Se.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&Md(ge)===Se.type){s(Z,Se.sibling),G=f(Se,J.props),G.ref=Yo(Z,Se,J),G.return=Z,Z=G;break e}s(Z,Se);break}else n(Z,Se);Se=Se.sibling}J.type===V?(G=dr(J.props.children,Z.mode,ue,J.key),G.return=Z,Z=G):(ue=Hi(J.type,J.key,J.props,null,Z.mode,ue),ue.ref=Yo(Z,G,J),ue.return=Z,Z=ue)}return E(Z);case T:e:{for(Se=J.key;G!==null;){if(G.key===Se)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){s(Z,G.sibling),G=f(G,J.children||[]),G.return=Z,Z=G;break e}else{s(Z,G);break}else n(Z,G);G=G.sibling}G=Cu(J,Z.mode,ue),G.return=Z,Z=G}return E(Z);case R:return Se=J._init,Ue(Z,G,Se(J._payload),ue)}if(xt(J))return he(Z,G,J,ue);if($(J))return me(Z,G,J,ue);xi(Z,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,G!==null&&G.tag===6?(s(Z,G.sibling),G=f(G,J),G.return=Z,Z=G):(s(Z,G),G=Eu(J,Z.mode,ue),G.return=Z,Z=G),E(Z)):s(Z,G)}return Ue}var Yr=bd(!0),Pd=bd(!1),yi=bn(null),vi=null,Xr=null,za=null;function $a(){za=Xr=vi=null}function La(e){var n=yi.current;$e(yi),e._currentValue=n}function Ra(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function Qr(e,n){vi=e,za=Xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(dt=!0),e.firstContext=null)}function Mt(e){var n=e._currentValue;if(za!==e)if(e={context:e,memoizedValue:n,next:null},Xr===null){if(vi===null)throw Error(o(308));Xr=e,vi.dependencies={lanes:0,firstContext:e}}else Xr=Xr.next=e;return n}var or=null;function Fa(e){or===null?or=[e]:or.push(e)}function Dd(e,n,s,a){var f=n.interleaved;return f===null?(s.next=s,Fa(n)):(s.next=f.next,f.next=s),n.interleaved=s,dn(e,a)}function dn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Tn=!1;function Ha(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Td(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function On(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(be&2)!==0){var f=a.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),a.pending=n,dn(e,s)}return f=a.interleaved,f===null?(n.next=n,Fa(a)):(n.next=f.next,f.next=n),a.interleaved=n,dn(e,s)}function wi(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,ta(e,s)}}function Od(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var f=null,y=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};y===null?f=y=E:y=y.next=E,s=s.next}while(s!==null);y===null?f=y=n:y=y.next=n}else f=y=n;s={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Si(e,n,s,a){var f=e.updateQueue;Tn=!1;var y=f.firstBaseUpdate,E=f.lastBaseUpdate,F=f.shared.pending;if(F!==null){f.shared.pending=null;var X=F,te=X.next;X.next=null,E===null?y=te:E.next=te,E=X;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,F=ie.lastBaseUpdate,F!==E&&(F===null?ie.firstBaseUpdate=te:F.next=te,ie.lastBaseUpdate=X))}if(y!==null){var le=f.baseState;E=0,ie=te=X=null,F=y;do{var se=F.lane,fe=F.eventTime;if((a&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var he=e,me=F;switch(se=n,fe=s,me.tag){case 1:if(he=me.payload,typeof he=="function"){le=he.call(fe,le,se);break e}le=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=me.payload,se=typeof he=="function"?he.call(fe,le,se):he,se==null)break e;le=j({},le,se);break e;case 2:Tn=!0}}F.callback!==null&&F.lane!==0&&(e.flags|=64,se=f.effects,se===null?f.effects=[F]:se.push(F))}else fe={eventTime:fe,lane:se,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ie===null?(te=ie=fe,X=le):ie=ie.next=fe,E|=se;if(F=F.next,F===null){if(F=f.shared.pending,F===null)break;se=F,F=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(ie===null&&(X=le),f.baseState=X,f.firstBaseUpdate=te,f.lastBaseUpdate=ie,n=f.shared.interleaved,n!==null){f=n;do E|=f.lane,f=f.next;while(f!==n)}else y===null&&(f.shared.lanes=0);lr|=E,e.lanes=E,e.memoizedState=le}}function Ad(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],f=a.callback;if(f!==null){if(a.callback=null,a=s,typeof f!="function")throw Error(o(191,f));f.call(a)}}}var Xo={},Qt=bn(Xo),Qo=bn(Xo),Go=bn(Xo);function sr(e){if(e===Xo)throw Error(o(174));return e}function Va(e,n){switch(Oe(Go,n),Oe(Qo,e),Oe(Qt,Xo),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:on(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=on(n,e)}$e(Qt),Oe(Qt,n)}function Gr(){$e(Qt),$e(Qo),$e(Go)}function zd(e){sr(Go.current);var n=sr(Qt.current),s=on(n,e.type);n!==s&&(Oe(Qo,e),Oe(Qt,s))}function Ba(e){Qo.current===e&&($e(Qt),$e(Qo))}var Ve=bn(0);function Ni(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Wa=[];function Ua(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var ki=C.ReactCurrentDispatcher,Ya=C.ReactCurrentBatchConfig,ir=0,Be=null,Ge=null,qe=null,Ii=!1,Ko=!1,qo=0,f0=0;function ot(){throw Error(o(321))}function Xa(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Ot(e[s],n[s]))return!1;return!0}function Qa(e,n,s,a,f,y){if(ir=y,Be=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ki.current=e===null||e.memoizedState===null?g0:x0,e=s(a,f),Ko){y=0;do{if(Ko=!1,qo=0,25<=y)throw Error(o(301));y+=1,qe=Ge=null,n.updateQueue=null,ki.current=y0,e=s(a,f)}while(Ko)}if(ki.current=Ci,n=Ge!==null&&Ge.next!==null,ir=0,qe=Ge=Be=null,Ii=!1,n)throw Error(o(300));return e}function Ga(){var e=qo!==0;return qo=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Be.memoizedState=qe=e:qe=qe.next=e,qe}function bt(){if(Ge===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var n=qe===null?Be.memoizedState:qe.next;if(n!==null)qe=n,Ge=e;else{if(e===null)throw Error(o(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},qe===null?Be.memoizedState=qe=e:qe=qe.next=e}return qe}function Zo(e,n){return typeof n=="function"?n(e):n}function Ka(e){var n=bt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Ge,f=a.baseQueue,y=s.pending;if(y!==null){if(f!==null){var E=f.next;f.next=y.next,y.next=E}a.baseQueue=f=y,s.pending=null}if(f!==null){y=f.next,a=a.baseState;var F=E=null,X=null,te=y;do{var ie=te.lane;if((ir&ie)===ie)X!==null&&(X=X.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),a=te.hasEagerState?te.eagerState:e(a,te.action);else{var le={lane:ie,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};X===null?(F=X=le,E=a):X=X.next=le,Be.lanes|=ie,lr|=ie}te=te.next}while(te!==null&&te!==y);X===null?E=a:X.next=F,Ot(a,n.memoizedState)||(dt=!0),n.memoizedState=a,n.baseState=E,n.baseQueue=X,s.lastRenderedState=a}if(e=s.interleaved,e!==null){f=e;do y=f.lane,Be.lanes|=y,lr|=y,f=f.next;while(f!==e)}else f===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function qa(e){var n=bt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,f=s.pending,y=n.memoizedState;if(f!==null){s.pending=null;var E=f=f.next;do y=e(y,E.action),E=E.next;while(E!==f);Ot(y,n.memoizedState)||(dt=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),s.lastRenderedState=y}return[y,a]}function $d(){}function Ld(e,n){var s=Be,a=bt(),f=n(),y=!Ot(a.memoizedState,f);if(y&&(a.memoizedState=f,dt=!0),a=a.queue,Za(Hd.bind(null,s,a,e),[e]),a.getSnapshot!==n||y||qe!==null&&qe.memoizedState.tag&1){if(s.flags|=2048,Jo(9,Fd.bind(null,s,a,f,n),void 0,null),Ze===null)throw Error(o(349));(ir&30)!==0||Rd(s,n,f)}return f}function Rd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Fd(e,n,s,a){n.value=s,n.getSnapshot=a,Vd(n)&&Bd(e)}function Hd(e,n,s){return s(function(){Vd(n)&&Bd(e)})}function Vd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Ot(e,s)}catch{return!0}}function Bd(e){var n=dn(e,1);n!==null&&Rt(n,e,1,-1)}function Wd(e){var n=Gt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e},n.queue=e,e=e.dispatch=m0.bind(null,Be,e),[n.memoizedState,e]}function Jo(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function Ud(){return bt().memoizedState}function _i(e,n,s,a){var f=Gt();Be.flags|=e,f.memoizedState=Jo(1|n,s,void 0,a===void 0?null:a)}function Ei(e,n,s,a){var f=bt();a=a===void 0?null:a;var y=void 0;if(Ge!==null){var E=Ge.memoizedState;if(y=E.destroy,a!==null&&Xa(a,E.deps)){f.memoizedState=Jo(n,s,y,a);return}}Be.flags|=e,f.memoizedState=Jo(1|n,s,y,a)}function Yd(e,n){return _i(8390656,8,e,n)}function Za(e,n){return Ei(2048,8,e,n)}function Xd(e,n){return Ei(4,2,e,n)}function Qd(e,n){return Ei(4,4,e,n)}function Gd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Kd(e,n,s){return s=s!=null?s.concat([e]):null,Ei(4,4,Gd.bind(null,n,e),s)}function Ja(){}function qd(e,n){var s=bt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Xa(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function Zd(e,n){var s=bt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Xa(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function Jd(e,n,s){return(ir&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s):(Ot(s,n)||(s=Dr(),Be.lanes|=s,lr|=s,e.baseState=!0),n)}function p0(e,n){var s=De;De=s!==0&&4>s?s:4,e(!0);var a=Ya.transition;Ya.transition={};try{e(!1),n()}finally{De=s,Ya.transition=a}}function ef(){return bt().memoizedState}function h0(e,n,s){var a=Ln(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},tf(e))nf(n,s);else if(s=Dd(e,n,s,a),s!==null){var f=at();Rt(s,e,a,f),rf(s,n,a)}}function m0(e,n,s){var a=Ln(e),f={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(tf(e))nf(n,f);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var E=n.lastRenderedState,F=y(E,s);if(f.hasEagerState=!0,f.eagerState=F,Ot(F,E)){var X=n.interleaved;X===null?(f.next=f,Fa(n)):(f.next=X.next,X.next=f),n.interleaved=f;return}}catch{}finally{}s=Dd(e,n,f,a),s!==null&&(f=at(),Rt(s,e,a,f),rf(s,n,a))}}function tf(e){var n=e.alternate;return e===Be||n!==null&&n===Be}function nf(e,n){Ko=Ii=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function rf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,ta(e,s)}}var Ci={readContext:Mt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},g0={readContext:Mt,useCallback:function(e,n){return Gt().memoizedState=[e,n===void 0?null:n],e},useContext:Mt,useEffect:Yd,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,_i(4194308,4,Gd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return _i(4194308,4,e,n)},useInsertionEffect:function(e,n){return _i(4,2,e,n)},useMemo:function(e,n){var s=Gt();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=Gt();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=h0.bind(null,Be,e),[a.memoizedState,e]},useRef:function(e){var n=Gt();return e={current:e},n.memoizedState=e},useState:Wd,useDebugValue:Ja,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=Wd(!1),n=e[0];return e=p0.bind(null,e[1]),Gt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Be,f=Gt();if(Le){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Ze===null)throw Error(o(349));(ir&30)!==0||Rd(a,n,s)}f.memoizedState=s;var y={value:s,getSnapshot:n};return f.queue=y,Yd(Hd.bind(null,a,y,e),[e]),a.flags|=2048,Jo(9,Fd.bind(null,a,y,s,n),void 0,null),s},useId:function(){var e=Gt(),n=Ze.identifierPrefix;if(Le){var s=cn,a=un;s=(a&~(1<<32-yt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=qo++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=f0++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},x0={readContext:Mt,useCallback:qd,useContext:Mt,useEffect:Za,useImperativeHandle:Kd,useInsertionEffect:Xd,useLayoutEffect:Qd,useMemo:Zd,useReducer:Ka,useRef:Ud,useState:function(){return Ka(Zo)},useDebugValue:Ja,useDeferredValue:function(e){var n=bt();return Jd(n,Ge.memoizedState,e)},useTransition:function(){var e=Ka(Zo)[0],n=bt().memoizedState;return[e,n]},useMutableSource:$d,useSyncExternalStore:Ld,useId:ef,unstable_isNewReconciler:!1},y0={readContext:Mt,useCallback:qd,useContext:Mt,useEffect:Za,useImperativeHandle:Kd,useInsertionEffect:Xd,useLayoutEffect:Qd,useMemo:Zd,useReducer:qa,useRef:Ud,useState:function(){return qa(Zo)},useDebugValue:Ja,useDeferredValue:function(e){var n=bt();return Ge===null?n.memoizedState=e:Jd(n,Ge.memoizedState,e)},useTransition:function(){var e=qa(Zo)[0],n=bt().memoizedState;return[e,n]},useMutableSource:$d,useSyncExternalStore:Ld,useId:ef,unstable_isNewReconciler:!1};function zt(e,n){if(e&&e.defaultProps){n=j({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function eu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:j({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ji={isMounted:function(e){return(e=e._reactInternals)?Ut(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=at(),f=Ln(e),y=fn(a,f);y.payload=n,s!=null&&(y.callback=s),n=On(e,y,f),n!==null&&(Rt(n,e,f,a),wi(n,e,f))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=at(),f=Ln(e),y=fn(a,f);y.tag=1,y.payload=n,s!=null&&(y.callback=s),n=On(e,y,f),n!==null&&(Rt(n,e,f,a),wi(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=at(),a=Ln(e),f=fn(s,a);f.tag=2,n!=null&&(f.callback=n),n=On(e,f,a),n!==null&&(Rt(n,e,a,s),wi(n,e,a))}};function of(e,n,s,a,f,y,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,y,E):n.prototype&&n.prototype.isPureReactComponent?!Ro(s,a)||!Ro(f,y):!0}function sf(e,n,s){var a=!1,f=Pn,y=n.contextType;return typeof y=="object"&&y!==null?y=Mt(y):(f=ct(n)?tr:rt.current,a=n.contextTypes,y=(a=a!=null)?Vr(e,f):Pn),n=new n(s,y),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ji,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=y),n}function lf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&ji.enqueueReplaceState(n,n.state,null)}function tu(e,n,s,a){var f=e.stateNode;f.props=s,f.state=e.memoizedState,f.refs={},Ha(e);var y=n.contextType;typeof y=="object"&&y!==null?f.context=Mt(y):(y=ct(n)?tr:rt.current,f.context=Vr(e,y)),f.state=e.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(eu(e,n,y,s),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&ji.enqueueReplaceState(f,f.state,null),Si(e,s,f,a),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Kr(e,n){try{var s="",a=n;do s+=ne(a),a=a.return;while(a);var f=s}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:e,source:n,stack:f,digest:null}}function nu(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function ru(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var v0=typeof WeakMap=="function"?WeakMap:Map;function af(e,n,s){s=fn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){Ai||(Ai=!0,yu=a),ru(e,n)},s}function uf(e,n,s){s=fn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var f=n.value;s.payload=function(){return a(f)},s.callback=function(){ru(e,n)}}var y=e.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(s.callback=function(){ru(e,n),typeof a!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var E=n.stack;this.componentDidCatch(n.value,{componentStack:E!==null?E:""})}),s}function cf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new v0;var f=new Set;a.set(n,f)}else f=a.get(n),f===void 0&&(f=new Set,a.set(n,f));f.has(s)||(f.add(s),e=T0.bind(null,e,n,s),n.then(e,e))}function df(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function ff(e,n,s,a,f){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=fn(-1,1),n.tag=2,On(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var w0=C.ReactCurrentOwner,dt=!1;function lt(e,n,s,a){n.child=e===null?Pd(n,null,s,a):Yr(n,e.child,s,a)}function pf(e,n,s,a,f){s=s.render;var y=n.ref;return Qr(n,f),a=Qa(e,n,s,a,y,f),s=Ga(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,pn(e,n,f)):(Le&&s&&Pa(n),n.flags|=1,lt(e,n,a,f),n.child)}function hf(e,n,s,a,f){if(e===null){var y=s.type;return typeof y=="function"&&!_u(y)&&y.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=y,mf(e,n,y,a,f)):(e=Hi(s.type,null,a,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(y=e.child,(e.lanes&f)===0){var E=y.memoizedProps;if(s=s.compare,s=s!==null?s:Ro,s(E,a)&&e.ref===n.ref)return pn(e,n,f)}return n.flags|=1,e=Fn(y,a),e.ref=n.ref,e.return=n,n.child=e}function mf(e,n,s,a,f){if(e!==null){var y=e.memoizedProps;if(Ro(y,a)&&e.ref===n.ref)if(dt=!1,n.pendingProps=a=y,(e.lanes&f)!==0)(e.flags&131072)!==0&&(dt=!0);else return n.lanes=e.lanes,pn(e,n,f)}return ou(e,n,s,a,f)}function gf(e,n,s){var a=n.pendingProps,f=a.children,y=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Zr,Nt),Nt|=s;else{if((s&1073741824)===0)return e=y!==null?y.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Oe(Zr,Nt),Nt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=y!==null?y.baseLanes:s,Oe(Zr,Nt),Nt|=a}else y!==null?(a=y.baseLanes|s,n.memoizedState=null):a=s,Oe(Zr,Nt),Nt|=a;return lt(e,n,f,s),n.child}function xf(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function ou(e,n,s,a,f){var y=ct(s)?tr:rt.current;return y=Vr(n,y),Qr(n,f),s=Qa(e,n,s,a,y,f),a=Ga(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,pn(e,n,f)):(Le&&a&&Pa(n),n.flags|=1,lt(e,n,s,f),n.child)}function yf(e,n,s,a,f){if(ct(s)){var y=!0;fi(n)}else y=!1;if(Qr(n,f),n.stateNode===null)bi(e,n),sf(n,s,a),tu(n,s,a,f),a=!0;else if(e===null){var E=n.stateNode,F=n.memoizedProps;E.props=F;var X=E.context,te=s.contextType;typeof te=="object"&&te!==null?te=Mt(te):(te=ct(s)?tr:rt.current,te=Vr(n,te));var ie=s.getDerivedStateFromProps,le=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function";le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(F!==a||X!==te)&&lf(n,E,a,te),Tn=!1;var se=n.memoizedState;E.state=se,Si(n,a,E,f),X=n.memoizedState,F!==a||se!==X||ut.current||Tn?(typeof ie=="function"&&(eu(n,s,ie,a),X=n.memoizedState),(F=Tn||of(n,s,F,a,se,X,te))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(n.flags|=4194308)):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=X),E.props=a,E.state=X,E.context=te,a=F):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{E=n.stateNode,Td(e,n),F=n.memoizedProps,te=n.type===n.elementType?F:zt(n.type,F),E.props=te,le=n.pendingProps,se=E.context,X=s.contextType,typeof X=="object"&&X!==null?X=Mt(X):(X=ct(s)?tr:rt.current,X=Vr(n,X));var fe=s.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(F!==le||se!==X)&&lf(n,E,a,X),Tn=!1,se=n.memoizedState,E.state=se,Si(n,a,E,f);var he=n.memoizedState;F!==le||se!==he||ut.current||Tn?(typeof fe=="function"&&(eu(n,s,fe,a),he=n.memoizedState),(te=Tn||of(n,s,te,a,se,he,X)||!1)?(ie||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(a,he,X),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(a,he,X)),typeof E.componentDidUpdate=="function"&&(n.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof E.componentDidUpdate!="function"||F===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=he),E.props=a,E.state=he,E.context=X,a=te):(typeof E.componentDidUpdate!="function"||F===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),a=!1)}return su(e,n,s,a,y,f)}function su(e,n,s,a,f,y){xf(e,n);var E=(n.flags&128)!==0;if(!a&&!E)return f&&Nd(n,s,!1),pn(e,n,y);a=n.stateNode,w0.current=n;var F=E&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&E?(n.child=Yr(n,e.child,null,y),n.child=Yr(n,null,F,y)):lt(e,n,F,y),n.memoizedState=a.state,f&&Nd(n,s,!0),n.child}function vf(e){var n=e.stateNode;n.pendingContext?wd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&wd(e,n.context,!1),Va(e,n.containerInfo)}function wf(e,n,s,a,f){return Ur(),Aa(f),n.flags|=256,lt(e,n,s,a),n.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sf(e,n,s){var a=n.pendingProps,f=Ve.current,y=!1,E=(n.flags&128)!==0,F;if((F=E)||(F=e!==null&&e.memoizedState===null?!1:(f&2)!==0),F?(y=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Oe(Ve,f&1),e===null)return Oa(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(E=a.children,e=a.fallback,y?(a=n.mode,y=n.child,E={mode:"hidden",children:E},(a&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Vi(E,a,0,null),e=dr(e,a,s,null),y.return=n,e.return=n,y.sibling=e,n.child=y,n.child.memoizedState=lu(s),n.memoizedState=iu,e):au(n,E));if(f=e.memoizedState,f!==null&&(F=f.dehydrated,F!==null))return S0(e,n,E,a,F,f,s);if(y){y=a.fallback,E=n.mode,f=e.child,F=f.sibling;var X={mode:"hidden",children:a.children};return(E&1)===0&&n.child!==f?(a=n.child,a.childLanes=0,a.pendingProps=X,n.deletions=null):(a=Fn(f,X),a.subtreeFlags=f.subtreeFlags&14680064),F!==null?y=Fn(F,y):(y=dr(y,E,s,null),y.flags|=2),y.return=n,a.return=n,a.sibling=y,n.child=a,a=y,y=n.child,E=e.child.memoizedState,E=E===null?lu(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=e.childLanes&~s,n.memoizedState=iu,a}return y=e.child,e=y.sibling,a=Fn(y,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function au(e,n){return n=Vi({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Mi(e,n,s,a){return a!==null&&Aa(a),Yr(n,e.child,null,s),e=au(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function S0(e,n,s,a,f,y,E){if(s)return n.flags&256?(n.flags&=-257,a=nu(Error(o(422))),Mi(e,n,E,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(y=a.fallback,f=n.mode,a=Vi({mode:"visible",children:a.children},f,0,null),y=dr(y,f,E,null),y.flags|=2,a.return=n,y.return=n,a.sibling=y,n.child=a,(n.mode&1)!==0&&Yr(n,e.child,null,E),n.child.memoizedState=lu(E),n.memoizedState=iu,y);if((n.mode&1)===0)return Mi(e,n,E,null);if(f.data==="$!"){if(a=f.nextSibling&&f.nextSibling.dataset,a)var F=a.dgst;return a=F,y=Error(o(419)),a=nu(y,a,void 0),Mi(e,n,E,a)}if(F=(E&e.childLanes)!==0,dt||F){if(a=Ze,a!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(a.suspendedLanes|E))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,dn(e,f),Rt(a,e,f,-1))}return Iu(),a=nu(Error(o(421))),Mi(e,n,E,a)}return f.data==="$?"?(n.flags|=128,n.child=e.child,n=O0.bind(null,e),f._reactRetry=n,null):(e=y.treeContext,St=Mn(f.nextSibling),wt=n,Le=!0,At=null,e!==null&&(Ct[jt++]=un,Ct[jt++]=cn,Ct[jt++]=nr,un=e.id,cn=e.overflow,nr=n),n=au(n,a.children),n.flags|=4096,n)}function Nf(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Ra(e.return,n,s)}function uu(e,n,s,a,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=a,y.tail=s,y.tailMode=f)}function kf(e,n,s){var a=n.pendingProps,f=a.revealOrder,y=a.tail;if(lt(e,n,a.children,s),a=Ve.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nf(e,s,n);else if(e.tag===19)Nf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Oe(Ve,a),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&Ni(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),uu(n,!1,f,s,y);break;case"backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Ni(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}uu(n,!0,s,null,y);break;case"together":uu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function bi(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function pn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),lr|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Fn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Fn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function N0(e,n,s){switch(n.tag){case 3:vf(n),Ur();break;case 5:zd(n);break;case 1:ct(n.type)&&fi(n);break;case 4:Va(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,f=n.memoizedProps.value;Oe(yi,a._currentValue),a._currentValue=f;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Oe(Ve,Ve.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Sf(e,n,s):(Oe(Ve,Ve.current&1),e=pn(e,n,s),e!==null?e.sibling:null);Oe(Ve,Ve.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return kf(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Oe(Ve,Ve.current),a)break;return null;case 22:case 23:return n.lanes=0,gf(e,n,s)}return pn(e,n,s)}var If,cu,_f,Ef;If=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},cu=function(){},_f=function(e,n,s,a){var f=e.memoizedProps;if(f!==a){e=n.stateNode,sr(Qt.current);var y=null;switch(s){case"input":f=Ce(e,f),a=Ce(e,a),y=[];break;case"select":f=j({},f,{value:void 0}),a=j({},a,{value:void 0}),y=[];break;case"textarea":f=nn(e,f),a=nn(e,a),y=[];break;default:typeof f.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ui)}go(s,a);var E;s=null;for(te in f)if(!a.hasOwnProperty(te)&&f.hasOwnProperty(te)&&f[te]!=null)if(te==="style"){var F=f[te];for(E in F)F.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(l.hasOwnProperty(te)?y||(y=[]):(y=y||[]).push(te,null));for(te in a){var X=a[te];if(F=f!=null?f[te]:void 0,a.hasOwnProperty(te)&&X!==F&&(X!=null||F!=null))if(te==="style")if(F){for(E in F)!F.hasOwnProperty(E)||X&&X.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in X)X.hasOwnProperty(E)&&F[E]!==X[E]&&(s||(s={}),s[E]=X[E])}else s||(y||(y=[]),y.push(te,s)),s=X;else te==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,F=F?F.__html:void 0,X!=null&&F!==X&&(y=y||[]).push(te,X)):te==="children"?typeof X!="string"&&typeof X!="number"||(y=y||[]).push(te,""+X):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(l.hasOwnProperty(te)?(X!=null&&te==="onScroll"&&ze("scroll",e),y||F===X||(y=[])):(y=y||[]).push(te,X))}s&&(y=y||[]).push("style",s);var te=y;(n.updateQueue=te)&&(n.flags|=4)}},Ef=function(e,n,s,a){s!==a&&(n.flags|=4)};function es(e,n){if(!Le)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags&14680064,a|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function k0(e,n,s){var a=n.pendingProps;switch(Da(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(n),null;case 1:return ct(n.type)&&di(),st(n),null;case 3:return a=n.stateNode,Gr(),$e(ut),$e(rt),Ua(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(gi(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,At!==null&&(Su(At),At=null))),cu(e,n),st(n),null;case 5:Ba(n);var f=sr(Go.current);if(s=n.type,e!==null&&n.stateNode!=null)_f(e,n,s,a,f),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return st(n),null}if(e=sr(Qt.current),gi(n)){a=n.stateNode,s=n.type;var y=n.memoizedProps;switch(a[Xt]=n,a[Wo]=y,e=(n.mode&1)!==0,s){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(f=0;f<Ho.length;f++)ze(Ho[f],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":Te(a,y),ze("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!y.multiple},ze("invalid",a);break;case"textarea":wn(a,y),ze("invalid",a)}go(s,y),f=null;for(var E in y)if(y.hasOwnProperty(E)){var F=y[E];E==="children"?typeof F=="string"?a.textContent!==F&&(y.suppressHydrationWarning!==!0&&ai(a.textContent,F,e),f=["children",F]):typeof F=="number"&&a.textContent!==""+F&&(y.suppressHydrationWarning!==!0&&ai(a.textContent,F,e),f=["children",""+F]):l.hasOwnProperty(E)&&F!=null&&E==="onScroll"&&ze("scroll",a)}switch(s){case"input":we(a),Tt(a,y,!0);break;case"textarea":we(a),Yn(a);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(a.onclick=ui)}a=f,n.updateQueue=a,a!==null&&(n.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rn(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=E.createElement(s,{is:a.is}):(e=E.createElement(s),s==="select"&&(E=e,a.multiple?E.multiple=!0:a.size&&(E.size=a.size))):e=E.createElementNS(e,s),e[Xt]=n,e[Wo]=a,If(e,n,!1,!1),n.stateNode=e;e:{switch(E=xo(s,a),s){case"dialog":ze("cancel",e),ze("close",e),f=a;break;case"iframe":case"object":case"embed":ze("load",e),f=a;break;case"video":case"audio":for(f=0;f<Ho.length;f++)ze(Ho[f],e);f=a;break;case"source":ze("error",e),f=a;break;case"img":case"image":case"link":ze("error",e),ze("load",e),f=a;break;case"details":ze("toggle",e),f=a;break;case"input":Te(e,a),f=Ce(e,a),ze("invalid",e);break;case"option":f=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},f=j({},a,{value:void 0}),ze("invalid",e);break;case"textarea":wn(e,a),f=nn(e,a),ze("invalid",e);break;default:f=a}go(s,f),F=f;for(y in F)if(F.hasOwnProperty(y)){var X=F[y];y==="style"?Ts(e,X):y==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&Ps(e,X)):y==="children"?typeof X=="string"?(s!=="textarea"||X!=="")&&sn(e,X):typeof X=="number"&&sn(e,""+X):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(l.hasOwnProperty(y)?X!=null&&y==="onScroll"&&ze("scroll",e):X!=null&&_(e,y,X,E))}switch(s){case"input":we(e),Tt(e,a,!1);break;case"textarea":we(e),Yn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+re(a.value));break;case"select":e.multiple=!!a.multiple,y=a.value,y!=null?_t(e,!!a.multiple,y,!1):a.defaultValue!=null&&_t(e,!!a.multiple,a.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=ui)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return st(n),null;case 6:if(e&&n.stateNode!=null)Ef(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=sr(Go.current),sr(Qt.current),gi(n)){if(a=n.stateNode,s=n.memoizedProps,a[Xt]=n,(y=a.nodeValue!==s)&&(e=wt,e!==null))switch(e.tag){case 3:ai(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ai(a.nodeValue,s,(e.mode&1)!==0)}y&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Xt]=n,n.stateNode=a}return st(n),null;case 13:if($e(Ve),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&St!==null&&(n.mode&1)!==0&&(n.flags&128)===0)jd(),Ur(),n.flags|=98560,y=!1;else if(y=gi(n),a!==null&&a.dehydrated!==null){if(e===null){if(!y)throw Error(o(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Xt]=n}else Ur(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;st(n),y=!1}else At!==null&&(Su(At),At=null),y=!0;if(!y)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ve.current&1)!==0?Ke===0&&(Ke=3):Iu())),n.updateQueue!==null&&(n.flags|=4),st(n),null);case 4:return Gr(),cu(e,n),e===null&&Vo(n.stateNode.containerInfo),st(n),null;case 10:return La(n.type._context),st(n),null;case 17:return ct(n.type)&&di(),st(n),null;case 19:if($e(Ve),y=n.memoizedState,y===null)return st(n),null;if(a=(n.flags&128)!==0,E=y.rendering,E===null)if(a)es(y,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(E=Ni(e),E!==null){for(n.flags|=128,es(y,!1),a=E.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)y=s,e=a,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=e,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,e=E.dependencies,y.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Oe(Ve,Ve.current&1|2),n.child}e=e.sibling}y.tail!==null&&He()>Jr&&(n.flags|=128,a=!0,es(y,!1),n.lanes=4194304)}else{if(!a)if(e=Ni(E),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),es(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Le)return st(n),null}else 2*He()-y.renderingStartTime>Jr&&s!==1073741824&&(n.flags|=128,a=!0,es(y,!1),n.lanes=4194304);y.isBackwards?(E.sibling=n.child,n.child=E):(s=y.last,s!==null?s.sibling=E:n.child=E,y.last=E)}return y.tail!==null?(n=y.tail,y.rendering=n,y.tail=n.sibling,y.renderingStartTime=He(),n.sibling=null,s=Ve.current,Oe(Ve,a?s&1|2:s&1),n):(st(n),null);case 22:case 23:return ku(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(Nt&1073741824)!==0&&(st(n),n.subtreeFlags&6&&(n.flags|=8192)):st(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function I0(e,n){switch(Da(n),n.tag){case 1:return ct(n.type)&&di(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Gr(),$e(ut),$e(rt),Ua(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Ba(n),null;case 13:if($e(Ve),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Ur()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return $e(Ve),null;case 4:return Gr(),null;case 10:return La(n.type._context),null;case 22:case 23:return ku(),null;case 24:return null;default:return null}}var Pi=!1,it=!1,_0=typeof WeakSet=="function"?WeakSet:Set,pe=null;function qr(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){We(e,n,a)}else s.current=null}function du(e,n,s){try{s()}catch(a){We(e,n,a)}}var Cf=!1;function E0(e,n){if(ka=qs,e=od(),ma(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var f=a.anchorOffset,y=a.focusNode;a=a.focusOffset;try{s.nodeType,y.nodeType}catch{s=null;break e}var E=0,F=-1,X=-1,te=0,ie=0,le=e,se=null;t:for(;;){for(var fe;le!==s||f!==0&&le.nodeType!==3||(F=E+f),le!==y||a!==0&&le.nodeType!==3||(X=E+a),le.nodeType===3&&(E+=le.nodeValue.length),(fe=le.firstChild)!==null;)se=le,le=fe;for(;;){if(le===e)break t;if(se===s&&++te===f&&(F=E),se===y&&++ie===a&&(X=E),(fe=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=fe}s=F===-1||X===-1?null:{start:F,end:X}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ia={focusedElem:e,selectionRange:s},qs=!1,pe=n;pe!==null;)if(n=pe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pe=e;else for(;pe!==null;){n=pe;try{var he=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var me=he.memoizedProps,Ue=he.memoizedState,Z=n.stateNode,G=Z.getSnapshotBeforeUpdate(n.elementType===n.type?me:zt(n.type,me),Ue);Z.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var J=n.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){We(n,n.return,ue)}if(e=n.sibling,e!==null){e.return=n.return,pe=e;break}pe=n.return}return he=Cf,Cf=!1,he}function ts(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&e)===e){var y=f.destroy;f.destroy=void 0,y!==void 0&&du(n,s,y)}f=f.next}while(f!==a)}}function Di(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function fu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function jf(e){var n=e.alternate;n!==null&&(e.alternate=null,jf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Xt],delete n[Wo],delete n[ja],delete n[a0],delete n[u0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mf(e){return e.tag===5||e.tag===3||e.tag===4}function bf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=ui));else if(a!==4&&(e=e.child,e!==null))for(pu(e,n,s),e=e.sibling;e!==null;)pu(e,n,s),e=e.sibling}function hu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(hu(e,n,s),e=e.sibling;e!==null;)hu(e,n,s),e=e.sibling}var tt=null,$t=!1;function An(e,n,s){for(s=s.child;s!==null;)Pf(e,n,s),s=s.sibling}function Pf(e,n,s){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Zn,s)}catch{}switch(s.tag){case 5:it||qr(s,n);case 6:var a=tt,f=$t;tt=null,An(e,n,s),tt=a,$t=f,tt!==null&&($t?(e=tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):tt.removeChild(s.stateNode));break;case 18:tt!==null&&($t?(e=tt,s=s.stateNode,e.nodeType===8?Ca(e.parentNode,s):e.nodeType===1&&Ca(e,s),To(e)):Ca(tt,s.stateNode));break;case 4:a=tt,f=$t,tt=s.stateNode.containerInfo,$t=!0,An(e,n,s),tt=a,$t=f;break;case 0:case 11:case 14:case 15:if(!it&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){f=a=a.next;do{var y=f,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&du(s,n,E),f=f.next}while(f!==a)}An(e,n,s);break;case 1:if(!it&&(qr(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(F){We(s,n,F)}An(e,n,s);break;case 21:An(e,n,s);break;case 22:s.mode&1?(it=(a=it)||s.memoizedState!==null,An(e,n,s),it=a):An(e,n,s);break;default:An(e,n,s)}}function Df(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new _0),n.forEach(function(a){var f=A0.bind(null,e,a);s.has(a)||(s.add(a),a.then(f,f))})}}function Lt(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var f=s[a];try{var y=e,E=n,F=E;e:for(;F!==null;){switch(F.tag){case 5:tt=F.stateNode,$t=!1;break e;case 3:tt=F.stateNode.containerInfo,$t=!0;break e;case 4:tt=F.stateNode.containerInfo,$t=!0;break e}F=F.return}if(tt===null)throw Error(o(160));Pf(y,E,f),tt=null,$t=!1;var X=f.alternate;X!==null&&(X.return=null),f.return=null}catch(te){We(f,n,te)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Tf(n,e),n=n.sibling}function Tf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(n,e),Kt(e),a&4){try{ts(3,e,e.return),Di(3,e)}catch(me){We(e,e.return,me)}try{ts(5,e,e.return)}catch(me){We(e,e.return,me)}}break;case 1:Lt(n,e),Kt(e),a&512&&s!==null&&qr(s,s.return);break;case 5:if(Lt(n,e),Kt(e),a&512&&s!==null&&qr(s,s.return),e.flags&32){var f=e.stateNode;try{sn(f,"")}catch(me){We(e,e.return,me)}}if(a&4&&(f=e.stateNode,f!=null)){var y=e.memoizedProps,E=s!==null?s.memoizedProps:y,F=e.type,X=e.updateQueue;if(e.updateQueue=null,X!==null)try{F==="input"&&y.type==="radio"&&y.name!=null&&je(f,y),xo(F,E);var te=xo(F,y);for(E=0;E<X.length;E+=2){var ie=X[E],le=X[E+1];ie==="style"?Ts(f,le):ie==="dangerouslySetInnerHTML"?Ps(f,le):ie==="children"?sn(f,le):_(f,ie,le,te)}switch(F){case"input":Ye(f,y);break;case"textarea":_r(f,y);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var fe=y.value;fe!=null?_t(f,!!y.multiple,fe,!1):se!==!!y.multiple&&(y.defaultValue!=null?_t(f,!!y.multiple,y.defaultValue,!0):_t(f,!!y.multiple,y.multiple?[]:"",!1))}f[Wo]=y}catch(me){We(e,e.return,me)}}break;case 6:if(Lt(n,e),Kt(e),a&4){if(e.stateNode===null)throw Error(o(162));f=e.stateNode,y=e.memoizedProps;try{f.nodeValue=y}catch(me){We(e,e.return,me)}}break;case 3:if(Lt(n,e),Kt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{To(n.containerInfo)}catch(me){We(e,e.return,me)}break;case 4:Lt(n,e),Kt(e);break;case 13:Lt(n,e),Kt(e),f=e.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(xu=He())),a&4&&Df(e);break;case 22:if(ie=s!==null&&s.memoizedState!==null,e.mode&1?(it=(te=it)||ie,Lt(n,e),it=te):Lt(n,e),Kt(e),a&8192){if(te=e.memoizedState!==null,(e.stateNode.isHidden=te)&&!ie&&(e.mode&1)!==0)for(pe=e,ie=e.child;ie!==null;){for(le=pe=ie;pe!==null;){switch(se=pe,fe=se.child,se.tag){case 0:case 11:case 14:case 15:ts(4,se,se.return);break;case 1:qr(se,se.return);var he=se.stateNode;if(typeof he.componentWillUnmount=="function"){a=se,s=se.return;try{n=a,he.props=n.memoizedProps,he.state=n.memoizedState,he.componentWillUnmount()}catch(me){We(a,s,me)}}break;case 5:qr(se,se.return);break;case 22:if(se.memoizedState!==null){zf(le);continue}}fe!==null?(fe.return=se,pe=fe):zf(le)}ie=ie.sibling}e:for(ie=null,le=e;;){if(le.tag===5){if(ie===null){ie=le;try{f=le.stateNode,te?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(F=le.stateNode,X=le.memoizedProps.style,E=X!=null&&X.hasOwnProperty("display")?X.display:null,F.style.display=Ds("display",E))}catch(me){We(e,e.return,me)}}}else if(le.tag===6){if(ie===null)try{le.stateNode.nodeValue=te?"":le.memoizedProps}catch(me){We(e,e.return,me)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;ie===le&&(ie=null),le=le.return}ie===le&&(ie=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Lt(n,e),Kt(e),a&4&&Df(e);break;case 21:break;default:Lt(n,e),Kt(e)}}function Kt(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Mf(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var f=a.stateNode;a.flags&32&&(sn(f,""),a.flags&=-33);var y=bf(e);hu(e,y,f);break;case 3:case 4:var E=a.stateNode.containerInfo,F=bf(e);pu(e,F,E);break;default:throw Error(o(161))}}catch(X){We(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function C0(e,n,s){pe=e,Of(e)}function Of(e,n,s){for(var a=(e.mode&1)!==0;pe!==null;){var f=pe,y=f.child;if(f.tag===22&&a){var E=f.memoizedState!==null||Pi;if(!E){var F=f.alternate,X=F!==null&&F.memoizedState!==null||it;F=Pi;var te=it;if(Pi=E,(it=X)&&!te)for(pe=f;pe!==null;)E=pe,X=E.child,E.tag===22&&E.memoizedState!==null?$f(f):X!==null?(X.return=E,pe=X):$f(f);for(;y!==null;)pe=y,Of(y),y=y.sibling;pe=f,Pi=F,it=te}Af(e)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,pe=y):Af(e)}}function Af(e){for(;pe!==null;){var n=pe;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:it||Di(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!it)if(s===null)a.componentDidMount();else{var f=n.elementType===n.type?s.memoizedProps:zt(n.type,s.memoizedProps);a.componentDidUpdate(f,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var y=n.updateQueue;y!==null&&Ad(n,y,a);break;case 3:var E=n.updateQueue;if(E!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Ad(n,E,s)}break;case 5:var F=n.stateNode;if(s===null&&n.flags&4){s=F;var X=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&s.focus();break;case"img":X.src&&(s.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var te=n.alternate;if(te!==null){var ie=te.memoizedState;if(ie!==null){var le=ie.dehydrated;le!==null&&To(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}it||n.flags&512&&fu(n)}catch(se){We(n,n.return,se)}}if(n===e){pe=null;break}if(s=n.sibling,s!==null){s.return=n.return,pe=s;break}pe=n.return}}function zf(e){for(;pe!==null;){var n=pe;if(n===e){pe=null;break}var s=n.sibling;if(s!==null){s.return=n.return,pe=s;break}pe=n.return}}function $f(e){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Di(4,n)}catch(X){We(n,s,X)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var f=n.return;try{a.componentDidMount()}catch(X){We(n,f,X)}}var y=n.return;try{fu(n)}catch(X){We(n,y,X)}break;case 5:var E=n.return;try{fu(n)}catch(X){We(n,E,X)}}}catch(X){We(n,n.return,X)}if(n===e){pe=null;break}var F=n.sibling;if(F!==null){F.return=n.return,pe=F;break}pe=n.return}}var j0=Math.ceil,Ti=C.ReactCurrentDispatcher,mu=C.ReactCurrentOwner,Pt=C.ReactCurrentBatchConfig,be=0,Ze=null,Xe=null,nt=0,Nt=0,Zr=bn(0),Ke=0,ns=null,lr=0,Oi=0,gu=0,rs=null,ft=null,xu=0,Jr=1/0,hn=null,Ai=!1,yu=null,zn=null,zi=!1,$n=null,$i=0,os=0,vu=null,Li=-1,Ri=0;function at(){return(be&6)!==0?He():Li!==-1?Li:Li=He()}function Ln(e){return(e.mode&1)===0?1:(be&2)!==0&&nt!==0?nt&-nt:d0.transition!==null?(Ri===0&&(Ri=Dr()),Ri):(e=De,e!==0||(e=window.event,e=e===void 0?16:Lc(e.type)),e)}function Rt(e,n,s,a){if(50<os)throw os=0,vu=null,Error(o(185));Jn(e,s,a),((be&2)===0||e!==Ze)&&(e===Ze&&((be&2)===0&&(Oi|=s),Ke===4&&Rn(e,nt)),pt(e,a),s===1&&be===0&&(n.mode&1)===0&&(Jr=He()+500,pi&&Dn()))}function pt(e,n){var s=e.callbackNode;ea(e,n);var a=Pr(e,e===Ze?nt:0);if(a===0)s!==null&&Bs(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Bs(s),n===1)e.tag===0?c0(Rf.bind(null,e)):kd(Rf.bind(null,e)),i0(function(){(be&6)===0&&Dn()}),s=null;else{switch(bc(a)){case 1:s=Eo;break;case 4:s=Us;break;case 16:s=jr;break;case 536870912:s=Ys;break;default:s=jr}s=Xf(s,Lf.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Lf(e,n){if(Li=-1,Ri=0,(be&6)!==0)throw Error(o(327));var s=e.callbackNode;if(eo()&&e.callbackNode!==s)return null;var a=Pr(e,e===Ze?nt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=Fi(e,a);else{n=a;var f=be;be|=2;var y=Hf();(Ze!==e||nt!==n)&&(hn=null,Jr=He()+500,ur(e,n));do try{P0();break}catch(F){Ff(e,F)}while(!0);$a(),Ti.current=y,be=f,Xe!==null?n=0:(Ze=null,nt=0,n=Ke)}if(n!==0){if(n===2&&(f=Co(e),f!==0&&(a=f,n=wu(e,f))),n===1)throw s=ns,ur(e,0),Rn(e,a),pt(e,He()),s;if(n===6)Rn(e,a);else{if(f=e.current.alternate,(a&30)===0&&!M0(f)&&(n=Fi(e,a),n===2&&(y=Co(e),y!==0&&(a=y,n=wu(e,y))),n===1))throw s=ns,ur(e,0),Rn(e,a),pt(e,He()),s;switch(e.finishedWork=f,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:cr(e,ft,hn);break;case 3:if(Rn(e,a),(a&130023424)===a&&(n=xu+500-He(),10<n)){if(Pr(e,0)!==0)break;if(f=e.suspendedLanes,(f&a)!==a){at(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=Ea(cr.bind(null,e,ft,hn),n);break}cr(e,ft,hn);break;case 4:if(Rn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,f=-1;0<a;){var E=31-yt(a);y=1<<E,E=n[E],E>f&&(f=E),a&=~y}if(a=f,a=He()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*j0(a/1960))-a,10<a){e.timeoutHandle=Ea(cr.bind(null,e,ft,hn),a);break}cr(e,ft,hn);break;case 5:cr(e,ft,hn);break;default:throw Error(o(329))}}}return pt(e,He()),e.callbackNode===s?Lf.bind(null,e):null}function wu(e,n){var s=rs;return e.current.memoizedState.isDehydrated&&(ur(e,n).flags|=256),e=Fi(e,n),e!==2&&(n=ft,ft=s,n!==null&&Su(n)),e}function Su(e){ft===null?ft=e:ft.push.apply(ft,e)}function M0(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var f=s[a],y=f.getSnapshot;f=f.value;try{if(!Ot(y(),f))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Rn(e,n){for(n&=~gu,n&=~Oi,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-yt(n),a=1<<s;e[s]=-1,n&=~a}}function Rf(e){if((be&6)!==0)throw Error(o(327));eo();var n=Pr(e,0);if((n&1)===0)return pt(e,He()),null;var s=Fi(e,n);if(e.tag!==0&&s===2){var a=Co(e);a!==0&&(n=a,s=wu(e,a))}if(s===1)throw s=ns,ur(e,0),Rn(e,n),pt(e,He()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,cr(e,ft,hn),pt(e,He()),null}function Nu(e,n){var s=be;be|=1;try{return e(n)}finally{be=s,be===0&&(Jr=He()+500,pi&&Dn())}}function ar(e){$n!==null&&$n.tag===0&&(be&6)===0&&eo();var n=be;be|=1;var s=Pt.transition,a=De;try{if(Pt.transition=null,De=1,e)return e()}finally{De=a,Pt.transition=s,be=n,(be&6)===0&&Dn()}}function ku(){Nt=Zr.current,$e(Zr)}function ur(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,s0(s)),Xe!==null)for(s=Xe.return;s!==null;){var a=s;switch(Da(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&di();break;case 3:Gr(),$e(ut),$e(rt),Ua();break;case 5:Ba(a);break;case 4:Gr();break;case 13:$e(Ve);break;case 19:$e(Ve);break;case 10:La(a.type._context);break;case 22:case 23:ku()}s=s.return}if(Ze=e,Xe=e=Fn(e.current,null),nt=Nt=n,Ke=0,ns=null,gu=Oi=lr=0,ft=rs=null,or!==null){for(n=0;n<or.length;n++)if(s=or[n],a=s.interleaved,a!==null){s.interleaved=null;var f=a.next,y=s.pending;if(y!==null){var E=y.next;y.next=f,a.next=E}s.pending=a}or=null}return e}function Ff(e,n){do{var s=Xe;try{if($a(),ki.current=Ci,Ii){for(var a=Be.memoizedState;a!==null;){var f=a.queue;f!==null&&(f.pending=null),a=a.next}Ii=!1}if(ir=0,qe=Ge=Be=null,Ko=!1,qo=0,mu.current=null,s===null||s.return===null){Ke=1,ns=n,Xe=null;break}e:{var y=e,E=s.return,F=s,X=n;if(n=nt,F.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var te=X,ie=F,le=ie.tag;if((ie.mode&1)===0&&(le===0||le===11||le===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=df(E);if(fe!==null){fe.flags&=-257,ff(fe,E,F,y,n),fe.mode&1&&cf(y,te,n),n=fe,X=te;var he=n.updateQueue;if(he===null){var me=new Set;me.add(X),n.updateQueue=me}else he.add(X);break e}else{if((n&1)===0){cf(y,te,n),Iu();break e}X=Error(o(426))}}else if(Le&&F.mode&1){var Ue=df(E);if(Ue!==null){(Ue.flags&65536)===0&&(Ue.flags|=256),ff(Ue,E,F,y,n),Aa(Kr(X,F));break e}}y=X=Kr(X,F),Ke!==4&&(Ke=2),rs===null?rs=[y]:rs.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,n&=-n,y.lanes|=n;var Z=af(y,X,n);Od(y,Z);break e;case 1:F=X;var G=y.type,J=y.stateNode;if((y.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(zn===null||!zn.has(J)))){y.flags|=65536,n&=-n,y.lanes|=n;var ue=uf(y,F,n);Od(y,ue);break e}}y=y.return}while(y!==null)}Bf(s)}catch(ge){n=ge,Xe===s&&s!==null&&(Xe=s=s.return);continue}break}while(!0)}function Hf(){var e=Ti.current;return Ti.current=Ci,e===null?Ci:e}function Iu(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||(lr&268435455)===0&&(Oi&268435455)===0||Rn(Ze,nt)}function Fi(e,n){var s=be;be|=2;var a=Hf();(Ze!==e||nt!==n)&&(hn=null,ur(e,n));do try{b0();break}catch(f){Ff(e,f)}while(!0);if($a(),be=s,Ti.current=a,Xe!==null)throw Error(o(261));return Ze=null,nt=0,Ke}function b0(){for(;Xe!==null;)Vf(Xe)}function P0(){for(;Xe!==null&&!Xl();)Vf(Xe)}function Vf(e){var n=Yf(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,n===null?Bf(e):Xe=n,mu.current=null}function Bf(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=k0(s,n,Nt),s!==null){Xe=s;return}}else{if(s=I0(s,n),s!==null){s.flags&=32767,Xe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Xe=null;return}}if(n=n.sibling,n!==null){Xe=n;return}Xe=n=e}while(n!==null);Ke===0&&(Ke=5)}function cr(e,n,s){var a=De,f=Pt.transition;try{Pt.transition=null,De=1,D0(e,n,s,a)}finally{Pt.transition=f,De=a}return null}function D0(e,n,s,a){do eo();while($n!==null);if((be&6)!==0)throw Error(o(327));s=e.finishedWork;var f=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var y=s.lanes|s.childLanes;if(Qs(e,y),e===Ze&&(Xe=Ze=null,nt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||zi||(zi=!0,Xf(jr,function(){return eo(),null})),y=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||y){y=Pt.transition,Pt.transition=null;var E=De;De=1;var F=be;be|=4,mu.current=null,E0(e,s),Tf(s,e),Zg(Ia),qs=!!ka,Ia=ka=null,e.current=s,C0(s),Ws(),be=F,De=E,Pt.transition=y}else e.current=s;if(zi&&(zi=!1,$n=e,$i=f),y=e.pendingLanes,y===0&&(zn=null),Kl(s.stateNode),pt(e,He()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)f=n[s],a(f.value,{componentStack:f.stack,digest:f.digest});if(Ai)throw Ai=!1,e=yu,yu=null,e;return($i&1)!==0&&e.tag!==0&&eo(),y=e.pendingLanes,(y&1)!==0?e===vu?os++:(os=0,vu=e):os=0,Dn(),null}function eo(){if($n!==null){var e=bc($i),n=Pt.transition,s=De;try{if(Pt.transition=null,De=16>e?16:e,$n===null)var a=!1;else{if(e=$n,$n=null,$i=0,(be&6)!==0)throw Error(o(331));var f=be;for(be|=4,pe=e.current;pe!==null;){var y=pe,E=y.child;if((pe.flags&16)!==0){var F=y.deletions;if(F!==null){for(var X=0;X<F.length;X++){var te=F[X];for(pe=te;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:ts(8,ie,y)}var le=ie.child;if(le!==null)le.return=ie,pe=le;else for(;pe!==null;){ie=pe;var se=ie.sibling,fe=ie.return;if(jf(ie),ie===te){pe=null;break}if(se!==null){se.return=fe,pe=se;break}pe=fe}}}var he=y.alternate;if(he!==null){var me=he.child;if(me!==null){he.child=null;do{var Ue=me.sibling;me.sibling=null,me=Ue}while(me!==null)}}pe=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,pe=E;else e:for(;pe!==null;){if(y=pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ts(9,y,y.return)}var Z=y.sibling;if(Z!==null){Z.return=y.return,pe=Z;break e}pe=y.return}}var G=e.current;for(pe=G;pe!==null;){E=pe;var J=E.child;if((E.subtreeFlags&2064)!==0&&J!==null)J.return=E,pe=J;else e:for(E=G;pe!==null;){if(F=pe,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Di(9,F)}}catch(ge){We(F,F.return,ge)}if(F===E){pe=null;break e}var ue=F.sibling;if(ue!==null){ue.return=F.return,pe=ue;break e}pe=F.return}}if(be=f,Dn(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Zn,e)}catch{}a=!0}return a}finally{De=s,Pt.transition=n}}return!1}function Wf(e,n,s){n=Kr(s,n),n=af(e,n,1),e=On(e,n,1),n=at(),e!==null&&(Jn(e,1,n),pt(e,n))}function We(e,n,s){if(e.tag===3)Wf(e,e,s);else for(;n!==null;){if(n.tag===3){Wf(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(zn===null||!zn.has(a))){e=Kr(s,e),e=uf(n,e,1),n=On(n,e,1),e=at(),n!==null&&(Jn(n,1,e),pt(n,e));break}}n=n.return}}function T0(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=at(),e.pingedLanes|=e.suspendedLanes&s,Ze===e&&(nt&s)===s&&(Ke===4||Ke===3&&(nt&130023424)===nt&&500>He()-xu?ur(e,0):gu|=s),pt(e,n)}function Uf(e,n){n===0&&((e.mode&1)===0?n=1:(n=br,br<<=1,(br&130023424)===0&&(br=4194304)));var s=at();e=dn(e,n),e!==null&&(Jn(e,n,s),pt(e,s))}function O0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Uf(e,s)}function A0(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),Uf(e,s)}var Yf;Yf=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ut.current)dt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return dt=!1,N0(e,n,s);dt=(e.flags&131072)!==0}else dt=!1,Le&&(n.flags&1048576)!==0&&Id(n,mi,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;bi(e,n),e=n.pendingProps;var f=Vr(n,rt.current);Qr(n,s),f=Qa(null,n,a,e,f,s);var y=Ga();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(a)?(y=!0,fi(n)):y=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ha(n),f.updater=ji,n.stateNode=f,f._reactInternals=n,tu(n,a,e,s),n=su(null,n,a,!0,y,s)):(n.tag=0,Le&&y&&Pa(n),lt(null,n,f,s),n=n.child),n;case 16:a=n.elementType;e:{switch(bi(e,n),e=n.pendingProps,f=a._init,a=f(a._payload),n.type=a,f=n.tag=$0(a),e=zt(a,e),f){case 0:n=ou(null,n,a,e,s);break e;case 1:n=yf(null,n,a,e,s);break e;case 11:n=pf(null,n,a,e,s);break e;case 14:n=hf(null,n,a,zt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),ou(e,n,a,f,s);case 1:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),yf(e,n,a,f,s);case 3:e:{if(vf(n),e===null)throw Error(o(387));a=n.pendingProps,y=n.memoizedState,f=y.element,Td(e,n),Si(n,a,null,s);var E=n.memoizedState;if(a=E.element,y.isDehydrated)if(y={element:a,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){f=Kr(Error(o(423)),n),n=wf(e,n,a,s,f);break e}else if(a!==f){f=Kr(Error(o(424)),n),n=wf(e,n,a,s,f);break e}else for(St=Mn(n.stateNode.containerInfo.firstChild),wt=n,Le=!0,At=null,s=Pd(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ur(),a===f){n=pn(e,n,s);break e}lt(e,n,a,s)}n=n.child}return n;case 5:return zd(n),e===null&&Oa(n),a=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,E=f.children,_a(a,f)?E=null:y!==null&&_a(a,y)&&(n.flags|=32),xf(e,n),lt(e,n,E,s),n.child;case 6:return e===null&&Oa(n),null;case 13:return Sf(e,n,s);case 4:return Va(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Yr(n,null,a,s):lt(e,n,a,s),n.child;case 11:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),pf(e,n,a,f,s);case 7:return lt(e,n,n.pendingProps,s),n.child;case 8:return lt(e,n,n.pendingProps.children,s),n.child;case 12:return lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,f=n.pendingProps,y=n.memoizedProps,E=f.value,Oe(yi,a._currentValue),a._currentValue=E,y!==null)if(Ot(y.value,E)){if(y.children===f.children&&!ut.current){n=pn(e,n,s);break e}}else for(y=n.child,y!==null&&(y.return=n);y!==null;){var F=y.dependencies;if(F!==null){E=y.child;for(var X=F.firstContext;X!==null;){if(X.context===a){if(y.tag===1){X=fn(-1,s&-s),X.tag=2;var te=y.updateQueue;if(te!==null){te=te.shared;var ie=te.pending;ie===null?X.next=X:(X.next=ie.next,ie.next=X),te.pending=X}}y.lanes|=s,X=y.alternate,X!==null&&(X.lanes|=s),Ra(y.return,s,n),F.lanes|=s;break}X=X.next}}else if(y.tag===10)E=y.type===n.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(o(341));E.lanes|=s,F=E.alternate,F!==null&&(F.lanes|=s),Ra(E,s,n),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===n){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}lt(e,n,f.children,s),n=n.child}return n;case 9:return f=n.type,a=n.pendingProps.children,Qr(n,s),f=Mt(f),a=a(f),n.flags|=1,lt(e,n,a,s),n.child;case 14:return a=n.type,f=zt(a,n.pendingProps),f=zt(a.type,f),hf(e,n,a,f,s);case 15:return mf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),bi(e,n),n.tag=1,ct(a)?(e=!0,fi(n)):e=!1,Qr(n,s),sf(n,a,f),tu(n,a,f,s),su(null,n,a,!0,e,s);case 19:return kf(e,n,s);case 22:return gf(e,n,s)}throw Error(o(156,n.tag))};function Xf(e,n){return Vs(e,n)}function z0(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,n,s,a){return new z0(e,n,s,a)}function _u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $0(e){if(typeof e=="function")return _u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===A)return 11;if(e===B)return 14}return 2}function Fn(e,n){var s=e.alternate;return s===null?(s=Dt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Hi(e,n,s,a,f,y){var E=2;if(a=e,typeof e=="function")_u(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case V:return dr(s.children,f,y,n);case K:E=8,f|=8;break;case O:return e=Dt(12,s,n,f|2),e.elementType=O,e.lanes=y,e;case U:return e=Dt(13,s,n,f),e.elementType=U,e.lanes=y,e;case b:return e=Dt(19,s,n,f),e.elementType=b,e.lanes=y,e;case L:return Vi(s,f,y,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:E=10;break e;case Q:E=9;break e;case A:E=11;break e;case B:E=14;break e;case R:E=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Dt(E,s,n,f),n.elementType=e,n.type=a,n.lanes=y,n}function dr(e,n,s,a){return e=Dt(7,e,a,n),e.lanes=s,e}function Vi(e,n,s,a){return e=Dt(22,e,a,n),e.elementType=L,e.lanes=s,e.stateNode={isHidden:!1},e}function Eu(e,n,s){return e=Dt(6,e,null,n),e.lanes=s,e}function Cu(e,n,s){return n=Dt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function L0(e,n,s,a,f){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jo(0),this.expirationTimes=jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.identifierPrefix=a,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function ju(e,n,s,a,f,y,E,F,X){return e=new L0(e,n,s,F,X),n===1?(n=1,y===!0&&(n|=8)):n=0,y=Dt(3,null,null,n),e.current=y,y.stateNode=e,y.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ha(y),e}function R0(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function Qf(e){if(!e)return Pn;e=e._reactInternals;e:{if(Ut(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(ct(s))return Sd(e,s,n)}return n}function Gf(e,n,s,a,f,y,E,F,X){return e=ju(s,a,!0,e,f,y,E,F,X),e.context=Qf(null),s=e.current,a=at(),f=Ln(s),y=fn(a,f),y.callback=n??null,On(s,y,f),e.current.lanes=f,Jn(e,f,a),pt(e,a),e}function Bi(e,n,s,a){var f=n.current,y=at(),E=Ln(f);return s=Qf(s),n.context===null?n.context=s:n.pendingContext=s,n=fn(y,E),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=On(f,n,E),e!==null&&(Rt(e,f,E,y),wi(e,f,E)),E}function Wi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Mu(e,n){Kf(e,n),(e=e.alternate)&&Kf(e,n)}function F0(){return null}var qf=typeof reportError=="function"?reportError:function(e){console.error(e)};function bu(e){this._internalRoot=e}Ui.prototype.render=bu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Bi(e,n,null,null)},Ui.prototype.unmount=bu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ar(function(){Bi(null,e,null,null)}),n[ln]=null}};function Ui(e){this._internalRoot=e}Ui.prototype.unstable_scheduleHydration=function(e){if(e){var n=Tc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<En.length&&n!==0&&n<En[s].priority;s++);En.splice(s,0,e),s===0&&zc(e)}};function Pu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zf(){}function H0(e,n,s,a,f){if(f){if(typeof a=="function"){var y=a;a=function(){var te=Wi(E);y.call(te)}}var E=Gf(n,a,e,0,null,!1,!1,"",Zf);return e._reactRootContainer=E,e[ln]=E.current,Vo(e.nodeType===8?e.parentNode:e),ar(),E}for(;f=e.lastChild;)e.removeChild(f);if(typeof a=="function"){var F=a;a=function(){var te=Wi(X);F.call(te)}}var X=ju(e,0,!1,null,null,!1,!1,"",Zf);return e._reactRootContainer=X,e[ln]=X.current,Vo(e.nodeType===8?e.parentNode:e),ar(function(){Bi(n,X,s,a)}),X}function Xi(e,n,s,a,f){var y=s._reactRootContainer;if(y){var E=y;if(typeof f=="function"){var F=f;f=function(){var X=Wi(E);F.call(X)}}Bi(n,E,e,f)}else E=H0(s,n,e,f,a);return Wi(E)}Pc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Yt(n.pendingLanes);s!==0&&(ta(n,s|1),pt(n,He()),(be&6)===0&&(Jr=He()+500,Dn()))}break;case 13:ar(function(){var a=dn(e,1);if(a!==null){var f=at();Rt(a,e,1,f)}}),Mu(e,1)}},na=function(e){if(e.tag===13){var n=dn(e,134217728);if(n!==null){var s=at();Rt(n,e,134217728,s)}Mu(e,134217728)}},Dc=function(e){if(e.tag===13){var n=Ln(e),s=dn(e,n);if(s!==null){var a=at();Rt(s,e,n,a)}Mu(e,n)}},Tc=function(){return De},Oc=function(e,n){var s=De;try{return De=e,n()}finally{De=s}},wo=function(e,n,s){switch(n){case"input":if(Ye(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var f=ci(a);if(!f)throw Error(o(90));ke(a),Ye(a,f)}}}break;case"textarea":_r(e,s);break;case"select":n=s.value,n!=null&&_t(e,!!s.multiple,n,!1)}},$s=Nu,Ls=ar;var V0={usingClientEntryPoint:!1,Events:[Uo,Fr,ci,As,zs,Nu]},ss={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B0={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fs(e),e===null?null:e.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||F0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{Zn=Qi.inject(B0),Et=Qi}catch{}}return ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0,ht.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pu(n))throw Error(o(200));return R0(e,n,null,s)},ht.createRoot=function(e,n){if(!Pu(e))throw Error(o(299));var s=!1,a="",f=qf;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=ju(e,1,!1,null,null,s,!1,a,f),e[ln]=n.current,Vo(e.nodeType===8?e.parentNode:e),new bu(n)},ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Fs(n),e=e===null?null:e.stateNode,e},ht.flushSync=function(e){return ar(e)},ht.hydrate=function(e,n,s){if(!Yi(n))throw Error(o(200));return Xi(null,e,n,!0,s)},ht.hydrateRoot=function(e,n,s){if(!Pu(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,f=!1,y="",E=qf;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),n=Gf(n,null,e,1,s??null,f,!1,y,E),e[ln]=n.current,Vo(e),a)for(e=0;e<a.length;e++)s=a[e],f=s._getVersion,f=f(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,f]:n.mutableSourceEagerHydrationData.push(s,f);return new Ui(n)},ht.render=function(e,n,s){if(!Yi(n))throw Error(o(200));return Xi(null,e,n,!1,s)},ht.unmountComponentAtNode=function(e){if(!Yi(e))throw Error(o(40));return e._reactRootContainer?(ar(function(){Xi(null,null,e,!1,function(){e._reactRootContainer=null,e[ln]=null})}),!0):!1},ht.unstable_batchedUpdates=Nu,ht.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!Yi(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Xi(e,n,s,!1,a)},ht.version="18.3.1-next-f1338f8080-20240426",ht}var ip;function Nh(){if(ip)return Ou.exports;ip=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Ou.exports=K0(),Ou.exports}var lp;function q0(){if(lp)return Gi;lp=1;var t=Nh();return Gi.createRoot=t.createRoot,Gi.hydrateRoot=t.hydrateRoot,Gi}var Z0=q0();function Qe(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=Qe(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var J0={value:()=>{}};function El(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new ul(o)}function ul(t){this._=t}function ex(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}ul.prototype=El.prototype={constructor:ul,on:function(t,r){var o=this._,i=ex(t+"",o),l,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((l=(t=i[u]).type)&&(l=tx(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++u<c;)if(l=(t=i[u]).type)o[l]=ap(o[l],t.name,r);else if(r==null)for(l in o)o[l]=ap(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new ul(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,u;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,l=u.length;i<l;++i)u[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,u=i.length;l<u;++l)i[l].value.apply(r,o)}};function tx(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function ap(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=J0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var Ku="http://www.w3.org/1999/xhtml";const up={svg:"http://www.w3.org/2000/svg",xhtml:Ku,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cl(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),up.hasOwnProperty(r)?{space:up[r],local:t}:t}function nx(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===Ku&&r.documentElement.namespaceURI===Ku?r.createElement(t):r.createElementNS(o,t)}}function rx(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kh(t){var r=Cl(t);return(r.local?rx:nx)(r)}function ox(){}function dc(t){return t==null?ox:function(){return this.querySelector(t)}}function sx(t){typeof t!="function"&&(t=dc(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,p=i[l]=new Array(c),h,m,v=0;v<c;++v)(h=u[v])&&(m=t.call(h,h.__data__,v,u))&&("__data__"in h&&(m.__data__=h.__data__),p[v]=m);return new It(i,this._parents)}function ix(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lx(){return[]}function Ih(t){return t==null?lx:function(){return this.querySelectorAll(t)}}function ax(t){return function(){return ix(t.apply(this,arguments))}}function ux(t){typeof t=="function"?t=ax(t):t=Ih(t);for(var r=this._groups,o=r.length,i=[],l=[],u=0;u<o;++u)for(var c=r[u],p=c.length,h,m=0;m<p;++m)(h=c[m])&&(i.push(t.call(h,h.__data__,m,c)),l.push(h));return new It(i,l)}function _h(t){return function(){return this.matches(t)}}function Eh(t){return function(r){return r.matches(t)}}var cx=Array.prototype.find;function dx(t){return function(){return cx.call(this.children,t)}}function fx(){return this.firstElementChild}function px(t){return this.select(t==null?fx:dx(typeof t=="function"?t:Eh(t)))}var hx=Array.prototype.filter;function mx(){return Array.from(this.children)}function gx(t){return function(){return hx.call(this.children,t)}}function xx(t){return this.selectAll(t==null?mx:gx(typeof t=="function"?t:Eh(t)))}function yx(t){typeof t!="function"&&(t=_h(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,p=i[l]=[],h,m=0;m<c;++m)(h=u[m])&&t.call(h,h.__data__,m,u)&&p.push(h);return new It(i,this._parents)}function Ch(t){return new Array(t.length)}function vx(){return new It(this._enter||this._groups.map(Ch),this._parents)}function ml(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}ml.prototype={constructor:ml,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function wx(t){return function(){return t}}function Sx(t,r,o,i,l,u){for(var c=0,p,h=r.length,m=u.length;c<m;++c)(p=r[c])?(p.__data__=u[c],i[c]=p):o[c]=new ml(t,u[c]);for(;c<h;++c)(p=r[c])&&(l[c]=p)}function Nx(t,r,o,i,l,u,c){var p,h,m=new Map,v=r.length,x=u.length,g=new Array(v),S;for(p=0;p<v;++p)(h=r[p])&&(g[p]=S=c.call(h,h.__data__,p,r)+"",m.has(S)?l[p]=h:m.set(S,h));for(p=0;p<x;++p)S=c.call(t,u[p],p,u)+"",(h=m.get(S))?(i[p]=h,h.__data__=u[p],m.delete(S)):o[p]=new ml(t,u[p]);for(p=0;p<v;++p)(h=r[p])&&m.get(g[p])===h&&(l[p]=h)}function kx(t){return t.__data__}function Ix(t,r){if(!arguments.length)return Array.from(this,kx);var o=r?Nx:Sx,i=this._parents,l=this._groups;typeof t!="function"&&(t=wx(t));for(var u=l.length,c=new Array(u),p=new Array(u),h=new Array(u),m=0;m<u;++m){var v=i[m],x=l[m],g=x.length,S=_x(t.call(v,v&&v.__data__,m,i)),w=S.length,N=p[m]=new Array(w),k=c[m]=new Array(w),I=h[m]=new Array(g);o(v,x,N,k,I,S,r);for(var M=0,_=0,C,W;M<w;++M)if(C=N[M]){for(M>=_&&(_=M+1);!(W=k[_])&&++_<w;);C._next=W||null}}return c=new It(c,i),c._enter=p,c._exit=h,c}function _x(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ex(){return new It(this._exit||this._groups.map(Ch),this._parents)}function Cx(t,r,o){var i=this.enter(),l=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?u.remove():o(u),i&&l?i.merge(l).order():l}function jx(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,u=i.length,c=Math.min(l,u),p=new Array(l),h=0;h<c;++h)for(var m=o[h],v=i[h],x=m.length,g=p[h]=new Array(x),S,w=0;w<x;++w)(S=m[w]||v[w])&&(g[w]=S);for(;h<l;++h)p[h]=o[h];return new It(p,this._parents)}function Mx(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,u=i[l],c;--l>=0;)(c=i[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function bx(t){t||(t=Px);function r(x,g){return x&&g?t(x.__data__,g.__data__):!x-!g}for(var o=this._groups,i=o.length,l=new Array(i),u=0;u<i;++u){for(var c=o[u],p=c.length,h=l[u]=new Array(p),m,v=0;v<p;++v)(m=c[v])&&(h[v]=m);h.sort(r)}return new It(l,this._parents).order()}function Px(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function Dx(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Tx(){return Array.from(this)}function Ox(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length;l<u;++l){var c=i[l];if(c)return c}return null}function Ax(){let t=0;for(const r of this)++t;return t}function zx(){return!this.node()}function $x(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],u=0,c=l.length,p;u<c;++u)(p=l[u])&&t.call(p,p.__data__,u,l);return this}function Lx(t){return function(){this.removeAttribute(t)}}function Rx(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fx(t,r){return function(){this.setAttribute(t,r)}}function Hx(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function Vx(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function Bx(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function Wx(t,r){var o=Cl(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?Rx:Lx:typeof r=="function"?o.local?Bx:Vx:o.local?Hx:Fx)(o,r))}function jh(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ux(t){return function(){this.style.removeProperty(t)}}function Yx(t,r,o){return function(){this.style.setProperty(t,r,o)}}function Xx(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function Qx(t,r,o){return arguments.length>1?this.each((r==null?Ux:typeof r=="function"?Xx:Yx)(t,r,o??"")):ao(this.node(),t)}function ao(t,r){return t.style.getPropertyValue(r)||jh(t).getComputedStyle(t,null).getPropertyValue(r)}function Gx(t){return function(){delete this[t]}}function Kx(t,r){return function(){this[t]=r}}function qx(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function Zx(t,r){return arguments.length>1?this.each((r==null?Gx:typeof r=="function"?qx:Kx)(t,r)):this.node()[t]}function Mh(t){return t.trim().split(/^|\s+/)}function fc(t){return t.classList||new bh(t)}function bh(t){this._node=t,this._names=Mh(t.getAttribute("class")||"")}bh.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ph(t,r){for(var o=fc(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function Dh(t,r){for(var o=fc(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function Jx(t){return function(){Ph(this,t)}}function ey(t){return function(){Dh(this,t)}}function ty(t,r){return function(){(r.apply(this,arguments)?Ph:Dh)(this,t)}}function ny(t,r){var o=Mh(t+"");if(arguments.length<2){for(var i=fc(this.node()),l=-1,u=o.length;++l<u;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?ty:r?Jx:ey)(o,r))}function ry(){this.textContent=""}function oy(t){return function(){this.textContent=t}}function sy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function iy(t){return arguments.length?this.each(t==null?ry:(typeof t=="function"?sy:oy)(t)):this.node().textContent}function ly(){this.innerHTML=""}function ay(t){return function(){this.innerHTML=t}}function uy(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function cy(t){return arguments.length?this.each(t==null?ly:(typeof t=="function"?uy:ay)(t)):this.node().innerHTML}function dy(){this.nextSibling&&this.parentNode.appendChild(this)}function fy(){return this.each(dy)}function py(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hy(){return this.each(py)}function my(t){var r=typeof t=="function"?t:kh(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function gy(){return null}function xy(t,r){var o=typeof t=="function"?t:kh(t),i=r==null?gy:typeof r=="function"?r:dc(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function yy(){var t=this.parentNode;t&&t.removeChild(this)}function vy(){return this.each(yy)}function wy(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Sy(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Ny(t){return this.select(t?Sy:wy)}function ky(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Iy(t){return function(r){t.call(this,r,this.__data__)}}function _y(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Ey(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,u;o<l;++o)u=r[o],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):r[++i]=u;++i?r.length=i:delete this.__on}}}function Cy(t,r,o){return function(){var i=this.__on,l,u=Iy(r);if(i){for(var c=0,p=i.length;c<p;++c)if((l=i[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=o),l.value=r;return}}this.addEventListener(t.type,u,o),l={type:t.type,name:t.name,value:r,listener:u,options:o},i?i.push(l):this.__on=[l]}}function jy(t,r,o){var i=_y(t+""),l,u=i.length,c;if(arguments.length<2){var p=this.node().__on;if(p){for(var h=0,m=p.length,v;h<m;++h)for(l=0,v=p[h];l<u;++l)if((c=i[l]).type===v.type&&c.name===v.name)return v.value}return}for(p=r?Cy:Ey,l=0;l<u;++l)this.each(p(i[l],r,o));return this}function Th(t,r,o){var i=jh(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function My(t,r){return function(){return Th(this,t,r)}}function by(t,r){return function(){return Th(this,t,r.apply(this,arguments))}}function Py(t,r){return this.each((typeof r=="function"?by:My)(t,r))}function*Dy(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length,c;l<u;++l)(c=i[l])&&(yield c)}var Oh=[null];function It(t,r){this._groups=t,this._parents=r}function _s(){return new It([[document.documentElement]],Oh)}function Ty(){return this}It.prototype=_s.prototype={constructor:It,select:sx,selectAll:ux,selectChild:px,selectChildren:xx,filter:yx,data:Ix,enter:vx,exit:Ex,join:Cx,merge:jx,selection:Ty,order:Mx,sort:bx,call:Dx,nodes:Tx,node:Ox,size:Ax,empty:zx,each:$x,attr:Wx,style:Qx,property:Zx,classed:ny,text:iy,html:cy,raise:fy,lower:hy,append:my,insert:xy,remove:vy,clone:Ny,datum:ky,on:jy,dispatch:Py,[Symbol.iterator]:Dy};function kt(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Oh)}function Oy(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Ft(t,r){if(t=Oy(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const Ay={passive:!1},ms={capture:!0,passive:!1};function $u(t){t.stopImmediatePropagation()}function io(t){t.preventDefault(),t.stopImmediatePropagation()}function Ah(t){var r=t.document.documentElement,o=kt(t).on("dragstart.drag",io,ms);"onselectstart"in r?o.on("selectstart.drag",io,ms):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function zh(t,r){var o=t.document.documentElement,i=kt(t).on("dragstart.drag",null);r&&(i.on("click.drag",io,ms),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const Ki=t=>()=>t;function qu(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:u,x:c,y:p,dx:h,dy:m,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:v}})}qu.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function zy(t){return!t.ctrlKey&&!t.button}function $y(){return this.parentNode}function Ly(t,r){return r??{x:t.x,y:t.y}}function Ry(){return navigator.maxTouchPoints||"ontouchstart"in this}function $h(){var t=zy,r=$y,o=Ly,i=Ry,l={},u=El("start","drag","end"),c=0,p,h,m,v,x=0;function g(C){C.on("mousedown.drag",S).filter(i).on("touchstart.drag",k).on("touchmove.drag",I,Ay).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(C,W){if(!(v||!t.call(this,C,W))){var T=_(this,r.call(this,C,W),C,W,"mouse");T&&(kt(C.view).on("mousemove.drag",w,ms).on("mouseup.drag",N,ms),Ah(C.view),$u(C),m=!1,p=C.clientX,h=C.clientY,T("start",C))}}function w(C){if(io(C),!m){var W=C.clientX-p,T=C.clientY-h;m=W*W+T*T>x}l.mouse("drag",C)}function N(C){kt(C.view).on("mousemove.drag mouseup.drag",null),zh(C.view,m),io(C),l.mouse("end",C)}function k(C,W){if(t.call(this,C,W)){var T=C.changedTouches,V=r.call(this,C,W),K=T.length,O,Y;for(O=0;O<K;++O)(Y=_(this,V,C,W,T[O].identifier,T[O]))&&($u(C),Y("start",C,T[O]))}}function I(C){var W=C.changedTouches,T=W.length,V,K;for(V=0;V<T;++V)(K=l[W[V].identifier])&&(io(C),K("drag",C,W[V]))}function M(C){var W=C.changedTouches,T=W.length,V,K;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),V=0;V<T;++V)(K=l[W[V].identifier])&&($u(C),K("end",C,W[V]))}function _(C,W,T,V,K,O){var Y=u.copy(),Q=Ft(O||T,W),A,U,b;if((b=o.call(C,new qu("beforestart",{sourceEvent:T,target:g,identifier:K,active:c,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:Y}),V))!=null)return A=b.x-Q[0]||0,U=b.y-Q[1]||0,function B(R,L,D){var $=Q,j;switch(R){case"start":l[K]=B,j=c++;break;case"end":delete l[K],--c;case"drag":Q=Ft(D||L,W),j=c;break}Y.call(R,C,new qu(R,{sourceEvent:L,subject:b,target:g,identifier:K,active:j,x:Q[0]+A,y:Q[1]+U,dx:Q[0]-$[0],dy:Q[1]-$[1],dispatch:Y}),V)}}return g.filter=function(C){return arguments.length?(t=typeof C=="function"?C:Ki(!!C),g):t},g.container=function(C){return arguments.length?(r=typeof C=="function"?C:Ki(C),g):r},g.subject=function(C){return arguments.length?(o=typeof C=="function"?C:Ki(C),g):o},g.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:Ki(!!C),g):i},g.on=function(){var C=u.on.apply(u,arguments);return C===u?g:C},g.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,g):Math.sqrt(x)},g}function pc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function Lh(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function Es(){}var gs=.7,gl=1/gs,lo="\\s*([+-]?\\d+)\\s*",xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fy=/^#([0-9a-f]{3,8})$/,Hy=new RegExp(`^rgb\\(${lo},${lo},${lo}\\)$`),Vy=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),By=new RegExp(`^rgba\\(${lo},${lo},${lo},${xs}\\)$`),Wy=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${xs}\\)$`),Uy=new RegExp(`^hsl\\(${xs},${Jt},${Jt}\\)$`),Yy=new RegExp(`^hsla\\(${xs},${Jt},${Jt},${xs}\\)$`),cp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pc(Es,xr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dp,formatHex:dp,formatHex8:Xy,formatHsl:Qy,formatRgb:fp,toString:fp});function dp(){return this.rgb().formatHex()}function Xy(){return this.rgb().formatHex8()}function Qy(){return Rh(this).formatHsl()}function fp(){return this.rgb().formatRgb()}function xr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=Fy.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?pp(r):o===3?new mt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?qi(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?qi(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Hy.exec(t))?new mt(r[1],r[2],r[3],1):(r=Vy.exec(t))?new mt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=By.exec(t))?qi(r[1],r[2],r[3],r[4]):(r=Wy.exec(t))?qi(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Uy.exec(t))?gp(r[1],r[2]/100,r[3]/100,1):(r=Yy.exec(t))?gp(r[1],r[2]/100,r[3]/100,r[4]):cp.hasOwnProperty(t)?pp(cp[t]):t==="transparent"?new mt(NaN,NaN,NaN,0):null}function pp(t){return new mt(t>>16&255,t>>8&255,t&255,1)}function qi(t,r,o,i){return i<=0&&(t=r=o=NaN),new mt(t,r,o,i)}function Gy(t){return t instanceof Es||(t=xr(t)),t?(t=t.rgb(),new mt(t.r,t.g,t.b,t.opacity)):new mt}function Zu(t,r,o,i){return arguments.length===1?Gy(t):new mt(t,r,o,i??1)}function mt(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}pc(mt,Zu,Lh(Es,{brighter(t){return t=t==null?gl:Math.pow(gl,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gs:Math.pow(gs,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mt(mr(this.r),mr(this.g),mr(this.b),xl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hp,formatHex:hp,formatHex8:Ky,formatRgb:mp,toString:mp}));function hp(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}`}function Ky(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}${pr((isNaN(this.opacity)?1:this.opacity)*255)}`}function mp(){const t=xl(this.opacity);return`${t===1?"rgb(":"rgba("}${mr(this.r)}, ${mr(this.g)}, ${mr(this.b)}${t===1?")":`, ${t})`}`}function xl(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pr(t){return t=mr(t),(t<16?"0":"")+t.toString(16)}function gp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Ht(t,r,o,i)}function Rh(t){if(t instanceof Ht)return new Ht(t.h,t.s,t.l,t.opacity);if(t instanceof Es||(t=xr(t)),!t)return new Ht;if(t instanceof Ht)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),u=Math.max(r,o,i),c=NaN,p=u-l,h=(u+l)/2;return p?(r===u?c=(o-i)/p+(o<i)*6:o===u?c=(i-r)/p+2:c=(r-o)/p+4,p/=h<.5?u+l:2-u-l,c*=60):p=h>0&&h<1?0:c,new Ht(c,p,h,t.opacity)}function qy(t,r,o,i){return arguments.length===1?Rh(t):new Ht(t,r,o,i??1)}function Ht(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}pc(Ht,qy,Lh(Es,{brighter(t){return t=t==null?gl:Math.pow(gl,t),new Ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gs:Math.pow(gs,t),new Ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new mt(Lu(t>=240?t-240:t+120,l,i),Lu(t,l,i),Lu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Ht(xp(this.h),Zi(this.s),Zi(this.l),xl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xl(this.opacity);return`${t===1?"hsl(":"hsla("}${xp(this.h)}, ${Zi(this.s)*100}%, ${Zi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xp(t){return t=(t||0)%360,t<0?t+360:t}function Zi(t){return Math.max(0,Math.min(1,t||0))}function Lu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const hc=t=>()=>t;function Zy(t,r){return function(o){return t+o*r}}function Jy(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function ev(t){return(t=+t)==1?Fh:function(r,o){return o-r?Jy(r,o,t):hc(isNaN(r)?o:r)}}function Fh(t,r){var o=r-t;return o?Zy(t,o):hc(isNaN(t)?r:t)}const yl=(function t(r){var o=ev(r);function i(l,u){var c=o((l=Zu(l)).r,(u=Zu(u)).r),p=o(l.g,u.g),h=o(l.b,u.b),m=Fh(l.opacity,u.opacity);return function(v){return l.r=c(v),l.g=p(v),l.b=h(v),l.opacity=m(v),l+""}}return i.gamma=t,i})(1);function tv(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(u){for(l=0;l<o;++l)i[l]=t[l]*(1-u)+r[l]*u;return i}}function nv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),u=new Array(o),c;for(c=0;c<i;++c)l[c]=ps(t[c],r[c]);for(;c<o;++c)u[c]=r[c];return function(p){for(c=0;c<i;++c)u[c]=l[c](p);return u}}function ov(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function qt(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function sv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=ps(t[l],r[l]):i[l]=r[l];return function(u){for(l in o)i[l]=o[l](u);return i}}var Ju=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ru=new RegExp(Ju.source,"g");function iv(t){return function(){return t}}function lv(t){return function(r){return t(r)+""}}function Hh(t,r){var o=Ju.lastIndex=Ru.lastIndex=0,i,l,u,c=-1,p=[],h=[];for(t=t+"",r=r+"";(i=Ju.exec(t))&&(l=Ru.exec(r));)(u=l.index)>o&&(u=r.slice(o,u),p[c]?p[c]+=u:p[++c]=u),(i=i[0])===(l=l[0])?p[c]?p[c]+=l:p[++c]=l:(p[++c]=null,h.push({i:c,x:qt(i,l)})),o=Ru.lastIndex;return o<r.length&&(u=r.slice(o),p[c]?p[c]+=u:p[++c]=u),p.length<2?h[0]?lv(h[0].x):iv(r):(r=h.length,function(m){for(var v=0,x;v<r;++v)p[(x=h[v]).i]=x.x(m);return p.join("")})}function ps(t,r){var o=typeof r,i;return r==null||o==="boolean"?hc(r):(o==="number"?qt:o==="string"?(i=xr(r))?(r=i,yl):Hh:r instanceof xr?yl:r instanceof Date?ov:nv(r)?tv:Array.isArray(r)?rv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?sv:qt)(t,r)}var yp=180/Math.PI,ec={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vh(t,r,o,i,l,u){var c,p,h;return(c=Math.sqrt(t*t+r*r))&&(t/=c,r/=c),(h=t*o+r*i)&&(o-=t*h,i-=r*h),(p=Math.sqrt(o*o+i*i))&&(o/=p,i/=p,h/=p),t*i<r*o&&(t=-t,r=-r,h=-h,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(r,t)*yp,skewX:Math.atan(h)*yp,scaleX:c,scaleY:p}}var Ji;function av(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?ec:Vh(r.a,r.b,r.c,r.d,r.e,r.f)}function uv(t){return t==null||(Ji||(Ji=document.createElementNS("http://www.w3.org/2000/svg","g")),Ji.setAttribute("transform",t),!(t=Ji.transform.baseVal.consolidate()))?ec:(t=t.matrix,Vh(t.a,t.b,t.c,t.d,t.e,t.f))}function Bh(t,r,o,i){function l(m){return m.length?m.pop()+" ":""}function u(m,v,x,g,S,w){if(m!==x||v!==g){var N=S.push("translate(",null,r,null,o);w.push({i:N-4,x:qt(m,x)},{i:N-2,x:qt(v,g)})}else(x||g)&&S.push("translate("+x+r+g+o)}function c(m,v,x,g){m!==v?(m-v>180?v+=360:v-m>180&&(m+=360),g.push({i:x.push(l(x)+"rotate(",null,i)-2,x:qt(m,v)})):v&&x.push(l(x)+"rotate("+v+i)}function p(m,v,x,g){m!==v?g.push({i:x.push(l(x)+"skewX(",null,i)-2,x:qt(m,v)}):v&&x.push(l(x)+"skewX("+v+i)}function h(m,v,x,g,S,w){if(m!==x||v!==g){var N=S.push(l(S)+"scale(",null,",",null,")");w.push({i:N-4,x:qt(m,x)},{i:N-2,x:qt(v,g)})}else(x!==1||g!==1)&&S.push(l(S)+"scale("+x+","+g+")")}return function(m,v){var x=[],g=[];return m=t(m),v=t(v),u(m.translateX,m.translateY,v.translateX,v.translateY,x,g),c(m.rotate,v.rotate,x,g),p(m.skewX,v.skewX,x,g),h(m.scaleX,m.scaleY,v.scaleX,v.scaleY,x,g),m=v=null,function(S){for(var w=-1,N=g.length,k;++w<N;)x[(k=g[w]).i]=k.x(S);return x.join("")}}}var cv=Bh(av,"px, ","px)","deg)"),dv=Bh(uv,", ",")",")"),fv=1e-12;function vp(t){return((t=Math.exp(t))+1/t)/2}function pv(t){return((t=Math.exp(t))-1/t)/2}function hv(t){return((t=Math.exp(2*t))-1)/(t+1)}const cl=(function t(r,o,i){function l(u,c){var p=u[0],h=u[1],m=u[2],v=c[0],x=c[1],g=c[2],S=v-p,w=x-h,N=S*S+w*w,k,I;if(N<fv)I=Math.log(g/m)/r,k=function(V){return[p+V*S,h+V*w,m*Math.exp(r*V*I)]};else{var M=Math.sqrt(N),_=(g*g-m*m+i*N)/(2*m*o*M),C=(g*g-m*m-i*N)/(2*g*o*M),W=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(C*C+1)-C);I=(T-W)/r,k=function(V){var K=V*I,O=vp(W),Y=m/(o*M)*(O*hv(r*K+W)-pv(W));return[p+Y*S,h+Y*w,m*O/vp(r*K+W)]}}return k.duration=I*1e3*r/Math.SQRT2,k}return l.rho=function(u){var c=Math.max(.001,+u),p=c*c,h=p*p;return t(c,p,h)},l})(Math.SQRT2,2,4);var uo=0,ds=0,ls=0,Wh=1e3,vl,fs,wl=0,yr=0,jl=0,ys=typeof performance=="object"&&performance.now?performance:Date,Uh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mc(){return yr||(Uh(mv),yr=ys.now()+jl)}function mv(){yr=0}function Sl(){this._call=this._time=this._next=null}Sl.prototype=Yh.prototype={constructor:Sl,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?mc():+o)+(r==null?0:+r),!this._next&&fs!==this&&(fs?fs._next=this:vl=this,fs=this),this._call=t,this._time=o,tc()},stop:function(){this._call&&(this._call=null,this._time=1/0,tc())}};function Yh(t,r,o){var i=new Sl;return i.restart(t,r,o),i}function gv(){mc(),++uo;for(var t=vl,r;t;)(r=yr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--uo}function wp(){yr=(wl=ys.now())+jl,uo=ds=0;try{gv()}finally{uo=0,yv(),yr=0}}function xv(){var t=ys.now(),r=t-wl;r>Wh&&(jl-=r,wl=t)}function yv(){for(var t,r=vl,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:vl=o);fs=t,tc(i)}function tc(t){if(!uo){ds&&(ds=clearTimeout(ds));var r=t-yr;r>24?(t<1/0&&(ds=setTimeout(wp,t-ys.now()-jl)),ls&&(ls=clearInterval(ls))):(ls||(wl=ys.now(),ls=setInterval(xv,Wh)),uo=1,Uh(wp))}}function Sp(t,r,o){var i=new Sl;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var vv=El("start","end","cancel","interrupt"),wv=[],Xh=0,Np=1,nc=2,dl=3,kp=4,rc=5,fl=6;function Ml(t,r,o,i,l,u){var c=t.__transition;if(!c)t.__transition={};else if(o in c)return;Sv(t,o,{name:r,index:i,group:l,on:vv,tween:wv,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Xh})}function gc(t,r){var o=Wt(t,r);if(o.state>Xh)throw new Error("too late; already scheduled");return o}function tn(t,r){var o=Wt(t,r);if(o.state>dl)throw new Error("too late; already running");return o}function Wt(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function Sv(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=Yh(u,0,o.time);function u(m){o.state=Np,o.timer.restart(c,o.delay,o.time),o.delay<=m&&c(m-o.delay)}function c(m){var v,x,g,S;if(o.state!==Np)return h();for(v in i)if(S=i[v],S.name===o.name){if(S.state===dl)return Sp(c);S.state===kp?(S.state=fl,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete i[v]):+v<r&&(S.state=fl,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete i[v])}if(Sp(function(){o.state===dl&&(o.state=kp,o.timer.restart(p,o.delay,o.time),p(m))}),o.state=nc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===nc){for(o.state=dl,l=new Array(g=o.tween.length),v=0,x=-1;v<g;++v)(S=o.tween[v].value.call(t,t.__data__,o.index,o.group))&&(l[++x]=S);l.length=x+1}}function p(m){for(var v=m<o.duration?o.ease.call(null,m/o.duration):(o.timer.restart(h),o.state=rc,1),x=-1,g=l.length;++x<g;)l[x].call(t,v);o.state===rc&&(o.on.call("end",t,t.__data__,o.index,o.group),h())}function h(){o.state=fl,o.timer.stop(),delete i[r];for(var m in i)return;delete t.__transition}}function pl(t,r){var o=t.__transition,i,l,u=!0,c;if(o){r=r==null?null:r+"";for(c in o){if((i=o[c]).name!==r){u=!1;continue}l=i.state>nc&&i.state<rc,i.state=fl,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[c]}u&&delete t.__transition}}function Nv(t){return this.each(function(){pl(this,t)})}function kv(t,r){var o,i;return function(){var l=tn(this,t),u=l.tween;if(u!==o){i=o=u;for(var c=0,p=i.length;c<p;++c)if(i[c].name===r){i=i.slice(),i.splice(c,1);break}}l.tween=i}}function Iv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var u=tn(this,t),c=u.tween;if(c!==i){l=(i=c).slice();for(var p={name:r,value:o},h=0,m=l.length;h<m;++h)if(l[h].name===r){l[h]=p;break}h===m&&l.push(p)}u.tween=l}}function _v(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=Wt(this.node(),o).tween,l=0,u=i.length,c;l<u;++l)if((c=i[l]).name===t)return c.value;return null}return this.each((r==null?kv:Iv)(o,t,r))}function xc(t,r,o){var i=t._id;return t.each(function(){var l=tn(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return Wt(l,i).value[r]}}function Qh(t,r){var o;return(typeof r=="number"?qt:r instanceof xr?yl:(o=xr(r))?(r=o,yl):Hh)(t,r)}function Ev(t){return function(){this.removeAttribute(t)}}function Cv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jv(t,r,o){var i,l=o+"",u;return function(){var c=this.getAttribute(t);return c===l?null:c===i?u:u=r(i=c,o)}}function Mv(t,r,o){var i,l=o+"",u;return function(){var c=this.getAttributeNS(t.space,t.local);return c===l?null:c===i?u:u=r(i=c,o)}}function bv(t,r,o){var i,l,u;return function(){var c,p=o(this),h;return p==null?void this.removeAttribute(t):(c=this.getAttribute(t),h=p+"",c===h?null:c===i&&h===l?u:(l=h,u=r(i=c,p)))}}function Pv(t,r,o){var i,l,u;return function(){var c,p=o(this),h;return p==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),h=p+"",c===h?null:c===i&&h===l?u:(l=h,u=r(i=c,p)))}}function Dv(t,r){var o=Cl(t),i=o==="transform"?dv:Qh;return this.attrTween(t,typeof r=="function"?(o.local?Pv:bv)(o,i,xc(this,"attr."+t,r)):r==null?(o.local?Cv:Ev)(o):(o.local?Mv:jv)(o,i,r))}function Tv(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function Ov(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function Av(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Ov(t,u)),o}return l._value=r,l}function zv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Tv(t,u)),o}return l._value=r,l}function $v(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=Cl(t);return this.tween(o,(i.local?Av:zv)(i,r))}function Lv(t,r){return function(){gc(this,t).delay=+r.apply(this,arguments)}}function Rv(t,r){return r=+r,function(){gc(this,t).delay=r}}function Fv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Lv:Rv)(r,t)):Wt(this.node(),r).delay}function Hv(t,r){return function(){tn(this,t).duration=+r.apply(this,arguments)}}function Vv(t,r){return r=+r,function(){tn(this,t).duration=r}}function Bv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Hv:Vv)(r,t)):Wt(this.node(),r).duration}function Wv(t,r){if(typeof r!="function")throw new Error;return function(){tn(this,t).ease=r}}function Uv(t){var r=this._id;return arguments.length?this.each(Wv(r,t)):Wt(this.node(),r).ease}function Yv(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;tn(this,t).ease=o}}function Xv(t){if(typeof t!="function")throw new Error;return this.each(Yv(this._id,t))}function Qv(t){typeof t!="function"&&(t=_h(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,p=i[l]=[],h,m=0;m<c;++m)(h=u[m])&&t.call(h,h.__data__,m,u)&&p.push(h);return new yn(i,this._parents,this._name,this._id)}function Gv(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,u=Math.min(i,l),c=new Array(i),p=0;p<u;++p)for(var h=r[p],m=o[p],v=h.length,x=c[p]=new Array(v),g,S=0;S<v;++S)(g=h[S]||m[S])&&(x[S]=g);for(;p<i;++p)c[p]=r[p];return new yn(c,this._parents,this._name,this._id)}function Kv(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function qv(t,r,o){var i,l,u=Kv(r)?gc:tn;return function(){var c=u(this,t),p=c.on;p!==i&&(l=(i=p).copy()).on(r,o),c.on=l}}function Zv(t,r){var o=this._id;return arguments.length<2?Wt(this.node(),o).on.on(t):this.each(qv(o,t,r))}function Jv(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function ew(){return this.on("end.remove",Jv(this._id))}function tw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=dc(t));for(var i=this._groups,l=i.length,u=new Array(l),c=0;c<l;++c)for(var p=i[c],h=p.length,m=u[c]=new Array(h),v,x,g=0;g<h;++g)(v=p[g])&&(x=t.call(v,v.__data__,g,p))&&("__data__"in v&&(x.__data__=v.__data__),m[g]=x,Ml(m[g],r,o,g,m,Wt(v,o)));return new yn(u,this._parents,r,o)}function nw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Ih(t));for(var i=this._groups,l=i.length,u=[],c=[],p=0;p<l;++p)for(var h=i[p],m=h.length,v,x=0;x<m;++x)if(v=h[x]){for(var g=t.call(v,v.__data__,x,h),S,w=Wt(v,o),N=0,k=g.length;N<k;++N)(S=g[N])&&Ml(S,r,o,N,g,w);u.push(g),c.push(v)}return new yn(u,c,r,o)}var rw=_s.prototype.constructor;function ow(){return new rw(this._groups,this._parents)}function sw(t,r){var o,i,l;return function(){var u=ao(this,t),c=(this.style.removeProperty(t),ao(this,t));return u===c?null:u===o&&c===i?l:l=r(o=u,i=c)}}function Gh(t){return function(){this.style.removeProperty(t)}}function iw(t,r,o){var i,l=o+"",u;return function(){var c=ao(this,t);return c===l?null:c===i?u:u=r(i=c,o)}}function lw(t,r,o){var i,l,u;return function(){var c=ao(this,t),p=o(this),h=p+"";return p==null&&(h=p=(this.style.removeProperty(t),ao(this,t))),c===h?null:c===i&&h===l?u:(l=h,u=r(i=c,p))}}function aw(t,r){var o,i,l,u="style."+r,c="end."+u,p;return function(){var h=tn(this,t),m=h.on,v=h.value[u]==null?p||(p=Gh(r)):void 0;(m!==o||l!==v)&&(i=(o=m).copy()).on(c,l=v),h.on=i}}function uw(t,r,o){var i=(t+="")=="transform"?cv:Qh;return r==null?this.styleTween(t,sw(t,i)).on("end.style."+t,Gh(t)):typeof r=="function"?this.styleTween(t,lw(t,i,xc(this,"style."+t,r))).each(aw(this._id,t)):this.styleTween(t,iw(t,i,r),o).on("end.style."+t,null)}function cw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function dw(t,r,o){var i,l;function u(){var c=r.apply(this,arguments);return c!==l&&(i=(l=c)&&cw(t,c,o)),i}return u._value=r,u}function fw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,dw(t,r,o??""))}function pw(t){return function(){this.textContent=t}}function hw(t){return function(){var r=t(this);this.textContent=r??""}}function mw(t){return this.tween("text",typeof t=="function"?hw(xc(this,"text",t)):pw(t==null?"":t+""))}function gw(t){return function(r){this.textContent=t.call(this,r)}}function xw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&gw(l)),r}return i._value=t,i}function yw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,xw(t))}function vw(){for(var t=this._name,r=this._id,o=Kh(),i=this._groups,l=i.length,u=0;u<l;++u)for(var c=i[u],p=c.length,h,m=0;m<p;++m)if(h=c[m]){var v=Wt(h,r);Ml(h,t,o,m,c,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new yn(i,this._parents,t,o)}function ww(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(u,c){var p={value:c},h={value:function(){--l===0&&u()}};o.each(function(){var m=tn(this,i),v=m.on;v!==t&&(r=(t=v).copy(),r._.cancel.push(p),r._.interrupt.push(p),r._.end.push(h)),m.on=r}),l===0&&u()})}var Sw=0;function yn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function Kh(){return++Sw}var mn=_s.prototype;yn.prototype={constructor:yn,select:tw,selectAll:nw,selectChild:mn.selectChild,selectChildren:mn.selectChildren,filter:Qv,merge:Gv,selection:ow,transition:vw,call:mn.call,nodes:mn.nodes,node:mn.node,size:mn.size,empty:mn.empty,each:mn.each,on:Zv,attr:Dv,attrTween:$v,style:uw,styleTween:fw,text:mw,textTween:yw,remove:ew,tween:_v,delay:Fv,duration:Bv,ease:Uv,easeVarying:Xv,end:ww,[Symbol.iterator]:mn[Symbol.iterator]};function Nw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var kw={time:null,delay:0,duration:250,ease:Nw};function Iw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function _w(t){var r,o;t instanceof yn?(r=t._id,t=t._name):(r=Kh(),(o=kw).time=mc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,u=0;u<l;++u)for(var c=i[u],p=c.length,h,m=0;m<p;++m)(h=c[m])&&Ml(h,t,r,m,c,o||Iw(h,r));return new yn(i,this._parents,t,r)}_s.prototype.interrupt=Nv;_s.prototype.transition=_w;const el=t=>()=>t;function Ew(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function xn(t,r,o){this.k=t,this.x=r,this.y=o}xn.prototype={constructor:xn,scale:function(t){return t===1?this:new xn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new xn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bl=new xn(1,0,0);qh.prototype=xn.prototype;function qh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return bl;return t.__zoom}function Fu(t){t.stopImmediatePropagation()}function as(t){t.preventDefault(),t.stopImmediatePropagation()}function Cw(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function jw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ip(){return this.__zoom||bl}function Mw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function bw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],u=t.invertY(r[0][1])-o[0][1],c=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function Zh(){var t=Cw,r=jw,o=Pw,i=Mw,l=bw,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],p=250,h=cl,m=El("start","zoom","end"),v,x,g,S=500,w=150,N=0,k=10;function I(b){b.property("__zoom",Ip).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",Y).filter(l).on("touchstart.zoom",Q).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function(b,B,R,L){var D=b.selection?b.selection():b;D.property("__zoom",Ip),b!==D?W(b,B,R,L):D.interrupt().each(function(){T(this,arguments).event(L).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},I.scaleBy=function(b,B,R,L){I.scaleTo(b,function(){var D=this.__zoom.k,$=typeof B=="function"?B.apply(this,arguments):B;return D*$},R,L)},I.scaleTo=function(b,B,R,L){I.transform(b,function(){var D=r.apply(this,arguments),$=this.__zoom,j=R==null?C(D):typeof R=="function"?R.apply(this,arguments):R,P=$.invert(j),z=typeof B=="function"?B.apply(this,arguments):B;return o(_(M($,z),j,P),D,c)},R,L)},I.translateBy=function(b,B,R,L){I.transform(b,function(){return o(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof R=="function"?R.apply(this,arguments):R),r.apply(this,arguments),c)},null,L)},I.translateTo=function(b,B,R,L,D){I.transform(b,function(){var $=r.apply(this,arguments),j=this.__zoom,P=L==null?C($):typeof L=="function"?L.apply(this,arguments):L;return o(bl.translate(P[0],P[1]).scale(j.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof R=="function"?-R.apply(this,arguments):-R),$,c)},L,D)};function M(b,B){return B=Math.max(u[0],Math.min(u[1],B)),B===b.k?b:new xn(B,b.x,b.y)}function _(b,B,R){var L=B[0]-R[0]*b.k,D=B[1]-R[1]*b.k;return L===b.x&&D===b.y?b:new xn(b.k,L,D)}function C(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function W(b,B,R,L){b.on("start.zoom",function(){T(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(L).end()}).tween("zoom",function(){var D=this,$=arguments,j=T(D,$).event(L),P=r.apply(D,$),z=R==null?C(P):typeof R=="function"?R.apply(D,$):R,q=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),ee=D.__zoom,ne=typeof B=="function"?B.apply(D,$):B,oe=h(ee.invert(z).concat(q/ee.k),ne.invert(z).concat(q/ne.k));return function(ae){if(ae===1)ae=ne;else{var re=oe(ae),ce=q/re[2];ae=new xn(ce,z[0]-re[0]*ce,z[1]-re[1]*ce)}j.zoom(null,ae)}})}function T(b,B,R){return!R&&b.__zooming||new V(b,B)}function V(b,B){this.that=b,this.args=B,this.active=0,this.sourceEvent=null,this.extent=r.apply(b,B),this.taps=0}V.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,B){return this.mouse&&b!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var B=kt(this.that).datum();m.call(b,this.that,new Ew(b,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:m}),B)}};function K(b,...B){if(!t.apply(this,arguments))return;var R=T(this,B).event(b),L=this.__zoom,D=Math.max(u[0],Math.min(u[1],L.k*Math.pow(2,i.apply(this,arguments)))),$=Ft(b);if(R.wheel)(R.mouse[0][0]!==$[0]||R.mouse[0][1]!==$[1])&&(R.mouse[1]=L.invert(R.mouse[0]=$)),clearTimeout(R.wheel);else{if(L.k===D)return;R.mouse=[$,L.invert($)],pl(this),R.start()}as(b),R.wheel=setTimeout(j,w),R.zoom("mouse",o(_(M(L,D),R.mouse[0],R.mouse[1]),R.extent,c));function j(){R.wheel=null,R.end()}}function O(b,...B){if(g||!t.apply(this,arguments))return;var R=b.currentTarget,L=T(this,B,!0).event(b),D=kt(b.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",q,!0),$=Ft(b,R),j=b.clientX,P=b.clientY;Ah(b.view),Fu(b),L.mouse=[$,this.__zoom.invert($)],pl(this),L.start();function z(ee){if(as(ee),!L.moved){var ne=ee.clientX-j,oe=ee.clientY-P;L.moved=ne*ne+oe*oe>N}L.event(ee).zoom("mouse",o(_(L.that.__zoom,L.mouse[0]=Ft(ee,R),L.mouse[1]),L.extent,c))}function q(ee){D.on("mousemove.zoom mouseup.zoom",null),zh(ee.view,L.moved),as(ee),L.event(ee).end()}}function Y(b,...B){if(t.apply(this,arguments)){var R=this.__zoom,L=Ft(b.changedTouches?b.changedTouches[0]:b,this),D=R.invert(L),$=R.k*(b.shiftKey?.5:2),j=o(_(M(R,$),L,D),r.apply(this,B),c);as(b),p>0?kt(this).transition().duration(p).call(W,j,L,b):kt(this).call(I.transform,j,L,b)}}function Q(b,...B){if(t.apply(this,arguments)){var R=b.touches,L=R.length,D=T(this,B,b.changedTouches.length===L).event(b),$,j,P,z;for(Fu(b),j=0;j<L;++j)P=R[j],z=Ft(P,this),z=[z,this.__zoom.invert(z),P.identifier],D.touch0?!D.touch1&&D.touch0[2]!==z[2]&&(D.touch1=z,D.taps=0):(D.touch0=z,$=!0,D.taps=1+!!v);v&&(v=clearTimeout(v)),$&&(D.taps<2&&(x=z[0],v=setTimeout(function(){v=null},S)),pl(this),D.start())}}function A(b,...B){if(this.__zooming){var R=T(this,B).event(b),L=b.changedTouches,D=L.length,$,j,P,z;for(as(b),$=0;$<D;++$)j=L[$],P=Ft(j,this),R.touch0&&R.touch0[2]===j.identifier?R.touch0[0]=P:R.touch1&&R.touch1[2]===j.identifier&&(R.touch1[0]=P);if(j=R.that.__zoom,R.touch1){var q=R.touch0[0],ee=R.touch0[1],ne=R.touch1[0],oe=R.touch1[1],ae=(ae=ne[0]-q[0])*ae+(ae=ne[1]-q[1])*ae,re=(re=oe[0]-ee[0])*re+(re=oe[1]-ee[1])*re;j=M(j,Math.sqrt(ae/re)),P=[(q[0]+ne[0])/2,(q[1]+ne[1])/2],z=[(ee[0]+oe[0])/2,(ee[1]+oe[1])/2]}else if(R.touch0)P=R.touch0[0],z=R.touch0[1];else return;R.zoom("touch",o(_(j,P,z),R.extent,c))}}function U(b,...B){if(this.__zooming){var R=T(this,B).event(b),L=b.changedTouches,D=L.length,$,j;for(Fu(b),g&&clearTimeout(g),g=setTimeout(function(){g=null},S),$=0;$<D;++$)j=L[$],R.touch0&&R.touch0[2]===j.identifier?delete R.touch0:R.touch1&&R.touch1[2]===j.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(j=Ft(j,this),Math.hypot(x[0]-j[0],x[1]-j[1])<k)){var P=kt(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return I.wheelDelta=function(b){return arguments.length?(i=typeof b=="function"?b:el(+b),I):i},I.filter=function(b){return arguments.length?(t=typeof b=="function"?b:el(!!b),I):t},I.touchable=function(b){return arguments.length?(l=typeof b=="function"?b:el(!!b),I):l},I.extent=function(b){return arguments.length?(r=typeof b=="function"?b:el([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),I):r},I.scaleExtent=function(b){return arguments.length?(u[0]=+b[0],u[1]=+b[1],I):[u[0],u[1]]},I.translateExtent=function(b){return arguments.length?(c[0][0]=+b[0][0],c[1][0]=+b[1][0],c[0][1]=+b[0][1],c[1][1]=+b[1][1],I):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},I.constrain=function(b){return arguments.length?(o=b,I):o},I.duration=function(b){return arguments.length?(p=+b,I):p},I.interpolate=function(b){return arguments.length?(h=b,I):h},I.on=function(){var b=m.on.apply(m,arguments);return b===m?I:b},I.clickDistance=function(b){return arguments.length?(N=(b=+b)*b,I):Math.sqrt(N)},I.tapDistance=function(b){return arguments.length?(k=+b,I):k},I}const en={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},vs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Jh=["Enter"," ","Escape"],em={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var co;(function(t){t.Strict="strict",t.Loose="loose"})(co||(co={}));var gr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(gr||(gr={}));var ws;(function(t){t.Partial="partial",t.Full="full"})(ws||(ws={}));const tm={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Wn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Wn||(Wn={}));var Nl;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Nl||(Nl={}));var xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(xe||(xe={}));const _p={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top};function nm(t){return t===null?null:t?"valid":"invalid"}const rm=t=>"id"in t&&"source"in t&&"target"in t,Dw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),yc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Cs=(t,r=[0,0])=>{const{width:o,height:i}=vn(t),l=t.origin??r,u=o*l[0],c=i*l[1];return{x:t.position.x-u,y:t.position.y-c}},Tw=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const u=typeof l=="string";let c=!r.nodeLookup&&!u?l:void 0;r.nodeLookup&&(c=u?r.nodeLookup.get(l):yc(l)?l:r.nodeLookup.get(l.id));const p=c?kl(c,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Pl(i,p)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Dl(o)},js=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Pl(o,kl(l)),i=!0)}),i?Dl(o):{x:0,y:0,width:0,height:0}},vc=(t,r,[o,i,l]=[0,0,1],u=!1,c=!1)=>{const p={...bs(r,[o,i,l]),width:r.width/l,height:r.height/l},h=[];for(const m of t.values()){const{measured:v,selectable:x=!0,hidden:g=!1}=m;if(c&&!x||g)continue;const S=v.width??m.width??m.initialWidth??null,w=v.height??m.height??m.initialHeight??null,N=Ss(p,po(m)),k=(S??0)*(w??0),I=u&&N>0;(!m.internals.handleBounds||I||N>=k||m.dragging)&&h.push(m)}return h},Ow=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function Aw(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function zw({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:u},c){if(t.size===0)return Promise.resolve(!0);const p=Aw(t,c),h=js(p),m=wc(h,r,o,(c==null?void 0:c.minZoom)??l,(c==null?void 0:c.maxZoom)??u,(c==null?void 0:c.padding)??.1);return await i.setViewport(m,{duration:c==null?void 0:c.duration,ease:c==null?void 0:c.ease,interpolate:c==null?void 0:c.interpolate}),Promise.resolve(!0)}function om({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:u}){const c=o.get(t),p=c.parentId?o.get(c.parentId):void 0,{x:h,y:m}=p?p.internals.positionAbsolute:{x:0,y:0},v=c.origin??i;let x=c.extent||l;if(c.extent==="parent"&&!c.expandParent)if(!p)u==null||u("005",en.error005());else{const S=p.measured.width,w=p.measured.height;S&&w&&(x=[[h,m],[h+S,m+w]])}else p&&ho(c.extent)&&(x=[[c.extent[0][0]+h,c.extent[0][1]+m],[c.extent[1][0]+h,c.extent[1][1]+m]]);const g=ho(x)?vr(r,x,c.measured):r;return(c.measured.width===void 0||c.measured.height===void 0)&&(u==null||u("015",en.error015())),{position:{x:g.x-h+(c.measured.width??0)*v[0],y:g.y-m+(c.measured.height??0)*v[1]},positionAbsolute:g}}async function $w({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const u=new Set(t.map(g=>g.id)),c=[];for(const g of o){if(g.deletable===!1)continue;const S=u.has(g.id),w=!S&&g.parentId&&c.find(N=>N.id===g.parentId);(S||w)&&c.push(g)}const p=new Set(r.map(g=>g.id)),h=i.filter(g=>g.deletable!==!1),v=Ow(c,h);for(const g of h)p.has(g.id)&&!v.find(w=>w.id===g.id)&&v.push(g);if(!l)return{edges:v,nodes:c};const x=await l({nodes:c,edges:v});return typeof x=="boolean"?x?{edges:v,nodes:c}:{edges:[],nodes:[]}:x}const fo=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),vr=(t={x:0,y:0},r,o)=>({x:fo(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:fo(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function sm(t,r,o){const{width:i,height:l}=vn(o),{x:u,y:c}=o.internals.positionAbsolute;return vr(t,[[u,c],[u+i,c+l]],r)}const Ep=(t,r,o)=>t<r?fo(Math.abs(t-r),1,r)/r:t>o?-fo(Math.abs(t-o),1,r)/r:0,im=(t,r,o=15,i=40)=>{const l=Ep(t.x,i,r.width-i)*o,u=Ep(t.y,i,r.height-i)*o;return[l,u]},Pl=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),oc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Dl=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),po=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=yc(t)?t.internals.positionAbsolute:Cs(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0}},kl=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=yc(t)?t.internals.positionAbsolute:Cs(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0)}},lm=(t,r)=>Dl(Pl(oc(t),oc(r))),Ss=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Cp=t=>Vt(t.width)&&Vt(t.height)&&Vt(t.x)&&Vt(t.y),Vt=t=>!isNaN(t)&&isFinite(t),Lw=(t,r)=>{},Ms=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),bs=({x:t,y:r},[o,i,l],u=!1,c=[1,1])=>{const p={x:(t-o)/l,y:(r-i)/l};return u?Ms(p,c):p},Il=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function to(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Rw(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=to(t,o),l=to(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=to(t.top??t.y??0,o),l=to(t.bottom??t.y??0,o),u=to(t.left??t.x??0,r),c=to(t.right??t.x??0,r);return{top:i,right:c,bottom:l,left:u,x:u+c,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Fw(t,r,o,i,l,u){const{x:c,y:p}=Il(t,[r,o,i]),{x:h,y:m}=Il({x:t.x+t.width,y:t.y+t.height},[r,o,i]),v=l-h,x=u-m;return{left:Math.floor(c),top:Math.floor(p),right:Math.floor(v),bottom:Math.floor(x)}}const wc=(t,r,o,i,l,u)=>{const c=Rw(u,r,o),p=(r-c.x)/t.width,h=(o-c.y)/t.height,m=Math.min(p,h),v=fo(m,i,l),x=t.x+t.width/2,g=t.y+t.height/2,S=r/2-x*v,w=o/2-g*v,N=Fw(t,S,w,v,r,o),k={left:Math.min(N.left-c.left,0),top:Math.min(N.top-c.top,0),right:Math.min(N.right-c.right,0),bottom:Math.min(N.bottom-c.bottom,0)};return{x:S-k.left+k.right,y:w-k.top+k.bottom,zoom:v}},Ns=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function ho(t){return t!=null&&t!=="parent"}function vn(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function am(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function um(t,r={width:0,height:0},o,i,l){const u={...t},c=i.get(o);if(c){const p=c.origin||l;u.x+=c.internals.positionAbsolute.x-(r.width??0)*p[0],u.y+=c.internals.positionAbsolute.y-(r.height??0)*p[1]}return u}function jp(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function Hw(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function Vw(t){return{...em,...t||{}}}function hs(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:u,y:c}=Bt(t),p=bs({x:u-((l==null?void 0:l.left)??0),y:c-((l==null?void 0:l.top)??0)},i),{x:h,y:m}=o?Ms(p,r):p;return{xSnapped:h,ySnapped:m,...p}}const Sc=t=>({width:t.offsetWidth,height:t.offsetHeight}),cm=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},Bw=["INPUT","SELECT","TEXTAREA"];function dm(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:Bw.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const fm=t=>"clientX"in t,Bt=(t,r)=>{var u,c;const o=fm(t),i=o?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,l=o?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Mp=(t,r,o,i,l)=>{const u=r.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(c=>{const p=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:l,position:c.getAttribute("data-handlepos"),x:(p.left-o.left)/i,y:(p.top-o.top)/i,...Sc(c)}})};function pm({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:p}){const h=t*.125+l*.375+c*.375+o*.125,m=r*.125+u*.375+p*.375+i*.125,v=Math.abs(h-t),x=Math.abs(m-r);return[h,m,v,x]}function tl(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function bp({pos:t,x1:r,y1:o,x2:i,y2:l,c:u}){switch(t){case xe.Left:return[r-tl(r-i,u),o];case xe.Right:return[r+tl(i-r,u),o];case xe.Top:return[r,o-tl(o-l,u)];case xe.Bottom:return[r,o+tl(l-o,u)]}}function Tl({sourceX:t,sourceY:r,sourcePosition:o=xe.Bottom,targetX:i,targetY:l,targetPosition:u=xe.Top,curvature:c=.25}){const[p,h]=bp({pos:o,x1:t,y1:r,x2:i,y2:l,c}),[m,v]=bp({pos:u,x1:i,y1:l,x2:t,y2:r,c}),[x,g,S,w]=pm({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:p,sourceControlY:h,targetControlX:m,targetControlY:v});return[`M${t},${r} C${p},${h} ${m},${v} ${i},${l}`,x,g,S,w]}function hm({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,u=o<t?o+l:o-l,c=Math.abs(i-r)/2,p=i<r?i+c:i-c;return[u,p,l,c]}function Ww({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const c=l&&o?i+1e3:i,p=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return c+p}function Uw({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const u=Pl(kl(t),kl(r));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return Ss(c,Dl(u))>0}const Yw=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,Xw=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),Qw=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||Yw;let l;return rm(t)?l={...t}:l={...t,id:i(t)},Xw(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function mm({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,u,c,p]=hm({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,u,c,p]}const Pp={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},Gw=({source:t,sourcePosition:r=xe.Bottom,target:o})=>r===xe.Left||r===xe.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},Dp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function Kw({source:t,sourcePosition:r=xe.Bottom,target:o,targetPosition:i=xe.Top,center:l,offset:u,stepPosition:c}){const p=Pp[r],h=Pp[i],m={x:t.x+p.x*u,y:t.y+p.y*u},v={x:o.x+h.x*u,y:o.y+h.y*u},x=Gw({source:m,sourcePosition:r,target:v}),g=x.x!==0?"x":"y",S=x[g];let w=[],N,k;const I={x:0,y:0},M={x:0,y:0},[,,_,C]=hm({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(p[g]*h[g]===-1){g==="x"?(N=l.x??m.x+(v.x-m.x)*c,k=l.y??(m.y+v.y)/2):(N=l.x??(m.x+v.x)/2,k=l.y??m.y+(v.y-m.y)*c);const T=[{x:N,y:m.y},{x:N,y:v.y}],V=[{x:m.x,y:k},{x:v.x,y:k}];p[g]===S?w=g==="x"?T:V:w=g==="x"?V:T}else{const T=[{x:m.x,y:v.y}],V=[{x:v.x,y:m.y}];if(g==="x"?w=p.x===S?V:T:w=p.y===S?T:V,r===i){const A=Math.abs(t[g]-o[g]);if(A<=u){const U=Math.min(u-1,u-A);p[g]===S?I[g]=(m[g]>t[g]?-1:1)*U:M[g]=(v[g]>o[g]?-1:1)*U}}if(r!==i){const A=g==="x"?"y":"x",U=p[g]===h[A],b=m[A]>v[A],B=m[A]<v[A];(p[g]===1&&(!U&&b||U&&B)||p[g]!==1&&(!U&&B||U&&b))&&(w=g==="x"?T:V)}const K={x:m.x+I.x,y:m.y+I.y},O={x:v.x+M.x,y:v.y+M.y},Y=Math.max(Math.abs(K.x-w[0].x),Math.abs(O.x-w[0].x)),Q=Math.max(Math.abs(K.y-w[0].y),Math.abs(O.y-w[0].y));Y>=Q?(N=(K.x+O.x)/2,k=w[0].y):(N=w[0].x,k=(K.y+O.y)/2)}return[[t,{x:m.x+I.x,y:m.y+I.y},...w,{x:v.x+M.x,y:v.y+M.y},o],N,k,_,C]}function qw(t,r,o,i){const l=Math.min(Dp(t,r)/2,Dp(r,o)/2,i),{x:u,y:c}=r;if(t.x===u&&u===o.x||t.y===c&&c===o.y)return`L${u} ${c}`;if(t.y===c){const m=t.x<o.x?-1:1,v=t.y<o.y?1:-1;return`L ${u+l*m},${c}Q ${u},${c} ${u},${c+l*v}`}const p=t.x<o.x?1:-1,h=t.y<o.y?-1:1;return`L ${u},${c+l*h}Q ${u},${c} ${u+l*p},${c}`}function sc({sourceX:t,sourceY:r,sourcePosition:o=xe.Bottom,targetX:i,targetY:l,targetPosition:u=xe.Top,borderRadius:c=5,centerX:p,centerY:h,offset:m=20,stepPosition:v=.5}){const[x,g,S,w,N]=Kw({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:u,center:{x:p,y:h},offset:m,stepPosition:v});return[x.reduce((I,M,_)=>{let C="";return _>0&&_<x.length-1?C=qw(x[_-1],M,x[_+1],c):C=`${_===0?"M":"L"}${M.x} ${M.y}`,I+=C,I},""),g,S,w,N]}function Tp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Zw(t){var x;const{sourceNode:r,targetNode:o}=t;if(!Tp(r)||!Tp(o))return null;const i=r.internals.handleBounds||Op(r.handles),l=o.internals.handleBounds||Op(o.handles),u=Ap((i==null?void 0:i.source)??[],t.sourceHandle),c=Ap(t.connectionMode===co.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!u||!c)return(x=t.onError)==null||x.call(t,"008",en.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const p=(u==null?void 0:u.position)||xe.Bottom,h=(c==null?void 0:c.position)||xe.Top,m=wr(r,u,p),v=wr(o,c,h);return{sourceX:m.x,sourceY:m.y,targetX:v.x,targetY:v.y,sourcePosition:p,targetPosition:h}}function Op(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function wr(t,r,o=xe.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,u=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:c,height:p}=r??vn(t);if(i)return{x:l+c/2,y:u+p/2};switch((r==null?void 0:r.position)??o){case xe.Top:return{x:l+c/2,y:u};case xe.Right:return{x:l+c,y:u+p/2};case xe.Bottom:return{x:l+c/2,y:u+p};case xe.Left:return{x:l,y:u+p/2}}}function Ap(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function ic(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Jw(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const u=new Set;return t.reduce((c,p)=>([p.markerStart||i,p.markerEnd||l].forEach(h=>{if(h&&typeof h=="object"){const m=ic(h,r);u.has(m)||(c.push({id:m,color:h.color||o,...h}),u.add(m))}}),c),[]).sort((c,p)=>c.id.localeCompare(p.id))}const gm=1e3,e1=10,Nc={nodeOrigin:[0,0],nodeExtent:vs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},t1={...Nc,checkEquality:!0};function kc(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function n1(t,r,o){const i=kc(Nc,o);for(const l of t.values())if(l.parentId)_c(l,t,r,i);else{const u=Cs(l,i.nodeOrigin),c=ho(l.extent)?l.extent:i.nodeExtent,p=vr(u,c,vn(l));l.internals.positionAbsolute=p}}function r1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(u):l.type==="target"&&i.push(u)}return{source:o,target:i}}function Ic(t){return t==="manual"}function lc(t,r,o,i={}){var m,v;const l=kc(t1,i),u={i:0},c=new Map(r),p=l!=null&&l.elevateNodesOnSelect&&!Ic(l.zIndexMode)?gm:0;let h=t.length>0;r.clear(),o.clear();for(const x of t){let g=c.get(x.id);if(l.checkEquality&&x===(g==null?void 0:g.internals.userNode))r.set(x.id,g);else{const S=Cs(x,l.nodeOrigin),w=ho(x.extent)?x.extent:l.nodeExtent,N=vr(S,w,vn(x));g={...l.defaults,...x,measured:{width:(m=x.measured)==null?void 0:m.width,height:(v=x.measured)==null?void 0:v.height},internals:{positionAbsolute:N,handleBounds:r1(x,g),z:xm(x,p,l.zIndexMode),userNode:x}},r.set(x.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(h=!1),x.parentId&&_c(g,r,o,i,u)}return h}function o1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function _c(t,r,o,i,l){const{elevateNodesOnSelect:u,nodeOrigin:c,nodeExtent:p,zIndexMode:h}=kc(Nc,i),m=t.parentId,v=r.get(m);if(!v){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}o1(t,o),l&&!v.parentId&&v.internals.rootParentIndex===void 0&&h==="auto"&&(v.internals.rootParentIndex=++l.i,v.internals.z=v.internals.z+l.i*e1),l&&v.internals.rootParentIndex!==void 0&&(l.i=v.internals.rootParentIndex);const x=u&&!Ic(h)?gm:0,{x:g,y:S,z:w}=s1(t,v,c,p,x,h),{positionAbsolute:N}=t.internals,k=g!==N.x||S!==N.y;(k||w!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:k?{x:g,y:S}:N,z:w}})}function xm(t,r,o){const i=Vt(t.zIndex)?t.zIndex:0;return Ic(o)?i:i+(t.selected?r:0)}function s1(t,r,o,i,l,u){const{x:c,y:p}=r.internals.positionAbsolute,h=vn(t),m=Cs(t,o),v=ho(t.extent)?vr(m,t.extent,h):m;let x=vr({x:c+v.x,y:p+v.y},i,h);t.extent==="parent"&&(x=sm(x,h,r));const g=xm(t,l,u),S=r.internals.z??0;return{x:x.x,y:x.y,z:S>=g?S+1:g}}function Ec(t,r,o,i=[0,0]){var c;const l=[],u=new Map;for(const p of t){const h=r.get(p.parentId);if(!h)continue;const m=((c=u.get(p.parentId))==null?void 0:c.expandedRect)??po(h),v=lm(m,p.rect);u.set(p.parentId,{expandedRect:v,parent:h})}return u.size>0&&u.forEach(({expandedRect:p,parent:h},m)=>{var _;const v=h.internals.positionAbsolute,x=vn(h),g=h.origin??i,S=p.x<v.x?Math.round(Math.abs(v.x-p.x)):0,w=p.y<v.y?Math.round(Math.abs(v.y-p.y)):0,N=Math.max(x.width,Math.round(p.width)),k=Math.max(x.height,Math.round(p.height)),I=(N-x.width)*g[0],M=(k-x.height)*g[1];(S>0||w>0||I||M)&&(l.push({id:m,type:"position",position:{x:h.position.x-S+I,y:h.position.y-w+M}}),(_=o.get(m))==null||_.forEach(C=>{t.some(W=>W.id===C.id)||l.push({id:C.id,type:"position",position:{x:C.position.x+S,y:C.position.y+w}})})),(x.width<p.width||x.height<p.height||S||w)&&l.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:N+(S?g[0]*S-I:0),height:k+(w?g[1]*w-M:0)}})}),l}function i1(t,r,o,i,l,u,c){const p=i==null?void 0:i.querySelector(".xyflow__viewport");let h=!1;if(!p)return{changes:[],updatedInternals:h};const m=[],v=window.getComputedStyle(p),{m22:x}=new window.DOMMatrixReadOnly(v.transform),g=[];for(const S of t.values()){const w=r.get(S.id);if(!w)continue;if(w.hidden){r.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),h=!0;continue}const N=Sc(S.nodeElement),k=w.measured.width!==N.width||w.measured.height!==N.height;if(!!(N.width&&N.height&&(k||!w.internals.handleBounds||S.force))){const M=S.nodeElement.getBoundingClientRect(),_=ho(w.extent)?w.extent:u;let{positionAbsolute:C}=w.internals;w.parentId&&w.extent==="parent"?C=sm(C,N,r.get(w.parentId)):_&&(C=vr(C,_,N));const W={...w,measured:N,internals:{...w.internals,positionAbsolute:C,handleBounds:{source:Mp("source",S.nodeElement,M,x,w.id),target:Mp("target",S.nodeElement,M,x,w.id)}}};r.set(w.id,W),w.parentId&&_c(W,r,o,{nodeOrigin:l,zIndexMode:c}),h=!0,k&&(m.push({id:w.id,type:"dimensions",dimensions:N}),w.expandParent&&w.parentId&&g.push({id:w.id,parentId:w.parentId,rect:po(W,l)}))}}if(g.length>0){const S=Ec(g,r,o,l);m.push(...S)}return{changes:m,updatedInternals:h}}async function l1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:u}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const c=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,u]],i),p=!!c&&(c.x!==o[0]||c.y!==o[1]||c.k!==o[2]);return Promise.resolve(p)}function zp(t,r,o,i,l,u){let c=l;const p=i.get(c)||new Map;i.set(c,p.set(o,r)),c=`${l}-${t}`;const h=i.get(c)||new Map;if(i.set(c,h.set(o,r)),u){c=`${l}-${t}-${u}`;const m=i.get(c)||new Map;i.set(c,m.set(o,r))}}function ym(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:u,sourceHandle:c=null,targetHandle:p=null}=i,h={edgeId:i.id,source:l,target:u,sourceHandle:c,targetHandle:p},m=`${l}-${c}--${u}-${p}`,v=`${u}-${p}--${l}-${c}`;zp("source",h,v,t,l,c),zp("target",h,m,t,u,p),r.set(i.id,i)}}function vm(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:vm(o,r):!1}function $p(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function a1(t,r,o,i){const l=new Map;for(const[u,c]of t)if((c.selected||c.id===i)&&(!c.parentId||!vm(c,t))&&(c.draggable||r&&typeof c.draggable>"u")){const p=t.get(u);p&&l.set(u,{id:u,position:p.position||{x:0,y:0},distance:{x:o.x-p.internals.positionAbsolute.x,y:o.y-p.internals.positionAbsolute.y},extent:p.extent,parentId:p.parentId,origin:p.origin,expandParent:p.expandParent,internals:{positionAbsolute:p.internals.positionAbsolute||{x:0,y:0}},measured:{width:p.measured.width??0,height:p.measured.height??0}})}return l}function Hu({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var c,p,h;const l=[];for(const[m,v]of r){const x=(c=o.get(m))==null?void 0:c.internals.userNode;x&&l.push({...x,position:v.position,dragging:i})}if(!t)return[l[0],l];const u=(p=o.get(t))==null?void 0:p.internals.userNode;return[u?{...u,position:((h=r.get(t))==null?void 0:h.position)||u.position,dragging:i}:l[0],l]}function u1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const u={x:o-l.distance.x,y:i-l.distance.y},c=Ms(u,r);return{x:c.x-u.x,y:c.y-u.y}}function c1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let u={x:null,y:null},c=0,p=new Map,h=!1,m={x:0,y:0},v=null,x=!1,g=null,S=!1,w=!1,N=null;function k({noDragClassName:M,handleSelector:_,domNode:C,isSelectable:W,nodeId:T,nodeClickDistance:V=0}){g=kt(C);function K({x:A,y:U}){const{nodeLookup:b,nodeExtent:B,snapGrid:R,snapToGrid:L,nodeOrigin:D,onNodeDrag:$,onSelectionDrag:j,onError:P,updateNodePositions:z}=r();u={x:A,y:U};let q=!1;const ee=p.size>1,ne=ee&&B?oc(js(p)):null,oe=ee&&L?u1({dragItems:p,snapGrid:R,x:A,y:U}):null;for(const[ae,re]of p){if(!b.has(ae))continue;let ce={x:A-re.distance.x,y:U-re.distance.y};L&&(ce=oe?{x:Math.round(ce.x+oe.x),y:Math.round(ce.y+oe.y)}:Ms(ce,R));let ye=null;if(ee&&B&&!re.extent&&ne){const{positionAbsolute:ve}=re.internals,Ce=ve.x-ne.x+B[0][0],Te=ve.x+re.measured.width-ne.x2+B[1][0],je=ve.y-ne.y+B[0][1],Ye=ve.y+re.measured.height-ne.y2+B[1][1];ye=[[Ce,je],[Te,Ye]]}const{position:we,positionAbsolute:ke}=om({nodeId:ae,nextPosition:ce,nodeLookup:b,nodeExtent:ye||B,nodeOrigin:D,onError:P});q=q||re.position.x!==we.x||re.position.y!==we.y,re.position=we,re.internals.positionAbsolute=ke}if(w=w||q,!!q&&(z(p,!0),N&&(i||$||!T&&j))){const[ae,re]=Hu({nodeId:T,dragItems:p,nodeLookup:b});i==null||i(N,p,ae,re),$==null||$(N,ae,re),T||j==null||j(N,re)}}async function O(){if(!v)return;const{transform:A,panBy:U,autoPanSpeed:b,autoPanOnNodeDrag:B}=r();if(!B){h=!1,cancelAnimationFrame(c);return}const[R,L]=im(m,v,b);(R!==0||L!==0)&&(u.x=(u.x??0)-R/A[2],u.y=(u.y??0)-L/A[2],await U({x:R,y:L})&&K(u)),c=requestAnimationFrame(O)}function Y(A){var ee;const{nodeLookup:U,multiSelectionActive:b,nodesDraggable:B,transform:R,snapGrid:L,snapToGrid:D,selectNodesOnDrag:$,onNodeDragStart:j,onSelectionDragStart:P,unselectNodesAndEdges:z}=r();x=!0,(!$||!W)&&!b&&T&&((ee=U.get(T))!=null&&ee.selected||z()),W&&$&&T&&(t==null||t(T));const q=hs(A.sourceEvent,{transform:R,snapGrid:L,snapToGrid:D,containerBounds:v});if(u=q,p=a1(U,B,q,T),p.size>0&&(o||j||!T&&P)){const[ne,oe]=Hu({nodeId:T,dragItems:p,nodeLookup:U});o==null||o(A.sourceEvent,p,ne,oe),j==null||j(A.sourceEvent,ne,oe),T||P==null||P(A.sourceEvent,oe)}}const Q=$h().clickDistance(V).on("start",A=>{const{domNode:U,nodeDragThreshold:b,transform:B,snapGrid:R,snapToGrid:L}=r();v=(U==null?void 0:U.getBoundingClientRect())||null,S=!1,w=!1,N=A.sourceEvent,b===0&&Y(A),u=hs(A.sourceEvent,{transform:B,snapGrid:R,snapToGrid:L,containerBounds:v}),m=Bt(A.sourceEvent,v)}).on("drag",A=>{const{autoPanOnNodeDrag:U,transform:b,snapGrid:B,snapToGrid:R,nodeDragThreshold:L,nodeLookup:D}=r(),$=hs(A.sourceEvent,{transform:b,snapGrid:B,snapToGrid:R,containerBounds:v});if(N=A.sourceEvent,(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||T&&!D.has(T))&&(S=!0),!S){if(!h&&U&&x&&(h=!0,O()),!x){const j=Bt(A.sourceEvent,v),P=j.x-m.x,z=j.y-m.y;Math.sqrt(P*P+z*z)>L&&Y(A)}(u.x!==$.xSnapped||u.y!==$.ySnapped)&&p&&x&&(m=Bt(A.sourceEvent,v),K($))}}).on("end",A=>{if(!(!x||S)&&(h=!1,x=!1,cancelAnimationFrame(c),p.size>0)){const{nodeLookup:U,updateNodePositions:b,onNodeDragStop:B,onSelectionDragStop:R}=r();if(w&&(b(p,!1),w=!1),l||B||!T&&R){const[L,D]=Hu({nodeId:T,dragItems:p,nodeLookup:U,dragging:!1});l==null||l(A.sourceEvent,p,L,D),B==null||B(A.sourceEvent,L,D),T||R==null||R(A.sourceEvent,D)}}}).filter(A=>{const U=A.target;return!A.button&&(!M||!$p(U,`.${M}`,C))&&(!_||$p(U,_,C))});g.call(Q)}function I(){g==null||g.on(".drag",null)}return{update:k,destroy:I}}function d1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const u of r.values())Ss(l,po(u))>0&&i.push(u);return i}const f1=250;function p1(t,r,o,i){var p,h;let l=[],u=1/0;const c=d1(t,o,r+f1);for(const m of c){const v=[...((p=m.internals.handleBounds)==null?void 0:p.source)??[],...((h=m.internals.handleBounds)==null?void 0:h.target)??[]];for(const x of v){if(i.nodeId===x.nodeId&&i.type===x.type&&i.id===x.id)continue;const{x:g,y:S}=wr(m,x,x.position,!0),w=Math.sqrt(Math.pow(g-t.x,2)+Math.pow(S-t.y,2));w>r||(w<u?(l=[{...x,x:g,y:S}],u=w):w===u&&l.push({...x,x:g,y:S}))}}if(!l.length)return null;if(l.length>1){const m=i.type==="source"?"target":"source";return l.find(v=>v.type===m)??l[0]}return l[0]}function wm(t,r,o,i,l,u=!1){var m,v,x;const c=i.get(t);if(!c)return null;const p=l==="strict"?(m=c.internals.handleBounds)==null?void 0:m[r]:[...((v=c.internals.handleBounds)==null?void 0:v.source)??[],...((x=c.internals.handleBounds)==null?void 0:x.target)??[]],h=(o?p==null?void 0:p.find(g=>g.id===o):p==null?void 0:p[0])??null;return h&&u?{...h,...wr(c,h,h.position,!0)}:h}function Sm(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function h1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const Nm=()=>!0;function m1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:u,isTarget:c,domNode:p,nodeLookup:h,lib:m,autoPanOnConnect:v,flowId:x,panBy:g,cancelConnection:S,onConnectStart:w,onConnect:N,onConnectEnd:k,isValidConnection:I=Nm,onReconnectEnd:M,updateConnection:_,getTransform:C,getFromHandle:W,autoPanSpeed:T,dragThreshold:V=1,handleDomNode:K}){const O=cm(t.target);let Y=0,Q;const{x:A,y:U}=Bt(t),b=Sm(u,K),B=p==null?void 0:p.getBoundingClientRect();let R=!1;if(!B||!b)return;const L=wm(l,b,i,h,r);if(!L)return;let D=Bt(t,B),$=!1,j=null,P=!1,z=null;function q(){if(!v||!B)return;const[we,ke]=im(D,B,T);g({x:we,y:ke}),Y=requestAnimationFrame(q)}const ee={...L,nodeId:l,type:b,position:L.position},ne=h.get(l);let ae={inProgress:!0,isValid:null,from:wr(ne,ee,xe.Left,!0),fromHandle:ee,fromPosition:ee.position,fromNode:ne,to:D,toHandle:null,toPosition:_p[ee.position],toNode:null,pointer:D};function re(){R=!0,_(ae),w==null||w(t,{nodeId:l,handleId:i,handleType:b})}V===0&&re();function ce(we){if(!R){const{x:Ye,y:Tt}=Bt(we),gt=Ye-A,xt=Tt-U;if(!(gt*gt+xt*xt>V*V))return;re()}if(!W()||!ee){ye(we);return}const ke=C();D=Bt(we,B),Q=p1(bs(D,ke,!1,[1,1]),o,h,ee),$||(q(),$=!0);const ve=km(we,{handle:Q,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:c?"target":"source",isValidConnection:I,doc:O,lib:m,flowId:x,nodeLookup:h});z=ve.handleDomNode,j=ve.connection,P=h1(!!Q,ve.isValid);const Ce=h.get(l),Te=Ce?wr(Ce,ee,xe.Left,!0):ae.from,je={...ae,from:Te,isValid:P,to:ve.toHandle&&P?Il({x:ve.toHandle.x,y:ve.toHandle.y},ke):D,toHandle:ve.toHandle,toPosition:P&&ve.toHandle?ve.toHandle.position:_p[ee.position],toNode:ve.toHandle?h.get(ve.toHandle.nodeId):null,pointer:D};_(je),ae=je}function ye(we){if(!("touches"in we&&we.touches.length>0)){if(R){(Q||z)&&j&&P&&(N==null||N(j));const{inProgress:ke,...ve}=ae,Ce={...ve,toPosition:ae.toHandle?ae.toPosition:null};k==null||k(we,Ce),u&&(M==null||M(we,Ce))}S(),cancelAnimationFrame(Y),$=!1,P=!1,j=null,z=null,O.removeEventListener("mousemove",ce),O.removeEventListener("mouseup",ye),O.removeEventListener("touchmove",ce),O.removeEventListener("touchend",ye)}}O.addEventListener("mousemove",ce),O.addEventListener("mouseup",ye),O.addEventListener("touchmove",ce),O.addEventListener("touchend",ye)}function km(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:u,doc:c,lib:p,flowId:h,isValidConnection:m=Nm,nodeLookup:v}){const x=u==="target",g=r?c.querySelector(`.${p}-flow__handle[data-id="${h}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:S,y:w}=Bt(t),N=c.elementFromPoint(S,w),k=N!=null&&N.classList.contains(`${p}-flow__handle`)?N:g,I={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const M=Sm(void 0,k),_=k.getAttribute("data-nodeid"),C=k.getAttribute("data-handleid"),W=k.classList.contains("connectable"),T=k.classList.contains("connectableend");if(!_||!M)return I;const V={source:x?_:i,sourceHandle:x?C:l,target:x?i:_,targetHandle:x?l:C};I.connection=V;const O=W&&T&&(o===co.Strict?x&&M==="source"||!x&&M==="target":_!==i||C!==l);I.isValid=O&&m(V),I.toHandle=wm(_,M,C,v,o,!0)}return I}const ac={onPointerDown:m1,isValid:km};function g1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=kt(t);function u({translateExtent:p,width:h,height:m,zoomStep:v=1,pannable:x=!0,zoomable:g=!0,inversePan:S=!1}){const w=_=>{if(_.sourceEvent.type!=="wheel"||!r)return;const C=o(),W=_.sourceEvent.ctrlKey&&Ns()?10:1,T=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*v,V=C[2]*Math.pow(2,T*W);r.scaleTo(V)};let N=[0,0];const k=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(N=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},I=_=>{const C=o();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!r)return;const W=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],T=[W[0]-N[0],W[1]-N[1]];N=W;const V=i()*Math.max(C[2],Math.log(C[2]))*(S?-1:1),K={x:C[0]-T[0]*V,y:C[1]-T[1]*V},O=[[0,0],[h,m]];r.setViewportConstrained({x:K.x,y:K.y,zoom:C[2]},O,p)},M=Zh().on("start",k).on("zoom",x?I:null).on("zoom.wheel",g?w:null);l.call(M,{})}function c(){l.on("zoom",null)}return{update:u,destroy:c,pointer:Ft}}const Ol=t=>({x:t.x,y:t.y,zoom:t.k}),Vu=({x:t,y:r,zoom:o})=>bl.translate(t,r).scale(o),oo=(t,r)=>t.target.closest(`.${r}`),Im=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),x1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Bu=(t,r=0,o=x1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},_m=t=>{const r=t.ctrlKey&&Ns()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function y1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:c,onPanZoomStart:p,onPanZoom:h,onPanZoomEnd:m}){return v=>{if(oo(v,r))return v.ctrlKey&&v.preventDefault(),!1;v.preventDefault(),v.stopImmediatePropagation();const x=o.property("__zoom").k||1;if(v.ctrlKey&&c){const k=Ft(v),I=_m(v),M=x*Math.pow(2,I);i.scaleTo(o,M,k,v);return}const g=v.deltaMode===1?20:1;let S=l===gr.Vertical?0:v.deltaX*g,w=l===gr.Horizontal?0:v.deltaY*g;!Ns()&&v.shiftKey&&l!==gr.Vertical&&(S=v.deltaY*g,w=0),i.translateBy(o,-(S/x)*u,-(w/x)*u,{internal:!0});const N=Ol(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(h==null||h(v,N),t.panScrollTimeout=setTimeout(()=>{m==null||m(v,N),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,p==null||p(v,N))}}function v1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const u=i.type==="wheel",c=!r&&u&&!i.ctrlKey,p=oo(i,t);if(i.ctrlKey&&u&&p&&i.preventDefault(),c||p)return null;i.preventDefault(),o.call(this,i,l)}}function w1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var u,c,p;if((u=i.sourceEvent)!=null&&u.internal)return;const l=Ol(i.transform);t.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((p=i.sourceEvent)==null?void 0:p.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function S1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return u=>{var c,p;t.usedRightMouseButton=!!(o&&Im(r,t.mouseButton??0)),(c=u.sourceEvent)!=null&&c.sync||i([u.transform.x,u.transform.y,u.transform.k]),l&&!((p=u.sourceEvent)!=null&&p.internal)&&(l==null||l(u.sourceEvent,Ol(u.transform)))}}function N1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:u}){return c=>{var p;if(!((p=c.sourceEvent)!=null&&p.internal)&&(t.isZoomingOrPanning=!1,u&&Im(r,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&u(c.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const h=Ol(c.transform);t.prevViewport=h,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(c.sourceEvent,h)},o?150:0)}}}function k1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:c,noWheelClassName:p,noPanClassName:h,lib:m,connectionInProgress:v}){return x=>{var k;const g=t||r,S=o&&x.ctrlKey,w=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(oo(x,`${m}-flow__node`)||oo(x,`${m}-flow__edge`)))return!0;if(!i&&!g&&!l&&!u&&!o||c||v&&!w||oo(x,p)&&w||oo(x,h)&&(!w||l&&w&&!t)||!o&&x.ctrlKey&&w)return!1;if(!o&&x.type==="touchstart"&&((k=x.touches)==null?void 0:k.length)>1)return x.preventDefault(),!1;if(!g&&!l&&!S&&w||!i&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(i)&&!i.includes(x.button)&&x.type==="mousedown")return!1;const N=Array.isArray(i)&&i.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||w)&&N}}function I1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:u,onPanZoomStart:c,onPanZoomEnd:p,onDraggingChange:h}){const m={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},v=t.getBoundingClientRect(),x=Zh().scaleExtent([r,o]).translateExtent(i),g=kt(t).call(x);M({x:l.x,y:l.y,zoom:fo(l.zoom,r,o)},[[0,0],[v.width,v.height]],i);const S=g.on("wheel.zoom"),w=g.on("dblclick.zoom");x.wheelDelta(_m);function N(Q,A){return g?new Promise(U=>{x==null||x.interpolate((A==null?void 0:A.interpolate)==="linear"?ps:cl).transform(Bu(g,A==null?void 0:A.duration,A==null?void 0:A.ease,()=>U(!0)),Q)}):Promise.resolve(!1)}function k({noWheelClassName:Q,noPanClassName:A,onPaneContextMenu:U,userSelectionActive:b,panOnScroll:B,panOnDrag:R,panOnScrollMode:L,panOnScrollSpeed:D,preventScrolling:$,zoomOnPinch:j,zoomOnScroll:P,zoomOnDoubleClick:z,zoomActivationKeyPressed:q,lib:ee,onTransformChange:ne,connectionInProgress:oe,paneClickDistance:ae,selectionOnDrag:re}){b&&!m.isZoomingOrPanning&&I();const ce=B&&!q&&!b;x.clickDistance(re?1/0:!Vt(ae)||ae<0?0:ae);const ye=ce?y1({zoomPanValues:m,noWheelClassName:Q,d3Selection:g,d3Zoom:x,panOnScrollMode:L,panOnScrollSpeed:D,zoomOnPinch:j,onPanZoomStart:c,onPanZoom:u,onPanZoomEnd:p}):v1({noWheelClassName:Q,preventScrolling:$,d3ZoomHandler:S});if(g.on("wheel.zoom",ye,{passive:!1}),!b){const ke=w1({zoomPanValues:m,onDraggingChange:h,onPanZoomStart:c});x.on("start",ke);const ve=S1({zoomPanValues:m,panOnDrag:R,onPaneContextMenu:!!U,onPanZoom:u,onTransformChange:ne});x.on("zoom",ve);const Ce=N1({zoomPanValues:m,panOnDrag:R,panOnScroll:B,onPaneContextMenu:U,onPanZoomEnd:p,onDraggingChange:h});x.on("end",Ce)}const we=k1({zoomActivationKeyPressed:q,panOnDrag:R,zoomOnScroll:P,panOnScroll:B,zoomOnDoubleClick:z,zoomOnPinch:j,userSelectionActive:b,noPanClassName:A,noWheelClassName:Q,lib:ee,connectionInProgress:oe});x.filter(we),z?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function I(){x.on("zoom",null)}async function M(Q,A,U){const b=Vu(Q),B=x==null?void 0:x.constrain()(b,A,U);return B&&await N(B),new Promise(R=>R(B))}async function _(Q,A){const U=Vu(Q);return await N(U,A),new Promise(b=>b(U))}function C(Q){if(g){const A=Vu(Q),U=g.property("__zoom");(U.k!==Q.zoom||U.x!==Q.x||U.y!==Q.y)&&(x==null||x.transform(g,A,null,{sync:!0}))}}function W(){const Q=g?qh(g.node()):{x:0,y:0,k:1};return{x:Q.x,y:Q.y,zoom:Q.k}}function T(Q,A){return g?new Promise(U=>{x==null||x.interpolate((A==null?void 0:A.interpolate)==="linear"?ps:cl).scaleTo(Bu(g,A==null?void 0:A.duration,A==null?void 0:A.ease,()=>U(!0)),Q)}):Promise.resolve(!1)}function V(Q,A){return g?new Promise(U=>{x==null||x.interpolate((A==null?void 0:A.interpolate)==="linear"?ps:cl).scaleBy(Bu(g,A==null?void 0:A.duration,A==null?void 0:A.ease,()=>U(!0)),Q)}):Promise.resolve(!1)}function K(Q){x==null||x.scaleExtent(Q)}function O(Q){x==null||x.translateExtent(Q)}function Y(Q){const A=!Vt(Q)||Q<0?0:Q;x==null||x.clickDistance(A)}return{update:k,destroy:I,setViewport:_,setViewportConstrained:M,getViewport:W,scaleTo:T,scaleBy:V,setScaleExtent:K,setTranslateExtent:O,syncViewport:C,setClickDistance:Y}}var Sr;(function(t){t.Line="line",t.Handle="handle"})(Sr||(Sr={}));const _1=["top-left","top-right","bottom-left","bottom-right"],E1=["top","right","bottom","left"];function C1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:u}){const c=t-r,p=o-i,h=[c>0?1:c<0?-1:0,p>0?1:p<0?-1:0];return c&&l&&(h[0]=h[0]*-1),p&&u&&(h[1]=h[1]*-1),h}function Lp(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Vn(t,r){return Math.max(0,r-t)}function Bn(t,r){return Math.max(0,t-r)}function nl(t,r,o){return Math.max(0,r-t,t-o)}function Rp(t,r){return t?!r:r}function j1(t,r,o,i,l,u,c,p){let{affectsX:h,affectsY:m}=r;const{isHorizontal:v,isVertical:x}=r,g=v&&x,{xSnapped:S,ySnapped:w}=o,{minWidth:N,maxWidth:k,minHeight:I,maxHeight:M}=i,{x:_,y:C,width:W,height:T,aspectRatio:V}=t;let K=Math.floor(v?S-t.pointerX:0),O=Math.floor(x?w-t.pointerY:0);const Y=W+(h?-K:K),Q=T+(m?-O:O),A=-u[0]*W,U=-u[1]*T;let b=nl(Y,N,k),B=nl(Q,I,M);if(c){let D=0,$=0;h&&K<0?D=Vn(_+K+A,c[0][0]):!h&&K>0&&(D=Bn(_+Y+A,c[1][0])),m&&O<0?$=Vn(C+O+U,c[0][1]):!m&&O>0&&($=Bn(C+Q+U,c[1][1])),b=Math.max(b,D),B=Math.max(B,$)}if(p){let D=0,$=0;h&&K>0?D=Bn(_+K,p[0][0]):!h&&K<0&&(D=Vn(_+Y,p[1][0])),m&&O>0?$=Bn(C+O,p[0][1]):!m&&O<0&&($=Vn(C+Q,p[1][1])),b=Math.max(b,D),B=Math.max(B,$)}if(l){if(v){const D=nl(Y/V,I,M)*V;if(b=Math.max(b,D),c){let $=0;!h&&!m||h&&!m&&g?$=Bn(C+U+Y/V,c[1][1])*V:$=Vn(C+U+(h?K:-K)/V,c[0][1])*V,b=Math.max(b,$)}if(p){let $=0;!h&&!m||h&&!m&&g?$=Vn(C+Y/V,p[1][1])*V:$=Bn(C+(h?K:-K)/V,p[0][1])*V,b=Math.max(b,$)}}if(x){const D=nl(Q*V,N,k)/V;if(B=Math.max(B,D),c){let $=0;!h&&!m||m&&!h&&g?$=Bn(_+Q*V+A,c[1][0])/V:$=Vn(_+(m?O:-O)*V+A,c[0][0])/V,B=Math.max(B,$)}if(p){let $=0;!h&&!m||m&&!h&&g?$=Vn(_+Q*V,p[1][0])/V:$=Bn(_+(m?O:-O)*V,p[0][0])/V,B=Math.max(B,$)}}}O=O+(O<0?B:-B),K=K+(K<0?b:-b),l&&(g?Y>Q*V?O=(Rp(h,m)?-K:K)/V:K=(Rp(h,m)?-O:O)*V:v?(O=K/V,m=h):(K=O*V,h=m));const R=h?_+K:_,L=m?C+O:C;return{width:W+(h?-K:K),height:T+(m?-O:O),x:u[0]*K*(h?-1:1)+R,y:u[1]*O*(m?-1:1)+L}}const Em={width:0,height:0,x:0,y:0},M1={...Em,pointerX:0,pointerY:0,aspectRatio:1};function b1(t){return[[0,0],[t.measured.width,t.measured.height]]}function P1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,u=t.measured.width??0,c=t.measured.height??0,p=o[0]*u,h=o[1]*c;return[[i-p,l-h],[i+u-p,l+c-h]]}function D1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const u=kt(t);let c={controlDirection:Lp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function p({controlPosition:m,boundaries:v,keepAspectRatio:x,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:N,shouldResize:k}){let I={...Em},M={...M1};c={boundaries:v,resizeDirection:g,keepAspectRatio:x,controlDirection:Lp(m)};let _,C=null,W=[],T,V,K,O=!1;const Y=$h().on("start",Q=>{const{nodeLookup:A,transform:U,snapGrid:b,snapToGrid:B,nodeOrigin:R,paneDomNode:L}=o();if(_=A.get(r),!_)return;C=(L==null?void 0:L.getBoundingClientRect())??null;const{xSnapped:D,ySnapped:$}=hs(Q.sourceEvent,{transform:U,snapGrid:b,snapToGrid:B,containerBounds:C});I={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},M={...I,pointerX:D,pointerY:$,aspectRatio:I.width/I.height},T=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(T=A.get(_.parentId),V=T&&_.extent==="parent"?b1(T):void 0),W=[],K=void 0;for(const[j,P]of A)if(P.parentId===r&&(W.push({id:j,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const z=P1(P,_,P.origin??R);K?K=[[Math.min(z[0][0],K[0][0]),Math.min(z[0][1],K[0][1])],[Math.max(z[1][0],K[1][0]),Math.max(z[1][1],K[1][1])]]:K=z}S==null||S(Q,{...I})}).on("drag",Q=>{const{transform:A,snapGrid:U,snapToGrid:b,nodeOrigin:B}=o(),R=hs(Q.sourceEvent,{transform:A,snapGrid:U,snapToGrid:b,containerBounds:C}),L=[];if(!_)return;const{x:D,y:$,width:j,height:P}=I,z={},q=_.origin??B,{width:ee,height:ne,x:oe,y:ae}=j1(M,c.controlDirection,R,c.boundaries,c.keepAspectRatio,q,V,K),re=ee!==j,ce=ne!==P,ye=oe!==D&&re,we=ae!==$&&ce;if(!ye&&!we&&!re&&!ce)return;if((ye||we||q[0]===1||q[1]===1)&&(z.x=ye?oe:I.x,z.y=we?ae:I.y,I.x=z.x,I.y=z.y,W.length>0)){const Te=oe-D,je=ae-$;for(const Ye of W)Ye.position={x:Ye.position.x-Te+q[0]*(ee-j),y:Ye.position.y-je+q[1]*(ne-P)},L.push(Ye)}if((re||ce)&&(z.width=re&&(!c.resizeDirection||c.resizeDirection==="horizontal")?ee:I.width,z.height=ce&&(!c.resizeDirection||c.resizeDirection==="vertical")?ne:I.height,I.width=z.width,I.height=z.height),T&&_.expandParent){const Te=q[0]*(z.width??0);z.x&&z.x<Te&&(I.x=Te,M.x=M.x-(z.x-Te));const je=q[1]*(z.height??0);z.y&&z.y<je&&(I.y=je,M.y=M.y-(z.y-je))}const ke=C1({width:I.width,prevWidth:j,height:I.height,prevHeight:P,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),ve={...I,direction:ke};(k==null?void 0:k(Q,ve))!==!1&&(O=!0,w==null||w(Q,ve),i(z,L))}).on("end",Q=>{O&&(N==null||N(Q,{...I}),l==null||l({...I}),O=!1)});u.call(Y)}function h(){u.on(".drag",null)}return{update:p,destroy:h}}var Wu={exports:{}},Uu={},Yu={exports:{}},Xu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function T1(){if(Fp)return Xu;Fp=1;var t=Is();function r(x,g){return x===g&&(x!==0||1/x===1/g)||x!==x&&g!==g}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,u=t.useLayoutEffect,c=t.useDebugValue;function p(x,g){var S=g(),w=i({inst:{value:S,getSnapshot:g}}),N=w[0].inst,k=w[1];return u(function(){N.value=S,N.getSnapshot=g,h(N)&&k({inst:N})},[x,S,g]),l(function(){return h(N)&&k({inst:N}),x(function(){h(N)&&k({inst:N})})},[x]),c(S),S}function h(x){var g=x.getSnapshot;x=x.value;try{var S=g();return!o(x,S)}catch{return!0}}function m(x,g){return g()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:p;return Xu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,Xu}var Hp;function O1(){return Hp||(Hp=1,Yu.exports=T1()),Yu.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function A1(){if(Vp)return Uu;Vp=1;var t=Is(),r=O1();function o(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,u=t.useRef,c=t.useEffect,p=t.useMemo,h=t.useDebugValue;return Uu.useSyncExternalStoreWithSelector=function(m,v,x,g,S){var w=u(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=p(function(){function I(T){if(!M){if(M=!0,_=T,T=g(T),S!==void 0&&N.hasValue){var V=N.value;if(S(V,T))return C=V}return C=T}if(V=C,i(_,T))return V;var K=g(T);return S!==void 0&&S(V,K)?(_=T,V):(_=T,C=K)}var M=!1,_,C,W=x===void 0?null:x;return[function(){return I(v())},W===null?void 0:function(){return I(W())}]},[v,x,g,S]);var k=l(m,w[0],w[1]);return c(function(){N.hasValue=!0,N.value=k},[k]),h(k),k},Uu}var Bp;function z1(){return Bp||(Bp=1,Wu.exports=A1()),Wu.exports}var $1=z1();const L1=Sh($1),R1={},Wp=t=>{let r;const o=new Set,i=(v,x)=>{const g=typeof v=="function"?v(r):v;if(!Object.is(g,r)){const S=r;r=x??(typeof g!="object"||g===null)?g:Object.assign({},r,g),o.forEach(w=>w(r,S))}},l=()=>r,h={setState:i,getState:l,getInitialState:()=>m,subscribe:v=>(o.add(v),()=>o.delete(v)),destroy:()=>{(R1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},m=r=t(i,l,h);return h},F1=t=>t?Wp(t):Wp,{useDebugValue:H1}=cs,{useSyncExternalStoreWithSelector:V1}=L1,B1=t=>t;function Cm(t,r=B1,o){const i=V1(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return H1(i),i}const Up=(t,r)=>{const o=F1(t),i=(l,u=r)=>Cm(o,l,u);return Object.assign(i,o),i},W1=(t,r)=>t?Up(t,r):Up;function Re(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var U1=Nh();const Al=H.createContext(null),Y1=Al.Provider,jm=en.error001();function Me(t,r){const o=H.useContext(Al);if(o===null)throw new Error(jm);return Cm(o,t,r)}function Fe(){const t=H.useContext(Al);if(t===null)throw new Error(jm);return H.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Yp={display:"none"},X1={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Mm="react-flow__node-desc",bm="react-flow__edge-desc",Q1="react-flow__aria-live",G1=t=>t.ariaLiveMessage,K1=t=>t.ariaLabelConfig;function q1({rfId:t}){const r=Me(G1);return d.jsx("div",{id:`${Q1}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:X1,children:r})}function Z1({rfId:t,disableKeyboardA11y:r}){const o=Me(K1);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${Mm}-${t}`,style:Yp,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${bm}-${t}`,style:Yp,children:o["edge.a11yDescription.default"]}),!r&&d.jsx(q1,{rfId:t})]})}const zl=H.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},u)=>{const c=`${t}`.split("-");return d.jsx("div",{className:Qe(["react-flow__panel",o,...c]),style:i,ref:u,...l,children:r})});zl.displayName="Panel";function J1({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:d.jsx(zl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const eS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},rl=t=>t.id;function tS(t,r){return Re(t.selectedNodes.map(rl),r.selectedNodes.map(rl))&&Re(t.selectedEdges.map(rl),r.selectedEdges.map(rl))}function nS({onSelectionChange:t}){const r=Fe(),{selectedNodes:o,selectedEdges:i}=Me(eS,tS);return H.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[o,i,t]),null}const rS=t=>!!t.onSelectionChangeHandlers;function oS({onSelectionChange:t}){const r=Me(rS);return t||r?d.jsx(nS,{onSelectionChange:t}):null}const Pm=[0,0],sS={x:0,y:0,zoom:1},iS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Xp=[...iS,"rfId"],lS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Qp={translateExtent:vs,nodeOrigin:Pm,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function aS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:c,reset:p,setDefaultNodesAndEdges:h}=Me(lS,Re),m=Fe();H.useEffect(()=>(h(t.defaultNodes,t.defaultEdges),()=>{v.current=Qp,p()}),[]);const v=H.useRef(Qp);return H.useEffect(()=>{for(const x of Xp){const g=t[x],S=v.current[x];g!==S&&(typeof t[x]>"u"||(x==="nodes"?r(g):x==="edges"?o(g):x==="minZoom"?i(g):x==="maxZoom"?l(g):x==="translateExtent"?u(g):x==="nodeExtent"?c(g):x==="ariaLabelConfig"?m.setState({ariaLabelConfig:Vw(g)}):x==="fitView"?m.setState({fitViewQueued:g}):x==="fitViewOptions"?m.setState({fitViewOptions:g}):m.setState({[x]:g})))}v.current=t},Xp.map(x=>t[x])),null}function Gp(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function uS(t){var i;const[r,o]=H.useState(t==="system"?null:t);return H.useEffect(()=>{if(t!=="system"){o(t);return}const l=Gp(),u=()=>o(l!=null&&l.matches?"dark":"light");return u(),l==null||l.addEventListener("change",u),()=>{l==null||l.removeEventListener("change",u)}},[t]),r!==null?r:(i=Gp())!=null&&i.matches?"dark":"light"}const Kp=typeof document<"u"?document:null;function ks(t=null,r={target:Kp,actInsideInputWithModifier:!0}){const[o,i]=H.useState(!1),l=H.useRef(!1),u=H.useRef(new Set([])),[c,p]=H.useMemo(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),v=m.reduce((x,g)=>x.concat(...g),[]);return[m,v]}return[[],[]]},[t]);return H.useEffect(()=>{const h=(r==null?void 0:r.target)??Kp,m=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const v=S=>{var k,I;if(l.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!l.current||l.current&&!m)&&dm(S))return!1;const N=Zp(S.code,p);if(u.current.add(S[N]),qp(c,u.current,!1)){const M=((I=(k=S.composedPath)==null?void 0:k.call(S))==null?void 0:I[0])||S.target,_=(M==null?void 0:M.nodeName)==="BUTTON"||(M==null?void 0:M.nodeName)==="A";r.preventDefault!==!1&&(l.current||!_)&&S.preventDefault(),i(!0)}},x=S=>{const w=Zp(S.code,p);qp(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(S[w]),S.key==="Meta"&&u.current.clear(),l.current=!1},g=()=>{u.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",v),h==null||h.addEventListener("keyup",x),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{h==null||h.removeEventListener("keydown",v),h==null||h.removeEventListener("keyup",x),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[t,i]),o}function qp(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function Zp(t,r){return r.includes(t)?"code":"key"}const cS=()=>{const t=Fe();return H.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,u],panZoom:c}=t.getState();return c?(await c.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??u},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:u,maxZoom:c,panZoom:p}=t.getState(),h=wc(r,i,l,u,c,(o==null?void 0:o.padding)??.1);return p?(await p.setViewport(h,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:u,domNode:c}=t.getState();if(!c)return r;const{x:p,y:h}=c.getBoundingClientRect(),m={x:r.x-p,y:r.y-h},v=o.snapGrid??l,x=o.snapToGrid??u;return bs(m,i,x,v)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:u}=i.getBoundingClientRect(),c=Il(r,o);return{x:c.x+l,y:c.y+u}}}),[])};function Dm(t,r){const o=[],i=new Map,l=[];for(const u of t)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const c=i.get(u.id);c?c.push(u):i.set(u.id,[u])}for(const u of r){const c=i.get(u.id);if(!c){o.push(u);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){o.push({...c[0].item});continue}const p={...u};for(const h of c)dS(h,p);o.push(p)}return l.length&&l.forEach(u=>{u.index!==void 0?o.splice(u.index,0,{...u.item}):o.push({...u.item})}),o}function dS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function fS(t,r){return Dm(t,r)}function pS(t,r){return Dm(t,r)}function fr(t,r){return{id:t,type:"select",selected:r}}function so(t,r=new Set,o=!1){const i=[];for(const[l,u]of t){const c=r.has(l);!(u.selected===void 0&&!c)&&u.selected!==c&&(o&&(u.selected=c),i.push(fr(u.id,c)))}return i}function Jp({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(u=>[u.id,u]));for(const[u,c]of t.entries()){const p=r.get(c.id),h=((l=p==null?void 0:p.internals)==null?void 0:l.userNode)??p;h!==void 0&&h!==c&&o.push({id:c.id,item:c,type:"replace"}),h===void 0&&o.push({item:c,type:"add",index:u})}for(const[u]of r)i.get(u)===void 0&&o.push({id:u,type:"remove"});return o}function eh(t){return{id:t.id,type:"remove"}}const th=t=>Dw(t),hS=t=>rm(t);function Tm(t){return H.forwardRef(t)}const mS=typeof window<"u"?H.useLayoutEffect:H.useEffect;function nh(t){const[r,o]=H.useState(BigInt(0)),[i]=H.useState(()=>gS(()=>o(l=>l+BigInt(1))));return mS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function gS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const Om=H.createContext(null);function xS({children:t}){const r=Fe(),o=H.useCallback(p=>{const{nodes:h=[],setNodes:m,hasDefaultNodes:v,onNodesChange:x,nodeLookup:g,fitViewQueued:S,onNodesChangeMiddlewareMap:w}=r.getState();let N=h;for(const I of p)N=typeof I=="function"?I(N):I;let k=Jp({items:N,lookup:g});for(const I of w.values())k=I(k);v&&m(N),k.length>0?x==null||x(k):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:I,nodes:M,setNodes:_}=r.getState();I&&_(M)})},[]),i=nh(o),l=H.useCallback(p=>{const{edges:h=[],setEdges:m,hasDefaultEdges:v,onEdgesChange:x,edgeLookup:g}=r.getState();let S=h;for(const w of p)S=typeof w=="function"?w(S):w;v?m(S):x&&x(Jp({items:S,lookup:g}))},[]),u=nh(l),c=H.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return d.jsx(Om.Provider,{value:c,children:t})}function yS(){const t=H.useContext(Om);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const vS=t=>!!t.panZoom;function Ir(){const t=cS(),r=Fe(),o=yS(),i=Me(vS),l=H.useMemo(()=>{const u=x=>r.getState().nodeLookup.get(x),c=x=>{o.nodeQueue.push(x)},p=x=>{o.edgeQueue.push(x)},h=x=>{var I,M;const{nodeLookup:g,nodeOrigin:S}=r.getState(),w=th(x)?x:g.get(x.id),N=w.parentId?um(w.position,w.measured,w.parentId,g,S):w.position,k={...w,position:N,width:((I=w.measured)==null?void 0:I.width)??w.width,height:((M=w.measured)==null?void 0:M.height)??w.height};return po(k)},m=(x,g,S={replace:!1})=>{c(w=>w.map(N=>{if(N.id===x){const k=typeof g=="function"?g(N):g;return S.replace&&th(k)?k:{...N,...k}}return N}))},v=(x,g,S={replace:!1})=>{p(w=>w.map(N=>{if(N.id===x){const k=typeof g=="function"?g(N):g;return S.replace&&hS(k)?k:{...N,...k}}return N}))};return{getNodes:()=>r.getState().nodes.map(x=>({...x})),getNode:x=>{var g;return(g=u(x))==null?void 0:g.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:x=[]}=r.getState();return x.map(g=>({...g}))},getEdge:x=>r.getState().edgeLookup.get(x),setNodes:c,setEdges:p,addNodes:x=>{const g=Array.isArray(x)?x:[x];o.nodeQueue.push(S=>[...S,...g])},addEdges:x=>{const g=Array.isArray(x)?x:[x];o.edgeQueue.push(S=>[...S,...g])},toObject:()=>{const{nodes:x=[],edges:g=[],transform:S}=r.getState(),[w,N,k]=S;return{nodes:x.map(I=>({...I})),edges:g.map(I=>({...I})),viewport:{x:w,y:N,zoom:k}}},deleteElements:async({nodes:x=[],edges:g=[]})=>{const{nodes:S,edges:w,onNodesDelete:N,onEdgesDelete:k,triggerNodeChanges:I,triggerEdgeChanges:M,onDelete:_,onBeforeDelete:C}=r.getState(),{nodes:W,edges:T}=await $w({nodesToRemove:x,edgesToRemove:g,nodes:S,edges:w,onBeforeDelete:C}),V=T.length>0,K=W.length>0;if(V){const O=T.map(eh);k==null||k(T),M(O)}if(K){const O=W.map(eh);N==null||N(W),I(O)}return(K||V)&&(_==null||_({nodes:W,edges:T})),{deletedNodes:W,deletedEdges:T}},getIntersectingNodes:(x,g=!0,S)=>{const w=Cp(x),N=w?x:h(x),k=S!==void 0;return N?(S||r.getState().nodes).filter(I=>{const M=r.getState().nodeLookup.get(I.id);if(M&&!w&&(I.id===x.id||!M.internals.positionAbsolute))return!1;const _=po(k?I:M),C=Ss(_,N);return g&&C>0||C>=_.width*_.height||C>=N.width*N.height}):[]},isNodeIntersecting:(x,g,S=!0)=>{const N=Cp(x)?x:h(x);if(!N)return!1;const k=Ss(N,g);return S&&k>0||k>=g.width*g.height||k>=N.width*N.height},updateNode:m,updateNodeData:(x,g,S={replace:!1})=>{m(x,w=>{const N=typeof g=="function"?g(w):g;return S.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},S)},updateEdge:v,updateEdgeData:(x,g,S={replace:!1})=>{v(x,w=>{const N=typeof g=="function"?g(w):g;return S.replace?{...w,data:N}:{...w,data:{...w.data,...N}}},S)},getNodesBounds:x=>{const{nodeLookup:g,nodeOrigin:S}=r.getState();return Tw(x,{nodeLookup:g,nodeOrigin:S})},getHandleConnections:({type:x,id:g,nodeId:S})=>{var w;return Array.from(((w=r.getState().connectionLookup.get(`${S}-${x}${g?`-${g}`:""}`))==null?void 0:w.values())??[])},getNodeConnections:({type:x,handleId:g,nodeId:S})=>{var w;return Array.from(((w=r.getState().connectionLookup.get(`${S}${x?g?`-${x}-${g}`:`-${x}`:""}`))==null?void 0:w.values())??[])},fitView:async x=>{const g=r.getState().fitViewResolver??Hw();return r.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:g}),o.nodeQueue.push(S=>[...S]),g.promise}}},[]);return H.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const rh=t=>t.selected,wS=typeof window<"u"?window:void 0;function SS({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=Fe(),{deleteElements:i}=Ir(),l=ks(t,{actInsideInputWithModifier:!1}),u=ks(r,{target:wS});H.useEffect(()=>{if(l){const{edges:c,nodes:p}=o.getState();i({nodes:p.filter(rh),edges:c.filter(rh)}),o.setState({nodesSelectionActive:!1})}},[l]),H.useEffect(()=>{o.setState({multiSelectionActive:u})},[u])}function NS(t){const r=Fe();H.useEffect(()=>{const o=()=>{var l,u,c,p;if(!t.current||!(((u=(l=t.current).checkVisibility)==null?void 0:u.call(l))??!0))return!1;const i=Sc(t.current);(i.height===0||i.width===0)&&((p=(c=r.getState()).onError)==null||p.call(c,"004",en.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const $l={position:"absolute",width:"100%",height:"100%",top:0,left:0},kS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function IS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=gr.Free,zoomOnDoubleClick:c=!0,panOnDrag:p=!0,defaultViewport:h,translateExtent:m,minZoom:v,maxZoom:x,zoomActivationKeyCode:g,preventScrolling:S=!0,children:w,noWheelClassName:N,noPanClassName:k,onViewportChange:I,isControlledViewport:M,paneClickDistance:_,selectionOnDrag:C}){const W=Fe(),T=H.useRef(null),{userSelectionActive:V,lib:K,connectionInProgress:O}=Me(kS,Re),Y=ks(g),Q=H.useRef();NS(T);const A=H.useCallback(U=>{I==null||I({x:U[0],y:U[1],zoom:U[2]}),M||W.setState({transform:U})},[I,M]);return H.useEffect(()=>{if(T.current){Q.current=I1({domNode:T.current,minZoom:v,maxZoom:x,translateExtent:m,viewport:h,onDraggingChange:R=>W.setState({paneDragging:R}),onPanZoomStart:(R,L)=>{const{onViewportChangeStart:D,onMoveStart:$}=W.getState();$==null||$(R,L),D==null||D(L)},onPanZoom:(R,L)=>{const{onViewportChange:D,onMove:$}=W.getState();$==null||$(R,L),D==null||D(L)},onPanZoomEnd:(R,L)=>{const{onViewportChangeEnd:D,onMoveEnd:$}=W.getState();$==null||$(R,L),D==null||D(L)}});const{x:U,y:b,zoom:B}=Q.current.getViewport();return W.setState({panZoom:Q.current,transform:[U,b,B],domNode:T.current.closest(".react-flow")}),()=>{var R;(R=Q.current)==null||R.destroy()}}},[]),H.useEffect(()=>{var U;(U=Q.current)==null||U.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:c,panOnDrag:p,zoomActivationKeyPressed:Y,preventScrolling:S,noPanClassName:k,userSelectionActive:V,noWheelClassName:N,lib:K,onTransformChange:A,connectionInProgress:O,selectionOnDrag:C,paneClickDistance:_})},[t,r,o,i,l,u,c,p,Y,S,k,V,N,K,A,O,C,_]),d.jsx("div",{className:"react-flow__renderer",ref:T,style:$l,children:w})}const _S=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function ES(){const{userSelectionActive:t,userSelectionRect:r}=Me(_S,Re);return t&&r?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const Qu=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},CS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function jS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=ws.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:c,onSelectionEnd:p,onPaneClick:h,onPaneContextMenu:m,onPaneScroll:v,onPaneMouseEnter:x,onPaneMouseMove:g,onPaneMouseLeave:S,children:w}){const N=Fe(),{userSelectionActive:k,elementsSelectable:I,dragging:M,connectionInProgress:_}=Me(CS,Re),C=I&&(t||k),W=H.useRef(null),T=H.useRef(),V=H.useRef(new Set),K=H.useRef(new Set),O=H.useRef(!1),Y=D=>{if(O.current||_){O.current=!1;return}h==null||h(D),N.getState().resetSelectedElements(),N.setState({nodesSelectionActive:!1})},Q=D=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){D.preventDefault();return}m==null||m(D)},A=v?D=>v(D):void 0,U=D=>{O.current&&(D.stopPropagation(),O.current=!1)},b=D=>{var ne,oe;const{domNode:$}=N.getState();if(T.current=$==null?void 0:$.getBoundingClientRect(),!T.current)return;const j=D.target===W.current;if(!j&&!!D.target.closest(".nokey")||!t||!(u&&j||r)||D.button!==0||!D.isPrimary)return;(oe=(ne=D.target)==null?void 0:ne.setPointerCapture)==null||oe.call(ne,D.pointerId),O.current=!1;const{x:q,y:ee}=Bt(D.nativeEvent,T.current);N.setState({userSelectionRect:{width:0,height:0,startX:q,startY:ee,x:q,y:ee}}),j||(D.stopPropagation(),D.preventDefault())},B=D=>{const{userSelectionRect:$,transform:j,nodeLookup:P,edgeLookup:z,connectionLookup:q,triggerNodeChanges:ee,triggerEdgeChanges:ne,defaultEdgeOptions:oe,resetSelectedElements:ae}=N.getState();if(!T.current||!$)return;const{x:re,y:ce}=Bt(D.nativeEvent,T.current),{startX:ye,startY:we}=$;if(!O.current){const je=r?0:l;if(Math.hypot(re-ye,ce-we)<=je)return;ae(),c==null||c(D)}O.current=!0;const ke={startX:ye,startY:we,x:re<ye?re:ye,y:ce<we?ce:we,width:Math.abs(re-ye),height:Math.abs(ce-we)},ve=V.current,Ce=K.current;V.current=new Set(vc(P,ke,j,o===ws.Partial,!0).map(je=>je.id)),K.current=new Set;const Te=(oe==null?void 0:oe.selectable)??!0;for(const je of V.current){const Ye=q.get(je);if(Ye)for(const{edgeId:Tt}of Ye.values()){const gt=z.get(Tt);gt&&(gt.selectable??Te)&&K.current.add(Tt)}}if(!jp(ve,V.current)){const je=so(P,V.current,!0);ee(je)}if(!jp(Ce,K.current)){const je=so(z,K.current);ne(je)}N.setState({userSelectionRect:ke,userSelectionActive:!0,nodesSelectionActive:!1})},R=D=>{var $,j;D.button===0&&((j=($=D.target)==null?void 0:$.releasePointerCapture)==null||j.call($,D.pointerId),!k&&D.target===W.current&&N.getState().userSelectionRect&&(Y==null||Y(D)),N.setState({userSelectionActive:!1,userSelectionRect:null}),O.current&&(p==null||p(D),N.setState({nodesSelectionActive:V.current.size>0})))},L=i===!0||Array.isArray(i)&&i.includes(0);return d.jsxs("div",{className:Qe(["react-flow__pane",{draggable:L,dragging:M,selection:t}]),onClick:C?void 0:Qu(Y,W),onContextMenu:Qu(Q,W),onWheel:Qu(A,W),onPointerEnter:C?void 0:x,onPointerMove:C?B:g,onPointerUp:C?R:void 0,onPointerDownCapture:C?b:void 0,onClickCapture:C?U:void 0,onPointerLeave:S,ref:W,style:$l,children:[w,d.jsx(ES,{})]})}function uc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:c,nodeLookup:p,onError:h}=r.getState(),m=p.get(t);if(!m){h==null||h("012",en.error012(t));return}r.setState({nodesSelectionActive:!1}),m.selected?(o||m.selected&&c)&&(u({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var v;return(v=i==null?void 0:i.current)==null?void 0:v.blur()})):l([t])}function Am({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:u,nodeClickDistance:c}){const p=Fe(),[h,m]=H.useState(!1),v=H.useRef();return H.useEffect(()=>{v.current=c1({getStoreItems:()=>p.getState(),onNodeMouseDown:x=>{uc({id:x,store:p,nodeRef:t})},onDragStart:()=>{m(!0)},onDragStop:()=>{m(!1)}})},[]),H.useEffect(()=>{var x,g;if(r)(x=v.current)==null||x.destroy();else if(t.current)return(g=v.current)==null||g.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:l,nodeClickDistance:c}),()=>{var S;(S=v.current)==null||S.destroy()}},[o,i,r,u,t,l]),h}const MS=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function zm(){const t=Fe();return H.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:u,nodesDraggable:c,onError:p,updateNodePositions:h,nodeLookup:m,nodeOrigin:v}=t.getState(),x=new Map,g=MS(c),S=l?u[0]:5,w=l?u[1]:5,N=o.direction.x*S*o.factor,k=o.direction.y*w*o.factor;for(const[,I]of m){if(!g(I))continue;let M={x:I.internals.positionAbsolute.x+N,y:I.internals.positionAbsolute.y+k};l&&(M=Ms(M,u));const{position:_,positionAbsolute:C}=om({nodeId:I.id,nextPosition:M,nodeLookup:m,nodeExtent:i,nodeOrigin:v,onError:p});I.position=_,I.internals.positionAbsolute=C,x.set(I.id,I)}h(x)},[])}const Cc=H.createContext(null),bS=Cc.Provider;Cc.Consumer;const $m=()=>H.useContext(Cc),PS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),DS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:u,connection:c}=i,{fromHandle:p,toHandle:h,isValid:m}=c,v=(h==null?void 0:h.nodeId)===t&&(h==null?void 0:h.id)===r&&(h==null?void 0:h.type)===o;return{connectingFrom:(p==null?void 0:p.nodeId)===t&&(p==null?void 0:p.id)===r&&(p==null?void 0:p.type)===o,connectingTo:v,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:u===co.Strict?(p==null?void 0:p.type)!==o:t!==(p==null?void 0:p.nodeId)||r!==(p==null?void 0:p.id),connectionInProcess:!!p,clickConnectionInProcess:!!l,valid:v&&m}};function TS({type:t="source",position:r=xe.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:c,onConnect:p,children:h,className:m,onMouseDown:v,onTouchStart:x,...g},S){var B,R;const w=c||null,N=t==="target",k=Fe(),I=$m(),{connectOnClick:M,noPanClassName:_,rfId:C}=Me(PS,Re),{connectingFrom:W,connectingTo:T,clickConnecting:V,isPossibleEndHandle:K,connectionInProcess:O,clickConnectionInProcess:Y,valid:Q}=Me(DS(I,w,t),Re);I||(R=(B=k.getState()).onError)==null||R.call(B,"010",en.error010());const A=L=>{const{defaultEdgeOptions:D,onConnect:$,hasDefaultEdges:j}=k.getState(),P={...D,...L};if(j){const{edges:z,setEdges:q}=k.getState();q(Qw(P,z))}$==null||$(P),p==null||p(P)},U=L=>{if(!I)return;const D=fm(L.nativeEvent);if(l&&(D&&L.button===0||!D)){const $=k.getState();ac.onPointerDown(L.nativeEvent,{handleDomNode:L.currentTarget,autoPanOnConnect:$.autoPanOnConnect,connectionMode:$.connectionMode,connectionRadius:$.connectionRadius,domNode:$.domNode,nodeLookup:$.nodeLookup,lib:$.lib,isTarget:N,handleId:w,nodeId:I,flowId:$.rfId,panBy:$.panBy,cancelConnection:$.cancelConnection,onConnectStart:$.onConnectStart,onConnectEnd:$.onConnectEnd,updateConnection:$.updateConnection,onConnect:A,isValidConnection:o||$.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:$.autoPanSpeed,dragThreshold:$.connectionDragThreshold})}D?v==null||v(L):x==null||x(L)},b=L=>{const{onClickConnectStart:D,onClickConnectEnd:$,connectionClickStartHandle:j,connectionMode:P,isValidConnection:z,lib:q,rfId:ee,nodeLookup:ne,connection:oe}=k.getState();if(!I||!j&&!l)return;if(!j){D==null||D(L.nativeEvent,{nodeId:I,handleId:w,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:I,type:t,id:w}});return}const ae=cm(L.target),re=o||z,{connection:ce,isValid:ye}=ac.isValid(L.nativeEvent,{handle:{nodeId:I,id:w,type:t},connectionMode:P,fromNodeId:j.nodeId,fromHandleId:j.id||null,fromType:j.type,isValidConnection:re,flowId:ee,doc:ae,lib:q,nodeLookup:ne});ye&&ce&&A(ce);const we=structuredClone(oe);delete we.inProgress,we.toPosition=we.toHandle?we.toHandle.position:null,$==null||$(L,we),k.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":w,"data-nodeid":I,"data-handlepos":r,"data-id":`${C}-${I}-${w}-${t}`,className:Qe(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",_,m,{source:!N,target:N,connectable:i,connectablestart:l,connectableend:u,clickconnecting:V,connectingfrom:W,connectingto:T,valid:Q,connectionindicator:i&&(!O||K)&&(O||Y?u:l)}]),onMouseDown:U,onTouchStart:U,onClick:M?b:void 0,ref:S,...g,children:h})}const Nr=H.memo(Tm(TS));function OS({data:t,isConnectable:r,sourcePosition:o=xe.Bottom}){return d.jsxs(d.Fragment,{children:[t==null?void 0:t.label,d.jsx(Nr,{type:"source",position:o,isConnectable:r})]})}function AS({data:t,isConnectable:r,targetPosition:o=xe.Top,sourcePosition:i=xe.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(Nr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,d.jsx(Nr,{type:"source",position:i,isConnectable:r})]})}function zS(){return null}function $S({data:t,isConnectable:r,targetPosition:o=xe.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(Nr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const _l={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},oh={input:OS,default:AS,output:$S,group:zS};function LS(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const RS=t=>{const{width:r,height:o,x:i,y:l}=js(t.nodeLookup,{filter:u=>!!u.selected});return{width:Vt(r)?r:null,height:Vt(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function FS({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=Fe(),{width:l,height:u,transformString:c,userSelectionActive:p}=Me(RS,Re),h=zm(),m=H.useRef(null);if(H.useEffect(()=>{var g;o||(g=m.current)==null||g.focus({preventScroll:!0})},[o]),Am({nodeRef:m}),p||!l||!u)return null;const v=t?g=>{const S=i.getState().nodes.filter(w=>w.selected);t(g,S)}:void 0,x=g=>{Object.prototype.hasOwnProperty.call(_l,g.key)&&(g.preventDefault(),h({direction:_l[g.key],factor:g.shiftKey?4:1}))};return d.jsx("div",{className:Qe(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c},children:d.jsx("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:o?void 0:-1,onKeyDown:o?void 0:x,style:{width:l,height:u}})})}const sh=typeof window<"u"?window:void 0,HS=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Lm({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,paneClickDistance:p,deleteKeyCode:h,selectionKeyCode:m,selectionOnDrag:v,selectionMode:x,onSelectionStart:g,onSelectionEnd:S,multiSelectionKeyCode:w,panActivationKeyCode:N,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:M,zoomOnPinch:_,panOnScroll:C,panOnScrollSpeed:W,panOnScrollMode:T,zoomOnDoubleClick:V,panOnDrag:K,defaultViewport:O,translateExtent:Y,minZoom:Q,maxZoom:A,preventScrolling:U,onSelectionContextMenu:b,noWheelClassName:B,noPanClassName:R,disableKeyboardA11y:L,onViewportChange:D,isControlledViewport:$}){const{nodesSelectionActive:j,userSelectionActive:P}=Me(HS,Re),z=ks(m,{target:sh}),q=ks(N,{target:sh}),ee=q||K,ne=q||C,oe=v&&ee!==!0,ae=z||P||oe;return SS({deleteKeyCode:h,multiSelectionKeyCode:w}),d.jsx(IS,{onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:M,zoomOnPinch:_,panOnScroll:ne,panOnScrollSpeed:W,panOnScrollMode:T,zoomOnDoubleClick:V,panOnDrag:!z&&ee,defaultViewport:O,translateExtent:Y,minZoom:Q,maxZoom:A,zoomActivationKeyCode:k,preventScrolling:U,noWheelClassName:B,noPanClassName:R,onViewportChange:D,isControlledViewport:$,paneClickDistance:p,selectionOnDrag:oe,children:d.jsxs(jS,{onSelectionStart:g,onSelectionEnd:S,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ee,isSelecting:!!ae,selectionMode:x,selectionKeyPressed:z,paneClickDistance:p,selectionOnDrag:oe,children:[t,j&&d.jsx(FS,{onSelectionContextMenu:b,noPanClassName:R,disableKeyboardA11y:L})]})})}Lm.displayName="FlowRenderer";const VS=H.memo(Lm),BS=t=>r=>t?vc(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function WS(t){return Me(H.useCallback(BS(t),[t]),Re)}const US=t=>t.updateNodeInternals;function YS(){const t=Me(US),[r]=H.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const u=l.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:l.target,force:!0})}),t(i)}));return H.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function XS({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=Fe(),u=H.useRef(null),c=H.useRef(null),p=H.useRef(t.sourcePosition),h=H.useRef(t.targetPosition),m=H.useRef(r),v=o&&!!t.internals.handleBounds;return H.useEffect(()=>{u.current&&!t.hidden&&(!v||c.current!==u.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(u.current),c.current=u.current)},[v,t.hidden]),H.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),H.useEffect(()=>{if(u.current){const x=m.current!==r,g=p.current!==t.sourcePosition,S=h.current!==t.targetPosition;(x||g||S)&&(m.current=r,p.current=t.sourcePosition,h.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),u}function QS({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:u,onDoubleClick:c,nodesDraggable:p,elementsSelectable:h,nodesConnectable:m,nodesFocusable:v,resizeObserver:x,noDragClassName:g,noPanClassName:S,disableKeyboardA11y:w,rfId:N,nodeTypes:k,nodeClickDistance:I,onError:M}){const{node:_,internals:C,isParent:W}=Me(re=>{const ce=re.nodeLookup.get(t),ye=re.parentLookup.has(t);return{node:ce,internals:ce.internals,isParent:ye}},Re);let T=_.type||"default",V=(k==null?void 0:k[T])||oh[T];V===void 0&&(M==null||M("003",en.error003(T)),T="default",V=(k==null?void 0:k.default)||oh.default);const K=!!(_.draggable||p&&typeof _.draggable>"u"),O=!!(_.selectable||h&&typeof _.selectable>"u"),Y=!!(_.connectable||m&&typeof _.connectable>"u"),Q=!!(_.focusable||v&&typeof _.focusable>"u"),A=Fe(),U=am(_),b=XS({node:_,nodeType:T,hasDimensions:U,resizeObserver:x}),B=Am({nodeRef:b,disabled:_.hidden||!K,noDragClassName:g,handleSelector:_.dragHandle,nodeId:t,isSelectable:O,nodeClickDistance:I}),R=zm();if(_.hidden)return null;const L=vn(_),D=LS(_),$=O||K||r||o||i||l,j=o?re=>o(re,{...C.userNode}):void 0,P=i?re=>i(re,{...C.userNode}):void 0,z=l?re=>l(re,{...C.userNode}):void 0,q=u?re=>u(re,{...C.userNode}):void 0,ee=c?re=>c(re,{...C.userNode}):void 0,ne=re=>{const{selectNodesOnDrag:ce,nodeDragThreshold:ye}=A.getState();O&&(!ce||!K||ye>0)&&uc({id:t,store:A,nodeRef:b}),r&&r(re,{...C.userNode})},oe=re=>{if(!(dm(re.nativeEvent)||w)){if(Jh.includes(re.key)&&O){const ce=re.key==="Escape";uc({id:t,store:A,unselect:ce,nodeRef:b})}else if(K&&_.selected&&Object.prototype.hasOwnProperty.call(_l,re.key)){re.preventDefault();const{ariaLabelConfig:ce}=A.getState();A.setState({ariaLiveMessage:ce["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~C.positionAbsolute.x,y:~~C.positionAbsolute.y})}),R({direction:_l[re.key],factor:re.shiftKey?4:1})}}},ae=()=>{var Ce;if(w||!((Ce=b.current)!=null&&Ce.matches(":focus-visible")))return;const{transform:re,width:ce,height:ye,autoPanOnNodeFocus:we,setCenter:ke}=A.getState();if(!we)return;vc(new Map([[t,_]]),{x:0,y:0,width:ce,height:ye},re,!0).length>0||ke(_.position.x+L.width/2,_.position.y+L.height/2,{zoom:re[2]})};return d.jsx("div",{className:Qe(["react-flow__node",`react-flow__node-${T}`,{[S]:K},_.className,{selected:_.selected,selectable:O,parent:W,draggable:K,dragging:B}]),ref:b,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:$?"all":"none",visibility:U?"visible":"hidden",..._.style,...D},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:j,onMouseMove:P,onMouseLeave:z,onContextMenu:q,onClick:ne,onDoubleClick:ee,onKeyDown:Q?oe:void 0,tabIndex:Q?0:void 0,onFocus:Q?ae:void 0,role:_.ariaRole??(Q?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${Mm}-${N}`,"aria-label":_.ariaLabel,..._.domAttributes,children:d.jsx(bS,{value:t,children:d.jsx(V,{id:t,data:_.data,type:T,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:_.selected??!1,selectable:O,draggable:K,deletable:_.deletable??!0,isConnectable:Y,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:B,dragHandle:_.dragHandle,zIndex:C.z,parentId:_.parentId,...L})})})}var GS=H.memo(QS);const KS=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Rm(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:u}=Me(KS,Re),c=WS(t.onlyRenderVisibleElements),p=YS();return d.jsx("div",{className:"react-flow__nodes",style:$l,children:c.map(h=>d.jsx(GS,{id:h,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:p,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:u},h))})}Rm.displayName="NodeRenderer";const qS=H.memo(Rm);function ZS(t){return Me(H.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const u=o.nodeLookup.get(l.source),c=o.nodeLookup.get(l.target);u&&c&&Uw({sourceNode:u,targetNode:c,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),Re)}const JS=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return d.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},eN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return d.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ih={[Nl.Arrow]:JS,[Nl.ArrowClosed]:eN};function tN(t){const r=Fe();return H.useMemo(()=>{var l,u;return Object.prototype.hasOwnProperty.call(ih,t)?ih[t]:((u=(l=r.getState()).onError)==null||u.call(l,"009",en.error009(t)),null)},[t])}const nN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:p="auto-start-reverse"})=>{const h=tN(r);return h?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:p,refX:"0",refY:"0",children:d.jsx(h,{color:o,strokeWidth:c})}):null},Fm=({defaultColor:t,rfId:r})=>{const o=Me(u=>u.edges),i=Me(u=>u.defaultEdgeOptions),l=H.useMemo(()=>Jw(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:l.map(u=>d.jsx(nN,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};Fm.displayName="MarkerDefinitions";var rN=H.memo(Fm);function Hm({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:c=[2,4],labelBgBorderRadius:p=2,children:h,className:m,...v}){const[x,g]=H.useState({x:1,y:0,width:0,height:0}),S=Qe(["react-flow__edge-textwrapper",m]),w=H.useRef(null);return H.useEffect(()=>{if(w.current){const N=w.current.getBBox();g({x:N.x,y:N.y,width:N.width,height:N.height})}},[o]),o?d.jsxs("g",{transform:`translate(${t-x.width/2} ${r-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...v,children:[l&&d.jsx("rect",{width:x.width+2*c[0],x:-c[0],y:-c[1],height:x.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:p,ry:p}),d.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:w,style:i,children:o}),h]}):null}Hm.displayName="EdgeText";const oN=H.memo(Hm);function mo({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:p,labelBgBorderRadius:h,interactionWidth:m=20,...v}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...v,d:t,fill:"none",className:Qe(["react-flow__edge-path",v.className])}),m?d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}):null,i&&Vt(r)&&Vt(o)?d.jsx(oN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:p,labelBgBorderRadius:h}):null]})}function lh({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===xe.Left||t===xe.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function Vm({sourceX:t,sourceY:r,sourcePosition:o=xe.Bottom,targetX:i,targetY:l,targetPosition:u=xe.Top}){const[c,p]=lh({pos:o,x1:t,y1:r,x2:i,y2:l}),[h,m]=lh({pos:u,x1:i,y1:l,x2:t,y2:r}),[v,x,g,S]=pm({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:c,sourceControlY:p,targetControlX:h,targetControlY:m});return[`M${t},${r} C${c},${p} ${h},${m} ${i},${l}`,v,x,g,S]}function Bm(t){return H.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:p,label:h,labelStyle:m,labelShowBg:v,labelBgStyle:x,labelBgPadding:g,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:k,interactionWidth:I})=>{const[M,_,C]=Vm({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p}),W=t.isInternal?void 0:r;return d.jsx(mo,{id:W,path:M,labelX:_,labelY:C,label:h,labelStyle:m,labelShowBg:v,labelBgStyle:x,labelBgPadding:g,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:k,interactionWidth:I})})}const sN=Bm({isInternal:!1}),Wm=Bm({isInternal:!0});sN.displayName="SimpleBezierEdge";Wm.displayName="SimpleBezierEdgeInternal";function Um(t){return H.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:c,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:x,style:g,sourcePosition:S=xe.Bottom,targetPosition:w=xe.Top,markerEnd:N,markerStart:k,pathOptions:I,interactionWidth:M})=>{const[_,C,W]=sc({sourceX:o,sourceY:i,sourcePosition:S,targetX:l,targetY:u,targetPosition:w,borderRadius:I==null?void 0:I.borderRadius,offset:I==null?void 0:I.offset,stepPosition:I==null?void 0:I.stepPosition}),T=t.isInternal?void 0:r;return d.jsx(mo,{id:T,path:_,labelX:C,labelY:W,label:c,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:x,style:g,markerEnd:N,markerStart:k,interactionWidth:M})})}const Ym=Um({isInternal:!1}),Xm=Um({isInternal:!0});Ym.displayName="SmoothStepEdge";Xm.displayName="SmoothStepEdgeInternal";function Qm(t){return H.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return d.jsx(Ym,{...o,id:i,pathOptions:H.useMemo(()=>{var u;return{borderRadius:0,offset:(u=o.pathOptions)==null?void 0:u.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const iN=Qm({isInternal:!1}),Gm=Qm({isInternal:!0});iN.displayName="StepEdge";Gm.displayName="StepEdgeInternal";function Km(t){return H.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:c,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:x,style:g,markerEnd:S,markerStart:w,interactionWidth:N})=>{const[k,I,M]=mm({sourceX:o,sourceY:i,targetX:l,targetY:u}),_=t.isInternal?void 0:r;return d.jsx(mo,{id:_,path:k,labelX:I,labelY:M,label:c,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:x,style:g,markerEnd:S,markerStart:w,interactionWidth:N})})}const lN=Km({isInternal:!1}),qm=Km({isInternal:!0});lN.displayName="StraightEdge";qm.displayName="StraightEdgeInternal";function Zm(t){return H.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c=xe.Bottom,targetPosition:p=xe.Top,label:h,labelStyle:m,labelShowBg:v,labelBgStyle:x,labelBgPadding:g,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:k,pathOptions:I,interactionWidth:M})=>{const[_,C,W]=Tl({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p,curvature:I==null?void 0:I.curvature}),T=t.isInternal?void 0:r;return d.jsx(mo,{id:T,path:_,labelX:C,labelY:W,label:h,labelStyle:m,labelShowBg:v,labelBgStyle:x,labelBgPadding:g,labelBgBorderRadius:S,style:w,markerEnd:N,markerStart:k,interactionWidth:M})})}const aN=Zm({isInternal:!1}),Jm=Zm({isInternal:!0});aN.displayName="BezierEdge";Jm.displayName="BezierEdgeInternal";const ah={default:Jm,straight:qm,step:Gm,smoothstep:Xm,simplebezier:Wm},uh={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},uN=(t,r,o)=>o===xe.Left?t-r:o===xe.Right?t+r:t,cN=(t,r,o)=>o===xe.Top?t-r:o===xe.Bottom?t+r:t,ch="react-flow__edgeupdater";function dh({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:u,onMouseOut:c,type:p}){return d.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:c,className:Qe([ch,`${ch}-${p}`]),cx:uN(r,i,t),cy:cN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function dN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:u,targetY:c,sourcePosition:p,targetPosition:h,onReconnect:m,onReconnectStart:v,onReconnectEnd:x,setReconnecting:g,setUpdateHover:S}){const w=Fe(),N=(C,W)=>{if(C.button!==0)return;const{autoPanOnConnect:T,domNode:V,isValidConnection:K,connectionMode:O,connectionRadius:Y,lib:Q,onConnectStart:A,onConnectEnd:U,cancelConnection:b,nodeLookup:B,rfId:R,panBy:L,updateConnection:D}=w.getState(),$=W.type==="target",j=(q,ee)=>{g(!1),x==null||x(q,o,W.type,ee)},P=q=>m==null?void 0:m(o,q),z=(q,ee)=>{g(!0),v==null||v(C,o,W.type),A==null||A(q,ee)};ac.onPointerDown(C.nativeEvent,{autoPanOnConnect:T,connectionMode:O,connectionRadius:Y,domNode:V,handleId:W.id,nodeId:W.nodeId,nodeLookup:B,isTarget:$,edgeUpdaterType:W.type,lib:Q,flowId:R,cancelConnection:b,panBy:L,isValidConnection:K,onConnect:P,onConnectStart:z,onConnectEnd:U,onReconnectEnd:j,updateConnection:D,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:C.currentTarget})},k=C=>N(C,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),I=C=>N(C,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),M=()=>S(!0),_=()=>S(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(dh,{position:p,centerX:i,centerY:l,radius:r,onMouseDown:k,onMouseEnter:M,onMouseOut:_,type:"source"}),(t===!0||t==="target")&&d.jsx(dh,{position:h,centerX:u,centerY:c,radius:r,onMouseDown:I,onMouseEnter:M,onMouseOut:_,type:"target"})]})}function fN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:u,onContextMenu:c,onMouseEnter:p,onMouseMove:h,onMouseLeave:m,reconnectRadius:v,onReconnect:x,onReconnectStart:g,onReconnectEnd:S,rfId:w,edgeTypes:N,noPanClassName:k,onError:I,disableKeyboardA11y:M}){let _=Me(ke=>ke.edgeLookup.get(t));const C=Me(ke=>ke.defaultEdgeOptions);_=C?{...C,..._}:_;let W=_.type||"default",T=(N==null?void 0:N[W])||ah[W];T===void 0&&(I==null||I("011",en.error011(W)),W="default",T=(N==null?void 0:N.default)||ah.default);const V=!!(_.focusable||r&&typeof _.focusable>"u"),K=typeof x<"u"&&(_.reconnectable||o&&typeof _.reconnectable>"u"),O=!!(_.selectable||i&&typeof _.selectable>"u"),Y=H.useRef(null),[Q,A]=H.useState(!1),[U,b]=H.useState(!1),B=Fe(),{zIndex:R,sourceX:L,sourceY:D,targetX:$,targetY:j,sourcePosition:P,targetPosition:z}=Me(H.useCallback(ke=>{const ve=ke.nodeLookup.get(_.source),Ce=ke.nodeLookup.get(_.target);if(!ve||!Ce)return{zIndex:_.zIndex,...uh};const Te=Zw({id:t,sourceNode:ve,targetNode:Ce,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:ke.connectionMode,onError:I});return{zIndex:Ww({selected:_.selected,zIndex:_.zIndex,sourceNode:ve,targetNode:Ce,elevateOnSelect:ke.elevateEdgesOnSelect,zIndexMode:ke.zIndexMode}),...Te||uh}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Re),q=H.useMemo(()=>_.markerStart?`url('#${ic(_.markerStart,w)}')`:void 0,[_.markerStart,w]),ee=H.useMemo(()=>_.markerEnd?`url('#${ic(_.markerEnd,w)}')`:void 0,[_.markerEnd,w]);if(_.hidden||L===null||D===null||$===null||j===null)return null;const ne=ke=>{var je;const{addSelectedEdges:ve,unselectNodesAndEdges:Ce,multiSelectionActive:Te}=B.getState();O&&(B.setState({nodesSelectionActive:!1}),_.selected&&Te?(Ce({nodes:[],edges:[_]}),(je=Y.current)==null||je.blur()):ve([t])),l&&l(ke,_)},oe=u?ke=>{u(ke,{..._})}:void 0,ae=c?ke=>{c(ke,{..._})}:void 0,re=p?ke=>{p(ke,{..._})}:void 0,ce=h?ke=>{h(ke,{..._})}:void 0,ye=m?ke=>{m(ke,{..._})}:void 0,we=ke=>{var ve;if(!M&&Jh.includes(ke.key)&&O){const{unselectNodesAndEdges:Ce,addSelectedEdges:Te}=B.getState();ke.key==="Escape"?((ve=Y.current)==null||ve.blur(),Ce({edges:[_]})):Te([t])}};return d.jsx("svg",{style:{zIndex:R},children:d.jsxs("g",{className:Qe(["react-flow__edge",`react-flow__edge-${W}`,_.className,k,{selected:_.selected,animated:_.animated,inactive:!O&&!l,updating:Q,selectable:O}]),onClick:ne,onDoubleClick:oe,onContextMenu:ae,onMouseEnter:re,onMouseMove:ce,onMouseLeave:ye,onKeyDown:V?we:void 0,tabIndex:V?0:void 0,role:_.ariaRole??(V?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":V?`${bm}-${w}`:void 0,ref:Y,..._.domAttributes,children:[!U&&d.jsx(T,{id:t,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:O,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:L,sourceY:D,targetX:$,targetY:j,sourcePosition:P,targetPosition:z,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:q,markerEnd:ee,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),K&&d.jsx(dN,{edge:_,isReconnectable:K,reconnectRadius:v,onReconnect:x,onReconnectStart:g,onReconnectEnd:S,sourceX:L,sourceY:D,targetX:$,targetY:j,sourcePosition:P,targetPosition:z,setUpdateHover:A,setReconnecting:b})]})})}var pN=H.memo(fN);const hN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function eg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:u,onEdgeContextMenu:c,onEdgeMouseEnter:p,onEdgeMouseMove:h,onEdgeMouseLeave:m,onEdgeClick:v,reconnectRadius:x,onEdgeDoubleClick:g,onReconnectStart:S,onReconnectEnd:w,disableKeyboardA11y:N}){const{edgesFocusable:k,edgesReconnectable:I,elementsSelectable:M,onError:_}=Me(hN,Re),C=ZS(r);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(rN,{defaultColor:t,rfId:o}),C.map(W=>d.jsx(pN,{id:W,edgesFocusable:k,edgesReconnectable:I,elementsSelectable:M,noPanClassName:l,onReconnect:u,onContextMenu:c,onMouseEnter:p,onMouseMove:h,onMouseLeave:m,onClick:v,reconnectRadius:x,onDoubleClick:g,onReconnectStart:S,onReconnectEnd:w,rfId:o,onError:_,edgeTypes:i,disableKeyboardA11y:N},W))]})}eg.displayName="EdgeRenderer";const mN=H.memo(eg),gN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function xN({children:t}){const r=Me(gN);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function yN(t){const r=Ir(),o=H.useRef(!1);H.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const vN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function wN(t){const r=Me(vN),o=Fe();return H.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function SN(t){return t.connection.inProgress?{...t.connection,to:bs(t.connection.to,t.transform)}:{...t.connection}}function NN(t){return SN}function kN(t){const r=NN();return Me(r,Re)}const IN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function _N({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:u,height:c,isValid:p,inProgress:h}=Me(IN,Re);return!(u&&l&&h)?null:d.jsx("svg",{style:t,width:u,height:c,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Qe(["react-flow__connection",nm(p)]),children:d.jsx(tg,{style:r,type:o,CustomComponent:i,isValid:p})})})}const tg=({style:t,type:r=Wn.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:u,fromNode:c,fromHandle:p,fromPosition:h,to:m,toNode:v,toHandle:x,toPosition:g,pointer:S}=kN();if(!l)return;if(o)return d.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:c,fromHandle:p,fromX:u.x,fromY:u.y,toX:m.x,toY:m.y,fromPosition:h,toPosition:g,connectionStatus:nm(i),toNode:v,toHandle:x,pointer:S});let w="";const N={sourceX:u.x,sourceY:u.y,sourcePosition:h,targetX:m.x,targetY:m.y,targetPosition:g};switch(r){case Wn.Bezier:[w]=Tl(N);break;case Wn.SimpleBezier:[w]=Vm(N);break;case Wn.Step:[w]=sc({...N,borderRadius:0});break;case Wn.SmoothStep:[w]=sc(N);break;default:[w]=mm(N)}return d.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:t})};tg.displayName="ConnectionLine";const EN={};function fh(t=EN){H.useRef(t),Fe(),H.useEffect(()=>{},[t])}function CN(){Fe(),H.useRef(!1),H.useEffect(()=>{},[])}function ng({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:v,onSelectionContextMenu:x,onSelectionStart:g,onSelectionEnd:S,connectionLineType:w,connectionLineStyle:N,connectionLineComponent:k,connectionLineContainerStyle:I,selectionKeyCode:M,selectionOnDrag:_,selectionMode:C,multiSelectionKeyCode:W,panActivationKeyCode:T,zoomActivationKeyCode:V,deleteKeyCode:K,onlyRenderVisibleElements:O,elementsSelectable:Y,defaultViewport:Q,translateExtent:A,minZoom:U,maxZoom:b,preventScrolling:B,defaultMarkerColor:R,zoomOnScroll:L,zoomOnPinch:D,panOnScroll:$,panOnScrollSpeed:j,panOnScrollMode:P,zoomOnDoubleClick:z,panOnDrag:q,onPaneClick:ee,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneScroll:re,onPaneContextMenu:ce,paneClickDistance:ye,nodeClickDistance:we,onEdgeContextMenu:ke,onEdgeMouseEnter:ve,onEdgeMouseMove:Ce,onEdgeMouseLeave:Te,reconnectRadius:je,onReconnect:Ye,onReconnectStart:Tt,onReconnectEnd:gt,noDragClassName:xt,noWheelClassName:_t,noPanClassName:nn,disableKeyboardA11y:wn,nodeExtent:_r,rfId:Yn,viewport:rn,onViewportChange:on}){return fh(t),fh(r),CN(),yN(o),wN(rn),d.jsx(VS,{onPaneClick:ee,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneContextMenu:ce,onPaneScroll:re,paneClickDistance:ye,deleteKeyCode:K,selectionKeyCode:M,selectionOnDrag:_,selectionMode:C,onSelectionStart:g,onSelectionEnd:S,multiSelectionKeyCode:W,panActivationKeyCode:T,zoomActivationKeyCode:V,elementsSelectable:Y,zoomOnScroll:L,zoomOnPinch:D,zoomOnDoubleClick:z,panOnScroll:$,panOnScrollSpeed:j,panOnScrollMode:P,panOnDrag:q,defaultViewport:Q,translateExtent:A,minZoom:U,maxZoom:b,onSelectionContextMenu:x,preventScrolling:B,noDragClassName:xt,noWheelClassName:_t,noPanClassName:nn,disableKeyboardA11y:wn,onViewportChange:on,isControlledViewport:!!rn,children:d.jsxs(xN,{children:[d.jsx(mN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:c,onReconnect:Ye,onReconnectStart:Tt,onReconnectEnd:gt,onlyRenderVisibleElements:O,onEdgeContextMenu:ke,onEdgeMouseEnter:ve,onEdgeMouseMove:Ce,onEdgeMouseLeave:Te,reconnectRadius:je,defaultMarkerColor:R,noPanClassName:nn,disableKeyboardA11y:wn,rfId:Yn}),d.jsx(_N,{style:N,type:w,component:k,containerStyle:I}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(qS,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:p,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:v,nodeClickDistance:we,onlyRenderVisibleElements:O,noPanClassName:nn,noDragClassName:xt,disableKeyboardA11y:wn,nodeExtent:_r,rfId:Yn}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}ng.displayName="GraphView";const jN=H.memo(ng),ph=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:c,fitViewOptions:p,minZoom:h=.5,maxZoom:m=2,nodeOrigin:v,nodeExtent:x,zIndexMode:g="basic"}={})=>{const S=new Map,w=new Map,N=new Map,k=new Map,I=i??r??[],M=o??t??[],_=v??[0,0],C=x??vs;ym(N,k,I);const W=lc(M,S,w,{nodeOrigin:_,nodeExtent:C,zIndexMode:g});let T=[0,0,1];if(c&&l&&u){const V=js(S,{filter:Q=>!!((Q.width||Q.initialWidth)&&(Q.height||Q.initialHeight))}),{x:K,y:O,zoom:Y}=wc(V,l,u,h,m,(p==null?void 0:p.padding)??.1);T=[K,O,Y]}return{rfId:"1",width:l??0,height:u??0,transform:T,nodes:M,nodesInitialized:W,nodeLookup:S,parentLookup:w,edges:I,edgeLookup:k,connectionLookup:N,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:h,maxZoom:m,translateExtent:vs,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:co.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:p,fitViewResolver:null,connection:{...tm},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Lw,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:em,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},MN=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:c,fitViewOptions:p,minZoom:h,maxZoom:m,nodeOrigin:v,nodeExtent:x,zIndexMode:g})=>W1((S,w)=>{async function N(){const{nodeLookup:k,panZoom:I,fitViewOptions:M,fitViewResolver:_,width:C,height:W,minZoom:T,maxZoom:V}=w();I&&(await zw({nodes:k,width:C,height:W,panZoom:I,minZoom:T,maxZoom:V},M),_==null||_.resolve(!0),S({fitViewResolver:null}))}return{...ph({nodes:t,edges:r,width:l,height:u,fitView:c,fitViewOptions:p,minZoom:h,maxZoom:m,nodeOrigin:v,nodeExtent:x,defaultNodes:o,defaultEdges:i,zIndexMode:g}),setNodes:k=>{const{nodeLookup:I,parentLookup:M,nodeOrigin:_,elevateNodesOnSelect:C,fitViewQueued:W,zIndexMode:T}=w(),V=lc(k,I,M,{nodeOrigin:_,nodeExtent:x,elevateNodesOnSelect:C,checkEquality:!0,zIndexMode:T});W&&V?(N(),S({nodes:k,nodesInitialized:V,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:k,nodesInitialized:V})},setEdges:k=>{const{connectionLookup:I,edgeLookup:M}=w();ym(I,M,k),S({edges:k})},setDefaultNodesAndEdges:(k,I)=>{if(k){const{setNodes:M}=w();M(k),S({hasDefaultNodes:!0})}if(I){const{setEdges:M}=w();M(I),S({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:I,nodeLookup:M,parentLookup:_,domNode:C,nodeOrigin:W,nodeExtent:T,debug:V,fitViewQueued:K,zIndexMode:O}=w(),{changes:Y,updatedInternals:Q}=i1(k,M,_,C,W,T,O);Q&&(n1(M,_,{nodeOrigin:W,nodeExtent:T,zIndexMode:O}),K?(N(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),(Y==null?void 0:Y.length)>0&&(V&&console.log("React Flow: trigger node changes",Y),I==null||I(Y)))},updateNodePositions:(k,I=!1)=>{const M=[];let _=[];const{nodeLookup:C,triggerNodeChanges:W,connection:T,updateConnection:V,onNodesChangeMiddlewareMap:K}=w();for(const[O,Y]of k){const Q=C.get(O),A=!!(Q!=null&&Q.expandParent&&(Q!=null&&Q.parentId)&&(Y!=null&&Y.position)),U={id:O,type:"position",position:A?{x:Math.max(0,Y.position.x),y:Math.max(0,Y.position.y)}:Y.position,dragging:I};if(Q&&T.inProgress&&T.fromNode.id===Q.id){const b=wr(Q,T.fromHandle,xe.Left,!0);V({...T,from:b})}A&&Q.parentId&&M.push({id:O,parentId:Q.parentId,rect:{...Y.internals.positionAbsolute,width:Y.measured.width??0,height:Y.measured.height??0}}),_.push(U)}if(M.length>0){const{parentLookup:O,nodeOrigin:Y}=w(),Q=Ec(M,C,O,Y);_.push(...Q)}for(const O of K.values())_=O(_);W(_)},triggerNodeChanges:k=>{const{onNodesChange:I,setNodes:M,nodes:_,hasDefaultNodes:C,debug:W}=w();if(k!=null&&k.length){if(C){const T=fS(k,_);M(T)}W&&console.log("React Flow: trigger node changes",k),I==null||I(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:I,setEdges:M,edges:_,hasDefaultEdges:C,debug:W}=w();if(k!=null&&k.length){if(C){const T=pS(k,_);M(T)}W&&console.log("React Flow: trigger edge changes",k),I==null||I(k)}},addSelectedNodes:k=>{const{multiSelectionActive:I,edgeLookup:M,nodeLookup:_,triggerNodeChanges:C,triggerEdgeChanges:W}=w();if(I){const T=k.map(V=>fr(V,!0));C(T);return}C(so(_,new Set([...k]),!0)),W(so(M))},addSelectedEdges:k=>{const{multiSelectionActive:I,edgeLookup:M,nodeLookup:_,triggerNodeChanges:C,triggerEdgeChanges:W}=w();if(I){const T=k.map(V=>fr(V,!0));W(T);return}W(so(M,new Set([...k]))),C(so(_,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:I}={})=>{const{edges:M,nodes:_,nodeLookup:C,triggerNodeChanges:W,triggerEdgeChanges:T}=w(),V=k||_,K=I||M,O=V.map(Q=>{const A=C.get(Q.id);return A&&(A.selected=!1),fr(Q.id,!1)}),Y=K.map(Q=>fr(Q.id,!1));W(O),T(Y)},setMinZoom:k=>{const{panZoom:I,maxZoom:M}=w();I==null||I.setScaleExtent([k,M]),S({minZoom:k})},setMaxZoom:k=>{const{panZoom:I,minZoom:M}=w();I==null||I.setScaleExtent([M,k]),S({maxZoom:k})},setTranslateExtent:k=>{var I;(I=w().panZoom)==null||I.setTranslateExtent(k),S({translateExtent:k})},resetSelectedElements:()=>{const{edges:k,nodes:I,triggerNodeChanges:M,triggerEdgeChanges:_,elementsSelectable:C}=w();if(!C)return;const W=I.reduce((V,K)=>K.selected?[...V,fr(K.id,!1)]:V,[]),T=k.reduce((V,K)=>K.selected?[...V,fr(K.id,!1)]:V,[]);M(W),_(T)},setNodeExtent:k=>{const{nodes:I,nodeLookup:M,parentLookup:_,nodeOrigin:C,elevateNodesOnSelect:W,nodeExtent:T,zIndexMode:V}=w();k[0][0]===T[0][0]&&k[0][1]===T[0][1]&&k[1][0]===T[1][0]&&k[1][1]===T[1][1]||(lc(I,M,_,{nodeOrigin:C,nodeExtent:k,elevateNodesOnSelect:W,checkEquality:!1,zIndexMode:V}),S({nodeExtent:k}))},panBy:k=>{const{transform:I,width:M,height:_,panZoom:C,translateExtent:W}=w();return l1({delta:k,panZoom:C,transform:I,translateExtent:W,width:M,height:_})},setCenter:async(k,I,M)=>{const{width:_,height:C,maxZoom:W,panZoom:T}=w();if(!T)return Promise.resolve(!1);const V=typeof(M==null?void 0:M.zoom)<"u"?M.zoom:W;return await T.setViewport({x:_/2-k*V,y:C/2-I*V,zoom:V},{duration:M==null?void 0:M.duration,ease:M==null?void 0:M.ease,interpolate:M==null?void 0:M.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...tm}})},updateConnection:k=>{S({connection:k})},reset:()=>S({...ph()})}},Object.is);function Ll({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:u,initialMinZoom:c,initialMaxZoom:p,initialFitViewOptions:h,fitView:m,nodeOrigin:v,nodeExtent:x,zIndexMode:g,children:S}){const[w]=H.useState(()=>MN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:m,minZoom:c,maxZoom:p,fitViewOptions:h,nodeOrigin:v,nodeExtent:x,zIndexMode:g}));return d.jsx(Y1,{value:w,children:d.jsx(xS,{children:S})})}function bN({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:u,height:c,fitView:p,fitViewOptions:h,minZoom:m,maxZoom:v,nodeOrigin:x,nodeExtent:g,zIndexMode:S}){return H.useContext(Al)?d.jsx(d.Fragment,{children:t}):d.jsx(Ll,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:u,initialHeight:c,fitView:p,initialFitViewOptions:h,initialMinZoom:m,initialMaxZoom:v,nodeOrigin:x,nodeExtent:g,zIndexMode:S,children:t})}const PN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function DN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:u,edgeTypes:c,onNodeClick:p,onEdgeClick:h,onInit:m,onMove:v,onMoveStart:x,onMoveEnd:g,onConnect:S,onConnectStart:w,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:I,onNodeMouseEnter:M,onNodeMouseMove:_,onNodeMouseLeave:C,onNodeContextMenu:W,onNodeDoubleClick:T,onNodeDragStart:V,onNodeDrag:K,onNodeDragStop:O,onNodesDelete:Y,onEdgesDelete:Q,onDelete:A,onSelectionChange:U,onSelectionDragStart:b,onSelectionDrag:B,onSelectionDragStop:R,onSelectionContextMenu:L,onSelectionStart:D,onSelectionEnd:$,onBeforeDelete:j,connectionMode:P,connectionLineType:z=Wn.Bezier,connectionLineStyle:q,connectionLineComponent:ee,connectionLineContainerStyle:ne,deleteKeyCode:oe="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:re=!1,selectionMode:ce=ws.Full,panActivationKeyCode:ye="Space",multiSelectionKeyCode:we=Ns()?"Meta":"Control",zoomActivationKeyCode:ke=Ns()?"Meta":"Control",snapToGrid:ve,snapGrid:Ce,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:je,nodesDraggable:Ye,autoPanOnNodeFocus:Tt,nodesConnectable:gt,nodesFocusable:xt,nodeOrigin:_t=Pm,edgesFocusable:nn,edgesReconnectable:wn,elementsSelectable:_r=!0,defaultViewport:Yn=sS,minZoom:rn=.5,maxZoom:on=2,translateExtent:Xn=vs,preventScrolling:Ps=!0,nodeExtent:sn,defaultMarkerColor:Qn="#b1b1b7",zoomOnScroll:Fl=!0,zoomOnPinch:Ds=!0,panOnScroll:Ts=!1,panOnScrollSpeed:Hl=.5,panOnScrollMode:go=gr.Free,zoomOnDoubleClick:xo=!0,panOnDrag:yo=!0,onPaneClick:vo,onPaneMouseEnter:wo,onPaneMouseMove:Sn,onPaneMouseLeave:Nn,onPaneScroll:Os,onPaneContextMenu:As,paneClickDistance:zs=1,nodeClickDistance:$s=0,children:Ls,onReconnect:So,onReconnectStart:Rs,onReconnectEnd:Gn,onEdgeContextMenu:No,onEdgeDoubleClick:Kn,onEdgeMouseEnter:Vl,onEdgeMouseMove:qn,onEdgeMouseLeave:Er,reconnectRadius:Cr=10,onNodesChange:ko,onEdgesChange:Bl,noDragClassName:Wl="nodrag",noWheelClassName:Ul="nowheel",noPanClassName:Ut="nopan",fitView:Io,fitViewOptions:_o,connectOnClick:Yl,attributionPosition:Fs,proOptions:Hs,defaultEdgeOptions:Vs,elevateNodesOnSelect:Bs=!0,elevateEdgesOnSelect:Xl=!1,disableKeyboardA11y:Ws=!1,autoPanOnConnect:He,autoPanOnNodeDrag:Ql,autoPanSpeed:Eo,connectionRadius:Us,isValidConnection:jr,onError:Gl,style:Ys,id:Zn,nodeDragThreshold:Et,connectionDragThreshold:Kl,viewport:yt,onViewportChange:ql,width:Zl,height:Jl,colorMode:Mr="light",debug:br,onScroll:Yt,ariaLabelConfig:Pr,zIndexMode:Xs="basic",...ea},Co){const Dr=Zn||"1",jo=uS(Mr),Jn=H.useCallback(Qs=>{Qs.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Yt==null||Yt(Qs)},[Yt]);return d.jsx("div",{"data-testid":"rf__wrapper",...ea,onScroll:Jn,style:{...Ys,...PN},ref:Co,className:Qe(["react-flow",l,jo]),id:Zn,role:"application",children:d.jsxs(bN,{nodes:t,edges:r,width:Zl,height:Jl,fitView:Io,fitViewOptions:_o,minZoom:rn,maxZoom:on,nodeOrigin:_t,nodeExtent:sn,zIndexMode:Xs,children:[d.jsx(jN,{onInit:m,onNodeClick:p,onEdgeClick:h,onNodeMouseEnter:M,onNodeMouseMove:_,onNodeMouseLeave:C,onNodeContextMenu:W,onNodeDoubleClick:T,nodeTypes:u,edgeTypes:c,connectionLineType:z,connectionLineStyle:q,connectionLineComponent:ee,connectionLineContainerStyle:ne,selectionKeyCode:ae,selectionOnDrag:re,selectionMode:ce,deleteKeyCode:oe,multiSelectionKeyCode:we,panActivationKeyCode:ye,zoomActivationKeyCode:ke,onlyRenderVisibleElements:Te,defaultViewport:Yn,translateExtent:Xn,minZoom:rn,maxZoom:on,preventScrolling:Ps,zoomOnScroll:Fl,zoomOnPinch:Ds,zoomOnDoubleClick:xo,panOnScroll:Ts,panOnScrollSpeed:Hl,panOnScrollMode:go,panOnDrag:yo,onPaneClick:vo,onPaneMouseEnter:wo,onPaneMouseMove:Sn,onPaneMouseLeave:Nn,onPaneScroll:Os,onPaneContextMenu:As,paneClickDistance:zs,nodeClickDistance:$s,onSelectionContextMenu:L,onSelectionStart:D,onSelectionEnd:$,onReconnect:So,onReconnectStart:Rs,onReconnectEnd:Gn,onEdgeContextMenu:No,onEdgeDoubleClick:Kn,onEdgeMouseEnter:Vl,onEdgeMouseMove:qn,onEdgeMouseLeave:Er,reconnectRadius:Cr,defaultMarkerColor:Qn,noDragClassName:Wl,noWheelClassName:Ul,noPanClassName:Ut,rfId:Dr,disableKeyboardA11y:Ws,nodeExtent:sn,viewport:yt,onViewportChange:ql}),d.jsx(aS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:S,onConnectStart:w,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:I,nodesDraggable:Ye,autoPanOnNodeFocus:Tt,nodesConnectable:gt,nodesFocusable:xt,edgesFocusable:nn,edgesReconnectable:wn,elementsSelectable:_r,elevateNodesOnSelect:Bs,elevateEdgesOnSelect:Xl,minZoom:rn,maxZoom:on,nodeExtent:sn,onNodesChange:ko,onEdgesChange:Bl,snapToGrid:ve,snapGrid:Ce,connectionMode:P,translateExtent:Xn,connectOnClick:Yl,defaultEdgeOptions:Vs,fitView:Io,fitViewOptions:_o,onNodesDelete:Y,onEdgesDelete:Q,onDelete:A,onNodeDragStart:V,onNodeDrag:K,onNodeDragStop:O,onSelectionDrag:B,onSelectionDragStart:b,onSelectionDragStop:R,onMove:v,onMoveStart:x,onMoveEnd:g,noPanClassName:Ut,nodeOrigin:_t,rfId:Dr,autoPanOnConnect:He,autoPanOnNodeDrag:Ql,autoPanSpeed:Eo,onError:Gl,connectionRadius:Us,isValidConnection:jr,selectNodesOnDrag:je,nodeDragThreshold:Et,connectionDragThreshold:Kl,onBeforeDelete:j,debug:br,ariaLabelConfig:Pr,zIndexMode:Xs}),d.jsx(oS,{onSelectionChange:U}),Ls,d.jsx(J1,{proOptions:Hs,position:Fs}),d.jsx(Z1,{rfId:Dr,disableKeyboardA11y:Ws})]})})}var rg=Tm(DN);const TN=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function og({children:t}){const r=Me(TN);return r?U1.createPortal(t,r):null}function ON({dimensions:t,lineWidth:r,variant:o,className:i}){return d.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Qe(["react-flow__background-pattern",o,i])})}function AN({radius:t,className:r}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Qe(["react-flow__background-pattern","dots",r])})}var Un;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Un||(Un={}));const zN={[Un.Dots]:1,[Un.Lines]:1,[Un.Cross]:6},$N=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function sg({id:t,variant:r=Un.Dots,gap:o=20,size:i,lineWidth:l=1,offset:u=0,color:c,bgColor:p,style:h,className:m,patternClassName:v}){const x=H.useRef(null),{transform:g,patternId:S}=Me($N,Re),w=i||zN[r],N=r===Un.Dots,k=r===Un.Cross,I=Array.isArray(o)?o:[o,o],M=[I[0]*g[2]||1,I[1]*g[2]||1],_=w*g[2],C=Array.isArray(u)?u:[u,u],W=k?[_,_]:M,T=[C[0]*g[2]||1+W[0]/2,C[1]*g[2]||1+W[1]/2],V=`${S}${t||""}`;return d.jsxs("svg",{className:Qe(["react-flow__background",m]),style:{...h,...$l,"--xy-background-color-props":p,"--xy-background-pattern-color-props":c},ref:x,"data-testid":"rf__background",children:[d.jsx("pattern",{id:V,x:g[0]%M[0],y:g[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:N?d.jsx(AN,{radius:_/2,className:v}):d.jsx(ON,{dimensions:W,lineWidth:l,variant:r,className:v})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${V})`})]})}sg.displayName="Background";const ig=H.memo(sg);function LN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function RN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function FN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function HN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function VN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ol({children:t,className:r,...o}){return d.jsx("button",{type:"button",className:Qe(["react-flow__controls-button",r]),...o,children:t})}const BN=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function lg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:c,onFitView:p,onInteractiveChange:h,className:m,children:v,position:x="bottom-left",orientation:g="vertical","aria-label":S}){const w=Fe(),{isInteractive:N,minZoomReached:k,maxZoomReached:I,ariaLabelConfig:M}=Me(BN,Re),{zoomIn:_,zoomOut:C,fitView:W}=Ir(),T=()=>{_(),u==null||u()},V=()=>{C(),c==null||c()},K=()=>{W(l),p==null||p()},O=()=>{w.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),h==null||h(!N)},Y=g==="horizontal"?"horizontal":"vertical";return d.jsxs(zl,{className:Qe(["react-flow__controls",Y,m]),position:x,style:t,"data-testid":"rf__controls","aria-label":S??M["controls.ariaLabel"],children:[r&&d.jsxs(d.Fragment,{children:[d.jsx(ol,{onClick:T,className:"react-flow__controls-zoomin",title:M["controls.zoomIn.ariaLabel"],"aria-label":M["controls.zoomIn.ariaLabel"],disabled:I,children:d.jsx(LN,{})}),d.jsx(ol,{onClick:V,className:"react-flow__controls-zoomout",title:M["controls.zoomOut.ariaLabel"],"aria-label":M["controls.zoomOut.ariaLabel"],disabled:k,children:d.jsx(RN,{})})]}),o&&d.jsx(ol,{className:"react-flow__controls-fitview",onClick:K,title:M["controls.fitView.ariaLabel"],"aria-label":M["controls.fitView.ariaLabel"],children:d.jsx(FN,{})}),i&&d.jsx(ol,{className:"react-flow__controls-interactive",onClick:O,title:M["controls.interactive.ariaLabel"],"aria-label":M["controls.interactive.ariaLabel"],children:N?d.jsx(VN,{}):d.jsx(HN,{})}),v]})}lg.displayName="Controls";const ag=H.memo(lg);function WN({id:t,x:r,y:o,width:i,height:l,style:u,color:c,strokeColor:p,strokeWidth:h,className:m,borderRadius:v,shapeRendering:x,selected:g,onClick:S}){const{background:w,backgroundColor:N}=u||{},k=c||w||N;return d.jsx("rect",{className:Qe(["react-flow__minimap-node",{selected:g},m]),x:r,y:o,rx:v,ry:v,width:i,height:l,style:{fill:k,stroke:p,strokeWidth:h},shapeRendering:x,onClick:S?I=>S(I,t):void 0})}const UN=H.memo(WN),YN=t=>t.nodes.map(r=>r.id),Gu=t=>t instanceof Function?t:()=>t;function XN({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:u=UN,onClick:c}){const p=Me(YN,Re),h=Gu(r),m=Gu(t),v=Gu(o),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:p.map(g=>d.jsx(GN,{id:g,nodeColorFunc:h,nodeStrokeColorFunc:m,nodeClassNameFunc:v,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:u,onClick:c,shapeRendering:x},g))})}function QN({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:c,NodeComponent:p,onClick:h}){const{node:m,x:v,y:x,width:g,height:S}=Me(w=>{const{internals:N}=w.nodeLookup.get(t),k=N.userNode,{x:I,y:M}=N.positionAbsolute,{width:_,height:C}=vn(k);return{node:k,x:I,y:M,width:_,height:C}},Re);return!m||m.hidden||!am(m)?null:d.jsx(p,{x:v,y:x,width:g,height:S,style:m.style,selected:!!m.selected,className:i(m),color:r(m),borderRadius:l,strokeColor:o(m),strokeWidth:u,shapeRendering:c,onClick:h,id:m.id})}const GN=H.memo(QN);var KN=H.memo(XN);const qN=200,ZN=150,JN=t=>!t.hidden,ek=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?lm(js(t.nodeLookup,{filter:JN}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},tk="react-flow__minimap-desc";function ug({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:p,bgColor:h,maskColor:m,maskStrokeColor:v,maskStrokeWidth:x,position:g="bottom-right",onClick:S,onNodeClick:w,pannable:N=!1,zoomable:k=!1,ariaLabel:I,inversePan:M,zoomStep:_=1,offsetScale:C=5}){const W=Fe(),T=H.useRef(null),{boundingRect:V,viewBB:K,rfId:O,panZoom:Y,translateExtent:Q,flowWidth:A,flowHeight:U,ariaLabelConfig:b}=Me(ek,Re),B=(t==null?void 0:t.width)??qN,R=(t==null?void 0:t.height)??ZN,L=V.width/B,D=V.height/R,$=Math.max(L,D),j=$*B,P=$*R,z=C*$,q=V.x-(j-V.width)/2-z,ee=V.y-(P-V.height)/2-z,ne=j+z*2,oe=P+z*2,ae=`${tk}-${O}`,re=H.useRef(0),ce=H.useRef();re.current=$,H.useEffect(()=>{if(T.current&&Y)return ce.current=g1({domNode:T.current,panZoom:Y,getTransform:()=>W.getState().transform,getViewScale:()=>re.current}),()=>{var ve;(ve=ce.current)==null||ve.destroy()}},[Y]),H.useEffect(()=>{var ve;(ve=ce.current)==null||ve.update({translateExtent:Q,width:A,height:U,inversePan:M,pannable:N,zoomStep:_,zoomable:k})},[N,k,M,_,Q,A,U]);const ye=S?ve=>{var je;const[Ce,Te]=((je=ce.current)==null?void 0:je.pointer(ve))||[0,0];S(ve,{x:Ce,y:Te})}:void 0,we=w?H.useCallback((ve,Ce)=>{const Te=W.getState().nodeLookup.get(Ce).internals.userNode;w(ve,Te)},[]):void 0,ke=I??b["minimap.ariaLabel"];return d.jsx(zl,{position:g,style:{...t,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-color-props":typeof v=="string"?v:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*$:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Qe(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:B,height:R,viewBox:`${q} ${ee} ${ne} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:T,onClick:ye,children:[ke&&d.jsx("title",{id:ae,children:ke}),d.jsx(KN,{onClick:we,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:c,nodeComponent:p}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${q-z},${ee-z}h${ne+z*2}v${oe+z*2}h${-ne-z*2}z
        M${K.x},${K.y}h${K.width}v${K.height}h${-K.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ug.displayName="MiniMap";const nk=H.memo(ug),rk=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,ok={[Sr.Line]:"right",[Sr.Handle]:"bottom-right"};function sk({nodeId:t,position:r,variant:o=Sr.Handle,className:i,style:l=void 0,children:u,color:c,minWidth:p=10,minHeight:h=10,maxWidth:m=Number.MAX_VALUE,maxHeight:v=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:g,autoScale:S=!0,shouldResize:w,onResizeStart:N,onResize:k,onResizeEnd:I}){const M=$m(),_=typeof t=="string"?t:M,C=Fe(),W=H.useRef(null),T=o===Sr.Handle,V=Me(H.useCallback(rk(T&&S),[T,S]),Re),K=H.useRef(null),O=r??ok[o];H.useEffect(()=>{if(!(!W.current||!_))return K.current||(K.current=D1({domNode:W.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:Q,transform:A,snapGrid:U,snapToGrid:b,nodeOrigin:B,domNode:R}=C.getState();return{nodeLookup:Q,transform:A,snapGrid:U,snapToGrid:b,nodeOrigin:B,paneDomNode:R}},onChange:(Q,A)=>{const{triggerNodeChanges:U,nodeLookup:b,parentLookup:B,nodeOrigin:R}=C.getState(),L=[],D={x:Q.x,y:Q.y},$=b.get(_);if($&&$.expandParent&&$.parentId){const j=$.origin??R,P=Q.width??$.measured.width??0,z=Q.height??$.measured.height??0,q={id:$.id,parentId:$.parentId,rect:{width:P,height:z,...um({x:Q.x??$.position.x,y:Q.y??$.position.y},{width:P,height:z},$.parentId,b,j)}},ee=Ec([q],b,B,R);L.push(...ee),D.x=Q.x?Math.max(j[0]*P,Q.x):void 0,D.y=Q.y?Math.max(j[1]*z,Q.y):void 0}if(D.x!==void 0&&D.y!==void 0){const j={id:_,type:"position",position:{...D}};L.push(j)}if(Q.width!==void 0&&Q.height!==void 0){const P={id:_,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:Q.width,height:Q.height}};L.push(P)}for(const j of A){const P={...j,type:"position"};L.push(P)}U(L)},onEnd:({width:Q,height:A})=>{const U={id:_,type:"dimensions",resizing:!1,dimensions:{width:Q,height:A}};C.getState().triggerNodeChanges([U])}})),K.current.update({controlPosition:O,boundaries:{minWidth:p,minHeight:h,maxWidth:m,maxHeight:v},keepAspectRatio:x,resizeDirection:g,onResizeStart:N,onResize:k,onResizeEnd:I,shouldResize:w}),()=>{var Q;(Q=K.current)==null||Q.destroy()}},[O,p,h,m,v,x,N,k,I,w]);const Y=O.split("-");return d.jsx("div",{className:Qe(["react-flow__resize-control","nodrag",...Y,o,i]),ref:W,style:{...l,scale:V,...c&&{[T?"backgroundColor":"borderColor"]:c}},children:u})}const hh=H.memo(sk);function ik({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:u,color:c,minWidth:p=10,minHeight:h=10,maxWidth:m=Number.MAX_VALUE,maxHeight:v=Number.MAX_VALUE,keepAspectRatio:x=!1,autoScale:g=!0,shouldResize:S,onResizeStart:w,onResize:N,onResizeEnd:k}){return r?d.jsxs(d.Fragment,{children:[E1.map(I=>d.jsx(hh,{className:l,style:u,nodeId:t,position:I,variant:Sr.Line,color:c,minWidth:p,minHeight:h,maxWidth:m,maxHeight:v,onResizeStart:w,keepAspectRatio:x,autoScale:g,shouldResize:S,onResize:N,onResizeEnd:k},I)),_1.map(I=>d.jsx(hh,{className:o,style:i,nodeId:t,position:I,color:c,minWidth:p,minHeight:h,maxWidth:m,maxHeight:v,onResizeStart:w,keepAspectRatio:x,autoScale:g,shouldResize:S,onResize:N,onResizeEnd:k},I))]}):null}const mh=t=>{let r;const o=new Set,i=(m,v)=>{const x=typeof m=="function"?m(r):m;if(!Object.is(x,r)){const g=r;r=v??(typeof x!="object"||x===null)?x:Object.assign({},r,x),o.forEach(S=>S(r,g))}},l=()=>r,p={setState:i,getState:l,getInitialState:()=>h,subscribe:m=>(o.add(m),()=>o.delete(m))},h=r=t(i,l,p);return p},lk=(t=>t?mh(t):mh),ak=t=>t;function uk(t,r=ak){const o=cs.useSyncExternalStore(t.subscribe,cs.useCallback(()=>r(t.getState()),[t,r]),cs.useCallback(()=>r(t.getInitialState()),[t,r]));return cs.useDebugValue(o),o}const gh=t=>{const r=lk(t),o=i=>uk(r,i);return Object.assign(o,r),o},jc=(t=>t?gh(t):gh);function ck(t,r){let o;try{o=t()}catch{return}return{getItem:l=>{var u;const c=h=>h===null?null:JSON.parse(h,void 0),p=(u=o.getItem(l))!=null?u:null;return p instanceof Promise?p.then(c):c(p)},setItem:(l,u)=>o.setItem(l,JSON.stringify(u,void 0)),removeItem:l=>o.removeItem(l)}}const cc=t=>r=>{try{const o=t(r);return o instanceof Promise?o:{then(i){return cc(i)(o)},catch(i){return this}}}catch(o){return{then(i){return this},catch(i){return cc(i)(o)}}}},dk=(t,r)=>(o,i,l)=>{let u={storage:ck(()=>window.localStorage),partialize:k=>k,version:0,merge:(k,I)=>({...I,...k}),...r},c=!1,p=0;const h=new Set,m=new Set;let v=u.storage;if(!v)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...k)},i,l);const x=()=>{const k=u.partialize({...i()});return v.setItem(u.name,{state:k,version:u.version})},g=l.setState;l.setState=(k,I)=>(g(k,I),x());const S=t((...k)=>(o(...k),x()),i,l);l.getInitialState=()=>S;let w;const N=()=>{var k,I;if(!v)return;const M=++p;c=!1,h.forEach(C=>{var W;return C((W=i())!=null?W:S)});const _=((I=u.onRehydrateStorage)==null?void 0:I.call(u,(k=i())!=null?k:S))||void 0;return cc(v.getItem.bind(v))(u.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==u.version){if(u.migrate){const W=u.migrate(C.state,C.version);return W instanceof Promise?W.then(T=>[!0,T]):[!0,W]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var W;if(M!==p)return;const[T,V]=C;if(w=u.merge(V,(W=i())!=null?W:S),o(w,!0),T)return x()}).then(()=>{M===p&&(_==null||_(w,void 0),w=i(),c=!0,m.forEach(C=>C(w)))}).catch(C=>{M===p&&(_==null||_(void 0,C))})};return l.persist={setOptions:k=>{u={...u,...k},k.storage&&(v=k.storage)},clearStorage:()=>{v==null||v.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>N(),hasHydrated:()=>c,onHydrate:k=>(h.add(k),()=>{h.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},u.skipHydration||N(),w||S},fk=dk,pk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ro=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=pk[o[t]&63];return r};const Zt="__station_input__",gn="__station_output__",hk=100,mk=["energycells"];function gk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return hk}function xk(t,r){return mk.includes(t)?r/100:1}const cg=3600,us={food:75,medical:45,per:200,cycle:600},sl={food:50,medical:30,per:200},yk="foodrations",vk="medicalsupplies";function wk(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),u=Math.max(i-t,0),c=t>0?Math.min(i/t,1):0,p=l*(us.food/us.per),h=u*(sl.food/sl.per),m=l*(us.medical/us.per),v=u*(sl.medical/sl.per),x=cg/us.cycle,g=(p+h)*x,S=(m+v)*x;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:u,workerRatio:c,foodDemand:g,medicalDemand:S}}function Sk(t,r){return 1+t*r}function Nk(t){const r=[];return t.foodDemand>0&&r.push({wareId:yk,amount:t.foodDemand}),t.medicalDemand>0&&r.push({wareId:vk,amount:t.medicalDemand}),r}function kk(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const u=`${o}_default`;if(r[u])return r[u];for(const c of Object.values(r))if(c.wareId===o)return c;return null}function dg(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Ik(t,r,o,i){const l=dg(t.blueprintId,r),u=[],c=[];if(l==="production"){const p=r.modules.production[t.blueprintId];if(p){const h=kk(p,r.recipes);if(h){const m=xk(p.producedWareId,o),v=Sk(h.workforceBonus,i),x=m*v,g=cg/h.time,S=h.amount*t.count*x*g;c.push({wareId:p.producedWareId,amount:S});for(const w of h.inputs){const N=w.amount*t.count*x*g;u.push({wareId:w.ware,amount:N})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:u,grossOutputs:c,netInputs:[...u],netOutputs:[...c]}}function no(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function _k(t,r,o){const i=gk(t,r),l=t.fillHabitats??!1,u=t.moduleConnections??[];let c=0,p=0;for(const j of t.modules){const P=dg(j.blueprintId,o);if(P==="production"){const z=o.modules.production[j.blueprintId];z&&(c+=z.workforceMax*j.count)}else if(P==="habitat"){const z=o.modules.habitat[j.blueprintId];z&&(p+=z.workforceCapacity*j.count)}}const h=wk(c,p,l),m=t.modules.map(j=>Ik(j,o,i,h.workerRatio)),v=new Map;for(const j of m)v.set(j.moduleId,j);const x=new Map;for(const j of m)x.set(j.moduleId,new Map);const g=new Map;for(const j of m)g.set(j.moduleId,new Map);const S=new Map;for(const j of m){const P=new Map;for(const z of j.grossOutputs)P.set(z.wareId,z.amount);S.set(j.moduleId,P)}const w=new Map;for(const j of m){const P=new Map;for(const z of j.grossInputs)P.set(z.wareId,z.amount);w.set(j.moduleId,P)}const N=u.filter(j=>j.sourceModuleId!==Zt&&j.targetModuleId!==gn),k=u.filter(j=>j.sourceModuleId===Zt),I=u.filter(j=>j.targetModuleId===gn),M=[];for(const j of N){const P=j.mode??"auto",z=S.get(j.sourceModuleId),q=(z==null?void 0:z.get(j.wareId))??0,ee=w.get(j.targetModuleId),ne=(ee==null?void 0:ee.get(j.wareId))??0;let oe,ae=!1,re=!1;switch(P){case"custom":oe=Math.min(j.amount,q,ne),ae=j.amount>q,re=j.amount>ne;break;case"max":oe=Math.min(q,ne),ae=q<ne,re=ne<q;break;case"auto":default:oe=Math.min(q,ne),ae=q<ne,re=ne<q;break}M.push({connectionId:j.id,effectiveAmount:oe,sourceConstrained:ae,targetConstrained:re}),z&&z.set(j.wareId,q-oe),ee&&ee.set(j.wareId,ne-oe);const ce=x.get(j.targetModuleId);if(ce){const we=ce.get(j.wareId)||0;ce.set(j.wareId,we+oe)}const ye=g.get(j.sourceModuleId);if(ye){const we=ye.get(j.wareId)||0;ye.set(j.wareId,we+oe)}}for(const j of k){const P=j.mode??"auto",z=w.get(j.targetModuleId),q=(z==null?void 0:z.get(j.wareId))??0;let ee,ne=!1,oe=!1;switch(P){case"custom":ee=Math.min(j.amount,q),oe=j.amount>q;break;case"max":case"auto":default:ee=q;break}M.push({connectionId:j.id,effectiveAmount:ee,sourceConstrained:ne,targetConstrained:oe}),z&&z.set(j.wareId,q-ee)}for(const j of I){const P=j.mode??"auto",z=S.get(j.sourceModuleId),q=(z==null?void 0:z.get(j.wareId))??0;let ee,ne=!1,oe=!1;switch(P){case"custom":ee=Math.min(j.amount,q),ne=j.amount>q;break;case"max":case"auto":default:ee=q;break}M.push({connectionId:j.id,effectiveAmount:ee,sourceConstrained:ne,targetConstrained:oe}),z&&z.set(j.wareId,q-ee)}for(const j of m){const P=x.get(j.moduleId)||new Map,z=g.get(j.moduleId)||new Map;j.netInputs=[];for(const q of j.grossInputs){const ee=P.get(q.wareId)||0,ne=q.amount-ee;ne>.01&&j.netInputs.push({wareId:q.wareId,amount:ne})}j.netOutputs=[];for(const q of j.grossOutputs){const ee=z.get(q.wareId)||0,ne=q.amount-ee;ne>.01&&j.netOutputs.push({wareId:q.wareId,amount:ne})}}const _=[],C=[],W=[],T=[];for(const j of m)_.push(...j.grossInputs),C.push(...j.grossOutputs),W.push(...j.netInputs),T.push(...j.netOutputs);const V=Nk(h);_.push(...V),W.push(...V);const K=no(_),O=no(C),Y=no(W),Q=no(T),A=k.map(j=>{const P=M.find(z=>z.connectionId===j.id);return{wareId:j.wareId,amount:(P==null?void 0:P.effectiveAmount)??j.amount}}),U=I.map(j=>{const P=M.find(z=>z.connectionId===j.id);return{wareId:j.wareId,amount:(P==null?void 0:P.effectiveAmount)??j.amount}}),b=no(A),B=no(U),R=new Map;for(const j of b)R.set(j.wareId,j.amount);const L=new Map;for(const j of B)L.set(j.wareId,j.amount);const D=[];for(const j of Y){const P=R.get(j.wareId)||0,z=j.amount-P;z>.01&&D.push({wareId:j.wareId,amount:z})}const $=[];for(const j of Q){const P=L.get(j.wareId)||0,z=j.amount-P;z>.01&&$.push({wareId:j.wareId,amount:z})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:c,totalWorkforceCapacity:p,actualPopulation:h.actualPopulation,workforceFoodDemand:h.foodDemand,workforceMedicalDemand:h.medicalDemand,modules:m,grossInputs:K,grossOutputs:O,netInputs:Y,netOutputs:Q,availableForImport:D,availableForExport:$,stationInputs:b,stationOutputs:B,externallySupplied:[],externallyConsumed:[],remainingInputs:[...b],remainingOutputs:[...B],moduleConnections:M}}function xh(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Ek(t,r){const o=t.stations.map(g=>_k(g,t.sectors,r)),i=new Map;for(const g of o)i.set(g.stationId,g);const l=new Map,u=new Map,c=new Map,p=new Map;for(const g of t.stations)l.set(g.id,new Map),u.set(g.id,new Map),c.set(g.id,new Map),p.set(g.id,new Map);for(const g of o){const S=c.get(g.stationId),w=p.get(g.stationId);for(const N of g.stationOutputs){const k=g.netOutputs.find(M=>M.wareId===N.wareId),I=Math.min(N.amount,(k==null?void 0:k.amount)??N.amount);S.set(N.wareId,I)}for(const N of g.stationInputs)w.set(N.wareId,N.amount)}const h=[];for(const g of t.connections){const S=g.mode??"auto",w=c.get(g.sourceStationId),N=(w==null?void 0:w.get(g.wareId))??0,k=p.get(g.targetStationId),I=(k==null?void 0:k.get(g.wareId))??0;let M,_=!1,C=!1;switch(S){case"custom":M=Math.min(g.amount,N,I),_=g.amount>N,C=g.amount>I;break;case"max":M=Math.min(N,I),_=N<I,C=I<N;break;case"auto":default:M=Math.min(N,I),_=N<I,C=I<N;break}h.push({connectionId:g.id,effectiveAmount:M,sourceConstrained:_,targetConstrained:C}),w&&w.set(g.wareId,N-M),k&&k.set(g.wareId,I-M);const W=l.get(g.targetStationId);if(W){const V=W.get(g.wareId)||0;W.set(g.wareId,V+M)}const T=u.get(g.sourceStationId);if(T){const V=T.get(g.wareId)||0;T.set(g.wareId,V+M)}}for(const g of o){const S=l.get(g.stationId)||new Map,w=u.get(g.stationId)||new Map;g.externallySupplied=Array.from(S.entries()).map(([k,I])=>({wareId:k,amount:I})).filter(k=>k.amount>.01),g.externallyConsumed=Array.from(w.entries()).map(([k,I])=>({wareId:k,amount:I})).filter(k=>k.amount>.01),g.remainingInputs=[];for(const k of g.stationInputs){const I=S.get(k.wareId)||0,M=k.amount-I;M>.01&&g.remainingInputs.push({wareId:k.wareId,amount:M})}g.remainingOutputs=[];for(const k of g.stationOutputs){const I=w.get(k.wareId)||0,M=k.amount-I;M>.01&&g.remainingOutputs.push({wareId:k.wareId,amount:M})}const N=t.stations.find(k=>k.id===g.stationId);if(N){const k=N.moduleConnections??[];for(const[I,M]of S.entries()){if(M<.01)continue;const _=k.filter(T=>T.sourceModuleId===Zt&&T.wareId===I);if(_.length===0)continue;const C=_.reduce((T,V)=>T+V.amount,0);if(C<.01)continue;const W=Math.min(M/C,1);for(const T of _){const V=g.modules.find(Y=>Y.moduleId===T.targetModuleId);if(!V)continue;const K=T.amount*W,O=V.netInputs.findIndex(Y=>Y.wareId===I);if(O!==-1){const Q=V.netInputs[O].amount-K;Q>.01?V.netInputs[O].amount=Q:V.netInputs.splice(O,1)}}}for(const[I,M]of w.entries()){if(M<.01)continue;const _=k.filter(T=>T.targetModuleId===gn&&T.wareId===I);if(_.length===0)continue;const C=_.reduce((T,V)=>T+V.amount,0);if(C<.01)continue;const W=Math.min(M/C,1);for(const T of _){const V=g.modules.find(Y=>Y.moduleId===T.sourceModuleId);if(!V)continue;const K=T.amount*W,O=V.netOutputs.findIndex(Y=>Y.wareId===I);if(O!==-1){const Q=V.netOutputs[O].amount-K;Q>.01?V.netOutputs[O].amount=Q:V.netOutputs.splice(O,1)}}}}}const m=[];for(const g of o){const S=l.get(g.stationId)||new Map;for(const w of g.netInputs){const N=S.get(w.wareId)||0;N<w.amount&&m.push({wareId:w.wareId,stationId:g.stationId,required:w.amount,supplied:N,deficit:w.amount-N})}}const v=[],x=[];for(const g of o){const S=l.get(g.stationId)||new Map;for(const N of g.netInputs){const k=S.get(N.wareId)||0,I=N.amount-k;I>0&&v.push({wareId:N.wareId,amount:I})}const w=new Map;for(const N of t.connections)if(N.sourceStationId===g.stationId){const k=w.get(N.wareId)||0;w.set(N.wareId,k+N.amount)}for(const N of g.netOutputs){const k=w.get(N.wareId)||0,I=N.amount-k;I>0&&x.push({wareId:N.wareId,amount:I})}}return{stations:o,connections:h,totalInputs:xh(v),totalOutputs:xh(x),deficits:m}}function fg(t,r){return t.connections.find(o=>o.connectionId===r)}function kr(t,r){return t.stations.find(o=>o.stationId===r)}function hl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function hr(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const et=jc((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function yh(t){const r=new Date().toISOString();return{id:ro(),name:t,version:1,createdAt:r,updatedAt:r,sectors:[],stations:[],connections:[]}}function il(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const de=jc()(fk((t,r)=>({plan:yh("New Plan"),computed:il(),createPlan:o=>{t({plan:yh(o),computed:il()})},loadPlan:o=>{const i={...o,stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};t({plan:i,computed:il()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:ro(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(u=>({plan:{...u.plan,sectors:[...u.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:ro(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(u=>({plan:{...u.plan,stations:[...u.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,sectorId:i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const u={id:ro(),blueprintId:i,count:1,position:l};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(p=>p.id===o?{...p,modules:[...p.modules,u]}:p),updatedAt:new Date().toISOString()}})),r().recompute()},updateModule:(o,i,l)=>{const c=r().plan.stations.find(m=>m.id===o),p=c==null?void 0:c.modules.find(m=>m.id===i);if(l.count!==void 0&&p&&l.count!==p.count&&p){const m=l.count/p.count,v=((c==null?void 0:c.moduleConnections)??[]).map(x=>x.sourceModuleId===i&&!x.locked?{...x,amount:x.amount*m}:x.targetModuleId===i&&x.sourceModuleId===Zt&&!x.locked?{...x,amount:x.amount*m}:x);t(x=>({plan:{...x.plan,stations:x.plan.stations.map(g=>g.id===o?{...g,modules:g.modules.map(S=>S.id===i?{...S,...l}:S),moduleConnections:v}:g),updatedAt:new Date().toISOString()}}))}else t(m=>({plan:{...m.plan,stations:m.plan.stations.map(v=>v.id===o?{...v,modules:v.modules.map(x=>x.id===i?{...x,...l}:x)}:v),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,modules:u.modules.filter(c=>c.id!==i),moduleConnections:(u.moduleConnections??[]).filter(c=>c.sourceModuleId!==i&&c.targetModuleId!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:ro(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:ro(),...i};t(u=>({plan:{...u.plan,stations:u.plan.stations.map(c=>c.id===o?{...c,moduleConnections:[...c.moduleConnections??[],l]}:c),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(u=>({plan:{...u.plan,stations:u.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).map(p=>p.id===i?{...p,...l}:p)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,moduleConnections:(u.moduleConnections??[]).filter(c=>c.id!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=et.getState().gameData;if(!i){t({computed:il()});return}const l=Ek(o,i);t({computed:l})}}),{name:"x4-planner-plan",partialize:t=>({plan:t.plan}),onRehydrateStorage:()=>t=>{if(t){const r=t.plan;if(r.stations.some(i=>(i.moduleConnections??[]).some(l=>l.ratio===void 0||l.locked===void 0))){const i={...r,stations:r.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};de.setState({plan:i})}t.recompute()}}})),Ee=jc(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r})}));function Ck(){const t=de(l=>l.plan),r=de(l=>l.renamePlan),o=Ee(l=>l.toggleReport),i=Ee(l=>l.reportOpen);return d.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"X4 SWI Station Planner"}),d.jsx("span",{className:"text-muted-foreground",children:"|"}),d.jsx("input",{type:"text",value:t.name,onChange:l=>r(l.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"}),d.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Export"}),d.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Import"})]})]})}function jk({station:t}){const r=de(M=>M.updateStation),o=de(M=>M.removeStation),i=de(M=>M.plan),l=de(M=>M.computed),u=et(M=>M.gameData),c=t.sectorId?i.sectors.find(M=>M.id===t.sectorId):null,p=t.sunlightOverride??(c==null?void 0:c.sunlight)??100,h=kr(l,t.id),m=M=>{r(t.id,{name:M.target.value})},v=M=>{const _=M.target.value;if(_==="")r(t.id,{sunlightOverride:null});else{const C=parseInt(_,10);!isNaN(C)&&C>=0&&C<=500&&r(t.id,{sunlightOverride:C})}},x=()=>{r(t.id,{sunlightOverride:null})},g=M=>{r(t.id,{fillHabitats:M.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},w=M=>{var _;return((_=u==null?void 0:u.wares[M])==null?void 0:_.name)??M},N=M=>M>=1e4?`${(M/1e3).toFixed(1)}k`:M>=1e3?`${(M/1e3).toFixed(2)}k`:M.toFixed(0),k=h&&h.totalWorkforceRequired>0,I=h&&h.totalWorkforceCapacity>0;return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),d.jsx("input",{type:"text",value:t.name,onChange:m,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:c?c.name:"Not assigned"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:v,placeholder:`${(c==null?void 0:c.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&d.jsx("button",{onClick:x,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",p,"%",t.sunlightOverride===null&&c&&" (from sector)",t.sunlightOverride===null&&!c&&" (default)"]})]}),(k||I)&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),h&&d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Required:"}),d.jsx("span",{children:h.totalWorkforceRequired.toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),d.jsx("span",{children:h.totalWorkforceCapacity.toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{className:"text-muted-foreground",children:"Population:"}),d.jsx("span",{children:h.actualPopulation.toLocaleString()})]})]}),I&&d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[d.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:g,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),d.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?d.jsx("p",{children:"No modules added yet."}):d.jsxs("p",{children:[t.modules.length," module(s)"]})}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),h&&(h.netOutputs.length>0||h.netInputs.length>0)&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),h.netOutputs.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),h.netOutputs.slice(0,5).map(M=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-green-500 truncate",children:w(M.wareId)}),d.jsxs("span",{className:"font-mono",children:["+",N(M.amount)]})]},M.wareId)),h.netOutputs.length>5&&d.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",h.netOutputs.length-5," more..."]})]}),h.netInputs.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),h.netInputs.slice(0,5).map(M=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-blue-400 truncate",children:w(M.wareId)}),d.jsxs("span",{className:"font-mono",children:["-",N(M.amount)]})]},M.wareId)),h.netInputs.length>5&&d.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",h.netInputs.length-5," more..."]})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function Mk({sector:t}){const r=de(h=>h.updateSector),o=de(h=>h.removeSector),l=de(h=>h.plan).stations.filter(h=>h.sectorId===t.id),u=h=>{r(t.id,{name:h.target.value})},c=h=>{const m=parseInt(h.target.value,10);!isNaN(m)&&m>=0&&m<=500&&r(t.id,{sunlight:m})},p=()=>{const h=l.length,m=h>0?`Delete sector "${t.name}"? ${h} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(m)&&o(t.id)};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),d.jsx("input",{type:"text",value:t.name,onChange:u,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:c,className:"flex-1"}),d.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:c,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",l.length,")"]}),l.length===0?d.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):d.jsx("ul",{className:"text-sm space-y-1",children:l.map(h=>d.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[d.jsx("span",{className:"text-foreground",children:h.name}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[h.modules.length," modules"]})]},h.id))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:p,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const vh={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function bk(){const t=et(g=>g.gameData),r=de(g=>g.addModule),o=Ee(g=>g.activeStationId),i=de(g=>g.plan.stations),[l,u]=H.useState("production"),[c,p]=H.useState(""),h=H.useMemo(()=>i.find(g=>g.id===o),[i,o]),m=H.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const g=c.toLowerCase(),S=w=>Object.values(w).filter(N=>N.name.toLowerCase().includes(g));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,c]),v=g=>{if(!o||!h)return;const S=h.modules.length,w=S%3,N=Math.floor(S/3),k={x:w*220+50,y:N*150+50};r(o,g,k)},x=g=>{u(S=>S===g?null:g)};return t?d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{children:d.jsx("input",{type:"text",placeholder:"Search modules...",value:c,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(vh).map(g=>{const{label:S,icon:w}=vh[g],N=m[g],k=l===g;return d.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[d.jsxs("button",{onClick:()=>x(g),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[d.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[d.jsx("span",{children:w}),S,d.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.length,")"]})]}),d.jsx("span",{className:"text-muted-foreground",children:k?"":"+"})]}),k&&d.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.length===0?d.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):N.map(I=>d.jsxs("button",{onClick:()=>v(I.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[d.jsx("span",{className:"text-foreground truncate",children:I.name}),d.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},I.id))})]},g)}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):d.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function Pk({stationId:t,module:r}){const o=et(N=>N.gameData),i=et(N=>N.getModule),l=et(N=>N.getModuleType),u=de(N=>N.updateModule),c=de(N=>N.removeModule),p=Ee(N=>N.clearSelection),h=i(r.blueprintId),m=l(r.blueprintId),v=H.useMemo(()=>{if(!o||!m)return[];const N=o.modules[m];return Object.values(N).sort((k,I)=>k.name.localeCompare(I.name))},[o,m]),x=N=>{u(t,r.id,{blueprintId:N.target.value})},g=N=>{const k=Math.max(1,r.count+N);u(t,r.id,{count:k})},S=N=>{const k=parseInt(N.target.value,10);!isNaN(k)&&k>=1&&u(t,r.id,{count:k})},w=()=>{confirm(`Delete this ${(h==null?void 0:h.name)??"module"}?`)&&(c(t,r.id),p())};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-lg",children:m==="production"?"":m==="habitat"?"":""}),d.jsxs("span",{className:"text-muted-foreground capitalize",children:[m," Module"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),d.jsx("select",{value:r.blueprintId,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:v.map(N=>d.jsx("option",{value:N.id,children:N.name},N.id))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>g(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),d.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("button",{onClick:()=>g(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),h&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),d.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[m==="production"&&"producedWareId"in h&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Produces: ",h.producedWareId]}),d.jsxs("p",{children:["Workforce: ",h.workforceMax*r.count]})]}),m==="habitat"&&"workforceCapacity"in h&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Race: ",h.race]}),d.jsxs("p",{children:["Capacity: ",h.workforceCapacity*r.count," workers"]})]}),m==="storage"&&"cargoMax"in h&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Type: ",h.cargoType]}),d.jsxs("p",{children:["Capacity: ",h.cargoMax*r.count]})]})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:w,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function Dk({connection:t}){var O;const r=de(Y=>Y.updateConnection),o=de(Y=>Y.removeConnection),i=de(Y=>Y.plan),l=de(Y=>Y.computed),u=et(Y=>Y.gameData),c=i.stations.find(Y=>Y.id===t.sourceStationId),p=i.stations.find(Y=>Y.id===t.targetStationId),h=H.useMemo(()=>kr(l,t.sourceStationId),[l,t.sourceStationId]),m=H.useMemo(()=>kr(l,t.targetStationId),[l,t.targetStationId]),v=t.wareId?((O=u==null?void 0:u.wares[t.wareId])==null?void 0:O.name)??t.wareId:"Unknown",x=h==null?void 0:h.netOutputs.find(Y=>Y.wareId===t.wareId),g=(x==null?void 0:x.amount)??0,S=m==null?void 0:m.netInputs.find(Y=>Y.wareId===t.wareId),w=(S==null?void 0:S.amount)??0,N=H.useMemo(()=>fg(l,t.id),[l,t.id]),k=(N==null?void 0:N.effectiveAmount)??t.amount,I=t.mode??"auto",M=Y=>Y>=1e4?`${(Y/1e3).toFixed(1)}k`:Y>=1e3?`${(Y/1e3).toFixed(2)}k`:Y.toFixed(0),_=Y=>{r(t.id,{mode:Y,amount:Y==="custom"?k:t.amount})},C=Y=>{const Q=Y.target.value;if(Q==="")r(t.id,{amount:0});else{const A=parseFloat(Q);!isNaN(A)&&A>=0&&r(t.id,{amount:A})}},W=()=>{r(t.id,{mode:"custom",amount:g})},T=()=>{const Y=Math.min(g,w);r(t.id,{mode:"custom",amount:Y})},V=()=>{confirm("Delete this connection?")&&o(t.id)},K=l.deficits.find(Y=>Y.stationId===t.targetStationId&&Y.wareId===t.wareId);return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"From:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:(c==null?void 0:c.name)??"Unknown"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"To:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:(p==null?void 0:p.name)??"Unknown"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:v}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),d.jsxs("select",{value:I,onChange:Y=>_(Y.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[d.jsx("option",{value:"auto",children:"Auto (match availability)"}),d.jsx("option",{value:"max",children:"Max (take all available)"}),d.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[I==="auto"&&"Transfers min(source available, target need)",I==="max"&&"Takes all available from source up to target need",I==="custom"&&"Uses a fixed amount you specify"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:[I==="custom"?"Custom Amount":"Effective Amount"," ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),I==="custom"?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:C,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:M(k)}),I==="custom"&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",M(g),")"]}),w>0&&d.jsxs("button",{onClick:T,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",M(Math.min(g,w)),")"]})]}),d.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Source available:"}),d.jsxs("span",{className:"font-mono text-green-400",children:[M(g),"/hr"]})]}),w>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Target needs:"}),d.jsxs("span",{className:"font-mono text-blue-400",children:[M(w),"/hr"]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Transferring:"}),d.jsxs("span",{className:`font-mono ${N!=null&&N.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[M(k),"/hr"]})]}),I==="custom"&&t.amount!==k&&d.jsxs("div",{className:"flex justify-between text-yellow-400",children:[d.jsx("span",{children:"Configured:"}),d.jsxs("span",{className:"font-mono",children:[M(t.amount),"/hr"]})]}),(N==null?void 0:N.sourceConstrained)&&d.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(N==null?void 0:N.targetConstrained)&&d.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),K&&K.deficit>0&&d.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[d.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",M(K.deficit),"/hr still needed"]}),d.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",M(K.supplied),"/hr but needs"," ",M(K.required),"/hr"]})]}),t.wareId&&!K&&d.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:d.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:V,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Tk({stationId:t,connection:r}){var L;const o=de(D=>D.updateModuleConnection),i=de(D=>D.removeModuleConnection),l=de(D=>D.plan.stations),u=de(D=>D.computed),c=et(D=>D.gameData),p=Ee(D=>D.clearSelection),h=l.find(D=>D.id===t),m=h==null?void 0:h.modules.find(D=>D.id===r.sourceModuleId),v=h==null?void 0:h.modules.find(D=>D.id===r.targetModuleId),x=r.sourceModuleId===Zt,g=r.targetModuleId===gn,S=D=>{var $,j,P;return!D||!c?"Unknown":(($=c.modules.production[D])==null?void 0:$.name)??((j=c.modules.habitat[D])==null?void 0:j.name)??((P=c.modules.storage[D])==null?void 0:P.name)??D},w=x?"Station Input":S(m==null?void 0:m.blueprintId),N=g?"Station Output":S(v==null?void 0:v.blueprintId),k=H.useMemo(()=>x?null:hr(u,t,r.sourceModuleId),[u,t,r.sourceModuleId,x]),I=H.useMemo(()=>g?null:hr(u,t,r.targetModuleId),[u,t,r.targetModuleId,g]),M=H.useMemo(()=>{const D=kr(u,t);return D==null?void 0:D.moduleConnections.find($=>$.connectionId===r.id)},[u,t,r.id]),_=(M==null?void 0:M.effectiveAmount)??r.amount,C=r.mode??"auto",W=((L=c==null?void 0:c.wares[r.wareId])==null?void 0:L.name)??r.wareId,T=k==null?void 0:k.grossOutputs.find(D=>D.wareId===r.wareId),V=(T==null?void 0:T.amount)??0,K=I==null?void 0:I.grossInputs.find(D=>D.wareId===r.wareId),O=(K==null?void 0:K.amount)??0,Y=D=>D>=1e4?`${(D/1e3).toFixed(1)}k`:D>=1e3?`${(D/1e3).toFixed(2)}k`:D.toFixed(0),Q=D=>{o(t,r.id,{mode:D,amount:D==="custom"?_:r.amount})},A=D=>{const $=D.target.value;if($==="")o(t,r.id,{amount:0});else{const j=parseFloat($);if(!isNaN(j)&&j>=0){const P=!x&&V>0?j/V:r.ratio;o(t,r.id,{amount:j,ratio:P})}}},U=()=>{o(t,r.id,{locked:!r.locked})},b=()=>{o(t,r.id,{mode:"custom",amount:V,ratio:1})},B=()=>{const D=Math.min(V,O),$=V>0?D/V:0;o(t,r.id,{mode:"custom",amount:D,ratio:$})},R=()=>{confirm("Delete this connection?")&&(i(t,r.id),p())};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"From:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:w})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"To:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:N})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:W})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),d.jsxs("select",{value:C,onChange:D=>Q(D.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[d.jsx("option",{value:"auto",children:"Auto (match availability)"}),d.jsx("option",{value:"max",children:"Max (take all available)"}),d.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[C==="auto"&&"Transfers min(source available, target need)",C==="max"&&"Takes all available from source up to target need",C==="custom"&&"Uses a fixed amount you specify"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:[C==="custom"?"Custom Amount":"Effective Amount"," ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),C==="custom"?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:A,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:Y(_)}),C==="custom"&&!x&&V>0&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:b,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",Y(V),")"]}),!g&&O>0&&d.jsxs("button",{onClick:B,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",Y(Math.min(V,O)),")"]})]}),d.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!x&&V>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Source produces:"}),d.jsxs("span",{className:"font-mono text-green-400",children:[Y(V),"/hr"]})]}),!g&&O>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Target needs:"}),d.jsxs("span",{className:"font-mono text-blue-400",children:[Y(O),"/hr"]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Transferring:"}),d.jsxs("span",{className:`font-mono ${M!=null&&M.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[Y(_),"/hr"]})]}),C==="custom"&&r.amount!==_&&d.jsxs("div",{className:"flex justify-between text-yellow-400",children:[d.jsx("span",{children:"Configured:"}),d.jsxs("span",{className:"font-mono",children:[Y(r.amount),"/hr"]})]}),(M==null?void 0:M.sourceConstrained)&&d.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(M==null?void 0:M.targetConstrained)&&d.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!x&&r.ratio!==void 0&&C==="custom"&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Ratio:"}),d.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),d.jsx("button",{onClick:U,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:d.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:R,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Ok(){const t=Ee(w=>w.sidebarOpen),r=Ee(w=>w.selectedNodeId),o=Ee(w=>w.selectedEdgeId),i=Ee(w=>w.viewMode),l=Ee(w=>w.activeStationId),u=de(w=>w.plan);if(!t)return null;const c=i==="network"?u.stations.find(w=>w.id===r):null,p=i==="network"?u.sectors.find(w=>w.id===r):null,h=u.connections.find(w=>w.id===o),m=u.stations.find(w=>w.id===l),v=i==="station"&&m?m.modules.find(w=>w.id===r):null,x=i==="station"&&m&&o?(m.moduleConnections??[]).find(w=>w.id===o):null;let g="Network";i==="station"?x?g="Connection":v?g="Module":g="Add Modules":c?g="Station":p?g="Sector":h&&(g="Connection");const S=()=>i==="station"?x&&l?d.jsx(Tk,{stationId:l,connection:x}):v&&l?d.jsx(Pk,{stationId:l,module:v}):d.jsx(bk,{}):c?d.jsx(jk,{station:c}):p?d.jsx(Mk,{sector:p}):h?d.jsx(Dk,{connection:h}):d.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[d.jsx("p",{children:"Select a station or sector to view details."}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),d.jsxs("ul",{className:"text-xs space-y-1",children:[d.jsx("li",{children:"Right-click on the canvas to add stations"}),d.jsx("li",{children:"Drag from one station handle to another to connect"}),d.jsx("li",{children:"Press Delete to remove selected items"}),d.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return d.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsx("h2",{className:"font-semibold text-foreground",children:g})}),d.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:S()}),d.jsx("div",{className:"p-4 border-t border-border",children:d.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:i==="station"&&m?d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Modules: ",m.modules.length]}),d.jsxs("p",{children:["Station: ",m.name]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Stations: ",u.stations.length]}),d.jsxs("p",{children:["Sectors: ",u.sectors.length]}),d.jsxs("p",{children:["Connections: ",u.connections.length]})]})})})]})}function Ak(){const t=Ee(c=>c.viewMode),r=Ee(c=>c.activeStationId),o=Ee(c=>c.exitStationView),i=de(c=>c.plan),l=i.stations.find(c=>c.id===r),u=l!=null&&l.sectorId?i.sectors.find(c=>c.id===l.sectorId):null;return t==="network"?null:d.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[d.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),u&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-muted-foreground",children:u.name})]}),l&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function zk(){const t=de(m=>m.computed),r=et(m=>m.gameData),o=m=>{var v;return((v=r==null?void 0:r.wares[m])==null?void 0:v.name)??m},i=m=>Math.abs(m)>=1e4?`${(m/1e3).toFixed(1)}k`:Math.abs(m)>=1e3?`${(m/1e3).toFixed(2)}k`:m.toFixed(0),l=H.useMemo(()=>{const m=new Map;for(const x of t.totalOutputs)m.set(x.wareId,(m.get(x.wareId)??0)+x.amount);for(const x of t.totalInputs)m.set(x.wareId,(m.get(x.wareId)??0)-x.amount);const v=[];for(const[x,g]of m)Math.abs(g)>.01&&v.push({wareId:x,amount:g});return v.sort((x,g)=>g.amount-x.amount)},[t.totalOutputs,t.totalInputs]),u=l.filter(m=>m.amount>0),c=l.filter(m=>m.amount<0),p=H.useMemo(()=>[...t.totalOutputs].sort((m,v)=>v.amount-m.amount),[t.totalOutputs]),h=H.useMemo(()=>[...t.totalInputs].sort((m,v)=>v.amount-m.amount),[t.totalInputs]);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{children:[d.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),u.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),d.jsx("div",{className:"space-y-1",children:u.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-green-400",children:o(m.wareId)}),d.jsxs("span",{className:"font-mono text-green-400",children:["+",i(m.amount),"/hr"]})]},m.wareId))})]}),c.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),d.jsx("div",{className:"space-y-1",children:c.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-red-400",children:o(m.wareId)}),d.jsxs("span",{className:"font-mono text-red-400",children:[i(m.amount),"/hr"]})]},m.wareId))})]}),u.length===0&&c.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",d.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",p.length," wares)"]})]}),p.length>0?d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:p.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-foreground",children:o(m.wareId)}),d.jsxs("span",{className:"font-mono text-green-400",children:["+",i(m.amount),"/hr"]})]},m.wareId))}):d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",d.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",h.length," wares)"]})]}),h.length>0?d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-foreground",children:o(m.wareId)}),d.jsxs("span",{className:"font-mono text-blue-400",children:["-",i(m.amount),"/hr"]})]},m.wareId))}):d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((m,v)=>d.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-red-400",children:o(m.wareId)}),d.jsxs("span",{className:"font-mono text-red-400",children:["-",i(m.deficit),"/hr"]})]}),d.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",i(m.required),", getting ",i(m.supplied)]})]},`${m.stationId}-${m.wareId}-${v}`))})]})]})}function $k(){const t=de(h=>h.plan.stations),r=de(h=>h.plan.sectors),o=de(h=>h.computed),i=et(h=>h.gameData),l=h=>{var m;return((m=i==null?void 0:i.wares[h])==null?void 0:m.name)??h},u=h=>Math.abs(h)>=1e4?`${(h/1e3).toFixed(1)}k`:Math.abs(h)>=1e3?`${(h/1e3).toFixed(2)}k`:h.toFixed(0),c=h=>{var m;return h?((m=r.find(v=>v.id===h))==null?void 0:m.name)??null:null},p=H.useMemo(()=>[...t].sort((h,m)=>{const v=hl(o,h.id),x=hl(o,m.id);return v!==x?x-v:h.name.localeCompare(m.name)}),[t,o]);return t.length===0?d.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):d.jsx("div",{className:"space-y-4",children:p.map(h=>{const m=kr(o,h.id),v=hl(o,h.id),x=c(h.sectorId),g=o.deficits.filter(w=>w.stationId===h.id),S=m&&m.totalWorkforceRequired>0?Math.min(m.actualPopulation/m.totalWorkforceRequired,1):0;return d.jsxs("div",{className:`p-3 rounded-lg border ${v>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h4",{className:"font-medium text-foreground",children:h.name}),v>0&&d.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[v," deficit",v>1?"s":""]})]}),x&&d.jsx("span",{className:"text-xs text-muted-foreground",children:x})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),d.jsxs("span",{className:"text-yellow-500",children:[" ",(m==null?void 0:m.effectiveSunlight)??100,"%"]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Modules"}),d.jsx("span",{className:"text-foreground",children:h.modules.length})]}),m&&m.totalWorkforceRequired>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),d.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[m.actualPopulation,"/",m.totalWorkforceRequired]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),d.jsx("span",{className:"text-foreground",children:m.totalWorkforceCapacity})]})]})]}),m&&d.jsxs("div",{className:"space-y-2",children:[m.netOutputs.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),d.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:m.netOutputs.map(w=>d.jsxs("div",{className:"text-xs flex items-center gap-1",children:[d.jsx("span",{className:"text-green-400",children:l(w.wareId)}),d.jsxs("span",{className:"font-mono text-green-400/70",children:["+",u(w.amount)]})]},w.wareId))})]}),m.netInputs.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),d.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:m.netInputs.map(w=>{const N=g.some(k=>k.wareId===w.wareId);return d.jsxs("div",{className:"text-xs flex items-center gap-1",children:[d.jsx("span",{className:N?"text-red-400":"text-blue-400",children:l(w.wareId)}),d.jsxs("span",{className:`font-mono ${N?"text-red-400/70":"text-blue-400/70"}`,children:["-",u(w.amount)]})]},w.wareId)})})]}),g.length>0&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[d.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),d.jsx("div",{className:"space-y-1",children:g.map(w=>d.jsxs("div",{className:"text-xs flex items-center justify-between",children:[d.jsx("span",{className:"text-red-400",children:l(w.wareId)}),d.jsxs("span",{className:"text-muted-foreground",children:[u(w.supplied),"/",u(w.required),d.jsxs("span",{className:"text-red-400 ml-1",children:["(-",u(w.deficit),")"]})]})]},w.wareId))})]})]}),h.modules.length===0&&d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},h.id)})})}function Lk(){const t=Ee(l=>l.reportOpen),r=Ee(l=>l.setReportOpen),[o,i]=H.useState("network");return t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),d.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[d.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),d.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),d.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),d.jsxs("div",{className:"flex border-b border-border",children:[d.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),d.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?d.jsx(zk,{}):d.jsx($k,{})}),d.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function Ae(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Mc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const Rk={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},Fk={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},Hk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},Vk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function Rl({wareId:t,type:r,amount:o,status:i,preset:l,handleId:u,isDeficit:c=!1,drag:p,handleTooltip:h,amountTooltip:m}){const v=et(C=>C.gameData),x=r==="input",g=x?l.inputColors:l.outputColors,w=(C=>{var W;return((W=v==null?void 0:v.wares[C])==null?void 0:W.name)??C})(t),N=()=>{const C=x?"handle-left":"handle-right",W="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${C} ${W} ${l.handle.colorClass}`;const T=i==="satisfied"?x?"handle-input-satisfied":"handle-output-satisfied":x?"handle-input":"handle-output";return`${l.handle.baseClass} ${C} ${W} ${T}`},k=()=>i==="satisfied"?g.satisfied:c&&g.deficit?g.deficit:g.default,I=()=>{const C=o.fulfilled??0,W=C>.01;if(x)if(i==="satisfied"){const T=C>.01?C:o.primary;return d.jsxs("span",{className:"text-green-600 font-bold",title:m,children:["",Ae(T)]})}else if(W){const T=i==="partial"?o.primary-C:o.primary;return d.jsxs("span",{className:"text-red-400 font-bold",title:m,children:["-",Ae(T)]})}else return d.jsxs("span",{className:"text-red-600/60",title:m,children:["",Ae(o.primary)]});else return W?d.jsx("span",{className:"text-gray-400",title:m,children:Ae(o.primary)}):d.jsx("span",{className:"text-gray-500/60",title:m,children:Ae(o.primary)})},M=()=>!l.hasDrag||!p?null:d.jsx("div",{draggable:!0,onDragStart:p.onDragStart,onDragEnd:p.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:d.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),_=()=>d.jsx(Nr,{type:x?"target":"source",position:x?xe.Left:xe.Right,id:u,className:N(),title:h??w});return d.jsxs("div",{onDragOver:p==null?void 0:p.onDragOver,onDragLeave:p==null?void 0:p.onDragLeave,onDrop:p==null?void 0:p.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${p!=null&&p.isDragging?"opacity-50":""}
        ${p!=null&&p.isDragOver?"bg-primary/20 rounded":""}
      `,children:[x&&l.handle.inline&&_(),!x&&l.hasDrag&&M(),x&&!l.handle.inline&&_(),d.jsxs("div",{className:`flex-1 flex items-center justify-between ${x?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[x&&d.jsx("span",{className:"font-mono ml-1",children:I()}),d.jsx("span",{className:`truncate ${l.nameMaxWidth} ${k()}`,children:w}),!x&&d.jsx("span",{className:"font-mono mr-2",children:I()})]}),x&&l.hasDrag&&M(),!x&&l.handle.inline&&_(),!x&&!l.handle.inline&&_()]})}const Bk=H.memo(function({data:r,selected:o}){const{station:i}=r,l=de(L=>L.plan.sectors),u=de(L=>L.computed),c=de(L=>L.updateStation),p=Ee(L=>L.drillIntoStation),[h,m]=H.useState(null),[v,x]=H.useState(null),g=i.sectorId?l.find(L=>L.id===i.sectorId):null,S=H.useMemo(()=>kr(u,i.id),[u,i.id]),w=H.useMemo(()=>hl(u,i.id),[u,i.id]),N=(S==null?void 0:S.effectiveSunlight)??i.sunlightOverride??(g==null?void 0:g.sunlight)??100,k=H.useCallback(()=>{p(i.id)},[p,i.id]),I=S&&S.totalWorkforceRequired>0?Math.min(S.actualPopulation/S.totalWorkforceRequired,1):0,M=S&&S.totalWorkforceRequired>0,_=H.useMemo(()=>u.deficits.filter(L=>L.stationId===i.id),[u.deficits,i.id]),C=L=>_.some(D=>D.wareId===L),W=H.useCallback((L,D)=>{if(!D||D.length===0)return L;const $=new Map(L.map(z=>[z.wareId,z])),j=[],P=new Set;for(const z of D){const q=$.get(z);q&&(j.push(q),P.add(z))}for(const z of L)P.has(z.wareId)||j.push(z);return j},[]),T=H.useMemo(()=>W((S==null?void 0:S.stationOutputs)??[],i.outputOrder),[S==null?void 0:S.stationOutputs,i.outputOrder,W]),V=H.useMemo(()=>W((S==null?void 0:S.stationInputs)??[],i.inputOrder),[S==null?void 0:S.stationInputs,i.inputOrder,W]),K=H.useMemo(()=>{const L=new Map;for(const D of(S==null?void 0:S.externallySupplied)??[])L.set(D.wareId,D.amount);return L},[S==null?void 0:S.externallySupplied]),O=H.useMemo(()=>{const L=new Map;for(const D of(S==null?void 0:S.externallyConsumed)??[])L.set(D.wareId,D.amount);return L},[S==null?void 0:S.externallyConsumed]),Y=H.useCallback((L,D,$)=>{L.stopPropagation(),m(`${$}-${D}`),L.dataTransfer.effectAllowed="move",L.dataTransfer.setData("text/plain",`${$}-${D}`)},[]),Q=H.useCallback((L,D,$)=>{L.preventDefault(),L.stopPropagation();const j=`${$}-${D}`;h&&h!==j&&h.startsWith($)&&(x(j),L.dataTransfer.dropEffect="move")},[h]),A=H.useCallback(()=>{x(null)},[]),U=H.useCallback((L,D,$)=>{if(L.preventDefault(),L.stopPropagation(),!h||!h.startsWith($)){m(null),x(null);return}const j=h.replace(`${$}-`,"");if(j===D){m(null),x(null);return}const z=($==="output"?T:V).map(oe=>oe.wareId),q=z.indexOf(j),ee=z.indexOf(D);if(q===-1||ee===-1){m(null),x(null);return}const ne=[...z];ne.splice(q,1),ne.splice(ee,0,j),$==="output"?c(i.id,{outputOrder:ne}):c(i.id,{inputOrder:ne}),m(null),x(null)},[h,T,V,c,i.id]),b=H.useCallback(()=>{m(null),x(null)},[]),B=H.useCallback((L,D)=>{const $=`${D}-${L}`;return{isDragging:h===$,isDragOver:v===$,onDragStart:j=>Y(j,L,D),onDragEnd:b,onDragOver:j=>Q(j,L,D),onDragLeave:A,onDrop:j=>U(j,L,D)}},[h,v,Y,b,Q,A,U]),R=(L,D)=>{const $=D==="input",j=`${D}-${L.wareId}`,P=$&&C(L.wareId),z=$?K.get(L.wareId)??0:0,q=$?0:O.get(L.wareId)??0,ee=$?z:q,ne=L.amount-ee,oe=Mc(ne,ee),ae=$?"Need":"Export",re=$?"Supplied":"Consumed";let ce;return oe==="satisfied"?ce=`${ae}: ${Ae(L.amount)}, ${re}: ${Ae(ee)}`:oe==="partial"?ce=`${ae}: ${Ae(L.amount)}, ${re}: ${Ae(ee)}, Remaining: ${Ae(ne)}`:ce=`${ae}: ${Ae(L.amount)}, No external ${$?"supply":"consumers"}`,d.jsx(Rl,{wareId:L.wareId,type:D,handleId:j,amount:{primary:L.amount,secondary:ee>.01?ee:void 0,fulfilled:ee},status:oe,preset:Fk,isDeficit:P,drag:B(L.wareId,D),amountTooltip:ce},L.wareId)};return d.jsxs("div",{className:`
        min-w-[200px] max-w-[200px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${w>0?"border-red-500/50":""}
      `,onDoubleClick:k,children:[w>0&&d.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:w}),d.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("h3",{className:"font-medium text-sm text-foreground truncate flex-1",children:i.name}),g&&d.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:g.name})]})}),d.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),d.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[d.jsx("span",{className:"text-yellow-500",children:""}),N,"%",i.sunlightOverride===null&&g&&d.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),M&&d.jsxs("div",{className:"space-y-0.5",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Population"}),d.jsxs("span",{className:"text-foreground text-[10px]",children:[S.actualPopulation,"/",S.totalWorkforceRequired]})]}),d.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all ${I>=1?"bg-green-500":I>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${I*100}%`}})})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Modules"}),d.jsx("span",{className:"text-foreground",children:i.modules.length})]}),S&&(S.stationInputs.length>0||S.stationOutputs.length>0)&&d.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[T.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0 pr-2",children:T.map(L=>R(L,"output"))})]}),V.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0 pl-2",children:V.map(L=>R(L,"input"))})]})]}),i.modules.length===0&&d.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),Wk=160,Uk=100,Yk=H.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,u=de(g=>g.updateSector),c=de(g=>g.plan.stations),p=de(g=>g.moveStationToSector),[h,m]=H.useState(!1),v=H.useCallback((g,S)=>{u(r,{position:{x:S.x,y:S.y},size:{width:S.width,height:S.height}})},[r,u]),x=H.useCallback((g,S)=>{const w={left:S.x,right:S.x+S.width,top:S.y,bottom:S.y+S.height};c.forEach(N=>{const k=N.position.x+Wk/2,I=N.position.y+Uk/2,M=k>=w.left&&k<=w.right&&I>=w.top&&I<=w.bottom;M&&N.sectorId!==r?p(N.id,r):!M&&N.sectorId===r&&p(N.id,null)})},[r,c,p]);return d.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[d.jsx(ik,{minWidth:200,minHeight:150,isVisible:i||h,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:v,onResizeEnd:x}),d.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[d.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),d.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:d.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),Xk={production:"",habitat:"",storage:""},wh={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},Qk=H.memo(function({data:r,selected:o}){const{module:i}=r,l=Ee(j=>j.activeStationId),u=de(j=>j.computed),c=de(j=>j.updateModule),p=et(j=>j.getModule),h=et(j=>j.getModuleType),m=et(j=>j.gameData),[v,x]=H.useState(null),[g,S]=H.useState(null),[w,N]=H.useState(!1),k=p(i.blueprintId),I=h(i.blueprintId)??"production",M=wh[I]??wh.production,_=Xk[I]??"",C=H.useMemo(()=>{if(l)return hr(u,l,i.id)},[u,l,i.id]),W=H.useCallback(j=>{var P;return((P=m==null?void 0:m.wares[j])==null?void 0:P.name)??j},[m]),T=H.useCallback((j,P)=>{if(!P||P.length===0)return j;const z=new Map(j.map(ne=>[ne.wareId,ne])),q=[],ee=new Set;for(const ne of P){const oe=z.get(ne);oe&&(q.push(oe),ee.add(ne))}for(const ne of j)ee.has(ne.wareId)||q.push(ne);return q},[]),V=H.useMemo(()=>T((C==null?void 0:C.netOutputs)??[],i.outputOrder),[C==null?void 0:C.netOutputs,i.outputOrder,T]),K=H.useMemo(()=>T((C==null?void 0:C.netInputs)??[],i.inputOrder),[C==null?void 0:C.netInputs,i.inputOrder,T]),O=H.useMemo(()=>T((C==null?void 0:C.grossOutputs)??[],i.outputOrder),[C==null?void 0:C.grossOutputs,i.outputOrder,T]),Y=H.useMemo(()=>T((C==null?void 0:C.grossInputs)??[],i.inputOrder),[C==null?void 0:C.grossInputs,i.inputOrder,T]),Q=H.useMemo(()=>{if(!C)return!1;const j=C.grossOutputs.reduce((ee,ne)=>ee+ne.amount,0),P=C.netOutputs.reduce((ee,ne)=>ee+ne.amount,0),z=C.grossInputs.reduce((ee,ne)=>ee+ne.amount,0),q=C.netInputs.reduce((ee,ne)=>ee+ne.amount,0);return Math.abs(j-P)>.01||Math.abs(z-q)>.01},[C]),A=H.useCallback((j,P,z)=>{j.stopPropagation(),x(`${z}-${P}`),j.dataTransfer.effectAllowed="move",j.dataTransfer.setData("text/plain",`${z}-${P}`)},[]),U=H.useCallback((j,P,z)=>{j.preventDefault(),j.stopPropagation();const q=`${z}-${P}`;v&&v!==q&&v.startsWith(z)&&(S(q),j.dataTransfer.dropEffect="move")},[v]),b=H.useCallback(()=>{S(null)},[]),B=H.useCallback((j,P,z)=>{if(j.preventDefault(),j.stopPropagation(),!v||!v.startsWith(z)||!l){x(null),S(null);return}const q=v.replace(`${z}-`,"");if(q===P){x(null),S(null);return}const ne=(z==="output"?O:Y).map(ce=>ce.wareId),oe=ne.indexOf(q),ae=ne.indexOf(P);if(oe===-1||ae===-1){x(null),S(null);return}const re=[...ne];re.splice(oe,1),re.splice(ae,0,q),z==="output"?c(l,i.id,{outputOrder:re}):c(l,i.id,{inputOrder:re}),x(null),S(null)},[v,O,Y,c,l,i.id]),R=H.useCallback(()=>{x(null),S(null)},[]),L=H.useCallback((j,P)=>{var q;return C?((q=(P==="output"?C.netOutputs:C.netInputs).find(ee=>ee.wareId===j))==null?void 0:q.amount)??0:0},[C]),D=H.useCallback((j,P)=>{const z=`${P}-${j}`;return{isDragging:v===z,isDragOver:g===z,onDragStart:q=>A(q,j,P),onDragEnd:R,onDragOver:q=>U(q,j,P),onDragLeave:b,onDrop:q=>B(q,j,P)}},[v,g,A,R,U,b,B]),$=(j,P)=>{const z=`${P}-${j.wareId}`,q=L(j.wareId,P),ee=q<.01;return d.jsx(Rl,{wareId:j.wareId,type:P,handleId:z,amount:{primary:q,fulfilled:j.amount-q},status:ee?"satisfied":"unsatisfied",preset:Rk,drag:D(j.wareId,P),amountTooltip:`Full: ${Ae(j.amount)}/hr`},j.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":M.border}
      `,children:[d.jsx("div",{className:`px-3 py-2 border-b border-border ${M.bg} rounded-t-lg`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:_}),d.jsx("h3",{className:"font-medium text-sm text-foreground truncate flex-1",children:(k==null?void 0:k.name)??i.blueprintId})]})}),d.jsxs("div",{className:"px-3 py-2 space-y-1",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Count"}),d.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),I==="habitat"&&k&&"workforceCapacity"in k&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),d.jsx("span",{className:"text-foreground",children:k.workforceCapacity*i.count})]}),I==="storage"&&k&&"cargoMax"in k&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),d.jsx("span",{className:"text-foreground",children:k.cargoMax*i.count})]}),I==="production"&&C&&d.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[O.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0",children:O.map(j=>$(j,"output"))})]}),Y.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0",children:Y.map(j=>$(j,"input"))})]}),V.length===0&&K.length===0&&Q&&d.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(O.length>0||Y.length>0)&&d.jsxs("div",{className:"pt-1 border-t border-border/30",children:[d.jsxs("button",{onClick:j=>{j.stopPropagation(),N(!w)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[d.jsx("span",{children:w?"":""}),d.jsx("span",{children:"Full Production"})]}),w&&d.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[O.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),O.map(j=>d.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[d.jsx("span",{className:"truncate max-w-[70px]",children:W(j.wareId)}),d.jsxs("span",{className:"font-mono",children:["+",Ae(j.amount)]})]},j.wareId))]}),Y.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),Y.map(j=>d.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[d.jsx("span",{className:"truncate max-w-[70px]",children:W(j.wareId)}),d.jsxs("span",{className:"font-mono",children:["-",Ae(j.amount)]})]},j.wareId))]})]})]})]}),I==="production"&&!C&&d.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),Gk="generic-import",Kk=H.memo(function({selected:r}){const o=Ee(O=>O.activeStationId),i=de(O=>O.computed),l=et(O=>O.gameData),u=de(O=>O.plan.stations),c=de(O=>O.updateStation),[p,h]=H.useState(null),[m,v]=H.useState(null),x=H.useMemo(()=>{if(o)return u.find(O=>O.id===o)},[u,o]),g=H.useMemo(()=>{if(!(!o||!i))return i.stations.find(O=>O.stationId===o)},[i,o]),S=O=>{var Y;return((Y=l==null?void 0:l.wares[O])==null?void 0:Y.name)??O},w=(g==null?void 0:g.stationInputs)??[],N=(g==null?void 0:g.externallySupplied)??[],k=(g==null?void 0:g.remainingInputs)??[],I=H.useMemo(()=>{const O=new Map;for(const A of w){const U=O.get(A.wareId)||{connected:0,supplied:0,remaining:0};U.connected=A.amount,O.set(A.wareId,U)}for(const A of N){const U=O.get(A.wareId);U&&(U.supplied=A.amount)}for(const A of k){const U=O.get(A.wareId);U&&(U.remaining=A.amount)}const Y=Array.from(O.entries()).map(([A,U])=>({wareId:A,connected:U.connected,supplied:U.supplied,remaining:U.remaining})),Q=x==null?void 0:x.inputOrder;if(Q&&Q.length>0){const A=new Map(Q.map((U,b)=>[U,b]));Y.sort((U,b)=>{const B=A.get(U.wareId)??1/0,R=A.get(b.wareId)??1/0;return B!==R?B-R:b.connected-U.connected})}else Y.sort((A,U)=>U.connected-A.connected);return Y},[w,N,k,x==null?void 0:x.inputOrder]),M=H.useCallback((O,Y)=>{O.stopPropagation(),h(Y),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",Y)},[]),_=H.useCallback((O,Y)=>{O.preventDefault(),O.stopPropagation(),p&&p!==Y&&(v(Y),O.dataTransfer.dropEffect="move")},[p]),C=H.useCallback(()=>{v(null)},[]),W=H.useCallback((O,Y)=>{if(O.preventDefault(),O.stopPropagation(),!p||!o){h(null),v(null);return}const Q=p;if(Q===Y){h(null),v(null);return}const A=I.map(R=>R.wareId),U=A.indexOf(Q),b=A.indexOf(Y);if(U===-1||b===-1){h(null),v(null);return}const B=[...A];B.splice(U,1),B.splice(b,0,Q),c(o,{inputOrder:B}),h(null),v(null)},[p,I,c,o]),T=H.useCallback(()=>{h(null),v(null)},[]),V=H.useCallback(O=>({isDragging:p===O,isDragOver:m===O,onDragStart:Y=>M(Y,O),onDragEnd:T,onDragOver:Y=>_(Y,O),onDragLeave:C,onDrop:Y=>W(Y,O)}),[p,m,M,T,_,C,W]),K=O=>{const Y=`output-${O.wareId}`,Q=Mc(O.remaining,O.supplied);let A;return Q==="satisfied"?A=`Need: ${Ae(O.connected)}, Supplied: ${Ae(O.supplied)}`:Q==="partial"?A=`Need: ${Ae(O.connected)}, Supplied: ${Ae(O.supplied)}, Remaining: ${Ae(O.remaining)}`:A=`Need: ${Ae(O.connected)}, No external supply`,d.jsx(Rl,{wareId:O.wareId,type:"output",handleId:Y,amount:{primary:O.supplied-O.connected?O.supplied-O.connected:O.supplied,secondary:O.supplied>.01?O.supplied:void 0,fulfilled:O.supplied},status:Q,preset:Hk,drag:V(O.wareId),amountTooltip:A,handleTooltip:`Import ${S(O.wareId)}`},O.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[d.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:""}),d.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),d.jsx("div",{className:"px-1 py-2",children:I.length>0?d.jsx("div",{className:"space-y-0 pr-3",children:I.map(O=>K(O))}):d.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),d.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[d.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),d.jsx(Nr,{type:"source",position:xe.Right,id:Gk,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),qk="generic-export",Zk=H.memo(function({selected:r}){const o=Ee(O=>O.activeStationId),i=de(O=>O.computed),l=et(O=>O.gameData),u=de(O=>O.plan.stations),c=de(O=>O.updateStation),[p,h]=H.useState(null),[m,v]=H.useState(null),x=H.useMemo(()=>{if(o)return u.find(O=>O.id===o)},[u,o]),g=H.useMemo(()=>{if(!(!o||!i))return i.stations.find(O=>O.stationId===o)},[i,o]),S=O=>{var Y;return((Y=l==null?void 0:l.wares[O])==null?void 0:Y.name)??O},w=(g==null?void 0:g.stationOutputs)??[],N=(g==null?void 0:g.externallyConsumed)??[],k=(g==null?void 0:g.remainingOutputs)??[],I=H.useMemo(()=>{const O=new Map;for(const A of w){const U=O.get(A.wareId)||{connected:0,consumed:0,remaining:0};U.connected=A.amount,O.set(A.wareId,U)}for(const A of N){const U=O.get(A.wareId);U&&(U.consumed=A.amount)}for(const A of k){const U=O.get(A.wareId);U&&(U.remaining=A.amount)}const Y=Array.from(O.entries()).map(([A,U])=>({wareId:A,connected:U.connected,consumed:U.consumed,remaining:U.remaining})),Q=x==null?void 0:x.outputOrder;if(Q&&Q.length>0){const A=new Map(Q.map((U,b)=>[U,b]));Y.sort((U,b)=>{const B=A.get(U.wareId)??1/0,R=A.get(b.wareId)??1/0;return B!==R?B-R:b.connected-U.connected})}else Y.sort((A,U)=>U.connected-A.connected);return Y},[w,N,k,x==null?void 0:x.outputOrder]),M=H.useCallback((O,Y)=>{O.stopPropagation(),h(Y),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",Y)},[]),_=H.useCallback((O,Y)=>{O.preventDefault(),O.stopPropagation(),p&&p!==Y&&(v(Y),O.dataTransfer.dropEffect="move")},[p]),C=H.useCallback(()=>{v(null)},[]),W=H.useCallback((O,Y)=>{if(O.preventDefault(),O.stopPropagation(),!p||!o){h(null),v(null);return}const Q=p;if(Q===Y){h(null),v(null);return}const A=I.map(R=>R.wareId),U=A.indexOf(Q),b=A.indexOf(Y);if(U===-1||b===-1){h(null),v(null);return}const B=[...A];B.splice(U,1),B.splice(b,0,Q),c(o,{outputOrder:B}),h(null),v(null)},[p,I,c,o]),T=H.useCallback(()=>{h(null),v(null)},[]),V=H.useCallback(O=>({isDragging:p===O,isDragOver:m===O,onDragStart:Y=>M(Y,O),onDragEnd:T,onDragOver:Y=>_(Y,O),onDragLeave:C,onDrop:Y=>W(Y,O)}),[p,m,M,T,_,C,W]),K=O=>{const Y=`input-${O.wareId}`,Q=Mc(O.remaining,O.consumed);let A;return Q==="satisfied"?A=`Exporting: ${Ae(O.connected)}, Consumed: ${Ae(O.consumed)}`:Q==="partial"?A=`Exporting: ${Ae(O.connected)}, Consumed: ${Ae(O.consumed)}, Remaining: ${Ae(O.remaining)}`:A=`Exporting: ${Ae(O.connected)}, No external consumers`,d.jsx(Rl,{wareId:O.wareId,type:"input",handleId:Y,amount:{primary:O.connected,secondary:O.consumed>.01?O.consumed:void 0,fulfilled:O.consumed},status:Q,preset:Vk,drag:V(O.wareId),amountTooltip:A,handleTooltip:`Export ${S(O.wareId)}`},O.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[d.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:""}),d.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),d.jsx("div",{className:"px-1 py-2",children:I.length>0?d.jsx("div",{className:"space-y-0 pl-3",children:I.map(O=>K(O))}):d.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),d.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[d.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),d.jsx(Nr,{type:"target",position:xe.Left,id:qk,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),Jk=H.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:p,data:h,selected:m}){const v=de(_=>_.computed),x=h==null?void 0:h.connection,g=H.useMemo(()=>{if(x)return fg(v,x.id)},[v,x]),[S,w,N]=Tl({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p}),k=_=>_>=1e3?`${(_/1e3).toFixed(1)}k`:_.toFixed(0),I=v.deficits.find(_=>_.stationId===(x==null?void 0:x.targetStationId)&&_.wareId===(x==null?void 0:x.wareId));let M="#64748b";return x!=null&&x.wareId?I?I.supplied/I.required>=.8?M="#eab308":M="#f97316":M="#22c55e":M="#ef4444",d.jsxs(d.Fragment,{children:[d.jsx(mo,{id:r,path:S,style:{stroke:M,strokeWidth:m?3:2,strokeDasharray:x!=null&&x.wareId?void 0:"5,5"}}),(x==null?void 0:x.wareId)&&d.jsx(og,{children:d.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${w}px,${N}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${m?"ring-2 ring-primary":""}
              ${g!=null&&g.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:x.mode==="custom"?`Custom: ${k(x.amount)}, Actual: ${k((g==null?void 0:g.effectiveAmount)??0)}`:`Auto: ${k((g==null?void 0:g.effectiveAmount)??0)}`,children:k((g==null?void 0:g.effectiveAmount)??0)})})]})}),e2=H.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:p,data:h,selected:m}){const v=h==null?void 0:h.connection,x=de(C=>C.computed),g=Ee(C=>C.activeStationId),S=H.useMemo(()=>{if(!v||!g)return;const C=kr(x,g);return C==null?void 0:C.moduleConnections.find(W=>W.connectionId===v.id)},[x,g,v]),[w,N,k]=Tl({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p}),I=C=>C>=1e3?`${(C/1e3).toFixed(1)}k`:C.toFixed(0),M=S!=null&&S.sourceConstrained?"#ff6666":"#88bb88",_=(S==null?void 0:S.effectiveAmount)??(v==null?void 0:v.amount)??0;return d.jsxs(d.Fragment,{children:[d.jsx(mo,{id:r,path:w,style:{stroke:M,strokeWidth:m?3:2,strokeDasharray:v!=null&&v.wareId?void 0:"5,5"}}),(v==null?void 0:v.wareId)&&d.jsx(og,{children:d.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${N}px,${k}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${S!=null&&S.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${m?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:v.mode==="custom"?`Custom: ${I(v.amount)}, Actual: ${I(_)}`:`${v.mode??"auto"}: ${I(_)}`,children:I(_)})})]})});function t2({x:t,y:r,onClose:o}){const i=H.useRef(null),{screenToFlowPosition:l}=Ir(),u=de(M=>M.plan),c=de(M=>M.addStation),p=de(M=>M.addSector),h=de(M=>M.removeStation),m=de(M=>M.removeSector),v=Ee(M=>M.selectedNodeId),x=Ee(M=>M.clearSelection),g=u.stations.find(M=>M.id===v),S=u.sectors.find(M=>M.id===v);H.useEffect(()=>{const M=_=>{i.current&&!i.current.contains(_.target)&&o()};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[o]),H.useEffect(()=>{const M=_=>{_.key==="Escape"&&o()};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[o]);const w=H.useCallback(M=>{M.stopPropagation();const _=l({x:t,y:r}),C=u.stations.length;c(`Station ${C+1}`,_),o()},[l,t,r,u.stations.length,c,o]),N=H.useCallback(M=>{M.stopPropagation();const _=l({x:t,y:r}),C=u.sectors.length;p(`Sector ${C+1}`,_),o()},[l,t,r,u.sectors.length,p,o]),k=H.useCallback(M=>{M.stopPropagation(),g&&(h(g.id),x()),o()},[g,h,x,o]),I=H.useCallback(M=>{M.stopPropagation(),S&&(m(S.id),x()),o()},[S,m,x,o]);return d.jsx("div",{ref:i,className:"fixed z-50 min-w-[160px] rounded-md border border-border bg-popover shadow-lg",style:{left:t,top:r},onClick:M=>M.stopPropagation(),onMouseDown:M=>M.stopPropagation(),children:d.jsxs("div",{className:"p-1",children:[d.jsxs("button",{onClick:w,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsx("span",{className:"text-lg leading-none",children:"+"}),"Add Station"]}),d.jsxs("button",{onClick:N,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsx("span",{className:"text-lg leading-none",children:""}),"Add Sector"]}),g&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"my-1 h-px bg-border"}),d.jsxs("button",{onClick:k,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-destructive rounded hover:bg-destructive/10 transition-colors text-left",children:[d.jsx("span",{className:"text-lg leading-none",children:""}),"Delete Station"]})]}),S&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"my-1 h-px bg-border"}),d.jsxs("button",{onClick:I,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-destructive rounded hover:bg-destructive/10 transition-colors text-left",children:[d.jsx("span",{className:"text-lg leading-none",children:""}),"Delete Sector"]})]})]})})}const n2={station:Bk,sector:Yk},r2={resource:Jk};function o2(){const{setViewport:t}=Ir(),r=de(b=>b.plan.stations),o=de(b=>b.plan.sectors),i=de(b=>b.plan.connections),l=de(b=>b.computed),u=de(b=>b.updateStation),c=de(b=>b.updateSector),p=de(b=>b.removeStation),h=de(b=>b.removeSector),m=de(b=>b.moveStationToSector),v=de(b=>b.addConnection),x=de(b=>b.removeConnection),g=Ee(b=>b.selectNode),S=Ee(b=>b.selectEdge),w=Ee(b=>b.clearSelection),[N,k]=H.useState(null),I=H.useRef(null),M=H.useMemo(()=>{const b=o.map(R=>({id:R.id,type:"sector",position:R.position,data:{sector:R},width:R.size.width,height:R.size.height,zIndex:-1})),B=r.map(R=>({id:R.id,type:"station",position:R.position,data:{station:R},zIndex:1}));return[...b,...B]},[o,r]),_=H.useMemo(()=>i.map(b=>({id:b.id,source:b.sourceStationId,target:b.targetStationId,sourceHandle:b.wareId?`output-${b.wareId}`:void 0,targetHandle:b.wareId?`input-${b.wareId}`:void 0,type:"resource",data:{connection:b}})),[i]),C=H.useCallback((b,B)=>{for(const R of o)if(b>=R.position.x&&b<=R.position.x+R.size.width&&B>=R.position.y&&B<=R.position.y+R.size.height)return R.id;return null},[o]),W=H.useCallback(b=>{b.forEach(B=>{if(B.type==="position"&&B.position){const R=r.find(D=>D.id===B.id),L=o.find(D=>D.id===B.id);if(R)u(B.id,{position:B.position});else if(L){const D=B.position.x-L.position.x,$=B.position.y-L.position.y;c(B.id,{position:B.position}),(D!==0||$!==0)&&r.filter(j=>j.sectorId===L.id).forEach(j=>{u(j.id,{position:{x:j.position.x+D,y:j.position.y+$}})})}}else if(B.type==="remove"){const R=r.find(D=>D.id===B.id),L=o.find(D=>D.id===B.id);R?p(B.id):L&&h(B.id)}else B.type==="select"&&B.selected&&g(B.id)})},[r,o,u,c,p,h,g]),T=H.useCallback((b,B)=>{const R=r.find(j=>j.id===B.id);if(!R)return;const L=B.position.x+80,D=B.position.y+50,$=C(L,D);$!==R.sectorId&&m(R.id,$)},[r,C,m]),V=H.useCallback(b=>{b.forEach(B=>{B.type==="remove"?x(B.id):B.type==="select"&&B.selected&&S(B.id)})},[x,S]),K=b=>b?b.split("-").slice(1).join("-"):"",O=H.useCallback(b=>{if(b.source&&b.target&&b.sourceHandle){const B=K(b.sourceHandle),R=l.stations.find(P=>P.stationId===b.source),L=R==null?void 0:R.remainingOutputs.find(P=>P.wareId===B),D=l.stations.find(P=>P.stationId===b.target),$=D==null?void 0:D.remainingInputs.find(P=>P.wareId===B),j=$?Math.min((L==null?void 0:L.amount)??0,$.amount):(L==null?void 0:L.amount)??0;v({sourceStationId:b.source,targetStationId:b.target,wareId:B,amount:j,mode:"auto"})}},[v,l.stations]),Y=H.useCallback(()=>{w(),k(null)},[w]),Q=H.useCallback(b=>{if(b.preventDefault(),!I.current)return;const B=I.current.getBoundingClientRect();k({x:b.clientX,y:b.clientY,flowPosition:{x:b.clientX-B.left,y:b.clientY-B.top}})},[]),A=H.useCallback(b=>{if(b.key==="Delete"||b.key==="Backspace"){const B=Ee.getState().selectedNodeId,R=Ee.getState().selectedEdgeId;if(B){const L=r.find($=>$.id===B),D=o.find($=>$.id===B);L?p(B):D&&h(B),w()}else R&&(x(R),w())}},[r,o,p,h,x,w]),U=H.useCallback(b=>{const B=Math.round(b.x),R=Math.round(b.y),L=Math.round(b.zoom*100)/100;(B!==b.x||R!==b.y||L!==b.zoom)&&t({x:B,y:R,zoom:L})},[t]);return d.jsxs("div",{ref:I,className:"flex-1 relative",onKeyDown:A,tabIndex:0,children:[d.jsxs(rg,{nodes:M,edges:_,onNodesChange:W,onEdgesChange:V,onConnect:O,onNodeDragStop:T,onPaneClick:Y,onPaneContextMenu:Q,onViewportChange:U,nodeTypes:n2,edgeTypes:r2,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[d.jsx(ig,{gap:16,size:1}),d.jsx(ag,{}),d.jsx(nk,{nodeColor:b=>b.type==="sector"?b.selected?"#3b82f6":"#475569":b.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),N&&d.jsx(t2,{x:N.x,y:N.y,flowPosition:N.flowPosition,onClose:()=>k(null)})]})}function s2(){return d.jsx(Ll,{children:d.jsx(o2,{})})}const ll={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function i2({x:t,y:r,onClose:o}){const i=H.useRef(null),l=H.useRef(null),{screenToFlowPosition:u}=Ir(),c=et(T=>T.gameData),p=de(T=>T.addModule),h=de(T=>T.removeModule),m=Ee(T=>T.activeStationId),v=Ee(T=>T.selectedNodeId),x=Ee(T=>T.clearSelection),g=de(T=>T.plan.stations),[S,w]=H.useState(null),[N,k]=H.useState(""),I=g.find(T=>T.id===m),M=I==null?void 0:I.modules.find(T=>T.id===v),_=H.useMemo(()=>{if(!c||!N.trim())return null;const T=N.toLowerCase(),V=[];return Object.keys(ll).forEach(K=>{Object.values(c.modules[K]).forEach(O=>{O.name.toLowerCase().includes(T)&&V.push({id:O.id,name:O.name,category:K})})}),V.slice(0,15)},[c,N]);H.useEffect(()=>{var T;(T=l.current)==null||T.focus()},[]),H.useEffect(()=>{const T=V=>{i.current&&!i.current.contains(V.target)&&o()};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[o]),H.useEffect(()=>{const T=V=>{V.key==="Escape"&&o()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[o]);const C=H.useCallback((T,V)=>{if(T.stopPropagation(),!m)return;const K=u({x:t,y:r});p(m,V,K),o()},[u,t,r,m,p,o]),W=H.useCallback(T=>{T.stopPropagation(),M&&m&&(h(m,M.id),x()),o()},[M,m,h,x,o]);return c?d.jsxs("div",{ref:i,className:"fixed z-50 min-w-[240px] max-w-[280px] rounded-md border border-border bg-popover shadow-lg",style:{left:t,top:r},onClick:T=>T.stopPropagation(),onMouseDown:T=>T.stopPropagation(),children:[d.jsx("div",{className:"p-2",children:d.jsx("input",{ref:l,type:"text",placeholder:"Search modules...",value:N,onChange:T=>k(T.target.value),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),d.jsxs("div",{className:"p-1 pt-0",children:[_?d.jsx("div",{className:"max-h-64 overflow-y-auto",children:_.length===0?d.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):_.map(T=>d.jsxs("button",{onClick:V=>C(V,T.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:ll[T.category].icon}),d.jsx("span",{className:"truncate",children:T.name})]},T.id))}):d.jsx(d.Fragment,{children:Object.keys(ll).map(T=>{const{label:V,icon:K}=ll[T],O=Object.values(c.modules[T]),Y=S===T;return d.jsxs("div",{children:[d.jsxs("button",{onClick:Q=>{Q.stopPropagation(),w(Y?null:T)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("span",{children:K}),V]}),d.jsx("span",{className:"text-muted-foreground text-xs",children:Y?"":""})]}),Y&&d.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[O.slice(0,20).map(Q=>d.jsx("button",{onClick:A=>C(A,Q.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:Q.name},Q.id)),O.length>20&&d.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",O.length-20," more"]})]})]},T)})}),M&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"my-1 h-px bg-border"}),d.jsxs("button",{onClick:W,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-destructive rounded hover:bg-destructive/10 transition-colors text-left",children:[d.jsx("span",{className:"text-lg leading-none",children:""}),"Delete Module"]})]})]})]}):null}const l2={module:Qk,stationInput:Kk,stationOutput:Zk},a2={module:e2};function u2(){const{setViewport:t}=Ir(),r=Ee(A=>A.activeStationId),o=de(A=>A.plan.stations),i=de(A=>A.computed),l=de(A=>A.updateModule),u=de(A=>A.removeModule),c=de(A=>A.addModuleConnection),p=de(A=>A.removeModuleConnection),h=Ee(A=>A.selectNode),m=Ee(A=>A.selectEdge),v=Ee(A=>A.clearSelection),x=H.useRef(null),[g,S]=H.useState(null),w=H.useMemo(()=>o.find(A=>A.id===r),[o,r]),N={x:-300,y:100},k={x:400,y:100},I=H.useMemo(()=>{if(!w)return[];const A=w.modules.map(B=>({id:B.id,type:"module",position:B.position,data:{module:B}})),U={id:Zt,type:"stationInput",position:w.stationInputPosition??N,data:{},deletable:!1},b={id:gn,type:"stationOutput",position:w.stationOutputPosition??k,data:{},deletable:!1};return[U,...A,b]},[w]),M=H.useMemo(()=>w?(w.moduleConnections??[]).map(U=>({id:U.id,source:U.sourceModuleId,target:U.targetModuleId,sourceHandle:U.wareId?`output-${U.wareId}`:void 0,targetHandle:U.wareId?`input-${U.wareId}`:void 0,type:"module",data:{connection:U}})):[],[w]),_=de(A=>A.updateStation),C=H.useCallback(A=>{r&&A.forEach(U=>{U.type==="position"&&U.position?U.id===Zt?_(r,{stationInputPosition:U.position}):U.id===gn?_(r,{stationOutputPosition:U.position}):l(r,U.id,{position:U.position}):U.type==="remove"?U.id!==Zt&&U.id!==gn&&u(r,U.id):U.type==="select"&&U.selected&&h(U.id)})},[r,l,_,u,h]),W=H.useCallback(A=>{r&&A.forEach(U=>{U.type==="remove"?p(r,U.id):U.type==="select"&&U.selected&&m(U.id)})},[r,p,m]),T=A=>A?A.split("-").slice(1).join("-"):"",V=H.useCallback(A=>{if(!r||!A.source||!A.target)return;let U,b=0,B;if(A.source===Zt){if(!A.targetHandle)return;U=T(A.targetHandle);const R=hr(i,r,A.target),L=R==null?void 0:R.netInputs.find(D=>D.wareId===U);b=(L==null?void 0:L.amount)??0}else if(A.target===gn){if(!A.sourceHandle)return;U=T(A.sourceHandle);const R=hr(i,r,A.source),L=R==null?void 0:R.netOutputs.find(D=>D.wareId===U);b=(L==null?void 0:L.amount)??0}else{if(!A.sourceHandle)return;U=T(A.sourceHandle);const R=hr(i,r,A.source),L=R==null?void 0:R.grossOutputs.find(P=>P.wareId===U),D=(L==null?void 0:L.amount)??0,$=hr(i,r,A.target),j=$==null?void 0:$.grossInputs.find(P=>P.wareId===U);b=j?Math.min(D,j.amount):D,B=D>0?b/D:0}U&&c(r,{sourceModuleId:A.source,targetModuleId:A.target,wareId:U,amount:b,mode:"auto",locked:!1,ratio:B})},[r,i,c]),K=H.useCallback(()=>{v(),S(null)},[v]),O=H.useCallback(A=>{A.preventDefault(),S({x:A.clientX,y:A.clientY})},[]),Y=H.useCallback(A=>{if(A.key==="Delete"||A.key==="Backspace"){const U=Ee.getState().selectedNodeId,b=Ee.getState().selectedEdgeId;U&&r?U!==Zt&&U!==gn&&(u(r,U),v()):b&&r&&(p(r,b),v())}},[r,u,p,v]),Q=H.useCallback(A=>{const U=Math.round(A.x),b=Math.round(A.y),B=Math.round(A.zoom*100)/100;(U!==A.x||b!==A.y||B!==A.zoom)&&t({x:U,y:b,zoom:B})},[t]);return w?d.jsxs("div",{ref:x,className:"flex-1 relative",onKeyDown:Y,tabIndex:0,children:[d.jsxs(rg,{nodes:I,edges:M,onNodesChange:C,onEdgesChange:W,onConnect:V,onPaneClick:K,onPaneContextMenu:O,onViewportChange:Q,nodeTypes:l2,edgeTypes:a2,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[d.jsx(ig,{gap:16,size:1}),d.jsx(ag,{})]}),d.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[d.jsx("h2",{className:"font-medium text-foreground",children:w.name}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.modules.length," module",w.modules.length!==1?"s":"",","," ",(w.moduleConnections??[]).length," connection",(w.moduleConnections??[]).length!==1?"s":""]})]}),g&&d.jsx(i2,{x:g.x,y:g.y,onClose:()=>S(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:d.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function c2(){return d.jsx(Ll,{children:d.jsx(u2,{})})}let al=null;async function d2(){if(al)return al;const t=await fetch("/X4-Foundations-Station-Planner/gamedata.json");if(!t.ok)throw new Error(`Failed to load game data: ${t.statusText}`);return al=await t.json(),al}function f2(){const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=et(),u=Ee(c=>c.viewMode);return H.useEffect(()=>{d2().then(c=>{i(c),de.getState().recompute()}).catch(c=>l(c.message))},[i,l]),r?d.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?d.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):d.jsx(Ll,{children:d.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[d.jsx(Ck,{}),d.jsx(Ak,{}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u==="network"?d.jsx(s2,{}):d.jsx(c2,{}),d.jsx(Ok,{})]}),d.jsx(Lk,{}),t&&d.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]})]})})}Z0.createRoot(document.getElementById("root")).render(d.jsx(H.StrictMode,{children:d.jsx(f2,{})}));
