(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();function Em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ou={exports:{}},as={},Au={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function qx(){if(rp)return Ee;rp=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),h=Symbol.iterator;function g(b){return b===null||typeof b!="object"?null:(b=h&&b[h]||b["@@iterator"],typeof b=="function"?b:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function N(b,A,G){this.props=b,this.context=A,this.refs=k,this.updater=G||w}N.prototype.isReactComponent={},N.prototype.setState=function(b,A){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,A,"setState")},N.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function I(){}I.prototype=N.prototype;function P(b,A,G){this.props=b,this.context=A,this.refs=k,this.updater=G||w}var _=P.prototype=new I;_.constructor=P,S(_,N.prototype),_.isPureReactComponent=!0;var j=Array.isArray,V=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function q(b,A,G){var Z,ne={},oe=null,ae=null;if(A!=null)for(Z in A.ref!==void 0&&(ae=A.ref),A.key!==void 0&&(oe=""+A.key),A)V.call(A,Z)&&!B.hasOwnProperty(Z)&&(ne[Z]=A[Z]);var re=arguments.length-2;if(re===1)ne.children=G;else if(1<re){for(var ce=Array(re),ve=0;ve<re;ve++)ce[ve]=arguments[ve+2];ne.children=ce}if(b&&b.defaultProps)for(Z in re=b.defaultProps,re)ne[Z]===void 0&&(ne[Z]=re[Z]);return{$$typeof:t,type:b,key:oe,ref:ae,props:ne,_owner:F.current}}function O(b,A){return{$$typeof:t,type:b.type,key:A,ref:b.ref,props:b.props,_owner:b._owner}}function U(b){return typeof b=="object"&&b!==null&&b.$$typeof===t}function X(b){var A={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(G){return A[G]})}var W=/\/+/g;function K(b,A){return typeof b=="object"&&b!==null&&b.key!=null?X(""+b.key):A.toString(36)}function R(b,A,G,Z,ne){var oe=typeof b;(oe==="undefined"||oe==="boolean")&&(b=null);var ae=!1;if(b===null)ae=!0;else switch(oe){case"string":case"number":ae=!0;break;case"object":switch(b.$$typeof){case t:case r:ae=!0}}if(ae)return ae=b,ne=ne(ae),b=Z===""?"."+K(ae,0):Z,j(ne)?(G="",b!=null&&(G=b.replace(W,"$&/")+"/"),R(ne,A,G,"",function(ve){return ve})):ne!=null&&(U(ne)&&(ne=O(ne,G+(!ne.key||ae&&ae.key===ne.key?"":(""+ne.key).replace(W,"$&/")+"/")+b)),A.push(ne)),1;if(ae=0,Z=Z===""?".":Z+":",j(b))for(var re=0;re<b.length;re++){oe=b[re];var ce=Z+K(oe,re);ae+=R(oe,A,G,ce,ne)}else if(ce=g(b),typeof ce=="function")for(b=ce.call(b),re=0;!(oe=b.next()).done;)oe=oe.value,ce=Z+K(oe,re++),ae+=R(oe,A,G,ce,ne);else if(oe==="object")throw A=String(b),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return ae}function $(b,A,G){if(b==null)return b;var Z=[],ne=0;return R(b,Z,"","",function(oe){return A.call(G,oe,ne++)}),Z}function z(b){if(b._status===-1){var A=b._result;A=A(),A.then(function(G){(b._status===0||b._status===-1)&&(b._status=1,b._result=G)},function(G){(b._status===0||b._status===-1)&&(b._status=2,b._result=G)}),b._status===-1&&(b._status=0,b._result=A)}if(b._status===1)return b._result.default;throw b._result}var D={current:null},M={transition:null},T={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:F};function C(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:$,forEach:function(b,A,G){$(b,function(){A.apply(this,arguments)},G)},count:function(b){var A=0;return $(b,function(){A++}),A},toArray:function(b){return $(b,function(A){return A})||[]},only:function(b){if(!U(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ee.Component=N,Ee.Fragment=o,Ee.Profiler=l,Ee.PureComponent=P,Ee.StrictMode=i,Ee.Suspense=p,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,Ee.act=C,Ee.cloneElement=function(b,A,G){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Z=S({},b.props),ne=b.key,oe=b.ref,ae=b._owner;if(A!=null){if(A.ref!==void 0&&(oe=A.ref,ae=F.current),A.key!==void 0&&(ne=""+A.key),b.type&&b.type.defaultProps)var re=b.type.defaultProps;for(ce in A)V.call(A,ce)&&!B.hasOwnProperty(ce)&&(Z[ce]=A[ce]===void 0&&re!==void 0?re[ce]:A[ce])}var ce=arguments.length-2;if(ce===1)Z.children=G;else if(1<ce){re=Array(ce);for(var ve=0;ve<ce;ve++)re[ve]=arguments[ve+2];Z.children=re}return{$$typeof:t,type:b.type,key:ne,ref:oe,props:Z,_owner:ae}},Ee.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:u,_context:b},b.Consumer=b},Ee.createElement=q,Ee.createFactory=function(b){var A=q.bind(null,b);return A.type=b,A},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(b){return{$$typeof:m,render:b}},Ee.isValidElement=U,Ee.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:z}},Ee.memo=function(b,A){return{$$typeof:x,type:b,compare:A===void 0?null:A}},Ee.startTransition=function(b){var A=M.transition;M.transition={};try{b()}finally{M.transition=A}},Ee.unstable_act=C,Ee.useCallback=function(b,A){return D.current.useCallback(b,A)},Ee.useContext=function(b){return D.current.useContext(b)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(b){return D.current.useDeferredValue(b)},Ee.useEffect=function(b,A){return D.current.useEffect(b,A)},Ee.useId=function(){return D.current.useId()},Ee.useImperativeHandle=function(b,A,G){return D.current.useImperativeHandle(b,A,G)},Ee.useInsertionEffect=function(b,A){return D.current.useInsertionEffect(b,A)},Ee.useLayoutEffect=function(b,A){return D.current.useLayoutEffect(b,A)},Ee.useMemo=function(b,A){return D.current.useMemo(b,A)},Ee.useReducer=function(b,A,G){return D.current.useReducer(b,A,G)},Ee.useRef=function(b){return D.current.useRef(b)},Ee.useState=function(b){return D.current.useState(b)},Ee.useSyncExternalStore=function(b,A,G){return D.current.useSyncExternalStore(b,A,G)},Ee.useTransition=function(){return D.current.useTransition()},Ee.version="18.3.1",Ee}var op;function Es(){return op||(op=1,Au.exports=qx()),Au.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Zx(){if(sp)return as;sp=1;var t=Es(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(m,p,x){var y,h={},g=null,w=null;x!==void 0&&(g=""+x),p.key!==void 0&&(g=""+p.key),p.ref!==void 0&&(w=p.ref);for(y in p)i.call(p,y)&&!u.hasOwnProperty(y)&&(h[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)h[y]===void 0&&(h[y]=p[y]);return{$$typeof:r,type:m,key:g,ref:w,props:h,_owner:l.current}}return as.Fragment=o,as.jsx=c,as.jsxs=c,as}var ip;function Jx(){return ip||(ip=1,Ou.exports=Zx()),Ou.exports}var d=Jx(),L=Es();const fs=Em(L);var qi={},$u={exports:{}},mt={},zu={exports:{}},Lu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function e0(){return lp||(lp=1,(function(t){function r(M,T){var C=M.length;M.push(T);e:for(;0<C;){var b=C-1>>>1,A=M[b];if(0<l(A,T))M[b]=T,M[C]=A,C=b;else break e}}function o(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var T=M[0],C=M.pop();if(C!==T){M[0]=C;e:for(var b=0,A=M.length,G=A>>>1;b<G;){var Z=2*(b+1)-1,ne=M[Z],oe=Z+1,ae=M[oe];if(0>l(ne,C))oe<A&&0>l(ae,ne)?(M[b]=ae,M[oe]=C,b=oe):(M[b]=ne,M[Z]=C,b=Z);else if(oe<A&&0>l(ae,C))M[b]=ae,M[oe]=C,b=oe;else break e}}return T}function l(M,T){var C=M.sortIndex-T.sortIndex;return C!==0?C:M.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();t.unstable_now=function(){return c.now()-m}}var p=[],x=[],y=1,h=null,g=3,w=!1,S=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var T=o(x);T!==null;){if(T.callback===null)i(x);else if(T.startTime<=M)i(x),T.sortIndex=T.expirationTime,r(p,T);else break;T=o(x)}}function j(M){if(k=!1,_(M),!S)if(o(p)!==null)S=!0,z(V);else{var T=o(x);T!==null&&D(j,T.startTime-M)}}function V(M,T){S=!1,k&&(k=!1,I(q),q=-1),w=!0;var C=g;try{for(_(T),h=o(p);h!==null&&(!(h.expirationTime>T)||M&&!X());){var b=h.callback;if(typeof b=="function"){h.callback=null,g=h.priorityLevel;var A=b(h.expirationTime<=T);T=t.unstable_now(),typeof A=="function"?h.callback=A:h===o(p)&&i(p),_(T)}else i(p);h=o(p)}if(h!==null)var G=!0;else{var Z=o(x);Z!==null&&D(j,Z.startTime-T),G=!1}return G}finally{h=null,g=C,w=!1}}var F=!1,B=null,q=-1,O=5,U=-1;function X(){return!(t.unstable_now()-U<O)}function W(){if(B!==null){var M=t.unstable_now();U=M;var T=!0;try{T=B(!0,M)}finally{T?K():(F=!1,B=null)}}else F=!1}var K;if(typeof P=="function")K=function(){P(W)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,$=R.port2;R.port1.onmessage=W,K=function(){$.postMessage(null)}}else K=function(){N(W,0)};function z(M){B=M,F||(F=!0,K())}function D(M,T){q=N(function(){M(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,z(V))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return o(p)},t.unstable_next=function(M){switch(g){case 1:case 2:case 3:var T=3;break;default:T=g}var C=g;g=T;try{return M()}finally{g=C}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,T){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var C=g;g=M;try{return T()}finally{g=C}},t.unstable_scheduleCallback=function(M,T,C){var b=t.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?b+C:b):C=b,M){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=C+A,M={id:y++,callback:T,priorityLevel:M,startTime:C,expirationTime:A,sortIndex:-1},C>b?(M.sortIndex=C,r(x,M),o(p)===null&&M===o(x)&&(k?(I(q),q=-1):k=!0,D(j,C-b))):(M.sortIndex=A,r(p,M),S||w||(S=!0,z(V))),M},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(M){var T=g;return function(){var C=g;g=T;try{return M.apply(this,arguments)}finally{g=C}}}})(Lu)),Lu}var ap;function t0(){return ap||(ap=1,zu.exports=e0()),zu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function n0(){if(up)return mt;up=1;var t=Es(),r=t0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function u(e,n){c(e,n),c(e+"Capture",n)}function c(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},h={};function g(e){return p.call(h,e)?!0:p.call(y,e)?!1:x.test(e)?h[e]=!0:(y[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function k(e,n,s,a,f,v,E){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=E}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];N[n]=new k(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function P(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(I,P);N[n]=new k(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(I,P);N[n]=new k(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(I,P);N[n]=new k(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});function _(e,n,s,a){var f=N.hasOwnProperty(n)?N[n]:null;(f!==null?f.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,f,a)&&(s=null),a||f===null?g(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):f.mustUseProperty?e[f.propertyName]=s===null?f.type===3?!1:"":s:(n=f.attributeName,a=f.attributeNamespace,s===null?e.removeAttribute(n):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),X=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),M=Symbol.iterator;function T(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var C=Object.assign,b;function A(e){if(b===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);b=n&&n[1]||""}return`
`+b+e}var G=!1;function Z(e,n){if(!e||G)return"";G=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(te){var a=te}Reflect.construct(e,[],n)}else{try{n.call()}catch(te){a=te}e.call(n.prototype)}else{try{throw Error()}catch(te){a=te}e()}}catch(te){if(te&&a&&typeof te.stack=="string"){for(var f=te.stack.split(`
`),v=a.stack.split(`
`),E=f.length-1,H=v.length-1;1<=E&&0<=H&&f[E]!==v[H];)H--;for(;1<=E&&0<=H;E--,H--)if(f[E]!==v[H]){if(E!==1||H!==1)do if(E--,H--,0>H||f[E]!==v[H]){var Y=`
`+f[E].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=E&&0<=H);break}}}finally{G=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?A(e):""}function ne(e){switch(e.tag){case 5:return A(e.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case F:return"Portal";case O:return"Profiler";case q:return"StrictMode";case K:return"Suspense";case R:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case X:return(e.displayName||"Context")+".Consumer";case U:return(e._context.displayName||"Context")+".Provider";case W:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case z:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}function ae(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function re(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ce(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ve(e){var n=ce(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(E){a=""+E,v.call(this,E)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Se(e){e._valueTracker||(e._valueTracker=ve(e))}function Ce(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=ce(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function we(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _e(e,n){var s=n.checked;return C({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Te(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=re(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function je(e,n){n=n.checked,n!=null&&_(e,"checked",n,!1)}function Xe(e,n){je(e,n);var s=re(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?gt(e,n.type,s):n.hasOwnProperty("defaultValue")&&gt(e,n.type,re(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Ot(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function gt(e,n,s){(n!=="number"||we(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var xt=Array.isArray;function Et(e,n,s,a){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&a&&(e[s].defaultSelected=!0)}else{for(s=""+re(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function on(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return C({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sn(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(xt(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:re(s)}}function _r(e,n){var s=re(n.value),a=re(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Xn(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function sn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ln(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?sn(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qn,Ts=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,f){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,f)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Qn=Qn||document.createElement("div"),Qn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Qn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function an(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vl=["Webkit","ms","Moz","O"];Object.keys(Gn).forEach(function(e){Vl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Gn[n]=Gn[e]})});function Os(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Gn.hasOwnProperty(e)&&Gn[e]?(""+n).trim():n+"px"}function As(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,f=Os(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,f):e[s]=f}}var Bl=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yo(e,n){if(n){if(Bl[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function vo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wo=null;function So(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var No=null,Nn=null,kn=null;function $s(e){if(e=Xo(e)){if(typeof No!="function")throw Error(o(280));var n=e.stateNode;n&&(n=fi(n),No(e.stateNode,e.type,n))}}function zs(e){Nn?kn?kn.push(e):kn=[e]:Nn=e}function Ls(){if(Nn){var e=Nn,n=kn;if(kn=Nn=null,$s(e),n)for(e=0;e<n.length;e++)$s(n[e])}}function Rs(e,n){return e(n)}function Fs(){}var ko=!1;function Hs(e,n,s){if(ko)return e(n,s);ko=!0;try{return Rs(e,n,s)}finally{ko=!1,(Nn!==null||kn!==null)&&(Fs(),Ls())}}function Kn(e,n){var s=e.stateNode;if(s===null)return null;var a=fi(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Co=!1;if(m)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Co=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Co=!1}function Wl(e,n,s,a,f,v,E,H,Y){var te=Array.prototype.slice.call(arguments,3);try{n.apply(s,te)}catch(ie){this.onError(ie)}}var Zn=!1,jr=null,Mr=!1,Io=null,Ul={onError:function(e){Zn=!0,jr=e}};function Yl(e,n,s,a,f,v,E,H,Y){Zn=!1,jr=null,Wl.apply(Ul,arguments)}function Xl(e,n,s,a,f,v,E,H,Y){if(Yl.apply(this,arguments),Zn){if(Zn){var te=jr;Zn=!1,jr=null}else throw Error(o(198));Mr||(Mr=!0,Io=te)}}function Xt(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Eo(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _o(e){if(Xt(e)!==e)throw Error(o(188))}function Ql(e){var n=e.alternate;if(!n){if(n=Xt(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var f=s.return;if(f===null)break;var v=f.alternate;if(v===null){if(a=f.return,a!==null){s=a;continue}break}if(f.child===v.child){for(v=f.child;v;){if(v===s)return _o(f),e;if(v===a)return _o(f),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=f,a=v;else{for(var E=!1,H=f.child;H;){if(H===s){E=!0,s=f,a=v;break}if(H===a){E=!0,a=f,s=v;break}H=H.sibling}if(!E){for(H=v.child;H;){if(H===s){E=!0,s=v,a=f;break}if(H===a){E=!0,a=v,s=f;break}H=H.sibling}if(!E)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Vs(e){return e=Ql(e),e!==null?Bs(e):null}function Bs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Bs(e);if(n!==null)return n;e=e.sibling}return null}var Ws=r.unstable_scheduleCallback,Us=r.unstable_cancelCallback,Gl=r.unstable_shouldYield,Ys=r.unstable_requestPaint,He=r.unstable_now,Kl=r.unstable_getCurrentPriorityLevel,jo=r.unstable_ImmediatePriority,Xs=r.unstable_UserBlockingPriority,br=r.unstable_NormalPriority,ql=r.unstable_LowPriority,Qs=r.unstable_IdlePriority,Jn=null,_t=null;function Zl(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Jn,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:ta,Jl=Math.log,ea=Math.LN2;function ta(e){return e>>>=0,e===0?32:31-(Jl(e)/ea|0)|0}var Pr=64,Dr=4194304;function Qt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,f=e.suspendedLanes,v=e.pingedLanes,E=s&268435455;if(E!==0){var H=E&~f;H!==0?a=Qt(H):(v&=E,v!==0&&(a=Qt(v)))}else E=s&~f,E!==0?a=Qt(E):v!==0&&(a=Qt(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&f)===0&&(f=a&-a,v=n&-n,f>=v||f===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-yt(n),f=1<<s,a|=e[s],n&=~f;return a}function Gs(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,v=e.pendingLanes;0<v;){var E=31-yt(v),H=1<<E,Y=f[E];Y===-1?((H&s)===0||(H&a)!==0)&&(f[E]=Gs(H,n)):Y<=n&&(e.expiredLanes|=H),v&=~H}}function Mo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Or(){var e=Pr;return Pr<<=1,(Pr&4194240)===0&&(Pr=64),e}function bo(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function er(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-yt(n),e[n]=s}function Ks(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var f=31-yt(s),v=1<<f;n[f]=0,a[f]=-1,e[f]=-1,s&=~v}}function ra(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-yt(s),f=1<<a;f&n|e[a]&n&&(e[a]|=n),s&=~f}}var De=0;function Oc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ac,oa,$c,zc,Lc,sa=!1,qs=[],Cn=null,In=null,En=null,Po=new Map,Do=new Map,_n=[],vg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rc(e,n){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Po.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(n.pointerId)}}function To(e,n,s,a,f,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[f]},n!==null&&(n=Xo(n),n!==null&&oa(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function wg(e,n,s,a,f){switch(n){case"focusin":return Cn=To(Cn,e,n,s,a,f),!0;case"dragenter":return In=To(In,e,n,s,a,f),!0;case"mouseover":return En=To(En,e,n,s,a,f),!0;case"pointerover":var v=f.pointerId;return Po.set(v,To(Po.get(v)||null,e,n,s,a,f)),!0;case"gotpointercapture":return v=f.pointerId,Do.set(v,To(Do.get(v)||null,e,n,s,a,f)),!0}return!1}function Fc(e){var n=tr(e.target);if(n!==null){var s=Xt(n);if(s!==null){if(n=s.tag,n===13){if(n=Eo(s),n!==null){e.blockedOn=n,Lc(e.priority,function(){$c(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zs(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=la(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);wo=a,s.target.dispatchEvent(a),wo=null}else return n=Xo(s),n!==null&&oa(n),e.blockedOn=s,!1;n.shift()}return!0}function Hc(e,n,s){Zs(e)&&s.delete(n)}function Sg(){sa=!1,Cn!==null&&Zs(Cn)&&(Cn=null),In!==null&&Zs(In)&&(In=null),En!==null&&Zs(En)&&(En=null),Po.forEach(Hc),Do.forEach(Hc)}function Oo(e,n){e.blockedOn===n&&(e.blockedOn=null,sa||(sa=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sg)))}function Ao(e){function n(f){return Oo(f,e)}if(0<qs.length){Oo(qs[0],e);for(var s=1;s<qs.length;s++){var a=qs[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Cn!==null&&Oo(Cn,e),In!==null&&Oo(In,e),En!==null&&Oo(En,e),Po.forEach(n),Do.forEach(n),s=0;s<_n.length;s++)a=_n[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<_n.length&&(s=_n[0],s.blockedOn===null);)Fc(s),s.blockedOn===null&&_n.shift()}var Ar=j.ReactCurrentBatchConfig,Js=!0;function Ng(e,n,s,a){var f=De,v=Ar.transition;Ar.transition=null;try{De=1,ia(e,n,s,a)}finally{De=f,Ar.transition=v}}function kg(e,n,s,a){var f=De,v=Ar.transition;Ar.transition=null;try{De=4,ia(e,n,s,a)}finally{De=f,Ar.transition=v}}function ia(e,n,s,a){if(Js){var f=la(e,n,s,a);if(f===null)Ca(e,n,a,ei,s),Rc(e,a);else if(wg(f,e,n,s,a))a.stopPropagation();else if(Rc(e,a),n&4&&-1<vg.indexOf(e)){for(;f!==null;){var v=Xo(f);if(v!==null&&Ac(v),v=la(e,n,s,a),v===null&&Ca(e,n,a,ei,s),v===f)break;f=v}f!==null&&a.stopPropagation()}else Ca(e,n,a,null,s)}}var ei=null;function la(e,n,s,a){if(ei=null,e=So(a),e=tr(e),e!==null)if(n=Xt(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Eo(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ei=e,null}function Vc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kl()){case jo:return 1;case Xs:return 4;case br:case ql:return 16;case Qs:return 536870912;default:return 16}default:return 16}}var jn=null,aa=null,ti=null;function Bc(){if(ti)return ti;var e,n=aa,s=n.length,a,f="value"in jn?jn.value:jn.textContent,v=f.length;for(e=0;e<s&&n[e]===f[e];e++);var E=s-e;for(a=1;a<=E&&n[s-a]===f[v-a];a++);return ti=f.slice(e,1<a?1-a:void 0)}function ni(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ri(){return!0}function Wc(){return!1}function vt(e){function n(s,a,f,v,E){this._reactName=s,this._targetInst=f,this.type=a,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var H in e)e.hasOwnProperty(H)&&(s=e[H],this[H]=s?s(v):v[H]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ri:Wc,this.isPropagationStopped=Wc,this}return C(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),n}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=vt($r),$o=C({},$r,{view:0,detail:0}),Cg=vt($o),ca,da,zo,oi=C({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zo&&(zo&&e.type==="mousemove"?(ca=e.screenX-zo.screenX,da=e.screenY-zo.screenY):da=ca=0,zo=e),ca)},movementY:function(e){return"movementY"in e?e.movementY:da}}),Uc=vt(oi),Ig=C({},oi,{dataTransfer:0}),Eg=vt(Ig),_g=C({},$o,{relatedTarget:0}),fa=vt(_g),jg=C({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),Mg=vt(jg),bg=C({},$r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pg=vt(bg),Dg=C({},$r,{data:0}),Yc=vt(Dg),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $g(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ag[e])?!!n[e]:!1}function pa(){return $g}var zg=C({},$o,{key:function(e){if(e.key){var n=Tg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Og[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lg=vt(zg),Rg=C({},oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xc=vt(Rg),Fg=C({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),Hg=vt(Fg),Vg=C({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bg=vt(Vg),Wg=C({},oi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ug=vt(Wg),Yg=[9,13,27,32],ma=m&&"CompositionEvent"in window,Lo=null;m&&"documentMode"in document&&(Lo=document.documentMode);var Xg=m&&"TextEvent"in window&&!Lo,Qc=m&&(!ma||Lo&&8<Lo&&11>=Lo),Gc=" ",Kc=!1;function qc(e,n){switch(e){case"keyup":return Yg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function Qg(e,n){switch(e){case"compositionend":return Zc(n);case"keypress":return n.which!==32?null:(Kc=!0,Gc);case"textInput":return e=n.data,e===Gc&&Kc?null:e;default:return null}}function Gg(e,n){if(zr)return e==="compositionend"||!ma&&qc(e,n)?(e=Bc(),ti=aa=jn=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Qc&&n.locale!=="ko"?null:n.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Kg[e.type]:n==="textarea"}function ed(e,n,s,a){zs(a),n=ui(n,"onChange"),0<n.length&&(s=new ua("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Ro=null,Fo=null;function qg(e){yd(e,0)}function si(e){var n=Vr(e);if(Ce(n))return e}function Zg(e,n){if(e==="change")return n}var td=!1;if(m){var ha;if(m){var ga="oninput"in document;if(!ga){var nd=document.createElement("div");nd.setAttribute("oninput","return;"),ga=typeof nd.oninput=="function"}ha=ga}else ha=!1;td=ha&&(!document.documentMode||9<document.documentMode)}function rd(){Ro&&(Ro.detachEvent("onpropertychange",od),Fo=Ro=null)}function od(e){if(e.propertyName==="value"&&si(Fo)){var n=[];ed(n,Fo,e,So(e)),Hs(qg,n)}}function Jg(e,n,s){e==="focusin"?(rd(),Ro=n,Fo=s,Ro.attachEvent("onpropertychange",od)):e==="focusout"&&rd()}function ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return si(Fo)}function tx(e,n){if(e==="click")return si(n)}function nx(e,n){if(e==="input"||e==="change")return si(n)}function rx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var At=typeof Object.is=="function"?Object.is:rx;function Ho(e,n){if(At(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var f=s[a];if(!p.call(n,f)||!At(e[f],n[f]))return!1}return!0}function sd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function id(e,n){var s=sd(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=sd(s)}}function ld(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ld(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ad(){for(var e=window,n=we();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=we(e.document)}return n}function xa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function ox(e){var n=ad(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&ld(s.ownerDocument.documentElement,s)){if(a!==null&&xa(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var f=s.textContent.length,v=Math.min(a.start,f);a=a.end===void 0?v:Math.min(a.end,f),!e.extend&&v>a&&(f=a,a=v,v=f),f=id(s,v);var E=id(s,a);f&&E&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==E.node||e.focusOffset!==E.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(E.node,E.offset)):(n.setEnd(E.node,E.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sx=m&&"documentMode"in document&&11>=document.documentMode,Lr=null,ya=null,Vo=null,va=!1;function ud(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;va||Lr==null||Lr!==we(a)||(a=Lr,"selectionStart"in a&&xa(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Vo&&Ho(Vo,a)||(Vo=a,a=ui(ya,"onSelect"),0<a.length&&(n=new ua("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Lr)))}function ii(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Rr={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionend:ii("Transition","TransitionEnd")},wa={},cd={};m&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function li(e){if(wa[e])return wa[e];if(!Rr[e])return e;var n=Rr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in cd)return wa[e]=n[s];return e}var dd=li("animationend"),fd=li("animationiteration"),pd=li("animationstart"),md=li("transitionend"),hd=new Map,gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,n){hd.set(e,n),u(n,[e])}for(var Sa=0;Sa<gd.length;Sa++){var Na=gd[Sa],ix=Na.toLowerCase(),lx=Na[0].toUpperCase()+Na.slice(1);Mn(ix,"on"+lx)}Mn(dd,"onAnimationEnd"),Mn(fd,"onAnimationIteration"),Mn(pd,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(md,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function xd(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,Xl(a,n,void 0,e),e.currentTarget=null}function yd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],f=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var E=a.length-1;0<=E;E--){var H=a[E],Y=H.instance,te=H.currentTarget;if(H=H.listener,Y!==v&&f.isPropagationStopped())break e;xd(f,H,te),v=Y}else for(E=0;E<a.length;E++){if(H=a[E],Y=H.instance,te=H.currentTarget,H=H.listener,Y!==v&&f.isPropagationStopped())break e;xd(f,H,te),v=Y}}}if(Mr)throw e=Io,Mr=!1,Io=null,e}function $e(e,n){var s=n[ba];s===void 0&&(s=n[ba]=new Set);var a=e+"__bubble";s.has(a)||(vd(n,e,2,!1),s.add(a))}function ka(e,n,s){var a=0;n&&(a|=4),vd(s,e,a,n)}var ai="_reactListening"+Math.random().toString(36).slice(2);function Wo(e){if(!e[ai]){e[ai]=!0,i.forEach(function(s){s!=="selectionchange"&&(ax.has(s)||ka(s,!1,e),ka(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ai]||(n[ai]=!0,ka("selectionchange",!1,n))}}function vd(e,n,s,a){switch(Vc(n)){case 1:var f=Ng;break;case 4:f=kg;break;default:f=ia}s=f.bind(null,n,s,e),f=void 0,!Co||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function Ca(e,n,s,a,f){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var E=a.tag;if(E===3||E===4){var H=a.stateNode.containerInfo;if(H===f||H.nodeType===8&&H.parentNode===f)break;if(E===4)for(E=a.return;E!==null;){var Y=E.tag;if((Y===3||Y===4)&&(Y=E.stateNode.containerInfo,Y===f||Y.nodeType===8&&Y.parentNode===f))return;E=E.return}for(;H!==null;){if(E=tr(H),E===null)return;if(Y=E.tag,Y===5||Y===6){a=v=E;continue e}H=H.parentNode}}a=a.return}Hs(function(){var te=v,ie=So(s),le=[];e:{var se=hd.get(e);if(se!==void 0){var fe=ua,me=e;switch(e){case"keypress":if(ni(s)===0)break e;case"keydown":case"keyup":fe=Lg;break;case"focusin":me="focus",fe=fa;break;case"focusout":me="blur",fe=fa;break;case"beforeblur":case"afterblur":fe=fa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Eg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Hg;break;case dd:case fd:case pd:fe=Mg;break;case md:fe=Bg;break;case"scroll":fe=Cg;break;case"wheel":fe=Ug;break;case"copy":case"cut":case"paste":fe=Pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Xc}var he=(n&4)!==0,Ye=!he&&e==="scroll",J=he?se!==null?se+"Capture":null:se;he=[];for(var Q=te,ee;Q!==null;){ee=Q;var ue=ee.stateNode;if(ee.tag===5&&ue!==null&&(ee=ue,J!==null&&(ue=Kn(Q,J),ue!=null&&he.push(Uo(Q,ue,ee)))),Ye)break;Q=Q.return}0<he.length&&(se=new fe(se,me,null,s,ie),le.push({event:se,listeners:he}))}}if((n&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",se&&s!==wo&&(me=s.relatedTarget||s.fromElement)&&(tr(me)||me[un]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(me=s.relatedTarget||s.toElement,fe=te,me=me?tr(me):null,me!==null&&(Ye=Xt(me),me!==Ye||me.tag!==5&&me.tag!==6)&&(me=null)):(fe=null,me=te),fe!==me)){if(he=Uc,ue="onMouseLeave",J="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(he=Xc,ue="onPointerLeave",J="onPointerEnter",Q="pointer"),Ye=fe==null?se:Vr(fe),ee=me==null?se:Vr(me),se=new he(ue,Q+"leave",fe,s,ie),se.target=Ye,se.relatedTarget=ee,ue=null,tr(ie)===te&&(he=new he(J,Q+"enter",me,s,ie),he.target=ee,he.relatedTarget=Ye,ue=he),Ye=ue,fe&&me)t:{for(he=fe,J=me,Q=0,ee=he;ee;ee=Fr(ee))Q++;for(ee=0,ue=J;ue;ue=Fr(ue))ee++;for(;0<Q-ee;)he=Fr(he),Q--;for(;0<ee-Q;)J=Fr(J),ee--;for(;Q--;){if(he===J||J!==null&&he===J.alternate)break t;he=Fr(he),J=Fr(J)}he=null}else he=null;fe!==null&&wd(le,se,fe,he,!1),me!==null&&Ye!==null&&wd(le,Ye,me,he,!0)}}e:{if(se=te?Vr(te):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var xe=Zg;else if(Jc(se))if(td)xe=nx;else{xe=ex;var Ne=Jg}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(xe=tx);if(xe&&(xe=xe(e,te))){ed(le,xe,s,ie);break e}Ne&&Ne(e,se,te),e==="focusout"&&(Ne=se._wrapperState)&&Ne.controlled&&se.type==="number"&&gt(se,"number",se.value)}switch(Ne=te?Vr(te):window,e){case"focusin":(Jc(Ne)||Ne.contentEditable==="true")&&(Lr=Ne,ya=te,Vo=null);break;case"focusout":Vo=ya=Lr=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ud(le,s,ie);break;case"selectionchange":if(sx)break;case"keydown":case"keyup":ud(le,s,ie)}var ke;if(ma)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else zr?qc(e,s)&&(Ie="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ie="onCompositionStart");Ie&&(Qc&&s.locale!=="ko"&&(zr||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&zr&&(ke=Bc()):(jn=ie,aa="value"in jn?jn.value:jn.textContent,zr=!0)),Ne=ui(te,Ie),0<Ne.length&&(Ie=new Yc(Ie,e,null,s,ie),le.push({event:Ie,listeners:Ne}),ke?Ie.data=ke:(ke=Zc(s),ke!==null&&(Ie.data=ke)))),(ke=Xg?Qg(e,s):Gg(e,s))&&(te=ui(te,"onBeforeInput"),0<te.length&&(ie=new Yc("onBeforeInput","beforeinput",null,s,ie),le.push({event:ie,listeners:te}),ie.data=ke))}yd(le,n)})}function Uo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ui(e,n){for(var s=n+"Capture",a=[];e!==null;){var f=e,v=f.stateNode;f.tag===5&&v!==null&&(f=v,v=Kn(e,s),v!=null&&a.unshift(Uo(e,v,f)),v=Kn(e,n),v!=null&&a.push(Uo(e,v,f))),e=e.return}return a}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wd(e,n,s,a,f){for(var v=n._reactName,E=[];s!==null&&s!==a;){var H=s,Y=H.alternate,te=H.stateNode;if(Y!==null&&Y===a)break;H.tag===5&&te!==null&&(H=te,f?(Y=Kn(s,v),Y!=null&&E.unshift(Uo(s,Y,H))):f||(Y=Kn(s,v),Y!=null&&E.push(Uo(s,Y,H)))),s=s.return}E.length!==0&&e.push({event:n,listeners:E})}var ux=/\r\n?/g,cx=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(ux,`
`).replace(cx,"")}function ci(e,n,s){if(n=Sd(n),Sd(e)!==n&&s)throw Error(o(425))}function di(){}var Ia=null,Ea=null;function _a(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ja=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,Nd=typeof Promise=="function"?Promise:void 0,fx=typeof queueMicrotask=="function"?queueMicrotask:typeof Nd<"u"?function(e){return Nd.resolve(null).then(e).catch(px)}:ja;function px(e){setTimeout(function(){throw e})}function Ma(e,n){var s=n,a=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(a===0){e.removeChild(f),Ao(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=f}while(s);Ao(n)}function bn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function kd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Hr,Yo="__reactProps$"+Hr,un="__reactContainer$"+Hr,ba="__reactEvents$"+Hr,mx="__reactListeners$"+Hr,hx="__reactHandles$"+Hr;function tr(e){var n=e[Gt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[un]||s[Gt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=kd(e);e!==null;){if(s=e[Gt])return s;e=kd(e)}return n}e=s,s=e.parentNode}return null}function Xo(e){return e=e[Gt]||e[un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function fi(e){return e[Yo]||null}var Pa=[],Br=-1;function Pn(e){return{current:e}}function ze(e){0>Br||(e.current=Pa[Br],Pa[Br]=null,Br--)}function Oe(e,n){Br++,Pa[Br]=e.current,e.current=n}var Dn={},rt=Pn(Dn),ut=Pn(!1),nr=Dn;function Wr(e,n){var s=e.type.contextTypes;if(!s)return Dn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var f={},v;for(v in s)f[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=f),f}function ct(e){return e=e.childContextTypes,e!=null}function pi(){ze(ut),ze(rt)}function Cd(e,n,s){if(rt.current!==Dn)throw Error(o(168));Oe(rt,n),Oe(ut,s)}function Id(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var f in a)if(!(f in n))throw Error(o(108,ae(e)||"Unknown",f));return C({},s,a)}function mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dn,nr=rt.current,Oe(rt,e),Oe(ut,ut.current),!0}function Ed(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=Id(e,n,nr),a.__reactInternalMemoizedMergedChildContext=e,ze(ut),ze(rt),Oe(rt,e)):ze(ut),Oe(ut,s)}var cn=null,hi=!1,Da=!1;function _d(e){cn===null?cn=[e]:cn.push(e)}function gx(e){hi=!0,_d(e)}function Tn(){if(!Da&&cn!==null){Da=!0;var e=0,n=De;try{var s=cn;for(De=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}cn=null,hi=!1}catch(f){throw cn!==null&&(cn=cn.slice(e+1)),Ws(jo,Tn),f}finally{De=n,Da=!1}}return null}var Ur=[],Yr=0,gi=null,xi=0,jt=[],Mt=0,rr=null,dn=1,fn="";function or(e,n){Ur[Yr++]=xi,Ur[Yr++]=gi,gi=e,xi=n}function jd(e,n,s){jt[Mt++]=dn,jt[Mt++]=fn,jt[Mt++]=rr,rr=e;var a=dn;e=fn;var f=32-yt(a)-1;a&=~(1<<f),s+=1;var v=32-yt(n)+f;if(30<v){var E=f-f%5;v=(a&(1<<E)-1).toString(32),a>>=E,f-=E,dn=1<<32-yt(n)+f|s<<f|a,fn=v+e}else dn=1<<v|s<<f|a,fn=e}function Ta(e){e.return!==null&&(or(e,1),jd(e,1,0))}function Oa(e){for(;e===gi;)gi=Ur[--Yr],Ur[Yr]=null,xi=Ur[--Yr],Ur[Yr]=null;for(;e===rr;)rr=jt[--Mt],jt[Mt]=null,fn=jt[--Mt],jt[Mt]=null,dn=jt[--Mt],jt[Mt]=null}var wt=null,St=null,Le=!1,$t=null;function Md(e,n){var s=Tt(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function bd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,wt=e,St=bn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,wt=e,St=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=rr!==null?{id:dn,overflow:fn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Tt(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,wt=e,St=null,!0):!1;default:return!1}}function Aa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $a(e){if(Le){var n=St;if(n){var s=n;if(!bd(e,n)){if(Aa(e))throw Error(o(418));n=bn(s.nextSibling);var a=wt;n&&bd(e,n)?Md(a,s):(e.flags=e.flags&-4097|2,Le=!1,wt=e)}}else{if(Aa(e))throw Error(o(418));e.flags=e.flags&-4097|2,Le=!1,wt=e}}}function Pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function yi(e){if(e!==wt)return!1;if(!Le)return Pd(e),Le=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!_a(e.type,e.memoizedProps)),n&&(n=St)){if(Aa(e))throw Dd(),Error(o(418));for(;n;)Md(e,n),n=bn(n.nextSibling)}if(Pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){St=bn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}St=null}}else St=wt?bn(e.stateNode.nextSibling):null;return!0}function Dd(){for(var e=St;e;)e=bn(e.nextSibling)}function Xr(){St=wt=null,Le=!1}function za(e){$t===null?$t=[e]:$t.push(e)}var xx=j.ReactCurrentBatchConfig;function Qo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var f=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(E){var H=f.refs;E===null?delete H[v]:H[v]=E},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function vi(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Td(e){var n=e._init;return n(e._payload)}function Od(e){function n(J,Q){if(e){var ee=J.deletions;ee===null?(J.deletions=[Q],J.flags|=16):ee.push(Q)}}function s(J,Q){if(!e)return null;for(;Q!==null;)n(J,Q),Q=Q.sibling;return null}function a(J,Q){for(J=new Map;Q!==null;)Q.key!==null?J.set(Q.key,Q):J.set(Q.index,Q),Q=Q.sibling;return J}function f(J,Q){return J=Hn(J,Q),J.index=0,J.sibling=null,J}function v(J,Q,ee){return J.index=ee,e?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Q?(J.flags|=2,Q):ee):(J.flags|=2,Q)):(J.flags|=1048576,Q)}function E(J){return e&&J.alternate===null&&(J.flags|=2),J}function H(J,Q,ee,ue){return Q===null||Q.tag!==6?(Q=ju(ee,J.mode,ue),Q.return=J,Q):(Q=f(Q,ee),Q.return=J,Q)}function Y(J,Q,ee,ue){var xe=ee.type;return xe===B?ie(J,Q,ee.props.children,ue,ee.key):Q!==null&&(Q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===z&&Td(xe)===Q.type)?(ue=f(Q,ee.props),ue.ref=Qo(J,Q,ee),ue.return=J,ue):(ue=Bi(ee.type,ee.key,ee.props,null,J.mode,ue),ue.ref=Qo(J,Q,ee),ue.return=J,ue)}function te(J,Q,ee,ue){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ee.containerInfo||Q.stateNode.implementation!==ee.implementation?(Q=Mu(ee,J.mode,ue),Q.return=J,Q):(Q=f(Q,ee.children||[]),Q.return=J,Q)}function ie(J,Q,ee,ue,xe){return Q===null||Q.tag!==7?(Q=fr(ee,J.mode,ue,xe),Q.return=J,Q):(Q=f(Q,ee),Q.return=J,Q)}function le(J,Q,ee){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=ju(""+Q,J.mode,ee),Q.return=J,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case V:return ee=Bi(Q.type,Q.key,Q.props,null,J.mode,ee),ee.ref=Qo(J,null,Q),ee.return=J,ee;case F:return Q=Mu(Q,J.mode,ee),Q.return=J,Q;case z:var ue=Q._init;return le(J,ue(Q._payload),ee)}if(xt(Q)||T(Q))return Q=fr(Q,J.mode,ee,null),Q.return=J,Q;vi(J,Q)}return null}function se(J,Q,ee,ue){var xe=Q!==null?Q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return xe!==null?null:H(J,Q,""+ee,ue);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case V:return ee.key===xe?Y(J,Q,ee,ue):null;case F:return ee.key===xe?te(J,Q,ee,ue):null;case z:return xe=ee._init,se(J,Q,xe(ee._payload),ue)}if(xt(ee)||T(ee))return xe!==null?null:ie(J,Q,ee,ue,null);vi(J,ee)}return null}function fe(J,Q,ee,ue,xe){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return J=J.get(ee)||null,H(Q,J,""+ue,xe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case V:return J=J.get(ue.key===null?ee:ue.key)||null,Y(Q,J,ue,xe);case F:return J=J.get(ue.key===null?ee:ue.key)||null,te(Q,J,ue,xe);case z:var Ne=ue._init;return fe(J,Q,ee,Ne(ue._payload),xe)}if(xt(ue)||T(ue))return J=J.get(ee)||null,ie(Q,J,ue,xe,null);vi(Q,ue)}return null}function me(J,Q,ee,ue){for(var xe=null,Ne=null,ke=Q,Ie=Q=0,et=null;ke!==null&&Ie<ee.length;Ie++){ke.index>Ie?(et=ke,ke=null):et=ke.sibling;var Pe=se(J,ke,ee[Ie],ue);if(Pe===null){ke===null&&(ke=et);break}e&&ke&&Pe.alternate===null&&n(J,ke),Q=v(Pe,Q,Ie),Ne===null?xe=Pe:Ne.sibling=Pe,Ne=Pe,ke=et}if(Ie===ee.length)return s(J,ke),Le&&or(J,Ie),xe;if(ke===null){for(;Ie<ee.length;Ie++)ke=le(J,ee[Ie],ue),ke!==null&&(Q=v(ke,Q,Ie),Ne===null?xe=ke:Ne.sibling=ke,Ne=ke);return Le&&or(J,Ie),xe}for(ke=a(J,ke);Ie<ee.length;Ie++)et=fe(ke,J,Ie,ee[Ie],ue),et!==null&&(e&&et.alternate!==null&&ke.delete(et.key===null?Ie:et.key),Q=v(et,Q,Ie),Ne===null?xe=et:Ne.sibling=et,Ne=et);return e&&ke.forEach(function(Vn){return n(J,Vn)}),Le&&or(J,Ie),xe}function he(J,Q,ee,ue){var xe=T(ee);if(typeof xe!="function")throw Error(o(150));if(ee=xe.call(ee),ee==null)throw Error(o(151));for(var Ne=xe=null,ke=Q,Ie=Q=0,et=null,Pe=ee.next();ke!==null&&!Pe.done;Ie++,Pe=ee.next()){ke.index>Ie?(et=ke,ke=null):et=ke.sibling;var Vn=se(J,ke,Pe.value,ue);if(Vn===null){ke===null&&(ke=et);break}e&&ke&&Vn.alternate===null&&n(J,ke),Q=v(Vn,Q,Ie),Ne===null?xe=Vn:Ne.sibling=Vn,Ne=Vn,ke=et}if(Pe.done)return s(J,ke),Le&&or(J,Ie),xe;if(ke===null){for(;!Pe.done;Ie++,Pe=ee.next())Pe=le(J,Pe.value,ue),Pe!==null&&(Q=v(Pe,Q,Ie),Ne===null?xe=Pe:Ne.sibling=Pe,Ne=Pe);return Le&&or(J,Ie),xe}for(ke=a(J,ke);!Pe.done;Ie++,Pe=ee.next())Pe=fe(ke,J,Ie,Pe.value,ue),Pe!==null&&(e&&Pe.alternate!==null&&ke.delete(Pe.key===null?Ie:Pe.key),Q=v(Pe,Q,Ie),Ne===null?xe=Pe:Ne.sibling=Pe,Ne=Pe);return e&&ke.forEach(function(Kx){return n(J,Kx)}),Le&&or(J,Ie),xe}function Ye(J,Q,ee,ue){if(typeof ee=="object"&&ee!==null&&ee.type===B&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case V:e:{for(var xe=ee.key,Ne=Q;Ne!==null;){if(Ne.key===xe){if(xe=ee.type,xe===B){if(Ne.tag===7){s(J,Ne.sibling),Q=f(Ne,ee.props.children),Q.return=J,J=Q;break e}}else if(Ne.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===z&&Td(xe)===Ne.type){s(J,Ne.sibling),Q=f(Ne,ee.props),Q.ref=Qo(J,Ne,ee),Q.return=J,J=Q;break e}s(J,Ne);break}else n(J,Ne);Ne=Ne.sibling}ee.type===B?(Q=fr(ee.props.children,J.mode,ue,ee.key),Q.return=J,J=Q):(ue=Bi(ee.type,ee.key,ee.props,null,J.mode,ue),ue.ref=Qo(J,Q,ee),ue.return=J,J=ue)}return E(J);case F:e:{for(Ne=ee.key;Q!==null;){if(Q.key===Ne)if(Q.tag===4&&Q.stateNode.containerInfo===ee.containerInfo&&Q.stateNode.implementation===ee.implementation){s(J,Q.sibling),Q=f(Q,ee.children||[]),Q.return=J,J=Q;break e}else{s(J,Q);break}else n(J,Q);Q=Q.sibling}Q=Mu(ee,J.mode,ue),Q.return=J,J=Q}return E(J);case z:return Ne=ee._init,Ye(J,Q,Ne(ee._payload),ue)}if(xt(ee))return me(J,Q,ee,ue);if(T(ee))return he(J,Q,ee,ue);vi(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Q!==null&&Q.tag===6?(s(J,Q.sibling),Q=f(Q,ee),Q.return=J,J=Q):(s(J,Q),Q=ju(ee,J.mode,ue),Q.return=J,J=Q),E(J)):s(J,Q)}return Ye}var Qr=Od(!0),Ad=Od(!1),wi=Pn(null),Si=null,Gr=null,La=null;function Ra(){La=Gr=Si=null}function Fa(e){var n=wi.current;ze(wi),e._currentValue=n}function Ha(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function Kr(e,n){Si=e,La=Gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(dt=!0),e.firstContext=null)}function bt(e){var n=e._currentValue;if(La!==e)if(e={context:e,memoizedValue:n,next:null},Gr===null){if(Si===null)throw Error(o(308));Gr=e,Si.dependencies={lanes:0,firstContext:e}}else Gr=Gr.next=e;return n}var sr=null;function Va(e){sr===null?sr=[e]:sr.push(e)}function $d(e,n,s,a){var f=n.interleaved;return f===null?(s.next=s,Va(n)):(s.next=f.next,f.next=s),n.interleaved=s,pn(e,a)}function pn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var On=!1;function Ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function An(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(be&2)!==0){var f=a.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),a.pending=n,pn(e,s)}return f=a.interleaved,f===null?(n.next=n,Va(a)):(n.next=f.next,f.next=n),a.interleaved=n,pn(e,s)}function Ni(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,ra(e,s)}}function Ld(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var f=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?f=v=E:v=v.next=E,s=s.next}while(s!==null);v===null?f=v=n:v=v.next=n}else f=v=n;s={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function ki(e,n,s,a){var f=e.updateQueue;On=!1;var v=f.firstBaseUpdate,E=f.lastBaseUpdate,H=f.shared.pending;if(H!==null){f.shared.pending=null;var Y=H,te=Y.next;Y.next=null,E===null?v=te:E.next=te,E=Y;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,H=ie.lastBaseUpdate,H!==E&&(H===null?ie.firstBaseUpdate=te:H.next=te,ie.lastBaseUpdate=Y))}if(v!==null){var le=f.baseState;E=0,ie=te=Y=null,H=v;do{var se=H.lane,fe=H.eventTime;if((a&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var me=e,he=H;switch(se=n,fe=s,he.tag){case 1:if(me=he.payload,typeof me=="function"){le=me.call(fe,le,se);break e}le=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=he.payload,se=typeof me=="function"?me.call(fe,le,se):me,se==null)break e;le=C({},le,se);break e;case 2:On=!0}}H.callback!==null&&H.lane!==0&&(e.flags|=64,se=f.effects,se===null?f.effects=[H]:se.push(H))}else fe={eventTime:fe,lane:se,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ie===null?(te=ie=fe,Y=le):ie=ie.next=fe,E|=se;if(H=H.next,H===null){if(H=f.shared.pending,H===null)break;se=H,H=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(ie===null&&(Y=le),f.baseState=Y,f.firstBaseUpdate=te,f.lastBaseUpdate=ie,n=f.shared.interleaved,n!==null){f=n;do E|=f.lane,f=f.next;while(f!==n)}else v===null&&(f.shared.lanes=0);ar|=E,e.lanes=E,e.memoizedState=le}}function Rd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],f=a.callback;if(f!==null){if(a.callback=null,a=s,typeof f!="function")throw Error(o(191,f));f.call(a)}}}var Go={},Kt=Pn(Go),Ko=Pn(Go),qo=Pn(Go);function ir(e){if(e===Go)throw Error(o(174));return e}function Wa(e,n){switch(Oe(qo,n),Oe(Ko,e),Oe(Kt,Go),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ln(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=ln(n,e)}ze(Kt),Oe(Kt,n)}function qr(){ze(Kt),ze(Ko),ze(qo)}function Fd(e){ir(qo.current);var n=ir(Kt.current),s=ln(n,e.type);n!==s&&(Oe(Ko,e),Oe(Kt,s))}function Ua(e){Ko.current===e&&(ze(Kt),ze(Ko))}var Ve=Pn(0);function Ci(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ya=[];function Xa(){for(var e=0;e<Ya.length;e++)Ya[e]._workInProgressVersionPrimary=null;Ya.length=0}var Ii=j.ReactCurrentDispatcher,Qa=j.ReactCurrentBatchConfig,lr=0,Be=null,Ke=null,Ze=null,Ei=!1,Zo=!1,Jo=0,yx=0;function ot(){throw Error(o(321))}function Ga(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!At(e[s],n[s]))return!1;return!0}function Ka(e,n,s,a,f,v){if(lr=v,Be=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ii.current=e===null||e.memoizedState===null?Nx:kx,e=s(a,f),Zo){v=0;do{if(Zo=!1,Jo=0,25<=v)throw Error(o(301));v+=1,Ze=Ke=null,n.updateQueue=null,Ii.current=Cx,e=s(a,f)}while(Zo)}if(Ii.current=Mi,n=Ke!==null&&Ke.next!==null,lr=0,Ze=Ke=Be=null,Ei=!1,n)throw Error(o(300));return e}function qa(){var e=Jo!==0;return Jo=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Be.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Pt(){if(Ke===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var n=Ze===null?Be.memoizedState:Ze.next;if(n!==null)Ze=n,Ke=e;else{if(e===null)throw Error(o(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Be.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function es(e,n){return typeof n=="function"?n(e):n}function Za(e){var n=Pt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Ke,f=a.baseQueue,v=s.pending;if(v!==null){if(f!==null){var E=f.next;f.next=v.next,v.next=E}a.baseQueue=f=v,s.pending=null}if(f!==null){v=f.next,a=a.baseState;var H=E=null,Y=null,te=v;do{var ie=te.lane;if((lr&ie)===ie)Y!==null&&(Y=Y.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),a=te.hasEagerState?te.eagerState:e(a,te.action);else{var le={lane:ie,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};Y===null?(H=Y=le,E=a):Y=Y.next=le,Be.lanes|=ie,ar|=ie}te=te.next}while(te!==null&&te!==v);Y===null?E=a:Y.next=H,At(a,n.memoizedState)||(dt=!0),n.memoizedState=a,n.baseState=E,n.baseQueue=Y,s.lastRenderedState=a}if(e=s.interleaved,e!==null){f=e;do v=f.lane,Be.lanes|=v,ar|=v,f=f.next;while(f!==e)}else f===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Ja(e){var n=Pt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,f=s.pending,v=n.memoizedState;if(f!==null){s.pending=null;var E=f=f.next;do v=e(v,E.action),E=E.next;while(E!==f);At(v,n.memoizedState)||(dt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function Hd(){}function Vd(e,n){var s=Be,a=Pt(),f=n(),v=!At(a.memoizedState,f);if(v&&(a.memoizedState=f,dt=!0),a=a.queue,eu(Ud.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||Ze!==null&&Ze.memoizedState.tag&1){if(s.flags|=2048,ts(9,Wd.bind(null,s,a,f,n),void 0,null),Je===null)throw Error(o(349));(lr&30)!==0||Bd(s,n,f)}return f}function Bd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Wd(e,n,s,a){n.value=s,n.getSnapshot=a,Yd(n)&&Xd(e)}function Ud(e,n,s){return s(function(){Yd(n)&&Xd(e)})}function Yd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!At(e,s)}catch{return!0}}function Xd(e){var n=pn(e,1);n!==null&&Ft(n,e,1,-1)}function Qd(e){var n=qt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},n.queue=e,e=e.dispatch=Sx.bind(null,Be,e),[n.memoizedState,e]}function ts(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function Gd(){return Pt().memoizedState}function _i(e,n,s,a){var f=qt();Be.flags|=e,f.memoizedState=ts(1|n,s,void 0,a===void 0?null:a)}function ji(e,n,s,a){var f=Pt();a=a===void 0?null:a;var v=void 0;if(Ke!==null){var E=Ke.memoizedState;if(v=E.destroy,a!==null&&Ga(a,E.deps)){f.memoizedState=ts(n,s,v,a);return}}Be.flags|=e,f.memoizedState=ts(1|n,s,v,a)}function Kd(e,n){return _i(8390656,8,e,n)}function eu(e,n){return ji(2048,8,e,n)}function qd(e,n){return ji(4,2,e,n)}function Zd(e,n){return ji(4,4,e,n)}function Jd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ef(e,n,s){return s=s!=null?s.concat([e]):null,ji(4,4,Jd.bind(null,n,e),s)}function tu(){}function tf(e,n){var s=Pt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ga(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function nf(e,n){var s=Pt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ga(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function rf(e,n,s){return(lr&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s):(At(s,n)||(s=Or(),Be.lanes|=s,ar|=s,e.baseState=!0),n)}function vx(e,n){var s=De;De=s!==0&&4>s?s:4,e(!0);var a=Qa.transition;Qa.transition={};try{e(!1),n()}finally{De=s,Qa.transition=a}}function of(){return Pt().memoizedState}function wx(e,n,s){var a=Rn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},sf(e))lf(n,s);else if(s=$d(e,n,s,a),s!==null){var f=at();Ft(s,e,a,f),af(s,n,a)}}function Sx(e,n,s){var a=Rn(e),f={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(sf(e))lf(n,f);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var E=n.lastRenderedState,H=v(E,s);if(f.hasEagerState=!0,f.eagerState=H,At(H,E)){var Y=n.interleaved;Y===null?(f.next=f,Va(n)):(f.next=Y.next,Y.next=f),n.interleaved=f;return}}catch{}finally{}s=$d(e,n,f,a),s!==null&&(f=at(),Ft(s,e,a,f),af(s,n,a))}}function sf(e){var n=e.alternate;return e===Be||n!==null&&n===Be}function lf(e,n){Zo=Ei=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function af(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,ra(e,s)}}var Mi={readContext:bt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Nx={readContext:bt,useCallback:function(e,n){return qt().memoizedState=[e,n===void 0?null:n],e},useContext:bt,useEffect:Kd,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,_i(4194308,4,Jd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return _i(4194308,4,e,n)},useInsertionEffect:function(e,n){return _i(4,2,e,n)},useMemo:function(e,n){var s=qt();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=qt();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=wx.bind(null,Be,e),[a.memoizedState,e]},useRef:function(e){var n=qt();return e={current:e},n.memoizedState=e},useState:Qd,useDebugValue:tu,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Qd(!1),n=e[0];return e=vx.bind(null,e[1]),qt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Be,f=qt();if(Le){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Je===null)throw Error(o(349));(lr&30)!==0||Bd(a,n,s)}f.memoizedState=s;var v={value:s,getSnapshot:n};return f.queue=v,Kd(Ud.bind(null,a,v,e),[e]),a.flags|=2048,ts(9,Wd.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=qt(),n=Je.identifierPrefix;if(Le){var s=fn,a=dn;s=(a&~(1<<32-yt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=Jo++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=yx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},kx={readContext:bt,useCallback:tf,useContext:bt,useEffect:eu,useImperativeHandle:ef,useInsertionEffect:qd,useLayoutEffect:Zd,useMemo:nf,useReducer:Za,useRef:Gd,useState:function(){return Za(es)},useDebugValue:tu,useDeferredValue:function(e){var n=Pt();return rf(n,Ke.memoizedState,e)},useTransition:function(){var e=Za(es)[0],n=Pt().memoizedState;return[e,n]},useMutableSource:Hd,useSyncExternalStore:Vd,useId:of,unstable_isNewReconciler:!1},Cx={readContext:bt,useCallback:tf,useContext:bt,useEffect:eu,useImperativeHandle:ef,useInsertionEffect:qd,useLayoutEffect:Zd,useMemo:nf,useReducer:Ja,useRef:Gd,useState:function(){return Ja(es)},useDebugValue:tu,useDeferredValue:function(e){var n=Pt();return Ke===null?n.memoizedState=e:rf(n,Ke.memoizedState,e)},useTransition:function(){var e=Ja(es)[0],n=Pt().memoizedState;return[e,n]},useMutableSource:Hd,useSyncExternalStore:Vd,useId:of,unstable_isNewReconciler:!1};function zt(e,n){if(e&&e.defaultProps){n=C({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function nu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:C({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var bi={isMounted:function(e){return(e=e._reactInternals)?Xt(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=at(),f=Rn(e),v=mn(a,f);v.payload=n,s!=null&&(v.callback=s),n=An(e,v,f),n!==null&&(Ft(n,e,f,a),Ni(n,e,f))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=at(),f=Rn(e),v=mn(a,f);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=An(e,v,f),n!==null&&(Ft(n,e,f,a),Ni(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=at(),a=Rn(e),f=mn(s,a);f.tag=2,n!=null&&(f.callback=n),n=An(e,f,a),n!==null&&(Ft(n,e,a,s),Ni(n,e,a))}};function uf(e,n,s,a,f,v,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,E):n.prototype&&n.prototype.isPureReactComponent?!Ho(s,a)||!Ho(f,v):!0}function cf(e,n,s){var a=!1,f=Dn,v=n.contextType;return typeof v=="object"&&v!==null?v=bt(v):(f=ct(n)?nr:rt.current,a=n.contextTypes,v=(a=a!=null)?Wr(e,f):Dn),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=bi,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=v),n}function df(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&bi.enqueueReplaceState(n,n.state,null)}function ru(e,n,s,a){var f=e.stateNode;f.props=s,f.state=e.memoizedState,f.refs={},Ba(e);var v=n.contextType;typeof v=="object"&&v!==null?f.context=bt(v):(v=ct(n)?nr:rt.current,f.context=Wr(e,v)),f.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(nu(e,n,v,s),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&bi.enqueueReplaceState(f,f.state,null),ki(e,s,f,a),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Zr(e,n){try{var s="",a=n;do s+=ne(a),a=a.return;while(a);var f=s}catch(v){f=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:f,digest:null}}function ou(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function su(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Ix=typeof WeakMap=="function"?WeakMap:Map;function ff(e,n,s){s=mn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){zi||(zi=!0,wu=a),su(e,n)},s}function pf(e,n,s){s=mn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var f=n.value;s.payload=function(){return a(f)},s.callback=function(){su(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){su(e,n),typeof a!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var E=n.stack;this.componentDidCatch(n.value,{componentStack:E!==null?E:""})}),s}function mf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Ix;var f=new Set;a.set(n,f)}else f=a.get(n),f===void 0&&(f=new Set,a.set(n,f));f.has(s)||(f.add(s),e=Rx.bind(null,e,n,s),n.then(e,e))}function hf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function gf(e,n,s,a,f){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=mn(-1,1),n.tag=2,An(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var Ex=j.ReactCurrentOwner,dt=!1;function lt(e,n,s,a){n.child=e===null?Ad(n,null,s,a):Qr(n,e.child,s,a)}function xf(e,n,s,a,f){s=s.render;var v=n.ref;return Kr(n,f),a=Ka(e,n,s,a,v,f),s=qa(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,hn(e,n,f)):(Le&&s&&Ta(n),n.flags|=1,lt(e,n,a,f),n.child)}function yf(e,n,s,a,f){if(e===null){var v=s.type;return typeof v=="function"&&!_u(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,vf(e,n,v,a,f)):(e=Bi(s.type,null,a,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&f)===0){var E=v.memoizedProps;if(s=s.compare,s=s!==null?s:Ho,s(E,a)&&e.ref===n.ref)return hn(e,n,f)}return n.flags|=1,e=Hn(v,a),e.ref=n.ref,e.return=n,n.child=e}function vf(e,n,s,a,f){if(e!==null){var v=e.memoizedProps;if(Ho(v,a)&&e.ref===n.ref)if(dt=!1,n.pendingProps=a=v,(e.lanes&f)!==0)(e.flags&131072)!==0&&(dt=!0);else return n.lanes=e.lanes,hn(e,n,f)}return iu(e,n,s,a,f)}function wf(e,n,s){var a=n.pendingProps,f=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(eo,Nt),Nt|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Oe(eo,Nt),Nt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Oe(eo,Nt),Nt|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Oe(eo,Nt),Nt|=a;return lt(e,n,f,s),n.child}function Sf(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function iu(e,n,s,a,f){var v=ct(s)?nr:rt.current;return v=Wr(n,v),Kr(n,f),s=Ka(e,n,s,a,v,f),a=qa(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,hn(e,n,f)):(Le&&a&&Ta(n),n.flags|=1,lt(e,n,s,f),n.child)}function Nf(e,n,s,a,f){if(ct(s)){var v=!0;mi(n)}else v=!1;if(Kr(n,f),n.stateNode===null)Di(e,n),cf(n,s,a),ru(n,s,a,f),a=!0;else if(e===null){var E=n.stateNode,H=n.memoizedProps;E.props=H;var Y=E.context,te=s.contextType;typeof te=="object"&&te!==null?te=bt(te):(te=ct(s)?nr:rt.current,te=Wr(n,te));var ie=s.getDerivedStateFromProps,le=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function";le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H!==a||Y!==te)&&df(n,E,a,te),On=!1;var se=n.memoizedState;E.state=se,ki(n,a,E,f),Y=n.memoizedState,H!==a||se!==Y||ut.current||On?(typeof ie=="function"&&(nu(n,s,ie,a),Y=n.memoizedState),(H=On||uf(n,s,H,a,se,Y,te))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(n.flags|=4194308)):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=Y),E.props=a,E.state=Y,E.context=te,a=H):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{E=n.stateNode,zd(e,n),H=n.memoizedProps,te=n.type===n.elementType?H:zt(n.type,H),E.props=te,le=n.pendingProps,se=E.context,Y=s.contextType,typeof Y=="object"&&Y!==null?Y=bt(Y):(Y=ct(s)?nr:rt.current,Y=Wr(n,Y));var fe=s.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H!==le||se!==Y)&&df(n,E,a,Y),On=!1,se=n.memoizedState,E.state=se,ki(n,a,E,f);var me=n.memoizedState;H!==le||se!==me||ut.current||On?(typeof fe=="function"&&(nu(n,s,fe,a),me=n.memoizedState),(te=On||uf(n,s,te,a,se,me,Y)||!1)?(ie||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(a,me,Y),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(a,me,Y)),typeof E.componentDidUpdate=="function"&&(n.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof E.componentDidUpdate!="function"||H===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||H===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=me),E.props=a,E.state=me,E.context=Y,a=te):(typeof E.componentDidUpdate!="function"||H===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||H===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),a=!1)}return lu(e,n,s,a,v,f)}function lu(e,n,s,a,f,v){Sf(e,n);var E=(n.flags&128)!==0;if(!a&&!E)return f&&Ed(n,s,!1),hn(e,n,v);a=n.stateNode,Ex.current=n;var H=E&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&E?(n.child=Qr(n,e.child,null,v),n.child=Qr(n,null,H,v)):lt(e,n,H,v),n.memoizedState=a.state,f&&Ed(n,s,!0),n.child}function kf(e){var n=e.stateNode;n.pendingContext?Cd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Cd(e,n.context,!1),Wa(e,n.containerInfo)}function Cf(e,n,s,a,f){return Xr(),za(f),n.flags|=256,lt(e,n,s,a),n.child}var au={dehydrated:null,treeContext:null,retryLane:0};function uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function If(e,n,s){var a=n.pendingProps,f=Ve.current,v=!1,E=(n.flags&128)!==0,H;if((H=E)||(H=e!==null&&e.memoizedState===null?!1:(f&2)!==0),H?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Oe(Ve,f&1),e===null)return $a(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(E=a.children,e=a.fallback,v?(a=n.mode,v=n.child,E={mode:"hidden",children:E},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=Wi(E,a,0,null),e=fr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=uu(s),n.memoizedState=au,e):cu(n,E));if(f=e.memoizedState,f!==null&&(H=f.dehydrated,H!==null))return _x(e,n,E,a,H,f,s);if(v){v=a.fallback,E=n.mode,f=e.child,H=f.sibling;var Y={mode:"hidden",children:a.children};return(E&1)===0&&n.child!==f?(a=n.child,a.childLanes=0,a.pendingProps=Y,n.deletions=null):(a=Hn(f,Y),a.subtreeFlags=f.subtreeFlags&14680064),H!==null?v=Hn(H,v):(v=fr(v,E,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,E=e.child.memoizedState,E=E===null?uu(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=e.childLanes&~s,n.memoizedState=au,a}return v=e.child,e=v.sibling,a=Hn(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function cu(e,n){return n=Wi({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Pi(e,n,s,a){return a!==null&&za(a),Qr(n,e.child,null,s),e=cu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function _x(e,n,s,a,f,v,E){if(s)return n.flags&256?(n.flags&=-257,a=ou(Error(o(422))),Pi(e,n,E,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,f=n.mode,a=Wi({mode:"visible",children:a.children},f,0,null),v=fr(v,f,E,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&Qr(n,e.child,null,E),n.child.memoizedState=uu(E),n.memoizedState=au,v);if((n.mode&1)===0)return Pi(e,n,E,null);if(f.data==="$!"){if(a=f.nextSibling&&f.nextSibling.dataset,a)var H=a.dgst;return a=H,v=Error(o(419)),a=ou(v,a,void 0),Pi(e,n,E,a)}if(H=(E&e.childLanes)!==0,dt||H){if(a=Je,a!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(a.suspendedLanes|E))!==0?0:f,f!==0&&f!==v.retryLane&&(v.retryLane=f,pn(e,f),Ft(a,e,f,-1))}return Eu(),a=ou(Error(o(421))),Pi(e,n,E,a)}return f.data==="$?"?(n.flags|=128,n.child=e.child,n=Fx.bind(null,e),f._reactRetry=n,null):(e=v.treeContext,St=bn(f.nextSibling),wt=n,Le=!0,$t=null,e!==null&&(jt[Mt++]=dn,jt[Mt++]=fn,jt[Mt++]=rr,dn=e.id,fn=e.overflow,rr=n),n=cu(n,a.children),n.flags|=4096,n)}function Ef(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Ha(e.return,n,s)}function du(e,n,s,a,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:f}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=f)}function _f(e,n,s){var a=n.pendingProps,f=a.revealOrder,v=a.tail;if(lt(e,n,a.children,s),a=Ve.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ef(e,s,n);else if(e.tag===19)Ef(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Oe(Ve,a),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&Ci(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),du(n,!1,f,s,v);break;case"backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Ci(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}du(n,!0,s,null,v);break;case"together":du(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Di(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function hn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ar|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Hn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Hn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function jx(e,n,s){switch(n.tag){case 3:kf(n),Xr();break;case 5:Fd(n);break;case 1:ct(n.type)&&mi(n);break;case 4:Wa(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,f=n.memoizedProps.value;Oe(wi,a._currentValue),a._currentValue=f;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Oe(Ve,Ve.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?If(e,n,s):(Oe(Ve,Ve.current&1),e=hn(e,n,s),e!==null?e.sibling:null);Oe(Ve,Ve.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return _f(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Oe(Ve,Ve.current),a)break;return null;case 22:case 23:return n.lanes=0,wf(e,n,s)}return hn(e,n,s)}var jf,fu,Mf,bf;jf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},fu=function(){},Mf=function(e,n,s,a){var f=e.memoizedProps;if(f!==a){e=n.stateNode,ir(Kt.current);var v=null;switch(s){case"input":f=_e(e,f),a=_e(e,a),v=[];break;case"select":f=C({},f,{value:void 0}),a=C({},a,{value:void 0}),v=[];break;case"textarea":f=on(e,f),a=on(e,a),v=[];break;default:typeof f.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=di)}yo(s,a);var E;s=null;for(te in f)if(!a.hasOwnProperty(te)&&f.hasOwnProperty(te)&&f[te]!=null)if(te==="style"){var H=f[te];for(E in H)H.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(l.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in a){var Y=a[te];if(H=f!=null?f[te]:void 0,a.hasOwnProperty(te)&&Y!==H&&(Y!=null||H!=null))if(te==="style")if(H){for(E in H)!H.hasOwnProperty(E)||Y&&Y.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in Y)Y.hasOwnProperty(E)&&H[E]!==Y[E]&&(s||(s={}),s[E]=Y[E])}else s||(v||(v=[]),v.push(te,s)),s=Y;else te==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,H=H?H.__html:void 0,Y!=null&&H!==Y&&(v=v||[]).push(te,Y)):te==="children"?typeof Y!="string"&&typeof Y!="number"||(v=v||[]).push(te,""+Y):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(l.hasOwnProperty(te)?(Y!=null&&te==="onScroll"&&$e("scroll",e),v||H===Y||(v=[])):(v=v||[]).push(te,Y))}s&&(v=v||[]).push("style",s);var te=v;(n.updateQueue=te)&&(n.flags|=4)}},bf=function(e,n,s,a){s!==a&&(n.flags|=4)};function ns(e,n){if(!Le)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags&14680064,a|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function Mx(e,n,s){var a=n.pendingProps;switch(Oa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(n),null;case 1:return ct(n.type)&&pi(),st(n),null;case 3:return a=n.stateNode,qr(),ze(ut),ze(rt),Xa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(yi(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,$t!==null&&(ku($t),$t=null))),fu(e,n),st(n),null;case 5:Ua(n);var f=ir(qo.current);if(s=n.type,e!==null&&n.stateNode!=null)Mf(e,n,s,a,f),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return st(n),null}if(e=ir(Kt.current),yi(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[Gt]=n,a[Yo]=v,e=(n.mode&1)!==0,s){case"dialog":$e("cancel",a),$e("close",a);break;case"iframe":case"object":case"embed":$e("load",a);break;case"video":case"audio":for(f=0;f<Bo.length;f++)$e(Bo[f],a);break;case"source":$e("error",a);break;case"img":case"image":case"link":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"input":Te(a,v),$e("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},$e("invalid",a);break;case"textarea":Sn(a,v),$e("invalid",a)}yo(s,v),f=null;for(var E in v)if(v.hasOwnProperty(E)){var H=v[E];E==="children"?typeof H=="string"?a.textContent!==H&&(v.suppressHydrationWarning!==!0&&ci(a.textContent,H,e),f=["children",H]):typeof H=="number"&&a.textContent!==""+H&&(v.suppressHydrationWarning!==!0&&ci(a.textContent,H,e),f=["children",""+H]):l.hasOwnProperty(E)&&H!=null&&E==="onScroll"&&$e("scroll",a)}switch(s){case"input":Se(a),Ot(a,v,!0);break;case"textarea":Se(a),Xn(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=di)}a=f,n.updateQueue=a,a!==null&&(n.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sn(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=E.createElement(s,{is:a.is}):(e=E.createElement(s),s==="select"&&(E=e,a.multiple?E.multiple=!0:a.size&&(E.size=a.size))):e=E.createElementNS(e,s),e[Gt]=n,e[Yo]=a,jf(e,n,!1,!1),n.stateNode=e;e:{switch(E=vo(s,a),s){case"dialog":$e("cancel",e),$e("close",e),f=a;break;case"iframe":case"object":case"embed":$e("load",e),f=a;break;case"video":case"audio":for(f=0;f<Bo.length;f++)$e(Bo[f],e);f=a;break;case"source":$e("error",e),f=a;break;case"img":case"image":case"link":$e("error",e),$e("load",e),f=a;break;case"details":$e("toggle",e),f=a;break;case"input":Te(e,a),f=_e(e,a),$e("invalid",e);break;case"option":f=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},f=C({},a,{value:void 0}),$e("invalid",e);break;case"textarea":Sn(e,a),f=on(e,a),$e("invalid",e);break;default:f=a}yo(s,f),H=f;for(v in H)if(H.hasOwnProperty(v)){var Y=H[v];v==="style"?As(e,Y):v==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Ts(e,Y)):v==="children"?typeof Y=="string"?(s!=="textarea"||Y!=="")&&an(e,Y):typeof Y=="number"&&an(e,""+Y):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?Y!=null&&v==="onScroll"&&$e("scroll",e):Y!=null&&_(e,v,Y,E))}switch(s){case"input":Se(e),Ot(e,a,!1);break;case"textarea":Se(e),Xn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+re(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?Et(e,!!a.multiple,v,!1):a.defaultValue!=null&&Et(e,!!a.multiple,a.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=di)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return st(n),null;case 6:if(e&&n.stateNode!=null)bf(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=ir(qo.current),ir(Kt.current),yi(n)){if(a=n.stateNode,s=n.memoizedProps,a[Gt]=n,(v=a.nodeValue!==s)&&(e=wt,e!==null))switch(e.tag){case 3:ci(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ci(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Gt]=n,n.stateNode=a}return st(n),null;case 13:if(ze(Ve),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&St!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Dd(),Xr(),n.flags|=98560,v=!1;else if(v=yi(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Gt]=n}else Xr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;st(n),v=!1}else $t!==null&&(ku($t),$t=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ve.current&1)!==0?qe===0&&(qe=3):Eu())),n.updateQueue!==null&&(n.flags|=4),st(n),null);case 4:return qr(),fu(e,n),e===null&&Wo(n.stateNode.containerInfo),st(n),null;case 10:return Fa(n.type._context),st(n),null;case 17:return ct(n.type)&&pi(),st(n),null;case 19:if(ze(Ve),v=n.memoizedState,v===null)return st(n),null;if(a=(n.flags&128)!==0,E=v.rendering,E===null)if(a)ns(v,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(E=Ci(e),E!==null){for(n.flags|=128,ns(v,!1),a=E.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,e=E.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Oe(Ve,Ve.current&1|2),n.child}e=e.sibling}v.tail!==null&&He()>to&&(n.flags|=128,a=!0,ns(v,!1),n.lanes=4194304)}else{if(!a)if(e=Ci(E),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ns(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!Le)return st(n),null}else 2*He()-v.renderingStartTime>to&&s!==1073741824&&(n.flags|=128,a=!0,ns(v,!1),n.lanes=4194304);v.isBackwards?(E.sibling=n.child,n.child=E):(s=v.last,s!==null?s.sibling=E:n.child=E,v.last=E)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=He(),n.sibling=null,s=Ve.current,Oe(Ve,a?s&1|2:s&1),n):(st(n),null);case 22:case 23:return Iu(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(Nt&1073741824)!==0&&(st(n),n.subtreeFlags&6&&(n.flags|=8192)):st(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function bx(e,n){switch(Oa(n),n.tag){case 1:return ct(n.type)&&pi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return qr(),ze(ut),ze(rt),Xa(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Ua(n),null;case 13:if(ze(Ve),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Xr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ze(Ve),null;case 4:return qr(),null;case 10:return Fa(n.type._context),null;case 22:case 23:return Iu(),null;case 24:return null;default:return null}}var Ti=!1,it=!1,Px=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Jr(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){We(e,n,a)}else s.current=null}function pu(e,n,s){try{s()}catch(a){We(e,n,a)}}var Pf=!1;function Dx(e,n){if(Ia=Js,e=ad(),xa(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var f=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var E=0,H=-1,Y=-1,te=0,ie=0,le=e,se=null;t:for(;;){for(var fe;le!==s||f!==0&&le.nodeType!==3||(H=E+f),le!==v||a!==0&&le.nodeType!==3||(Y=E+a),le.nodeType===3&&(E+=le.nodeValue.length),(fe=le.firstChild)!==null;)se=le,le=fe;for(;;){if(le===e)break t;if(se===s&&++te===f&&(H=E),se===v&&++ie===a&&(Y=E),(fe=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=fe}s=H===-1||Y===-1?null:{start:H,end:Y}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ea={focusedElem:e,selectionRange:s},Js=!1,pe=n;pe!==null;)if(n=pe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pe=e;else for(;pe!==null;){n=pe;try{var me=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var he=me.memoizedProps,Ye=me.memoizedState,J=n.stateNode,Q=J.getSnapshotBeforeUpdate(n.elementType===n.type?he:zt(n.type,he),Ye);J.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){We(n,n.return,ue)}if(e=n.sibling,e!==null){e.return=n.return,pe=e;break}pe=n.return}return me=Pf,Pf=!1,me}function rs(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&e)===e){var v=f.destroy;f.destroy=void 0,v!==void 0&&pu(n,s,v)}f=f.next}while(f!==a)}}function Oi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function mu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Df(e){var n=e.alternate;n!==null&&(e.alternate=null,Df(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Gt],delete n[Yo],delete n[ba],delete n[mx],delete n[hx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tf(e){return e.tag===5||e.tag===3||e.tag===4}function Of(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=di));else if(a!==4&&(e=e.child,e!==null))for(hu(e,n,s),e=e.sibling;e!==null;)hu(e,n,s),e=e.sibling}function gu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(gu(e,n,s),e=e.sibling;e!==null;)gu(e,n,s),e=e.sibling}var tt=null,Lt=!1;function $n(e,n,s){for(s=s.child;s!==null;)Af(e,n,s),s=s.sibling}function Af(e,n,s){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Jn,s)}catch{}switch(s.tag){case 5:it||Jr(s,n);case 6:var a=tt,f=Lt;tt=null,$n(e,n,s),tt=a,Lt=f,tt!==null&&(Lt?(e=tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):tt.removeChild(s.stateNode));break;case 18:tt!==null&&(Lt?(e=tt,s=s.stateNode,e.nodeType===8?Ma(e.parentNode,s):e.nodeType===1&&Ma(e,s),Ao(e)):Ma(tt,s.stateNode));break;case 4:a=tt,f=Lt,tt=s.stateNode.containerInfo,Lt=!0,$n(e,n,s),tt=a,Lt=f;break;case 0:case 11:case 14:case 15:if(!it&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){f=a=a.next;do{var v=f,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&pu(s,n,E),f=f.next}while(f!==a)}$n(e,n,s);break;case 1:if(!it&&(Jr(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(H){We(s,n,H)}$n(e,n,s);break;case 21:$n(e,n,s);break;case 22:s.mode&1?(it=(a=it)||s.memoizedState!==null,$n(e,n,s),it=a):$n(e,n,s);break;default:$n(e,n,s)}}function $f(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Px),n.forEach(function(a){var f=Hx.bind(null,e,a);s.has(a)||(s.add(a),a.then(f,f))})}}function Rt(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var f=s[a];try{var v=e,E=n,H=E;e:for(;H!==null;){switch(H.tag){case 5:tt=H.stateNode,Lt=!1;break e;case 3:tt=H.stateNode.containerInfo,Lt=!0;break e;case 4:tt=H.stateNode.containerInfo,Lt=!0;break e}H=H.return}if(tt===null)throw Error(o(160));Af(v,E,f),tt=null,Lt=!1;var Y=f.alternate;Y!==null&&(Y.return=null),f.return=null}catch(te){We(f,n,te)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)zf(n,e),n=n.sibling}function zf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(n,e),Zt(e),a&4){try{rs(3,e,e.return),Oi(3,e)}catch(he){We(e,e.return,he)}try{rs(5,e,e.return)}catch(he){We(e,e.return,he)}}break;case 1:Rt(n,e),Zt(e),a&512&&s!==null&&Jr(s,s.return);break;case 5:if(Rt(n,e),Zt(e),a&512&&s!==null&&Jr(s,s.return),e.flags&32){var f=e.stateNode;try{an(f,"")}catch(he){We(e,e.return,he)}}if(a&4&&(f=e.stateNode,f!=null)){var v=e.memoizedProps,E=s!==null?s.memoizedProps:v,H=e.type,Y=e.updateQueue;if(e.updateQueue=null,Y!==null)try{H==="input"&&v.type==="radio"&&v.name!=null&&je(f,v),vo(H,E);var te=vo(H,v);for(E=0;E<Y.length;E+=2){var ie=Y[E],le=Y[E+1];ie==="style"?As(f,le):ie==="dangerouslySetInnerHTML"?Ts(f,le):ie==="children"?an(f,le):_(f,ie,le,te)}switch(H){case"input":Xe(f,v);break;case"textarea":_r(f,v);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?Et(f,!!v.multiple,fe,!1):se!==!!v.multiple&&(v.defaultValue!=null?Et(f,!!v.multiple,v.defaultValue,!0):Et(f,!!v.multiple,v.multiple?[]:"",!1))}f[Yo]=v}catch(he){We(e,e.return,he)}}break;case 6:if(Rt(n,e),Zt(e),a&4){if(e.stateNode===null)throw Error(o(162));f=e.stateNode,v=e.memoizedProps;try{f.nodeValue=v}catch(he){We(e,e.return,he)}}break;case 3:if(Rt(n,e),Zt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Ao(n.containerInfo)}catch(he){We(e,e.return,he)}break;case 4:Rt(n,e),Zt(e);break;case 13:Rt(n,e),Zt(e),f=e.child,f.flags&8192&&(v=f.memoizedState!==null,f.stateNode.isHidden=v,!v||f.alternate!==null&&f.alternate.memoizedState!==null||(vu=He())),a&4&&$f(e);break;case 22:if(ie=s!==null&&s.memoizedState!==null,e.mode&1?(it=(te=it)||ie,Rt(n,e),it=te):Rt(n,e),Zt(e),a&8192){if(te=e.memoizedState!==null,(e.stateNode.isHidden=te)&&!ie&&(e.mode&1)!==0)for(pe=e,ie=e.child;ie!==null;){for(le=pe=ie;pe!==null;){switch(se=pe,fe=se.child,se.tag){case 0:case 11:case 14:case 15:rs(4,se,se.return);break;case 1:Jr(se,se.return);var me=se.stateNode;if(typeof me.componentWillUnmount=="function"){a=se,s=se.return;try{n=a,me.props=n.memoizedProps,me.state=n.memoizedState,me.componentWillUnmount()}catch(he){We(a,s,he)}}break;case 5:Jr(se,se.return);break;case 22:if(se.memoizedState!==null){Ff(le);continue}}fe!==null?(fe.return=se,pe=fe):Ff(le)}ie=ie.sibling}e:for(ie=null,le=e;;){if(le.tag===5){if(ie===null){ie=le;try{f=le.stateNode,te?(v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(H=le.stateNode,Y=le.memoizedProps.style,E=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,H.style.display=Os("display",E))}catch(he){We(e,e.return,he)}}}else if(le.tag===6){if(ie===null)try{le.stateNode.nodeValue=te?"":le.memoizedProps}catch(he){We(e,e.return,he)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;ie===le&&(ie=null),le=le.return}ie===le&&(ie=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Rt(n,e),Zt(e),a&4&&$f(e);break;case 21:break;default:Rt(n,e),Zt(e)}}function Zt(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Tf(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var f=a.stateNode;a.flags&32&&(an(f,""),a.flags&=-33);var v=Of(e);gu(e,v,f);break;case 3:case 4:var E=a.stateNode.containerInfo,H=Of(e);hu(e,H,E);break;default:throw Error(o(161))}}catch(Y){We(e,e.return,Y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Tx(e,n,s){pe=e,Lf(e)}function Lf(e,n,s){for(var a=(e.mode&1)!==0;pe!==null;){var f=pe,v=f.child;if(f.tag===22&&a){var E=f.memoizedState!==null||Ti;if(!E){var H=f.alternate,Y=H!==null&&H.memoizedState!==null||it;H=Ti;var te=it;if(Ti=E,(it=Y)&&!te)for(pe=f;pe!==null;)E=pe,Y=E.child,E.tag===22&&E.memoizedState!==null?Hf(f):Y!==null?(Y.return=E,pe=Y):Hf(f);for(;v!==null;)pe=v,Lf(v),v=v.sibling;pe=f,Ti=H,it=te}Rf(e)}else(f.subtreeFlags&8772)!==0&&v!==null?(v.return=f,pe=v):Rf(e)}}function Rf(e){for(;pe!==null;){var n=pe;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:it||Oi(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!it)if(s===null)a.componentDidMount();else{var f=n.elementType===n.type?s.memoizedProps:zt(n.type,s.memoizedProps);a.componentDidUpdate(f,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Rd(n,v,a);break;case 3:var E=n.updateQueue;if(E!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Rd(n,E,s)}break;case 5:var H=n.stateNode;if(s===null&&n.flags&4){s=H;var Y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&s.focus();break;case"img":Y.src&&(s.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var te=n.alternate;if(te!==null){var ie=te.memoizedState;if(ie!==null){var le=ie.dehydrated;le!==null&&Ao(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}it||n.flags&512&&mu(n)}catch(se){We(n,n.return,se)}}if(n===e){pe=null;break}if(s=n.sibling,s!==null){s.return=n.return,pe=s;break}pe=n.return}}function Ff(e){for(;pe!==null;){var n=pe;if(n===e){pe=null;break}var s=n.sibling;if(s!==null){s.return=n.return,pe=s;break}pe=n.return}}function Hf(e){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Oi(4,n)}catch(Y){We(n,s,Y)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var f=n.return;try{a.componentDidMount()}catch(Y){We(n,f,Y)}}var v=n.return;try{mu(n)}catch(Y){We(n,v,Y)}break;case 5:var E=n.return;try{mu(n)}catch(Y){We(n,E,Y)}}}catch(Y){We(n,n.return,Y)}if(n===e){pe=null;break}var H=n.sibling;if(H!==null){H.return=n.return,pe=H;break}pe=n.return}}var Ox=Math.ceil,Ai=j.ReactCurrentDispatcher,xu=j.ReactCurrentOwner,Dt=j.ReactCurrentBatchConfig,be=0,Je=null,Qe=null,nt=0,Nt=0,eo=Pn(0),qe=0,os=null,ar=0,$i=0,yu=0,ss=null,ft=null,vu=0,to=1/0,gn=null,zi=!1,wu=null,zn=null,Li=!1,Ln=null,Ri=0,is=0,Su=null,Fi=-1,Hi=0;function at(){return(be&6)!==0?He():Fi!==-1?Fi:Fi=He()}function Rn(e){return(e.mode&1)===0?1:(be&2)!==0&&nt!==0?nt&-nt:xx.transition!==null?(Hi===0&&(Hi=Or()),Hi):(e=De,e!==0||(e=window.event,e=e===void 0?16:Vc(e.type)),e)}function Ft(e,n,s,a){if(50<is)throw is=0,Su=null,Error(o(185));er(e,s,a),((be&2)===0||e!==Je)&&(e===Je&&((be&2)===0&&($i|=s),qe===4&&Fn(e,nt)),pt(e,a),s===1&&be===0&&(n.mode&1)===0&&(to=He()+500,hi&&Tn()))}function pt(e,n){var s=e.callbackNode;na(e,n);var a=Tr(e,e===Je?nt:0);if(a===0)s!==null&&Us(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Us(s),n===1)e.tag===0?gx(Bf.bind(null,e)):_d(Bf.bind(null,e)),fx(function(){(be&6)===0&&Tn()}),s=null;else{switch(Oc(a)){case 1:s=jo;break;case 4:s=Xs;break;case 16:s=br;break;case 536870912:s=Qs;break;default:s=br}s=qf(s,Vf.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Vf(e,n){if(Fi=-1,Hi=0,(be&6)!==0)throw Error(o(327));var s=e.callbackNode;if(no()&&e.callbackNode!==s)return null;var a=Tr(e,e===Je?nt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=Vi(e,a);else{n=a;var f=be;be|=2;var v=Uf();(Je!==e||nt!==n)&&(gn=null,to=He()+500,cr(e,n));do try{zx();break}catch(H){Wf(e,H)}while(!0);Ra(),Ai.current=v,be=f,Qe!==null?n=0:(Je=null,nt=0,n=qe)}if(n!==0){if(n===2&&(f=Mo(e),f!==0&&(a=f,n=Nu(e,f))),n===1)throw s=os,cr(e,0),Fn(e,a),pt(e,He()),s;if(n===6)Fn(e,a);else{if(f=e.current.alternate,(a&30)===0&&!Ax(f)&&(n=Vi(e,a),n===2&&(v=Mo(e),v!==0&&(a=v,n=Nu(e,v))),n===1))throw s=os,cr(e,0),Fn(e,a),pt(e,He()),s;switch(e.finishedWork=f,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:dr(e,ft,gn);break;case 3:if(Fn(e,a),(a&130023424)===a&&(n=vu+500-He(),10<n)){if(Tr(e,0)!==0)break;if(f=e.suspendedLanes,(f&a)!==a){at(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=ja(dr.bind(null,e,ft,gn),n);break}dr(e,ft,gn);break;case 4:if(Fn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,f=-1;0<a;){var E=31-yt(a);v=1<<E,E=n[E],E>f&&(f=E),a&=~v}if(a=f,a=He()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ox(a/1960))-a,10<a){e.timeoutHandle=ja(dr.bind(null,e,ft,gn),a);break}dr(e,ft,gn);break;case 5:dr(e,ft,gn);break;default:throw Error(o(329))}}}return pt(e,He()),e.callbackNode===s?Vf.bind(null,e):null}function Nu(e,n){var s=ss;return e.current.memoizedState.isDehydrated&&(cr(e,n).flags|=256),e=Vi(e,n),e!==2&&(n=ft,ft=s,n!==null&&ku(n)),e}function ku(e){ft===null?ft=e:ft.push.apply(ft,e)}function Ax(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var f=s[a],v=f.getSnapshot;f=f.value;try{if(!At(v(),f))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Fn(e,n){for(n&=~yu,n&=~$i,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-yt(n),a=1<<s;e[s]=-1,n&=~a}}function Bf(e){if((be&6)!==0)throw Error(o(327));no();var n=Tr(e,0);if((n&1)===0)return pt(e,He()),null;var s=Vi(e,n);if(e.tag!==0&&s===2){var a=Mo(e);a!==0&&(n=a,s=Nu(e,a))}if(s===1)throw s=os,cr(e,0),Fn(e,n),pt(e,He()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,dr(e,ft,gn),pt(e,He()),null}function Cu(e,n){var s=be;be|=1;try{return e(n)}finally{be=s,be===0&&(to=He()+500,hi&&Tn())}}function ur(e){Ln!==null&&Ln.tag===0&&(be&6)===0&&no();var n=be;be|=1;var s=Dt.transition,a=De;try{if(Dt.transition=null,De=1,e)return e()}finally{De=a,Dt.transition=s,be=n,(be&6)===0&&Tn()}}function Iu(){Nt=eo.current,ze(eo)}function cr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,dx(s)),Qe!==null)for(s=Qe.return;s!==null;){var a=s;switch(Oa(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&pi();break;case 3:qr(),ze(ut),ze(rt),Xa();break;case 5:Ua(a);break;case 4:qr();break;case 13:ze(Ve);break;case 19:ze(Ve);break;case 10:Fa(a.type._context);break;case 22:case 23:Iu()}s=s.return}if(Je=e,Qe=e=Hn(e.current,null),nt=Nt=n,qe=0,os=null,yu=$i=ar=0,ft=ss=null,sr!==null){for(n=0;n<sr.length;n++)if(s=sr[n],a=s.interleaved,a!==null){s.interleaved=null;var f=a.next,v=s.pending;if(v!==null){var E=v.next;v.next=f,a.next=E}s.pending=a}sr=null}return e}function Wf(e,n){do{var s=Qe;try{if(Ra(),Ii.current=Mi,Ei){for(var a=Be.memoizedState;a!==null;){var f=a.queue;f!==null&&(f.pending=null),a=a.next}Ei=!1}if(lr=0,Ze=Ke=Be=null,Zo=!1,Jo=0,xu.current=null,s===null||s.return===null){qe=1,os=n,Qe=null;break}e:{var v=e,E=s.return,H=s,Y=n;if(n=nt,H.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var te=Y,ie=H,le=ie.tag;if((ie.mode&1)===0&&(le===0||le===11||le===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=hf(E);if(fe!==null){fe.flags&=-257,gf(fe,E,H,v,n),fe.mode&1&&mf(v,te,n),n=fe,Y=te;var me=n.updateQueue;if(me===null){var he=new Set;he.add(Y),n.updateQueue=he}else me.add(Y);break e}else{if((n&1)===0){mf(v,te,n),Eu();break e}Y=Error(o(426))}}else if(Le&&H.mode&1){var Ye=hf(E);if(Ye!==null){(Ye.flags&65536)===0&&(Ye.flags|=256),gf(Ye,E,H,v,n),za(Zr(Y,H));break e}}v=Y=Zr(Y,H),qe!==4&&(qe=2),ss===null?ss=[v]:ss.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var J=ff(v,Y,n);Ld(v,J);break e;case 1:H=Y;var Q=v.type,ee=v.stateNode;if((v.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(zn===null||!zn.has(ee)))){v.flags|=65536,n&=-n,v.lanes|=n;var ue=pf(v,H,n);Ld(v,ue);break e}}v=v.return}while(v!==null)}Xf(s)}catch(xe){n=xe,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(!0)}function Uf(){var e=Ai.current;return Ai.current=Mi,e===null?Mi:e}function Eu(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||(ar&268435455)===0&&($i&268435455)===0||Fn(Je,nt)}function Vi(e,n){var s=be;be|=2;var a=Uf();(Je!==e||nt!==n)&&(gn=null,cr(e,n));do try{$x();break}catch(f){Wf(e,f)}while(!0);if(Ra(),be=s,Ai.current=a,Qe!==null)throw Error(o(261));return Je=null,nt=0,qe}function $x(){for(;Qe!==null;)Yf(Qe)}function zx(){for(;Qe!==null&&!Gl();)Yf(Qe)}function Yf(e){var n=Kf(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,n===null?Xf(e):Qe=n,xu.current=null}function Xf(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Mx(s,n,Nt),s!==null){Qe=s;return}}else{if(s=bx(s,n),s!==null){s.flags&=32767,Qe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Qe=null;return}}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);qe===0&&(qe=5)}function dr(e,n,s){var a=De,f=Dt.transition;try{Dt.transition=null,De=1,Lx(e,n,s,a)}finally{Dt.transition=f,De=a}return null}function Lx(e,n,s,a){do no();while(Ln!==null);if((be&6)!==0)throw Error(o(327));s=e.finishedWork;var f=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(Ks(e,v),e===Je&&(Qe=Je=null,nt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Li||(Li=!0,qf(br,function(){return no(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Dt.transition,Dt.transition=null;var E=De;De=1;var H=be;be|=4,xu.current=null,Dx(e,s),zf(s,e),ox(Ea),Js=!!Ia,Ea=Ia=null,e.current=s,Tx(s),Ys(),be=H,De=E,Dt.transition=v}else e.current=s;if(Li&&(Li=!1,Ln=e,Ri=f),v=e.pendingLanes,v===0&&(zn=null),Zl(s.stateNode),pt(e,He()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)f=n[s],a(f.value,{componentStack:f.stack,digest:f.digest});if(zi)throw zi=!1,e=wu,wu=null,e;return(Ri&1)!==0&&e.tag!==0&&no(),v=e.pendingLanes,(v&1)!==0?e===Su?is++:(is=0,Su=e):is=0,Tn(),null}function no(){if(Ln!==null){var e=Oc(Ri),n=Dt.transition,s=De;try{if(Dt.transition=null,De=16>e?16:e,Ln===null)var a=!1;else{if(e=Ln,Ln=null,Ri=0,(be&6)!==0)throw Error(o(331));var f=be;for(be|=4,pe=e.current;pe!==null;){var v=pe,E=v.child;if((pe.flags&16)!==0){var H=v.deletions;if(H!==null){for(var Y=0;Y<H.length;Y++){var te=H[Y];for(pe=te;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:rs(8,ie,v)}var le=ie.child;if(le!==null)le.return=ie,pe=le;else for(;pe!==null;){ie=pe;var se=ie.sibling,fe=ie.return;if(Df(ie),ie===te){pe=null;break}if(se!==null){se.return=fe,pe=se;break}pe=fe}}}var me=v.alternate;if(me!==null){var he=me.child;if(he!==null){me.child=null;do{var Ye=he.sibling;he.sibling=null,he=Ye}while(he!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,pe=E;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:rs(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,pe=J;break e}pe=v.return}}var Q=e.current;for(pe=Q;pe!==null;){E=pe;var ee=E.child;if((E.subtreeFlags&2064)!==0&&ee!==null)ee.return=E,pe=ee;else e:for(E=Q;pe!==null;){if(H=pe,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Oi(9,H)}}catch(xe){We(H,H.return,xe)}if(H===E){pe=null;break e}var ue=H.sibling;if(ue!==null){ue.return=H.return,pe=ue;break e}pe=H.return}}if(be=f,Tn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Jn,e)}catch{}a=!0}return a}finally{De=s,Dt.transition=n}}return!1}function Qf(e,n,s){n=Zr(s,n),n=ff(e,n,1),e=An(e,n,1),n=at(),e!==null&&(er(e,1,n),pt(e,n))}function We(e,n,s){if(e.tag===3)Qf(e,e,s);else for(;n!==null;){if(n.tag===3){Qf(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(zn===null||!zn.has(a))){e=Zr(s,e),e=pf(n,e,1),n=An(n,e,1),e=at(),n!==null&&(er(n,1,e),pt(n,e));break}}n=n.return}}function Rx(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=at(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(nt&s)===s&&(qe===4||qe===3&&(nt&130023424)===nt&&500>He()-vu?cr(e,0):yu|=s),pt(e,n)}function Gf(e,n){n===0&&((e.mode&1)===0?n=1:(n=Dr,Dr<<=1,(Dr&130023424)===0&&(Dr=4194304)));var s=at();e=pn(e,n),e!==null&&(er(e,n,s),pt(e,s))}function Fx(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Gf(e,s)}function Hx(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),Gf(e,s)}var Kf;Kf=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ut.current)dt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return dt=!1,jx(e,n,s);dt=(e.flags&131072)!==0}else dt=!1,Le&&(n.flags&1048576)!==0&&jd(n,xi,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Di(e,n),e=n.pendingProps;var f=Wr(n,rt.current);Kr(n,s),f=Ka(null,n,a,e,f,s);var v=qa();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(a)?(v=!0,mi(n)):v=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ba(n),f.updater=bi,n.stateNode=f,f._reactInternals=n,ru(n,a,e,s),n=lu(null,n,a,!0,v,s)):(n.tag=0,Le&&v&&Ta(n),lt(null,n,f,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Di(e,n),e=n.pendingProps,f=a._init,a=f(a._payload),n.type=a,f=n.tag=Bx(a),e=zt(a,e),f){case 0:n=iu(null,n,a,e,s);break e;case 1:n=Nf(null,n,a,e,s);break e;case 11:n=xf(null,n,a,e,s);break e;case 14:n=yf(null,n,a,zt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),iu(e,n,a,f,s);case 1:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),Nf(e,n,a,f,s);case 3:e:{if(kf(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,f=v.element,zd(e,n),ki(n,a,null,s);var E=n.memoizedState;if(a=E.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){f=Zr(Error(o(423)),n),n=Cf(e,n,a,s,f);break e}else if(a!==f){f=Zr(Error(o(424)),n),n=Cf(e,n,a,s,f);break e}else for(St=bn(n.stateNode.containerInfo.firstChild),wt=n,Le=!0,$t=null,s=Ad(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Xr(),a===f){n=hn(e,n,s);break e}lt(e,n,a,s)}n=n.child}return n;case 5:return Fd(n),e===null&&$a(n),a=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,E=f.children,_a(a,f)?E=null:v!==null&&_a(a,v)&&(n.flags|=32),Sf(e,n),lt(e,n,E,s),n.child;case 6:return e===null&&$a(n),null;case 13:return If(e,n,s);case 4:return Wa(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Qr(n,null,a,s):lt(e,n,a,s),n.child;case 11:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),xf(e,n,a,f,s);case 7:return lt(e,n,n.pendingProps,s),n.child;case 8:return lt(e,n,n.pendingProps.children,s),n.child;case 12:return lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,f=n.pendingProps,v=n.memoizedProps,E=f.value,Oe(wi,a._currentValue),a._currentValue=E,v!==null)if(At(v.value,E)){if(v.children===f.children&&!ut.current){n=hn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var H=v.dependencies;if(H!==null){E=v.child;for(var Y=H.firstContext;Y!==null;){if(Y.context===a){if(v.tag===1){Y=mn(-1,s&-s),Y.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var ie=te.pending;ie===null?Y.next=Y:(Y.next=ie.next,ie.next=Y),te.pending=Y}}v.lanes|=s,Y=v.alternate,Y!==null&&(Y.lanes|=s),Ha(v.return,s,n),H.lanes|=s;break}Y=Y.next}}else if(v.tag===10)E=v.type===n.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(o(341));E.lanes|=s,H=E.alternate,H!==null&&(H.lanes|=s),Ha(E,s,n),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===n){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}lt(e,n,f.children,s),n=n.child}return n;case 9:return f=n.type,a=n.pendingProps.children,Kr(n,s),f=bt(f),a=a(f),n.flags|=1,lt(e,n,a,s),n.child;case 14:return a=n.type,f=zt(a,n.pendingProps),f=zt(a.type,f),yf(e,n,a,f,s);case 15:return vf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),Di(e,n),n.tag=1,ct(a)?(e=!0,mi(n)):e=!1,Kr(n,s),cf(n,a,f),ru(n,a,f,s),lu(null,n,a,!0,e,s);case 19:return _f(e,n,s);case 22:return wf(e,n,s)}throw Error(o(156,n.tag))};function qf(e,n){return Ws(e,n)}function Vx(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,n,s,a){return new Vx(e,n,s,a)}function _u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bx(e){if(typeof e=="function")return _u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W)return 11;if(e===$)return 14}return 2}function Hn(e,n){var s=e.alternate;return s===null?(s=Tt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Bi(e,n,s,a,f,v){var E=2;if(a=e,typeof e=="function")_u(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case B:return fr(s.children,f,v,n);case q:E=8,f|=8;break;case O:return e=Tt(12,s,n,f|2),e.elementType=O,e.lanes=v,e;case K:return e=Tt(13,s,n,f),e.elementType=K,e.lanes=v,e;case R:return e=Tt(19,s,n,f),e.elementType=R,e.lanes=v,e;case D:return Wi(s,f,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:E=10;break e;case X:E=9;break e;case W:E=11;break e;case $:E=14;break e;case z:E=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Tt(E,s,n,f),n.elementType=e,n.type=a,n.lanes=v,n}function fr(e,n,s,a){return e=Tt(7,e,a,n),e.lanes=s,e}function Wi(e,n,s,a){return e=Tt(22,e,a,n),e.elementType=D,e.lanes=s,e.stateNode={isHidden:!1},e}function ju(e,n,s){return e=Tt(6,e,null,n),e.lanes=s,e}function Mu(e,n,s){return n=Tt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Wx(e,n,s,a,f){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bo(0),this.expirationTimes=bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.identifierPrefix=a,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function bu(e,n,s,a,f,v,E,H,Y){return e=new Wx(e,n,s,H,Y),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Tt(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ba(v),e}function Ux(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function Zf(e){if(!e)return Dn;e=e._reactInternals;e:{if(Xt(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(ct(s))return Id(e,s,n)}return n}function Jf(e,n,s,a,f,v,E,H,Y){return e=bu(s,a,!0,e,f,v,E,H,Y),e.context=Zf(null),s=e.current,a=at(),f=Rn(s),v=mn(a,f),v.callback=n??null,An(s,v,f),e.current.lanes=f,er(e,f,a),pt(e,a),e}function Ui(e,n,s,a){var f=n.current,v=at(),E=Rn(f);return s=Zf(s),n.context===null?n.context=s:n.pendingContext=s,n=mn(v,E),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=An(f,n,E),e!==null&&(Ft(e,f,E,v),Ni(e,f,E)),E}function Yi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ep(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Pu(e,n){ep(e,n),(e=e.alternate)&&ep(e,n)}function Yx(){return null}var tp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Du(e){this._internalRoot=e}Xi.prototype.render=Du.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Ui(e,n,null,null)},Xi.prototype.unmount=Du.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ur(function(){Ui(null,e,null,null)}),n[un]=null}};function Xi(e){this._internalRoot=e}Xi.prototype.unstable_scheduleHydration=function(e){if(e){var n=zc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<_n.length&&n!==0&&n<_n[s].priority;s++);_n.splice(s,0,e),s===0&&Fc(e)}};function Tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function np(){}function Xx(e,n,s,a,f){if(f){if(typeof a=="function"){var v=a;a=function(){var te=Yi(E);v.call(te)}}var E=Jf(n,a,e,0,null,!1,!1,"",np);return e._reactRootContainer=E,e[un]=E.current,Wo(e.nodeType===8?e.parentNode:e),ur(),E}for(;f=e.lastChild;)e.removeChild(f);if(typeof a=="function"){var H=a;a=function(){var te=Yi(Y);H.call(te)}}var Y=bu(e,0,!1,null,null,!1,!1,"",np);return e._reactRootContainer=Y,e[un]=Y.current,Wo(e.nodeType===8?e.parentNode:e),ur(function(){Ui(n,Y,s,a)}),Y}function Gi(e,n,s,a,f){var v=s._reactRootContainer;if(v){var E=v;if(typeof f=="function"){var H=f;f=function(){var Y=Yi(E);H.call(Y)}}Ui(n,E,e,f)}else E=Xx(s,n,e,f,a);return Yi(E)}Ac=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Qt(n.pendingLanes);s!==0&&(ra(n,s|1),pt(n,He()),(be&6)===0&&(to=He()+500,Tn()))}break;case 13:ur(function(){var a=pn(e,1);if(a!==null){var f=at();Ft(a,e,1,f)}}),Pu(e,1)}},oa=function(e){if(e.tag===13){var n=pn(e,134217728);if(n!==null){var s=at();Ft(n,e,134217728,s)}Pu(e,134217728)}},$c=function(e){if(e.tag===13){var n=Rn(e),s=pn(e,n);if(s!==null){var a=at();Ft(s,e,n,a)}Pu(e,n)}},zc=function(){return De},Lc=function(e,n){var s=De;try{return De=e,n()}finally{De=s}},No=function(e,n,s){switch(n){case"input":if(Xe(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var f=fi(a);if(!f)throw Error(o(90));Ce(a),Xe(a,f)}}}break;case"textarea":_r(e,s);break;case"select":n=s.value,n!=null&&Et(e,!!s.multiple,n,!1)}},Rs=Cu,Fs=ur;var Qx={usingClientEntryPoint:!1,Events:[Xo,Vr,fi,zs,Ls,Cu]},ls={findFiberByHostInstance:tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gx={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vs(e),e===null?null:e.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||Yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{Jn=Ki.inject(Gx),_t=Ki}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qx,mt.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(n))throw Error(o(200));return Ux(e,n,null,s)},mt.createRoot=function(e,n){if(!Tu(e))throw Error(o(299));var s=!1,a="",f=tp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=bu(e,1,!1,null,null,s,!1,a,f),e[un]=n.current,Wo(e.nodeType===8?e.parentNode:e),new Du(n)},mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Vs(n),e=e===null?null:e.stateNode,e},mt.flushSync=function(e){return ur(e)},mt.hydrate=function(e,n,s){if(!Qi(n))throw Error(o(200));return Gi(null,e,n,!0,s)},mt.hydrateRoot=function(e,n,s){if(!Tu(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,f=!1,v="",E=tp;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),n=Jf(n,null,e,1,s??null,f,!1,v,E),e[un]=n.current,Wo(e),a)for(e=0;e<a.length;e++)s=a[e],f=s._getVersion,f=f(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,f]:n.mutableSourceEagerHydrationData.push(s,f);return new Xi(n)},mt.render=function(e,n,s){if(!Qi(n))throw Error(o(200));return Gi(null,e,n,!1,s)},mt.unmountComponentAtNode=function(e){if(!Qi(e))throw Error(o(40));return e._reactRootContainer?(ur(function(){Gi(null,null,e,!1,function(){e._reactRootContainer=null,e[un]=null})}),!0):!1},mt.unstable_batchedUpdates=Cu,mt.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!Qi(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Gi(e,n,s,!1,a)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var cp;function _m(){if(cp)return $u.exports;cp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),$u.exports=n0(),$u.exports}var dp;function r0(){if(dp)return qi;dp=1;var t=_m();return qi.createRoot=t.createRoot,qi.hydrateRoot=t.hydrateRoot,qi}var o0=r0();function Ge(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=Ge(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var s0={value:()=>{}};function jl(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new dl(o)}function dl(t){this._=t}function i0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}dl.prototype=jl.prototype={constructor:dl,on:function(t,r){var o=this._,i=i0(t+"",o),l,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((l=(t=i[u]).type)&&(l=l0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++u<c;)if(l=(t=i[u]).type)o[l]=fp(o[l],t.name,r);else if(r==null)for(l in o)o[l]=fp(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new dl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,u;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,l=u.length;i<l;++i)u[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,u=i.length;l<u;++l)i[l].value.apply(r,o)}};function l0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function fp(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=s0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var Zu="http://www.w3.org/1999/xhtml";const pp={svg:"http://www.w3.org/2000/svg",xhtml:Zu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ml(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),pp.hasOwnProperty(r)?{space:pp[r],local:t}:t}function a0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===Zu&&r.documentElement.namespaceURI===Zu?r.createElement(t):r.createElementNS(o,t)}}function u0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function jm(t){var r=Ml(t);return(r.local?u0:a0)(r)}function c0(){}function hc(t){return t==null?c0:function(){return this.querySelector(t)}}function d0(t){typeof t!="function"&&(t=hc(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,m=i[l]=new Array(c),p,x,y=0;y<c;++y)(p=u[y])&&(x=t.call(p,p.__data__,y,u))&&("__data__"in p&&(x.__data__=p.__data__),m[y]=x);return new It(i,this._parents)}function f0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function p0(){return[]}function Mm(t){return t==null?p0:function(){return this.querySelectorAll(t)}}function m0(t){return function(){return f0(t.apply(this,arguments))}}function h0(t){typeof t=="function"?t=m0(t):t=Mm(t);for(var r=this._groups,o=r.length,i=[],l=[],u=0;u<o;++u)for(var c=r[u],m=c.length,p,x=0;x<m;++x)(p=c[x])&&(i.push(t.call(p,p.__data__,x,c)),l.push(p));return new It(i,l)}function bm(t){return function(){return this.matches(t)}}function Pm(t){return function(r){return r.matches(t)}}var g0=Array.prototype.find;function x0(t){return function(){return g0.call(this.children,t)}}function y0(){return this.firstElementChild}function v0(t){return this.select(t==null?y0:x0(typeof t=="function"?t:Pm(t)))}var w0=Array.prototype.filter;function S0(){return Array.from(this.children)}function N0(t){return function(){return w0.call(this.children,t)}}function k0(t){return this.selectAll(t==null?S0:N0(typeof t=="function"?t:Pm(t)))}function C0(t){typeof t!="function"&&(t=bm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,m=i[l]=[],p,x=0;x<c;++x)(p=u[x])&&t.call(p,p.__data__,x,u)&&m.push(p);return new It(i,this._parents)}function Dm(t){return new Array(t.length)}function I0(){return new It(this._enter||this._groups.map(Dm),this._parents)}function xl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}xl.prototype={constructor:xl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function E0(t){return function(){return t}}function _0(t,r,o,i,l,u){for(var c=0,m,p=r.length,x=u.length;c<x;++c)(m=r[c])?(m.__data__=u[c],i[c]=m):o[c]=new xl(t,u[c]);for(;c<p;++c)(m=r[c])&&(l[c]=m)}function j0(t,r,o,i,l,u,c){var m,p,x=new Map,y=r.length,h=u.length,g=new Array(y),w;for(m=0;m<y;++m)(p=r[m])&&(g[m]=w=c.call(p,p.__data__,m,r)+"",x.has(w)?l[m]=p:x.set(w,p));for(m=0;m<h;++m)w=c.call(t,u[m],m,u)+"",(p=x.get(w))?(i[m]=p,p.__data__=u[m],x.delete(w)):o[m]=new xl(t,u[m]);for(m=0;m<y;++m)(p=r[m])&&x.get(g[m])===p&&(l[m]=p)}function M0(t){return t.__data__}function b0(t,r){if(!arguments.length)return Array.from(this,M0);var o=r?j0:_0,i=this._parents,l=this._groups;typeof t!="function"&&(t=E0(t));for(var u=l.length,c=new Array(u),m=new Array(u),p=new Array(u),x=0;x<u;++x){var y=i[x],h=l[x],g=h.length,w=P0(t.call(y,y&&y.__data__,x,i)),S=w.length,k=m[x]=new Array(S),N=c[x]=new Array(S),I=p[x]=new Array(g);o(y,h,k,N,I,w,r);for(var P=0,_=0,j,V;P<S;++P)if(j=k[P]){for(P>=_&&(_=P+1);!(V=N[_])&&++_<S;);j._next=V||null}}return c=new It(c,i),c._enter=m,c._exit=p,c}function P0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function D0(){return new It(this._exit||this._groups.map(Dm),this._parents)}function T0(t,r,o){var i=this.enter(),l=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?u.remove():o(u),i&&l?i.merge(l).order():l}function O0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,u=i.length,c=Math.min(l,u),m=new Array(l),p=0;p<c;++p)for(var x=o[p],y=i[p],h=x.length,g=m[p]=new Array(h),w,S=0;S<h;++S)(w=x[S]||y[S])&&(g[S]=w);for(;p<l;++p)m[p]=o[p];return new It(m,this._parents)}function A0(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,u=i[l],c;--l>=0;)(c=i[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function $0(t){t||(t=z0);function r(h,g){return h&&g?t(h.__data__,g.__data__):!h-!g}for(var o=this._groups,i=o.length,l=new Array(i),u=0;u<i;++u){for(var c=o[u],m=c.length,p=l[u]=new Array(m),x,y=0;y<m;++y)(x=c[y])&&(p[y]=x);p.sort(r)}return new It(l,this._parents).order()}function z0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function L0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function R0(){return Array.from(this)}function F0(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length;l<u;++l){var c=i[l];if(c)return c}return null}function H0(){let t=0;for(const r of this)++t;return t}function V0(){return!this.node()}function B0(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],u=0,c=l.length,m;u<c;++u)(m=l[u])&&t.call(m,m.__data__,u,l);return this}function W0(t){return function(){this.removeAttribute(t)}}function U0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Y0(t,r){return function(){this.setAttribute(t,r)}}function X0(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function Q0(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function G0(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function K0(t,r){var o=Ml(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?U0:W0:typeof r=="function"?o.local?G0:Q0:o.local?X0:Y0)(o,r))}function Tm(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function q0(t){return function(){this.style.removeProperty(t)}}function Z0(t,r,o){return function(){this.style.setProperty(t,r,o)}}function J0(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function ey(t,r,o){return arguments.length>1?this.each((r==null?q0:typeof r=="function"?J0:Z0)(t,r,o??"")):co(this.node(),t)}function co(t,r){return t.style.getPropertyValue(r)||Tm(t).getComputedStyle(t,null).getPropertyValue(r)}function ty(t){return function(){delete this[t]}}function ny(t,r){return function(){this[t]=r}}function ry(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function oy(t,r){return arguments.length>1?this.each((r==null?ty:typeof r=="function"?ry:ny)(t,r)):this.node()[t]}function Om(t){return t.trim().split(/^|\s+/)}function gc(t){return t.classList||new Am(t)}function Am(t){this._node=t,this._names=Om(t.getAttribute("class")||"")}Am.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function $m(t,r){for(var o=gc(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function zm(t,r){for(var o=gc(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function sy(t){return function(){$m(this,t)}}function iy(t){return function(){zm(this,t)}}function ly(t,r){return function(){(r.apply(this,arguments)?$m:zm)(this,t)}}function ay(t,r){var o=Om(t+"");if(arguments.length<2){for(var i=gc(this.node()),l=-1,u=o.length;++l<u;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?ly:r?sy:iy)(o,r))}function uy(){this.textContent=""}function cy(t){return function(){this.textContent=t}}function dy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function fy(t){return arguments.length?this.each(t==null?uy:(typeof t=="function"?dy:cy)(t)):this.node().textContent}function py(){this.innerHTML=""}function my(t){return function(){this.innerHTML=t}}function hy(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function gy(t){return arguments.length?this.each(t==null?py:(typeof t=="function"?hy:my)(t)):this.node().innerHTML}function xy(){this.nextSibling&&this.parentNode.appendChild(this)}function yy(){return this.each(xy)}function vy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wy(){return this.each(vy)}function Sy(t){var r=typeof t=="function"?t:jm(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Ny(){return null}function ky(t,r){var o=typeof t=="function"?t:jm(t),i=r==null?Ny:typeof r=="function"?r:hc(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function Cy(){var t=this.parentNode;t&&t.removeChild(this)}function Iy(){return this.each(Cy)}function Ey(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function _y(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function jy(t){return this.select(t?_y:Ey)}function My(t){return arguments.length?this.property("__data__",t):this.node().__data__}function by(t){return function(r){t.call(this,r,this.__data__)}}function Py(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Dy(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,u;o<l;++o)u=r[o],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):r[++i]=u;++i?r.length=i:delete this.__on}}}function Ty(t,r,o){return function(){var i=this.__on,l,u=by(r);if(i){for(var c=0,m=i.length;c<m;++c)if((l=i[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=o),l.value=r;return}}this.addEventListener(t.type,u,o),l={type:t.type,name:t.name,value:r,listener:u,options:o},i?i.push(l):this.__on=[l]}}function Oy(t,r,o){var i=Py(t+""),l,u=i.length,c;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,x=m.length,y;p<x;++p)for(l=0,y=m[p];l<u;++l)if((c=i[l]).type===y.type&&c.name===y.name)return y.value}return}for(m=r?Ty:Dy,l=0;l<u;++l)this.each(m(i[l],r,o));return this}function Lm(t,r,o){var i=Tm(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function Ay(t,r){return function(){return Lm(this,t,r)}}function $y(t,r){return function(){return Lm(this,t,r.apply(this,arguments))}}function zy(t,r){return this.each((typeof r=="function"?$y:Ay)(t,r))}function*Ly(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length,c;l<u;++l)(c=i[l])&&(yield c)}var Rm=[null];function It(t,r){this._groups=t,this._parents=r}function _s(){return new It([[document.documentElement]],Rm)}function Ry(){return this}It.prototype=_s.prototype={constructor:It,select:d0,selectAll:h0,selectChild:v0,selectChildren:k0,filter:C0,data:b0,enter:I0,exit:D0,join:T0,merge:O0,selection:Ry,order:A0,sort:$0,call:L0,nodes:R0,node:F0,size:H0,empty:V0,each:B0,attr:K0,style:ey,property:oy,classed:ay,text:fy,html:gy,raise:yy,lower:wy,append:Sy,insert:ky,remove:Iy,clone:jy,datum:My,on:Oy,dispatch:zy,[Symbol.iterator]:Ly};function kt(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Rm)}function Fy(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Ht(t,r){if(t=Fy(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const Hy={passive:!1},xs={capture:!0,passive:!1};function Ru(t){t.stopImmediatePropagation()}function ao(t){t.preventDefault(),t.stopImmediatePropagation()}function Fm(t){var r=t.document.documentElement,o=kt(t).on("dragstart.drag",ao,xs);"onselectstart"in r?o.on("selectstart.drag",ao,xs):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Hm(t,r){var o=t.document.documentElement,i=kt(t).on("dragstart.drag",null);r&&(i.on("click.drag",ao,xs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const Zi=t=>()=>t;function Ju(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:u,x:c,y:m,dx:p,dy:x,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:x,enumerable:!0,configurable:!0},_:{value:y}})}Ju.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Vy(t){return!t.ctrlKey&&!t.button}function By(){return this.parentNode}function Wy(t,r){return r??{x:t.x,y:t.y}}function Uy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vm(){var t=Vy,r=By,o=Wy,i=Uy,l={},u=jl("start","drag","end"),c=0,m,p,x,y,h=0;function g(j){j.on("mousedown.drag",w).filter(i).on("touchstart.drag",N).on("touchmove.drag",I,Hy).on("touchend.drag touchcancel.drag",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(j,V){if(!(y||!t.call(this,j,V))){var F=_(this,r.call(this,j,V),j,V,"mouse");F&&(kt(j.view).on("mousemove.drag",S,xs).on("mouseup.drag",k,xs),Fm(j.view),Ru(j),x=!1,m=j.clientX,p=j.clientY,F("start",j))}}function S(j){if(ao(j),!x){var V=j.clientX-m,F=j.clientY-p;x=V*V+F*F>h}l.mouse("drag",j)}function k(j){kt(j.view).on("mousemove.drag mouseup.drag",null),Hm(j.view,x),ao(j),l.mouse("end",j)}function N(j,V){if(t.call(this,j,V)){var F=j.changedTouches,B=r.call(this,j,V),q=F.length,O,U;for(O=0;O<q;++O)(U=_(this,B,j,V,F[O].identifier,F[O]))&&(Ru(j),U("start",j,F[O]))}}function I(j){var V=j.changedTouches,F=V.length,B,q;for(B=0;B<F;++B)(q=l[V[B].identifier])&&(ao(j),q("drag",j,V[B]))}function P(j){var V=j.changedTouches,F=V.length,B,q;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),B=0;B<F;++B)(q=l[V[B].identifier])&&(Ru(j),q("end",j,V[B]))}function _(j,V,F,B,q,O){var U=u.copy(),X=Ht(O||F,V),W,K,R;if((R=o.call(j,new Ju("beforestart",{sourceEvent:F,target:g,identifier:q,active:c,x:X[0],y:X[1],dx:0,dy:0,dispatch:U}),B))!=null)return W=R.x-X[0]||0,K=R.y-X[1]||0,function $(z,D,M){var T=X,C;switch(z){case"start":l[q]=$,C=c++;break;case"end":delete l[q],--c;case"drag":X=Ht(M||D,V),C=c;break}U.call(z,j,new Ju(z,{sourceEvent:D,subject:R,target:g,identifier:q,active:C,x:X[0]+W,y:X[1]+K,dx:X[0]-T[0],dy:X[1]-T[1],dispatch:U}),B)}}return g.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Zi(!!j),g):t},g.container=function(j){return arguments.length?(r=typeof j=="function"?j:Zi(j),g):r},g.subject=function(j){return arguments.length?(o=typeof j=="function"?j:Zi(j),g):o},g.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:Zi(!!j),g):i},g.on=function(){var j=u.on.apply(u,arguments);return j===u?g:j},g.clickDistance=function(j){return arguments.length?(h=(j=+j)*j,g):Math.sqrt(h)},g}function xc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function Bm(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function js(){}var ys=.7,yl=1/ys,uo="\\s*([+-]?\\d+)\\s*",vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yy=/^#([0-9a-f]{3,8})$/,Xy=new RegExp(`^rgb\\(${uo},${uo},${uo}\\)$`),Qy=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),Gy=new RegExp(`^rgba\\(${uo},${uo},${uo},${vs}\\)$`),Ky=new RegExp(`^rgba\\(${en},${en},${en},${vs}\\)$`),qy=new RegExp(`^hsl\\(${vs},${en},${en}\\)$`),Zy=new RegExp(`^hsla\\(${vs},${en},${en},${vs}\\)$`),mp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xc(js,yr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:hp,formatHex:hp,formatHex8:Jy,formatHsl:ev,formatRgb:gp,toString:gp});function hp(){return this.rgb().formatHex()}function Jy(){return this.rgb().formatHex8()}function ev(){return Wm(this).formatHsl()}function gp(){return this.rgb().formatRgb()}function yr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=Yy.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?xp(r):o===3?new ht(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?Ji(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?Ji(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Xy.exec(t))?new ht(r[1],r[2],r[3],1):(r=Qy.exec(t))?new ht(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Gy.exec(t))?Ji(r[1],r[2],r[3],r[4]):(r=Ky.exec(t))?Ji(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=qy.exec(t))?wp(r[1],r[2]/100,r[3]/100,1):(r=Zy.exec(t))?wp(r[1],r[2]/100,r[3]/100,r[4]):mp.hasOwnProperty(t)?xp(mp[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function xp(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function Ji(t,r,o,i){return i<=0&&(t=r=o=NaN),new ht(t,r,o,i)}function tv(t){return t instanceof js||(t=yr(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function ec(t,r,o,i){return arguments.length===1?tv(t):new ht(t,r,o,i??1)}function ht(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}xc(ht,ec,Bm(js,{brighter(t){return t=t==null?yl:Math.pow(yl,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ys:Math.pow(ys,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(gr(this.r),gr(this.g),gr(this.b),vl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yp,formatHex:yp,formatHex8:nv,formatRgb:vp,toString:vp}));function yp(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}`}function nv(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}${mr((isNaN(this.opacity)?1:this.opacity)*255)}`}function vp(){const t=vl(this.opacity);return`${t===1?"rgb(":"rgba("}${gr(this.r)}, ${gr(this.g)}, ${gr(this.b)}${t===1?")":`, ${t})`}`}function vl(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mr(t){return t=gr(t),(t<16?"0":"")+t.toString(16)}function wp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Vt(t,r,o,i)}function Wm(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);if(t instanceof js||(t=yr(t)),!t)return new Vt;if(t instanceof Vt)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),u=Math.max(r,o,i),c=NaN,m=u-l,p=(u+l)/2;return m?(r===u?c=(o-i)/m+(o<i)*6:o===u?c=(i-r)/m+2:c=(r-o)/m+4,m/=p<.5?u+l:2-u-l,c*=60):m=p>0&&p<1?0:c,new Vt(c,m,p,t.opacity)}function rv(t,r,o,i){return arguments.length===1?Wm(t):new Vt(t,r,o,i??1)}function Vt(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}xc(Vt,rv,Bm(js,{brighter(t){return t=t==null?yl:Math.pow(yl,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ys:Math.pow(ys,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new ht(Fu(t>=240?t-240:t+120,l,i),Fu(t,l,i),Fu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Vt(Sp(this.h),el(this.s),el(this.l),vl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=vl(this.opacity);return`${t===1?"hsl(":"hsla("}${Sp(this.h)}, ${el(this.s)*100}%, ${el(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Sp(t){return t=(t||0)%360,t<0?t+360:t}function el(t){return Math.max(0,Math.min(1,t||0))}function Fu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const yc=t=>()=>t;function ov(t,r){return function(o){return t+o*r}}function sv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function iv(t){return(t=+t)==1?Um:function(r,o){return o-r?sv(r,o,t):yc(isNaN(r)?o:r)}}function Um(t,r){var o=r-t;return o?ov(t,o):yc(isNaN(t)?r:t)}const wl=(function t(r){var o=iv(r);function i(l,u){var c=o((l=ec(l)).r,(u=ec(u)).r),m=o(l.g,u.g),p=o(l.b,u.b),x=Um(l.opacity,u.opacity);return function(y){return l.r=c(y),l.g=m(y),l.b=p(y),l.opacity=x(y),l+""}}return i.gamma=t,i})(1);function lv(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(u){for(l=0;l<o;++l)i[l]=t[l]*(1-u)+r[l]*u;return i}}function av(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),u=new Array(o),c;for(c=0;c<i;++c)l[c]=hs(t[c],r[c]);for(;c<o;++c)u[c]=r[c];return function(m){for(c=0;c<i;++c)u[c]=l[c](m);return u}}function cv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function Jt(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function dv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=hs(t[l],r[l]):i[l]=r[l];return function(u){for(l in o)i[l]=o[l](u);return i}}var tc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hu=new RegExp(tc.source,"g");function fv(t){return function(){return t}}function pv(t){return function(r){return t(r)+""}}function Ym(t,r){var o=tc.lastIndex=Hu.lastIndex=0,i,l,u,c=-1,m=[],p=[];for(t=t+"",r=r+"";(i=tc.exec(t))&&(l=Hu.exec(r));)(u=l.index)>o&&(u=r.slice(o,u),m[c]?m[c]+=u:m[++c]=u),(i=i[0])===(l=l[0])?m[c]?m[c]+=l:m[++c]=l:(m[++c]=null,p.push({i:c,x:Jt(i,l)})),o=Hu.lastIndex;return o<r.length&&(u=r.slice(o),m[c]?m[c]+=u:m[++c]=u),m.length<2?p[0]?pv(p[0].x):fv(r):(r=p.length,function(x){for(var y=0,h;y<r;++y)m[(h=p[y]).i]=h.x(x);return m.join("")})}function hs(t,r){var o=typeof r,i;return r==null||o==="boolean"?yc(r):(o==="number"?Jt:o==="string"?(i=yr(r))?(r=i,wl):Ym:r instanceof yr?wl:r instanceof Date?cv:av(r)?lv:Array.isArray(r)?uv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?dv:Jt)(t,r)}var Np=180/Math.PI,nc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xm(t,r,o,i,l,u){var c,m,p;return(c=Math.sqrt(t*t+r*r))&&(t/=c,r/=c),(p=t*o+r*i)&&(o-=t*p,i-=r*p),(m=Math.sqrt(o*o+i*i))&&(o/=m,i/=m,p/=m),t*i<r*o&&(t=-t,r=-r,p=-p,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(r,t)*Np,skewX:Math.atan(p)*Np,scaleX:c,scaleY:m}}var tl;function mv(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?nc:Xm(r.a,r.b,r.c,r.d,r.e,r.f)}function hv(t){return t==null||(tl||(tl=document.createElementNS("http://www.w3.org/2000/svg","g")),tl.setAttribute("transform",t),!(t=tl.transform.baseVal.consolidate()))?nc:(t=t.matrix,Xm(t.a,t.b,t.c,t.d,t.e,t.f))}function Qm(t,r,o,i){function l(x){return x.length?x.pop()+" ":""}function u(x,y,h,g,w,S){if(x!==h||y!==g){var k=w.push("translate(",null,r,null,o);S.push({i:k-4,x:Jt(x,h)},{i:k-2,x:Jt(y,g)})}else(h||g)&&w.push("translate("+h+r+g+o)}function c(x,y,h,g){x!==y?(x-y>180?y+=360:y-x>180&&(x+=360),g.push({i:h.push(l(h)+"rotate(",null,i)-2,x:Jt(x,y)})):y&&h.push(l(h)+"rotate("+y+i)}function m(x,y,h,g){x!==y?g.push({i:h.push(l(h)+"skewX(",null,i)-2,x:Jt(x,y)}):y&&h.push(l(h)+"skewX("+y+i)}function p(x,y,h,g,w,S){if(x!==h||y!==g){var k=w.push(l(w)+"scale(",null,",",null,")");S.push({i:k-4,x:Jt(x,h)},{i:k-2,x:Jt(y,g)})}else(h!==1||g!==1)&&w.push(l(w)+"scale("+h+","+g+")")}return function(x,y){var h=[],g=[];return x=t(x),y=t(y),u(x.translateX,x.translateY,y.translateX,y.translateY,h,g),c(x.rotate,y.rotate,h,g),m(x.skewX,y.skewX,h,g),p(x.scaleX,x.scaleY,y.scaleX,y.scaleY,h,g),x=y=null,function(w){for(var S=-1,k=g.length,N;++S<k;)h[(N=g[S]).i]=N.x(w);return h.join("")}}}var gv=Qm(mv,"px, ","px)","deg)"),xv=Qm(hv,", ",")",")"),yv=1e-12;function kp(t){return((t=Math.exp(t))+1/t)/2}function vv(t){return((t=Math.exp(t))-1/t)/2}function wv(t){return((t=Math.exp(2*t))-1)/(t+1)}const fl=(function t(r,o,i){function l(u,c){var m=u[0],p=u[1],x=u[2],y=c[0],h=c[1],g=c[2],w=y-m,S=h-p,k=w*w+S*S,N,I;if(k<yv)I=Math.log(g/x)/r,N=function(B){return[m+B*w,p+B*S,x*Math.exp(r*B*I)]};else{var P=Math.sqrt(k),_=(g*g-x*x+i*k)/(2*x*o*P),j=(g*g-x*x-i*k)/(2*g*o*P),V=Math.log(Math.sqrt(_*_+1)-_),F=Math.log(Math.sqrt(j*j+1)-j);I=(F-V)/r,N=function(B){var q=B*I,O=kp(V),U=x/(o*P)*(O*wv(r*q+V)-vv(V));return[m+U*w,p+U*S,x*O/kp(r*q+V)]}}return N.duration=I*1e3*r/Math.SQRT2,N}return l.rho=function(u){var c=Math.max(.001,+u),m=c*c,p=m*m;return t(c,m,p)},l})(Math.SQRT2,2,4);var fo=0,ps=0,us=0,Gm=1e3,Sl,ms,Nl=0,vr=0,bl=0,ws=typeof performance=="object"&&performance.now?performance:Date,Km=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vc(){return vr||(Km(Sv),vr=ws.now()+bl)}function Sv(){vr=0}function kl(){this._call=this._time=this._next=null}kl.prototype=qm.prototype={constructor:kl,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?vc():+o)+(r==null?0:+r),!this._next&&ms!==this&&(ms?ms._next=this:Sl=this,ms=this),this._call=t,this._time=o,rc()},stop:function(){this._call&&(this._call=null,this._time=1/0,rc())}};function qm(t,r,o){var i=new kl;return i.restart(t,r,o),i}function Nv(){vc(),++fo;for(var t=Sl,r;t;)(r=vr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--fo}function Cp(){vr=(Nl=ws.now())+bl,fo=ps=0;try{Nv()}finally{fo=0,Cv(),vr=0}}function kv(){var t=ws.now(),r=t-Nl;r>Gm&&(bl-=r,Nl=t)}function Cv(){for(var t,r=Sl,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:Sl=o);ms=t,rc(i)}function rc(t){if(!fo){ps&&(ps=clearTimeout(ps));var r=t-vr;r>24?(t<1/0&&(ps=setTimeout(Cp,t-ws.now()-bl)),us&&(us=clearInterval(us))):(us||(Nl=ws.now(),us=setInterval(kv,Gm)),fo=1,Km(Cp))}}function Ip(t,r,o){var i=new kl;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var Iv=jl("start","end","cancel","interrupt"),Ev=[],Zm=0,Ep=1,oc=2,pl=3,_p=4,sc=5,ml=6;function Pl(t,r,o,i,l,u){var c=t.__transition;if(!c)t.__transition={};else if(o in c)return;_v(t,o,{name:r,index:i,group:l,on:Iv,tween:Ev,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Zm})}function wc(t,r){var o=Yt(t,r);if(o.state>Zm)throw new Error("too late; already scheduled");return o}function rn(t,r){var o=Yt(t,r);if(o.state>pl)throw new Error("too late; already running");return o}function Yt(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function _v(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=qm(u,0,o.time);function u(x){o.state=Ep,o.timer.restart(c,o.delay,o.time),o.delay<=x&&c(x-o.delay)}function c(x){var y,h,g,w;if(o.state!==Ep)return p();for(y in i)if(w=i[y],w.name===o.name){if(w.state===pl)return Ip(c);w.state===_p?(w.state=ml,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[y]):+y<r&&(w.state=ml,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[y])}if(Ip(function(){o.state===pl&&(o.state=_p,o.timer.restart(m,o.delay,o.time),m(x))}),o.state=oc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===oc){for(o.state=pl,l=new Array(g=o.tween.length),y=0,h=-1;y<g;++y)(w=o.tween[y].value.call(t,t.__data__,o.index,o.group))&&(l[++h]=w);l.length=h+1}}function m(x){for(var y=x<o.duration?o.ease.call(null,x/o.duration):(o.timer.restart(p),o.state=sc,1),h=-1,g=l.length;++h<g;)l[h].call(t,y);o.state===sc&&(o.on.call("end",t,t.__data__,o.index,o.group),p())}function p(){o.state=ml,o.timer.stop(),delete i[r];for(var x in i)return;delete t.__transition}}function hl(t,r){var o=t.__transition,i,l,u=!0,c;if(o){r=r==null?null:r+"";for(c in o){if((i=o[c]).name!==r){u=!1;continue}l=i.state>oc&&i.state<sc,i.state=ml,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[c]}u&&delete t.__transition}}function jv(t){return this.each(function(){hl(this,t)})}function Mv(t,r){var o,i;return function(){var l=rn(this,t),u=l.tween;if(u!==o){i=o=u;for(var c=0,m=i.length;c<m;++c)if(i[c].name===r){i=i.slice(),i.splice(c,1);break}}l.tween=i}}function bv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var u=rn(this,t),c=u.tween;if(c!==i){l=(i=c).slice();for(var m={name:r,value:o},p=0,x=l.length;p<x;++p)if(l[p].name===r){l[p]=m;break}p===x&&l.push(m)}u.tween=l}}function Pv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=Yt(this.node(),o).tween,l=0,u=i.length,c;l<u;++l)if((c=i[l]).name===t)return c.value;return null}return this.each((r==null?Mv:bv)(o,t,r))}function Sc(t,r,o){var i=t._id;return t.each(function(){var l=rn(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return Yt(l,i).value[r]}}function Jm(t,r){var o;return(typeof r=="number"?Jt:r instanceof yr?wl:(o=yr(r))?(r=o,wl):Ym)(t,r)}function Dv(t){return function(){this.removeAttribute(t)}}function Tv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ov(t,r,o){var i,l=o+"",u;return function(){var c=this.getAttribute(t);return c===l?null:c===i?u:u=r(i=c,o)}}function Av(t,r,o){var i,l=o+"",u;return function(){var c=this.getAttributeNS(t.space,t.local);return c===l?null:c===i?u:u=r(i=c,o)}}function $v(t,r,o){var i,l,u;return function(){var c,m=o(this),p;return m==null?void this.removeAttribute(t):(c=this.getAttribute(t),p=m+"",c===p?null:c===i&&p===l?u:(l=p,u=r(i=c,m)))}}function zv(t,r,o){var i,l,u;return function(){var c,m=o(this),p;return m==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),p=m+"",c===p?null:c===i&&p===l?u:(l=p,u=r(i=c,m)))}}function Lv(t,r){var o=Ml(t),i=o==="transform"?xv:Jm;return this.attrTween(t,typeof r=="function"?(o.local?zv:$v)(o,i,Sc(this,"attr."+t,r)):r==null?(o.local?Tv:Dv)(o):(o.local?Av:Ov)(o,i,r))}function Rv(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function Fv(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function Hv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Fv(t,u)),o}return l._value=r,l}function Vv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Rv(t,u)),o}return l._value=r,l}function Bv(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=Ml(t);return this.tween(o,(i.local?Hv:Vv)(i,r))}function Wv(t,r){return function(){wc(this,t).delay=+r.apply(this,arguments)}}function Uv(t,r){return r=+r,function(){wc(this,t).delay=r}}function Yv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Wv:Uv)(r,t)):Yt(this.node(),r).delay}function Xv(t,r){return function(){rn(this,t).duration=+r.apply(this,arguments)}}function Qv(t,r){return r=+r,function(){rn(this,t).duration=r}}function Gv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Xv:Qv)(r,t)):Yt(this.node(),r).duration}function Kv(t,r){if(typeof r!="function")throw new Error;return function(){rn(this,t).ease=r}}function qv(t){var r=this._id;return arguments.length?this.each(Kv(r,t)):Yt(this.node(),r).ease}function Zv(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;rn(this,t).ease=o}}function Jv(t){if(typeof t!="function")throw new Error;return this.each(Zv(this._id,t))}function ew(t){typeof t!="function"&&(t=bm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,m=i[l]=[],p,x=0;x<c;++x)(p=u[x])&&t.call(p,p.__data__,x,u)&&m.push(p);return new vn(i,this._parents,this._name,this._id)}function tw(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,u=Math.min(i,l),c=new Array(i),m=0;m<u;++m)for(var p=r[m],x=o[m],y=p.length,h=c[m]=new Array(y),g,w=0;w<y;++w)(g=p[w]||x[w])&&(h[w]=g);for(;m<i;++m)c[m]=r[m];return new vn(c,this._parents,this._name,this._id)}function nw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function rw(t,r,o){var i,l,u=nw(r)?wc:rn;return function(){var c=u(this,t),m=c.on;m!==i&&(l=(i=m).copy()).on(r,o),c.on=l}}function ow(t,r){var o=this._id;return arguments.length<2?Yt(this.node(),o).on.on(t):this.each(rw(o,t,r))}function sw(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function iw(){return this.on("end.remove",sw(this._id))}function lw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=hc(t));for(var i=this._groups,l=i.length,u=new Array(l),c=0;c<l;++c)for(var m=i[c],p=m.length,x=u[c]=new Array(p),y,h,g=0;g<p;++g)(y=m[g])&&(h=t.call(y,y.__data__,g,m))&&("__data__"in y&&(h.__data__=y.__data__),x[g]=h,Pl(x[g],r,o,g,x,Yt(y,o)));return new vn(u,this._parents,r,o)}function aw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Mm(t));for(var i=this._groups,l=i.length,u=[],c=[],m=0;m<l;++m)for(var p=i[m],x=p.length,y,h=0;h<x;++h)if(y=p[h]){for(var g=t.call(y,y.__data__,h,p),w,S=Yt(y,o),k=0,N=g.length;k<N;++k)(w=g[k])&&Pl(w,r,o,k,g,S);u.push(g),c.push(y)}return new vn(u,c,r,o)}var uw=_s.prototype.constructor;function cw(){return new uw(this._groups,this._parents)}function dw(t,r){var o,i,l;return function(){var u=co(this,t),c=(this.style.removeProperty(t),co(this,t));return u===c?null:u===o&&c===i?l:l=r(o=u,i=c)}}function eh(t){return function(){this.style.removeProperty(t)}}function fw(t,r,o){var i,l=o+"",u;return function(){var c=co(this,t);return c===l?null:c===i?u:u=r(i=c,o)}}function pw(t,r,o){var i,l,u;return function(){var c=co(this,t),m=o(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(t),co(this,t))),c===p?null:c===i&&p===l?u:(l=p,u=r(i=c,m))}}function mw(t,r){var o,i,l,u="style."+r,c="end."+u,m;return function(){var p=rn(this,t),x=p.on,y=p.value[u]==null?m||(m=eh(r)):void 0;(x!==o||l!==y)&&(i=(o=x).copy()).on(c,l=y),p.on=i}}function hw(t,r,o){var i=(t+="")=="transform"?gv:Jm;return r==null?this.styleTween(t,dw(t,i)).on("end.style."+t,eh(t)):typeof r=="function"?this.styleTween(t,pw(t,i,Sc(this,"style."+t,r))).each(mw(this._id,t)):this.styleTween(t,fw(t,i,r),o).on("end.style."+t,null)}function gw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function xw(t,r,o){var i,l;function u(){var c=r.apply(this,arguments);return c!==l&&(i=(l=c)&&gw(t,c,o)),i}return u._value=r,u}function yw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,xw(t,r,o??""))}function vw(t){return function(){this.textContent=t}}function ww(t){return function(){var r=t(this);this.textContent=r??""}}function Sw(t){return this.tween("text",typeof t=="function"?ww(Sc(this,"text",t)):vw(t==null?"":t+""))}function Nw(t){return function(r){this.textContent=t.call(this,r)}}function kw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&Nw(l)),r}return i._value=t,i}function Cw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kw(t))}function Iw(){for(var t=this._name,r=this._id,o=th(),i=this._groups,l=i.length,u=0;u<l;++u)for(var c=i[u],m=c.length,p,x=0;x<m;++x)if(p=c[x]){var y=Yt(p,r);Pl(p,t,o,x,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new vn(i,this._parents,t,o)}function Ew(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(u,c){var m={value:c},p={value:function(){--l===0&&u()}};o.each(function(){var x=rn(this,i),y=x.on;y!==t&&(r=(t=y).copy(),r._.cancel.push(m),r._.interrupt.push(m),r._.end.push(p)),x.on=r}),l===0&&u()})}var _w=0;function vn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function th(){return++_w}var xn=_s.prototype;vn.prototype={constructor:vn,select:lw,selectAll:aw,selectChild:xn.selectChild,selectChildren:xn.selectChildren,filter:ew,merge:tw,selection:cw,transition:Iw,call:xn.call,nodes:xn.nodes,node:xn.node,size:xn.size,empty:xn.empty,each:xn.each,on:ow,attr:Lv,attrTween:Bv,style:hw,styleTween:yw,text:Sw,textTween:Cw,remove:iw,tween:Pv,delay:Yv,duration:Gv,ease:qv,easeVarying:Jv,end:Ew,[Symbol.iterator]:xn[Symbol.iterator]};function jw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Mw={time:null,delay:0,duration:250,ease:jw};function bw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Pw(t){var r,o;t instanceof vn?(r=t._id,t=t._name):(r=th(),(o=Mw).time=vc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,u=0;u<l;++u)for(var c=i[u],m=c.length,p,x=0;x<m;++x)(p=c[x])&&Pl(p,t,r,x,c,o||bw(p,r));return new vn(i,this._parents,t,r)}_s.prototype.interrupt=jv;_s.prototype.transition=Pw;const nl=t=>()=>t;function Dw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function yn(t,r,o){this.k=t,this.x=r,this.y=o}yn.prototype={constructor:yn,scale:function(t){return t===1?this:new yn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new yn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dl=new yn(1,0,0);nh.prototype=yn.prototype;function nh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Dl;return t.__zoom}function Vu(t){t.stopImmediatePropagation()}function cs(t){t.preventDefault(),t.stopImmediatePropagation()}function Tw(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ow(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function jp(){return this.__zoom||Dl}function Aw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function $w(){return navigator.maxTouchPoints||"ontouchstart"in this}function zw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],u=t.invertY(r[0][1])-o[0][1],c=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function rh(){var t=Tw,r=Ow,o=zw,i=Aw,l=$w,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],m=250,p=fl,x=jl("start","zoom","end"),y,h,g,w=500,S=150,k=0,N=10;function I(R){R.property("__zoom",jp).on("wheel.zoom",q,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",U).filter(l).on("touchstart.zoom",X).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function(R,$,z,D){var M=R.selection?R.selection():R;M.property("__zoom",jp),R!==M?V(R,$,z,D):M.interrupt().each(function(){F(this,arguments).event(D).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},I.scaleBy=function(R,$,z,D){I.scaleTo(R,function(){var M=this.__zoom.k,T=typeof $=="function"?$.apply(this,arguments):$;return M*T},z,D)},I.scaleTo=function(R,$,z,D){I.transform(R,function(){var M=r.apply(this,arguments),T=this.__zoom,C=z==null?j(M):typeof z=="function"?z.apply(this,arguments):z,b=T.invert(C),A=typeof $=="function"?$.apply(this,arguments):$;return o(_(P(T,A),C,b),M,c)},z,D)},I.translateBy=function(R,$,z,D){I.transform(R,function(){return o(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof z=="function"?z.apply(this,arguments):z),r.apply(this,arguments),c)},null,D)},I.translateTo=function(R,$,z,D,M){I.transform(R,function(){var T=r.apply(this,arguments),C=this.__zoom,b=D==null?j(T):typeof D=="function"?D.apply(this,arguments):D;return o(Dl.translate(b[0],b[1]).scale(C.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof z=="function"?-z.apply(this,arguments):-z),T,c)},D,M)};function P(R,$){return $=Math.max(u[0],Math.min(u[1],$)),$===R.k?R:new yn($,R.x,R.y)}function _(R,$,z){var D=$[0]-z[0]*R.k,M=$[1]-z[1]*R.k;return D===R.x&&M===R.y?R:new yn(R.k,D,M)}function j(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function V(R,$,z,D){R.on("start.zoom",function(){F(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(D).end()}).tween("zoom",function(){var M=this,T=arguments,C=F(M,T).event(D),b=r.apply(M,T),A=z==null?j(b):typeof z=="function"?z.apply(M,T):z,G=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),Z=M.__zoom,ne=typeof $=="function"?$.apply(M,T):$,oe=p(Z.invert(A).concat(G/Z.k),ne.invert(A).concat(G/ne.k));return function(ae){if(ae===1)ae=ne;else{var re=oe(ae),ce=G/re[2];ae=new yn(ce,A[0]-re[0]*ce,A[1]-re[1]*ce)}C.zoom(null,ae)}})}function F(R,$,z){return!z&&R.__zooming||new B(R,$)}function B(R,$){this.that=R,this.args=$,this.active=0,this.sourceEvent=null,this.extent=r.apply(R,$),this.taps=0}B.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,$){return this.mouse&&R!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var $=kt(this.that).datum();x.call(R,this.that,new Dw(R,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:x}),$)}};function q(R,...$){if(!t.apply(this,arguments))return;var z=F(this,$).event(R),D=this.__zoom,M=Math.max(u[0],Math.min(u[1],D.k*Math.pow(2,i.apply(this,arguments)))),T=Ht(R);if(z.wheel)(z.mouse[0][0]!==T[0]||z.mouse[0][1]!==T[1])&&(z.mouse[1]=D.invert(z.mouse[0]=T)),clearTimeout(z.wheel);else{if(D.k===M)return;z.mouse=[T,D.invert(T)],hl(this),z.start()}cs(R),z.wheel=setTimeout(C,S),z.zoom("mouse",o(_(P(D,M),z.mouse[0],z.mouse[1]),z.extent,c));function C(){z.wheel=null,z.end()}}function O(R,...$){if(g||!t.apply(this,arguments))return;var z=R.currentTarget,D=F(this,$,!0).event(R),M=kt(R.view).on("mousemove.zoom",A,!0).on("mouseup.zoom",G,!0),T=Ht(R,z),C=R.clientX,b=R.clientY;Fm(R.view),Vu(R),D.mouse=[T,this.__zoom.invert(T)],hl(this),D.start();function A(Z){if(cs(Z),!D.moved){var ne=Z.clientX-C,oe=Z.clientY-b;D.moved=ne*ne+oe*oe>k}D.event(Z).zoom("mouse",o(_(D.that.__zoom,D.mouse[0]=Ht(Z,z),D.mouse[1]),D.extent,c))}function G(Z){M.on("mousemove.zoom mouseup.zoom",null),Hm(Z.view,D.moved),cs(Z),D.event(Z).end()}}function U(R,...$){if(t.apply(this,arguments)){var z=this.__zoom,D=Ht(R.changedTouches?R.changedTouches[0]:R,this),M=z.invert(D),T=z.k*(R.shiftKey?.5:2),C=o(_(P(z,T),D,M),r.apply(this,$),c);cs(R),m>0?kt(this).transition().duration(m).call(V,C,D,R):kt(this).call(I.transform,C,D,R)}}function X(R,...$){if(t.apply(this,arguments)){var z=R.touches,D=z.length,M=F(this,$,R.changedTouches.length===D).event(R),T,C,b,A;for(Vu(R),C=0;C<D;++C)b=z[C],A=Ht(b,this),A=[A,this.__zoom.invert(A),b.identifier],M.touch0?!M.touch1&&M.touch0[2]!==A[2]&&(M.touch1=A,M.taps=0):(M.touch0=A,T=!0,M.taps=1+!!y);y&&(y=clearTimeout(y)),T&&(M.taps<2&&(h=A[0],y=setTimeout(function(){y=null},w)),hl(this),M.start())}}function W(R,...$){if(this.__zooming){var z=F(this,$).event(R),D=R.changedTouches,M=D.length,T,C,b,A;for(cs(R),T=0;T<M;++T)C=D[T],b=Ht(C,this),z.touch0&&z.touch0[2]===C.identifier?z.touch0[0]=b:z.touch1&&z.touch1[2]===C.identifier&&(z.touch1[0]=b);if(C=z.that.__zoom,z.touch1){var G=z.touch0[0],Z=z.touch0[1],ne=z.touch1[0],oe=z.touch1[1],ae=(ae=ne[0]-G[0])*ae+(ae=ne[1]-G[1])*ae,re=(re=oe[0]-Z[0])*re+(re=oe[1]-Z[1])*re;C=P(C,Math.sqrt(ae/re)),b=[(G[0]+ne[0])/2,(G[1]+ne[1])/2],A=[(Z[0]+oe[0])/2,(Z[1]+oe[1])/2]}else if(z.touch0)b=z.touch0[0],A=z.touch0[1];else return;z.zoom("touch",o(_(C,b,A),z.extent,c))}}function K(R,...$){if(this.__zooming){var z=F(this,$).event(R),D=R.changedTouches,M=D.length,T,C;for(Vu(R),g&&clearTimeout(g),g=setTimeout(function(){g=null},w),T=0;T<M;++T)C=D[T],z.touch0&&z.touch0[2]===C.identifier?delete z.touch0:z.touch1&&z.touch1[2]===C.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(C=Ht(C,this),Math.hypot(h[0]-C[0],h[1]-C[1])<N)){var b=kt(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return I.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:nl(+R),I):i},I.filter=function(R){return arguments.length?(t=typeof R=="function"?R:nl(!!R),I):t},I.touchable=function(R){return arguments.length?(l=typeof R=="function"?R:nl(!!R),I):l},I.extent=function(R){return arguments.length?(r=typeof R=="function"?R:nl([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),I):r},I.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],I):[u[0],u[1]]},I.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],I):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},I.constrain=function(R){return arguments.length?(o=R,I):o},I.duration=function(R){return arguments.length?(m=+R,I):m},I.interpolate=function(R){return arguments.length?(p=R,I):p},I.on=function(){var R=x.on.apply(x,arguments);return R===x?I:R},I.clickDistance=function(R){return arguments.length?(k=(R=+R)*R,I):Math.sqrt(k)},I.tapDistance=function(R){return arguments.length?(N=+R,I):N},I}const tn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],oh=["Enter"," ","Escape"],sh={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var po;(function(t){t.Strict="strict",t.Loose="loose"})(po||(po={}));var xr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(xr||(xr={}));var Ns;(function(t){t.Partial="partial",t.Full="full"})(Ns||(Ns={}));const ih={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Un;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Un||(Un={}));var Cl;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Cl||(Cl={}));var ye;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ye||(ye={}));const Mp={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function lh(t){return t===null?null:t?"valid":"invalid"}const ah=t=>"id"in t&&"source"in t&&"target"in t,Lw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Nc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Ms=(t,r=[0,0])=>{const{width:o,height:i}=wn(t),l=t.origin??r,u=o*l[0],c=i*l[1];return{x:t.position.x-u,y:t.position.y-c}},Rw=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const u=typeof l=="string";let c=!r.nodeLookup&&!u?l:void 0;r.nodeLookup&&(c=u?r.nodeLookup.get(l):Nc(l)?l:r.nodeLookup.get(l.id));const m=c?Il(c,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Tl(i,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ol(o)},bs=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Tl(o,Il(l)),i=!0)}),i?Ol(o):{x:0,y:0,width:0,height:0}},kc=(t,r,[o,i,l]=[0,0,1],u=!1,c=!1)=>{const m={...Ds(r,[o,i,l]),width:r.width/l,height:r.height/l},p=[];for(const x of t.values()){const{measured:y,selectable:h=!0,hidden:g=!1}=x;if(c&&!h||g)continue;const w=y.width??x.width??x.initialWidth??null,S=y.height??x.height??x.initialHeight??null,k=ks(m,ho(x)),N=(w??0)*(S??0),I=u&&k>0;(!x.internals.handleBounds||I||k>=N||x.dragging)&&p.push(x)}return p},Fw=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function Hw(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function Vw({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:u},c){if(t.size===0)return Promise.resolve(!0);const m=Hw(t,c),p=bs(m),x=Cc(p,r,o,(c==null?void 0:c.minZoom)??l,(c==null?void 0:c.maxZoom)??u,(c==null?void 0:c.padding)??.1);return await i.setViewport(x,{duration:c==null?void 0:c.duration,ease:c==null?void 0:c.ease,interpolate:c==null?void 0:c.interpolate}),Promise.resolve(!0)}function uh({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:u}){const c=o.get(t),m=c.parentId?o.get(c.parentId):void 0,{x:p,y:x}=m?m.internals.positionAbsolute:{x:0,y:0},y=c.origin??i;let h=c.extent||l;if(c.extent==="parent"&&!c.expandParent)if(!m)u==null||u("005",tn.error005());else{const w=m.measured.width,S=m.measured.height;w&&S&&(h=[[p,x],[p+w,x+S]])}else m&&go(c.extent)&&(h=[[c.extent[0][0]+p,c.extent[0][1]+x],[c.extent[1][0]+p,c.extent[1][1]+x]]);const g=go(h)?wr(r,h,c.measured):r;return(c.measured.width===void 0||c.measured.height===void 0)&&(u==null||u("015",tn.error015())),{position:{x:g.x-p+(c.measured.width??0)*y[0],y:g.y-x+(c.measured.height??0)*y[1]},positionAbsolute:g}}async function Bw({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const u=new Set(t.map(g=>g.id)),c=[];for(const g of o){if(g.deletable===!1)continue;const w=u.has(g.id),S=!w&&g.parentId&&c.find(k=>k.id===g.parentId);(w||S)&&c.push(g)}const m=new Set(r.map(g=>g.id)),p=i.filter(g=>g.deletable!==!1),y=Fw(c,p);for(const g of p)m.has(g.id)&&!y.find(S=>S.id===g.id)&&y.push(g);if(!l)return{edges:y,nodes:c};const h=await l({nodes:c,edges:y});return typeof h=="boolean"?h?{edges:y,nodes:c}:{edges:[],nodes:[]}:h}const mo=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),wr=(t={x:0,y:0},r,o)=>({x:mo(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:mo(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function ch(t,r,o){const{width:i,height:l}=wn(o),{x:u,y:c}=o.internals.positionAbsolute;return wr(t,[[u,c],[u+i,c+l]],r)}const bp=(t,r,o)=>t<r?mo(Math.abs(t-r),1,r)/r:t>o?-mo(Math.abs(t-o),1,r)/r:0,dh=(t,r,o=15,i=40)=>{const l=bp(t.x,i,r.width-i)*o,u=bp(t.y,i,r.height-i)*o;return[l,u]},Tl=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),ic=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Ol=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),ho=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=Nc(t)?t.internals.positionAbsolute:Ms(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0}},Il=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=Nc(t)?t.internals.positionAbsolute:Ms(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0)}},fh=(t,r)=>Ol(Tl(ic(t),ic(r))),ks=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Pp=t=>Wt(t.width)&&Wt(t.height)&&Wt(t.x)&&Wt(t.y),Wt=t=>!isNaN(t)&&isFinite(t),Ww=(t,r)=>{},Ps=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),Ds=({x:t,y:r},[o,i,l],u=!1,c=[1,1])=>{const m={x:(t-o)/l,y:(r-i)/l};return u?Ps(m,c):m},El=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function ro(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Uw(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=ro(t,o),l=ro(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=ro(t.top??t.y??0,o),l=ro(t.bottom??t.y??0,o),u=ro(t.left??t.x??0,r),c=ro(t.right??t.x??0,r);return{top:i,right:c,bottom:l,left:u,x:u+c,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Yw(t,r,o,i,l,u){const{x:c,y:m}=El(t,[r,o,i]),{x:p,y:x}=El({x:t.x+t.width,y:t.y+t.height},[r,o,i]),y=l-p,h=u-x;return{left:Math.floor(c),top:Math.floor(m),right:Math.floor(y),bottom:Math.floor(h)}}const Cc=(t,r,o,i,l,u)=>{const c=Uw(u,r,o),m=(r-c.x)/t.width,p=(o-c.y)/t.height,x=Math.min(m,p),y=mo(x,i,l),h=t.x+t.width/2,g=t.y+t.height/2,w=r/2-h*y,S=o/2-g*y,k=Yw(t,w,S,y,r,o),N={left:Math.min(k.left-c.left,0),top:Math.min(k.top-c.top,0),right:Math.min(k.right-c.right,0),bottom:Math.min(k.bottom-c.bottom,0)};return{x:w-N.left+N.right,y:S-N.top+N.bottom,zoom:y}},Cs=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function go(t){return t!=null&&t!=="parent"}function wn(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function ph(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function mh(t,r={width:0,height:0},o,i,l){const u={...t},c=i.get(o);if(c){const m=c.origin||l;u.x+=c.internals.positionAbsolute.x-(r.width??0)*m[0],u.y+=c.internals.positionAbsolute.y-(r.height??0)*m[1]}return u}function Dp(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function Xw(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function Qw(t){return{...sh,...t||{}}}function gs(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:u,y:c}=Ut(t),m=Ds({x:u-((l==null?void 0:l.left)??0),y:c-((l==null?void 0:l.top)??0)},i),{x:p,y:x}=o?Ps(m,r):m;return{xSnapped:p,ySnapped:x,...m}}const Ic=t=>({width:t.offsetWidth,height:t.offsetHeight}),hh=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},Gw=["INPUT","SELECT","TEXTAREA"];function gh(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:Gw.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const xh=t=>"clientX"in t,Ut=(t,r)=>{var u,c;const o=xh(t),i=o?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,l=o?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Tp=(t,r,o,i,l)=>{const u=r.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(c=>{const m=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:l,position:c.getAttribute("data-handlepos"),x:(m.left-o.left)/i,y:(m.top-o.top)/i,...Ic(c)}})};function yh({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:m}){const p=t*.125+l*.375+c*.375+o*.125,x=r*.125+u*.375+m*.375+i*.125,y=Math.abs(p-t),h=Math.abs(x-r);return[p,x,y,h]}function rl(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Op({pos:t,x1:r,y1:o,x2:i,y2:l,c:u}){switch(t){case ye.Left:return[r-rl(r-i,u),o];case ye.Right:return[r+rl(i-r,u),o];case ye.Top:return[r,o-rl(o-l,u)];case ye.Bottom:return[r,o+rl(l-o,u)]}}function Al({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top,curvature:c=.25}){const[m,p]=Op({pos:o,x1:t,y1:r,x2:i,y2:l,c}),[x,y]=Op({pos:u,x1:i,y1:l,x2:t,y2:r,c}),[h,g,w,S]=yh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:m,sourceControlY:p,targetControlX:x,targetControlY:y});return[`M${t},${r} C${m},${p} ${x},${y} ${i},${l}`,h,g,w,S]}function vh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,u=o<t?o+l:o-l,c=Math.abs(i-r)/2,m=i<r?i+c:i-c;return[u,m,l,c]}function Kw({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const c=l&&o?i+1e3:i,m=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return c+m}function qw({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const u=Tl(Il(t),Il(r));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return ks(c,Ol(u))>0}const Zw=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,Jw=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),e1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||Zw;let l;return ah(t)?l={...t}:l={...t,id:i(t)},Jw(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function wh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,u,c,m]=vh({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,u,c,m]}const Ap={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},t1=({source:t,sourcePosition:r=ye.Bottom,target:o})=>r===ye.Left||r===ye.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},$p=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function n1({source:t,sourcePosition:r=ye.Bottom,target:o,targetPosition:i=ye.Top,center:l,offset:u,stepPosition:c}){const m=Ap[r],p=Ap[i],x={x:t.x+m.x*u,y:t.y+m.y*u},y={x:o.x+p.x*u,y:o.y+p.y*u},h=t1({source:x,sourcePosition:r,target:y}),g=h.x!==0?"x":"y",w=h[g];let S=[],k,N;const I={x:0,y:0},P={x:0,y:0},[,,_,j]=vh({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(m[g]*p[g]===-1){g==="x"?(k=l.x??x.x+(y.x-x.x)*c,N=l.y??(x.y+y.y)/2):(k=l.x??(x.x+y.x)/2,N=l.y??x.y+(y.y-x.y)*c);const F=[{x:k,y:x.y},{x:k,y:y.y}],B=[{x:x.x,y:N},{x:y.x,y:N}];m[g]===w?S=g==="x"?F:B:S=g==="x"?B:F}else{const F=[{x:x.x,y:y.y}],B=[{x:y.x,y:x.y}];if(g==="x"?S=m.x===w?B:F:S=m.y===w?F:B,r===i){const W=Math.abs(t[g]-o[g]);if(W<=u){const K=Math.min(u-1,u-W);m[g]===w?I[g]=(x[g]>t[g]?-1:1)*K:P[g]=(y[g]>o[g]?-1:1)*K}}if(r!==i){const W=g==="x"?"y":"x",K=m[g]===p[W],R=x[W]>y[W],$=x[W]<y[W];(m[g]===1&&(!K&&R||K&&$)||m[g]!==1&&(!K&&$||K&&R))&&(S=g==="x"?F:B)}const q={x:x.x+I.x,y:x.y+I.y},O={x:y.x+P.x,y:y.y+P.y},U=Math.max(Math.abs(q.x-S[0].x),Math.abs(O.x-S[0].x)),X=Math.max(Math.abs(q.y-S[0].y),Math.abs(O.y-S[0].y));U>=X?(k=(q.x+O.x)/2,N=S[0].y):(k=S[0].x,N=(q.y+O.y)/2)}return[[t,{x:x.x+I.x,y:x.y+I.y},...S,{x:y.x+P.x,y:y.y+P.y},o],k,N,_,j]}function r1(t,r,o,i){const l=Math.min($p(t,r)/2,$p(r,o)/2,i),{x:u,y:c}=r;if(t.x===u&&u===o.x||t.y===c&&c===o.y)return`L${u} ${c}`;if(t.y===c){const x=t.x<o.x?-1:1,y=t.y<o.y?1:-1;return`L ${u+l*x},${c}Q ${u},${c} ${u},${c+l*y}`}const m=t.x<o.x?1:-1,p=t.y<o.y?-1:1;return`L ${u},${c+l*p}Q ${u},${c} ${u+l*m},${c}`}function lc({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top,borderRadius:c=5,centerX:m,centerY:p,offset:x=20,stepPosition:y=.5}){const[h,g,w,S,k]=n1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:u,center:{x:m,y:p},offset:x,stepPosition:y});return[h.reduce((I,P,_)=>{let j="";return _>0&&_<h.length-1?j=r1(h[_-1],P,h[_+1],c):j=`${_===0?"M":"L"}${P.x} ${P.y}`,I+=j,I},""),g,w,S,k]}function zp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function o1(t){var h;const{sourceNode:r,targetNode:o}=t;if(!zp(r)||!zp(o))return null;const i=r.internals.handleBounds||Lp(r.handles),l=o.internals.handleBounds||Lp(o.handles),u=Rp((i==null?void 0:i.source)??[],t.sourceHandle),c=Rp(t.connectionMode===po.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!u||!c)return(h=t.onError)==null||h.call(t,"008",tn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=(u==null?void 0:u.position)||ye.Bottom,p=(c==null?void 0:c.position)||ye.Top,x=Sr(r,u,m),y=Sr(o,c,p);return{sourceX:x.x,sourceY:x.y,targetX:y.x,targetY:y.y,sourcePosition:m,targetPosition:p}}function Lp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function Sr(t,r,o=ye.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,u=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:c,height:m}=r??wn(t);if(i)return{x:l+c/2,y:u+m/2};switch((r==null?void 0:r.position)??o){case ye.Top:return{x:l+c/2,y:u};case ye.Right:return{x:l+c,y:u+m/2};case ye.Bottom:return{x:l+c/2,y:u+m};case ye.Left:return{x:l,y:u+m/2}}}function Rp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function ac(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function s1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const u=new Set;return t.reduce((c,m)=>([m.markerStart||i,m.markerEnd||l].forEach(p=>{if(p&&typeof p=="object"){const x=ac(p,r);u.has(x)||(c.push({id:x,color:p.color||o,...p}),u.add(x))}}),c),[]).sort((c,m)=>c.id.localeCompare(m.id))}const Sh=1e3,i1=10,Ec={nodeOrigin:[0,0],nodeExtent:Ss,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},l1={...Ec,checkEquality:!0};function _c(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function a1(t,r,o){const i=_c(Ec,o);for(const l of t.values())if(l.parentId)Mc(l,t,r,i);else{const u=Ms(l,i.nodeOrigin),c=go(l.extent)?l.extent:i.nodeExtent,m=wr(u,c,wn(l));l.internals.positionAbsolute=m}}function u1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(u):l.type==="target"&&i.push(u)}return{source:o,target:i}}function jc(t){return t==="manual"}function uc(t,r,o,i={}){var x,y;const l=_c(l1,i),u={i:0},c=new Map(r),m=l!=null&&l.elevateNodesOnSelect&&!jc(l.zIndexMode)?Sh:0;let p=t.length>0;r.clear(),o.clear();for(const h of t){let g=c.get(h.id);if(l.checkEquality&&h===(g==null?void 0:g.internals.userNode))r.set(h.id,g);else{const w=Ms(h,l.nodeOrigin),S=go(h.extent)?h.extent:l.nodeExtent,k=wr(w,S,wn(h));g={...l.defaults,...h,measured:{width:(x=h.measured)==null?void 0:x.width,height:(y=h.measured)==null?void 0:y.height},internals:{positionAbsolute:k,handleBounds:u1(h,g),z:Nh(h,m,l.zIndexMode),userNode:h}},r.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(p=!1),h.parentId&&Mc(g,r,o,i,u)}return p}function c1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function Mc(t,r,o,i,l){const{elevateNodesOnSelect:u,nodeOrigin:c,nodeExtent:m,zIndexMode:p}=_c(Ec,i),x=t.parentId,y=r.get(x);if(!y){console.warn(`Parent node ${x} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}c1(t,o),l&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++l.i,y.internals.z=y.internals.z+l.i*i1),l&&y.internals.rootParentIndex!==void 0&&(l.i=y.internals.rootParentIndex);const h=u&&!jc(p)?Sh:0,{x:g,y:w,z:S}=d1(t,y,c,m,h,p),{positionAbsolute:k}=t.internals,N=g!==k.x||w!==k.y;(N||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:g,y:w}:k,z:S}})}function Nh(t,r,o){const i=Wt(t.zIndex)?t.zIndex:0;return jc(o)?i:i+(t.selected?r:0)}function d1(t,r,o,i,l,u){const{x:c,y:m}=r.internals.positionAbsolute,p=wn(t),x=Ms(t,o),y=go(t.extent)?wr(x,t.extent,p):x;let h=wr({x:c+y.x,y:m+y.y},i,p);t.extent==="parent"&&(h=ch(h,p,r));const g=Nh(t,l,u),w=r.internals.z??0;return{x:h.x,y:h.y,z:w>=g?w+1:g}}function bc(t,r,o,i=[0,0]){var c;const l=[],u=new Map;for(const m of t){const p=r.get(m.parentId);if(!p)continue;const x=((c=u.get(m.parentId))==null?void 0:c.expandedRect)??ho(p),y=fh(x,m.rect);u.set(m.parentId,{expandedRect:y,parent:p})}return u.size>0&&u.forEach(({expandedRect:m,parent:p},x)=>{var _;const y=p.internals.positionAbsolute,h=wn(p),g=p.origin??i,w=m.x<y.x?Math.round(Math.abs(y.x-m.x)):0,S=m.y<y.y?Math.round(Math.abs(y.y-m.y)):0,k=Math.max(h.width,Math.round(m.width)),N=Math.max(h.height,Math.round(m.height)),I=(k-h.width)*g[0],P=(N-h.height)*g[1];(w>0||S>0||I||P)&&(l.push({id:x,type:"position",position:{x:p.position.x-w+I,y:p.position.y-S+P}}),(_=o.get(x))==null||_.forEach(j=>{t.some(V=>V.id===j.id)||l.push({id:j.id,type:"position",position:{x:j.position.x+w,y:j.position.y+S}})})),(h.width<m.width||h.height<m.height||w||S)&&l.push({id:x,type:"dimensions",setAttributes:!0,dimensions:{width:k+(w?g[0]*w-I:0),height:N+(S?g[1]*S-P:0)}})}),l}function f1(t,r,o,i,l,u,c){const m=i==null?void 0:i.querySelector(".xyflow__viewport");let p=!1;if(!m)return{changes:[],updatedInternals:p};const x=[],y=window.getComputedStyle(m),{m22:h}=new window.DOMMatrixReadOnly(y.transform),g=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),p=!0;continue}const k=Ic(w.nodeElement),N=S.measured.width!==k.width||S.measured.height!==k.height;if(!!(k.width&&k.height&&(N||!S.internals.handleBounds||w.force))){const P=w.nodeElement.getBoundingClientRect(),_=go(S.extent)?S.extent:u;let{positionAbsolute:j}=S.internals;S.parentId&&S.extent==="parent"?j=ch(j,k,r.get(S.parentId)):_&&(j=wr(j,_,k));const V={...S,measured:k,internals:{...S.internals,positionAbsolute:j,handleBounds:{source:Tp("source",w.nodeElement,P,h,S.id),target:Tp("target",w.nodeElement,P,h,S.id)}}};r.set(S.id,V),S.parentId&&Mc(V,r,o,{nodeOrigin:l,zIndexMode:c}),p=!0,N&&(x.push({id:S.id,type:"dimensions",dimensions:k}),S.expandParent&&S.parentId&&g.push({id:S.id,parentId:S.parentId,rect:ho(V,l)}))}}if(g.length>0){const w=bc(g,r,o,l);x.push(...w)}return{changes:x,updatedInternals:p}}async function p1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:u}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const c=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,u]],i),m=!!c&&(c.x!==o[0]||c.y!==o[1]||c.k!==o[2]);return Promise.resolve(m)}function Fp(t,r,o,i,l,u){let c=l;const m=i.get(c)||new Map;i.set(c,m.set(o,r)),c=`${l}-${t}`;const p=i.get(c)||new Map;if(i.set(c,p.set(o,r)),u){c=`${l}-${t}-${u}`;const x=i.get(c)||new Map;i.set(c,x.set(o,r))}}function kh(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:u,sourceHandle:c=null,targetHandle:m=null}=i,p={edgeId:i.id,source:l,target:u,sourceHandle:c,targetHandle:m},x=`${l}-${c}--${u}-${m}`,y=`${u}-${m}--${l}-${c}`;Fp("source",p,y,t,l,c),Fp("target",p,x,t,u,m),r.set(i.id,i)}}function Ch(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:Ch(o,r):!1}function Hp(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function m1(t,r,o,i){const l=new Map;for(const[u,c]of t)if((c.selected||c.id===i)&&(!c.parentId||!Ch(c,t))&&(c.draggable||r&&typeof c.draggable>"u")){const m=t.get(u);m&&l.set(u,{id:u,position:m.position||{x:0,y:0},distance:{x:o.x-m.internals.positionAbsolute.x,y:o.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return l}function Bu({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var c,m,p;const l=[];for(const[x,y]of r){const h=(c=o.get(x))==null?void 0:c.internals.userNode;h&&l.push({...h,position:y.position,dragging:i})}if(!t)return[l[0],l];const u=(m=o.get(t))==null?void 0:m.internals.userNode;return[u?{...u,position:((p=r.get(t))==null?void 0:p.position)||u.position,dragging:i}:l[0],l]}function h1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const u={x:o-l.distance.x,y:i-l.distance.y},c=Ps(u,r);return{x:c.x-u.x,y:c.y-u.y}}function g1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let u={x:null,y:null},c=0,m=new Map,p=!1,x={x:0,y:0},y=null,h=!1,g=null,w=!1,S=!1,k=null;function N({noDragClassName:P,handleSelector:_,domNode:j,isSelectable:V,nodeId:F,nodeClickDistance:B=0}){g=kt(j);function q({x:W,y:K}){const{nodeLookup:R,nodeExtent:$,snapGrid:z,snapToGrid:D,nodeOrigin:M,onNodeDrag:T,onSelectionDrag:C,onError:b,updateNodePositions:A}=r();u={x:W,y:K};let G=!1;const Z=m.size>1,ne=Z&&$?ic(bs(m)):null,oe=Z&&D?h1({dragItems:m,snapGrid:z,x:W,y:K}):null;for(const[ae,re]of m){if(!R.has(ae))continue;let ce={x:W-re.distance.x,y:K-re.distance.y};D&&(ce=oe?{x:Math.round(ce.x+oe.x),y:Math.round(ce.y+oe.y)}:Ps(ce,z));let ve=null;if(Z&&$&&!re.extent&&ne){const{positionAbsolute:we}=re.internals,_e=we.x-ne.x+$[0][0],Te=we.x+re.measured.width-ne.x2+$[1][0],je=we.y-ne.y+$[0][1],Xe=we.y+re.measured.height-ne.y2+$[1][1];ve=[[_e,je],[Te,Xe]]}const{position:Se,positionAbsolute:Ce}=uh({nodeId:ae,nextPosition:ce,nodeLookup:R,nodeExtent:ve||$,nodeOrigin:M,onError:b});G=G||re.position.x!==Se.x||re.position.y!==Se.y,re.position=Se,re.internals.positionAbsolute=Ce}if(S=S||G,!!G&&(A(m,!0),k&&(i||T||!F&&C))){const[ae,re]=Bu({nodeId:F,dragItems:m,nodeLookup:R});i==null||i(k,m,ae,re),T==null||T(k,ae,re),F||C==null||C(k,re)}}async function O(){if(!y)return;const{transform:W,panBy:K,autoPanSpeed:R,autoPanOnNodeDrag:$}=r();if(!$){p=!1,cancelAnimationFrame(c);return}const[z,D]=dh(x,y,R);(z!==0||D!==0)&&(u.x=(u.x??0)-z/W[2],u.y=(u.y??0)-D/W[2],await K({x:z,y:D})&&q(u)),c=requestAnimationFrame(O)}function U(W){var Z;const{nodeLookup:K,multiSelectionActive:R,nodesDraggable:$,transform:z,snapGrid:D,snapToGrid:M,selectNodesOnDrag:T,onNodeDragStart:C,onSelectionDragStart:b,unselectNodesAndEdges:A}=r();h=!0,(!T||!V)&&!R&&F&&((Z=K.get(F))!=null&&Z.selected||A()),V&&T&&F&&(t==null||t(F));const G=gs(W.sourceEvent,{transform:z,snapGrid:D,snapToGrid:M,containerBounds:y});if(u=G,m=m1(K,$,G,F),m.size>0&&(o||C||!F&&b)){const[ne,oe]=Bu({nodeId:F,dragItems:m,nodeLookup:K});o==null||o(W.sourceEvent,m,ne,oe),C==null||C(W.sourceEvent,ne,oe),F||b==null||b(W.sourceEvent,oe)}}const X=Vm().clickDistance(B).on("start",W=>{const{domNode:K,nodeDragThreshold:R,transform:$,snapGrid:z,snapToGrid:D}=r();y=(K==null?void 0:K.getBoundingClientRect())||null,w=!1,S=!1,k=W.sourceEvent,R===0&&U(W),u=gs(W.sourceEvent,{transform:$,snapGrid:z,snapToGrid:D,containerBounds:y}),x=Ut(W.sourceEvent,y)}).on("drag",W=>{const{autoPanOnNodeDrag:K,transform:R,snapGrid:$,snapToGrid:z,nodeDragThreshold:D,nodeLookup:M}=r(),T=gs(W.sourceEvent,{transform:R,snapGrid:$,snapToGrid:z,containerBounds:y});if(k=W.sourceEvent,(W.sourceEvent.type==="touchmove"&&W.sourceEvent.touches.length>1||F&&!M.has(F))&&(w=!0),!w){if(!p&&K&&h&&(p=!0,O()),!h){const C=Ut(W.sourceEvent,y),b=C.x-x.x,A=C.y-x.y;Math.sqrt(b*b+A*A)>D&&U(W)}(u.x!==T.xSnapped||u.y!==T.ySnapped)&&m&&h&&(x=Ut(W.sourceEvent,y),q(T))}}).on("end",W=>{if(!(!h||w)&&(p=!1,h=!1,cancelAnimationFrame(c),m.size>0)){const{nodeLookup:K,updateNodePositions:R,onNodeDragStop:$,onSelectionDragStop:z}=r();if(S&&(R(m,!1),S=!1),l||$||!F&&z){const[D,M]=Bu({nodeId:F,dragItems:m,nodeLookup:K,dragging:!1});l==null||l(W.sourceEvent,m,D,M),$==null||$(W.sourceEvent,D,M),F||z==null||z(W.sourceEvent,M)}}}).filter(W=>{const K=W.target;return!W.button&&(!P||!Hp(K,`.${P}`,j))&&(!_||Hp(K,_,j))});g.call(X)}function I(){g==null||g.on(".drag",null)}return{update:N,destroy:I}}function x1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const u of r.values())ks(l,ho(u))>0&&i.push(u);return i}const y1=250;function v1(t,r,o,i){var m,p;let l=[],u=1/0;const c=x1(t,o,r+y1);for(const x of c){const y=[...((m=x.internals.handleBounds)==null?void 0:m.source)??[],...((p=x.internals.handleBounds)==null?void 0:p.target)??[]];for(const h of y){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:g,y:w}=Sr(x,h,h.position,!0),S=Math.sqrt(Math.pow(g-t.x,2)+Math.pow(w-t.y,2));S>r||(S<u?(l=[{...h,x:g,y:w}],u=S):S===u&&l.push({...h,x:g,y:w}))}}if(!l.length)return null;if(l.length>1){const x=i.type==="source"?"target":"source";return l.find(y=>y.type===x)??l[0]}return l[0]}function Ih(t,r,o,i,l,u=!1){var x,y,h;const c=i.get(t);if(!c)return null;const m=l==="strict"?(x=c.internals.handleBounds)==null?void 0:x[r]:[...((y=c.internals.handleBounds)==null?void 0:y.source)??[],...((h=c.internals.handleBounds)==null?void 0:h.target)??[]],p=(o?m==null?void 0:m.find(g=>g.id===o):m==null?void 0:m[0])??null;return p&&u?{...p,...Sr(c,p,p.position,!0)}:p}function Eh(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function w1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const _h=()=>!0;function S1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:u,isTarget:c,domNode:m,nodeLookup:p,lib:x,autoPanOnConnect:y,flowId:h,panBy:g,cancelConnection:w,onConnectStart:S,onConnect:k,onConnectEnd:N,isValidConnection:I=_h,onReconnectEnd:P,updateConnection:_,getTransform:j,getFromHandle:V,autoPanSpeed:F,dragThreshold:B=1,handleDomNode:q}){const O=hh(t.target);let U=0,X;const{x:W,y:K}=Ut(t),R=Eh(u,q),$=m==null?void 0:m.getBoundingClientRect();let z=!1;if(!$||!R)return;const D=Ih(l,R,i,p,r);if(!D)return;let M=Ut(t,$),T=!1,C=null,b=!1,A=null;function G(){if(!y||!$)return;const[Se,Ce]=dh(M,$,F);g({x:Se,y:Ce}),U=requestAnimationFrame(G)}const Z={...D,nodeId:l,type:R,position:D.position},ne=p.get(l);let ae={inProgress:!0,isValid:null,from:Sr(ne,Z,ye.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:ne,to:M,toHandle:null,toPosition:Mp[Z.position],toNode:null,pointer:M};function re(){z=!0,_(ae),S==null||S(t,{nodeId:l,handleId:i,handleType:R})}B===0&&re();function ce(Se){if(!z){const{x:Xe,y:Ot}=Ut(Se),gt=Xe-W,xt=Ot-K;if(!(gt*gt+xt*xt>B*B))return;re()}if(!V()||!Z){ve(Se);return}const Ce=j();M=Ut(Se,$),X=v1(Ds(M,Ce,!1,[1,1]),o,p,Z),T||(G(),T=!0);const we=jh(Se,{handle:X,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:c?"target":"source",isValidConnection:I,doc:O,lib:x,flowId:h,nodeLookup:p});A=we.handleDomNode,C=we.connection,b=w1(!!X,we.isValid);const _e=p.get(l),Te=_e?Sr(_e,Z,ye.Left,!0):ae.from,je={...ae,from:Te,isValid:b,to:we.toHandle&&b?El({x:we.toHandle.x,y:we.toHandle.y},Ce):M,toHandle:we.toHandle,toPosition:b&&we.toHandle?we.toHandle.position:Mp[Z.position],toNode:we.toHandle?p.get(we.toHandle.nodeId):null,pointer:M};_(je),ae=je}function ve(Se){if(!("touches"in Se&&Se.touches.length>0)){if(z){(X||A)&&C&&b&&(k==null||k(C));const{inProgress:Ce,...we}=ae,_e={...we,toPosition:ae.toHandle?ae.toPosition:null};N==null||N(Se,_e),u&&(P==null||P(Se,_e))}w(),cancelAnimationFrame(U),T=!1,b=!1,C=null,A=null,O.removeEventListener("mousemove",ce),O.removeEventListener("mouseup",ve),O.removeEventListener("touchmove",ce),O.removeEventListener("touchend",ve)}}O.addEventListener("mousemove",ce),O.addEventListener("mouseup",ve),O.addEventListener("touchmove",ce),O.addEventListener("touchend",ve)}function jh(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:u,doc:c,lib:m,flowId:p,isValidConnection:x=_h,nodeLookup:y}){const h=u==="target",g=r?c.querySelector(`.${m}-flow__handle[data-id="${p}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=Ut(t),k=c.elementFromPoint(w,S),N=k!=null&&k.classList.contains(`${m}-flow__handle`)?k:g,I={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const P=Eh(void 0,N),_=N.getAttribute("data-nodeid"),j=N.getAttribute("data-handleid"),V=N.classList.contains("connectable"),F=N.classList.contains("connectableend");if(!_||!P)return I;const B={source:h?_:i,sourceHandle:h?j:l,target:h?i:_,targetHandle:h?l:j};I.connection=B;const O=V&&F&&(o===po.Strict?h&&P==="source"||!h&&P==="target":_!==i||j!==l);I.isValid=O&&x(B),I.toHandle=Ih(_,P,j,y,o,!0)}return I}const cc={onPointerDown:S1,isValid:jh};function N1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=kt(t);function u({translateExtent:m,width:p,height:x,zoomStep:y=1,pannable:h=!0,zoomable:g=!0,inversePan:w=!1}){const S=_=>{if(_.sourceEvent.type!=="wheel"||!r)return;const j=o(),V=_.sourceEvent.ctrlKey&&Cs()?10:1,F=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*y,B=j[2]*Math.pow(2,F*V);r.scaleTo(B)};let k=[0,0];const N=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(k=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},I=_=>{const j=o();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!r)return;const V=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],F=[V[0]-k[0],V[1]-k[1]];k=V;const B=i()*Math.max(j[2],Math.log(j[2]))*(w?-1:1),q={x:j[0]-F[0]*B,y:j[1]-F[1]*B},O=[[0,0],[p,x]];r.setViewportConstrained({x:q.x,y:q.y,zoom:j[2]},O,m)},P=rh().on("start",N).on("zoom",h?I:null).on("zoom.wheel",g?S:null);l.call(P,{})}function c(){l.on("zoom",null)}return{update:u,destroy:c,pointer:Ht}}const $l=t=>({x:t.x,y:t.y,zoom:t.k}),Wu=({x:t,y:r,zoom:o})=>Dl.translate(t,r).scale(o),io=(t,r)=>t.target.closest(`.${r}`),Mh=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),k1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Uu=(t,r=0,o=k1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},bh=t=>{const r=t.ctrlKey&&Cs()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function C1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:c,onPanZoomStart:m,onPanZoom:p,onPanZoomEnd:x}){return y=>{if(io(y,r))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const h=o.property("__zoom").k||1;if(y.ctrlKey&&c){const N=Ht(y),I=bh(y),P=h*Math.pow(2,I);i.scaleTo(o,P,N,y);return}const g=y.deltaMode===1?20:1;let w=l===xr.Vertical?0:y.deltaX*g,S=l===xr.Horizontal?0:y.deltaY*g;!Cs()&&y.shiftKey&&l!==xr.Vertical&&(w=y.deltaY*g,S=0),i.translateBy(o,-(w/h)*u,-(S/h)*u,{internal:!0});const k=$l(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(p==null||p(y,k),t.panScrollTimeout=setTimeout(()=>{x==null||x(y,k),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,m==null||m(y,k))}}function I1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const u=i.type==="wheel",c=!r&&u&&!i.ctrlKey,m=io(i,t);if(i.ctrlKey&&u&&m&&i.preventDefault(),c||m)return null;i.preventDefault(),o.call(this,i,l)}}function E1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var u,c,m;if((u=i.sourceEvent)!=null&&u.internal)return;const l=$l(i.transform);t.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((m=i.sourceEvent)==null?void 0:m.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function _1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return u=>{var c,m;t.usedRightMouseButton=!!(o&&Mh(r,t.mouseButton??0)),(c=u.sourceEvent)!=null&&c.sync||i([u.transform.x,u.transform.y,u.transform.k]),l&&!((m=u.sourceEvent)!=null&&m.internal)&&(l==null||l(u.sourceEvent,$l(u.transform)))}}function j1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:u}){return c=>{var m;if(!((m=c.sourceEvent)!=null&&m.internal)&&(t.isZoomingOrPanning=!1,u&&Mh(r,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&u(c.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const p=$l(c.transform);t.prevViewport=p,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(c.sourceEvent,p)},o?150:0)}}}function M1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:c,noWheelClassName:m,noPanClassName:p,lib:x,connectionInProgress:y}){return h=>{var N;const g=t||r,w=o&&h.ctrlKey,S=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(io(h,`${x}-flow__node`)||io(h,`${x}-flow__edge`)))return!0;if(!i&&!g&&!l&&!u&&!o||c||y&&!S||io(h,m)&&S||io(h,p)&&(!S||l&&S&&!t)||!o&&h.ctrlKey&&S)return!1;if(!o&&h.type==="touchstart"&&((N=h.touches)==null?void 0:N.length)>1)return h.preventDefault(),!1;if(!g&&!l&&!w&&S||!i&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(i)&&!i.includes(h.button)&&h.type==="mousedown")return!1;const k=Array.isArray(i)&&i.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||S)&&k}}function b1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:u,onPanZoomStart:c,onPanZoomEnd:m,onDraggingChange:p}){const x={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),h=rh().scaleExtent([r,o]).translateExtent(i),g=kt(t).call(h);P({x:l.x,y:l.y,zoom:mo(l.zoom,r,o)},[[0,0],[y.width,y.height]],i);const w=g.on("wheel.zoom"),S=g.on("dblclick.zoom");h.wheelDelta(bh);function k(X,W){return g?new Promise(K=>{h==null||h.interpolate((W==null?void 0:W.interpolate)==="linear"?hs:fl).transform(Uu(g,W==null?void 0:W.duration,W==null?void 0:W.ease,()=>K(!0)),X)}):Promise.resolve(!1)}function N({noWheelClassName:X,noPanClassName:W,onPaneContextMenu:K,userSelectionActive:R,panOnScroll:$,panOnDrag:z,panOnScrollMode:D,panOnScrollSpeed:M,preventScrolling:T,zoomOnPinch:C,zoomOnScroll:b,zoomOnDoubleClick:A,zoomActivationKeyPressed:G,lib:Z,onTransformChange:ne,connectionInProgress:oe,paneClickDistance:ae,selectionOnDrag:re}){R&&!x.isZoomingOrPanning&&I();const ce=$&&!G&&!R;h.clickDistance(re?1/0:!Wt(ae)||ae<0?0:ae);const ve=ce?C1({zoomPanValues:x,noWheelClassName:X,d3Selection:g,d3Zoom:h,panOnScrollMode:D,panOnScrollSpeed:M,zoomOnPinch:C,onPanZoomStart:c,onPanZoom:u,onPanZoomEnd:m}):I1({noWheelClassName:X,preventScrolling:T,d3ZoomHandler:w});if(g.on("wheel.zoom",ve,{passive:!1}),!R){const Ce=E1({zoomPanValues:x,onDraggingChange:p,onPanZoomStart:c});h.on("start",Ce);const we=_1({zoomPanValues:x,panOnDrag:z,onPaneContextMenu:!!K,onPanZoom:u,onTransformChange:ne});h.on("zoom",we);const _e=j1({zoomPanValues:x,panOnDrag:z,panOnScroll:$,onPaneContextMenu:K,onPanZoomEnd:m,onDraggingChange:p});h.on("end",_e)}const Se=M1({zoomActivationKeyPressed:G,panOnDrag:z,zoomOnScroll:b,panOnScroll:$,zoomOnDoubleClick:A,zoomOnPinch:C,userSelectionActive:R,noPanClassName:W,noWheelClassName:X,lib:Z,connectionInProgress:oe});h.filter(Se),A?g.on("dblclick.zoom",S):g.on("dblclick.zoom",null)}function I(){h.on("zoom",null)}async function P(X,W,K){const R=Wu(X),$=h==null?void 0:h.constrain()(R,W,K);return $&&await k($),new Promise(z=>z($))}async function _(X,W){const K=Wu(X);return await k(K,W),new Promise(R=>R(K))}function j(X){if(g){const W=Wu(X),K=g.property("__zoom");(K.k!==X.zoom||K.x!==X.x||K.y!==X.y)&&(h==null||h.transform(g,W,null,{sync:!0}))}}function V(){const X=g?nh(g.node()):{x:0,y:0,k:1};return{x:X.x,y:X.y,zoom:X.k}}function F(X,W){return g?new Promise(K=>{h==null||h.interpolate((W==null?void 0:W.interpolate)==="linear"?hs:fl).scaleTo(Uu(g,W==null?void 0:W.duration,W==null?void 0:W.ease,()=>K(!0)),X)}):Promise.resolve(!1)}function B(X,W){return g?new Promise(K=>{h==null||h.interpolate((W==null?void 0:W.interpolate)==="linear"?hs:fl).scaleBy(Uu(g,W==null?void 0:W.duration,W==null?void 0:W.ease,()=>K(!0)),X)}):Promise.resolve(!1)}function q(X){h==null||h.scaleExtent(X)}function O(X){h==null||h.translateExtent(X)}function U(X){const W=!Wt(X)||X<0?0:X;h==null||h.clickDistance(W)}return{update:N,destroy:I,setViewport:_,setViewportConstrained:P,getViewport:V,scaleTo:F,scaleBy:B,setScaleExtent:q,setTranslateExtent:O,syncViewport:j,setClickDistance:U}}var Nr;(function(t){t.Line="line",t.Handle="handle"})(Nr||(Nr={}));const P1=["top-left","top-right","bottom-left","bottom-right"],D1=["top","right","bottom","left"];function T1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:u}){const c=t-r,m=o-i,p=[c>0?1:c<0?-1:0,m>0?1:m<0?-1:0];return c&&l&&(p[0]=p[0]*-1),m&&u&&(p[1]=p[1]*-1),p}function Vp(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Bn(t,r){return Math.max(0,r-t)}function Wn(t,r){return Math.max(0,t-r)}function ol(t,r,o){return Math.max(0,r-t,t-o)}function Bp(t,r){return t?!r:r}function O1(t,r,o,i,l,u,c,m){let{affectsX:p,affectsY:x}=r;const{isHorizontal:y,isVertical:h}=r,g=y&&h,{xSnapped:w,ySnapped:S}=o,{minWidth:k,maxWidth:N,minHeight:I,maxHeight:P}=i,{x:_,y:j,width:V,height:F,aspectRatio:B}=t;let q=Math.floor(y?w-t.pointerX:0),O=Math.floor(h?S-t.pointerY:0);const U=V+(p?-q:q),X=F+(x?-O:O),W=-u[0]*V,K=-u[1]*F;let R=ol(U,k,N),$=ol(X,I,P);if(c){let M=0,T=0;p&&q<0?M=Bn(_+q+W,c[0][0]):!p&&q>0&&(M=Wn(_+U+W,c[1][0])),x&&O<0?T=Bn(j+O+K,c[0][1]):!x&&O>0&&(T=Wn(j+X+K,c[1][1])),R=Math.max(R,M),$=Math.max($,T)}if(m){let M=0,T=0;p&&q>0?M=Wn(_+q,m[0][0]):!p&&q<0&&(M=Bn(_+U,m[1][0])),x&&O>0?T=Wn(j+O,m[0][1]):!x&&O<0&&(T=Bn(j+X,m[1][1])),R=Math.max(R,M),$=Math.max($,T)}if(l){if(y){const M=ol(U/B,I,P)*B;if(R=Math.max(R,M),c){let T=0;!p&&!x||p&&!x&&g?T=Wn(j+K+U/B,c[1][1])*B:T=Bn(j+K+(p?q:-q)/B,c[0][1])*B,R=Math.max(R,T)}if(m){let T=0;!p&&!x||p&&!x&&g?T=Bn(j+U/B,m[1][1])*B:T=Wn(j+(p?q:-q)/B,m[0][1])*B,R=Math.max(R,T)}}if(h){const M=ol(X*B,k,N)/B;if($=Math.max($,M),c){let T=0;!p&&!x||x&&!p&&g?T=Wn(_+X*B+W,c[1][0])/B:T=Bn(_+(x?O:-O)*B+W,c[0][0])/B,$=Math.max($,T)}if(m){let T=0;!p&&!x||x&&!p&&g?T=Bn(_+X*B,m[1][0])/B:T=Wn(_+(x?O:-O)*B,m[0][0])/B,$=Math.max($,T)}}}O=O+(O<0?$:-$),q=q+(q<0?R:-R),l&&(g?U>X*B?O=(Bp(p,x)?-q:q)/B:q=(Bp(p,x)?-O:O)*B:y?(O=q/B,x=p):(q=O*B,p=x));const z=p?_+q:_,D=x?j+O:j;return{width:V+(p?-q:q),height:F+(x?-O:O),x:u[0]*q*(p?-1:1)+z,y:u[1]*O*(x?-1:1)+D}}const Ph={width:0,height:0,x:0,y:0},A1={...Ph,pointerX:0,pointerY:0,aspectRatio:1};function $1(t){return[[0,0],[t.measured.width,t.measured.height]]}function z1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,u=t.measured.width??0,c=t.measured.height??0,m=o[0]*u,p=o[1]*c;return[[i-m,l-p],[i+u-m,l+c-p]]}function L1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const u=kt(t);let c={controlDirection:Vp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function m({controlPosition:x,boundaries:y,keepAspectRatio:h,resizeDirection:g,onResizeStart:w,onResize:S,onResizeEnd:k,shouldResize:N}){let I={...Ph},P={...A1};c={boundaries:y,resizeDirection:g,keepAspectRatio:h,controlDirection:Vp(x)};let _,j=null,V=[],F,B,q,O=!1;const U=Vm().on("start",X=>{const{nodeLookup:W,transform:K,snapGrid:R,snapToGrid:$,nodeOrigin:z,paneDomNode:D}=o();if(_=W.get(r),!_)return;j=(D==null?void 0:D.getBoundingClientRect())??null;const{xSnapped:M,ySnapped:T}=gs(X.sourceEvent,{transform:K,snapGrid:R,snapToGrid:$,containerBounds:j});I={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},P={...I,pointerX:M,pointerY:T,aspectRatio:I.width/I.height},F=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(F=W.get(_.parentId),B=F&&_.extent==="parent"?$1(F):void 0),V=[],q=void 0;for(const[C,b]of W)if(b.parentId===r&&(V.push({id:C,position:{...b.position},extent:b.extent}),b.extent==="parent"||b.expandParent)){const A=z1(b,_,b.origin??z);q?q=[[Math.min(A[0][0],q[0][0]),Math.min(A[0][1],q[0][1])],[Math.max(A[1][0],q[1][0]),Math.max(A[1][1],q[1][1])]]:q=A}w==null||w(X,{...I})}).on("drag",X=>{const{transform:W,snapGrid:K,snapToGrid:R,nodeOrigin:$}=o(),z=gs(X.sourceEvent,{transform:W,snapGrid:K,snapToGrid:R,containerBounds:j}),D=[];if(!_)return;const{x:M,y:T,width:C,height:b}=I,A={},G=_.origin??$,{width:Z,height:ne,x:oe,y:ae}=O1(P,c.controlDirection,z,c.boundaries,c.keepAspectRatio,G,B,q),re=Z!==C,ce=ne!==b,ve=oe!==M&&re,Se=ae!==T&&ce;if(!ve&&!Se&&!re&&!ce)return;if((ve||Se||G[0]===1||G[1]===1)&&(A.x=ve?oe:I.x,A.y=Se?ae:I.y,I.x=A.x,I.y=A.y,V.length>0)){const Te=oe-M,je=ae-T;for(const Xe of V)Xe.position={x:Xe.position.x-Te+G[0]*(Z-C),y:Xe.position.y-je+G[1]*(ne-b)},D.push(Xe)}if((re||ce)&&(A.width=re&&(!c.resizeDirection||c.resizeDirection==="horizontal")?Z:I.width,A.height=ce&&(!c.resizeDirection||c.resizeDirection==="vertical")?ne:I.height,I.width=A.width,I.height=A.height),F&&_.expandParent){const Te=G[0]*(A.width??0);A.x&&A.x<Te&&(I.x=Te,P.x=P.x-(A.x-Te));const je=G[1]*(A.height??0);A.y&&A.y<je&&(I.y=je,P.y=P.y-(A.y-je))}const Ce=T1({width:I.width,prevWidth:C,height:I.height,prevHeight:b,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),we={...I,direction:Ce};(N==null?void 0:N(X,we))!==!1&&(O=!0,S==null||S(X,we),i(A,D))}).on("end",X=>{O&&(k==null||k(X,{...I}),l==null||l({...I}),O=!1)});u.call(U)}function p(){u.on(".drag",null)}return{update:m,destroy:p}}var Yu={exports:{}},Xu={},Qu={exports:{}},Gu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function R1(){if(Wp)return Gu;Wp=1;var t=Es();function r(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,u=t.useLayoutEffect,c=t.useDebugValue;function m(h,g){var w=g(),S=i({inst:{value:w,getSnapshot:g}}),k=S[0].inst,N=S[1];return u(function(){k.value=w,k.getSnapshot=g,p(k)&&N({inst:k})},[h,w,g]),l(function(){return p(k)&&N({inst:k}),h(function(){p(k)&&N({inst:k})})},[h]),c(w),w}function p(h){var g=h.getSnapshot;h=h.value;try{var w=g();return!o(h,w)}catch{return!0}}function x(h,g){return g()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:m;return Gu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,Gu}var Up;function F1(){return Up||(Up=1,Qu.exports=R1()),Qu.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function H1(){if(Yp)return Xu;Yp=1;var t=Es(),r=F1();function o(x,y){return x===y&&(x!==0||1/x===1/y)||x!==x&&y!==y}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,u=t.useRef,c=t.useEffect,m=t.useMemo,p=t.useDebugValue;return Xu.useSyncExternalStoreWithSelector=function(x,y,h,g,w){var S=u(null);if(S.current===null){var k={hasValue:!1,value:null};S.current=k}else k=S.current;S=m(function(){function I(F){if(!P){if(P=!0,_=F,F=g(F),w!==void 0&&k.hasValue){var B=k.value;if(w(B,F))return j=B}return j=F}if(B=j,i(_,F))return B;var q=g(F);return w!==void 0&&w(B,q)?(_=F,B):(_=F,j=q)}var P=!1,_,j,V=h===void 0?null:h;return[function(){return I(y())},V===null?void 0:function(){return I(V())}]},[y,h,g,w]);var N=l(x,S[0],S[1]);return c(function(){k.hasValue=!0,k.value=N},[N]),p(N),N},Xu}var Xp;function V1(){return Xp||(Xp=1,Yu.exports=H1()),Yu.exports}var B1=V1();const W1=Em(B1),U1={},Qp=t=>{let r;const o=new Set,i=(y,h)=>{const g=typeof y=="function"?y(r):y;if(!Object.is(g,r)){const w=r;r=h??(typeof g!="object"||g===null)?g:Object.assign({},r,g),o.forEach(S=>S(r,w))}},l=()=>r,p={setState:i,getState:l,getInitialState:()=>x,subscribe:y=>(o.add(y),()=>o.delete(y)),destroy:()=>{(U1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},x=r=t(i,l,p);return p},Y1=t=>t?Qp(t):Qp,{useDebugValue:X1}=fs,{useSyncExternalStoreWithSelector:Q1}=W1,G1=t=>t;function Dh(t,r=G1,o){const i=Q1(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return X1(i),i}const Gp=(t,r)=>{const o=Y1(t),i=(l,u=r)=>Dh(o,l,u);return Object.assign(i,o),i},K1=(t,r)=>t?Gp(t,r):Gp;function Re(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var q1=_m();const zl=L.createContext(null),Z1=zl.Provider,Th=tn.error001();function Me(t,r){const o=L.useContext(zl);if(o===null)throw new Error(Th);return Dh(o,t,r)}function Fe(){const t=L.useContext(zl);if(t===null)throw new Error(Th);return L.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Kp={display:"none"},J1={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Oh="react-flow__node-desc",Ah="react-flow__edge-desc",eS="react-flow__aria-live",tS=t=>t.ariaLiveMessage,nS=t=>t.ariaLabelConfig;function rS({rfId:t}){const r=Me(tS);return d.jsx("div",{id:`${eS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:J1,children:r})}function oS({rfId:t,disableKeyboardA11y:r}){const o=Me(nS);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${Oh}-${t}`,style:Kp,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${Ah}-${t}`,style:Kp,children:o["edge.a11yDescription.default"]}),!r&&d.jsx(rS,{rfId:t})]})}const Ll=L.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},u)=>{const c=`${t}`.split("-");return d.jsx("div",{className:Ge(["react-flow__panel",o,...c]),style:i,ref:u,...l,children:r})});Ll.displayName="Panel";function sS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:d.jsx(Ll,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const iS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},sl=t=>t.id;function lS(t,r){return Re(t.selectedNodes.map(sl),r.selectedNodes.map(sl))&&Re(t.selectedEdges.map(sl),r.selectedEdges.map(sl))}function aS({onSelectionChange:t}){const r=Fe(),{selectedNodes:o,selectedEdges:i}=Me(iS,lS);return L.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[o,i,t]),null}const uS=t=>!!t.onSelectionChangeHandlers;function cS({onSelectionChange:t}){const r=Me(uS);return t||r?d.jsx(aS,{onSelectionChange:t}):null}const $h=[0,0],dS={x:0,y:0,zoom:1},fS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],qp=[...fS,"rfId"],pS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Zp={translateExtent:Ss,nodeOrigin:$h,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function mS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:c,reset:m,setDefaultNodesAndEdges:p}=Me(pS,Re),x=Fe();L.useEffect(()=>(p(t.defaultNodes,t.defaultEdges),()=>{y.current=Zp,m()}),[]);const y=L.useRef(Zp);return L.useEffect(()=>{for(const h of qp){const g=t[h],w=y.current[h];g!==w&&(typeof t[h]>"u"||(h==="nodes"?r(g):h==="edges"?o(g):h==="minZoom"?i(g):h==="maxZoom"?l(g):h==="translateExtent"?u(g):h==="nodeExtent"?c(g):h==="ariaLabelConfig"?x.setState({ariaLabelConfig:Qw(g)}):h==="fitView"?x.setState({fitViewQueued:g}):h==="fitViewOptions"?x.setState({fitViewOptions:g}):x.setState({[h]:g})))}y.current=t},qp.map(h=>t[h])),null}function Jp(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function hS(t){var i;const[r,o]=L.useState(t==="system"?null:t);return L.useEffect(()=>{if(t!=="system"){o(t);return}const l=Jp(),u=()=>o(l!=null&&l.matches?"dark":"light");return u(),l==null||l.addEventListener("change",u),()=>{l==null||l.removeEventListener("change",u)}},[t]),r!==null?r:(i=Jp())!=null&&i.matches?"dark":"light"}const em=typeof document<"u"?document:null;function Is(t=null,r={target:em,actInsideInputWithModifier:!0}){const[o,i]=L.useState(!1),l=L.useRef(!1),u=L.useRef(new Set([])),[c,m]=L.useMemo(()=>{if(t!==null){const x=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=x.reduce((h,g)=>h.concat(...g),[]);return[x,y]}return[[],[]]},[t]);return L.useEffect(()=>{const p=(r==null?void 0:r.target)??em,x=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const y=w=>{var N,I;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!x)&&gh(w))return!1;const k=nm(w.code,m);if(u.current.add(w[k]),tm(c,u.current,!1)){const P=((I=(N=w.composedPath)==null?void 0:N.call(w))==null?void 0:I[0])||w.target,_=(P==null?void 0:P.nodeName)==="BUTTON"||(P==null?void 0:P.nodeName)==="A";r.preventDefault!==!1&&(l.current||!_)&&w.preventDefault(),i(!0)}},h=w=>{const S=nm(w.code,m);tm(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(w[S]),w.key==="Meta"&&u.current.clear(),l.current=!1},g=()=>{u.current.clear(),i(!1)};return p==null||p.addEventListener("keydown",y),p==null||p.addEventListener("keyup",h),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{p==null||p.removeEventListener("keydown",y),p==null||p.removeEventListener("keyup",h),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[t,i]),o}function tm(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function nm(t,r){return r.includes(t)?"code":"key"}const gS=()=>{const t=Fe();return L.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,u],panZoom:c}=t.getState();return c?(await c.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??u},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:u,maxZoom:c,panZoom:m}=t.getState(),p=Cc(r,i,l,u,c,(o==null?void 0:o.padding)??.1);return m?(await m.setViewport(p,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:u,domNode:c}=t.getState();if(!c)return r;const{x:m,y:p}=c.getBoundingClientRect(),x={x:r.x-m,y:r.y-p},y=o.snapGrid??l,h=o.snapToGrid??u;return Ds(x,i,h,y)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:u}=i.getBoundingClientRect(),c=El(r,o);return{x:c.x+l,y:c.y+u}}}),[])};function zh(t,r){const o=[],i=new Map,l=[];for(const u of t)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const c=i.get(u.id);c?c.push(u):i.set(u.id,[u])}for(const u of r){const c=i.get(u.id);if(!c){o.push(u);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){o.push({...c[0].item});continue}const m={...u};for(const p of c)xS(p,m);o.push(m)}return l.length&&l.forEach(u=>{u.index!==void 0?o.splice(u.index,0,{...u.item}):o.push({...u.item})}),o}function xS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function yS(t,r){return zh(t,r)}function vS(t,r){return zh(t,r)}function pr(t,r){return{id:t,type:"select",selected:r}}function lo(t,r=new Set,o=!1){const i=[];for(const[l,u]of t){const c=r.has(l);!(u.selected===void 0&&!c)&&u.selected!==c&&(o&&(u.selected=c),i.push(pr(u.id,c)))}return i}function rm({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(u=>[u.id,u]));for(const[u,c]of t.entries()){const m=r.get(c.id),p=((l=m==null?void 0:m.internals)==null?void 0:l.userNode)??m;p!==void 0&&p!==c&&o.push({id:c.id,item:c,type:"replace"}),p===void 0&&o.push({item:c,type:"add",index:u})}for(const[u]of r)i.get(u)===void 0&&o.push({id:u,type:"remove"});return o}function om(t){return{id:t.id,type:"remove"}}const sm=t=>Lw(t),wS=t=>ah(t);function Lh(t){return L.forwardRef(t)}const SS=typeof window<"u"?L.useLayoutEffect:L.useEffect;function im(t){const[r,o]=L.useState(BigInt(0)),[i]=L.useState(()=>NS(()=>o(l=>l+BigInt(1))));return SS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function NS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const Rh=L.createContext(null);function kS({children:t}){const r=Fe(),o=L.useCallback(m=>{const{nodes:p=[],setNodes:x,hasDefaultNodes:y,onNodesChange:h,nodeLookup:g,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let k=p;for(const I of m)k=typeof I=="function"?I(k):I;let N=rm({items:k,lookup:g});for(const I of S.values())N=I(N);y&&x(k),N.length>0?h==null||h(N):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:I,nodes:P,setNodes:_}=r.getState();I&&_(P)})},[]),i=im(o),l=L.useCallback(m=>{const{edges:p=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:h,edgeLookup:g}=r.getState();let w=p;for(const S of m)w=typeof S=="function"?S(w):S;y?x(w):h&&h(rm({items:w,lookup:g}))},[]),u=im(l),c=L.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return d.jsx(Rh.Provider,{value:c,children:t})}function CS(){const t=L.useContext(Rh);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const IS=t=>!!t.panZoom;function Er(){const t=gS(),r=Fe(),o=CS(),i=Me(IS),l=L.useMemo(()=>{const u=h=>r.getState().nodeLookup.get(h),c=h=>{o.nodeQueue.push(h)},m=h=>{o.edgeQueue.push(h)},p=h=>{var I,P;const{nodeLookup:g,nodeOrigin:w}=r.getState(),S=sm(h)?h:g.get(h.id),k=S.parentId?mh(S.position,S.measured,S.parentId,g,w):S.position,N={...S,position:k,width:((I=S.measured)==null?void 0:I.width)??S.width,height:((P=S.measured)==null?void 0:P.height)??S.height};return ho(N)},x=(h,g,w={replace:!1})=>{c(S=>S.map(k=>{if(k.id===h){const N=typeof g=="function"?g(k):g;return w.replace&&sm(N)?N:{...k,...N}}return k}))},y=(h,g,w={replace:!1})=>{m(S=>S.map(k=>{if(k.id===h){const N=typeof g=="function"?g(k):g;return w.replace&&wS(N)?N:{...k,...N}}return k}))};return{getNodes:()=>r.getState().nodes.map(h=>({...h})),getNode:h=>{var g;return(g=u(h))==null?void 0:g.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:h=[]}=r.getState();return h.map(g=>({...g}))},getEdge:h=>r.getState().edgeLookup.get(h),setNodes:c,setEdges:m,addNodes:h=>{const g=Array.isArray(h)?h:[h];o.nodeQueue.push(w=>[...w,...g])},addEdges:h=>{const g=Array.isArray(h)?h:[h];o.edgeQueue.push(w=>[...w,...g])},toObject:()=>{const{nodes:h=[],edges:g=[],transform:w}=r.getState(),[S,k,N]=w;return{nodes:h.map(I=>({...I})),edges:g.map(I=>({...I})),viewport:{x:S,y:k,zoom:N}}},deleteElements:async({nodes:h=[],edges:g=[]})=>{const{nodes:w,edges:S,onNodesDelete:k,onEdgesDelete:N,triggerNodeChanges:I,triggerEdgeChanges:P,onDelete:_,onBeforeDelete:j}=r.getState(),{nodes:V,edges:F}=await Bw({nodesToRemove:h,edgesToRemove:g,nodes:w,edges:S,onBeforeDelete:j}),B=F.length>0,q=V.length>0;if(B){const O=F.map(om);N==null||N(F),P(O)}if(q){const O=V.map(om);k==null||k(V),I(O)}return(q||B)&&(_==null||_({nodes:V,edges:F})),{deletedNodes:V,deletedEdges:F}},getIntersectingNodes:(h,g=!0,w)=>{const S=Pp(h),k=S?h:p(h),N=w!==void 0;return k?(w||r.getState().nodes).filter(I=>{const P=r.getState().nodeLookup.get(I.id);if(P&&!S&&(I.id===h.id||!P.internals.positionAbsolute))return!1;const _=ho(N?I:P),j=ks(_,k);return g&&j>0||j>=_.width*_.height||j>=k.width*k.height}):[]},isNodeIntersecting:(h,g,w=!0)=>{const k=Pp(h)?h:p(h);if(!k)return!1;const N=ks(k,g);return w&&N>0||N>=g.width*g.height||N>=k.width*k.height},updateNode:x,updateNodeData:(h,g,w={replace:!1})=>{x(h,S=>{const k=typeof g=="function"?g(S):g;return w.replace?{...S,data:k}:{...S,data:{...S.data,...k}}},w)},updateEdge:y,updateEdgeData:(h,g,w={replace:!1})=>{y(h,S=>{const k=typeof g=="function"?g(S):g;return w.replace?{...S,data:k}:{...S,data:{...S.data,...k}}},w)},getNodesBounds:h=>{const{nodeLookup:g,nodeOrigin:w}=r.getState();return Rw(h,{nodeLookup:g,nodeOrigin:w})},getHandleConnections:({type:h,id:g,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${h}${g?`-${g}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:h,handleId:g,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${h?g?`-${h}-${g}`:`-${h}`:""}`))==null?void 0:S.values())??[])},fitView:async h=>{const g=r.getState().fitViewResolver??Xw();return r.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:g}),o.nodeQueue.push(w=>[...w]),g.promise}}},[]);return L.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const lm=t=>t.selected,ES=typeof window<"u"?window:void 0;function _S({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=Fe(),{deleteElements:i}=Er(),l=Is(t,{actInsideInputWithModifier:!1}),u=Is(r,{target:ES});L.useEffect(()=>{if(l){const{edges:c,nodes:m}=o.getState();i({nodes:m.filter(lm),edges:c.filter(lm)}),o.setState({nodesSelectionActive:!1})}},[l]),L.useEffect(()=>{o.setState({multiSelectionActive:u})},[u])}function jS(t){const r=Fe();L.useEffect(()=>{const o=()=>{var l,u,c,m;if(!t.current||!(((u=(l=t.current).checkVisibility)==null?void 0:u.call(l))??!0))return!1;const i=Ic(t.current);(i.height===0||i.width===0)&&((m=(c=r.getState()).onError)==null||m.call(c,"004",tn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Rl={position:"absolute",width:"100%",height:"100%",top:0,left:0},MS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function bS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=xr.Free,zoomOnDoubleClick:c=!0,panOnDrag:m=!0,defaultViewport:p,translateExtent:x,minZoom:y,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:w=!0,children:S,noWheelClassName:k,noPanClassName:N,onViewportChange:I,isControlledViewport:P,paneClickDistance:_,selectionOnDrag:j}){const V=Fe(),F=L.useRef(null),{userSelectionActive:B,lib:q,connectionInProgress:O}=Me(MS,Re),U=Is(g),X=L.useRef();jS(F);const W=L.useCallback(K=>{I==null||I({x:K[0],y:K[1],zoom:K[2]}),P||V.setState({transform:K})},[I,P]);return L.useEffect(()=>{if(F.current){X.current=b1({domNode:F.current,minZoom:y,maxZoom:h,translateExtent:x,viewport:p,onDraggingChange:z=>V.setState({paneDragging:z}),onPanZoomStart:(z,D)=>{const{onViewportChangeStart:M,onMoveStart:T}=V.getState();T==null||T(z,D),M==null||M(D)},onPanZoom:(z,D)=>{const{onViewportChange:M,onMove:T}=V.getState();T==null||T(z,D),M==null||M(D)},onPanZoomEnd:(z,D)=>{const{onViewportChangeEnd:M,onMoveEnd:T}=V.getState();T==null||T(z,D),M==null||M(D)}});const{x:K,y:R,zoom:$}=X.current.getViewport();return V.setState({panZoom:X.current,transform:[K,R,$],domNode:F.current.closest(".react-flow")}),()=>{var z;(z=X.current)==null||z.destroy()}}},[]),L.useEffect(()=>{var K;(K=X.current)==null||K.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:c,panOnDrag:m,zoomActivationKeyPressed:U,preventScrolling:w,noPanClassName:N,userSelectionActive:B,noWheelClassName:k,lib:q,onTransformChange:W,connectionInProgress:O,selectionOnDrag:j,paneClickDistance:_})},[t,r,o,i,l,u,c,m,U,w,N,B,k,q,W,O,j,_]),d.jsx("div",{className:"react-flow__renderer",ref:F,style:Rl,children:S})}const PS=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function DS(){const{userSelectionActive:t,userSelectionRect:r}=Me(PS,Re);return t&&r?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const Ku=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},TS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function OS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=Ns.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:c,onSelectionEnd:m,onPaneClick:p,onPaneContextMenu:x,onPaneScroll:y,onPaneMouseEnter:h,onPaneMouseMove:g,onPaneMouseLeave:w,children:S}){const k=Fe(),{userSelectionActive:N,elementsSelectable:I,dragging:P,connectionInProgress:_}=Me(TS,Re),j=I&&(t||N),V=L.useRef(null),F=L.useRef(),B=L.useRef(new Set),q=L.useRef(new Set),O=L.useRef(!1),U=M=>{if(O.current||_){O.current=!1;return}p==null||p(M),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},X=M=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){M.preventDefault();return}x==null||x(M)},W=y?M=>y(M):void 0,K=M=>{O.current&&(M.stopPropagation(),O.current=!1)},R=M=>{var ne,oe;const{domNode:T}=k.getState();if(F.current=T==null?void 0:T.getBoundingClientRect(),!F.current)return;const C=M.target===V.current;if(!C&&!!M.target.closest(".nokey")||!t||!(u&&C||r)||M.button!==0||!M.isPrimary)return;(oe=(ne=M.target)==null?void 0:ne.setPointerCapture)==null||oe.call(ne,M.pointerId),O.current=!1;const{x:G,y:Z}=Ut(M.nativeEvent,F.current);k.setState({userSelectionRect:{width:0,height:0,startX:G,startY:Z,x:G,y:Z}}),C||(M.stopPropagation(),M.preventDefault())},$=M=>{const{userSelectionRect:T,transform:C,nodeLookup:b,edgeLookup:A,connectionLookup:G,triggerNodeChanges:Z,triggerEdgeChanges:ne,defaultEdgeOptions:oe,resetSelectedElements:ae}=k.getState();if(!F.current||!T)return;const{x:re,y:ce}=Ut(M.nativeEvent,F.current),{startX:ve,startY:Se}=T;if(!O.current){const je=r?0:l;if(Math.hypot(re-ve,ce-Se)<=je)return;ae(),c==null||c(M)}O.current=!0;const Ce={startX:ve,startY:Se,x:re<ve?re:ve,y:ce<Se?ce:Se,width:Math.abs(re-ve),height:Math.abs(ce-Se)},we=B.current,_e=q.current;B.current=new Set(kc(b,Ce,C,o===Ns.Partial,!0).map(je=>je.id)),q.current=new Set;const Te=(oe==null?void 0:oe.selectable)??!0;for(const je of B.current){const Xe=G.get(je);if(Xe)for(const{edgeId:Ot}of Xe.values()){const gt=A.get(Ot);gt&&(gt.selectable??Te)&&q.current.add(Ot)}}if(!Dp(we,B.current)){const je=lo(b,B.current,!0);Z(je)}if(!Dp(_e,q.current)){const je=lo(A,q.current);ne(je)}k.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},z=M=>{var T,C;M.button===0&&((C=(T=M.target)==null?void 0:T.releasePointerCapture)==null||C.call(T,M.pointerId),!N&&M.target===V.current&&k.getState().userSelectionRect&&(U==null||U(M)),k.setState({userSelectionActive:!1,userSelectionRect:null}),O.current&&(m==null||m(M),k.setState({nodesSelectionActive:B.current.size>0})))},D=i===!0||Array.isArray(i)&&i.includes(0);return d.jsxs("div",{className:Ge(["react-flow__pane",{draggable:D,dragging:P,selection:t}]),onClick:j?void 0:Ku(U,V),onContextMenu:Ku(X,V),onWheel:Ku(W,V),onPointerEnter:j?void 0:h,onPointerMove:j?$:g,onPointerUp:j?z:void 0,onPointerDownCapture:j?R:void 0,onClickCapture:j?K:void 0,onPointerLeave:w,ref:V,style:Rl,children:[S,d.jsx(DS,{})]})}function dc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:c,nodeLookup:m,onError:p}=r.getState(),x=m.get(t);if(!x){p==null||p("012",tn.error012(t));return}r.setState({nodesSelectionActive:!1}),x.selected?(o||x.selected&&c)&&(u({nodes:[x],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):l([t])}function Fh({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:u,nodeClickDistance:c}){const m=Fe(),[p,x]=L.useState(!1),y=L.useRef();return L.useEffect(()=>{y.current=g1({getStoreItems:()=>m.getState(),onNodeMouseDown:h=>{dc({id:h,store:m,nodeRef:t})},onDragStart:()=>{x(!0)},onDragStop:()=>{x(!1)}})},[]),L.useEffect(()=>{var h,g;if(r)(h=y.current)==null||h.destroy();else if(t.current)return(g=y.current)==null||g.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:l,nodeClickDistance:c}),()=>{var w;(w=y.current)==null||w.destroy()}},[o,i,r,u,t,l]),p}const AS=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function Hh(){const t=Fe();return L.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:u,nodesDraggable:c,onError:m,updateNodePositions:p,nodeLookup:x,nodeOrigin:y}=t.getState(),h=new Map,g=AS(c),w=l?u[0]:5,S=l?u[1]:5,k=o.direction.x*w*o.factor,N=o.direction.y*S*o.factor;for(const[,I]of x){if(!g(I))continue;let P={x:I.internals.positionAbsolute.x+k,y:I.internals.positionAbsolute.y+N};l&&(P=Ps(P,u));const{position:_,positionAbsolute:j}=uh({nodeId:I.id,nextPosition:P,nodeLookup:x,nodeExtent:i,nodeOrigin:y,onError:m});I.position=_,I.internals.positionAbsolute=j,h.set(I.id,I)}p(h)},[])}const Pc=L.createContext(null),$S=Pc.Provider;Pc.Consumer;const Vh=()=>L.useContext(Pc),zS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),LS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:u,connection:c}=i,{fromHandle:m,toHandle:p,isValid:x}=c,y=(p==null?void 0:p.nodeId)===t&&(p==null?void 0:p.id)===r&&(p==null?void 0:p.type)===o;return{connectingFrom:(m==null?void 0:m.nodeId)===t&&(m==null?void 0:m.id)===r&&(m==null?void 0:m.type)===o,connectingTo:y,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:u===po.Strict?(m==null?void 0:m.type)!==o:t!==(m==null?void 0:m.nodeId)||r!==(m==null?void 0:m.id),connectionInProcess:!!m,clickConnectionInProcess:!!l,valid:y&&x}};function RS({type:t="source",position:r=ye.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:c,onConnect:m,children:p,className:x,onMouseDown:y,onTouchStart:h,...g},w){var $,z;const S=c||null,k=t==="target",N=Fe(),I=Vh(),{connectOnClick:P,noPanClassName:_,rfId:j}=Me(zS,Re),{connectingFrom:V,connectingTo:F,clickConnecting:B,isPossibleEndHandle:q,connectionInProcess:O,clickConnectionInProcess:U,valid:X}=Me(LS(I,S,t),Re);I||(z=($=N.getState()).onError)==null||z.call($,"010",tn.error010());const W=D=>{const{defaultEdgeOptions:M,onConnect:T,hasDefaultEdges:C}=N.getState(),b={...M,...D};if(C){const{edges:A,setEdges:G}=N.getState();G(e1(b,A))}T==null||T(b),m==null||m(b)},K=D=>{if(!I)return;const M=xh(D.nativeEvent);if(l&&(M&&D.button===0||!M)){const T=N.getState();cc.onPointerDown(D.nativeEvent,{handleDomNode:D.currentTarget,autoPanOnConnect:T.autoPanOnConnect,connectionMode:T.connectionMode,connectionRadius:T.connectionRadius,domNode:T.domNode,nodeLookup:T.nodeLookup,lib:T.lib,isTarget:k,handleId:S,nodeId:I,flowId:T.rfId,panBy:T.panBy,cancelConnection:T.cancelConnection,onConnectStart:T.onConnectStart,onConnectEnd:T.onConnectEnd,updateConnection:T.updateConnection,onConnect:W,isValidConnection:o||T.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:T.autoPanSpeed,dragThreshold:T.connectionDragThreshold})}M?y==null||y(D):h==null||h(D)},R=D=>{const{onClickConnectStart:M,onClickConnectEnd:T,connectionClickStartHandle:C,connectionMode:b,isValidConnection:A,lib:G,rfId:Z,nodeLookup:ne,connection:oe}=N.getState();if(!I||!C&&!l)return;if(!C){M==null||M(D.nativeEvent,{nodeId:I,handleId:S,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:I,type:t,id:S}});return}const ae=hh(D.target),re=o||A,{connection:ce,isValid:ve}=cc.isValid(D.nativeEvent,{handle:{nodeId:I,id:S,type:t},connectionMode:b,fromNodeId:C.nodeId,fromHandleId:C.id||null,fromType:C.type,isValidConnection:re,flowId:Z,doc:ae,lib:G,nodeLookup:ne});ve&&ce&&W(ce);const Se=structuredClone(oe);delete Se.inProgress,Se.toPosition=Se.toHandle?Se.toHandle.position:null,T==null||T(D,Se),N.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":S,"data-nodeid":I,"data-handlepos":r,"data-id":`${j}-${I}-${S}-${t}`,className:Ge(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",_,x,{source:!k,target:k,connectable:i,connectablestart:l,connectableend:u,clickconnecting:B,connectingfrom:V,connectingto:F,valid:X,connectionindicator:i&&(!O||q)&&(O||U?u:l)}]),onMouseDown:K,onTouchStart:K,onClick:P?R:void 0,ref:w,...g,children:p})}const kr=L.memo(Lh(RS));function FS({data:t,isConnectable:r,sourcePosition:o=ye.Bottom}){return d.jsxs(d.Fragment,{children:[t==null?void 0:t.label,d.jsx(kr,{type:"source",position:o,isConnectable:r})]})}function HS({data:t,isConnectable:r,targetPosition:o=ye.Top,sourcePosition:i=ye.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(kr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,d.jsx(kr,{type:"source",position:i,isConnectable:r})]})}function VS(){return null}function BS({data:t,isConnectable:r,targetPosition:o=ye.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(kr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const _l={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},am={input:FS,default:HS,output:BS,group:VS};function WS(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const US=t=>{const{width:r,height:o,x:i,y:l}=bs(t.nodeLookup,{filter:u=>!!u.selected});return{width:Wt(r)?r:null,height:Wt(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function YS({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=Fe(),{width:l,height:u,transformString:c,userSelectionActive:m}=Me(US,Re),p=Hh(),x=L.useRef(null);if(L.useEffect(()=>{var g;o||(g=x.current)==null||g.focus({preventScroll:!0})},[o]),Fh({nodeRef:x}),m||!l||!u)return null;const y=t?g=>{const w=i.getState().nodes.filter(S=>S.selected);t(g,w)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(_l,g.key)&&(g.preventDefault(),p({direction:_l[g.key],factor:g.shiftKey?4:1}))};return d.jsx("div",{className:Ge(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c},children:d.jsx("div",{ref:x,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:o?void 0:-1,onKeyDown:o?void 0:h,style:{width:l,height:u}})})}const um=typeof window<"u"?window:void 0,XS=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Bh({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,paneClickDistance:m,deleteKeyCode:p,selectionKeyCode:x,selectionOnDrag:y,selectionMode:h,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:N,elementsSelectable:I,zoomOnScroll:P,zoomOnPinch:_,panOnScroll:j,panOnScrollSpeed:V,panOnScrollMode:F,zoomOnDoubleClick:B,panOnDrag:q,defaultViewport:O,translateExtent:U,minZoom:X,maxZoom:W,preventScrolling:K,onSelectionContextMenu:R,noWheelClassName:$,noPanClassName:z,disableKeyboardA11y:D,onViewportChange:M,isControlledViewport:T}){const{nodesSelectionActive:C,userSelectionActive:b}=Me(XS,Re),A=Is(x,{target:um}),G=Is(k,{target:um}),Z=G||q,ne=G||j,oe=y&&Z!==!0,ae=A||b||oe;return _S({deleteKeyCode:p,multiSelectionKeyCode:S}),d.jsx(bS,{onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:P,zoomOnPinch:_,panOnScroll:ne,panOnScrollSpeed:V,panOnScrollMode:F,zoomOnDoubleClick:B,panOnDrag:!A&&Z,defaultViewport:O,translateExtent:U,minZoom:X,maxZoom:W,zoomActivationKeyCode:N,preventScrolling:K,noWheelClassName:$,noPanClassName:z,onViewportChange:M,isControlledViewport:T,paneClickDistance:m,selectionOnDrag:oe,children:d.jsxs(OS,{onSelectionStart:g,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:Z,isSelecting:!!ae,selectionMode:h,selectionKeyPressed:A,paneClickDistance:m,selectionOnDrag:oe,children:[t,C&&d.jsx(YS,{onSelectionContextMenu:R,noPanClassName:z,disableKeyboardA11y:D})]})})}Bh.displayName="FlowRenderer";const QS=L.memo(Bh),GS=t=>r=>t?kc(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function KS(t){return Me(L.useCallback(GS(t),[t]),Re)}const qS=t=>t.updateNodeInternals;function ZS(){const t=Me(qS),[r]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const u=l.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:l.target,force:!0})}),t(i)}));return L.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function JS({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=Fe(),u=L.useRef(null),c=L.useRef(null),m=L.useRef(t.sourcePosition),p=L.useRef(t.targetPosition),x=L.useRef(r),y=o&&!!t.internals.handleBounds;return L.useEffect(()=>{u.current&&!t.hidden&&(!y||c.current!==u.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(u.current),c.current=u.current)},[y,t.hidden]),L.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),L.useEffect(()=>{if(u.current){const h=x.current!==r,g=m.current!==t.sourcePosition,w=p.current!==t.targetPosition;(h||g||w)&&(x.current=r,m.current=t.sourcePosition,p.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),u}function eN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:u,onDoubleClick:c,nodesDraggable:m,elementsSelectable:p,nodesConnectable:x,nodesFocusable:y,resizeObserver:h,noDragClassName:g,noPanClassName:w,disableKeyboardA11y:S,rfId:k,nodeTypes:N,nodeClickDistance:I,onError:P}){const{node:_,internals:j,isParent:V}=Me(re=>{const ce=re.nodeLookup.get(t),ve=re.parentLookup.has(t);return{node:ce,internals:ce.internals,isParent:ve}},Re);let F=_.type||"default",B=(N==null?void 0:N[F])||am[F];B===void 0&&(P==null||P("003",tn.error003(F)),F="default",B=(N==null?void 0:N.default)||am.default);const q=!!(_.draggable||m&&typeof _.draggable>"u"),O=!!(_.selectable||p&&typeof _.selectable>"u"),U=!!(_.connectable||x&&typeof _.connectable>"u"),X=!!(_.focusable||y&&typeof _.focusable>"u"),W=Fe(),K=ph(_),R=JS({node:_,nodeType:F,hasDimensions:K,resizeObserver:h}),$=Fh({nodeRef:R,disabled:_.hidden||!q,noDragClassName:g,handleSelector:_.dragHandle,nodeId:t,isSelectable:O,nodeClickDistance:I}),z=Hh();if(_.hidden)return null;const D=wn(_),M=WS(_),T=O||q||r||o||i||l,C=o?re=>o(re,{...j.userNode}):void 0,b=i?re=>i(re,{...j.userNode}):void 0,A=l?re=>l(re,{...j.userNode}):void 0,G=u?re=>u(re,{...j.userNode}):void 0,Z=c?re=>c(re,{...j.userNode}):void 0,ne=re=>{const{selectNodesOnDrag:ce,nodeDragThreshold:ve}=W.getState();O&&(!ce||!q||ve>0)&&dc({id:t,store:W,nodeRef:R}),r&&r(re,{...j.userNode})},oe=re=>{if(!(gh(re.nativeEvent)||S)){if(oh.includes(re.key)&&O){const ce=re.key==="Escape";dc({id:t,store:W,unselect:ce,nodeRef:R})}else if(q&&_.selected&&Object.prototype.hasOwnProperty.call(_l,re.key)){re.preventDefault();const{ariaLabelConfig:ce}=W.getState();W.setState({ariaLiveMessage:ce["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~j.positionAbsolute.x,y:~~j.positionAbsolute.y})}),z({direction:_l[re.key],factor:re.shiftKey?4:1})}}},ae=()=>{var _e;if(S||!((_e=R.current)!=null&&_e.matches(":focus-visible")))return;const{transform:re,width:ce,height:ve,autoPanOnNodeFocus:Se,setCenter:Ce}=W.getState();if(!Se)return;kc(new Map([[t,_]]),{x:0,y:0,width:ce,height:ve},re,!0).length>0||Ce(_.position.x+D.width/2,_.position.y+D.height/2,{zoom:re[2]})};return d.jsx("div",{className:Ge(["react-flow__node",`react-flow__node-${F}`,{[w]:q},_.className,{selected:_.selected,selectable:O,parent:V,draggable:q,dragging:$}]),ref:R,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:T?"all":"none",visibility:K?"visible":"hidden",..._.style,...M},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:C,onMouseMove:b,onMouseLeave:A,onContextMenu:G,onClick:ne,onDoubleClick:Z,onKeyDown:X?oe:void 0,tabIndex:X?0:void 0,onFocus:X?ae:void 0,role:_.ariaRole??(X?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Oh}-${k}`,"aria-label":_.ariaLabel,..._.domAttributes,children:d.jsx($S,{value:t,children:d.jsx(B,{id:t,data:_.data,type:F,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:_.selected??!1,selectable:O,draggable:q,deletable:_.deletable??!0,isConnectable:U,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:$,dragHandle:_.dragHandle,zIndex:j.z,parentId:_.parentId,...D})})})}var tN=L.memo(eN);const nN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Wh(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:u}=Me(nN,Re),c=KS(t.onlyRenderVisibleElements),m=ZS();return d.jsx("div",{className:"react-flow__nodes",style:Rl,children:c.map(p=>d.jsx(tN,{id:p,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:u},p))})}Wh.displayName="NodeRenderer";const rN=L.memo(Wh);function oN(t){return Me(L.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const u=o.nodeLookup.get(l.source),c=o.nodeLookup.get(l.target);u&&c&&qw({sourceNode:u,targetNode:c,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),Re)}const sN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return d.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},iN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return d.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},cm={[Cl.Arrow]:sN,[Cl.ArrowClosed]:iN};function lN(t){const r=Fe();return L.useMemo(()=>{var l,u;return Object.prototype.hasOwnProperty.call(cm,t)?cm[t]:((u=(l=r.getState()).onError)==null||u.call(l,"009",tn.error009(t)),null)},[t])}const aN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:m="auto-start-reverse"})=>{const p=lN(r);return p?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:m,refX:"0",refY:"0",children:d.jsx(p,{color:o,strokeWidth:c})}):null},Uh=({defaultColor:t,rfId:r})=>{const o=Me(u=>u.edges),i=Me(u=>u.defaultEdgeOptions),l=L.useMemo(()=>s1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:l.map(u=>d.jsx(aN,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};Uh.displayName="MarkerDefinitions";var uN=L.memo(Uh);function Yh({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:c=[2,4],labelBgBorderRadius:m=2,children:p,className:x,...y}){const[h,g]=L.useState({x:1,y:0,width:0,height:0}),w=Ge(["react-flow__edge-textwrapper",x]),S=L.useRef(null);return L.useEffect(()=>{if(S.current){const k=S.current.getBBox();g({x:k.x,y:k.y,width:k.width,height:k.height})}},[o]),o?d.jsxs("g",{transform:`translate(${t-h.width/2} ${r-h.height/2})`,className:w,visibility:h.width?"visible":"hidden",...y,children:[l&&d.jsx("rect",{width:h.width+2*c[0],x:-c[0],y:-c[1],height:h.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:m,ry:m}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:S,style:i,children:o}),p]}):null}Yh.displayName="EdgeText";const cN=L.memo(Yh);function xo({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:m,labelBgBorderRadius:p,interactionWidth:x=20,...y}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...y,d:t,fill:"none",className:Ge(["react-flow__edge-path",y.className])}),x?d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}):null,i&&Wt(r)&&Wt(o)?d.jsx(cN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:m,labelBgBorderRadius:p}):null]})}function dm({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===ye.Left||t===ye.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function Xh({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top}){const[c,m]=dm({pos:o,x1:t,y1:r,x2:i,y2:l}),[p,x]=dm({pos:u,x1:i,y1:l,x2:t,y2:r}),[y,h,g,w]=yh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:c,sourceControlY:m,targetControlX:p,targetControlY:x});return[`M${t},${r} C${c},${m} ${p},${x} ${i},${l}`,y,h,g,w]}function Qh(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:m,label:p,labelStyle:x,labelShowBg:y,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,interactionWidth:I})=>{const[P,_,j]=Xh({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:m}),V=t.isInternal?void 0:r;return d.jsx(xo,{id:V,path:P,labelX:_,labelY:j,label:p,labelStyle:x,labelShowBg:y,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,interactionWidth:I})})}const dN=Qh({isInternal:!1}),Gh=Qh({isInternal:!0});dN.displayName="SimpleBezierEdge";Gh.displayName="SimpleBezierEdgeInternal";function Kh(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:c,labelStyle:m,labelShowBg:p,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:h,style:g,sourcePosition:w=ye.Bottom,targetPosition:S=ye.Top,markerEnd:k,markerStart:N,pathOptions:I,interactionWidth:P})=>{const[_,j,V]=lc({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:u,targetPosition:S,borderRadius:I==null?void 0:I.borderRadius,offset:I==null?void 0:I.offset,stepPosition:I==null?void 0:I.stepPosition}),F=t.isInternal?void 0:r;return d.jsx(xo,{id:F,path:_,labelX:j,labelY:V,label:c,labelStyle:m,labelShowBg:p,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:h,style:g,markerEnd:k,markerStart:N,interactionWidth:P})})}const qh=Kh({isInternal:!1}),Zh=Kh({isInternal:!0});qh.displayName="SmoothStepEdge";Zh.displayName="SmoothStepEdgeInternal";function Jh(t){return L.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return d.jsx(qh,{...o,id:i,pathOptions:L.useMemo(()=>{var u;return{borderRadius:0,offset:(u=o.pathOptions)==null?void 0:u.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const fN=Jh({isInternal:!1}),eg=Jh({isInternal:!0});fN.displayName="StepEdge";eg.displayName="StepEdgeInternal";function tg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:c,labelStyle:m,labelShowBg:p,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:h,style:g,markerEnd:w,markerStart:S,interactionWidth:k})=>{const[N,I,P]=wh({sourceX:o,sourceY:i,targetX:l,targetY:u}),_=t.isInternal?void 0:r;return d.jsx(xo,{id:_,path:N,labelX:I,labelY:P,label:c,labelStyle:m,labelShowBg:p,labelBgStyle:x,labelBgPadding:y,labelBgBorderRadius:h,style:g,markerEnd:w,markerStart:S,interactionWidth:k})})}const pN=tg({isInternal:!1}),ng=tg({isInternal:!0});pN.displayName="StraightEdge";ng.displayName="StraightEdgeInternal";function rg(t){return L.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c=ye.Bottom,targetPosition:m=ye.Top,label:p,labelStyle:x,labelShowBg:y,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,pathOptions:I,interactionWidth:P})=>{const[_,j,V]=Al({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:m,curvature:I==null?void 0:I.curvature}),F=t.isInternal?void 0:r;return d.jsx(xo,{id:F,path:_,labelX:j,labelY:V,label:p,labelStyle:x,labelShowBg:y,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,interactionWidth:P})})}const mN=rg({isInternal:!1}),og=rg({isInternal:!0});mN.displayName="BezierEdge";og.displayName="BezierEdgeInternal";const fm={default:og,straight:ng,step:eg,smoothstep:Zh,simplebezier:Gh},pm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},hN=(t,r,o)=>o===ye.Left?t-r:o===ye.Right?t+r:t,gN=(t,r,o)=>o===ye.Top?t-r:o===ye.Bottom?t+r:t,mm="react-flow__edgeupdater";function hm({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:u,onMouseOut:c,type:m}){return d.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:c,className:Ge([mm,`${mm}-${m}`]),cx:hN(r,i,t),cy:gN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function xN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:u,targetY:c,sourcePosition:m,targetPosition:p,onReconnect:x,onReconnectStart:y,onReconnectEnd:h,setReconnecting:g,setUpdateHover:w}){const S=Fe(),k=(j,V)=>{if(j.button!==0)return;const{autoPanOnConnect:F,domNode:B,isValidConnection:q,connectionMode:O,connectionRadius:U,lib:X,onConnectStart:W,onConnectEnd:K,cancelConnection:R,nodeLookup:$,rfId:z,panBy:D,updateConnection:M}=S.getState(),T=V.type==="target",C=(G,Z)=>{g(!1),h==null||h(G,o,V.type,Z)},b=G=>x==null?void 0:x(o,G),A=(G,Z)=>{g(!0),y==null||y(j,o,V.type),W==null||W(G,Z)};cc.onPointerDown(j.nativeEvent,{autoPanOnConnect:F,connectionMode:O,connectionRadius:U,domNode:B,handleId:V.id,nodeId:V.nodeId,nodeLookup:$,isTarget:T,edgeUpdaterType:V.type,lib:X,flowId:z,cancelConnection:R,panBy:D,isValidConnection:q,onConnect:b,onConnectStart:A,onConnectEnd:K,onReconnectEnd:C,updateConnection:M,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:j.currentTarget})},N=j=>k(j,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),I=j=>k(j,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),P=()=>w(!0),_=()=>w(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(hm,{position:m,centerX:i,centerY:l,radius:r,onMouseDown:N,onMouseEnter:P,onMouseOut:_,type:"source"}),(t===!0||t==="target")&&d.jsx(hm,{position:p,centerX:u,centerY:c,radius:r,onMouseDown:I,onMouseEnter:P,onMouseOut:_,type:"target"})]})}function yN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:u,onContextMenu:c,onMouseEnter:m,onMouseMove:p,onMouseLeave:x,reconnectRadius:y,onReconnect:h,onReconnectStart:g,onReconnectEnd:w,rfId:S,edgeTypes:k,noPanClassName:N,onError:I,disableKeyboardA11y:P}){let _=Me(Ce=>Ce.edgeLookup.get(t));const j=Me(Ce=>Ce.defaultEdgeOptions);_=j?{...j,..._}:_;let V=_.type||"default",F=(k==null?void 0:k[V])||fm[V];F===void 0&&(I==null||I("011",tn.error011(V)),V="default",F=(k==null?void 0:k.default)||fm.default);const B=!!(_.focusable||r&&typeof _.focusable>"u"),q=typeof h<"u"&&(_.reconnectable||o&&typeof _.reconnectable>"u"),O=!!(_.selectable||i&&typeof _.selectable>"u"),U=L.useRef(null),[X,W]=L.useState(!1),[K,R]=L.useState(!1),$=Fe(),{zIndex:z,sourceX:D,sourceY:M,targetX:T,targetY:C,sourcePosition:b,targetPosition:A}=Me(L.useCallback(Ce=>{const we=Ce.nodeLookup.get(_.source),_e=Ce.nodeLookup.get(_.target);if(!we||!_e)return{zIndex:_.zIndex,...pm};const Te=o1({id:t,sourceNode:we,targetNode:_e,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:Ce.connectionMode,onError:I});return{zIndex:Kw({selected:_.selected,zIndex:_.zIndex,sourceNode:we,targetNode:_e,elevateOnSelect:Ce.elevateEdgesOnSelect,zIndexMode:Ce.zIndexMode}),...Te||pm}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Re),G=L.useMemo(()=>_.markerStart?`url('#${ac(_.markerStart,S)}')`:void 0,[_.markerStart,S]),Z=L.useMemo(()=>_.markerEnd?`url('#${ac(_.markerEnd,S)}')`:void 0,[_.markerEnd,S]);if(_.hidden||D===null||M===null||T===null||C===null)return null;const ne=Ce=>{var je;const{addSelectedEdges:we,unselectNodesAndEdges:_e,multiSelectionActive:Te}=$.getState();O&&($.setState({nodesSelectionActive:!1}),_.selected&&Te?(_e({nodes:[],edges:[_]}),(je=U.current)==null||je.blur()):we([t])),l&&l(Ce,_)},oe=u?Ce=>{u(Ce,{..._})}:void 0,ae=c?Ce=>{c(Ce,{..._})}:void 0,re=m?Ce=>{m(Ce,{..._})}:void 0,ce=p?Ce=>{p(Ce,{..._})}:void 0,ve=x?Ce=>{x(Ce,{..._})}:void 0,Se=Ce=>{var we;if(!P&&oh.includes(Ce.key)&&O){const{unselectNodesAndEdges:_e,addSelectedEdges:Te}=$.getState();Ce.key==="Escape"?((we=U.current)==null||we.blur(),_e({edges:[_]})):Te([t])}};return d.jsx("svg",{style:{zIndex:z},children:d.jsxs("g",{className:Ge(["react-flow__edge",`react-flow__edge-${V}`,_.className,N,{selected:_.selected,animated:_.animated,inactive:!O&&!l,updating:X,selectable:O}]),onClick:ne,onDoubleClick:oe,onContextMenu:ae,onMouseEnter:re,onMouseMove:ce,onMouseLeave:ve,onKeyDown:B?Se:void 0,tabIndex:B?0:void 0,role:_.ariaRole??(B?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":B?`${Ah}-${S}`:void 0,ref:U,..._.domAttributes,children:[!K&&d.jsx(F,{id:t,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:O,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:D,sourceY:M,targetX:T,targetY:C,sourcePosition:b,targetPosition:A,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:G,markerEnd:Z,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),q&&d.jsx(xN,{edge:_,isReconnectable:q,reconnectRadius:y,onReconnect:h,onReconnectStart:g,onReconnectEnd:w,sourceX:D,sourceY:M,targetX:T,targetY:C,sourcePosition:b,targetPosition:A,setUpdateHover:W,setReconnecting:R})]})})}var vN=L.memo(yN);const wN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function sg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:u,onEdgeContextMenu:c,onEdgeMouseEnter:m,onEdgeMouseMove:p,onEdgeMouseLeave:x,onEdgeClick:y,reconnectRadius:h,onEdgeDoubleClick:g,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:k}){const{edgesFocusable:N,edgesReconnectable:I,elementsSelectable:P,onError:_}=Me(wN,Re),j=oN(r);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(uN,{defaultColor:t,rfId:o}),j.map(V=>d.jsx(vN,{id:V,edgesFocusable:N,edgesReconnectable:I,elementsSelectable:P,noPanClassName:l,onReconnect:u,onContextMenu:c,onMouseEnter:m,onMouseMove:p,onMouseLeave:x,onClick:y,reconnectRadius:h,onDoubleClick:g,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:_,edgeTypes:i,disableKeyboardA11y:k},V))]})}sg.displayName="EdgeRenderer";const SN=L.memo(sg),NN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function kN({children:t}){const r=Me(NN);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function CN(t){const r=Er(),o=L.useRef(!1);L.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const IN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function EN(t){const r=Me(IN),o=Fe();return L.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function _N(t){return t.connection.inProgress?{...t.connection,to:Ds(t.connection.to,t.transform)}:{...t.connection}}function jN(t){return _N}function MN(t){const r=jN();return Me(r,Re)}const bN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function PN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:u,height:c,isValid:m,inProgress:p}=Me(bN,Re);return!(u&&l&&p)?null:d.jsx("svg",{style:t,width:u,height:c,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Ge(["react-flow__connection",lh(m)]),children:d.jsx(ig,{style:r,type:o,CustomComponent:i,isValid:m})})})}const ig=({style:t,type:r=Un.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:u,fromNode:c,fromHandle:m,fromPosition:p,to:x,toNode:y,toHandle:h,toPosition:g,pointer:w}=MN();if(!l)return;if(o)return d.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:c,fromHandle:m,fromX:u.x,fromY:u.y,toX:x.x,toY:x.y,fromPosition:p,toPosition:g,connectionStatus:lh(i),toNode:y,toHandle:h,pointer:w});let S="";const k={sourceX:u.x,sourceY:u.y,sourcePosition:p,targetX:x.x,targetY:x.y,targetPosition:g};switch(r){case Un.Bezier:[S]=Al(k);break;case Un.SimpleBezier:[S]=Xh(k);break;case Un.Step:[S]=lc({...k,borderRadius:0});break;case Un.SmoothStep:[S]=lc(k);break;default:[S]=wh(k)}return d.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};ig.displayName="ConnectionLine";const DN={};function gm(t=DN){L.useRef(t),Fe(),L.useEffect(()=>{},[t])}function TN(){Fe(),L.useRef(!1),L.useEffect(()=>{},[])}function lg({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:x,onNodeContextMenu:y,onSelectionContextMenu:h,onSelectionStart:g,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:k,connectionLineComponent:N,connectionLineContainerStyle:I,selectionKeyCode:P,selectionOnDrag:_,selectionMode:j,multiSelectionKeyCode:V,panActivationKeyCode:F,zoomActivationKeyCode:B,deleteKeyCode:q,onlyRenderVisibleElements:O,elementsSelectable:U,defaultViewport:X,translateExtent:W,minZoom:K,maxZoom:R,preventScrolling:$,defaultMarkerColor:z,zoomOnScroll:D,zoomOnPinch:M,panOnScroll:T,panOnScrollSpeed:C,panOnScrollMode:b,zoomOnDoubleClick:A,panOnDrag:G,onPaneClick:Z,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneScroll:re,onPaneContextMenu:ce,paneClickDistance:ve,nodeClickDistance:Se,onEdgeContextMenu:Ce,onEdgeMouseEnter:we,onEdgeMouseMove:_e,onEdgeMouseLeave:Te,reconnectRadius:je,onReconnect:Xe,onReconnectStart:Ot,onReconnectEnd:gt,noDragClassName:xt,noWheelClassName:Et,noPanClassName:on,disableKeyboardA11y:Sn,nodeExtent:_r,rfId:Xn,viewport:sn,onViewportChange:ln}){return gm(t),gm(r),TN(),CN(o),EN(sn),d.jsx(QS,{onPaneClick:Z,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneContextMenu:ce,onPaneScroll:re,paneClickDistance:ve,deleteKeyCode:q,selectionKeyCode:P,selectionOnDrag:_,selectionMode:j,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:V,panActivationKeyCode:F,zoomActivationKeyCode:B,elementsSelectable:U,zoomOnScroll:D,zoomOnPinch:M,zoomOnDoubleClick:A,panOnScroll:T,panOnScrollSpeed:C,panOnScrollMode:b,panOnDrag:G,defaultViewport:X,translateExtent:W,minZoom:K,maxZoom:R,onSelectionContextMenu:h,preventScrolling:$,noDragClassName:xt,noWheelClassName:Et,noPanClassName:on,disableKeyboardA11y:Sn,onViewportChange:ln,isControlledViewport:!!sn,children:d.jsxs(kN,{children:[d.jsx(SN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:c,onReconnect:Xe,onReconnectStart:Ot,onReconnectEnd:gt,onlyRenderVisibleElements:O,onEdgeContextMenu:Ce,onEdgeMouseEnter:we,onEdgeMouseMove:_e,onEdgeMouseLeave:Te,reconnectRadius:je,defaultMarkerColor:z,noPanClassName:on,disableKeyboardA11y:Sn,rfId:Xn}),d.jsx(PN,{style:k,type:S,component:N,containerStyle:I}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(rN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:x,onNodeContextMenu:y,nodeClickDistance:Se,onlyRenderVisibleElements:O,noPanClassName:on,noDragClassName:xt,disableKeyboardA11y:Sn,nodeExtent:_r,rfId:Xn}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}lg.displayName="GraphView";const ON=L.memo(lg),xm=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:c,fitViewOptions:m,minZoom:p=.5,maxZoom:x=2,nodeOrigin:y,nodeExtent:h,zIndexMode:g="basic"}={})=>{const w=new Map,S=new Map,k=new Map,N=new Map,I=i??r??[],P=o??t??[],_=y??[0,0],j=h??Ss;kh(k,N,I);const V=uc(P,w,S,{nodeOrigin:_,nodeExtent:j,zIndexMode:g});let F=[0,0,1];if(c&&l&&u){const B=bs(w,{filter:X=>!!((X.width||X.initialWidth)&&(X.height||X.initialHeight))}),{x:q,y:O,zoom:U}=Cc(B,l,u,p,x,(m==null?void 0:m.padding)??.1);F=[q,O,U]}return{rfId:"1",width:l??0,height:u??0,transform:F,nodes:P,nodesInitialized:V,nodeLookup:w,parentLookup:S,edges:I,edgeLookup:N,connectionLookup:k,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:p,maxZoom:x,translateExtent:Ss,nodeExtent:j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:po.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:m,fitViewResolver:null,connection:{...ih},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Ww,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:sh,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},AN=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:c,fitViewOptions:m,minZoom:p,maxZoom:x,nodeOrigin:y,nodeExtent:h,zIndexMode:g})=>K1((w,S)=>{async function k(){const{nodeLookup:N,panZoom:I,fitViewOptions:P,fitViewResolver:_,width:j,height:V,minZoom:F,maxZoom:B}=S();I&&(await Vw({nodes:N,width:j,height:V,panZoom:I,minZoom:F,maxZoom:B},P),_==null||_.resolve(!0),w({fitViewResolver:null}))}return{...xm({nodes:t,edges:r,width:l,height:u,fitView:c,fitViewOptions:m,minZoom:p,maxZoom:x,nodeOrigin:y,nodeExtent:h,defaultNodes:o,defaultEdges:i,zIndexMode:g}),setNodes:N=>{const{nodeLookup:I,parentLookup:P,nodeOrigin:_,elevateNodesOnSelect:j,fitViewQueued:V,zIndexMode:F}=S(),B=uc(N,I,P,{nodeOrigin:_,nodeExtent:h,elevateNodesOnSelect:j,checkEquality:!0,zIndexMode:F});V&&B?(k(),w({nodes:N,nodesInitialized:B,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:N,nodesInitialized:B})},setEdges:N=>{const{connectionLookup:I,edgeLookup:P}=S();kh(I,P,N),w({edges:N})},setDefaultNodesAndEdges:(N,I)=>{if(N){const{setNodes:P}=S();P(N),w({hasDefaultNodes:!0})}if(I){const{setEdges:P}=S();P(I),w({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:I,nodeLookup:P,parentLookup:_,domNode:j,nodeOrigin:V,nodeExtent:F,debug:B,fitViewQueued:q,zIndexMode:O}=S(),{changes:U,updatedInternals:X}=f1(N,P,_,j,V,F,O);X&&(a1(P,_,{nodeOrigin:V,nodeExtent:F,zIndexMode:O}),q?(k(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(U==null?void 0:U.length)>0&&(B&&console.log("React Flow: trigger node changes",U),I==null||I(U)))},updateNodePositions:(N,I=!1)=>{const P=[];let _=[];const{nodeLookup:j,triggerNodeChanges:V,connection:F,updateConnection:B,onNodesChangeMiddlewareMap:q}=S();for(const[O,U]of N){const X=j.get(O),W=!!(X!=null&&X.expandParent&&(X!=null&&X.parentId)&&(U!=null&&U.position)),K={id:O,type:"position",position:W?{x:Math.max(0,U.position.x),y:Math.max(0,U.position.y)}:U.position,dragging:I};if(X&&F.inProgress&&F.fromNode.id===X.id){const R=Sr(X,F.fromHandle,ye.Left,!0);B({...F,from:R})}W&&X.parentId&&P.push({id:O,parentId:X.parentId,rect:{...U.internals.positionAbsolute,width:U.measured.width??0,height:U.measured.height??0}}),_.push(K)}if(P.length>0){const{parentLookup:O,nodeOrigin:U}=S(),X=bc(P,j,O,U);_.push(...X)}for(const O of q.values())_=O(_);V(_)},triggerNodeChanges:N=>{const{onNodesChange:I,setNodes:P,nodes:_,hasDefaultNodes:j,debug:V}=S();if(N!=null&&N.length){if(j){const F=yS(N,_);P(F)}V&&console.log("React Flow: trigger node changes",N),I==null||I(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:I,setEdges:P,edges:_,hasDefaultEdges:j,debug:V}=S();if(N!=null&&N.length){if(j){const F=vS(N,_);P(F)}V&&console.log("React Flow: trigger edge changes",N),I==null||I(N)}},addSelectedNodes:N=>{const{multiSelectionActive:I,edgeLookup:P,nodeLookup:_,triggerNodeChanges:j,triggerEdgeChanges:V}=S();if(I){const F=N.map(B=>pr(B,!0));j(F);return}j(lo(_,new Set([...N]),!0)),V(lo(P))},addSelectedEdges:N=>{const{multiSelectionActive:I,edgeLookup:P,nodeLookup:_,triggerNodeChanges:j,triggerEdgeChanges:V}=S();if(I){const F=N.map(B=>pr(B,!0));V(F);return}V(lo(P,new Set([...N]))),j(lo(_,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:I}={})=>{const{edges:P,nodes:_,nodeLookup:j,triggerNodeChanges:V,triggerEdgeChanges:F}=S(),B=N||_,q=I||P,O=B.map(X=>{const W=j.get(X.id);return W&&(W.selected=!1),pr(X.id,!1)}),U=q.map(X=>pr(X.id,!1));V(O),F(U)},setMinZoom:N=>{const{panZoom:I,maxZoom:P}=S();I==null||I.setScaleExtent([N,P]),w({minZoom:N})},setMaxZoom:N=>{const{panZoom:I,minZoom:P}=S();I==null||I.setScaleExtent([P,N]),w({maxZoom:N})},setTranslateExtent:N=>{var I;(I=S().panZoom)==null||I.setTranslateExtent(N),w({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:I,triggerNodeChanges:P,triggerEdgeChanges:_,elementsSelectable:j}=S();if(!j)return;const V=I.reduce((B,q)=>q.selected?[...B,pr(q.id,!1)]:B,[]),F=N.reduce((B,q)=>q.selected?[...B,pr(q.id,!1)]:B,[]);P(V),_(F)},setNodeExtent:N=>{const{nodes:I,nodeLookup:P,parentLookup:_,nodeOrigin:j,elevateNodesOnSelect:V,nodeExtent:F,zIndexMode:B}=S();N[0][0]===F[0][0]&&N[0][1]===F[0][1]&&N[1][0]===F[1][0]&&N[1][1]===F[1][1]||(uc(I,P,_,{nodeOrigin:j,nodeExtent:N,elevateNodesOnSelect:V,checkEquality:!1,zIndexMode:B}),w({nodeExtent:N}))},panBy:N=>{const{transform:I,width:P,height:_,panZoom:j,translateExtent:V}=S();return p1({delta:N,panZoom:j,transform:I,translateExtent:V,width:P,height:_})},setCenter:async(N,I,P)=>{const{width:_,height:j,maxZoom:V,panZoom:F}=S();if(!F)return Promise.resolve(!1);const B=typeof(P==null?void 0:P.zoom)<"u"?P.zoom:V;return await F.setViewport({x:_/2-N*B,y:j/2-I*B,zoom:B},{duration:P==null?void 0:P.duration,ease:P==null?void 0:P.ease,interpolate:P==null?void 0:P.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...ih}})},updateConnection:N=>{w({connection:N})},reset:()=>w({...xm()})}},Object.is);function Fl({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:u,initialMinZoom:c,initialMaxZoom:m,initialFitViewOptions:p,fitView:x,nodeOrigin:y,nodeExtent:h,zIndexMode:g,children:w}){const[S]=L.useState(()=>AN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:x,minZoom:c,maxZoom:m,fitViewOptions:p,nodeOrigin:y,nodeExtent:h,zIndexMode:g}));return d.jsx(Z1,{value:S,children:d.jsx(kS,{children:w})})}function $N({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:u,height:c,fitView:m,fitViewOptions:p,minZoom:x,maxZoom:y,nodeOrigin:h,nodeExtent:g,zIndexMode:w}){return L.useContext(zl)?d.jsx(d.Fragment,{children:t}):d.jsx(Fl,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:u,initialHeight:c,fitView:m,initialFitViewOptions:p,initialMinZoom:x,initialMaxZoom:y,nodeOrigin:h,nodeExtent:g,zIndexMode:w,children:t})}const zN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function LN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:u,edgeTypes:c,onNodeClick:m,onEdgeClick:p,onInit:x,onMove:y,onMoveStart:h,onMoveEnd:g,onConnect:w,onConnectStart:S,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:I,onNodeMouseEnter:P,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:V,onNodeDoubleClick:F,onNodeDragStart:B,onNodeDrag:q,onNodeDragStop:O,onNodesDelete:U,onEdgesDelete:X,onDelete:W,onSelectionChange:K,onSelectionDragStart:R,onSelectionDrag:$,onSelectionDragStop:z,onSelectionContextMenu:D,onSelectionStart:M,onSelectionEnd:T,onBeforeDelete:C,connectionMode:b,connectionLineType:A=Un.Bezier,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:ne,deleteKeyCode:oe="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:re=!1,selectionMode:ce=Ns.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:Se=Cs()?"Meta":"Control",zoomActivationKeyCode:Ce=Cs()?"Meta":"Control",snapToGrid:we,snapGrid:_e,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:je,nodesDraggable:Xe,autoPanOnNodeFocus:Ot,nodesConnectable:gt,nodesFocusable:xt,nodeOrigin:Et=$h,edgesFocusable:on,edgesReconnectable:Sn,elementsSelectable:_r=!0,defaultViewport:Xn=dS,minZoom:sn=.5,maxZoom:ln=2,translateExtent:Qn=Ss,preventScrolling:Ts=!0,nodeExtent:an,defaultMarkerColor:Gn="#b1b1b7",zoomOnScroll:Vl=!0,zoomOnPinch:Os=!0,panOnScroll:As=!1,panOnScrollSpeed:Bl=.5,panOnScrollMode:yo=xr.Free,zoomOnDoubleClick:vo=!0,panOnDrag:wo=!0,onPaneClick:So,onPaneMouseEnter:No,onPaneMouseMove:Nn,onPaneMouseLeave:kn,onPaneScroll:$s,onPaneContextMenu:zs,paneClickDistance:Ls=1,nodeClickDistance:Rs=0,children:Fs,onReconnect:ko,onReconnectStart:Hs,onReconnectEnd:Kn,onEdgeContextMenu:Co,onEdgeDoubleClick:qn,onEdgeMouseEnter:Wl,onEdgeMouseMove:Zn,onEdgeMouseLeave:jr,reconnectRadius:Mr=10,onNodesChange:Io,onEdgesChange:Ul,noDragClassName:Yl="nodrag",noWheelClassName:Xl="nowheel",noPanClassName:Xt="nopan",fitView:Eo,fitViewOptions:_o,connectOnClick:Ql,attributionPosition:Vs,proOptions:Bs,defaultEdgeOptions:Ws,elevateNodesOnSelect:Us=!0,elevateEdgesOnSelect:Gl=!1,disableKeyboardA11y:Ys=!1,autoPanOnConnect:He,autoPanOnNodeDrag:Kl,autoPanSpeed:jo,connectionRadius:Xs,isValidConnection:br,onError:ql,style:Qs,id:Jn,nodeDragThreshold:_t,connectionDragThreshold:Zl,viewport:yt,onViewportChange:Jl,width:ea,height:ta,colorMode:Pr="light",debug:Dr,onScroll:Qt,ariaLabelConfig:Tr,zIndexMode:Gs="basic",...na},Mo){const Or=Jn||"1",bo=hS(Pr),er=L.useCallback(Ks=>{Ks.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Qt==null||Qt(Ks)},[Qt]);return d.jsx("div",{"data-testid":"rf__wrapper",...na,onScroll:er,style:{...Qs,...zN},ref:Mo,className:Ge(["react-flow",l,bo]),id:Jn,role:"application",children:d.jsxs($N,{nodes:t,edges:r,width:ea,height:ta,fitView:Eo,fitViewOptions:_o,minZoom:sn,maxZoom:ln,nodeOrigin:Et,nodeExtent:an,zIndexMode:Gs,children:[d.jsx(ON,{onInit:x,onNodeClick:m,onEdgeClick:p,onNodeMouseEnter:P,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:V,onNodeDoubleClick:F,nodeTypes:u,edgeTypes:c,connectionLineType:A,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:ne,selectionKeyCode:ae,selectionOnDrag:re,selectionMode:ce,deleteKeyCode:oe,multiSelectionKeyCode:Se,panActivationKeyCode:ve,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:Te,defaultViewport:Xn,translateExtent:Qn,minZoom:sn,maxZoom:ln,preventScrolling:Ts,zoomOnScroll:Vl,zoomOnPinch:Os,zoomOnDoubleClick:vo,panOnScroll:As,panOnScrollSpeed:Bl,panOnScrollMode:yo,panOnDrag:wo,onPaneClick:So,onPaneMouseEnter:No,onPaneMouseMove:Nn,onPaneMouseLeave:kn,onPaneScroll:$s,onPaneContextMenu:zs,paneClickDistance:Ls,nodeClickDistance:Rs,onSelectionContextMenu:D,onSelectionStart:M,onSelectionEnd:T,onReconnect:ko,onReconnectStart:Hs,onReconnectEnd:Kn,onEdgeContextMenu:Co,onEdgeDoubleClick:qn,onEdgeMouseEnter:Wl,onEdgeMouseMove:Zn,onEdgeMouseLeave:jr,reconnectRadius:Mr,defaultMarkerColor:Gn,noDragClassName:Yl,noWheelClassName:Xl,noPanClassName:Xt,rfId:Or,disableKeyboardA11y:Ys,nodeExtent:an,viewport:yt,onViewportChange:Jl}),d.jsx(mS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:I,nodesDraggable:Xe,autoPanOnNodeFocus:Ot,nodesConnectable:gt,nodesFocusable:xt,edgesFocusable:on,edgesReconnectable:Sn,elementsSelectable:_r,elevateNodesOnSelect:Us,elevateEdgesOnSelect:Gl,minZoom:sn,maxZoom:ln,nodeExtent:an,onNodesChange:Io,onEdgesChange:Ul,snapToGrid:we,snapGrid:_e,connectionMode:b,translateExtent:Qn,connectOnClick:Ql,defaultEdgeOptions:Ws,fitView:Eo,fitViewOptions:_o,onNodesDelete:U,onEdgesDelete:X,onDelete:W,onNodeDragStart:B,onNodeDrag:q,onNodeDragStop:O,onSelectionDrag:$,onSelectionDragStart:R,onSelectionDragStop:z,onMove:y,onMoveStart:h,onMoveEnd:g,noPanClassName:Xt,nodeOrigin:Et,rfId:Or,autoPanOnConnect:He,autoPanOnNodeDrag:Kl,autoPanSpeed:jo,onError:ql,connectionRadius:Xs,isValidConnection:br,selectNodesOnDrag:je,nodeDragThreshold:_t,connectionDragThreshold:Zl,onBeforeDelete:C,debug:Dr,ariaLabelConfig:Tr,zIndexMode:Gs}),d.jsx(cS,{onSelectionChange:K}),Fs,d.jsx(sS,{proOptions:Bs,position:Vs}),d.jsx(oS,{rfId:Or,disableKeyboardA11y:Ys})]})})}var ag=Lh(LN);const RN=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function ug({children:t}){const r=Me(RN);return r?q1.createPortal(t,r):null}function FN({dimensions:t,lineWidth:r,variant:o,className:i}){return d.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ge(["react-flow__background-pattern",o,i])})}function HN({radius:t,className:r}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Ge(["react-flow__background-pattern","dots",r])})}var Yn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Yn||(Yn={}));const VN={[Yn.Dots]:1,[Yn.Lines]:1,[Yn.Cross]:6},BN=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function cg({id:t,variant:r=Yn.Dots,gap:o=20,size:i,lineWidth:l=1,offset:u=0,color:c,bgColor:m,style:p,className:x,patternClassName:y}){const h=L.useRef(null),{transform:g,patternId:w}=Me(BN,Re),S=i||VN[r],k=r===Yn.Dots,N=r===Yn.Cross,I=Array.isArray(o)?o:[o,o],P=[I[0]*g[2]||1,I[1]*g[2]||1],_=S*g[2],j=Array.isArray(u)?u:[u,u],V=N?[_,_]:P,F=[j[0]*g[2]||1+V[0]/2,j[1]*g[2]||1+V[1]/2],B=`${w}${t||""}`;return d.jsxs("svg",{className:Ge(["react-flow__background",x]),style:{...p,...Rl,"--xy-background-color-props":m,"--xy-background-pattern-color-props":c},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:B,x:g[0]%P[0],y:g[1]%P[1],width:P[0],height:P[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`,children:k?d.jsx(HN,{radius:_/2,className:y}):d.jsx(FN,{dimensions:V,lineWidth:l,variant:r,className:y})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${B})`})]})}cg.displayName="Background";const dg=L.memo(cg);function WN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function UN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function YN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function XN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function QN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function il({children:t,className:r,...o}){return d.jsx("button",{type:"button",className:Ge(["react-flow__controls-button",r]),...o,children:t})}const GN=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function fg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:c,onFitView:m,onInteractiveChange:p,className:x,children:y,position:h="bottom-left",orientation:g="vertical","aria-label":w}){const S=Fe(),{isInteractive:k,minZoomReached:N,maxZoomReached:I,ariaLabelConfig:P}=Me(GN,Re),{zoomIn:_,zoomOut:j,fitView:V}=Er(),F=()=>{_(),u==null||u()},B=()=>{j(),c==null||c()},q=()=>{V(l),m==null||m()},O=()=>{S.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),p==null||p(!k)},U=g==="horizontal"?"horizontal":"vertical";return d.jsxs(Ll,{className:Ge(["react-flow__controls",U,x]),position:h,style:t,"data-testid":"rf__controls","aria-label":w??P["controls.ariaLabel"],children:[r&&d.jsxs(d.Fragment,{children:[d.jsx(il,{onClick:F,className:"react-flow__controls-zoomin",title:P["controls.zoomIn.ariaLabel"],"aria-label":P["controls.zoomIn.ariaLabel"],disabled:I,children:d.jsx(WN,{})}),d.jsx(il,{onClick:B,className:"react-flow__controls-zoomout",title:P["controls.zoomOut.ariaLabel"],"aria-label":P["controls.zoomOut.ariaLabel"],disabled:N,children:d.jsx(UN,{})})]}),o&&d.jsx(il,{className:"react-flow__controls-fitview",onClick:q,title:P["controls.fitView.ariaLabel"],"aria-label":P["controls.fitView.ariaLabel"],children:d.jsx(YN,{})}),i&&d.jsx(il,{className:"react-flow__controls-interactive",onClick:O,title:P["controls.interactive.ariaLabel"],"aria-label":P["controls.interactive.ariaLabel"],children:k?d.jsx(QN,{}):d.jsx(XN,{})}),y]})}fg.displayName="Controls";const pg=L.memo(fg);function KN({id:t,x:r,y:o,width:i,height:l,style:u,color:c,strokeColor:m,strokeWidth:p,className:x,borderRadius:y,shapeRendering:h,selected:g,onClick:w}){const{background:S,backgroundColor:k}=u||{},N=c||S||k;return d.jsx("rect",{className:Ge(["react-flow__minimap-node",{selected:g},x]),x:r,y:o,rx:y,ry:y,width:i,height:l,style:{fill:N,stroke:m,strokeWidth:p},shapeRendering:h,onClick:w?I=>w(I,t):void 0})}const qN=L.memo(KN),ZN=t=>t.nodes.map(r=>r.id),qu=t=>t instanceof Function?t:()=>t;function JN({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:u=qN,onClick:c}){const m=Me(ZN,Re),p=qu(r),x=qu(t),y=qu(o),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:m.map(g=>d.jsx(tk,{id:g,nodeColorFunc:p,nodeStrokeColorFunc:x,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:u,onClick:c,shapeRendering:h},g))})}function ek({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:c,NodeComponent:m,onClick:p}){const{node:x,x:y,y:h,width:g,height:w}=Me(S=>{const{internals:k}=S.nodeLookup.get(t),N=k.userNode,{x:I,y:P}=k.positionAbsolute,{width:_,height:j}=wn(N);return{node:N,x:I,y:P,width:_,height:j}},Re);return!x||x.hidden||!ph(x)?null:d.jsx(m,{x:y,y:h,width:g,height:w,style:x.style,selected:!!x.selected,className:i(x),color:r(x),borderRadius:l,strokeColor:o(x),strokeWidth:u,shapeRendering:c,onClick:p,id:x.id})}const tk=L.memo(ek);var nk=L.memo(JN);const rk=200,ok=150,sk=t=>!t.hidden,ik=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?fh(bs(t.nodeLookup,{filter:sk}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},lk="react-flow__minimap-desc";function mg({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:m,bgColor:p,maskColor:x,maskStrokeColor:y,maskStrokeWidth:h,position:g="bottom-right",onClick:w,onNodeClick:S,pannable:k=!1,zoomable:N=!1,ariaLabel:I,inversePan:P,zoomStep:_=1,offsetScale:j=5}){const V=Fe(),F=L.useRef(null),{boundingRect:B,viewBB:q,rfId:O,panZoom:U,translateExtent:X,flowWidth:W,flowHeight:K,ariaLabelConfig:R}=Me(ik,Re),$=(t==null?void 0:t.width)??rk,z=(t==null?void 0:t.height)??ok,D=B.width/$,M=B.height/z,T=Math.max(D,M),C=T*$,b=T*z,A=j*T,G=B.x-(C-B.width)/2-A,Z=B.y-(b-B.height)/2-A,ne=C+A*2,oe=b+A*2,ae=`${lk}-${O}`,re=L.useRef(0),ce=L.useRef();re.current=T,L.useEffect(()=>{if(F.current&&U)return ce.current=N1({domNode:F.current,panZoom:U,getTransform:()=>V.getState().transform,getViewScale:()=>re.current}),()=>{var we;(we=ce.current)==null||we.destroy()}},[U]),L.useEffect(()=>{var we;(we=ce.current)==null||we.update({translateExtent:X,width:W,height:K,inversePan:P,pannable:k,zoomStep:_,zoomable:N})},[k,N,P,_,X,W,K]);const ve=w?we=>{var je;const[_e,Te]=((je=ce.current)==null?void 0:je.pointer(we))||[0,0];w(we,{x:_e,y:Te})}:void 0,Se=S?L.useCallback((we,_e)=>{const Te=V.getState().nodeLookup.get(_e).internals.userNode;S(we,Te)},[]):void 0,Ce=I??R["minimap.ariaLabel"];return d.jsx(Ll,{position:g,style:{...t,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*T:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Ge(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:$,height:z,viewBox:`${G} ${Z} ${ne} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:F,onClick:ve,children:[Ce&&d.jsx("title",{id:ae,children:Ce}),d.jsx(nk,{onClick:Se,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:c,nodeComponent:m}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${G-A},${Z-A}h${ne+A*2}v${oe+A*2}h${-ne-A*2}z
        M${q.x},${q.y}h${q.width}v${q.height}h${-q.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}mg.displayName="MiniMap";const ak=L.memo(mg),uk=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,ck={[Nr.Line]:"right",[Nr.Handle]:"bottom-right"};function dk({nodeId:t,position:r,variant:o=Nr.Handle,className:i,style:l=void 0,children:u,color:c,minWidth:m=10,minHeight:p=10,maxWidth:x=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:g,autoScale:w=!0,shouldResize:S,onResizeStart:k,onResize:N,onResizeEnd:I}){const P=Vh(),_=typeof t=="string"?t:P,j=Fe(),V=L.useRef(null),F=o===Nr.Handle,B=Me(L.useCallback(uk(F&&w),[F,w]),Re),q=L.useRef(null),O=r??ck[o];L.useEffect(()=>{if(!(!V.current||!_))return q.current||(q.current=L1({domNode:V.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:X,transform:W,snapGrid:K,snapToGrid:R,nodeOrigin:$,domNode:z}=j.getState();return{nodeLookup:X,transform:W,snapGrid:K,snapToGrid:R,nodeOrigin:$,paneDomNode:z}},onChange:(X,W)=>{const{triggerNodeChanges:K,nodeLookup:R,parentLookup:$,nodeOrigin:z}=j.getState(),D=[],M={x:X.x,y:X.y},T=R.get(_);if(T&&T.expandParent&&T.parentId){const C=T.origin??z,b=X.width??T.measured.width??0,A=X.height??T.measured.height??0,G={id:T.id,parentId:T.parentId,rect:{width:b,height:A,...mh({x:X.x??T.position.x,y:X.y??T.position.y},{width:b,height:A},T.parentId,R,C)}},Z=bc([G],R,$,z);D.push(...Z),M.x=X.x?Math.max(C[0]*b,X.x):void 0,M.y=X.y?Math.max(C[1]*A,X.y):void 0}if(M.x!==void 0&&M.y!==void 0){const C={id:_,type:"position",position:{...M}};D.push(C)}if(X.width!==void 0&&X.height!==void 0){const b={id:_,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:X.width,height:X.height}};D.push(b)}for(const C of W){const b={...C,type:"position"};D.push(b)}K(D)},onEnd:({width:X,height:W})=>{const K={id:_,type:"dimensions",resizing:!1,dimensions:{width:X,height:W}};j.getState().triggerNodeChanges([K])}})),q.current.update({controlPosition:O,boundaries:{minWidth:m,minHeight:p,maxWidth:x,maxHeight:y},keepAspectRatio:h,resizeDirection:g,onResizeStart:k,onResize:N,onResizeEnd:I,shouldResize:S}),()=>{var X;(X=q.current)==null||X.destroy()}},[O,m,p,x,y,h,k,N,I,S]);const U=O.split("-");return d.jsx("div",{className:Ge(["react-flow__resize-control","nodrag",...U,o,i]),ref:V,style:{...l,scale:B,...c&&{[F?"backgroundColor":"borderColor"]:c}},children:u})}const ym=L.memo(dk);function fk({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:u,color:c,minWidth:m=10,minHeight:p=10,maxWidth:x=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:h=!1,autoScale:g=!0,shouldResize:w,onResizeStart:S,onResize:k,onResizeEnd:N}){return r?d.jsxs(d.Fragment,{children:[D1.map(I=>d.jsx(ym,{className:l,style:u,nodeId:t,position:I,variant:Nr.Line,color:c,minWidth:m,minHeight:p,maxWidth:x,maxHeight:y,onResizeStart:S,keepAspectRatio:h,autoScale:g,shouldResize:w,onResize:k,onResizeEnd:N},I)),P1.map(I=>d.jsx(ym,{className:o,style:i,nodeId:t,position:I,color:c,minWidth:m,minHeight:p,maxWidth:x,maxHeight:y,onResizeStart:S,keepAspectRatio:h,autoScale:g,shouldResize:w,onResize:k,onResizeEnd:N},I))]}):null}const vm=t=>{let r;const o=new Set,i=(x,y)=>{const h=typeof x=="function"?x(r):x;if(!Object.is(h,r)){const g=r;r=y??(typeof h!="object"||h===null)?h:Object.assign({},r,h),o.forEach(w=>w(r,g))}},l=()=>r,m={setState:i,getState:l,getInitialState:()=>p,subscribe:x=>(o.add(x),()=>o.delete(x))},p=r=t(i,l,m);return m},pk=(t=>t?vm(t):vm),mk=t=>t;function hk(t,r=mk){const o=fs.useSyncExternalStore(t.subscribe,fs.useCallback(()=>r(t.getState()),[t,r]),fs.useCallback(()=>r(t.getInitialState()),[t,r]));return fs.useDebugValue(o),o}const wm=t=>{const r=pk(t),o=i=>hk(r,i);return Object.assign(o,r),o},Dc=(t=>t?wm(t):wm);function gk(t,r){let o;try{o=t()}catch{return}return{getItem:l=>{var u;const c=p=>p===null?null:JSON.parse(p,void 0),m=(u=o.getItem(l))!=null?u:null;return m instanceof Promise?m.then(c):c(m)},setItem:(l,u)=>o.setItem(l,JSON.stringify(u,void 0)),removeItem:l=>o.removeItem(l)}}const fc=t=>r=>{try{const o=t(r);return o instanceof Promise?o:{then(i){return fc(i)(o)},catch(i){return this}}}catch(o){return{then(i){return this},catch(i){return fc(i)(o)}}}},xk=(t,r)=>(o,i,l)=>{let u={storage:gk(()=>window.localStorage),partialize:N=>N,version:0,merge:(N,I)=>({...I,...N}),...r},c=!1,m=0;const p=new Set,x=new Set;let y=u.storage;if(!y)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...N)},i,l);const h=()=>{const N=u.partialize({...i()});return y.setItem(u.name,{state:N,version:u.version})},g=l.setState;l.setState=(N,I)=>(g(N,I),h());const w=t((...N)=>(o(...N),h()),i,l);l.getInitialState=()=>w;let S;const k=()=>{var N,I;if(!y)return;const P=++m;c=!1,p.forEach(j=>{var V;return j((V=i())!=null?V:w)});const _=((I=u.onRehydrateStorage)==null?void 0:I.call(u,(N=i())!=null?N:w))||void 0;return fc(y.getItem.bind(y))(u.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==u.version){if(u.migrate){const V=u.migrate(j.state,j.version);return V instanceof Promise?V.then(F=>[!0,F]):[!0,V]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var V;if(P!==m)return;const[F,B]=j;if(S=u.merge(B,(V=i())!=null?V:w),o(S,!0),F)return h()}).then(()=>{P===m&&(_==null||_(S,void 0),S=i(),c=!0,x.forEach(j=>j(S)))}).catch(j=>{P===m&&(_==null||_(void 0,j))})};return l.persist={setOptions:N=>{u={...u,...N},N.storage&&(y=N.storage)},clearStorage:()=>{y==null||y.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>k(),hasHydrated:()=>c,onHydrate:N=>(p.add(N),()=>{p.delete(N)}),onFinishHydration:N=>(x.add(N),()=>{x.delete(N)})},u.skipHydration||k(),S||w},yk=xk,vk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let so=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=vk[o[t]&63];return r};const Ct="__station_input__",Bt="__station_output__",wk=100,Sk=["energycells"];function Nk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return wk}function kk(t,r){return Sk.includes(t)?r/100:1}const hg=3600,ds={food:75,medical:45,per:200,cycle:600},ll={food:50,medical:30,per:200},Ck="foodrations",Ik="medicalsupplies";function Ek(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),u=Math.max(i-t,0),c=t>0?Math.min(i/t,1):0,m=l*(ds.food/ds.per),p=u*(ll.food/ll.per),x=l*(ds.medical/ds.per),y=u*(ll.medical/ll.per),h=hg/ds.cycle,g=(m+p)*h,w=(x+y)*h;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:u,workerRatio:c,foodDemand:g,medicalDemand:w}}function _k(t,r){return 1+t*r}function jk(t){const r=[];return t.foodDemand>0&&r.push({wareId:Ck,amount:t.foodDemand}),t.medicalDemand>0&&r.push({wareId:Ik,amount:t.medicalDemand}),r}function Mk(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const u=`${o}_default`;if(r[u])return r[u];for(const c of Object.values(r))if(c.wareId===o)return c;return null}function gg(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function bk(t,r,o,i){const l=gg(t.blueprintId,r),u=[],c=[];if(l==="production"){const m=r.modules.production[t.blueprintId];if(m){const p=Mk(m,r.recipes);if(p){const x=kk(m.producedWareId,o),y=_k(p.workforceBonus,i),h=x*y,g=hg/p.time,w=p.amount*t.count*h*g;c.push({wareId:m.producedWareId,amount:w});for(const S of p.inputs){const k=S.amount*t.count*h*g;u.push({wareId:S.ware,amount:k})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:u,grossOutputs:c,netInputs:[...u],netOutputs:[...c]}}function oo(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Pk(t,r,o){const i=Nk(t,r),l=t.fillHabitats??!1,u=t.moduleConnections??[];let c=0,m=0;for(const C of t.modules){const b=gg(C.blueprintId,o);if(b==="production"){const A=o.modules.production[C.blueprintId];A&&(c+=A.workforceMax*C.count)}else if(b==="habitat"){const A=o.modules.habitat[C.blueprintId];A&&(m+=A.workforceCapacity*C.count)}}const p=Ek(c,m,l),x=t.modules.map(C=>bk(C,o,i,p.workerRatio)),y=new Map;for(const C of x)y.set(C.moduleId,C);const h=new Map;for(const C of x)h.set(C.moduleId,new Map);const g=new Map;for(const C of x)g.set(C.moduleId,new Map);const w=new Map;for(const C of x){const b=new Map;for(const A of C.grossOutputs)b.set(A.wareId,A.amount);w.set(C.moduleId,b)}const S=new Map;for(const C of x){const b=new Map;for(const A of C.grossInputs)b.set(A.wareId,A.amount);S.set(C.moduleId,b)}const k=u.filter(C=>C.sourceModuleId!==Ct&&C.targetModuleId!==Bt),N=u.filter(C=>C.sourceModuleId===Ct),I=u.filter(C=>C.targetModuleId===Bt),P=[];for(const C of k){const b=C.mode??"auto",A=w.get(C.sourceModuleId),G=(A==null?void 0:A.get(C.wareId))??0,Z=S.get(C.targetModuleId),ne=(Z==null?void 0:Z.get(C.wareId))??0;let oe,ae=!1,re=!1;switch(b){case"custom":oe=Math.min(C.amount,G,ne),ae=C.amount>G,re=C.amount>ne;break;case"max":oe=Math.min(G,ne),ae=G<ne,re=ne<G;break;case"auto":default:oe=Math.min(G,ne),ae=G<ne,re=ne<G;break}P.push({connectionId:C.id,effectiveAmount:oe,sourceConstrained:ae,targetConstrained:re}),A&&A.set(C.wareId,G-oe),Z&&Z.set(C.wareId,ne-oe);const ce=h.get(C.targetModuleId);if(ce){const Se=ce.get(C.wareId)||0;ce.set(C.wareId,Se+oe)}const ve=g.get(C.sourceModuleId);if(ve){const Se=ve.get(C.wareId)||0;ve.set(C.wareId,Se+oe)}}for(const C of N){const b=C.mode??"auto",A=S.get(C.targetModuleId),G=(A==null?void 0:A.get(C.wareId))??0;let Z,ne=!1,oe=!1;switch(b){case"custom":Z=Math.min(C.amount,G),oe=C.amount>G;break;case"max":case"auto":default:Z=G;break}P.push({connectionId:C.id,effectiveAmount:Z,sourceConstrained:ne,targetConstrained:oe}),A&&A.set(C.wareId,G-Z)}for(const C of I){const b=C.mode??"auto",A=w.get(C.sourceModuleId),G=(A==null?void 0:A.get(C.wareId))??0;let Z,ne=!1,oe=!1;switch(b){case"custom":Z=Math.min(C.amount,G),ne=C.amount>G;break;case"max":case"auto":default:Z=G;break}P.push({connectionId:C.id,effectiveAmount:Z,sourceConstrained:ne,targetConstrained:oe}),A&&A.set(C.wareId,G-Z)}for(const C of x){const b=h.get(C.moduleId)||new Map,A=g.get(C.moduleId)||new Map;C.netInputs=[];for(const G of C.grossInputs){const Z=b.get(G.wareId)||0,ne=G.amount-Z;ne>.01&&C.netInputs.push({wareId:G.wareId,amount:ne})}C.netOutputs=[];for(const G of C.grossOutputs){const Z=A.get(G.wareId)||0,ne=G.amount-Z;ne>.01&&C.netOutputs.push({wareId:G.wareId,amount:ne})}}const _=[],j=[],V=[],F=[];for(const C of x)_.push(...C.grossInputs),j.push(...C.grossOutputs),V.push(...C.netInputs),F.push(...C.netOutputs);const B=jk(p);_.push(...B),V.push(...B);const q=oo(_),O=oo(j),U=oo(V),X=oo(F),W=N.map(C=>{const b=P.find(A=>A.connectionId===C.id);return{wareId:C.wareId,amount:(b==null?void 0:b.effectiveAmount)??C.amount}}),K=I.map(C=>{const b=P.find(A=>A.connectionId===C.id);return{wareId:C.wareId,amount:(b==null?void 0:b.effectiveAmount)??C.amount}}),R=oo(W),$=oo(K),z=new Map;for(const C of R)z.set(C.wareId,C.amount);const D=new Map;for(const C of $)D.set(C.wareId,C.amount);const M=[];for(const C of U){const b=z.get(C.wareId)||0,A=C.amount-b;A>.01&&M.push({wareId:C.wareId,amount:A})}const T=[];for(const C of X){const b=D.get(C.wareId)||0,A=C.amount-b;A>.01&&T.push({wareId:C.wareId,amount:A})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:c,totalWorkforceCapacity:m,actualPopulation:p.actualPopulation,workforceFoodDemand:p.foodDemand,workforceMedicalDemand:p.medicalDemand,modules:x,grossInputs:q,grossOutputs:O,netInputs:U,netOutputs:X,availableForImport:M,availableForExport:T,stationInputs:R,stationOutputs:$,externallySupplied:[],externallyConsumed:[],remainingInputs:[...R],remainingOutputs:[...$],moduleConnections:P}}function Sm(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Dk(t,r){const o=t.stations.map(g=>Pk(g,t.sectors,r)),i=new Map;for(const g of o)i.set(g.stationId,g);const l=new Map,u=new Map,c=new Map,m=new Map;for(const g of t.stations)l.set(g.id,new Map),u.set(g.id,new Map),c.set(g.id,new Map),m.set(g.id,new Map);for(const g of o){const w=c.get(g.stationId),S=m.get(g.stationId);for(const k of g.stationOutputs){const N=g.netOutputs.find(P=>P.wareId===k.wareId),I=Math.min(k.amount,(N==null?void 0:N.amount)??k.amount);w.set(k.wareId,I)}for(const k of g.stationInputs)S.set(k.wareId,k.amount)}const p=[];for(const g of t.connections){const w=g.mode??"auto",S=c.get(g.sourceStationId),k=(S==null?void 0:S.get(g.wareId))??0,N=m.get(g.targetStationId),I=(N==null?void 0:N.get(g.wareId))??0;let P,_=!1,j=!1;switch(w){case"custom":P=Math.min(g.amount,k,I),_=g.amount>k,j=g.amount>I;break;case"max":P=Math.min(k,I),_=k<I,j=I<k;break;case"auto":default:P=Math.min(k,I),_=k<I,j=I<k;break}p.push({connectionId:g.id,effectiveAmount:P,sourceConstrained:_,targetConstrained:j}),S&&S.set(g.wareId,k-P),N&&N.set(g.wareId,I-P);const V=l.get(g.targetStationId);if(V){const B=V.get(g.wareId)||0;V.set(g.wareId,B+P)}const F=u.get(g.sourceStationId);if(F){const B=F.get(g.wareId)||0;F.set(g.wareId,B+P)}}for(const g of o){const w=l.get(g.stationId)||new Map,S=u.get(g.stationId)||new Map;g.externallySupplied=Array.from(w.entries()).map(([N,I])=>({wareId:N,amount:I})).filter(N=>N.amount>.01),g.externallyConsumed=Array.from(S.entries()).map(([N,I])=>({wareId:N,amount:I})).filter(N=>N.amount>.01),g.remainingInputs=[];for(const N of g.stationInputs){const I=w.get(N.wareId)||0,P=N.amount-I;P>.01&&g.remainingInputs.push({wareId:N.wareId,amount:P})}g.remainingOutputs=[];for(const N of g.stationOutputs){const I=S.get(N.wareId)||0,P=N.amount-I;P>.01&&g.remainingOutputs.push({wareId:N.wareId,amount:P})}const k=t.stations.find(N=>N.id===g.stationId);if(k){const N=k.moduleConnections??[];for(const[I,P]of w.entries()){if(P<.01)continue;const _=N.filter(F=>F.sourceModuleId===Ct&&F.wareId===I);if(_.length===0)continue;const j=_.reduce((F,B)=>F+B.amount,0);if(j<.01)continue;const V=Math.min(P/j,1);for(const F of _){const B=g.modules.find(U=>U.moduleId===F.targetModuleId);if(!B)continue;const q=F.amount*V,O=B.netInputs.findIndex(U=>U.wareId===I);if(O!==-1){const X=B.netInputs[O].amount-q;X>.01?B.netInputs[O].amount=X:B.netInputs.splice(O,1)}}}for(const[I,P]of S.entries()){if(P<.01)continue;const _=N.filter(F=>F.targetModuleId===Bt&&F.wareId===I);if(_.length===0)continue;const j=_.reduce((F,B)=>F+B.amount,0);if(j<.01)continue;const V=Math.min(P/j,1);for(const F of _){const B=g.modules.find(U=>U.moduleId===F.sourceModuleId);if(!B)continue;const q=F.amount*V,O=B.netOutputs.findIndex(U=>U.wareId===I);if(O!==-1){const X=B.netOutputs[O].amount-q;X>.01?B.netOutputs[O].amount=X:B.netOutputs.splice(O,1)}}}}}const x=[];for(const g of o){const w=l.get(g.stationId)||new Map;for(const S of g.netInputs){const k=w.get(S.wareId)||0;k<S.amount&&x.push({wareId:S.wareId,stationId:g.stationId,required:S.amount,supplied:k,deficit:S.amount-k})}}const y=[],h=[];for(const g of o){const w=l.get(g.stationId)||new Map;for(const k of g.netInputs){const N=w.get(k.wareId)||0,I=k.amount-N;I>0&&y.push({wareId:k.wareId,amount:I})}const S=new Map;for(const k of t.connections)if(k.sourceStationId===g.stationId){const N=S.get(k.wareId)||0;S.set(k.wareId,N+k.amount)}for(const k of g.netOutputs){const N=S.get(k.wareId)||0,I=k.amount-N;I>0&&h.push({wareId:k.wareId,amount:I})}}return{stations:o,connections:p,totalInputs:Sm(y),totalOutputs:Sm(h),deficits:x}}function xg(t,r){return t.connections.find(o=>o.connectionId===r)}function Cr(t,r){return t.stations.find(o=>o.stationId===r)}function gl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function hr(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const Ue=Dc((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function Nm(t){const r=new Date().toISOString();return{id:so(),name:t,version:1,createdAt:r,updatedAt:r,sectors:[],stations:[],connections:[]}}function al(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const de=Dc()(yk((t,r)=>({plan:Nm("New Plan"),computed:al(),createPlan:o=>{t({plan:Nm(o),computed:al()})},loadPlan:o=>{const i={...o,stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};t({plan:i,computed:al()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:so(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(u=>({plan:{...u.plan,sectors:[...u.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:so(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(u=>({plan:{...u.plan,stations:[...u.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,sectorId:i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const u={id:so(),blueprintId:i,count:1,position:l};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(m=>m.id===o?{...m,modules:[...m.modules,u]}:m),updatedAt:new Date().toISOString()}})),r().recompute()},updateModule:(o,i,l)=>{const c=r().plan.stations.find(x=>x.id===o),m=c==null?void 0:c.modules.find(x=>x.id===i);if(l.count!==void 0&&m&&l.count!==m.count&&m){const x=l.count/m.count,y=((c==null?void 0:c.moduleConnections)??[]).map(h=>h.sourceModuleId===i&&!h.locked?{...h,amount:h.amount*x}:h.targetModuleId===i&&h.sourceModuleId===Ct&&!h.locked?{...h,amount:h.amount*x}:h);t(h=>({plan:{...h.plan,stations:h.plan.stations.map(g=>g.id===o?{...g,modules:g.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:y}:g),updatedAt:new Date().toISOString()}}))}else t(x=>({plan:{...x.plan,stations:x.plan.stations.map(y=>y.id===o?{...y,modules:y.modules.map(h=>h.id===i?{...h,...l}:h)}:y),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,modules:u.modules.filter(c=>c.id!==i),moduleConnections:(u.moduleConnections??[]).filter(c=>c.sourceModuleId!==i&&c.targetModuleId!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:so(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:so(),...i};t(u=>({plan:{...u.plan,stations:u.plan.stations.map(c=>c.id===o?{...c,moduleConnections:[...c.moduleConnections??[],l]}:c),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(u=>({plan:{...u.plan,stations:u.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).map(m=>m.id===i?{...m,...l}:m)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,moduleConnections:(u.moduleConnections??[]).filter(c=>c.id!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=Ue.getState().gameData;if(!i){t({computed:al()});return}const l=Dk(o,i);t({computed:l})}}),{name:"x4-planner-plan",partialize:t=>({plan:t.plan}),onRehydrateStorage:()=>t=>{if(t){const r=t.plan;if(r.stations.some(i=>(i.moduleConnections??[]).some(l=>l.ratio===void 0||l.locked===void 0))){const i={...r,stations:r.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};de.setState({plan:i})}t.recompute()}}})),ge=Dc(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,theme:"system",contextMenu:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setTheme:r=>t({theme:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null})}));function Tk(){const t=de(m=>m.plan),r=de(m=>m.renamePlan),o=ge(m=>m.toggleReport),i=ge(m=>m.reportOpen),l=ge(m=>m.theme),u=ge(m=>m.setTheme),c=()=>{u(l==="light"?"dark":l==="dark"?"system":"light")};return d.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"X4 SWI Station Planner"}),d.jsx("span",{className:"text-muted-foreground",children:"|"}),d.jsx("input",{type:"text",value:t.name,onChange:m=>r(m.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:c,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${l}`,children:[l==="light"&&"",l==="dark"&&"",l==="system"&&"",d.jsx("span",{className:"text-xs",children:l.charAt(0).toUpperCase()+l.slice(1)})]}),d.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"}),d.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Export"}),d.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Import"})]})]})}function Ok({station:t}){const r=de(P=>P.updateStation),o=de(P=>P.removeStation),i=de(P=>P.plan),l=de(P=>P.computed),u=Ue(P=>P.gameData),c=t.sectorId?i.sectors.find(P=>P.id===t.sectorId):null,m=t.sunlightOverride??(c==null?void 0:c.sunlight)??100,p=Cr(l,t.id),x=P=>{r(t.id,{name:P.target.value})},y=P=>{const _=P.target.value;if(_==="")r(t.id,{sunlightOverride:null});else{const j=parseInt(_,10);!isNaN(j)&&j>=0&&j<=500&&r(t.id,{sunlightOverride:j})}},h=()=>{r(t.id,{sunlightOverride:null})},g=P=>{r(t.id,{fillHabitats:P.target.checked})},w=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},S=P=>{var _;return((_=u==null?void 0:u.wares[P])==null?void 0:_.name)??P},k=P=>P>=1e4?`${(P/1e3).toFixed(1)}k`:P>=1e3?`${(P/1e3).toFixed(2)}k`:P.toFixed(0),N=p&&p.totalWorkforceRequired>0,I=p&&p.totalWorkforceCapacity>0;return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),d.jsx("input",{type:"text",value:t.name,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:c?c.name:"Not assigned"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:y,placeholder:`${(c==null?void 0:c.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&d.jsx("button",{onClick:h,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",m,"%",t.sunlightOverride===null&&c&&" (from sector)",t.sunlightOverride===null&&!c&&" (default)"]})]}),(N||I)&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),p&&d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Required:"}),d.jsx("span",{children:p.totalWorkforceRequired.toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),d.jsx("span",{children:p.totalWorkforceCapacity.toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{className:"text-muted-foreground",children:"Population:"}),d.jsx("span",{children:p.actualPopulation.toLocaleString()})]})]}),I&&d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[d.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:g,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),d.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?d.jsx("p",{children:"No modules added yet."}):d.jsxs("p",{children:[t.modules.length," module(s)"]})}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),p&&(p.netOutputs.length>0||p.netInputs.length>0)&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),p.netOutputs.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),p.netOutputs.slice(0,5).map(P=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-green-500 truncate",children:S(P.wareId)}),d.jsxs("span",{className:"font-mono",children:["+",k(P.amount)]})]},P.wareId)),p.netOutputs.length>5&&d.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",p.netOutputs.length-5," more..."]})]}),p.netInputs.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),p.netInputs.slice(0,5).map(P=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-blue-400 truncate",children:S(P.wareId)}),d.jsxs("span",{className:"font-mono",children:["-",k(P.amount)]})]},P.wareId)),p.netInputs.length>5&&d.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",p.netInputs.length-5," more..."]})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:w,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function Ak({sector:t}){const r=de(p=>p.updateSector),o=de(p=>p.removeSector),l=de(p=>p.plan).stations.filter(p=>p.sectorId===t.id),u=p=>{r(t.id,{name:p.target.value})},c=p=>{const x=parseInt(p.target.value,10);!isNaN(x)&&x>=0&&x<=500&&r(t.id,{sunlight:x})},m=()=>{const p=l.length,x=p>0?`Delete sector "${t.name}"? ${p} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(x)&&o(t.id)};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),d.jsx("input",{type:"text",value:t.name,onChange:u,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:c,className:"flex-1"}),d.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:c,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",l.length,")"]}),l.length===0?d.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):d.jsx("ul",{className:"text-sm space-y-1",children:l.map(p=>d.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[d.jsx("span",{className:"text-foreground",children:p.name}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[p.modules.length," modules"]})]},p.id))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:m,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const km={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function $k(){const t=Ue(g=>g.gameData),r=de(g=>g.addModule),o=ge(g=>g.activeStationId),i=de(g=>g.plan.stations),[l,u]=L.useState("production"),[c,m]=L.useState(""),p=L.useMemo(()=>i.find(g=>g.id===o),[i,o]),x=L.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const g=c.toLowerCase(),w=S=>Object.values(S).filter(k=>k.name.toLowerCase().includes(g));return{production:w(t.modules.production),habitat:w(t.modules.habitat),storage:w(t.modules.storage)}},[t,c]),y=g=>{if(!o||!p)return;const w=p.modules.length,S=w%3,k=Math.floor(w/3),N={x:S*220+50,y:k*150+50};r(o,g,N)},h=g=>{u(w=>w===g?null:g)};return t?d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{children:d.jsx("input",{type:"text",placeholder:"Search modules...",value:c,onChange:g=>m(g.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(km).map(g=>{const{label:w,icon:S}=km[g],k=x[g],N=l===g;return d.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[d.jsxs("button",{onClick:()=>h(g),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[d.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[d.jsx("span",{children:S}),w,d.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",k.length,")"]})]}),d.jsx("span",{className:"text-muted-foreground",children:N?"":"+"})]}),N&&d.jsx("div",{className:"max-h-48 overflow-y-auto",children:k.length===0?d.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):k.map(I=>d.jsxs("button",{onClick:()=>y(I.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[d.jsx("span",{className:"text-foreground truncate",children:I.name}),d.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},I.id))})]},g)}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):d.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function zk({stationId:t,module:r}){const o=Ue(k=>k.gameData),i=Ue(k=>k.getModule),l=Ue(k=>k.getModuleType),u=de(k=>k.updateModule),c=de(k=>k.removeModule),m=ge(k=>k.clearSelection),p=i(r.blueprintId),x=l(r.blueprintId),y=L.useMemo(()=>{if(!o||!x)return[];const k=o.modules[x];return Object.values(k).sort((N,I)=>N.name.localeCompare(I.name))},[o,x]),h=k=>{u(t,r.id,{blueprintId:k.target.value})},g=k=>{const N=Math.max(1,r.count+k);u(t,r.id,{count:N})},w=k=>{const N=parseInt(k.target.value,10);!isNaN(N)&&N>=1&&u(t,r.id,{count:N})},S=()=>{confirm(`Delete this ${(p==null?void 0:p.name)??"module"}?`)&&(c(t,r.id),m())};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-lg",children:x==="production"?"":x==="habitat"?"":""}),d.jsxs("span",{className:"text-muted-foreground capitalize",children:[x," Module"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),d.jsx("select",{value:r.blueprintId,onChange:h,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:y.map(k=>d.jsx("option",{value:k.id,children:k.name},k.id))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>g(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),d.jsx("input",{type:"number",min:1,value:r.count,onChange:w,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("button",{onClick:()=>g(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),p&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),d.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[x==="production"&&"producedWareId"in p&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Produces: ",p.producedWareId]}),d.jsxs("p",{children:["Workforce: ",p.workforceMax*r.count]})]}),x==="habitat"&&"workforceCapacity"in p&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Race: ",p.race]}),d.jsxs("p",{children:["Capacity: ",p.workforceCapacity*r.count," workers"]})]}),x==="storage"&&"cargoMax"in p&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Type: ",p.cargoType]}),d.jsxs("p",{children:["Capacity: ",p.cargoMax*r.count]})]})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function Lk({connection:t}){var O;const r=de(U=>U.updateConnection),o=de(U=>U.removeConnection),i=de(U=>U.plan),l=de(U=>U.computed),u=Ue(U=>U.gameData),c=i.stations.find(U=>U.id===t.sourceStationId),m=i.stations.find(U=>U.id===t.targetStationId),p=L.useMemo(()=>Cr(l,t.sourceStationId),[l,t.sourceStationId]),x=L.useMemo(()=>Cr(l,t.targetStationId),[l,t.targetStationId]),y=t.wareId?((O=u==null?void 0:u.wares[t.wareId])==null?void 0:O.name)??t.wareId:"Unknown",h=p==null?void 0:p.netOutputs.find(U=>U.wareId===t.wareId),g=(h==null?void 0:h.amount)??0,w=x==null?void 0:x.netInputs.find(U=>U.wareId===t.wareId),S=(w==null?void 0:w.amount)??0,k=L.useMemo(()=>xg(l,t.id),[l,t.id]),N=(k==null?void 0:k.effectiveAmount)??t.amount,I=t.mode??"auto",P=U=>U>=1e4?`${(U/1e3).toFixed(1)}k`:U>=1e3?`${(U/1e3).toFixed(2)}k`:U.toFixed(0),_=U=>{r(t.id,{mode:U,amount:U==="custom"?N:t.amount})},j=U=>{const X=U.target.value;if(X==="")r(t.id,{amount:0});else{const W=parseFloat(X);!isNaN(W)&&W>=0&&r(t.id,{amount:W})}},V=()=>{r(t.id,{mode:"custom",amount:g})},F=()=>{const U=Math.min(g,S);r(t.id,{mode:"custom",amount:U})},B=()=>{confirm("Delete this connection?")&&o(t.id)},q=l.deficits.find(U=>U.stationId===t.targetStationId&&U.wareId===t.wareId);return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"From:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:(c==null?void 0:c.name)??"Unknown"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"To:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:(m==null?void 0:m.name)??"Unknown"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:y}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),d.jsxs("select",{value:I,onChange:U=>_(U.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[d.jsx("option",{value:"auto",children:"Auto (match availability)"}),d.jsx("option",{value:"max",children:"Max (take all available)"}),d.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[I==="auto"&&"Transfers min(source available, target need)",I==="max"&&"Takes all available from source up to target need",I==="custom"&&"Uses a fixed amount you specify"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:[I==="custom"?"Custom Amount":"Effective Amount"," ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),I==="custom"?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:j,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:P(N)}),I==="custom"&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:V,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",P(g),")"]}),S>0&&d.jsxs("button",{onClick:F,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",P(Math.min(g,S)),")"]})]}),d.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Source available:"}),d.jsxs("span",{className:"font-mono text-green-400",children:[P(g),"/hr"]})]}),S>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Target needs:"}),d.jsxs("span",{className:"font-mono text-blue-400",children:[P(S),"/hr"]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Transferring:"}),d.jsxs("span",{className:`font-mono ${k!=null&&k.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[P(N),"/hr"]})]}),I==="custom"&&t.amount!==N&&d.jsxs("div",{className:"flex justify-between text-yellow-400",children:[d.jsx("span",{children:"Configured:"}),d.jsxs("span",{className:"font-mono",children:[P(t.amount),"/hr"]})]}),(k==null?void 0:k.sourceConstrained)&&d.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(k==null?void 0:k.targetConstrained)&&d.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),q&&q.deficit>0&&d.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[d.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",P(q.deficit),"/hr still needed"]}),d.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",P(q.supplied),"/hr but needs"," ",P(q.required),"/hr"]})]}),t.wareId&&!q&&d.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:d.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:B,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Rk({stationId:t,connection:r}){var D;const o=de(M=>M.updateModuleConnection),i=de(M=>M.removeModuleConnection),l=de(M=>M.plan.stations),u=de(M=>M.computed),c=Ue(M=>M.gameData),m=ge(M=>M.clearSelection),p=l.find(M=>M.id===t),x=p==null?void 0:p.modules.find(M=>M.id===r.sourceModuleId),y=p==null?void 0:p.modules.find(M=>M.id===r.targetModuleId),h=r.sourceModuleId===Ct,g=r.targetModuleId===Bt,w=M=>{var T,C,b;return!M||!c?"Unknown":((T=c.modules.production[M])==null?void 0:T.name)??((C=c.modules.habitat[M])==null?void 0:C.name)??((b=c.modules.storage[M])==null?void 0:b.name)??M},S=h?"Station Input":w(x==null?void 0:x.blueprintId),k=g?"Station Output":w(y==null?void 0:y.blueprintId),N=L.useMemo(()=>h?null:hr(u,t,r.sourceModuleId),[u,t,r.sourceModuleId,h]),I=L.useMemo(()=>g?null:hr(u,t,r.targetModuleId),[u,t,r.targetModuleId,g]),P=L.useMemo(()=>{const M=Cr(u,t);return M==null?void 0:M.moduleConnections.find(T=>T.connectionId===r.id)},[u,t,r.id]),_=(P==null?void 0:P.effectiveAmount)??r.amount,j=r.mode??"auto",V=((D=c==null?void 0:c.wares[r.wareId])==null?void 0:D.name)??r.wareId,F=N==null?void 0:N.grossOutputs.find(M=>M.wareId===r.wareId),B=(F==null?void 0:F.amount)??0,q=I==null?void 0:I.grossInputs.find(M=>M.wareId===r.wareId),O=(q==null?void 0:q.amount)??0,U=M=>M>=1e4?`${(M/1e3).toFixed(1)}k`:M>=1e3?`${(M/1e3).toFixed(2)}k`:M.toFixed(0),X=M=>{o(t,r.id,{mode:M,amount:M==="custom"?_:r.amount})},W=M=>{const T=M.target.value;if(T==="")o(t,r.id,{amount:0});else{const C=parseFloat(T);if(!isNaN(C)&&C>=0){const b=!h&&B>0?C/B:r.ratio;o(t,r.id,{amount:C,ratio:b})}}},K=()=>{o(t,r.id,{locked:!r.locked})},R=()=>{o(t,r.id,{mode:"custom",amount:B,ratio:1})},$=()=>{const M=Math.min(B,O),T=B>0?M/B:0;o(t,r.id,{mode:"custom",amount:M,ratio:T})},z=()=>{confirm("Delete this connection?")&&(i(t,r.id),m())};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"From:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:S})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"To:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:k})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:V})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),d.jsxs("select",{value:j,onChange:M=>X(M.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[d.jsx("option",{value:"auto",children:"Auto (match availability)"}),d.jsx("option",{value:"max",children:"Max (take all available)"}),d.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[j==="auto"&&"Transfers min(source available, target need)",j==="max"&&"Takes all available from source up to target need",j==="custom"&&"Uses a fixed amount you specify"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:[j==="custom"?"Custom Amount":"Effective Amount"," ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),j==="custom"?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:W,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:U(_)}),j==="custom"&&!h&&B>0&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:R,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",U(B),")"]}),!g&&O>0&&d.jsxs("button",{onClick:$,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",U(Math.min(B,O)),")"]})]}),d.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!h&&B>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Source produces:"}),d.jsxs("span",{className:"font-mono text-green-400",children:[U(B),"/hr"]})]}),!g&&O>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Target needs:"}),d.jsxs("span",{className:"font-mono text-blue-400",children:[U(O),"/hr"]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Transferring:"}),d.jsxs("span",{className:`font-mono ${P!=null&&P.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[U(_),"/hr"]})]}),j==="custom"&&r.amount!==_&&d.jsxs("div",{className:"flex justify-between text-yellow-400",children:[d.jsx("span",{children:"Configured:"}),d.jsxs("span",{className:"font-mono",children:[U(r.amount),"/hr"]})]}),(P==null?void 0:P.sourceConstrained)&&d.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(P==null?void 0:P.targetConstrained)&&d.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!h&&r.ratio!==void 0&&j==="custom"&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Ratio:"}),d.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),d.jsx("button",{onClick:K,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:d.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:z,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Fk(){const t=ge(S=>S.sidebarOpen),r=ge(S=>S.selectedNodeId),o=ge(S=>S.selectedEdgeId),i=ge(S=>S.viewMode),l=ge(S=>S.activeStationId),u=de(S=>S.plan);if(!t)return null;const c=i==="network"?u.stations.find(S=>S.id===r):null,m=i==="network"?u.sectors.find(S=>S.id===r):null,p=u.connections.find(S=>S.id===o),x=u.stations.find(S=>S.id===l),y=i==="station"&&x?x.modules.find(S=>S.id===r):null,h=i==="station"&&x&&o?(x.moduleConnections??[]).find(S=>S.id===o):null;let g="Network";i==="station"?h?g="Connection":y?g="Module":g="Add Modules":c?g="Station":m?g="Sector":p&&(g="Connection");const w=()=>i==="station"?h&&l?d.jsx(Rk,{stationId:l,connection:h}):y&&l?d.jsx(zk,{stationId:l,module:y}):d.jsx($k,{}):c?d.jsx(Ok,{station:c}):m?d.jsx(Ak,{sector:m}):p?d.jsx(Lk,{connection:p}):d.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[d.jsx("p",{children:"Select a station or sector to view details."}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),d.jsxs("ul",{className:"text-xs space-y-1",children:[d.jsx("li",{children:"Right-click on the canvas to add stations"}),d.jsx("li",{children:"Drag from one station handle to another to connect"}),d.jsx("li",{children:"Press Delete to remove selected items"}),d.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return d.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsx("h2",{className:"font-semibold text-foreground",children:g})}),d.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:w()}),d.jsx("div",{className:"p-4 border-t border-border",children:d.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:i==="station"&&x?d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Modules: ",x.modules.length]}),d.jsxs("p",{children:["Station: ",x.name]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Stations: ",u.stations.length]}),d.jsxs("p",{children:["Sectors: ",u.sectors.length]}),d.jsxs("p",{children:["Connections: ",u.connections.length]})]})})})]})}function Hk(){const t=ge(c=>c.viewMode),r=ge(c=>c.activeStationId),o=ge(c=>c.exitStationView),i=de(c=>c.plan),l=i.stations.find(c=>c.id===r),u=l!=null&&l.sectorId?i.sectors.find(c=>c.id===l.sectorId):null;return t==="network"?null:d.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[d.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),u&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-muted-foreground",children:u.name})]}),l&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function Vk(){const t=de(x=>x.computed),r=Ue(x=>x.gameData),o=x=>{var y;return((y=r==null?void 0:r.wares[x])==null?void 0:y.name)??x},i=x=>Math.abs(x)>=1e4?`${(x/1e3).toFixed(1)}k`:Math.abs(x)>=1e3?`${(x/1e3).toFixed(2)}k`:x.toFixed(0),l=L.useMemo(()=>{const x=new Map;for(const h of t.totalOutputs)x.set(h.wareId,(x.get(h.wareId)??0)+h.amount);for(const h of t.totalInputs)x.set(h.wareId,(x.get(h.wareId)??0)-h.amount);const y=[];for(const[h,g]of x)Math.abs(g)>.01&&y.push({wareId:h,amount:g});return y.sort((h,g)=>g.amount-h.amount)},[t.totalOutputs,t.totalInputs]),u=l.filter(x=>x.amount>0),c=l.filter(x=>x.amount<0),m=L.useMemo(()=>[...t.totalOutputs].sort((x,y)=>y.amount-x.amount),[t.totalOutputs]),p=L.useMemo(()=>[...t.totalInputs].sort((x,y)=>y.amount-x.amount),[t.totalInputs]);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{children:[d.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),u.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),d.jsx("div",{className:"space-y-1",children:u.map(x=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-green-400",children:o(x.wareId)}),d.jsxs("span",{className:"font-mono text-green-400",children:["+",i(x.amount),"/hr"]})]},x.wareId))})]}),c.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),d.jsx("div",{className:"space-y-1",children:c.map(x=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-red-400",children:o(x.wareId)}),d.jsxs("span",{className:"font-mono text-red-400",children:[i(x.amount),"/hr"]})]},x.wareId))})]}),u.length===0&&c.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",d.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",m.length," wares)"]})]}),m.length>0?d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:m.map(x=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-foreground",children:o(x.wareId)}),d.jsxs("span",{className:"font-mono text-green-400",children:["+",i(x.amount),"/hr"]})]},x.wareId))}):d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",d.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",p.length," wares)"]})]}),p.length>0?d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:p.map(x=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-foreground",children:o(x.wareId)}),d.jsxs("span",{className:"font-mono text-blue-400",children:["-",i(x.amount),"/hr"]})]},x.wareId))}):d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((x,y)=>d.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-red-400",children:o(x.wareId)}),d.jsxs("span",{className:"font-mono text-red-400",children:["-",i(x.deficit),"/hr"]})]}),d.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",i(x.required),", getting ",i(x.supplied)]})]},`${x.stationId}-${x.wareId}-${y}`))})]})]})}function Bk(){const t=de(p=>p.plan.stations),r=de(p=>p.plan.sectors),o=de(p=>p.computed),i=Ue(p=>p.gameData),l=p=>{var x;return((x=i==null?void 0:i.wares[p])==null?void 0:x.name)??p},u=p=>Math.abs(p)>=1e4?`${(p/1e3).toFixed(1)}k`:Math.abs(p)>=1e3?`${(p/1e3).toFixed(2)}k`:p.toFixed(0),c=p=>{var x;return p?((x=r.find(y=>y.id===p))==null?void 0:x.name)??null:null},m=L.useMemo(()=>[...t].sort((p,x)=>{const y=gl(o,p.id),h=gl(o,x.id);return y!==h?h-y:p.name.localeCompare(x.name)}),[t,o]);return t.length===0?d.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):d.jsx("div",{className:"space-y-4",children:m.map(p=>{const x=Cr(o,p.id),y=gl(o,p.id),h=c(p.sectorId),g=o.deficits.filter(S=>S.stationId===p.id),w=x&&x.totalWorkforceRequired>0?Math.min(x.actualPopulation/x.totalWorkforceRequired,1):0;return d.jsxs("div",{className:`p-3 rounded-lg border ${y>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h4",{className:"font-medium text-foreground",children:p.name}),y>0&&d.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[y," deficit",y>1?"s":""]})]}),h&&d.jsx("span",{className:"text-xs text-muted-foreground",children:h})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),d.jsxs("span",{className:"text-yellow-500",children:[" ",(x==null?void 0:x.effectiveSunlight)??100,"%"]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Modules"}),d.jsx("span",{className:"text-foreground",children:p.modules.length})]}),x&&x.totalWorkforceRequired>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),d.jsxs("span",{className:w>=1?"text-green-400":w>=.5?"text-yellow-400":"text-red-400",children:[x.actualPopulation,"/",x.totalWorkforceRequired]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),d.jsx("span",{className:"text-foreground",children:x.totalWorkforceCapacity})]})]})]}),x&&d.jsxs("div",{className:"space-y-2",children:[x.netOutputs.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),d.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netOutputs.map(S=>d.jsxs("div",{className:"text-xs flex items-center gap-1",children:[d.jsx("span",{className:"text-green-400",children:l(S.wareId)}),d.jsxs("span",{className:"font-mono text-green-400/70",children:["+",u(S.amount)]})]},S.wareId))})]}),x.netInputs.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),d.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:x.netInputs.map(S=>{const k=g.some(N=>N.wareId===S.wareId);return d.jsxs("div",{className:"text-xs flex items-center gap-1",children:[d.jsx("span",{className:k?"text-red-400":"text-blue-400",children:l(S.wareId)}),d.jsxs("span",{className:`font-mono ${k?"text-red-400/70":"text-blue-400/70"}`,children:["-",u(S.amount)]})]},S.wareId)})})]}),g.length>0&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[d.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),d.jsx("div",{className:"space-y-1",children:g.map(S=>d.jsxs("div",{className:"text-xs flex items-center justify-between",children:[d.jsx("span",{className:"text-red-400",children:l(S.wareId)}),d.jsxs("span",{className:"text-muted-foreground",children:[u(S.supplied),"/",u(S.required),d.jsxs("span",{className:"text-red-400 ml-1",children:["(-",u(S.deficit),")"]})]})]},S.wareId))})]})]}),p.modules.length===0&&d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},p.id)})})}function Wk(){const t=ge(l=>l.reportOpen),r=ge(l=>l.setReportOpen),[o,i]=L.useState("network");return t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),d.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[d.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),d.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),d.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),d.jsxs("div",{className:"flex border-b border-border",children:[d.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),d.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?d.jsx(Vk,{}):d.jsx(Bk,{})}),d.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function Ae(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Tc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const Uk={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},Yk={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},Xk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},Qk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function Hl({wareId:t,type:r,amount:o,status:i,preset:l,handleId:u,isDeficit:c=!1,drag:m,handleTooltip:p,amountTooltip:x}){const y=Ue(j=>j.gameData),h=r==="input",g=h?l.inputColors:l.outputColors,S=(j=>{var V;return((V=y==null?void 0:y.wares[j])==null?void 0:V.name)??j})(t),k=()=>{const j=h?"handle-left":"handle-right",V="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${j} ${V} ${l.handle.colorClass}`;const F=i==="satisfied"?h?"handle-input-satisfied":"handle-output-satisfied":h?"handle-input":"handle-output";return`${l.handle.baseClass} ${j} ${V} ${F}`},N=()=>i==="satisfied"?g.satisfied:c&&g.deficit?g.deficit:g.default,I=()=>{const j=o.fulfilled??0,V=j>.01;if(h)if(i==="satisfied"){const F=j>.01?j:o.primary;return d.jsxs("span",{className:"text-green-600 font-bold",title:x,children:["",Ae(F)]})}else if(V){const F=i==="partial"?o.primary-j:o.primary;return d.jsxs("span",{className:"text-red-400 font-bold",title:x,children:["-",Ae(F)]})}else return d.jsxs("span",{className:"text-red-600/60",title:x,children:["",Ae(o.primary)]});else return V?d.jsx("span",{className:"text-gray-400",title:x,children:Ae(o.primary)}):d.jsx("span",{className:"text-gray-500/60",title:x,children:Ae(o.primary)})},P=()=>!l.hasDrag||!m?null:d.jsx("div",{draggable:!0,onDragStart:m.onDragStart,onDragEnd:m.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:d.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),_=()=>d.jsx(kr,{type:h?"target":"source",position:h?ye.Left:ye.Right,id:u,className:k(),title:p??S});return d.jsxs("div",{onDragOver:m==null?void 0:m.onDragOver,onDragLeave:m==null?void 0:m.onDragLeave,onDrop:m==null?void 0:m.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${m!=null&&m.isDragging?"opacity-50":""}
        ${m!=null&&m.isDragOver?"bg-primary/20 rounded":""}
      `,children:[h&&l.handle.inline&&_(),!h&&l.hasDrag&&P(),h&&!l.handle.inline&&_(),d.jsxs("div",{className:`flex-1 flex items-center justify-between ${h?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[h&&d.jsx("span",{className:"font-mono ml-1",children:I()}),d.jsx("span",{className:`truncate ${l.nameMaxWidth} ${N()}`,children:S}),!h&&d.jsx("span",{className:"font-mono mr-2",children:I()})]}),h&&l.hasDrag&&P(),!h&&l.handle.inline&&_(),!h&&!l.handle.inline&&_()]})}const Gk=L.memo(function({data:r,selected:o}){const{station:i}=r,l=de(D=>D.plan.sectors),u=de(D=>D.computed),c=de(D=>D.updateStation),m=ge(D=>D.drillIntoStation),[p,x]=L.useState(null),[y,h]=L.useState(null),g=i.sectorId?l.find(D=>D.id===i.sectorId):null,w=L.useMemo(()=>Cr(u,i.id),[u,i.id]),S=L.useMemo(()=>gl(u,i.id),[u,i.id]),k=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(g==null?void 0:g.sunlight)??100,N=L.useCallback(()=>{m(i.id)},[m,i.id]),I=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,P=w&&w.totalWorkforceRequired>0,_=L.useMemo(()=>u.deficits.filter(D=>D.stationId===i.id),[u.deficits,i.id]),j=D=>_.some(M=>M.wareId===D),V=L.useCallback((D,M)=>{if(!M||M.length===0)return D;const T=new Map(D.map(A=>[A.wareId,A])),C=[],b=new Set;for(const A of M){const G=T.get(A);G&&(C.push(G),b.add(A))}for(const A of D)b.has(A.wareId)||C.push(A);return C},[]),F=L.useMemo(()=>V((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,V]),B=L.useMemo(()=>V((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,V]),q=L.useMemo(()=>{const D=new Map;for(const M of(w==null?void 0:w.externallySupplied)??[])D.set(M.wareId,M.amount);return D},[w==null?void 0:w.externallySupplied]),O=L.useMemo(()=>{const D=new Map;for(const M of(w==null?void 0:w.externallyConsumed)??[])D.set(M.wareId,M.amount);return D},[w==null?void 0:w.externallyConsumed]),U=L.useCallback((D,M,T)=>{D.stopPropagation(),x(`${T}-${M}`),D.dataTransfer.effectAllowed="move",D.dataTransfer.setData("text/plain",`${T}-${M}`)},[]),X=L.useCallback((D,M,T)=>{D.preventDefault(),D.stopPropagation();const C=`${T}-${M}`;p&&p!==C&&p.startsWith(T)&&(h(C),D.dataTransfer.dropEffect="move")},[p]),W=L.useCallback(()=>{h(null)},[]),K=L.useCallback((D,M,T)=>{if(D.preventDefault(),D.stopPropagation(),!p||!p.startsWith(T)){x(null),h(null);return}const C=p.replace(`${T}-`,"");if(C===M){x(null),h(null);return}const A=(T==="output"?F:B).map(oe=>oe.wareId),G=A.indexOf(C),Z=A.indexOf(M);if(G===-1||Z===-1){x(null),h(null);return}const ne=[...A];ne.splice(G,1),ne.splice(Z,0,C),T==="output"?c(i.id,{outputOrder:ne}):c(i.id,{inputOrder:ne}),x(null),h(null)},[p,F,B,c,i.id]),R=L.useCallback(()=>{x(null),h(null)},[]),$=L.useCallback((D,M)=>{const T=`${M}-${D}`;return{isDragging:p===T,isDragOver:y===T,onDragStart:C=>U(C,D,M),onDragEnd:R,onDragOver:C=>X(C,D,M),onDragLeave:W,onDrop:C=>K(C,D,M)}},[p,y,U,R,X,W,K]),z=(D,M)=>{const T=M==="input",C=`${M}-${D.wareId}`,b=T&&j(D.wareId),A=T?q.get(D.wareId)??0:0,G=T?0:O.get(D.wareId)??0,Z=T?A:G,ne=D.amount-Z,oe=Tc(ne,Z),ae=T?"Need":"Export",re=T?"Supplied":"Consumed";let ce;return oe==="satisfied"?ce=`${ae}: ${Ae(D.amount)}, ${re}: ${Ae(Z)}`:oe==="partial"?ce=`${ae}: ${Ae(D.amount)}, ${re}: ${Ae(Z)}, Remaining: ${Ae(ne)}`:ce=`${ae}: ${Ae(D.amount)}, No external ${T?"supply":"consumers"}`,d.jsx(Hl,{wareId:D.wareId,type:M,handleId:C,amount:{primary:D.amount,secondary:Z>.01?Z:void 0,fulfilled:Z},status:oe,preset:Yk,isDeficit:b,drag:$(D.wareId,M),amountTooltip:ce},D.wareId)};return d.jsxs("div",{className:`
        min-w-[200px] max-w-[200px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:N,children:[S>0&&d.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),d.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("h3",{className:"font-medium text-sm text-foreground truncate flex-1",children:i.name}),g&&d.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:g.name})]})}),d.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),d.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[d.jsx("span",{className:"text-yellow-500",children:""}),k,"%",i.sunlightOverride===null&&g&&d.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),P&&d.jsxs("div",{className:"space-y-0.5",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Population"}),d.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),d.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all ${I>=1?"bg-green-500":I>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${I*100}%`}})})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Modules"}),d.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&d.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[F.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0 pr-2",children:F.map(D=>z(D,"output"))})]}),B.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0 pl-2",children:B.map(D=>z(D,"input"))})]})]}),i.modules.length===0&&d.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),Kk=160,qk=100,Zk=L.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,u=de(g=>g.updateSector),c=de(g=>g.plan.stations),m=de(g=>g.moveStationToSector),[p,x]=L.useState(!1),y=L.useCallback((g,w)=>{u(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,u]),h=L.useCallback((g,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};c.forEach(k=>{const N=k.position.x+Kk/2,I=k.position.y+qk/2,P=N>=S.left&&N<=S.right&&I>=S.top&&I<=S.bottom;P&&k.sectorId!==r?m(k.id,r):!P&&k.sectorId===r&&m(k.id,null)})},[r,c,m]);return d.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[d.jsx(fk,{minWidth:200,minHeight:150,isVisible:i||p,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:y,onResizeEnd:h}),d.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[d.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),d.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:d.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),Jk={production:"",habitat:"",storage:""},Cm={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},eC=L.memo(function({data:r,selected:o}){const{module:i}=r,l=ge(C=>C.activeStationId),u=de(C=>C.computed),c=de(C=>C.updateModule),m=Ue(C=>C.getModule),p=Ue(C=>C.getModuleType),x=Ue(C=>C.gameData),[y,h]=L.useState(null),[g,w]=L.useState(null),[S,k]=L.useState(!1),N=m(i.blueprintId),I=p(i.blueprintId)??"production",P=Cm[I]??Cm.production,_=Jk[I]??"",j=L.useMemo(()=>{if(l)return hr(u,l,i.id)},[u,l,i.id]),V=L.useCallback(C=>{var b;return((b=x==null?void 0:x.wares[C])==null?void 0:b.name)??C},[x]),F=L.useCallback((C,b)=>{if(!b||b.length===0)return C;const A=new Map(C.map(ne=>[ne.wareId,ne])),G=[],Z=new Set;for(const ne of b){const oe=A.get(ne);oe&&(G.push(oe),Z.add(ne))}for(const ne of C)Z.has(ne.wareId)||G.push(ne);return G},[]),B=L.useMemo(()=>F((j==null?void 0:j.netOutputs)??[],i.outputOrder),[j==null?void 0:j.netOutputs,i.outputOrder,F]),q=L.useMemo(()=>F((j==null?void 0:j.netInputs)??[],i.inputOrder),[j==null?void 0:j.netInputs,i.inputOrder,F]),O=L.useMemo(()=>F((j==null?void 0:j.grossOutputs)??[],i.outputOrder),[j==null?void 0:j.grossOutputs,i.outputOrder,F]),U=L.useMemo(()=>F((j==null?void 0:j.grossInputs)??[],i.inputOrder),[j==null?void 0:j.grossInputs,i.inputOrder,F]),X=L.useMemo(()=>{if(!j)return!1;const C=j.grossOutputs.reduce((Z,ne)=>Z+ne.amount,0),b=j.netOutputs.reduce((Z,ne)=>Z+ne.amount,0),A=j.grossInputs.reduce((Z,ne)=>Z+ne.amount,0),G=j.netInputs.reduce((Z,ne)=>Z+ne.amount,0);return Math.abs(C-b)>.01||Math.abs(A-G)>.01},[j]),W=L.useCallback((C,b,A)=>{C.stopPropagation(),h(`${A}-${b}`),C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",`${A}-${b}`)},[]),K=L.useCallback((C,b,A)=>{C.preventDefault(),C.stopPropagation();const G=`${A}-${b}`;y&&y!==G&&y.startsWith(A)&&(w(G),C.dataTransfer.dropEffect="move")},[y]),R=L.useCallback(()=>{w(null)},[]),$=L.useCallback((C,b,A)=>{if(C.preventDefault(),C.stopPropagation(),!y||!y.startsWith(A)||!l){h(null),w(null);return}const G=y.replace(`${A}-`,"");if(G===b){h(null),w(null);return}const ne=(A==="output"?O:U).map(ce=>ce.wareId),oe=ne.indexOf(G),ae=ne.indexOf(b);if(oe===-1||ae===-1){h(null),w(null);return}const re=[...ne];re.splice(oe,1),re.splice(ae,0,G),A==="output"?c(l,i.id,{outputOrder:re}):c(l,i.id,{inputOrder:re}),h(null),w(null)},[y,O,U,c,l,i.id]),z=L.useCallback(()=>{h(null),w(null)},[]),D=L.useCallback((C,b)=>{var G;return j?((G=(b==="output"?j.netOutputs:j.netInputs).find(Z=>Z.wareId===C))==null?void 0:G.amount)??0:0},[j]),M=L.useCallback((C,b)=>{const A=`${b}-${C}`;return{isDragging:y===A,isDragOver:g===A,onDragStart:G=>W(G,C,b),onDragEnd:z,onDragOver:G=>K(G,C,b),onDragLeave:R,onDrop:G=>$(G,C,b)}},[y,g,W,z,K,R,$]),T=(C,b)=>{const A=`${b}-${C.wareId}`,G=D(C.wareId,b),Z=G<.01;return d.jsx(Hl,{wareId:C.wareId,type:b,handleId:A,amount:{primary:G,fulfilled:C.amount-G},status:Z?"satisfied":"unsatisfied",preset:Uk,drag:M(C.wareId,b),amountTooltip:`Full: ${Ae(C.amount)}/hr`},C.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":P.border}
      `,children:[d.jsx("div",{className:`px-3 py-2 border-b border-border ${P.bg} rounded-t-lg`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:_}),d.jsx("h3",{className:"font-medium text-sm text-foreground truncate flex-1",children:(N==null?void 0:N.name)??i.blueprintId})]})}),d.jsxs("div",{className:"px-3 py-2 space-y-1",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Count"}),d.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),I==="habitat"&&N&&"workforceCapacity"in N&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),d.jsx("span",{className:"text-foreground",children:N.workforceCapacity*i.count})]}),I==="storage"&&N&&"cargoMax"in N&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),d.jsx("span",{className:"text-foreground",children:N.cargoMax*i.count})]}),I==="production"&&j&&d.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[O.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0",children:O.map(C=>T(C,"output"))})]}),U.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0",children:U.map(C=>T(C,"input"))})]}),B.length===0&&q.length===0&&X&&d.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(O.length>0||U.length>0)&&d.jsxs("div",{className:"pt-1 border-t border-border/30",children:[d.jsxs("button",{onClick:C=>{C.stopPropagation(),k(!S)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[d.jsx("span",{children:S?"":""}),d.jsx("span",{children:"Full Production"})]}),S&&d.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[O.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),O.map(C=>d.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[d.jsx("span",{className:"truncate max-w-[70px]",children:V(C.wareId)}),d.jsxs("span",{className:"font-mono",children:["+",Ae(C.amount)]})]},C.wareId))]}),U.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),U.map(C=>d.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[d.jsx("span",{className:"truncate max-w-[70px]",children:V(C.wareId)}),d.jsxs("span",{className:"font-mono",children:["-",Ae(C.amount)]})]},C.wareId))]})]})]})]}),I==="production"&&!j&&d.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),tC="generic-import",nC=L.memo(function({selected:r}){const o=ge(O=>O.activeStationId),i=de(O=>O.computed),l=Ue(O=>O.gameData),u=de(O=>O.plan.stations),c=de(O=>O.updateStation),[m,p]=L.useState(null),[x,y]=L.useState(null),h=L.useMemo(()=>{if(o)return u.find(O=>O.id===o)},[u,o]),g=L.useMemo(()=>{if(!(!o||!i))return i.stations.find(O=>O.stationId===o)},[i,o]),w=O=>{var U;return((U=l==null?void 0:l.wares[O])==null?void 0:U.name)??O},S=(g==null?void 0:g.stationInputs)??[],k=(g==null?void 0:g.externallySupplied)??[],N=(g==null?void 0:g.remainingInputs)??[],I=L.useMemo(()=>{const O=new Map;for(const W of S){const K=O.get(W.wareId)||{connected:0,supplied:0,remaining:0};K.connected=W.amount,O.set(W.wareId,K)}for(const W of k){const K=O.get(W.wareId);K&&(K.supplied=W.amount)}for(const W of N){const K=O.get(W.wareId);K&&(K.remaining=W.amount)}const U=Array.from(O.entries()).map(([W,K])=>({wareId:W,connected:K.connected,supplied:K.supplied,remaining:K.remaining})),X=h==null?void 0:h.inputOrder;if(X&&X.length>0){const W=new Map(X.map((K,R)=>[K,R]));U.sort((K,R)=>{const $=W.get(K.wareId)??1/0,z=W.get(R.wareId)??1/0;return $!==z?$-z:R.connected-K.connected})}else U.sort((W,K)=>K.connected-W.connected);return U},[S,k,N,h==null?void 0:h.inputOrder]),P=L.useCallback((O,U)=>{O.stopPropagation(),p(U),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",U)},[]),_=L.useCallback((O,U)=>{O.preventDefault(),O.stopPropagation(),m&&m!==U&&(y(U),O.dataTransfer.dropEffect="move")},[m]),j=L.useCallback(()=>{y(null)},[]),V=L.useCallback((O,U)=>{if(O.preventDefault(),O.stopPropagation(),!m||!o){p(null),y(null);return}const X=m;if(X===U){p(null),y(null);return}const W=I.map(z=>z.wareId),K=W.indexOf(X),R=W.indexOf(U);if(K===-1||R===-1){p(null),y(null);return}const $=[...W];$.splice(K,1),$.splice(R,0,X),c(o,{inputOrder:$}),p(null),y(null)},[m,I,c,o]),F=L.useCallback(()=>{p(null),y(null)},[]),B=L.useCallback(O=>({isDragging:m===O,isDragOver:x===O,onDragStart:U=>P(U,O),onDragEnd:F,onDragOver:U=>_(U,O),onDragLeave:j,onDrop:U=>V(U,O)}),[m,x,P,F,_,j,V]),q=O=>{const U=`output-${O.wareId}`,X=Tc(O.remaining,O.supplied);let W;return X==="satisfied"?W=`Need: ${Ae(O.connected)}, Supplied: ${Ae(O.supplied)}`:X==="partial"?W=`Need: ${Ae(O.connected)}, Supplied: ${Ae(O.supplied)}, Remaining: ${Ae(O.remaining)}`:W=`Need: ${Ae(O.connected)}, No external supply`,d.jsx(Hl,{wareId:O.wareId,type:"output",handleId:U,amount:{primary:O.supplied-O.connected?O.supplied-O.connected:O.supplied,secondary:O.supplied>.01?O.supplied:void 0,fulfilled:O.supplied},status:X,preset:Xk,drag:B(O.wareId),amountTooltip:W,handleTooltip:`Import ${w(O.wareId)}`},O.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[d.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:""}),d.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),d.jsx("div",{className:"px-1 py-2",children:I.length>0?d.jsx("div",{className:"space-y-0 pr-3",children:I.map(O=>q(O))}):d.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),d.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[d.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),d.jsx(kr,{type:"source",position:ye.Right,id:tC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),rC="generic-export",oC=L.memo(function({selected:r}){const o=ge(O=>O.activeStationId),i=de(O=>O.computed),l=Ue(O=>O.gameData),u=de(O=>O.plan.stations),c=de(O=>O.updateStation),[m,p]=L.useState(null),[x,y]=L.useState(null),h=L.useMemo(()=>{if(o)return u.find(O=>O.id===o)},[u,o]),g=L.useMemo(()=>{if(!(!o||!i))return i.stations.find(O=>O.stationId===o)},[i,o]),w=O=>{var U;return((U=l==null?void 0:l.wares[O])==null?void 0:U.name)??O},S=(g==null?void 0:g.stationOutputs)??[],k=(g==null?void 0:g.externallyConsumed)??[],N=(g==null?void 0:g.remainingOutputs)??[],I=L.useMemo(()=>{const O=new Map;for(const W of S){const K=O.get(W.wareId)||{connected:0,consumed:0,remaining:0};K.connected=W.amount,O.set(W.wareId,K)}for(const W of k){const K=O.get(W.wareId);K&&(K.consumed=W.amount)}for(const W of N){const K=O.get(W.wareId);K&&(K.remaining=W.amount)}const U=Array.from(O.entries()).map(([W,K])=>({wareId:W,connected:K.connected,consumed:K.consumed,remaining:K.remaining})),X=h==null?void 0:h.outputOrder;if(X&&X.length>0){const W=new Map(X.map((K,R)=>[K,R]));U.sort((K,R)=>{const $=W.get(K.wareId)??1/0,z=W.get(R.wareId)??1/0;return $!==z?$-z:R.connected-K.connected})}else U.sort((W,K)=>K.connected-W.connected);return U},[S,k,N,h==null?void 0:h.outputOrder]),P=L.useCallback((O,U)=>{O.stopPropagation(),p(U),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",U)},[]),_=L.useCallback((O,U)=>{O.preventDefault(),O.stopPropagation(),m&&m!==U&&(y(U),O.dataTransfer.dropEffect="move")},[m]),j=L.useCallback(()=>{y(null)},[]),V=L.useCallback((O,U)=>{if(O.preventDefault(),O.stopPropagation(),!m||!o){p(null),y(null);return}const X=m;if(X===U){p(null),y(null);return}const W=I.map(z=>z.wareId),K=W.indexOf(X),R=W.indexOf(U);if(K===-1||R===-1){p(null),y(null);return}const $=[...W];$.splice(K,1),$.splice(R,0,X),c(o,{outputOrder:$}),p(null),y(null)},[m,I,c,o]),F=L.useCallback(()=>{p(null),y(null)},[]),B=L.useCallback(O=>({isDragging:m===O,isDragOver:x===O,onDragStart:U=>P(U,O),onDragEnd:F,onDragOver:U=>_(U,O),onDragLeave:j,onDrop:U=>V(U,O)}),[m,x,P,F,_,j,V]),q=O=>{const U=`input-${O.wareId}`,X=Tc(O.remaining,O.consumed);let W;return X==="satisfied"?W=`Exporting: ${Ae(O.connected)}, Consumed: ${Ae(O.consumed)}`:X==="partial"?W=`Exporting: ${Ae(O.connected)}, Consumed: ${Ae(O.consumed)}, Remaining: ${Ae(O.remaining)}`:W=`Exporting: ${Ae(O.connected)}, No external consumers`,d.jsx(Hl,{wareId:O.wareId,type:"input",handleId:U,amount:{primary:O.connected,secondary:O.consumed>.01?O.consumed:void 0,fulfilled:O.consumed},status:X,preset:Qk,drag:B(O.wareId),amountTooltip:W,handleTooltip:`Export ${w(O.wareId)}`},O.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[d.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:""}),d.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),d.jsx("div",{className:"px-1 py-2",children:I.length>0?d.jsx("div",{className:"space-y-0 pl-3",children:I.map(O=>q(O))}):d.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),d.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[d.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),d.jsx(kr,{type:"target",position:ye.Left,id:rC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),sC=L.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:m,data:p,selected:x}){const y=de(_=>_.computed),h=p==null?void 0:p.connection,g=L.useMemo(()=>{if(h)return xg(y,h.id)},[y,h]),[w,S,k]=Al({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:m}),N=_=>_>=1e3?`${(_/1e3).toFixed(1)}k`:_.toFixed(0),I=y.deficits.find(_=>_.stationId===(h==null?void 0:h.targetStationId)&&_.wareId===(h==null?void 0:h.wareId));let P="#64748b";return h!=null&&h.wareId?I?I.supplied/I.required>=.8?P="#eab308":P="#f97316":P="#22c55e":P="#ef4444",d.jsxs(d.Fragment,{children:[d.jsx(xo,{id:r,path:w,style:{stroke:P,strokeWidth:x?3:2,strokeDasharray:h!=null&&h.wareId?void 0:"5,5"}}),(h==null?void 0:h.wareId)&&d.jsx(ug,{children:d.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${k}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${x?"ring-2 ring-primary":""}
              ${g!=null&&g.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:h.mode==="custom"?`Custom: ${N(h.amount)}, Actual: ${N((g==null?void 0:g.effectiveAmount)??0)}`:`Auto: ${N((g==null?void 0:g.effectiveAmount)??0)}`,children:N((g==null?void 0:g.effectiveAmount)??0)})})]})}),iC=L.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:m,data:p,selected:x}){const y=p==null?void 0:p.connection,h=de(j=>j.computed),g=ge(j=>j.activeStationId),w=L.useMemo(()=>{if(!y||!g)return;const j=Cr(h,g);return j==null?void 0:j.moduleConnections.find(V=>V.connectionId===y.id)},[h,g,y]),[S,k,N]=Al({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:m}),I=j=>j>=1e3?`${(j/1e3).toFixed(1)}k`:j.toFixed(0),P=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",_=(w==null?void 0:w.effectiveAmount)??(y==null?void 0:y.amount)??0;return d.jsxs(d.Fragment,{children:[d.jsx(xo,{id:r,path:S,style:{stroke:P,strokeWidth:x?3:2,strokeDasharray:y!=null&&y.wareId?void 0:"5,5"}}),(y==null?void 0:y.wareId)&&d.jsx(ug,{children:d.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${k}px,${N}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${x?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:y.mode==="custom"?`Custom: ${I(y.amount)}, Actual: ${I(_)}`:`${y.mode??"auto"}: ${I(_)}`,children:I(_)})})]})});function nn({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",u=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return d.jsxs("button",{onClick:c=>{c.stopPropagation(),i(c)},className:`${l} ${u}`,children:[r&&d.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function lC(){const{screenToFlowPosition:t}=Er(),r=ge(p=>p.contextMenu),o=ge(p=>p.closeContextMenu),i=de(p=>p.plan),l=de(p=>p.addStation),u=de(p=>p.addSector),c=L.useCallback(p=>{if(p.stopPropagation(),!r)return;const x=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,x),o()},[t,r,i.stations.length,l,o]),m=L.useCallback(p=>{if(p.stopPropagation(),!r)return;const x=t({x:r.x,y:r.y});u(`Sector ${i.sectors.length+1}`,x),o()},[t,r,i.sectors.length,u,o]);return d.jsxs(d.Fragment,{children:[d.jsx(nn,{label:"Add Station",icon:"+",onClick:c}),d.jsx(nn,{label:"Add Sector",icon:"",onClick:m})]})}const ul={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function aC(){const{screenToFlowPosition:t}=Er(),r=L.useRef(null),o=Ue(w=>w.gameData),i=de(w=>w.addModule),l=ge(w=>w.activeStationId),u=ge(w=>w.contextMenu),c=ge(w=>w.closeContextMenu),[m,p]=L.useState(null),[x,y]=L.useState(""),h=L.useMemo(()=>{if(!o||!x.trim())return null;const w=x.toLowerCase(),S=[];return Object.keys(ul).forEach(k=>{Object.values(o.modules[k]).forEach(N=>{N.name.toLowerCase().includes(w)&&S.push({id:N.id,name:N.name,category:k})})}),S.slice(0,15)},[o,x]);L.useEffect(()=>{var w;(w=r.current)==null||w.focus()},[]);const g=L.useCallback((w,S)=>{if(w.stopPropagation(),!l||!u)return;const k=t({x:u.x,y:u.y});i(l,S,k),c()},[t,u,l,i,c]);return o?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"p-2 pb-0",children:d.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:x,onChange:w=>y(w.target.value),onKeyDown:w=>w.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),d.jsx("div",{className:"p-1 pt-1",children:h?d.jsx("div",{className:"max-h-64 overflow-y-auto",children:h.length===0?d.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):h.map(w=>d.jsxs("button",{onClick:S=>g(S,w.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:ul[w.category].icon}),d.jsx("span",{className:"truncate",children:w.name})]},w.id))}):d.jsx(d.Fragment,{children:Object.keys(ul).map(w=>{const{label:S,icon:k}=ul[w],N=Object.values(o.modules[w]),I=m===w;return d.jsxs("div",{children:[d.jsxs("button",{onClick:P=>{P.stopPropagation(),p(I?null:w)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("span",{children:k}),S]}),d.jsx("span",{className:"text-muted-foreground text-xs",children:I?"":""})]}),I&&d.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[N.slice(0,20).map(P=>d.jsx("button",{onClick:_=>g(_,P.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:P.name},P.id)),N.length>20&&d.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",N.length-20," more (use search)"]})]})]},w)})})})]}):null}function Ir(){return d.jsx("div",{className:"my-1 h-px bg-border"})}function pc({label:t,value:r,type:o="text",min:i,max:l,step:u,onSubmit:c}){const[m,p]=L.useState(!1),[x,y]=L.useState(String(r)),h=L.useRef(null);L.useEffect(()=>{var w,S;m&&((w=h.current)==null||w.focus(),(S=h.current)==null||S.select())},[m]);const g=()=>{c(x),p(!1)};return m?d.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:t}),d.jsx("input",{ref:h,type:o,min:i,max:l,step:u,value:x,onChange:w=>y(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&g(),w.key==="Escape"&&p(!1)},onBlur:g,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):d.jsxs("button",{onClick:w=>{w.stopPropagation(),y(String(r)),p(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:t}),d.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function uC({nodeId:t}){const r=de(p=>p.plan.stations),o=de(p=>p.updateStation),i=de(p=>p.removeStation),l=ge(p=>p.drillIntoStation),u=ge(p=>p.closeContextMenu),c=ge(p=>p.clearSelection),m=r.find(p=>p.id===t);return m?d.jsxs(d.Fragment,{children:[d.jsx(nn,{label:"Open Station",onClick:()=>{l(t)}}),d.jsx(Ir,{}),d.jsx(pc,{label:"Change Name",value:m.name,onSubmit:p=>{p.trim()&&o(t,{name:p.trim()})}}),d.jsx(pc,{label:"Sunlight Override",value:m.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:p=>{const x=parseInt(p,10);o(t,{sunlightOverride:isNaN(x)?void 0:x})}}),d.jsx(Ir,{}),d.jsx(nn,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),c(),u()}})]}):null}function cC({value:t,onSelect:r}){const[o,i]=L.useState(!1),[l,u]=L.useState(t),c=L.useRef(null),m=Ue(y=>y.gameData),p=L.useMemo(()=>m!=null&&m.sectors?Object.values(m.sectors).sort((y,h)=>y.name.localeCompare(h.name)):[],[m]),x=L.useMemo(()=>{if(!l.trim())return p.slice(0,10);const y=l.toLowerCase();return p.filter(h=>h.name.toLowerCase().includes(y)).slice(0,10)},[p,l]);return L.useEffect(()=>{var y,h;o&&((y=c.current)==null||y.focus(),(h=c.current)==null||h.select())},[o]),o?d.jsxs("div",{className:"px-3 py-1.5",onClick:y=>y.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),d.jsx("input",{ref:c,type:"text",value:l,onChange:y=>u(y.target.value),onKeyDown:y=>{if(y.stopPropagation(),y.key==="Enter"){const h=p.find(g=>g.name.toLowerCase()===l.toLowerCase());r((h==null?void 0:h.name)??l,h==null?void 0:h.sunlight),i(!1)}y.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),x.length>0&&d.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:x.map(y=>d.jsxs("button",{onClick:h=>{h.stopPropagation(),r(y.name,y.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[d.jsx("span",{className:"truncate text-foreground",children:y.name}),d.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[y.sunlight,"%"]})]},y.id))})]}):d.jsxs("button",{onClick:y=>{y.stopPropagation(),u(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:"Change Name"}),d.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function dC({nodeId:t}){const r=de(h=>h.plan),o=de(h=>h.updateSector),i=de(h=>h.removeSector),l=de(h=>h.addStation),u=de(h=>h.moveStationToSector),c=ge(h=>h.contextMenu),m=ge(h=>h.closeContextMenu),p=ge(h=>h.clearSelection),x=r.sectors.find(h=>h.id===t);if(!x)return null;const y=r.stations.filter(h=>h.sectorId===t);return d.jsxs(d.Fragment,{children:[d.jsx(cC,{value:x.name,onSelect:(h,g)=>{const w={name:h};g!==void 0&&(w.sunlight=g),o(t,w)}}),d.jsx(pc,{label:"Sunlight",value:x.sunlight,type:"number",min:0,max:500,onSubmit:h=>{const g=parseInt(h,10);!isNaN(g)&&g>=0&&o(t,{sunlight:g})}}),d.jsx(Ir,{}),d.jsx(nn,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const h=(c==null?void 0:c.flowPosition)??{x:x.position.x+50,y:x.position.y+80},g=`Station ${r.stations.length+1}`;l(g,h);const w=(S=de.getState().plan.stations.at(-1))==null?void 0:S.id;w&&u(w,t),m()}}),d.jsx(Ir,{}),d.jsx(nn,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{y.length>0&&!confirm(`This sector contains ${y.length} station(s). They will be unassigned. Continue?`)||(i(t),p(),m())}})]})}function fC({label:t,value:r,min:o=1,onChange:i}){return d.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:t}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),d.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const u=parseInt(l.target.value,10);!isNaN(u)&&u>=o&&i(u)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),d.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function mc({label:t,value:r,options:o,onChange:i}){return d.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:t}),d.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>d.jsx("option",{value:l.value,children:l.label},l.value))})]})}function pC({nodeId:t}){const r=ge(w=>w.activeStationId),o=ge(w=>w.closeContextMenu),i=ge(w=>w.clearSelection),l=de(w=>w.plan.stations),u=de(w=>w.updateModule),c=de(w=>w.removeModule),m=Ue(w=>w.gameData),p=Ue(w=>w.getModuleType),x=l.find(w=>w.id===r),y=x==null?void 0:x.modules.find(w=>w.id===t),h=y?p(y.blueprintId):null,g=L.useMemo(()=>{if(!m||!h)return[];const w=m.modules[h];return Object.values(w).sort((S,k)=>S.name.localeCompare(k.name)).map(S=>({value:S.id,label:S.name}))},[m,h]);return!x||!y||!r?null:d.jsxs(d.Fragment,{children:[d.jsx(fC,{label:"Amount",value:y.count,min:1,onChange:w=>u(r,y.id,{count:w})}),h==="production"&&g.length>1&&d.jsx(mc,{label:"Blueprint",value:y.blueprintId,options:g,onChange:w=>u(r,y.id,{blueprintId:w})}),d.jsx(Ir,{}),d.jsx(nn,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{c(r,y.id),i(),o()}})]})}function mC({nodeId:t}){const r=ge(y=>y.activeStationId),o=ge(y=>y.closeContextMenu),i=de(y=>y.plan.stations),l=de(y=>y.removeModuleConnection),u=i.find(y=>y.id===r);if(!u||!r)return null;const c=u.moduleConnections??[],m=t===Ct,p=m?"Station Input":"Station Output",x=c.filter(y=>m?y.sourceModuleId===Ct:y.targetModuleId===Bt);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[p,"  ",x.length," connection",x.length!==1?"s":""]}),d.jsx(nn,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{x.forEach(y=>{l(r,y.id)}),o()}})]})}const Im=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function hC({edgeId:t,viewMode:r}){var S,k;const o=ge(N=>N.closeContextMenu),i=ge(N=>N.clearSelection),l=ge(N=>N.activeStationId),u=de(N=>N.plan),c=de(N=>N.updateConnection),m=de(N=>N.removeConnection),p=de(N=>N.updateModuleConnection),x=de(N=>N.removeModuleConnection),y=Ue(N=>N.gameData);if(r==="network"){const N=u.connections.find(P=>P.id===t);if(!N)return null;const I=N.wareId?((S=y==null?void 0:y.wares[N.wareId])==null?void 0:S.name)??N.wareId:"Unknown";return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:I}),d.jsx(mc,{label:"Mode",value:N.mode??"auto",options:Im,onChange:P=>c(N.id,{mode:P})}),d.jsx(Ir,{}),d.jsx(nn,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{m(N.id),i(),o()}})]})}if(!l)return null;const h=u.stations.find(N=>N.id===l),g=((h==null?void 0:h.moduleConnections)??[]).find(N=>N.id===t);if(!g)return null;const w=((k=y==null?void 0:y.wares[g.wareId])==null?void 0:k.name)??g.wareId;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:w}),d.jsx(mc,{label:"Mode",value:g.mode??"auto",options:Im,onChange:N=>p(l,g.id,{mode:N})}),d.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:N=>N.stopPropagation(),children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),d.jsx("button",{onClick:N=>{N.stopPropagation(),p(l,g.id,{locked:!g.locked})},className:`w-10 h-5 rounded-full transition-colors ${g.locked?"bg-primary":"bg-muted"}`,children:d.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${g.locked?"translate-x-5":"translate-x-0.5"}`})})]}),d.jsx(Ir,{}),d.jsx(nn,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{x(l,g.id),i(),o()}})]})}function yg(){const t=ge(y=>y.contextMenu),r=ge(y=>y.closeContextMenu),o=L.useRef(null),i=L.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const y=o.current.getBoundingClientRect();let{x:h,y:g}=t;return h+y.width>window.innerWidth&&(h=window.innerWidth-y.width-8),g+y.height>window.innerHeight&&(g=window.innerHeight-y.height-8),h<8&&(h=8),g<8&&(g=8),{left:h,top:g}},[t]);if(L.useEffect(()=>{if(!t)return;const y=g=>{o.current&&!o.current.contains(g.target)&&r()},h=setTimeout(()=>{document.addEventListener("mousedown",y)},0);return()=>{clearTimeout(h),document.removeEventListener("mousedown",y)}},[t,r]),L.useEffect(()=>{if(!t)return;const y=h=>{h.key==="Escape"&&r()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[t,r]),!t)return null;const{target:l}=t,c=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return d.jsx(lC,{});if(l.viewMode==="station")return d.jsx(aC,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return d.jsx(uC,{nodeId:l.nodeId});if(l.nodeType==="sector")return d.jsx(dC,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===Ct||l.nodeId===Bt)return d.jsx(mC,{nodeId:l.nodeId});if(l.nodeType==="module")return d.jsx(pC,{nodeId:l.nodeId})}}return l.type==="edge"?d.jsx(hC,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!c)return null;const p=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",x=i();return d.jsx("div",{ref:o,className:`fixed z-50 ${p} rounded-md border border-border bg-popover shadow-lg`,style:{left:x.left||t.x,top:x.top||t.y},onClick:y=>y.stopPropagation(),onMouseDown:y=>y.stopPropagation(),children:d.jsx("div",{className:"p-1",children:c})})}const gC={station:Gk,sector:Zk},xC={resource:sC};function yC(){const{setViewport:t,screenToFlowPosition:r}=Er(),o=de(D=>D.plan.stations),i=de(D=>D.plan.sectors),l=de(D=>D.plan.connections),u=de(D=>D.computed),c=de(D=>D.updateStation),m=de(D=>D.updateSector),p=de(D=>D.removeStation),x=de(D=>D.removeSector),y=de(D=>D.moveStationToSector),h=de(D=>D.addConnection),g=de(D=>D.removeConnection),w=ge(D=>D.selectNode),S=ge(D=>D.selectEdge),k=ge(D=>D.clearSelection),N=ge(D=>D.openContextMenu),I=ge(D=>D.closeContextMenu),P=L.useRef(null),_=L.useMemo(()=>{const D=i.map(T=>({id:T.id,type:"sector",position:T.position,data:{sector:T},width:T.size.width,height:T.size.height,zIndex:-1})),M=o.map(T=>({id:T.id,type:"station",position:T.position,data:{station:T},zIndex:1}));return[...D,...M]},[i,o]),j=L.useMemo(()=>l.map(D=>({id:D.id,source:D.sourceStationId,target:D.targetStationId,sourceHandle:D.wareId?`output-${D.wareId}`:void 0,targetHandle:D.wareId?`input-${D.wareId}`:void 0,type:"resource",data:{connection:D}})),[l]),V=L.useCallback((D,M)=>{for(const T of i)if(D>=T.position.x&&D<=T.position.x+T.size.width&&M>=T.position.y&&M<=T.position.y+T.size.height)return T.id;return null},[i]),F=L.useCallback(D=>{D.forEach(M=>{if(M.type==="position"&&M.position){const T=o.find(b=>b.id===M.id),C=i.find(b=>b.id===M.id);if(T)c(M.id,{position:M.position});else if(C){const b=M.position.x-C.position.x,A=M.position.y-C.position.y;m(M.id,{position:M.position}),(b!==0||A!==0)&&o.filter(G=>G.sectorId===C.id).forEach(G=>{c(G.id,{position:{x:G.position.x+b,y:G.position.y+A}})})}}else if(M.type==="remove"){const T=o.find(b=>b.id===M.id),C=i.find(b=>b.id===M.id);T?p(M.id):C&&x(M.id)}else M.type==="select"&&M.selected&&w(M.id)})},[o,i,c,m,p,x,w]),B=L.useCallback((D,M)=>{const T=o.find(G=>G.id===M.id);if(!T)return;const C=M.position.x+80,b=M.position.y+50,A=V(C,b);A!==T.sectorId&&y(T.id,A)},[o,V,y]),q=L.useCallback(D=>{D.forEach(M=>{M.type==="remove"?g(M.id):M.type==="select"&&M.selected&&S(M.id)})},[g,S]),O=D=>D?D.split("-").slice(1).join("-"):"",U=L.useCallback(D=>{if(D.source&&D.target&&D.sourceHandle){const M=O(D.sourceHandle),T=u.stations.find(Z=>Z.stationId===D.source),C=T==null?void 0:T.remainingOutputs.find(Z=>Z.wareId===M),b=u.stations.find(Z=>Z.stationId===D.target),A=b==null?void 0:b.remainingInputs.find(Z=>Z.wareId===M),G=A?Math.min((C==null?void 0:C.amount)??0,A.amount):(C==null?void 0:C.amount)??0;h({sourceStationId:D.source,targetStationId:D.target,wareId:M,amount:G,mode:"auto"})}},[h,u.stations]),X=L.useCallback(()=>{k(),I()},[k,I]),W=L.useCallback(D=>{D.preventDefault(),N({x:D.clientX,y:D.clientY,flowPosition:r({x:D.clientX,y:D.clientY}),target:{type:"pane",viewMode:"network"}})},[N,r]),K=L.useCallback((D,M)=>{D.preventDefault(),w(M.id),N({x:D.clientX,y:D.clientY,flowPosition:r({x:D.clientX,y:D.clientY}),target:{type:"node",nodeId:M.id,nodeType:M.type??"station",viewMode:"network"}})},[N,r,w]),R=L.useCallback((D,M)=>{D.preventDefault(),S(M.id),N({x:D.clientX,y:D.clientY,flowPosition:r({x:D.clientX,y:D.clientY}),target:{type:"edge",edgeId:M.id,edgeType:M.type??"resource",viewMode:"network"}})},[N,r,S]),$=L.useCallback(D=>{if(D.key==="Delete"||D.key==="Backspace"){const M=ge.getState().selectedNodeId,T=ge.getState().selectedEdgeId;if(M){const C=o.find(A=>A.id===M),b=i.find(A=>A.id===M);C?p(M):b&&x(M),k()}else T&&(g(T),k())}},[o,i,p,x,g,k]),z=L.useCallback(D=>{const M=Math.round(D.x),T=Math.round(D.y),C=Math.round(D.zoom*100)/100;(M!==D.x||T!==D.y||C!==D.zoom)&&t({x:M,y:T,zoom:C})},[t]);return d.jsxs("div",{ref:P,className:"flex-1 relative",onKeyDown:$,tabIndex:0,children:[d.jsxs(ag,{nodes:_,edges:j,onNodesChange:F,onEdgesChange:q,onConnect:U,onNodeDragStop:B,onPaneClick:X,onPaneContextMenu:W,onNodeContextMenu:K,onEdgeContextMenu:R,onViewportChange:z,nodeTypes:gC,edgeTypes:xC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[d.jsx(dg,{gap:16,size:1}),d.jsx(pg,{}),d.jsx(ak,{nodeColor:D=>D.type==="sector"?D.selected?"#3b82f6":"#475569":D.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),d.jsx(yg,{})]})}function vC(){return d.jsx(Fl,{children:d.jsx(yC,{})})}const wC={module:eC,stationInput:nC,stationOutput:oC},SC={module:iC};function NC(){const{setViewport:t,screenToFlowPosition:r}=Er(),o=ge($=>$.activeStationId),i=de($=>$.plan.stations),l=de($=>$.computed),u=de($=>$.updateModule),c=de($=>$.removeModule),m=de($=>$.addModuleConnection),p=de($=>$.removeModuleConnection),x=ge($=>$.selectNode),y=ge($=>$.selectEdge),h=ge($=>$.clearSelection),g=ge($=>$.openContextMenu),w=ge($=>$.closeContextMenu),S=L.useRef(null),k=L.useMemo(()=>i.find($=>$.id===o),[i,o]),N={x:-300,y:100},I={x:400,y:100},P=L.useMemo(()=>{if(!k)return[];const $=k.modules.map(M=>({id:M.id,type:"module",position:M.position,data:{module:M}})),z={id:Ct,type:"stationInput",position:k.stationInputPosition??N,data:{},deletable:!1},D={id:Bt,type:"stationOutput",position:k.stationOutputPosition??I,data:{},deletable:!1};return[z,...$,D]},[k]),_=L.useMemo(()=>k?(k.moduleConnections??[]).map(z=>({id:z.id,source:z.sourceModuleId,target:z.targetModuleId,sourceHandle:z.wareId?`output-${z.wareId}`:void 0,targetHandle:z.wareId?`input-${z.wareId}`:void 0,type:"module",data:{connection:z}})):[],[k]),j=de($=>$.updateStation),V=L.useCallback($=>{o&&$.forEach(z=>{z.type==="position"&&z.position?z.id===Ct?j(o,{stationInputPosition:z.position}):z.id===Bt?j(o,{stationOutputPosition:z.position}):u(o,z.id,{position:z.position}):z.type==="remove"?z.id!==Ct&&z.id!==Bt&&c(o,z.id):z.type==="select"&&z.selected&&x(z.id)})},[o,u,j,c,x]),F=L.useCallback($=>{o&&$.forEach(z=>{z.type==="remove"?p(o,z.id):z.type==="select"&&z.selected&&y(z.id)})},[o,p,y]),B=$=>$?$.split("-").slice(1).join("-"):"",q=L.useCallback($=>{if(!o||!$.source||!$.target)return;let z,D=0,M;if($.source===Ct){if(!$.targetHandle)return;z=B($.targetHandle);const T=hr(l,o,$.target),C=T==null?void 0:T.netInputs.find(b=>b.wareId===z);D=(C==null?void 0:C.amount)??0}else if($.target===Bt){if(!$.sourceHandle)return;z=B($.sourceHandle);const T=hr(l,o,$.source),C=T==null?void 0:T.netOutputs.find(b=>b.wareId===z);D=(C==null?void 0:C.amount)??0}else{if(!$.sourceHandle)return;z=B($.sourceHandle);const T=hr(l,o,$.source),C=T==null?void 0:T.grossOutputs.find(Z=>Z.wareId===z),b=(C==null?void 0:C.amount)??0,A=hr(l,o,$.target),G=A==null?void 0:A.grossInputs.find(Z=>Z.wareId===z);D=G?Math.min(b,G.amount):b,M=b>0?D/b:0}z&&m(o,{sourceModuleId:$.source,targetModuleId:$.target,wareId:z,amount:D,mode:"auto",locked:!1,ratio:M})},[o,l,m]),O=L.useCallback(()=>{h(),w()},[h,w]),U=L.useCallback($=>{$.preventDefault(),g({x:$.clientX,y:$.clientY,flowPosition:r({x:$.clientX,y:$.clientY}),target:{type:"pane",viewMode:"station"}})},[g,r]),X=L.useCallback(($,z)=>{$.preventDefault(),x(z.id),g({x:$.clientX,y:$.clientY,flowPosition:r({x:$.clientX,y:$.clientY}),target:{type:"node",nodeId:z.id,nodeType:z.type??"module",viewMode:"station"}})},[g,r,x]),W=L.useCallback(($,z)=>{$.preventDefault(),y(z.id),g({x:$.clientX,y:$.clientY,flowPosition:r({x:$.clientX,y:$.clientY}),target:{type:"edge",edgeId:z.id,edgeType:z.type??"module",viewMode:"station"}})},[g,r,y]),K=L.useCallback($=>{if($.key==="Delete"||$.key==="Backspace"){const z=ge.getState().selectedNodeId,D=ge.getState().selectedEdgeId;z&&o?z!==Ct&&z!==Bt&&(c(o,z),h()):D&&o&&(p(o,D),h())}},[o,c,p,h]),R=L.useCallback($=>{const z=Math.round($.x),D=Math.round($.y),M=Math.round($.zoom*100)/100;(z!==$.x||D!==$.y||M!==$.zoom)&&t({x:z,y:D,zoom:M})},[t]);return k?d.jsxs("div",{ref:S,className:"flex-1 relative",onKeyDown:K,tabIndex:0,children:[d.jsxs(ag,{nodes:P,edges:_,onNodesChange:V,onEdgesChange:F,onConnect:q,onPaneClick:O,onPaneContextMenu:U,onNodeContextMenu:X,onEdgeContextMenu:W,onViewportChange:R,nodeTypes:wC,edgeTypes:SC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[d.jsx(dg,{gap:16,size:1}),d.jsx(pg,{})]}),d.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[d.jsx("h2",{className:"font-medium text-foreground",children:k.name}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[k.modules.length," module",k.modules.length!==1?"s":"",","," ",(k.moduleConnections??[]).length," connection",(k.moduleConnections??[]).length!==1?"s":""]})]}),d.jsx(yg,{})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:d.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function kC(){return d.jsx(Fl,{children:d.jsx(NC,{})})}let cl=null;async function CC(){if(cl)return cl;const t=await fetch("/Station-Planner-For-X4-Foundations/gamedata.json");if(!t.ok)throw new Error(`Failed to load game data: ${t.statusText}`);return cl=await t.json(),cl}function IC(){const t=ge(o=>o.theme),r=ge(o=>o.setTheme);L.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),L.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const u=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",u)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function EC(){IC();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=Ue(),u=ge(c=>c.viewMode);return L.useEffect(()=>{CC().then(c=>{i(c),de.getState().recompute()}).catch(c=>l(c.message))},[i,l]),r?d.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?d.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):d.jsx(Fl,{children:d.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[d.jsx(Tk,{}),d.jsx(Hk,{}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u==="network"?d.jsx(vC,{}):d.jsx(kC,{}),d.jsx(Fk,{})]}),d.jsx(Wk,{}),t&&d.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]})]})})}o0.createRoot(document.getElementById("root")).render(d.jsx(L.StrictMode,{children:d.jsx(EC,{})}));
