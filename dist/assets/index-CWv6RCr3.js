(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();function _m(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Au={exports:{}},us={},$u={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op;function Zx(){if(op)return Ee;op=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;function g(E){return E===null||typeof E!="object"?null:(E=h&&E[h]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,I={};function N(E,O,G){this.props=E,this.context=O,this.refs=I,this.updater=G||w}N.prototype.isReactComponent={},N.prototype.setState=function(E,O){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,O,"setState")},N.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function C(){}C.prototype=N.prototype;function T(E,O,G){this.props=E,this.context=O,this.refs=I,this.updater=G||w}var k=T.prototype=new C;k.constructor=T,S(k,N.prototype),k.isPureReactComponent=!0;var P=Array.isArray,$=Object.prototype.hasOwnProperty,V={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function K(E,O,G){var Z,ne={},re=null,ae=null;if(O!=null)for(Z in O.ref!==void 0&&(ae=O.ref),O.key!==void 0&&(re=""+O.key),O)$.call(O,Z)&&!W.hasOwnProperty(Z)&&(ne[Z]=O[Z]);var oe=arguments.length-2;if(oe===1)ne.children=G;else if(1<oe){for(var ue=Array(oe),ve=0;ve<oe;ve++)ue[ve]=arguments[ve+2];ne.children=ue}if(E&&E.defaultProps)for(Z in oe=E.defaultProps,oe)ne[Z]===void 0&&(ne[Z]=oe[Z]);return{$$typeof:t,type:E,key:re,ref:ae,props:ne,_owner:V.current}}function q(E,O){return{$$typeof:t,type:E.type,key:O,ref:E.ref,props:E.props,_owner:E._owner}}function H(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function L(E){var O={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(G){return O[G]})}var X=/\/+/g;function Q(E,O){return typeof E=="object"&&E!==null&&E.key!=null?L(""+E.key):O.toString(36)}function A(E,O,G,Z,ne){var re=typeof E;(re==="undefined"||re==="boolean")&&(E=null);var ae=!1;if(E===null)ae=!0;else switch(re){case"string":case"number":ae=!0;break;case"object":switch(E.$$typeof){case t:case r:ae=!0}}if(ae)return ae=E,ne=ne(ae),E=Z===""?"."+Q(ae,0):Z,P(ne)?(G="",E!=null&&(G=E.replace(X,"$&/")+"/"),A(ne,O,G,"",function(ve){return ve})):ne!=null&&(H(ne)&&(ne=q(ne,G+(!ne.key||ae&&ae.key===ne.key?"":(""+ne.key).replace(X,"$&/")+"/")+E)),O.push(ne)),1;if(ae=0,Z=Z===""?".":Z+":",P(E))for(var oe=0;oe<E.length;oe++){re=E[oe];var ue=Z+Q(re,oe);ae+=A(re,O,G,ue,ne)}else if(ue=g(E),typeof ue=="function")for(E=ue.call(E),oe=0;!(re=E.next()).done;)re=re.value,ue=Z+Q(re,oe++),ae+=A(re,O,G,ue,ne);else if(re==="object")throw O=String(E),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ae}function R(E,O,G){if(E==null)return E;var Z=[],ne=0;return A(E,Z,"","",function(re){return O.call(G,re,ne++)}),Z}function z(E){if(E._status===-1){var O=E._result;O=O(),O.then(function(G){(E._status===0||E._status===-1)&&(E._status=1,E._result=G)},function(G){(E._status===0||E._status===-1)&&(E._status=2,E._result=G)}),E._status===-1&&(E._status=0,E._result=O)}if(E._status===1)return E._result.default;throw E._result}var j={current:null},D={transition:null},M={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:D,ReactCurrentOwner:V};function b(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:R,forEach:function(E,O,G){R(E,function(){O.apply(this,arguments)},G)},count:function(E){var O=0;return R(E,function(){O++}),O},toArray:function(E){return R(E,function(O){return O})||[]},only:function(E){if(!H(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ee.Component=N,Ee.Fragment=o,Ee.Profiler=l,Ee.PureComponent=T,Ee.StrictMode=i,Ee.Suspense=y,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,Ee.act=b,Ee.cloneElement=function(E,O,G){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var Z=S({},E.props),ne=E.key,re=E.ref,ae=E._owner;if(O!=null){if(O.ref!==void 0&&(re=O.ref,ae=V.current),O.key!==void 0&&(ne=""+O.key),E.type&&E.type.defaultProps)var oe=E.type.defaultProps;for(ue in O)$.call(O,ue)&&!W.hasOwnProperty(ue)&&(Z[ue]=O[ue]===void 0&&oe!==void 0?oe[ue]:O[ue])}var ue=arguments.length-2;if(ue===1)Z.children=G;else if(1<ue){oe=Array(ue);for(var ve=0;ve<ue;ve++)oe[ve]=arguments[ve+2];Z.children=oe}return{$$typeof:t,type:E.type,key:ne,ref:re,props:Z,_owner:ae}},Ee.createContext=function(E){return E={$$typeof:c,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:u,_context:E},E.Consumer=E},Ee.createElement=K,Ee.createFactory=function(E){var O=K.bind(null,E);return O.type=E,O},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(E){return{$$typeof:p,render:E}},Ee.isValidElement=H,Ee.lazy=function(E){return{$$typeof:m,_payload:{_status:-1,_result:E},_init:z}},Ee.memo=function(E,O){return{$$typeof:x,type:E,compare:O===void 0?null:O}},Ee.startTransition=function(E){var O=D.transition;D.transition={};try{E()}finally{D.transition=O}},Ee.unstable_act=b,Ee.useCallback=function(E,O){return j.current.useCallback(E,O)},Ee.useContext=function(E){return j.current.useContext(E)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(E){return j.current.useDeferredValue(E)},Ee.useEffect=function(E,O){return j.current.useEffect(E,O)},Ee.useId=function(){return j.current.useId()},Ee.useImperativeHandle=function(E,O,G){return j.current.useImperativeHandle(E,O,G)},Ee.useInsertionEffect=function(E,O){return j.current.useInsertionEffect(E,O)},Ee.useLayoutEffect=function(E,O){return j.current.useLayoutEffect(E,O)},Ee.useMemo=function(E,O){return j.current.useMemo(E,O)},Ee.useReducer=function(E,O,G){return j.current.useReducer(E,O,G)},Ee.useRef=function(E){return j.current.useRef(E)},Ee.useState=function(E){return j.current.useState(E)},Ee.useSyncExternalStore=function(E,O,G){return j.current.useSyncExternalStore(E,O,G)},Ee.useTransition=function(){return j.current.useTransition()},Ee.version="18.3.1",Ee}var sp;function _s(){return sp||(sp=1,$u.exports=Zx()),$u.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function Jx(){if(ip)return us;ip=1;var t=_s(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(p,y,x){var m,h={},g=null,w=null;x!==void 0&&(g=""+x),y.key!==void 0&&(g=""+y.key),y.ref!==void 0&&(w=y.ref);for(m in y)i.call(y,m)&&!u.hasOwnProperty(m)&&(h[m]=y[m]);if(p&&p.defaultProps)for(m in y=p.defaultProps,y)h[m]===void 0&&(h[m]=y[m]);return{$$typeof:r,type:p,key:g,ref:w,props:h,_owner:l.current}}return us.Fragment=o,us.jsx=c,us.jsxs=c,us}var lp;function e0(){return lp||(lp=1,Au.exports=Jx()),Au.exports}var d=e0(),F=_s();const ps=_m(F);var Zi={},Lu={exports:{}},mt={},zu={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function t0(){return ap||(ap=1,(function(t){function r(D,M){var b=D.length;D.push(M);e:for(;0<b;){var E=b-1>>>1,O=D[E];if(0<l(O,M))D[E]=M,D[b]=O,b=E;else break e}}function o(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var M=D[0],b=D.pop();if(b!==M){D[0]=b;e:for(var E=0,O=D.length,G=O>>>1;E<G;){var Z=2*(E+1)-1,ne=D[Z],re=Z+1,ae=D[re];if(0>l(ne,b))re<O&&0>l(ae,ne)?(D[E]=ae,D[re]=b,E=re):(D[E]=ne,D[Z]=b,E=Z);else if(re<O&&0>l(ae,b))D[E]=ae,D[re]=b,E=re;else break e}}return M}function l(D,M){var b=D.sortIndex-M.sortIndex;return b!==0?b:D.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,p=c.now();t.unstable_now=function(){return c.now()-p}}var y=[],x=[],m=1,h=null,g=3,w=!1,S=!1,I=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(D){for(var M=o(x);M!==null;){if(M.callback===null)i(x);else if(M.startTime<=D)i(x),M.sortIndex=M.expirationTime,r(y,M);else break;M=o(x)}}function P(D){if(I=!1,k(D),!S)if(o(y)!==null)S=!0,z($);else{var M=o(x);M!==null&&j(P,M.startTime-D)}}function $(D,M){S=!1,I&&(I=!1,C(K),K=-1),w=!0;var b=g;try{for(k(M),h=o(y);h!==null&&(!(h.expirationTime>M)||D&&!L());){var E=h.callback;if(typeof E=="function"){h.callback=null,g=h.priorityLevel;var O=E(h.expirationTime<=M);M=t.unstable_now(),typeof O=="function"?h.callback=O:h===o(y)&&i(y),k(M)}else i(y);h=o(y)}if(h!==null)var G=!0;else{var Z=o(x);Z!==null&&j(P,Z.startTime-M),G=!1}return G}finally{h=null,g=b,w=!1}}var V=!1,W=null,K=-1,q=5,H=-1;function L(){return!(t.unstable_now()-H<q)}function X(){if(W!==null){var D=t.unstable_now();H=D;var M=!0;try{M=W(!0,D)}finally{M?Q():(V=!1,W=null)}}else V=!1}var Q;if(typeof T=="function")Q=function(){T(X)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,R=A.port2;A.port1.onmessage=X,Q=function(){R.postMessage(null)}}else Q=function(){N(X,0)};function z(D){W=D,V||(V=!0,Q())}function j(D,M){K=N(function(){D(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,z($))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return o(y)},t.unstable_next=function(D){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var b=g;g=M;try{return D()}finally{g=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var b=g;g=D;try{return M()}finally{g=b}},t.unstable_scheduleCallback=function(D,M,b){var E=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?E+b:E):b=E,D){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=b+O,D={id:m++,callback:M,priorityLevel:D,startTime:b,expirationTime:O,sortIndex:-1},b>E?(D.sortIndex=b,r(x,D),o(y)===null&&D===o(x)&&(I?(C(K),K=-1):I=!0,j(P,b-E))):(D.sortIndex=O,r(y,D),S||w||(S=!0,z($))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var M=g;return function(){var b=g;g=M;try{return D.apply(this,arguments)}finally{g=b}}}})(Ru)),Ru}var up;function n0(){return up||(up=1,zu.exports=t0()),zu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function r0(){if(cp)return mt;cp=1;var t=_s(),r=n0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function u(e,n){c(e,n),c(e+"Capture",n)}function c(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},h={};function g(e){return y.call(h,e)?!0:y.call(m,e)?!1:x.test(e)?h[e]=!0:(m[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function I(e,n,s,a,f,v,_){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=_}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new I(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];N[n]=new I(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new I(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new I(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new I(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new I(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(C,T);N[n]=new I(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(C,T);N[n]=new I(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(C,T);N[n]=new I(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)});function k(e,n,s,a){var f=N.hasOwnProperty(n)?N[n]:null;(f!==null?f.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,f,a)&&(s=null),a||f===null?g(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):f.mustUseProperty?e[f.propertyName]=s===null?f.type===3?!1:"":s:(n=f.attributeName,a=f.attributeNamespace,s===null?e.removeAttribute(n):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),V=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),L=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),D=Symbol.iterator;function M(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var b=Object.assign,E;function O(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var G=!1;function Z(e,n){if(!e||G)return"";G=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(te){var a=te}Reflect.construct(e,[],n)}else{try{n.call()}catch(te){a=te}e.call(n.prototype)}else{try{throw Error()}catch(te){a=te}e()}}catch(te){if(te&&a&&typeof te.stack=="string"){for(var f=te.stack.split(`
`),v=a.stack.split(`
`),_=f.length-1,B=v.length-1;1<=_&&0<=B&&f[_]!==v[B];)B--;for(;1<=_&&0<=B;_--,B--)if(f[_]!==v[B]){if(_!==1||B!==1)do if(_--,B--,0>B||f[_]!==v[B]){var U=`
`+f[_].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=_&&0<=B);break}}}finally{G=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?O(e):""}function ne(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case V:return"Portal";case q:return"Profiler";case K:return"StrictMode";case Q:return"Suspense";case A:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case L:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case X:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:re(e.type)||"Memo";case z:n=e._payload,e=e._init;try{return re(e(n))}catch{}}return null}function ae(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(n);case 8:return n===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ue(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ve(e){var n=ue(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,v.call(this,_)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Se(e){e._valueTracker||(e._valueTracker=ve(e))}function Ce(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=ue(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function we(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _e(e,n){var s=n.checked;return b({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Te(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=oe(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function je(e,n){n=n.checked,n!=null&&k(e,"checked",n,!1)}function Xe(e,n){je(e,n);var s=oe(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?xt(e,n.type,s):n.hasOwnProperty("defaultValue")&&xt(e,n.type,oe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function At(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function xt(e,n,s){(n!=="number"||we(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var yt=Array.isArray;function _t(e,n,s,a){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&a&&(e[s].defaultSelected=!0)}else{for(s=""+oe(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function sn(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return b({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nn(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(yt(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:oe(s)}}function jr(e,n){var s=oe(n.value),a=oe(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Qn(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function ln(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function an(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?ln(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gn,Os=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,f){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,f)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Gn=Gn||document.createElement("div"),Gn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Gn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function un(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bl=["Webkit","ms","Moz","O"];Object.keys(Kn).forEach(function(e){Bl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Kn[n]=Kn[e]})});function As(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Kn.hasOwnProperty(e)&&Kn[e]?(""+n).trim():n+"px"}function $s(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,f=As(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,f):e[s]=f}}var Wl=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vo(e,n){if(n){if(Wl[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function wo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=null;function No(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ko=null,kn=null,Cn=null;function Ls(e){if(e=Qo(e)){if(typeof ko!="function")throw Error(o(280));var n=e.stateNode;n&&(n=pi(n),ko(e.stateNode,e.type,n))}}function zs(e){kn?Cn?Cn.push(e):Cn=[e]:kn=e}function Rs(){if(kn){var e=kn,n=Cn;if(Cn=kn=null,Ls(e),n)for(e=0;e<n.length;e++)Ls(n[e])}}function Fs(e,n){return e(n)}function Hs(){}var Co=!1;function Vs(e,n,s){if(Co)return e(n,s);Co=!0;try{return Fs(e,n,s)}finally{Co=!1,(kn!==null||Cn!==null)&&(Hs(),Rs())}}function qn(e,n){var s=e.stateNode;if(s===null)return null;var a=pi(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Io=!1;if(p)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Io=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Io=!1}function Ul(e,n,s,a,f,v,_,B,U){var te=Array.prototype.slice.call(arguments,3);try{n.apply(s,te)}catch(ie){this.onError(ie)}}var Jn=!1,Mr=null,br=!1,Eo=null,Yl={onError:function(e){Jn=!0,Mr=e}};function Xl(e,n,s,a,f,v,_,B,U){Jn=!1,Mr=null,Ul.apply(Yl,arguments)}function Ql(e,n,s,a,f,v,_,B,U){if(Xl.apply(this,arguments),Jn){if(Jn){var te=Mr;Jn=!1,Mr=null}else throw Error(o(198));br||(br=!0,Eo=te)}}function Qt(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function _o(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function jo(e){if(Qt(e)!==e)throw Error(o(188))}function Gl(e){var n=e.alternate;if(!n){if(n=Qt(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var f=s.return;if(f===null)break;var v=f.alternate;if(v===null){if(a=f.return,a!==null){s=a;continue}break}if(f.child===v.child){for(v=f.child;v;){if(v===s)return jo(f),e;if(v===a)return jo(f),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=f,a=v;else{for(var _=!1,B=f.child;B;){if(B===s){_=!0,s=f,a=v;break}if(B===a){_=!0,a=f,s=v;break}B=B.sibling}if(!_){for(B=v.child;B;){if(B===s){_=!0,s=v,a=f;break}if(B===a){_=!0,a=v,s=f;break}B=B.sibling}if(!_)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Bs(e){return e=Gl(e),e!==null?Ws(e):null}function Ws(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Ws(e);if(n!==null)return n;e=e.sibling}return null}var Us=r.unstable_scheduleCallback,Ys=r.unstable_cancelCallback,Kl=r.unstable_shouldYield,Xs=r.unstable_requestPaint,He=r.unstable_now,ql=r.unstable_getCurrentPriorityLevel,Mo=r.unstable_ImmediatePriority,Qs=r.unstable_UserBlockingPriority,Pr=r.unstable_NormalPriority,Zl=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,er=null,jt=null;function Jl(e){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(er,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:na,ea=Math.log,ta=Math.LN2;function na(e){return e>>>=0,e===0?32:31-(ea(e)/ta|0)|0}var Dr=64,Tr=4194304;function Gt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Or(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,f=e.suspendedLanes,v=e.pingedLanes,_=s&268435455;if(_!==0){var B=_&~f;B!==0?a=Gt(B):(v&=_,v!==0&&(a=Gt(v)))}else _=s&~f,_!==0?a=Gt(_):v!==0&&(a=Gt(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&f)===0&&(f=a&-a,v=n&-n,f>=v||f===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-vt(n),f=1<<s,a|=e[s],n&=~f;return a}function Ks(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ra(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,v=e.pendingLanes;0<v;){var _=31-vt(v),B=1<<_,U=f[_];U===-1?((B&s)===0||(B&a)!==0)&&(f[_]=Ks(B,n)):U<=n&&(e.expiredLanes|=B),v&=~B}}function bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ar(){var e=Dr;return Dr<<=1,(Dr&4194240)===0&&(Dr=64),e}function Po(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function tr(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-vt(n),e[n]=s}function qs(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var f=31-vt(s),v=1<<f;n[f]=0,a[f]=-1,e[f]=-1,s&=~v}}function oa(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-vt(s),f=1<<a;f&n|e[a]&n&&(e[a]|=n),s&=~f}}var De=0;function Ac(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var $c,sa,Lc,zc,Rc,ia=!1,Zs=[],In=null,En=null,_n=null,Do=new Map,To=new Map,jn=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(e,n){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Do.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":To.delete(n.pointerId)}}function Oo(e,n,s,a,f,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[f]},n!==null&&(n=Qo(n),n!==null&&sa(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function Sg(e,n,s,a,f){switch(n){case"focusin":return In=Oo(In,e,n,s,a,f),!0;case"dragenter":return En=Oo(En,e,n,s,a,f),!0;case"mouseover":return _n=Oo(_n,e,n,s,a,f),!0;case"pointerover":var v=f.pointerId;return Do.set(v,Oo(Do.get(v)||null,e,n,s,a,f)),!0;case"gotpointercapture":return v=f.pointerId,To.set(v,Oo(To.get(v)||null,e,n,s,a,f)),!0}return!1}function Hc(e){var n=nr(e.target);if(n!==null){var s=Qt(n);if(s!==null){if(n=s.tag,n===13){if(n=_o(s),n!==null){e.blockedOn=n,Rc(e.priority,function(){Lc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Js(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=aa(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);So=a,s.target.dispatchEvent(a),So=null}else return n=Qo(s),n!==null&&sa(n),e.blockedOn=s,!1;n.shift()}return!0}function Vc(e,n,s){Js(e)&&s.delete(n)}function Ng(){ia=!1,In!==null&&Js(In)&&(In=null),En!==null&&Js(En)&&(En=null),_n!==null&&Js(_n)&&(_n=null),Do.forEach(Vc),To.forEach(Vc)}function Ao(e,n){e.blockedOn===n&&(e.blockedOn=null,ia||(ia=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ng)))}function $o(e){function n(f){return Ao(f,e)}if(0<Zs.length){Ao(Zs[0],e);for(var s=1;s<Zs.length;s++){var a=Zs[s];a.blockedOn===e&&(a.blockedOn=null)}}for(In!==null&&Ao(In,e),En!==null&&Ao(En,e),_n!==null&&Ao(_n,e),Do.forEach(n),To.forEach(n),s=0;s<jn.length;s++)a=jn[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<jn.length&&(s=jn[0],s.blockedOn===null);)Hc(s),s.blockedOn===null&&jn.shift()}var $r=P.ReactCurrentBatchConfig,ei=!0;function kg(e,n,s,a){var f=De,v=$r.transition;$r.transition=null;try{De=1,la(e,n,s,a)}finally{De=f,$r.transition=v}}function Cg(e,n,s,a){var f=De,v=$r.transition;$r.transition=null;try{De=4,la(e,n,s,a)}finally{De=f,$r.transition=v}}function la(e,n,s,a){if(ei){var f=aa(e,n,s,a);if(f===null)Ia(e,n,a,ti,s),Fc(e,a);else if(Sg(f,e,n,s,a))a.stopPropagation();else if(Fc(e,a),n&4&&-1<wg.indexOf(e)){for(;f!==null;){var v=Qo(f);if(v!==null&&$c(v),v=aa(e,n,s,a),v===null&&Ia(e,n,a,ti,s),v===f)break;f=v}f!==null&&a.stopPropagation()}else Ia(e,n,a,null,s)}}var ti=null;function aa(e,n,s,a){if(ti=null,e=No(a),e=nr(e),e!==null)if(n=Qt(e),n===null)e=null;else if(s=n.tag,s===13){if(e=_o(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ti=e,null}function Bc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case Mo:return 1;case Qs:return 4;case Pr:case Zl:return 16;case Gs:return 536870912;default:return 16}default:return 16}}var Mn=null,ua=null,ni=null;function Wc(){if(ni)return ni;var e,n=ua,s=n.length,a,f="value"in Mn?Mn.value:Mn.textContent,v=f.length;for(e=0;e<s&&n[e]===f[e];e++);var _=s-e;for(a=1;a<=_&&n[s-a]===f[v-a];a++);return ni=f.slice(e,1<a?1-a:void 0)}function ri(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function oi(){return!0}function Uc(){return!1}function wt(e){function n(s,a,f,v,_){this._reactName=s,this._targetInst=f,this.type=a,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(s=e[B],this[B]=s?s(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?oi:Uc,this.isPropagationStopped=Uc,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),n}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=wt(Lr),Lo=b({},Lr,{view:0,detail:0}),Ig=wt(Lo),da,fa,zo,si=b({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zo&&(zo&&e.type==="mousemove"?(da=e.screenX-zo.screenX,fa=e.screenY-zo.screenY):fa=da=0,zo=e),da)},movementY:function(e){return"movementY"in e?e.movementY:fa}}),Yc=wt(si),Eg=b({},si,{dataTransfer:0}),_g=wt(Eg),jg=b({},Lo,{relatedTarget:0}),pa=wt(jg),Mg=b({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),bg=wt(Mg),Pg=b({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dg=wt(Pg),Tg=b({},Lr,{data:0}),Xc=wt(Tg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$g={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=$g[e])?!!n[e]:!1}function ma(){return Lg}var zg=b({},Lo,{key:function(e){if(e.key){var n=Og[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ag[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rg=wt(zg),Fg=b({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qc=wt(Fg),Hg=b({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),Vg=wt(Hg),Bg=b({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wg=wt(Bg),Ug=b({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yg=wt(Ug),Xg=[9,13,27,32],ha=p&&"CompositionEvent"in window,Ro=null;p&&"documentMode"in document&&(Ro=document.documentMode);var Qg=p&&"TextEvent"in window&&!Ro,Gc=p&&(!ha||Ro&&8<Ro&&11>=Ro),Kc=" ",qc=!1;function Zc(e,n){switch(e){case"keyup":return Xg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function Gg(e,n){switch(e){case"compositionend":return Jc(n);case"keypress":return n.which!==32?null:(qc=!0,Kc);case"textInput":return e=n.data,e===Kc&&qc?null:e;default:return null}}function Kg(e,n){if(zr)return e==="compositionend"||!ha&&Zc(e,n)?(e=Wc(),ni=ua=Mn=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Gc&&n.locale!=="ko"?null:n.data;default:return null}}var qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!qg[e.type]:n==="textarea"}function td(e,n,s,a){zs(a),n=ci(n,"onChange"),0<n.length&&(s=new ca("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Fo=null,Ho=null;function Zg(e){vd(e,0)}function ii(e){var n=Br(e);if(Ce(n))return e}function Jg(e,n){if(e==="change")return n}var nd=!1;if(p){var ga;if(p){var xa="oninput"in document;if(!xa){var rd=document.createElement("div");rd.setAttribute("oninput","return;"),xa=typeof rd.oninput=="function"}ga=xa}else ga=!1;nd=ga&&(!document.documentMode||9<document.documentMode)}function od(){Fo&&(Fo.detachEvent("onpropertychange",sd),Ho=Fo=null)}function sd(e){if(e.propertyName==="value"&&ii(Ho)){var n=[];td(n,Ho,e,No(e)),Vs(Zg,n)}}function ex(e,n,s){e==="focusin"?(od(),Fo=n,Ho=s,Fo.attachEvent("onpropertychange",sd)):e==="focusout"&&od()}function tx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(Ho)}function nx(e,n){if(e==="click")return ii(n)}function rx(e,n){if(e==="input"||e==="change")return ii(n)}function ox(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var $t=typeof Object.is=="function"?Object.is:ox;function Vo(e,n){if($t(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var f=s[a];if(!y.call(n,f)||!$t(e[f],n[f]))return!1}return!0}function id(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ld(e,n){var s=id(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=id(s)}}function ad(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ad(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ud(){for(var e=window,n=we();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=we(e.document)}return n}function ya(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function sx(e){var n=ud(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&ad(s.ownerDocument.documentElement,s)){if(a!==null&&ya(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var f=s.textContent.length,v=Math.min(a.start,f);a=a.end===void 0?v:Math.min(a.end,f),!e.extend&&v>a&&(f=a,a=v,v=f),f=ld(s,v);var _=ld(s,a);f&&_&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(_.node,_.offset)):(n.setEnd(_.node,_.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ix=p&&"documentMode"in document&&11>=document.documentMode,Rr=null,va=null,Bo=null,wa=!1;function cd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;wa||Rr==null||Rr!==we(a)||(a=Rr,"selectionStart"in a&&ya(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Bo&&Vo(Bo,a)||(Bo=a,a=ci(va,"onSelect"),0<a.length&&(n=new ca("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Rr)))}function li(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Fr={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionend:li("Transition","TransitionEnd")},Sa={},dd={};p&&(dd=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function ai(e){if(Sa[e])return Sa[e];if(!Fr[e])return e;var n=Fr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in dd)return Sa[e]=n[s];return e}var fd=ai("animationend"),pd=ai("animationiteration"),md=ai("animationstart"),hd=ai("transitionend"),gd=new Map,xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(e,n){gd.set(e,n),u(n,[e])}for(var Na=0;Na<xd.length;Na++){var ka=xd[Na],lx=ka.toLowerCase(),ax=ka[0].toUpperCase()+ka.slice(1);bn(lx,"on"+ax)}bn(fd,"onAnimationEnd"),bn(pd,"onAnimationIteration"),bn(md,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(hd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function yd(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,Ql(a,n,void 0,e),e.currentTarget=null}function vd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],f=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var _=a.length-1;0<=_;_--){var B=a[_],U=B.instance,te=B.currentTarget;if(B=B.listener,U!==v&&f.isPropagationStopped())break e;yd(f,B,te),v=U}else for(_=0;_<a.length;_++){if(B=a[_],U=B.instance,te=B.currentTarget,B=B.listener,U!==v&&f.isPropagationStopped())break e;yd(f,B,te),v=U}}}if(br)throw e=Eo,br=!1,Eo=null,e}function $e(e,n){var s=n[Pa];s===void 0&&(s=n[Pa]=new Set);var a=e+"__bubble";s.has(a)||(wd(n,e,2,!1),s.add(a))}function Ca(e,n,s){var a=0;n&&(a|=4),wd(s,e,a,n)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Uo(e){if(!e[ui]){e[ui]=!0,i.forEach(function(s){s!=="selectionchange"&&(ux.has(s)||Ca(s,!1,e),Ca(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ui]||(n[ui]=!0,Ca("selectionchange",!1,n))}}function wd(e,n,s,a){switch(Bc(n)){case 1:var f=kg;break;case 4:f=Cg;break;default:f=la}s=f.bind(null,n,s,e),f=void 0,!Io||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function Ia(e,n,s,a,f){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var _=a.tag;if(_===3||_===4){var B=a.stateNode.containerInfo;if(B===f||B.nodeType===8&&B.parentNode===f)break;if(_===4)for(_=a.return;_!==null;){var U=_.tag;if((U===3||U===4)&&(U=_.stateNode.containerInfo,U===f||U.nodeType===8&&U.parentNode===f))return;_=_.return}for(;B!==null;){if(_=nr(B),_===null)return;if(U=_.tag,U===5||U===6){a=v=_;continue e}B=B.parentNode}}a=a.return}Vs(function(){var te=v,ie=No(s),le=[];e:{var se=gd.get(e);if(se!==void 0){var fe=ca,he=e;switch(e){case"keypress":if(ri(s)===0)break e;case"keydown":case"keyup":fe=Rg;break;case"focusin":he="focus",fe=pa;break;case"focusout":he="blur",fe=pa;break;case"beforeblur":case"afterblur":fe=pa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=_g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Vg;break;case fd:case pd:case md:fe=bg;break;case hd:fe=Wg;break;case"scroll":fe=Ig;break;case"wheel":fe=Yg;break;case"copy":case"cut":case"paste":fe=Dg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Qc}var ge=(n&4)!==0,Ye=!ge&&e==="scroll",J=ge?se!==null?se+"Capture":null:se;ge=[];for(var Y=te,ee;Y!==null;){ee=Y;var ce=ee.stateNode;if(ee.tag===5&&ce!==null&&(ee=ce,J!==null&&(ce=qn(Y,J),ce!=null&&ge.push(Yo(Y,ce,ee)))),Ye)break;Y=Y.return}0<ge.length&&(se=new fe(se,he,null,s,ie),le.push({event:se,listeners:ge}))}}if((n&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",se&&s!==So&&(he=s.relatedTarget||s.fromElement)&&(nr(he)||he[cn]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(he=s.relatedTarget||s.toElement,fe=te,he=he?nr(he):null,he!==null&&(Ye=Qt(he),he!==Ye||he.tag!==5&&he.tag!==6)&&(he=null)):(fe=null,he=te),fe!==he)){if(ge=Yc,ce="onMouseLeave",J="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Qc,ce="onPointerLeave",J="onPointerEnter",Y="pointer"),Ye=fe==null?se:Br(fe),ee=he==null?se:Br(he),se=new ge(ce,Y+"leave",fe,s,ie),se.target=Ye,se.relatedTarget=ee,ce=null,nr(ie)===te&&(ge=new ge(J,Y+"enter",he,s,ie),ge.target=ee,ge.relatedTarget=Ye,ce=ge),Ye=ce,fe&&he)t:{for(ge=fe,J=he,Y=0,ee=ge;ee;ee=Hr(ee))Y++;for(ee=0,ce=J;ce;ce=Hr(ce))ee++;for(;0<Y-ee;)ge=Hr(ge),Y--;for(;0<ee-Y;)J=Hr(J),ee--;for(;Y--;){if(ge===J||J!==null&&ge===J.alternate)break t;ge=Hr(ge),J=Hr(J)}ge=null}else ge=null;fe!==null&&Sd(le,se,fe,ge,!1),he!==null&&Ye!==null&&Sd(le,Ye,he,ge,!0)}}e:{if(se=te?Br(te):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var xe=Jg;else if(ed(se))if(nd)xe=rx;else{xe=tx;var Ne=ex}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(xe=nx);if(xe&&(xe=xe(e,te))){td(le,xe,s,ie);break e}Ne&&Ne(e,se,te),e==="focusout"&&(Ne=se._wrapperState)&&Ne.controlled&&se.type==="number"&&xt(se,"number",se.value)}switch(Ne=te?Br(te):window,e){case"focusin":(ed(Ne)||Ne.contentEditable==="true")&&(Rr=Ne,va=te,Bo=null);break;case"focusout":Bo=va=Rr=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,cd(le,s,ie);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":cd(le,s,ie)}var ke;if(ha)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else zr?Zc(e,s)&&(Ie="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ie="onCompositionStart");Ie&&(Gc&&s.locale!=="ko"&&(zr||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&zr&&(ke=Wc()):(Mn=ie,ua="value"in Mn?Mn.value:Mn.textContent,zr=!0)),Ne=ci(te,Ie),0<Ne.length&&(Ie=new Xc(Ie,e,null,s,ie),le.push({event:Ie,listeners:Ne}),ke?Ie.data=ke:(ke=Jc(s),ke!==null&&(Ie.data=ke)))),(ke=Qg?Gg(e,s):Kg(e,s))&&(te=ci(te,"onBeforeInput"),0<te.length&&(ie=new Xc("onBeforeInput","beforeinput",null,s,ie),le.push({event:ie,listeners:te}),ie.data=ke))}vd(le,n)})}function Yo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ci(e,n){for(var s=n+"Capture",a=[];e!==null;){var f=e,v=f.stateNode;f.tag===5&&v!==null&&(f=v,v=qn(e,s),v!=null&&a.unshift(Yo(e,v,f)),v=qn(e,n),v!=null&&a.push(Yo(e,v,f))),e=e.return}return a}function Hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sd(e,n,s,a,f){for(var v=n._reactName,_=[];s!==null&&s!==a;){var B=s,U=B.alternate,te=B.stateNode;if(U!==null&&U===a)break;B.tag===5&&te!==null&&(B=te,f?(U=qn(s,v),U!=null&&_.unshift(Yo(s,U,B))):f||(U=qn(s,v),U!=null&&_.push(Yo(s,U,B)))),s=s.return}_.length!==0&&e.push({event:n,listeners:_})}var cx=/\r\n?/g,dx=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(cx,`
`).replace(dx,"")}function di(e,n,s){if(n=Nd(n),Nd(e)!==n&&s)throw Error(o(425))}function fi(){}var Ea=null,_a=null;function ja(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ma=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,px=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(e){return kd.resolve(null).then(e).catch(mx)}:Ma;function mx(e){setTimeout(function(){throw e})}function ba(e,n){var s=n,a=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(a===0){e.removeChild(f),$o(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=f}while(s);$o(n)}function Pn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Cd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Vr,Xo="__reactProps$"+Vr,cn="__reactContainer$"+Vr,Pa="__reactEvents$"+Vr,hx="__reactListeners$"+Vr,gx="__reactHandles$"+Vr;function nr(e){var n=e[Kt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[cn]||s[Kt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Cd(e);e!==null;){if(s=e[Kt])return s;e=Cd(e)}return n}e=s,s=e.parentNode}return null}function Qo(e){return e=e[Kt]||e[cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function pi(e){return e[Xo]||null}var Da=[],Wr=-1;function Dn(e){return{current:e}}function Le(e){0>Wr||(e.current=Da[Wr],Da[Wr]=null,Wr--)}function Oe(e,n){Wr++,Da[Wr]=e.current,e.current=n}var Tn={},rt=Dn(Tn),ut=Dn(!1),rr=Tn;function Ur(e,n){var s=e.type.contextTypes;if(!s)return Tn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var f={},v;for(v in s)f[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=f),f}function ct(e){return e=e.childContextTypes,e!=null}function mi(){Le(ut),Le(rt)}function Id(e,n,s){if(rt.current!==Tn)throw Error(o(168));Oe(rt,n),Oe(ut,s)}function Ed(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var f in a)if(!(f in n))throw Error(o(108,ae(e)||"Unknown",f));return b({},s,a)}function hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tn,rr=rt.current,Oe(rt,e),Oe(ut,ut.current),!0}function _d(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=Ed(e,n,rr),a.__reactInternalMemoizedMergedChildContext=e,Le(ut),Le(rt),Oe(rt,e)):Le(ut),Oe(ut,s)}var dn=null,gi=!1,Ta=!1;function jd(e){dn===null?dn=[e]:dn.push(e)}function xx(e){gi=!0,jd(e)}function On(){if(!Ta&&dn!==null){Ta=!0;var e=0,n=De;try{var s=dn;for(De=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}dn=null,gi=!1}catch(f){throw dn!==null&&(dn=dn.slice(e+1)),Us(Mo,On),f}finally{De=n,Ta=!1}}return null}var Yr=[],Xr=0,xi=null,yi=0,Mt=[],bt=0,or=null,fn=1,pn="";function sr(e,n){Yr[Xr++]=yi,Yr[Xr++]=xi,xi=e,yi=n}function Md(e,n,s){Mt[bt++]=fn,Mt[bt++]=pn,Mt[bt++]=or,or=e;var a=fn;e=pn;var f=32-vt(a)-1;a&=~(1<<f),s+=1;var v=32-vt(n)+f;if(30<v){var _=f-f%5;v=(a&(1<<_)-1).toString(32),a>>=_,f-=_,fn=1<<32-vt(n)+f|s<<f|a,pn=v+e}else fn=1<<v|s<<f|a,pn=e}function Oa(e){e.return!==null&&(sr(e,1),Md(e,1,0))}function Aa(e){for(;e===xi;)xi=Yr[--Xr],Yr[Xr]=null,yi=Yr[--Xr],Yr[Xr]=null;for(;e===or;)or=Mt[--bt],Mt[bt]=null,pn=Mt[--bt],Mt[bt]=null,fn=Mt[--bt],Mt[bt]=null}var St=null,Nt=null,ze=!1,Lt=null;function bd(e,n){var s=Ot(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Pd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,St=e,Nt=Pn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,St=e,Nt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=or!==null?{id:fn,overflow:pn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Ot(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,St=e,Nt=null,!0):!1;default:return!1}}function $a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function La(e){if(ze){var n=Nt;if(n){var s=n;if(!Pd(e,n)){if($a(e))throw Error(o(418));n=Pn(s.nextSibling);var a=St;n&&Pd(e,n)?bd(a,s):(e.flags=e.flags&-4097|2,ze=!1,St=e)}}else{if($a(e))throw Error(o(418));e.flags=e.flags&-4097|2,ze=!1,St=e}}}function Dd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function vi(e){if(e!==St)return!1;if(!ze)return Dd(e),ze=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ja(e.type,e.memoizedProps)),n&&(n=Nt)){if($a(e))throw Td(),Error(o(418));for(;n;)bd(e,n),n=Pn(n.nextSibling)}if(Dd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Nt=Pn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Nt=null}}else Nt=St?Pn(e.stateNode.nextSibling):null;return!0}function Td(){for(var e=Nt;e;)e=Pn(e.nextSibling)}function Qr(){Nt=St=null,ze=!1}function za(e){Lt===null?Lt=[e]:Lt.push(e)}var yx=P.ReactCurrentBatchConfig;function Go(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var f=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(_){var B=f.refs;_===null?delete B[v]:B[v]=_},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function wi(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Od(e){var n=e._init;return n(e._payload)}function Ad(e){function n(J,Y){if(e){var ee=J.deletions;ee===null?(J.deletions=[Y],J.flags|=16):ee.push(Y)}}function s(J,Y){if(!e)return null;for(;Y!==null;)n(J,Y),Y=Y.sibling;return null}function a(J,Y){for(J=new Map;Y!==null;)Y.key!==null?J.set(Y.key,Y):J.set(Y.index,Y),Y=Y.sibling;return J}function f(J,Y){return J=Vn(J,Y),J.index=0,J.sibling=null,J}function v(J,Y,ee){return J.index=ee,e?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Y?(J.flags|=2,Y):ee):(J.flags|=2,Y)):(J.flags|=1048576,Y)}function _(J){return e&&J.alternate===null&&(J.flags|=2),J}function B(J,Y,ee,ce){return Y===null||Y.tag!==6?(Y=Mu(ee,J.mode,ce),Y.return=J,Y):(Y=f(Y,ee),Y.return=J,Y)}function U(J,Y,ee,ce){var xe=ee.type;return xe===W?ie(J,Y,ee.props.children,ce,ee.key):Y!==null&&(Y.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===z&&Od(xe)===Y.type)?(ce=f(Y,ee.props),ce.ref=Go(J,Y,ee),ce.return=J,ce):(ce=Wi(ee.type,ee.key,ee.props,null,J.mode,ce),ce.ref=Go(J,Y,ee),ce.return=J,ce)}function te(J,Y,ee,ce){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=bu(ee,J.mode,ce),Y.return=J,Y):(Y=f(Y,ee.children||[]),Y.return=J,Y)}function ie(J,Y,ee,ce,xe){return Y===null||Y.tag!==7?(Y=pr(ee,J.mode,ce,xe),Y.return=J,Y):(Y=f(Y,ee),Y.return=J,Y)}function le(J,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=Mu(""+Y,J.mode,ee),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return ee=Wi(Y.type,Y.key,Y.props,null,J.mode,ee),ee.ref=Go(J,null,Y),ee.return=J,ee;case V:return Y=bu(Y,J.mode,ee),Y.return=J,Y;case z:var ce=Y._init;return le(J,ce(Y._payload),ee)}if(yt(Y)||M(Y))return Y=pr(Y,J.mode,ee,null),Y.return=J,Y;wi(J,Y)}return null}function se(J,Y,ee,ce){var xe=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return xe!==null?null:B(J,Y,""+ee,ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case $:return ee.key===xe?U(J,Y,ee,ce):null;case V:return ee.key===xe?te(J,Y,ee,ce):null;case z:return xe=ee._init,se(J,Y,xe(ee._payload),ce)}if(yt(ee)||M(ee))return xe!==null?null:ie(J,Y,ee,ce,null);wi(J,ee)}return null}function fe(J,Y,ee,ce,xe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return J=J.get(ee)||null,B(Y,J,""+ce,xe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case $:return J=J.get(ce.key===null?ee:ce.key)||null,U(Y,J,ce,xe);case V:return J=J.get(ce.key===null?ee:ce.key)||null,te(Y,J,ce,xe);case z:var Ne=ce._init;return fe(J,Y,ee,Ne(ce._payload),xe)}if(yt(ce)||M(ce))return J=J.get(ee)||null,ie(Y,J,ce,xe,null);wi(Y,ce)}return null}function he(J,Y,ee,ce){for(var xe=null,Ne=null,ke=Y,Ie=Y=0,et=null;ke!==null&&Ie<ee.length;Ie++){ke.index>Ie?(et=ke,ke=null):et=ke.sibling;var Pe=se(J,ke,ee[Ie],ce);if(Pe===null){ke===null&&(ke=et);break}e&&ke&&Pe.alternate===null&&n(J,ke),Y=v(Pe,Y,Ie),Ne===null?xe=Pe:Ne.sibling=Pe,Ne=Pe,ke=et}if(Ie===ee.length)return s(J,ke),ze&&sr(J,Ie),xe;if(ke===null){for(;Ie<ee.length;Ie++)ke=le(J,ee[Ie],ce),ke!==null&&(Y=v(ke,Y,Ie),Ne===null?xe=ke:Ne.sibling=ke,Ne=ke);return ze&&sr(J,Ie),xe}for(ke=a(J,ke);Ie<ee.length;Ie++)et=fe(ke,J,Ie,ee[Ie],ce),et!==null&&(e&&et.alternate!==null&&ke.delete(et.key===null?Ie:et.key),Y=v(et,Y,Ie),Ne===null?xe=et:Ne.sibling=et,Ne=et);return e&&ke.forEach(function(Bn){return n(J,Bn)}),ze&&sr(J,Ie),xe}function ge(J,Y,ee,ce){var xe=M(ee);if(typeof xe!="function")throw Error(o(150));if(ee=xe.call(ee),ee==null)throw Error(o(151));for(var Ne=xe=null,ke=Y,Ie=Y=0,et=null,Pe=ee.next();ke!==null&&!Pe.done;Ie++,Pe=ee.next()){ke.index>Ie?(et=ke,ke=null):et=ke.sibling;var Bn=se(J,ke,Pe.value,ce);if(Bn===null){ke===null&&(ke=et);break}e&&ke&&Bn.alternate===null&&n(J,ke),Y=v(Bn,Y,Ie),Ne===null?xe=Bn:Ne.sibling=Bn,Ne=Bn,ke=et}if(Pe.done)return s(J,ke),ze&&sr(J,Ie),xe;if(ke===null){for(;!Pe.done;Ie++,Pe=ee.next())Pe=le(J,Pe.value,ce),Pe!==null&&(Y=v(Pe,Y,Ie),Ne===null?xe=Pe:Ne.sibling=Pe,Ne=Pe);return ze&&sr(J,Ie),xe}for(ke=a(J,ke);!Pe.done;Ie++,Pe=ee.next())Pe=fe(ke,J,Ie,Pe.value,ce),Pe!==null&&(e&&Pe.alternate!==null&&ke.delete(Pe.key===null?Ie:Pe.key),Y=v(Pe,Y,Ie),Ne===null?xe=Pe:Ne.sibling=Pe,Ne=Pe);return e&&ke.forEach(function(qx){return n(J,qx)}),ze&&sr(J,Ie),xe}function Ye(J,Y,ee,ce){if(typeof ee=="object"&&ee!==null&&ee.type===W&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case $:e:{for(var xe=ee.key,Ne=Y;Ne!==null;){if(Ne.key===xe){if(xe=ee.type,xe===W){if(Ne.tag===7){s(J,Ne.sibling),Y=f(Ne,ee.props.children),Y.return=J,J=Y;break e}}else if(Ne.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===z&&Od(xe)===Ne.type){s(J,Ne.sibling),Y=f(Ne,ee.props),Y.ref=Go(J,Ne,ee),Y.return=J,J=Y;break e}s(J,Ne);break}else n(J,Ne);Ne=Ne.sibling}ee.type===W?(Y=pr(ee.props.children,J.mode,ce,ee.key),Y.return=J,J=Y):(ce=Wi(ee.type,ee.key,ee.props,null,J.mode,ce),ce.ref=Go(J,Y,ee),ce.return=J,J=ce)}return _(J);case V:e:{for(Ne=ee.key;Y!==null;){if(Y.key===Ne)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){s(J,Y.sibling),Y=f(Y,ee.children||[]),Y.return=J,J=Y;break e}else{s(J,Y);break}else n(J,Y);Y=Y.sibling}Y=bu(ee,J.mode,ce),Y.return=J,J=Y}return _(J);case z:return Ne=ee._init,Ye(J,Y,Ne(ee._payload),ce)}if(yt(ee))return he(J,Y,ee,ce);if(M(ee))return ge(J,Y,ee,ce);wi(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Y!==null&&Y.tag===6?(s(J,Y.sibling),Y=f(Y,ee),Y.return=J,J=Y):(s(J,Y),Y=Mu(ee,J.mode,ce),Y.return=J,J=Y),_(J)):s(J,Y)}return Ye}var Gr=Ad(!0),$d=Ad(!1),Si=Dn(null),Ni=null,Kr=null,Ra=null;function Fa(){Ra=Kr=Ni=null}function Ha(e){var n=Si.current;Le(Si),e._currentValue=n}function Va(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function qr(e,n){Ni=e,Ra=Kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(dt=!0),e.firstContext=null)}function Pt(e){var n=e._currentValue;if(Ra!==e)if(e={context:e,memoizedValue:n,next:null},Kr===null){if(Ni===null)throw Error(o(308));Kr=e,Ni.dependencies={lanes:0,firstContext:e}}else Kr=Kr.next=e;return n}var ir=null;function Ba(e){ir===null?ir=[e]:ir.push(e)}function Ld(e,n,s,a){var f=n.interleaved;return f===null?(s.next=s,Ba(n)):(s.next=f.next,f.next=s),n.interleaved=s,mn(e,a)}function mn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var An=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function $n(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(be&2)!==0){var f=a.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),a.pending=n,mn(e,s)}return f=a.interleaved,f===null?(n.next=n,Ba(a)):(n.next=f.next,f.next=n),a.interleaved=n,mn(e,s)}function ki(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,oa(e,s)}}function Rd(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var f=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var _={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?f=v=_:v=v.next=_,s=s.next}while(s!==null);v===null?f=v=n:v=v.next=n}else f=v=n;s={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Ci(e,n,s,a){var f=e.updateQueue;An=!1;var v=f.firstBaseUpdate,_=f.lastBaseUpdate,B=f.shared.pending;if(B!==null){f.shared.pending=null;var U=B,te=U.next;U.next=null,_===null?v=te:_.next=te,_=U;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,B=ie.lastBaseUpdate,B!==_&&(B===null?ie.firstBaseUpdate=te:B.next=te,ie.lastBaseUpdate=U))}if(v!==null){var le=f.baseState;_=0,ie=te=U=null,B=v;do{var se=B.lane,fe=B.eventTime;if((a&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var he=e,ge=B;switch(se=n,fe=s,ge.tag){case 1:if(he=ge.payload,typeof he=="function"){le=he.call(fe,le,se);break e}le=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ge.payload,se=typeof he=="function"?he.call(fe,le,se):he,se==null)break e;le=b({},le,se);break e;case 2:An=!0}}B.callback!==null&&B.lane!==0&&(e.flags|=64,se=f.effects,se===null?f.effects=[B]:se.push(B))}else fe={eventTime:fe,lane:se,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ie===null?(te=ie=fe,U=le):ie=ie.next=fe,_|=se;if(B=B.next,B===null){if(B=f.shared.pending,B===null)break;se=B,B=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(ie===null&&(U=le),f.baseState=U,f.firstBaseUpdate=te,f.lastBaseUpdate=ie,n=f.shared.interleaved,n!==null){f=n;do _|=f.lane,f=f.next;while(f!==n)}else v===null&&(f.shared.lanes=0);ur|=_,e.lanes=_,e.memoizedState=le}}function Fd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],f=a.callback;if(f!==null){if(a.callback=null,a=s,typeof f!="function")throw Error(o(191,f));f.call(a)}}}var Ko={},qt=Dn(Ko),qo=Dn(Ko),Zo=Dn(Ko);function lr(e){if(e===Ko)throw Error(o(174));return e}function Ua(e,n){switch(Oe(Zo,n),Oe(qo,e),Oe(qt,Ko),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:an(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=an(n,e)}Le(qt),Oe(qt,n)}function Zr(){Le(qt),Le(qo),Le(Zo)}function Hd(e){lr(Zo.current);var n=lr(qt.current),s=an(n,e.type);n!==s&&(Oe(qo,e),Oe(qt,s))}function Ya(e){qo.current===e&&(Le(qt),Le(qo))}var Ve=Dn(0);function Ii(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xa=[];function Qa(){for(var e=0;e<Xa.length;e++)Xa[e]._workInProgressVersionPrimary=null;Xa.length=0}var Ei=P.ReactCurrentDispatcher,Ga=P.ReactCurrentBatchConfig,ar=0,Be=null,Ke=null,Ze=null,_i=!1,Jo=!1,es=0,vx=0;function ot(){throw Error(o(321))}function Ka(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!$t(e[s],n[s]))return!1;return!0}function qa(e,n,s,a,f,v){if(ar=v,Be=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ei.current=e===null||e.memoizedState===null?kx:Cx,e=s(a,f),Jo){v=0;do{if(Jo=!1,es=0,25<=v)throw Error(o(301));v+=1,Ze=Ke=null,n.updateQueue=null,Ei.current=Ix,e=s(a,f)}while(Jo)}if(Ei.current=bi,n=Ke!==null&&Ke.next!==null,ar=0,Ze=Ke=Be=null,_i=!1,n)throw Error(o(300));return e}function Za(){var e=es!==0;return es=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Be.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Dt(){if(Ke===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var n=Ze===null?Be.memoizedState:Ze.next;if(n!==null)Ze=n,Ke=e;else{if(e===null)throw Error(o(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Be.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function ts(e,n){return typeof n=="function"?n(e):n}function Ja(e){var n=Dt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Ke,f=a.baseQueue,v=s.pending;if(v!==null){if(f!==null){var _=f.next;f.next=v.next,v.next=_}a.baseQueue=f=v,s.pending=null}if(f!==null){v=f.next,a=a.baseState;var B=_=null,U=null,te=v;do{var ie=te.lane;if((ar&ie)===ie)U!==null&&(U=U.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),a=te.hasEagerState?te.eagerState:e(a,te.action);else{var le={lane:ie,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};U===null?(B=U=le,_=a):U=U.next=le,Be.lanes|=ie,ur|=ie}te=te.next}while(te!==null&&te!==v);U===null?_=a:U.next=B,$t(a,n.memoizedState)||(dt=!0),n.memoizedState=a,n.baseState=_,n.baseQueue=U,s.lastRenderedState=a}if(e=s.interleaved,e!==null){f=e;do v=f.lane,Be.lanes|=v,ur|=v,f=f.next;while(f!==e)}else f===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function eu(e){var n=Dt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,f=s.pending,v=n.memoizedState;if(f!==null){s.pending=null;var _=f=f.next;do v=e(v,_.action),_=_.next;while(_!==f);$t(v,n.memoizedState)||(dt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function Vd(){}function Bd(e,n){var s=Be,a=Dt(),f=n(),v=!$t(a.memoizedState,f);if(v&&(a.memoizedState=f,dt=!0),a=a.queue,tu(Yd.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||Ze!==null&&Ze.memoizedState.tag&1){if(s.flags|=2048,ns(9,Ud.bind(null,s,a,f,n),void 0,null),Je===null)throw Error(o(349));(ar&30)!==0||Wd(s,n,f)}return f}function Wd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Ud(e,n,s,a){n.value=s,n.getSnapshot=a,Xd(n)&&Qd(e)}function Yd(e,n,s){return s(function(){Xd(n)&&Qd(e)})}function Xd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!$t(e,s)}catch{return!0}}function Qd(e){var n=mn(e,1);n!==null&&Ht(n,e,1,-1)}function Gd(e){var n=Zt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e},n.queue=e,e=e.dispatch=Nx.bind(null,Be,e),[n.memoizedState,e]}function ns(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function Kd(){return Dt().memoizedState}function ji(e,n,s,a){var f=Zt();Be.flags|=e,f.memoizedState=ns(1|n,s,void 0,a===void 0?null:a)}function Mi(e,n,s,a){var f=Dt();a=a===void 0?null:a;var v=void 0;if(Ke!==null){var _=Ke.memoizedState;if(v=_.destroy,a!==null&&Ka(a,_.deps)){f.memoizedState=ns(n,s,v,a);return}}Be.flags|=e,f.memoizedState=ns(1|n,s,v,a)}function qd(e,n){return ji(8390656,8,e,n)}function tu(e,n){return Mi(2048,8,e,n)}function Zd(e,n){return Mi(4,2,e,n)}function Jd(e,n){return Mi(4,4,e,n)}function ef(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function tf(e,n,s){return s=s!=null?s.concat([e]):null,Mi(4,4,ef.bind(null,n,e),s)}function nu(){}function nf(e,n){var s=Dt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ka(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function rf(e,n){var s=Dt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ka(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function of(e,n,s){return(ar&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s):($t(s,n)||(s=Ar(),Be.lanes|=s,ur|=s,e.baseState=!0),n)}function wx(e,n){var s=De;De=s!==0&&4>s?s:4,e(!0);var a=Ga.transition;Ga.transition={};try{e(!1),n()}finally{De=s,Ga.transition=a}}function sf(){return Dt().memoizedState}function Sx(e,n,s){var a=Fn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},lf(e))af(n,s);else if(s=Ld(e,n,s,a),s!==null){var f=at();Ht(s,e,a,f),uf(s,n,a)}}function Nx(e,n,s){var a=Fn(e),f={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(lf(e))af(n,f);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var _=n.lastRenderedState,B=v(_,s);if(f.hasEagerState=!0,f.eagerState=B,$t(B,_)){var U=n.interleaved;U===null?(f.next=f,Ba(n)):(f.next=U.next,U.next=f),n.interleaved=f;return}}catch{}finally{}s=Ld(e,n,f,a),s!==null&&(f=at(),Ht(s,e,a,f),uf(s,n,a))}}function lf(e){var n=e.alternate;return e===Be||n!==null&&n===Be}function af(e,n){Jo=_i=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function uf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,oa(e,s)}}var bi={readContext:Pt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},kx={readContext:Pt,useCallback:function(e,n){return Zt().memoizedState=[e,n===void 0?null:n],e},useContext:Pt,useEffect:qd,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,ji(4194308,4,ef.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ji(4194308,4,e,n)},useInsertionEffect:function(e,n){return ji(4,2,e,n)},useMemo:function(e,n){var s=Zt();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=Zt();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Sx.bind(null,Be,e),[a.memoizedState,e]},useRef:function(e){var n=Zt();return e={current:e},n.memoizedState=e},useState:Gd,useDebugValue:nu,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Gd(!1),n=e[0];return e=wx.bind(null,e[1]),Zt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Be,f=Zt();if(ze){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Je===null)throw Error(o(349));(ar&30)!==0||Wd(a,n,s)}f.memoizedState=s;var v={value:s,getSnapshot:n};return f.queue=v,qd(Yd.bind(null,a,v,e),[e]),a.flags|=2048,ns(9,Ud.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=Zt(),n=Je.identifierPrefix;if(ze){var s=pn,a=fn;s=(a&~(1<<32-vt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=es++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=vx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Cx={readContext:Pt,useCallback:nf,useContext:Pt,useEffect:tu,useImperativeHandle:tf,useInsertionEffect:Zd,useLayoutEffect:Jd,useMemo:rf,useReducer:Ja,useRef:Kd,useState:function(){return Ja(ts)},useDebugValue:nu,useDeferredValue:function(e){var n=Dt();return of(n,Ke.memoizedState,e)},useTransition:function(){var e=Ja(ts)[0],n=Dt().memoizedState;return[e,n]},useMutableSource:Vd,useSyncExternalStore:Bd,useId:sf,unstable_isNewReconciler:!1},Ix={readContext:Pt,useCallback:nf,useContext:Pt,useEffect:tu,useImperativeHandle:tf,useInsertionEffect:Zd,useLayoutEffect:Jd,useMemo:rf,useReducer:eu,useRef:Kd,useState:function(){return eu(ts)},useDebugValue:nu,useDeferredValue:function(e){var n=Dt();return Ke===null?n.memoizedState=e:of(n,Ke.memoizedState,e)},useTransition:function(){var e=eu(ts)[0],n=Dt().memoizedState;return[e,n]},useMutableSource:Vd,useSyncExternalStore:Bd,useId:sf,unstable_isNewReconciler:!1};function zt(e,n){if(e&&e.defaultProps){n=b({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function ru(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:b({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Pi={isMounted:function(e){return(e=e._reactInternals)?Qt(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=at(),f=Fn(e),v=hn(a,f);v.payload=n,s!=null&&(v.callback=s),n=$n(e,v,f),n!==null&&(Ht(n,e,f,a),ki(n,e,f))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=at(),f=Fn(e),v=hn(a,f);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=$n(e,v,f),n!==null&&(Ht(n,e,f,a),ki(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=at(),a=Fn(e),f=hn(s,a);f.tag=2,n!=null&&(f.callback=n),n=$n(e,f,a),n!==null&&(Ht(n,e,a,s),ki(n,e,a))}};function cf(e,n,s,a,f,v,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,_):n.prototype&&n.prototype.isPureReactComponent?!Vo(s,a)||!Vo(f,v):!0}function df(e,n,s){var a=!1,f=Tn,v=n.contextType;return typeof v=="object"&&v!==null?v=Pt(v):(f=ct(n)?rr:rt.current,a=n.contextTypes,v=(a=a!=null)?Ur(e,f):Tn),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Pi,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=v),n}function ff(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&Pi.enqueueReplaceState(n,n.state,null)}function ou(e,n,s,a){var f=e.stateNode;f.props=s,f.state=e.memoizedState,f.refs={},Wa(e);var v=n.contextType;typeof v=="object"&&v!==null?f.context=Pt(v):(v=ct(n)?rr:rt.current,f.context=Ur(e,v)),f.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(ru(e,n,v,s),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&Pi.enqueueReplaceState(f,f.state,null),Ci(e,s,f,a),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Jr(e,n){try{var s="",a=n;do s+=ne(a),a=a.return;while(a);var f=s}catch(v){f=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:f,digest:null}}function su(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function iu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Ex=typeof WeakMap=="function"?WeakMap:Map;function pf(e,n,s){s=hn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){zi||(zi=!0,Su=a),iu(e,n)},s}function mf(e,n,s){s=hn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var f=n.value;s.payload=function(){return a(f)},s.callback=function(){iu(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){iu(e,n),typeof a!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})}),s}function hf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Ex;var f=new Set;a.set(n,f)}else f=a.get(n),f===void 0&&(f=new Set,a.set(n,f));f.has(s)||(f.add(s),e=Fx.bind(null,e,n,s),n.then(e,e))}function gf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function xf(e,n,s,a,f){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=hn(-1,1),n.tag=2,$n(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var _x=P.ReactCurrentOwner,dt=!1;function lt(e,n,s,a){n.child=e===null?$d(n,null,s,a):Gr(n,e.child,s,a)}function yf(e,n,s,a,f){s=s.render;var v=n.ref;return qr(n,f),a=qa(e,n,s,a,v,f),s=Za(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,gn(e,n,f)):(ze&&s&&Oa(n),n.flags|=1,lt(e,n,a,f),n.child)}function vf(e,n,s,a,f){if(e===null){var v=s.type;return typeof v=="function"&&!ju(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,wf(e,n,v,a,f)):(e=Wi(s.type,null,a,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&f)===0){var _=v.memoizedProps;if(s=s.compare,s=s!==null?s:Vo,s(_,a)&&e.ref===n.ref)return gn(e,n,f)}return n.flags|=1,e=Vn(v,a),e.ref=n.ref,e.return=n,n.child=e}function wf(e,n,s,a,f){if(e!==null){var v=e.memoizedProps;if(Vo(v,a)&&e.ref===n.ref)if(dt=!1,n.pendingProps=a=v,(e.lanes&f)!==0)(e.flags&131072)!==0&&(dt=!0);else return n.lanes=e.lanes,gn(e,n,f)}return lu(e,n,s,a,f)}function Sf(e,n,s){var a=n.pendingProps,f=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(to,kt),kt|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Oe(to,kt),kt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Oe(to,kt),kt|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Oe(to,kt),kt|=a;return lt(e,n,f,s),n.child}function Nf(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function lu(e,n,s,a,f){var v=ct(s)?rr:rt.current;return v=Ur(n,v),qr(n,f),s=qa(e,n,s,a,v,f),a=Za(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,gn(e,n,f)):(ze&&a&&Oa(n),n.flags|=1,lt(e,n,s,f),n.child)}function kf(e,n,s,a,f){if(ct(s)){var v=!0;hi(n)}else v=!1;if(qr(n,f),n.stateNode===null)Ti(e,n),df(n,s,a),ou(n,s,a,f),a=!0;else if(e===null){var _=n.stateNode,B=n.memoizedProps;_.props=B;var U=_.context,te=s.contextType;typeof te=="object"&&te!==null?te=Pt(te):(te=ct(s)?rr:rt.current,te=Ur(n,te));var ie=s.getDerivedStateFromProps,le=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function";le||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B!==a||U!==te)&&ff(n,_,a,te),An=!1;var se=n.memoizedState;_.state=se,Ci(n,a,_,f),U=n.memoizedState,B!==a||se!==U||ut.current||An?(typeof ie=="function"&&(ru(n,s,ie,a),U=n.memoizedState),(B=An||cf(n,s,B,a,se,U,te))?(le||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(n.flags|=4194308)):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=U),_.props=a,_.state=U,_.context=te,a=B):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{_=n.stateNode,zd(e,n),B=n.memoizedProps,te=n.type===n.elementType?B:zt(n.type,B),_.props=te,le=n.pendingProps,se=_.context,U=s.contextType,typeof U=="object"&&U!==null?U=Pt(U):(U=ct(s)?rr:rt.current,U=Ur(n,U));var fe=s.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B!==le||se!==U)&&ff(n,_,a,U),An=!1,se=n.memoizedState,_.state=se,Ci(n,a,_,f);var he=n.memoizedState;B!==le||se!==he||ut.current||An?(typeof fe=="function"&&(ru(n,s,fe,a),he=n.memoizedState),(te=An||cf(n,s,te,a,se,he,U)||!1)?(ie||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(a,he,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(a,he,U)),typeof _.componentDidUpdate=="function"&&(n.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof _.componentDidUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=he),_.props=a,_.state=he,_.context=U,a=te):(typeof _.componentDidUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),a=!1)}return au(e,n,s,a,v,f)}function au(e,n,s,a,f,v){Nf(e,n);var _=(n.flags&128)!==0;if(!a&&!_)return f&&_d(n,s,!1),gn(e,n,v);a=n.stateNode,_x.current=n;var B=_&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&_?(n.child=Gr(n,e.child,null,v),n.child=Gr(n,null,B,v)):lt(e,n,B,v),n.memoizedState=a.state,f&&_d(n,s,!0),n.child}function Cf(e){var n=e.stateNode;n.pendingContext?Id(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Id(e,n.context,!1),Ua(e,n.containerInfo)}function If(e,n,s,a,f){return Qr(),za(f),n.flags|=256,lt(e,n,s,a),n.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ef(e,n,s){var a=n.pendingProps,f=Ve.current,v=!1,_=(n.flags&128)!==0,B;if((B=_)||(B=e!==null&&e.memoizedState===null?!1:(f&2)!==0),B?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Oe(Ve,f&1),e===null)return La(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(_=a.children,e=a.fallback,v?(a=n.mode,v=n.child,_={mode:"hidden",children:_},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=_):v=Ui(_,a,0,null),e=pr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=cu(s),n.memoizedState=uu,e):du(n,_));if(f=e.memoizedState,f!==null&&(B=f.dehydrated,B!==null))return jx(e,n,_,a,B,f,s);if(v){v=a.fallback,_=n.mode,f=e.child,B=f.sibling;var U={mode:"hidden",children:a.children};return(_&1)===0&&n.child!==f?(a=n.child,a.childLanes=0,a.pendingProps=U,n.deletions=null):(a=Vn(f,U),a.subtreeFlags=f.subtreeFlags&14680064),B!==null?v=Vn(B,v):(v=pr(v,_,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,_=e.child.memoizedState,_=_===null?cu(s):{baseLanes:_.baseLanes|s,cachePool:null,transitions:_.transitions},v.memoizedState=_,v.childLanes=e.childLanes&~s,n.memoizedState=uu,a}return v=e.child,e=v.sibling,a=Vn(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function du(e,n){return n=Ui({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Di(e,n,s,a){return a!==null&&za(a),Gr(n,e.child,null,s),e=du(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function jx(e,n,s,a,f,v,_){if(s)return n.flags&256?(n.flags&=-257,a=su(Error(o(422))),Di(e,n,_,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,f=n.mode,a=Ui({mode:"visible",children:a.children},f,0,null),v=pr(v,f,_,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&Gr(n,e.child,null,_),n.child.memoizedState=cu(_),n.memoizedState=uu,v);if((n.mode&1)===0)return Di(e,n,_,null);if(f.data==="$!"){if(a=f.nextSibling&&f.nextSibling.dataset,a)var B=a.dgst;return a=B,v=Error(o(419)),a=su(v,a,void 0),Di(e,n,_,a)}if(B=(_&e.childLanes)!==0,dt||B){if(a=Je,a!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(a.suspendedLanes|_))!==0?0:f,f!==0&&f!==v.retryLane&&(v.retryLane=f,mn(e,f),Ht(a,e,f,-1))}return _u(),a=su(Error(o(421))),Di(e,n,_,a)}return f.data==="$?"?(n.flags|=128,n.child=e.child,n=Hx.bind(null,e),f._reactRetry=n,null):(e=v.treeContext,Nt=Pn(f.nextSibling),St=n,ze=!0,Lt=null,e!==null&&(Mt[bt++]=fn,Mt[bt++]=pn,Mt[bt++]=or,fn=e.id,pn=e.overflow,or=n),n=du(n,a.children),n.flags|=4096,n)}function _f(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Va(e.return,n,s)}function fu(e,n,s,a,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:f}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=f)}function jf(e,n,s){var a=n.pendingProps,f=a.revealOrder,v=a.tail;if(lt(e,n,a.children,s),a=Ve.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_f(e,s,n);else if(e.tag===19)_f(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Oe(Ve,a),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&Ii(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),fu(n,!1,f,s,v);break;case"backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Ii(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}fu(n,!0,s,null,v);break;case"together":fu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ti(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function gn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ur|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Vn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Vn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Mx(e,n,s){switch(n.tag){case 3:Cf(n),Qr();break;case 5:Hd(n);break;case 1:ct(n.type)&&hi(n);break;case 4:Ua(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,f=n.memoizedProps.value;Oe(Si,a._currentValue),a._currentValue=f;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Oe(Ve,Ve.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Ef(e,n,s):(Oe(Ve,Ve.current&1),e=gn(e,n,s),e!==null?e.sibling:null);Oe(Ve,Ve.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return jf(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Oe(Ve,Ve.current),a)break;return null;case 22:case 23:return n.lanes=0,Sf(e,n,s)}return gn(e,n,s)}var Mf,pu,bf,Pf;Mf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},pu=function(){},bf=function(e,n,s,a){var f=e.memoizedProps;if(f!==a){e=n.stateNode,lr(qt.current);var v=null;switch(s){case"input":f=_e(e,f),a=_e(e,a),v=[];break;case"select":f=b({},f,{value:void 0}),a=b({},a,{value:void 0}),v=[];break;case"textarea":f=sn(e,f),a=sn(e,a),v=[];break;default:typeof f.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=fi)}vo(s,a);var _;s=null;for(te in f)if(!a.hasOwnProperty(te)&&f.hasOwnProperty(te)&&f[te]!=null)if(te==="style"){var B=f[te];for(_ in B)B.hasOwnProperty(_)&&(s||(s={}),s[_]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(l.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in a){var U=a[te];if(B=f!=null?f[te]:void 0,a.hasOwnProperty(te)&&U!==B&&(U!=null||B!=null))if(te==="style")if(B){for(_ in B)!B.hasOwnProperty(_)||U&&U.hasOwnProperty(_)||(s||(s={}),s[_]="");for(_ in U)U.hasOwnProperty(_)&&B[_]!==U[_]&&(s||(s={}),s[_]=U[_])}else s||(v||(v=[]),v.push(te,s)),s=U;else te==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,B=B?B.__html:void 0,U!=null&&B!==U&&(v=v||[]).push(te,U)):te==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(te,""+U):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(l.hasOwnProperty(te)?(U!=null&&te==="onScroll"&&$e("scroll",e),v||B===U||(v=[])):(v=v||[]).push(te,U))}s&&(v=v||[]).push("style",s);var te=v;(n.updateQueue=te)&&(n.flags|=4)}},Pf=function(e,n,s,a){s!==a&&(n.flags|=4)};function rs(e,n){if(!ze)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags&14680064,a|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function bx(e,n,s){var a=n.pendingProps;switch(Aa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(n),null;case 1:return ct(n.type)&&mi(),st(n),null;case 3:return a=n.stateNode,Zr(),Le(ut),Le(rt),Qa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(vi(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Lt!==null&&(Cu(Lt),Lt=null))),pu(e,n),st(n),null;case 5:Ya(n);var f=lr(Zo.current);if(s=n.type,e!==null&&n.stateNode!=null)bf(e,n,s,a,f),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return st(n),null}if(e=lr(qt.current),vi(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[Kt]=n,a[Xo]=v,e=(n.mode&1)!==0,s){case"dialog":$e("cancel",a),$e("close",a);break;case"iframe":case"object":case"embed":$e("load",a);break;case"video":case"audio":for(f=0;f<Wo.length;f++)$e(Wo[f],a);break;case"source":$e("error",a);break;case"img":case"image":case"link":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"input":Te(a,v),$e("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},$e("invalid",a);break;case"textarea":Nn(a,v),$e("invalid",a)}vo(s,v),f=null;for(var _ in v)if(v.hasOwnProperty(_)){var B=v[_];_==="children"?typeof B=="string"?a.textContent!==B&&(v.suppressHydrationWarning!==!0&&di(a.textContent,B,e),f=["children",B]):typeof B=="number"&&a.textContent!==""+B&&(v.suppressHydrationWarning!==!0&&di(a.textContent,B,e),f=["children",""+B]):l.hasOwnProperty(_)&&B!=null&&_==="onScroll"&&$e("scroll",a)}switch(s){case"input":Se(a),At(a,v,!0);break;case"textarea":Se(a),Qn(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=fi)}a=f,n.updateQueue=a,a!==null&&(n.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ln(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=_.createElement(s,{is:a.is}):(e=_.createElement(s),s==="select"&&(_=e,a.multiple?_.multiple=!0:a.size&&(_.size=a.size))):e=_.createElementNS(e,s),e[Kt]=n,e[Xo]=a,Mf(e,n,!1,!1),n.stateNode=e;e:{switch(_=wo(s,a),s){case"dialog":$e("cancel",e),$e("close",e),f=a;break;case"iframe":case"object":case"embed":$e("load",e),f=a;break;case"video":case"audio":for(f=0;f<Wo.length;f++)$e(Wo[f],e);f=a;break;case"source":$e("error",e),f=a;break;case"img":case"image":case"link":$e("error",e),$e("load",e),f=a;break;case"details":$e("toggle",e),f=a;break;case"input":Te(e,a),f=_e(e,a),$e("invalid",e);break;case"option":f=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},f=b({},a,{value:void 0}),$e("invalid",e);break;case"textarea":Nn(e,a),f=sn(e,a),$e("invalid",e);break;default:f=a}vo(s,f),B=f;for(v in B)if(B.hasOwnProperty(v)){var U=B[v];v==="style"?$s(e,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Os(e,U)):v==="children"?typeof U=="string"?(s!=="textarea"||U!=="")&&un(e,U):typeof U=="number"&&un(e,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?U!=null&&v==="onScroll"&&$e("scroll",e):U!=null&&k(e,v,U,_))}switch(s){case"input":Se(e),At(e,a,!1);break;case"textarea":Se(e),Qn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+oe(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?_t(e,!!a.multiple,v,!1):a.defaultValue!=null&&_t(e,!!a.multiple,a.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=fi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return st(n),null;case 6:if(e&&n.stateNode!=null)Pf(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=lr(Zo.current),lr(qt.current),vi(n)){if(a=n.stateNode,s=n.memoizedProps,a[Kt]=n,(v=a.nodeValue!==s)&&(e=St,e!==null))switch(e.tag){case 3:di(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&di(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Kt]=n,n.stateNode=a}return st(n),null;case 13:if(Le(Ve),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Nt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Td(),Qr(),n.flags|=98560,v=!1;else if(v=vi(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Kt]=n}else Qr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;st(n),v=!1}else Lt!==null&&(Cu(Lt),Lt=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ve.current&1)!==0?qe===0&&(qe=3):_u())),n.updateQueue!==null&&(n.flags|=4),st(n),null);case 4:return Zr(),pu(e,n),e===null&&Uo(n.stateNode.containerInfo),st(n),null;case 10:return Ha(n.type._context),st(n),null;case 17:return ct(n.type)&&mi(),st(n),null;case 19:if(Le(Ve),v=n.memoizedState,v===null)return st(n),null;if(a=(n.flags&128)!==0,_=v.rendering,_===null)if(a)rs(v,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(_=Ii(e),_!==null){for(n.flags|=128,rs(v,!1),a=_.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,_=v.alternate,_===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=_.childLanes,v.lanes=_.lanes,v.child=_.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=_.memoizedProps,v.memoizedState=_.memoizedState,v.updateQueue=_.updateQueue,v.type=_.type,e=_.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Oe(Ve,Ve.current&1|2),n.child}e=e.sibling}v.tail!==null&&He()>no&&(n.flags|=128,a=!0,rs(v,!1),n.lanes=4194304)}else{if(!a)if(e=Ii(_),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),rs(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!ze)return st(n),null}else 2*He()-v.renderingStartTime>no&&s!==1073741824&&(n.flags|=128,a=!0,rs(v,!1),n.lanes=4194304);v.isBackwards?(_.sibling=n.child,n.child=_):(s=v.last,s!==null?s.sibling=_:n.child=_,v.last=_)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=He(),n.sibling=null,s=Ve.current,Oe(Ve,a?s&1|2:s&1),n):(st(n),null);case 22:case 23:return Eu(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(kt&1073741824)!==0&&(st(n),n.subtreeFlags&6&&(n.flags|=8192)):st(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Px(e,n){switch(Aa(n),n.tag){case 1:return ct(n.type)&&mi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Zr(),Le(ut),Le(rt),Qa(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Ya(n),null;case 13:if(Le(Ve),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Qr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Le(Ve),null;case 4:return Zr(),null;case 10:return Ha(n.type._context),null;case 22:case 23:return Eu(),null;case 24:return null;default:return null}}var Oi=!1,it=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,pe=null;function eo(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Ue(e,n,a)}else s.current=null}function mu(e,n,s){try{s()}catch(a){Ue(e,n,a)}}var Df=!1;function Tx(e,n){if(Ea=ei,e=ud(),ya(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var f=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var _=0,B=-1,U=-1,te=0,ie=0,le=e,se=null;t:for(;;){for(var fe;le!==s||f!==0&&le.nodeType!==3||(B=_+f),le!==v||a!==0&&le.nodeType!==3||(U=_+a),le.nodeType===3&&(_+=le.nodeValue.length),(fe=le.firstChild)!==null;)se=le,le=fe;for(;;){if(le===e)break t;if(se===s&&++te===f&&(B=_),se===v&&++ie===a&&(U=_),(fe=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=fe}s=B===-1||U===-1?null:{start:B,end:U}}else s=null}s=s||{start:0,end:0}}else s=null;for(_a={focusedElem:e,selectionRange:s},ei=!1,pe=n;pe!==null;)if(n=pe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pe=e;else for(;pe!==null;){n=pe;try{var he=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var ge=he.memoizedProps,Ye=he.memoizedState,J=n.stateNode,Y=J.getSnapshotBeforeUpdate(n.elementType===n.type?ge:zt(n.type,ge),Ye);J.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ce){Ue(n,n.return,ce)}if(e=n.sibling,e!==null){e.return=n.return,pe=e;break}pe=n.return}return he=Df,Df=!1,he}function os(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&e)===e){var v=f.destroy;f.destroy=void 0,v!==void 0&&mu(n,s,v)}f=f.next}while(f!==a)}}function Ai(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function hu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Tf(e){var n=e.alternate;n!==null&&(e.alternate=null,Tf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Kt],delete n[Xo],delete n[Pa],delete n[hx],delete n[gx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Of(e){return e.tag===5||e.tag===3||e.tag===4}function Af(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=fi));else if(a!==4&&(e=e.child,e!==null))for(gu(e,n,s),e=e.sibling;e!==null;)gu(e,n,s),e=e.sibling}function xu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(xu(e,n,s),e=e.sibling;e!==null;)xu(e,n,s),e=e.sibling}var tt=null,Rt=!1;function Ln(e,n,s){for(s=s.child;s!==null;)$f(e,n,s),s=s.sibling}function $f(e,n,s){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(er,s)}catch{}switch(s.tag){case 5:it||eo(s,n);case 6:var a=tt,f=Rt;tt=null,Ln(e,n,s),tt=a,Rt=f,tt!==null&&(Rt?(e=tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):tt.removeChild(s.stateNode));break;case 18:tt!==null&&(Rt?(e=tt,s=s.stateNode,e.nodeType===8?ba(e.parentNode,s):e.nodeType===1&&ba(e,s),$o(e)):ba(tt,s.stateNode));break;case 4:a=tt,f=Rt,tt=s.stateNode.containerInfo,Rt=!0,Ln(e,n,s),tt=a,Rt=f;break;case 0:case 11:case 14:case 15:if(!it&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){f=a=a.next;do{var v=f,_=v.destroy;v=v.tag,_!==void 0&&((v&2)!==0||(v&4)!==0)&&mu(s,n,_),f=f.next}while(f!==a)}Ln(e,n,s);break;case 1:if(!it&&(eo(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(B){Ue(s,n,B)}Ln(e,n,s);break;case 21:Ln(e,n,s);break;case 22:s.mode&1?(it=(a=it)||s.memoizedState!==null,Ln(e,n,s),it=a):Ln(e,n,s);break;default:Ln(e,n,s)}}function Lf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Dx),n.forEach(function(a){var f=Vx.bind(null,e,a);s.has(a)||(s.add(a),a.then(f,f))})}}function Ft(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var f=s[a];try{var v=e,_=n,B=_;e:for(;B!==null;){switch(B.tag){case 5:tt=B.stateNode,Rt=!1;break e;case 3:tt=B.stateNode.containerInfo,Rt=!0;break e;case 4:tt=B.stateNode.containerInfo,Rt=!0;break e}B=B.return}if(tt===null)throw Error(o(160));$f(v,_,f),tt=null,Rt=!1;var U=f.alternate;U!==null&&(U.return=null),f.return=null}catch(te){Ue(f,n,te)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)zf(n,e),n=n.sibling}function zf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(n,e),Jt(e),a&4){try{os(3,e,e.return),Ai(3,e)}catch(ge){Ue(e,e.return,ge)}try{os(5,e,e.return)}catch(ge){Ue(e,e.return,ge)}}break;case 1:Ft(n,e),Jt(e),a&512&&s!==null&&eo(s,s.return);break;case 5:if(Ft(n,e),Jt(e),a&512&&s!==null&&eo(s,s.return),e.flags&32){var f=e.stateNode;try{un(f,"")}catch(ge){Ue(e,e.return,ge)}}if(a&4&&(f=e.stateNode,f!=null)){var v=e.memoizedProps,_=s!==null?s.memoizedProps:v,B=e.type,U=e.updateQueue;if(e.updateQueue=null,U!==null)try{B==="input"&&v.type==="radio"&&v.name!=null&&je(f,v),wo(B,_);var te=wo(B,v);for(_=0;_<U.length;_+=2){var ie=U[_],le=U[_+1];ie==="style"?$s(f,le):ie==="dangerouslySetInnerHTML"?Os(f,le):ie==="children"?un(f,le):k(f,ie,le,te)}switch(B){case"input":Xe(f,v);break;case"textarea":jr(f,v);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?_t(f,!!v.multiple,fe,!1):se!==!!v.multiple&&(v.defaultValue!=null?_t(f,!!v.multiple,v.defaultValue,!0):_t(f,!!v.multiple,v.multiple?[]:"",!1))}f[Xo]=v}catch(ge){Ue(e,e.return,ge)}}break;case 6:if(Ft(n,e),Jt(e),a&4){if(e.stateNode===null)throw Error(o(162));f=e.stateNode,v=e.memoizedProps;try{f.nodeValue=v}catch(ge){Ue(e,e.return,ge)}}break;case 3:if(Ft(n,e),Jt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{$o(n.containerInfo)}catch(ge){Ue(e,e.return,ge)}break;case 4:Ft(n,e),Jt(e);break;case 13:Ft(n,e),Jt(e),f=e.child,f.flags&8192&&(v=f.memoizedState!==null,f.stateNode.isHidden=v,!v||f.alternate!==null&&f.alternate.memoizedState!==null||(wu=He())),a&4&&Lf(e);break;case 22:if(ie=s!==null&&s.memoizedState!==null,e.mode&1?(it=(te=it)||ie,Ft(n,e),it=te):Ft(n,e),Jt(e),a&8192){if(te=e.memoizedState!==null,(e.stateNode.isHidden=te)&&!ie&&(e.mode&1)!==0)for(pe=e,ie=e.child;ie!==null;){for(le=pe=ie;pe!==null;){switch(se=pe,fe=se.child,se.tag){case 0:case 11:case 14:case 15:os(4,se,se.return);break;case 1:eo(se,se.return);var he=se.stateNode;if(typeof he.componentWillUnmount=="function"){a=se,s=se.return;try{n=a,he.props=n.memoizedProps,he.state=n.memoizedState,he.componentWillUnmount()}catch(ge){Ue(a,s,ge)}}break;case 5:eo(se,se.return);break;case 22:if(se.memoizedState!==null){Hf(le);continue}}fe!==null?(fe.return=se,pe=fe):Hf(le)}ie=ie.sibling}e:for(ie=null,le=e;;){if(le.tag===5){if(ie===null){ie=le;try{f=le.stateNode,te?(v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(B=le.stateNode,U=le.memoizedProps.style,_=U!=null&&U.hasOwnProperty("display")?U.display:null,B.style.display=As("display",_))}catch(ge){Ue(e,e.return,ge)}}}else if(le.tag===6){if(ie===null)try{le.stateNode.nodeValue=te?"":le.memoizedProps}catch(ge){Ue(e,e.return,ge)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;ie===le&&(ie=null),le=le.return}ie===le&&(ie=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Ft(n,e),Jt(e),a&4&&Lf(e);break;case 21:break;default:Ft(n,e),Jt(e)}}function Jt(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Of(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var f=a.stateNode;a.flags&32&&(un(f,""),a.flags&=-33);var v=Af(e);xu(e,v,f);break;case 3:case 4:var _=a.stateNode.containerInfo,B=Af(e);gu(e,B,_);break;default:throw Error(o(161))}}catch(U){Ue(e,e.return,U)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ox(e,n,s){pe=e,Rf(e)}function Rf(e,n,s){for(var a=(e.mode&1)!==0;pe!==null;){var f=pe,v=f.child;if(f.tag===22&&a){var _=f.memoizedState!==null||Oi;if(!_){var B=f.alternate,U=B!==null&&B.memoizedState!==null||it;B=Oi;var te=it;if(Oi=_,(it=U)&&!te)for(pe=f;pe!==null;)_=pe,U=_.child,_.tag===22&&_.memoizedState!==null?Vf(f):U!==null?(U.return=_,pe=U):Vf(f);for(;v!==null;)pe=v,Rf(v),v=v.sibling;pe=f,Oi=B,it=te}Ff(e)}else(f.subtreeFlags&8772)!==0&&v!==null?(v.return=f,pe=v):Ff(e)}}function Ff(e){for(;pe!==null;){var n=pe;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:it||Ai(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!it)if(s===null)a.componentDidMount();else{var f=n.elementType===n.type?s.memoizedProps:zt(n.type,s.memoizedProps);a.componentDidUpdate(f,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Fd(n,v,a);break;case 3:var _=n.updateQueue;if(_!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Fd(n,_,s)}break;case 5:var B=n.stateNode;if(s===null&&n.flags&4){s=B;var U=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&s.focus();break;case"img":U.src&&(s.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var te=n.alternate;if(te!==null){var ie=te.memoizedState;if(ie!==null){var le=ie.dehydrated;le!==null&&$o(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}it||n.flags&512&&hu(n)}catch(se){Ue(n,n.return,se)}}if(n===e){pe=null;break}if(s=n.sibling,s!==null){s.return=n.return,pe=s;break}pe=n.return}}function Hf(e){for(;pe!==null;){var n=pe;if(n===e){pe=null;break}var s=n.sibling;if(s!==null){s.return=n.return,pe=s;break}pe=n.return}}function Vf(e){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Ai(4,n)}catch(U){Ue(n,s,U)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var f=n.return;try{a.componentDidMount()}catch(U){Ue(n,f,U)}}var v=n.return;try{hu(n)}catch(U){Ue(n,v,U)}break;case 5:var _=n.return;try{hu(n)}catch(U){Ue(n,_,U)}}}catch(U){Ue(n,n.return,U)}if(n===e){pe=null;break}var B=n.sibling;if(B!==null){B.return=n.return,pe=B;break}pe=n.return}}var Ax=Math.ceil,$i=P.ReactCurrentDispatcher,yu=P.ReactCurrentOwner,Tt=P.ReactCurrentBatchConfig,be=0,Je=null,Qe=null,nt=0,kt=0,to=Dn(0),qe=0,ss=null,ur=0,Li=0,vu=0,is=null,ft=null,wu=0,no=1/0,xn=null,zi=!1,Su=null,zn=null,Ri=!1,Rn=null,Fi=0,ls=0,Nu=null,Hi=-1,Vi=0;function at(){return(be&6)!==0?He():Hi!==-1?Hi:Hi=He()}function Fn(e){return(e.mode&1)===0?1:(be&2)!==0&&nt!==0?nt&-nt:yx.transition!==null?(Vi===0&&(Vi=Ar()),Vi):(e=De,e!==0||(e=window.event,e=e===void 0?16:Bc(e.type)),e)}function Ht(e,n,s,a){if(50<ls)throw ls=0,Nu=null,Error(o(185));tr(e,s,a),((be&2)===0||e!==Je)&&(e===Je&&((be&2)===0&&(Li|=s),qe===4&&Hn(e,nt)),pt(e,a),s===1&&be===0&&(n.mode&1)===0&&(no=He()+500,gi&&On()))}function pt(e,n){var s=e.callbackNode;ra(e,n);var a=Or(e,e===Je?nt:0);if(a===0)s!==null&&Ys(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Ys(s),n===1)e.tag===0?xx(Wf.bind(null,e)):jd(Wf.bind(null,e)),px(function(){(be&6)===0&&On()}),s=null;else{switch(Ac(a)){case 1:s=Mo;break;case 4:s=Qs;break;case 16:s=Pr;break;case 536870912:s=Gs;break;default:s=Pr}s=Zf(s,Bf.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Bf(e,n){if(Hi=-1,Vi=0,(be&6)!==0)throw Error(o(327));var s=e.callbackNode;if(ro()&&e.callbackNode!==s)return null;var a=Or(e,e===Je?nt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=Bi(e,a);else{n=a;var f=be;be|=2;var v=Yf();(Je!==e||nt!==n)&&(xn=null,no=He()+500,dr(e,n));do try{zx();break}catch(B){Uf(e,B)}while(!0);Fa(),$i.current=v,be=f,Qe!==null?n=0:(Je=null,nt=0,n=qe)}if(n!==0){if(n===2&&(f=bo(e),f!==0&&(a=f,n=ku(e,f))),n===1)throw s=ss,dr(e,0),Hn(e,a),pt(e,He()),s;if(n===6)Hn(e,a);else{if(f=e.current.alternate,(a&30)===0&&!$x(f)&&(n=Bi(e,a),n===2&&(v=bo(e),v!==0&&(a=v,n=ku(e,v))),n===1))throw s=ss,dr(e,0),Hn(e,a),pt(e,He()),s;switch(e.finishedWork=f,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:fr(e,ft,xn);break;case 3:if(Hn(e,a),(a&130023424)===a&&(n=wu+500-He(),10<n)){if(Or(e,0)!==0)break;if(f=e.suspendedLanes,(f&a)!==a){at(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=Ma(fr.bind(null,e,ft,xn),n);break}fr(e,ft,xn);break;case 4:if(Hn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,f=-1;0<a;){var _=31-vt(a);v=1<<_,_=n[_],_>f&&(f=_),a&=~v}if(a=f,a=He()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ax(a/1960))-a,10<a){e.timeoutHandle=Ma(fr.bind(null,e,ft,xn),a);break}fr(e,ft,xn);break;case 5:fr(e,ft,xn);break;default:throw Error(o(329))}}}return pt(e,He()),e.callbackNode===s?Bf.bind(null,e):null}function ku(e,n){var s=is;return e.current.memoizedState.isDehydrated&&(dr(e,n).flags|=256),e=Bi(e,n),e!==2&&(n=ft,ft=s,n!==null&&Cu(n)),e}function Cu(e){ft===null?ft=e:ft.push.apply(ft,e)}function $x(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var f=s[a],v=f.getSnapshot;f=f.value;try{if(!$t(v(),f))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Hn(e,n){for(n&=~vu,n&=~Li,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-vt(n),a=1<<s;e[s]=-1,n&=~a}}function Wf(e){if((be&6)!==0)throw Error(o(327));ro();var n=Or(e,0);if((n&1)===0)return pt(e,He()),null;var s=Bi(e,n);if(e.tag!==0&&s===2){var a=bo(e);a!==0&&(n=a,s=ku(e,a))}if(s===1)throw s=ss,dr(e,0),Hn(e,n),pt(e,He()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,fr(e,ft,xn),pt(e,He()),null}function Iu(e,n){var s=be;be|=1;try{return e(n)}finally{be=s,be===0&&(no=He()+500,gi&&On())}}function cr(e){Rn!==null&&Rn.tag===0&&(be&6)===0&&ro();var n=be;be|=1;var s=Tt.transition,a=De;try{if(Tt.transition=null,De=1,e)return e()}finally{De=a,Tt.transition=s,be=n,(be&6)===0&&On()}}function Eu(){kt=to.current,Le(to)}function dr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,fx(s)),Qe!==null)for(s=Qe.return;s!==null;){var a=s;switch(Aa(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&mi();break;case 3:Zr(),Le(ut),Le(rt),Qa();break;case 5:Ya(a);break;case 4:Zr();break;case 13:Le(Ve);break;case 19:Le(Ve);break;case 10:Ha(a.type._context);break;case 22:case 23:Eu()}s=s.return}if(Je=e,Qe=e=Vn(e.current,null),nt=kt=n,qe=0,ss=null,vu=Li=ur=0,ft=is=null,ir!==null){for(n=0;n<ir.length;n++)if(s=ir[n],a=s.interleaved,a!==null){s.interleaved=null;var f=a.next,v=s.pending;if(v!==null){var _=v.next;v.next=f,a.next=_}s.pending=a}ir=null}return e}function Uf(e,n){do{var s=Qe;try{if(Fa(),Ei.current=bi,_i){for(var a=Be.memoizedState;a!==null;){var f=a.queue;f!==null&&(f.pending=null),a=a.next}_i=!1}if(ar=0,Ze=Ke=Be=null,Jo=!1,es=0,yu.current=null,s===null||s.return===null){qe=1,ss=n,Qe=null;break}e:{var v=e,_=s.return,B=s,U=n;if(n=nt,B.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var te=U,ie=B,le=ie.tag;if((ie.mode&1)===0&&(le===0||le===11||le===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=gf(_);if(fe!==null){fe.flags&=-257,xf(fe,_,B,v,n),fe.mode&1&&hf(v,te,n),n=fe,U=te;var he=n.updateQueue;if(he===null){var ge=new Set;ge.add(U),n.updateQueue=ge}else he.add(U);break e}else{if((n&1)===0){hf(v,te,n),_u();break e}U=Error(o(426))}}else if(ze&&B.mode&1){var Ye=gf(_);if(Ye!==null){(Ye.flags&65536)===0&&(Ye.flags|=256),xf(Ye,_,B,v,n),za(Jr(U,B));break e}}v=U=Jr(U,B),qe!==4&&(qe=2),is===null?is=[v]:is.push(v),v=_;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var J=pf(v,U,n);Rd(v,J);break e;case 1:B=U;var Y=v.type,ee=v.stateNode;if((v.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(zn===null||!zn.has(ee)))){v.flags|=65536,n&=-n,v.lanes|=n;var ce=mf(v,B,n);Rd(v,ce);break e}}v=v.return}while(v!==null)}Qf(s)}catch(xe){n=xe,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(!0)}function Yf(){var e=$i.current;return $i.current=bi,e===null?bi:e}function _u(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||(ur&268435455)===0&&(Li&268435455)===0||Hn(Je,nt)}function Bi(e,n){var s=be;be|=2;var a=Yf();(Je!==e||nt!==n)&&(xn=null,dr(e,n));do try{Lx();break}catch(f){Uf(e,f)}while(!0);if(Fa(),be=s,$i.current=a,Qe!==null)throw Error(o(261));return Je=null,nt=0,qe}function Lx(){for(;Qe!==null;)Xf(Qe)}function zx(){for(;Qe!==null&&!Kl();)Xf(Qe)}function Xf(e){var n=qf(e.alternate,e,kt);e.memoizedProps=e.pendingProps,n===null?Qf(e):Qe=n,yu.current=null}function Qf(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=bx(s,n,kt),s!==null){Qe=s;return}}else{if(s=Px(s,n),s!==null){s.flags&=32767,Qe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Qe=null;return}}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);qe===0&&(qe=5)}function fr(e,n,s){var a=De,f=Tt.transition;try{Tt.transition=null,De=1,Rx(e,n,s,a)}finally{Tt.transition=f,De=a}return null}function Rx(e,n,s,a){do ro();while(Rn!==null);if((be&6)!==0)throw Error(o(327));s=e.finishedWork;var f=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(qs(e,v),e===Je&&(Qe=Je=null,nt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ri||(Ri=!0,Zf(Pr,function(){return ro(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Tt.transition,Tt.transition=null;var _=De;De=1;var B=be;be|=4,yu.current=null,Tx(e,s),zf(s,e),sx(_a),ei=!!Ea,_a=Ea=null,e.current=s,Ox(s),Xs(),be=B,De=_,Tt.transition=v}else e.current=s;if(Ri&&(Ri=!1,Rn=e,Fi=f),v=e.pendingLanes,v===0&&(zn=null),Jl(s.stateNode),pt(e,He()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)f=n[s],a(f.value,{componentStack:f.stack,digest:f.digest});if(zi)throw zi=!1,e=Su,Su=null,e;return(Fi&1)!==0&&e.tag!==0&&ro(),v=e.pendingLanes,(v&1)!==0?e===Nu?ls++:(ls=0,Nu=e):ls=0,On(),null}function ro(){if(Rn!==null){var e=Ac(Fi),n=Tt.transition,s=De;try{if(Tt.transition=null,De=16>e?16:e,Rn===null)var a=!1;else{if(e=Rn,Rn=null,Fi=0,(be&6)!==0)throw Error(o(331));var f=be;for(be|=4,pe=e.current;pe!==null;){var v=pe,_=v.child;if((pe.flags&16)!==0){var B=v.deletions;if(B!==null){for(var U=0;U<B.length;U++){var te=B[U];for(pe=te;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:os(8,ie,v)}var le=ie.child;if(le!==null)le.return=ie,pe=le;else for(;pe!==null;){ie=pe;var se=ie.sibling,fe=ie.return;if(Tf(ie),ie===te){pe=null;break}if(se!==null){se.return=fe,pe=se;break}pe=fe}}}var he=v.alternate;if(he!==null){var ge=he.child;if(ge!==null){he.child=null;do{var Ye=ge.sibling;ge.sibling=null,ge=Ye}while(ge!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&_!==null)_.return=v,pe=_;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:os(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,pe=J;break e}pe=v.return}}var Y=e.current;for(pe=Y;pe!==null;){_=pe;var ee=_.child;if((_.subtreeFlags&2064)!==0&&ee!==null)ee.return=_,pe=ee;else e:for(_=Y;pe!==null;){if(B=pe,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Ai(9,B)}}catch(xe){Ue(B,B.return,xe)}if(B===_){pe=null;break e}var ce=B.sibling;if(ce!==null){ce.return=B.return,pe=ce;break e}pe=B.return}}if(be=f,On(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(er,e)}catch{}a=!0}return a}finally{De=s,Tt.transition=n}}return!1}function Gf(e,n,s){n=Jr(s,n),n=pf(e,n,1),e=$n(e,n,1),n=at(),e!==null&&(tr(e,1,n),pt(e,n))}function Ue(e,n,s){if(e.tag===3)Gf(e,e,s);else for(;n!==null;){if(n.tag===3){Gf(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(zn===null||!zn.has(a))){e=Jr(s,e),e=mf(n,e,1),n=$n(n,e,1),e=at(),n!==null&&(tr(n,1,e),pt(n,e));break}}n=n.return}}function Fx(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=at(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(nt&s)===s&&(qe===4||qe===3&&(nt&130023424)===nt&&500>He()-wu?dr(e,0):vu|=s),pt(e,n)}function Kf(e,n){n===0&&((e.mode&1)===0?n=1:(n=Tr,Tr<<=1,(Tr&130023424)===0&&(Tr=4194304)));var s=at();e=mn(e,n),e!==null&&(tr(e,n,s),pt(e,s))}function Hx(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Kf(e,s)}function Vx(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),Kf(e,s)}var qf;qf=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ut.current)dt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return dt=!1,Mx(e,n,s);dt=(e.flags&131072)!==0}else dt=!1,ze&&(n.flags&1048576)!==0&&Md(n,yi,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Ti(e,n),e=n.pendingProps;var f=Ur(n,rt.current);qr(n,s),f=qa(null,n,a,e,f,s);var v=Za();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(a)?(v=!0,hi(n)):v=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Wa(n),f.updater=Pi,n.stateNode=f,f._reactInternals=n,ou(n,a,e,s),n=au(null,n,a,!0,v,s)):(n.tag=0,ze&&v&&Oa(n),lt(null,n,f,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Ti(e,n),e=n.pendingProps,f=a._init,a=f(a._payload),n.type=a,f=n.tag=Wx(a),e=zt(a,e),f){case 0:n=lu(null,n,a,e,s);break e;case 1:n=kf(null,n,a,e,s);break e;case 11:n=yf(null,n,a,e,s);break e;case 14:n=vf(null,n,a,zt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),lu(e,n,a,f,s);case 1:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),kf(e,n,a,f,s);case 3:e:{if(Cf(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,f=v.element,zd(e,n),Ci(n,a,null,s);var _=n.memoizedState;if(a=_.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){f=Jr(Error(o(423)),n),n=If(e,n,a,s,f);break e}else if(a!==f){f=Jr(Error(o(424)),n),n=If(e,n,a,s,f);break e}else for(Nt=Pn(n.stateNode.containerInfo.firstChild),St=n,ze=!0,Lt=null,s=$d(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Qr(),a===f){n=gn(e,n,s);break e}lt(e,n,a,s)}n=n.child}return n;case 5:return Hd(n),e===null&&La(n),a=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,_=f.children,ja(a,f)?_=null:v!==null&&ja(a,v)&&(n.flags|=32),Nf(e,n),lt(e,n,_,s),n.child;case 6:return e===null&&La(n),null;case 13:return Ef(e,n,s);case 4:return Ua(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Gr(n,null,a,s):lt(e,n,a,s),n.child;case 11:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),yf(e,n,a,f,s);case 7:return lt(e,n,n.pendingProps,s),n.child;case 8:return lt(e,n,n.pendingProps.children,s),n.child;case 12:return lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,f=n.pendingProps,v=n.memoizedProps,_=f.value,Oe(Si,a._currentValue),a._currentValue=_,v!==null)if($t(v.value,_)){if(v.children===f.children&&!ut.current){n=gn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var B=v.dependencies;if(B!==null){_=v.child;for(var U=B.firstContext;U!==null;){if(U.context===a){if(v.tag===1){U=hn(-1,s&-s),U.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var ie=te.pending;ie===null?U.next=U:(U.next=ie.next,ie.next=U),te.pending=U}}v.lanes|=s,U=v.alternate,U!==null&&(U.lanes|=s),Va(v.return,s,n),B.lanes|=s;break}U=U.next}}else if(v.tag===10)_=v.type===n.type?null:v.child;else if(v.tag===18){if(_=v.return,_===null)throw Error(o(341));_.lanes|=s,B=_.alternate,B!==null&&(B.lanes|=s),Va(_,s,n),_=v.sibling}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===n){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}lt(e,n,f.children,s),n=n.child}return n;case 9:return f=n.type,a=n.pendingProps.children,qr(n,s),f=Pt(f),a=a(f),n.flags|=1,lt(e,n,a,s),n.child;case 14:return a=n.type,f=zt(a,n.pendingProps),f=zt(a.type,f),vf(e,n,a,f,s);case 15:return wf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:zt(a,f),Ti(e,n),n.tag=1,ct(a)?(e=!0,hi(n)):e=!1,qr(n,s),df(n,a,f),ou(n,a,f,s),au(null,n,a,!0,e,s);case 19:return jf(e,n,s);case 22:return Sf(e,n,s)}throw Error(o(156,n.tag))};function Zf(e,n){return Us(e,n)}function Bx(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,n,s,a){return new Bx(e,n,s,a)}function ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wx(e){if(typeof e=="function")return ju(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X)return 11;if(e===R)return 14}return 2}function Vn(e,n){var s=e.alternate;return s===null?(s=Ot(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Wi(e,n,s,a,f,v){var _=2;if(a=e,typeof e=="function")ju(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case W:return pr(s.children,f,v,n);case K:_=8,f|=8;break;case q:return e=Ot(12,s,n,f|2),e.elementType=q,e.lanes=v,e;case Q:return e=Ot(13,s,n,f),e.elementType=Q,e.lanes=v,e;case A:return e=Ot(19,s,n,f),e.elementType=A,e.lanes=v,e;case j:return Ui(s,f,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:_=10;break e;case L:_=9;break e;case X:_=11;break e;case R:_=14;break e;case z:_=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Ot(_,s,n,f),n.elementType=e,n.type=a,n.lanes=v,n}function pr(e,n,s,a){return e=Ot(7,e,a,n),e.lanes=s,e}function Ui(e,n,s,a){return e=Ot(22,e,a,n),e.elementType=j,e.lanes=s,e.stateNode={isHidden:!1},e}function Mu(e,n,s){return e=Ot(6,e,null,n),e.lanes=s,e}function bu(e,n,s){return n=Ot(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Ux(e,n,s,a,f){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Po(0),this.expirationTimes=Po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Po(0),this.identifierPrefix=a,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Pu(e,n,s,a,f,v,_,B,U){return e=new Ux(e,n,s,B,U),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Ot(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(v),e}function Yx(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function Jf(e){if(!e)return Tn;e=e._reactInternals;e:{if(Qt(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(ct(s))return Ed(e,s,n)}return n}function ep(e,n,s,a,f,v,_,B,U){return e=Pu(s,a,!0,e,f,v,_,B,U),e.context=Jf(null),s=e.current,a=at(),f=Fn(s),v=hn(a,f),v.callback=n??null,$n(s,v,f),e.current.lanes=f,tr(e,f,a),pt(e,a),e}function Yi(e,n,s,a){var f=n.current,v=at(),_=Fn(f);return s=Jf(s),n.context===null?n.context=s:n.pendingContext=s,n=hn(v,_),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=$n(f,n,_),e!==null&&(Ht(e,f,_,v),ki(e,f,_)),_}function Xi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Du(e,n){tp(e,n),(e=e.alternate)&&tp(e,n)}function Xx(){return null}var np=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tu(e){this._internalRoot=e}Qi.prototype.render=Tu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Yi(e,n,null,null)},Qi.prototype.unmount=Tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;cr(function(){Yi(null,e,null,null)}),n[cn]=null}};function Qi(e){this._internalRoot=e}Qi.prototype.unstable_scheduleHydration=function(e){if(e){var n=zc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<jn.length&&n!==0&&n<jn[s].priority;s++);jn.splice(s,0,e),s===0&&Hc(e)}};function Ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rp(){}function Qx(e,n,s,a,f){if(f){if(typeof a=="function"){var v=a;a=function(){var te=Xi(_);v.call(te)}}var _=ep(n,a,e,0,null,!1,!1,"",rp);return e._reactRootContainer=_,e[cn]=_.current,Uo(e.nodeType===8?e.parentNode:e),cr(),_}for(;f=e.lastChild;)e.removeChild(f);if(typeof a=="function"){var B=a;a=function(){var te=Xi(U);B.call(te)}}var U=Pu(e,0,!1,null,null,!1,!1,"",rp);return e._reactRootContainer=U,e[cn]=U.current,Uo(e.nodeType===8?e.parentNode:e),cr(function(){Yi(n,U,s,a)}),U}function Ki(e,n,s,a,f){var v=s._reactRootContainer;if(v){var _=v;if(typeof f=="function"){var B=f;f=function(){var U=Xi(_);B.call(U)}}Yi(n,_,e,f)}else _=Qx(s,n,e,f,a);return Xi(_)}$c=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Gt(n.pendingLanes);s!==0&&(oa(n,s|1),pt(n,He()),(be&6)===0&&(no=He()+500,On()))}break;case 13:cr(function(){var a=mn(e,1);if(a!==null){var f=at();Ht(a,e,1,f)}}),Du(e,1)}},sa=function(e){if(e.tag===13){var n=mn(e,134217728);if(n!==null){var s=at();Ht(n,e,134217728,s)}Du(e,134217728)}},Lc=function(e){if(e.tag===13){var n=Fn(e),s=mn(e,n);if(s!==null){var a=at();Ht(s,e,n,a)}Du(e,n)}},zc=function(){return De},Rc=function(e,n){var s=De;try{return De=e,n()}finally{De=s}},ko=function(e,n,s){switch(n){case"input":if(Xe(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var f=pi(a);if(!f)throw Error(o(90));Ce(a),Xe(a,f)}}}break;case"textarea":jr(e,s);break;case"select":n=s.value,n!=null&&_t(e,!!s.multiple,n,!1)}},Fs=Iu,Hs=cr;var Gx={usingClientEntryPoint:!1,Events:[Qo,Br,pi,zs,Rs,Iu]},as={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bs(e),e===null?null:e.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||Xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qi.isDisabled&&qi.supportsFiber)try{er=qi.inject(Kx),jt=qi}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx,mt.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(n))throw Error(o(200));return Yx(e,n,null,s)},mt.createRoot=function(e,n){if(!Ou(e))throw Error(o(299));var s=!1,a="",f=np;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=Pu(e,1,!1,null,null,s,!1,a,f),e[cn]=n.current,Uo(e.nodeType===8?e.parentNode:e),new Tu(n)},mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Bs(n),e=e===null?null:e.stateNode,e},mt.flushSync=function(e){return cr(e)},mt.hydrate=function(e,n,s){if(!Gi(n))throw Error(o(200));return Ki(null,e,n,!0,s)},mt.hydrateRoot=function(e,n,s){if(!Ou(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,f=!1,v="",_=np;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),n=ep(n,null,e,1,s??null,f,!1,v,_),e[cn]=n.current,Uo(e),a)for(e=0;e<a.length;e++)s=a[e],f=s._getVersion,f=f(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,f]:n.mutableSourceEagerHydrationData.push(s,f);return new Qi(n)},mt.render=function(e,n,s){if(!Gi(n))throw Error(o(200));return Ki(null,e,n,!1,s)},mt.unmountComponentAtNode=function(e){if(!Gi(e))throw Error(o(40));return e._reactRootContainer?(cr(function(){Ki(null,null,e,!1,function(){e._reactRootContainer=null,e[cn]=null})}),!0):!1},mt.unstable_batchedUpdates=Iu,mt.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!Gi(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Ki(e,n,s,!1,a)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var dp;function jm(){if(dp)return Lu.exports;dp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Lu.exports=r0(),Lu.exports}var fp;function o0(){if(fp)return Zi;fp=1;var t=jm();return Zi.createRoot=t.createRoot,Zi.hydrateRoot=t.hydrateRoot,Zi}var s0=o0();function Ge(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=Ge(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var i0={value:()=>{}};function Ml(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new fl(o)}function fl(t){this._=t}function l0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}fl.prototype=Ml.prototype={constructor:fl,on:function(t,r){var o=this._,i=l0(t+"",o),l,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((l=(t=i[u]).type)&&(l=a0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++u<c;)if(l=(t=i[u]).type)o[l]=pp(o[l],t.name,r);else if(r==null)for(l in o)o[l]=pp(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new fl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,u;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,l=u.length;i<l;++i)u[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,u=i.length;l<u;++l)i[l].value.apply(r,o)}};function a0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function pp(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=i0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var Ju="http://www.w3.org/1999/xhtml";const mp={svg:"http://www.w3.org/2000/svg",xhtml:Ju,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bl(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),mp.hasOwnProperty(r)?{space:mp[r],local:t}:t}function u0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===Ju&&r.documentElement.namespaceURI===Ju?r.createElement(t):r.createElementNS(o,t)}}function c0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Mm(t){var r=bl(t);return(r.local?c0:u0)(r)}function d0(){}function gc(t){return t==null?d0:function(){return this.querySelector(t)}}function f0(t){typeof t!="function"&&(t=gc(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,p=i[l]=new Array(c),y,x,m=0;m<c;++m)(y=u[m])&&(x=t.call(y,y.__data__,m,u))&&("__data__"in y&&(x.__data__=y.__data__),p[m]=x);return new Et(i,this._parents)}function p0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function m0(){return[]}function bm(t){return t==null?m0:function(){return this.querySelectorAll(t)}}function h0(t){return function(){return p0(t.apply(this,arguments))}}function g0(t){typeof t=="function"?t=h0(t):t=bm(t);for(var r=this._groups,o=r.length,i=[],l=[],u=0;u<o;++u)for(var c=r[u],p=c.length,y,x=0;x<p;++x)(y=c[x])&&(i.push(t.call(y,y.__data__,x,c)),l.push(y));return new Et(i,l)}function Pm(t){return function(){return this.matches(t)}}function Dm(t){return function(r){return r.matches(t)}}var x0=Array.prototype.find;function y0(t){return function(){return x0.call(this.children,t)}}function v0(){return this.firstElementChild}function w0(t){return this.select(t==null?v0:y0(typeof t=="function"?t:Dm(t)))}var S0=Array.prototype.filter;function N0(){return Array.from(this.children)}function k0(t){return function(){return S0.call(this.children,t)}}function C0(t){return this.selectAll(t==null?N0:k0(typeof t=="function"?t:Dm(t)))}function I0(t){typeof t!="function"&&(t=Pm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,p=i[l]=[],y,x=0;x<c;++x)(y=u[x])&&t.call(y,y.__data__,x,u)&&p.push(y);return new Et(i,this._parents)}function Tm(t){return new Array(t.length)}function E0(){return new Et(this._enter||this._groups.map(Tm),this._parents)}function yl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}yl.prototype={constructor:yl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function _0(t){return function(){return t}}function j0(t,r,o,i,l,u){for(var c=0,p,y=r.length,x=u.length;c<x;++c)(p=r[c])?(p.__data__=u[c],i[c]=p):o[c]=new yl(t,u[c]);for(;c<y;++c)(p=r[c])&&(l[c]=p)}function M0(t,r,o,i,l,u,c){var p,y,x=new Map,m=r.length,h=u.length,g=new Array(m),w;for(p=0;p<m;++p)(y=r[p])&&(g[p]=w=c.call(y,y.__data__,p,r)+"",x.has(w)?l[p]=y:x.set(w,y));for(p=0;p<h;++p)w=c.call(t,u[p],p,u)+"",(y=x.get(w))?(i[p]=y,y.__data__=u[p],x.delete(w)):o[p]=new yl(t,u[p]);for(p=0;p<m;++p)(y=r[p])&&x.get(g[p])===y&&(l[p]=y)}function b0(t){return t.__data__}function P0(t,r){if(!arguments.length)return Array.from(this,b0);var o=r?M0:j0,i=this._parents,l=this._groups;typeof t!="function"&&(t=_0(t));for(var u=l.length,c=new Array(u),p=new Array(u),y=new Array(u),x=0;x<u;++x){var m=i[x],h=l[x],g=h.length,w=D0(t.call(m,m&&m.__data__,x,i)),S=w.length,I=p[x]=new Array(S),N=c[x]=new Array(S),C=y[x]=new Array(g);o(m,h,I,N,C,w,r);for(var T=0,k=0,P,$;T<S;++T)if(P=I[T]){for(T>=k&&(k=T+1);!($=N[k])&&++k<S;);P._next=$||null}}return c=new Et(c,i),c._enter=p,c._exit=y,c}function D0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function T0(){return new Et(this._exit||this._groups.map(Tm),this._parents)}function O0(t,r,o){var i=this.enter(),l=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?u.remove():o(u),i&&l?i.merge(l).order():l}function A0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,u=i.length,c=Math.min(l,u),p=new Array(l),y=0;y<c;++y)for(var x=o[y],m=i[y],h=x.length,g=p[y]=new Array(h),w,S=0;S<h;++S)(w=x[S]||m[S])&&(g[S]=w);for(;y<l;++y)p[y]=o[y];return new Et(p,this._parents)}function $0(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,u=i[l],c;--l>=0;)(c=i[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function L0(t){t||(t=z0);function r(h,g){return h&&g?t(h.__data__,g.__data__):!h-!g}for(var o=this._groups,i=o.length,l=new Array(i),u=0;u<i;++u){for(var c=o[u],p=c.length,y=l[u]=new Array(p),x,m=0;m<p;++m)(x=c[m])&&(y[m]=x);y.sort(r)}return new Et(l,this._parents).order()}function z0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function R0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function F0(){return Array.from(this)}function H0(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length;l<u;++l){var c=i[l];if(c)return c}return null}function V0(){let t=0;for(const r of this)++t;return t}function B0(){return!this.node()}function W0(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],u=0,c=l.length,p;u<c;++u)(p=l[u])&&t.call(p,p.__data__,u,l);return this}function U0(t){return function(){this.removeAttribute(t)}}function Y0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function X0(t,r){return function(){this.setAttribute(t,r)}}function Q0(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function G0(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function K0(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function q0(t,r){var o=bl(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?Y0:U0:typeof r=="function"?o.local?K0:G0:o.local?Q0:X0)(o,r))}function Om(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Z0(t){return function(){this.style.removeProperty(t)}}function J0(t,r,o){return function(){this.style.setProperty(t,r,o)}}function ey(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function ty(t,r,o){return arguments.length>1?this.each((r==null?Z0:typeof r=="function"?ey:J0)(t,r,o??"")):fo(this.node(),t)}function fo(t,r){return t.style.getPropertyValue(r)||Om(t).getComputedStyle(t,null).getPropertyValue(r)}function ny(t){return function(){delete this[t]}}function ry(t,r){return function(){this[t]=r}}function oy(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function sy(t,r){return arguments.length>1?this.each((r==null?ny:typeof r=="function"?oy:ry)(t,r)):this.node()[t]}function Am(t){return t.trim().split(/^|\s+/)}function xc(t){return t.classList||new $m(t)}function $m(t){this._node=t,this._names=Am(t.getAttribute("class")||"")}$m.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Lm(t,r){for(var o=xc(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function zm(t,r){for(var o=xc(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function iy(t){return function(){Lm(this,t)}}function ly(t){return function(){zm(this,t)}}function ay(t,r){return function(){(r.apply(this,arguments)?Lm:zm)(this,t)}}function uy(t,r){var o=Am(t+"");if(arguments.length<2){for(var i=xc(this.node()),l=-1,u=o.length;++l<u;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?ay:r?iy:ly)(o,r))}function cy(){this.textContent=""}function dy(t){return function(){this.textContent=t}}function fy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function py(t){return arguments.length?this.each(t==null?cy:(typeof t=="function"?fy:dy)(t)):this.node().textContent}function my(){this.innerHTML=""}function hy(t){return function(){this.innerHTML=t}}function gy(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function xy(t){return arguments.length?this.each(t==null?my:(typeof t=="function"?gy:hy)(t)):this.node().innerHTML}function yy(){this.nextSibling&&this.parentNode.appendChild(this)}function vy(){return this.each(yy)}function wy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sy(){return this.each(wy)}function Ny(t){var r=typeof t=="function"?t:Mm(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function ky(){return null}function Cy(t,r){var o=typeof t=="function"?t:Mm(t),i=r==null?ky:typeof r=="function"?r:gc(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function Iy(){var t=this.parentNode;t&&t.removeChild(this)}function Ey(){return this.each(Iy)}function _y(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function jy(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function My(t){return this.select(t?jy:_y)}function by(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Py(t){return function(r){t.call(this,r,this.__data__)}}function Dy(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Ty(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,u;o<l;++o)u=r[o],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):r[++i]=u;++i?r.length=i:delete this.__on}}}function Oy(t,r,o){return function(){var i=this.__on,l,u=Py(r);if(i){for(var c=0,p=i.length;c<p;++c)if((l=i[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=o),l.value=r;return}}this.addEventListener(t.type,u,o),l={type:t.type,name:t.name,value:r,listener:u,options:o},i?i.push(l):this.__on=[l]}}function Ay(t,r,o){var i=Dy(t+""),l,u=i.length,c;if(arguments.length<2){var p=this.node().__on;if(p){for(var y=0,x=p.length,m;y<x;++y)for(l=0,m=p[y];l<u;++l)if((c=i[l]).type===m.type&&c.name===m.name)return m.value}return}for(p=r?Oy:Ty,l=0;l<u;++l)this.each(p(i[l],r,o));return this}function Rm(t,r,o){var i=Om(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function $y(t,r){return function(){return Rm(this,t,r)}}function Ly(t,r){return function(){return Rm(this,t,r.apply(this,arguments))}}function zy(t,r){return this.each((typeof r=="function"?Ly:$y)(t,r))}function*Ry(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length,c;l<u;++l)(c=i[l])&&(yield c)}var Fm=[null];function Et(t,r){this._groups=t,this._parents=r}function js(){return new Et([[document.documentElement]],Fm)}function Fy(){return this}Et.prototype=js.prototype={constructor:Et,select:f0,selectAll:g0,selectChild:w0,selectChildren:C0,filter:I0,data:P0,enter:E0,exit:T0,join:O0,merge:A0,selection:Fy,order:$0,sort:L0,call:R0,nodes:F0,node:H0,size:V0,empty:B0,each:W0,attr:q0,style:ty,property:sy,classed:uy,text:py,html:xy,raise:vy,lower:Sy,append:Ny,insert:Cy,remove:Ey,clone:My,datum:by,on:Ay,dispatch:zy,[Symbol.iterator]:Ry};function Ct(t){return typeof t=="string"?new Et([[document.querySelector(t)]],[document.documentElement]):new Et([[t]],Fm)}function Hy(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Vt(t,r){if(t=Hy(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const Vy={passive:!1},ys={capture:!0,passive:!1};function Fu(t){t.stopImmediatePropagation()}function uo(t){t.preventDefault(),t.stopImmediatePropagation()}function Hm(t){var r=t.document.documentElement,o=Ct(t).on("dragstart.drag",uo,ys);"onselectstart"in r?o.on("selectstart.drag",uo,ys):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Vm(t,r){var o=t.document.documentElement,i=Ct(t).on("dragstart.drag",null);r&&(i.on("click.drag",uo,ys),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const Ji=t=>()=>t;function ec(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:u,x:c,y:p,dx:y,dy:x,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:y,enumerable:!0,configurable:!0},dy:{value:x,enumerable:!0,configurable:!0},_:{value:m}})}ec.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function By(t){return!t.ctrlKey&&!t.button}function Wy(){return this.parentNode}function Uy(t,r){return r??{x:t.x,y:t.y}}function Yy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bm(){var t=By,r=Wy,o=Uy,i=Yy,l={},u=Ml("start","drag","end"),c=0,p,y,x,m,h=0;function g(P){P.on("mousedown.drag",w).filter(i).on("touchstart.drag",N).on("touchmove.drag",C,Vy).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(P,$){if(!(m||!t.call(this,P,$))){var V=k(this,r.call(this,P,$),P,$,"mouse");V&&(Ct(P.view).on("mousemove.drag",S,ys).on("mouseup.drag",I,ys),Hm(P.view),Fu(P),x=!1,p=P.clientX,y=P.clientY,V("start",P))}}function S(P){if(uo(P),!x){var $=P.clientX-p,V=P.clientY-y;x=$*$+V*V>h}l.mouse("drag",P)}function I(P){Ct(P.view).on("mousemove.drag mouseup.drag",null),Vm(P.view,x),uo(P),l.mouse("end",P)}function N(P,$){if(t.call(this,P,$)){var V=P.changedTouches,W=r.call(this,P,$),K=V.length,q,H;for(q=0;q<K;++q)(H=k(this,W,P,$,V[q].identifier,V[q]))&&(Fu(P),H("start",P,V[q]))}}function C(P){var $=P.changedTouches,V=$.length,W,K;for(W=0;W<V;++W)(K=l[$[W].identifier])&&(uo(P),K("drag",P,$[W]))}function T(P){var $=P.changedTouches,V=$.length,W,K;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),W=0;W<V;++W)(K=l[$[W].identifier])&&(Fu(P),K("end",P,$[W]))}function k(P,$,V,W,K,q){var H=u.copy(),L=Vt(q||V,$),X,Q,A;if((A=o.call(P,new ec("beforestart",{sourceEvent:V,target:g,identifier:K,active:c,x:L[0],y:L[1],dx:0,dy:0,dispatch:H}),W))!=null)return X=A.x-L[0]||0,Q=A.y-L[1]||0,function R(z,j,D){var M=L,b;switch(z){case"start":l[K]=R,b=c++;break;case"end":delete l[K],--c;case"drag":L=Vt(D||j,$),b=c;break}H.call(z,P,new ec(z,{sourceEvent:j,subject:A,target:g,identifier:K,active:b,x:L[0]+X,y:L[1]+Q,dx:L[0]-M[0],dy:L[1]-M[1],dispatch:H}),W)}}return g.filter=function(P){return arguments.length?(t=typeof P=="function"?P:Ji(!!P),g):t},g.container=function(P){return arguments.length?(r=typeof P=="function"?P:Ji(P),g):r},g.subject=function(P){return arguments.length?(o=typeof P=="function"?P:Ji(P),g):o},g.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:Ji(!!P),g):i},g.on=function(){var P=u.on.apply(u,arguments);return P===u?g:P},g.clickDistance=function(P){return arguments.length?(h=(P=+P)*P,g):Math.sqrt(h)},g}function yc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function Wm(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function Ms(){}var vs=.7,vl=1/vs,co="\\s*([+-]?\\d+)\\s*",ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xy=/^#([0-9a-f]{3,8})$/,Qy=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),Gy=new RegExp(`^rgb\\(${tn},${tn},${tn}\\)$`),Ky=new RegExp(`^rgba\\(${co},${co},${co},${ws}\\)$`),qy=new RegExp(`^rgba\\(${tn},${tn},${tn},${ws}\\)$`),Zy=new RegExp(`^hsl\\(${ws},${tn},${tn}\\)$`),Jy=new RegExp(`^hsla\\(${ws},${tn},${tn},${ws}\\)$`),hp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yc(Ms,vr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gp,formatHex:gp,formatHex8:ev,formatHsl:tv,formatRgb:xp,toString:xp});function gp(){return this.rgb().formatHex()}function ev(){return this.rgb().formatHex8()}function tv(){return Um(this).formatHsl()}function xp(){return this.rgb().formatRgb()}function vr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=Xy.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?yp(r):o===3?new ht(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?el(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?el(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Qy.exec(t))?new ht(r[1],r[2],r[3],1):(r=Gy.exec(t))?new ht(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Ky.exec(t))?el(r[1],r[2],r[3],r[4]):(r=qy.exec(t))?el(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Zy.exec(t))?Sp(r[1],r[2]/100,r[3]/100,1):(r=Jy.exec(t))?Sp(r[1],r[2]/100,r[3]/100,r[4]):hp.hasOwnProperty(t)?yp(hp[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function yp(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function el(t,r,o,i){return i<=0&&(t=r=o=NaN),new ht(t,r,o,i)}function nv(t){return t instanceof Ms||(t=vr(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function tc(t,r,o,i){return arguments.length===1?nv(t):new ht(t,r,o,i??1)}function ht(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}yc(ht,tc,Wm(Ms,{brighter(t){return t=t==null?vl:Math.pow(vl,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vs:Math.pow(vs,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(xr(this.r),xr(this.g),xr(this.b),wl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vp,formatHex:vp,formatHex8:rv,formatRgb:wp,toString:wp}));function vp(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}`}function rv(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}${hr((isNaN(this.opacity)?1:this.opacity)*255)}`}function wp(){const t=wl(this.opacity);return`${t===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${t===1?")":`, ${t})`}`}function wl(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hr(t){return t=xr(t),(t<16?"0":"")+t.toString(16)}function Sp(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Bt(t,r,o,i)}function Um(t){if(t instanceof Bt)return new Bt(t.h,t.s,t.l,t.opacity);if(t instanceof Ms||(t=vr(t)),!t)return new Bt;if(t instanceof Bt)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),u=Math.max(r,o,i),c=NaN,p=u-l,y=(u+l)/2;return p?(r===u?c=(o-i)/p+(o<i)*6:o===u?c=(i-r)/p+2:c=(r-o)/p+4,p/=y<.5?u+l:2-u-l,c*=60):p=y>0&&y<1?0:c,new Bt(c,p,y,t.opacity)}function ov(t,r,o,i){return arguments.length===1?Um(t):new Bt(t,r,o,i??1)}function Bt(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}yc(Bt,ov,Wm(Ms,{brighter(t){return t=t==null?vl:Math.pow(vl,t),new Bt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vs:Math.pow(vs,t),new Bt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new ht(Hu(t>=240?t-240:t+120,l,i),Hu(t,l,i),Hu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Bt(Np(this.h),tl(this.s),tl(this.l),wl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wl(this.opacity);return`${t===1?"hsl(":"hsla("}${Np(this.h)}, ${tl(this.s)*100}%, ${tl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Np(t){return t=(t||0)%360,t<0?t+360:t}function tl(t){return Math.max(0,Math.min(1,t||0))}function Hu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const vc=t=>()=>t;function sv(t,r){return function(o){return t+o*r}}function iv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function lv(t){return(t=+t)==1?Ym:function(r,o){return o-r?iv(r,o,t):vc(isNaN(r)?o:r)}}function Ym(t,r){var o=r-t;return o?sv(t,o):vc(isNaN(t)?r:t)}const Sl=(function t(r){var o=lv(r);function i(l,u){var c=o((l=tc(l)).r,(u=tc(u)).r),p=o(l.g,u.g),y=o(l.b,u.b),x=Ym(l.opacity,u.opacity);return function(m){return l.r=c(m),l.g=p(m),l.b=y(m),l.opacity=x(m),l+""}}return i.gamma=t,i})(1);function av(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(u){for(l=0;l<o;++l)i[l]=t[l]*(1-u)+r[l]*u;return i}}function uv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),u=new Array(o),c;for(c=0;c<i;++c)l[c]=gs(t[c],r[c]);for(;c<o;++c)u[c]=r[c];return function(p){for(c=0;c<i;++c)u[c]=l[c](p);return u}}function dv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function en(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function fv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=gs(t[l],r[l]):i[l]=r[l];return function(u){for(l in o)i[l]=o[l](u);return i}}var nc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vu=new RegExp(nc.source,"g");function pv(t){return function(){return t}}function mv(t){return function(r){return t(r)+""}}function Xm(t,r){var o=nc.lastIndex=Vu.lastIndex=0,i,l,u,c=-1,p=[],y=[];for(t=t+"",r=r+"";(i=nc.exec(t))&&(l=Vu.exec(r));)(u=l.index)>o&&(u=r.slice(o,u),p[c]?p[c]+=u:p[++c]=u),(i=i[0])===(l=l[0])?p[c]?p[c]+=l:p[++c]=l:(p[++c]=null,y.push({i:c,x:en(i,l)})),o=Vu.lastIndex;return o<r.length&&(u=r.slice(o),p[c]?p[c]+=u:p[++c]=u),p.length<2?y[0]?mv(y[0].x):pv(r):(r=y.length,function(x){for(var m=0,h;m<r;++m)p[(h=y[m]).i]=h.x(x);return p.join("")})}function gs(t,r){var o=typeof r,i;return r==null||o==="boolean"?vc(r):(o==="number"?en:o==="string"?(i=vr(r))?(r=i,Sl):Xm:r instanceof vr?Sl:r instanceof Date?dv:uv(r)?av:Array.isArray(r)?cv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?fv:en)(t,r)}var kp=180/Math.PI,rc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qm(t,r,o,i,l,u){var c,p,y;return(c=Math.sqrt(t*t+r*r))&&(t/=c,r/=c),(y=t*o+r*i)&&(o-=t*y,i-=r*y),(p=Math.sqrt(o*o+i*i))&&(o/=p,i/=p,y/=p),t*i<r*o&&(t=-t,r=-r,y=-y,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(r,t)*kp,skewX:Math.atan(y)*kp,scaleX:c,scaleY:p}}var nl;function hv(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?rc:Qm(r.a,r.b,r.c,r.d,r.e,r.f)}function gv(t){return t==null||(nl||(nl=document.createElementNS("http://www.w3.org/2000/svg","g")),nl.setAttribute("transform",t),!(t=nl.transform.baseVal.consolidate()))?rc:(t=t.matrix,Qm(t.a,t.b,t.c,t.d,t.e,t.f))}function Gm(t,r,o,i){function l(x){return x.length?x.pop()+" ":""}function u(x,m,h,g,w,S){if(x!==h||m!==g){var I=w.push("translate(",null,r,null,o);S.push({i:I-4,x:en(x,h)},{i:I-2,x:en(m,g)})}else(h||g)&&w.push("translate("+h+r+g+o)}function c(x,m,h,g){x!==m?(x-m>180?m+=360:m-x>180&&(x+=360),g.push({i:h.push(l(h)+"rotate(",null,i)-2,x:en(x,m)})):m&&h.push(l(h)+"rotate("+m+i)}function p(x,m,h,g){x!==m?g.push({i:h.push(l(h)+"skewX(",null,i)-2,x:en(x,m)}):m&&h.push(l(h)+"skewX("+m+i)}function y(x,m,h,g,w,S){if(x!==h||m!==g){var I=w.push(l(w)+"scale(",null,",",null,")");S.push({i:I-4,x:en(x,h)},{i:I-2,x:en(m,g)})}else(h!==1||g!==1)&&w.push(l(w)+"scale("+h+","+g+")")}return function(x,m){var h=[],g=[];return x=t(x),m=t(m),u(x.translateX,x.translateY,m.translateX,m.translateY,h,g),c(x.rotate,m.rotate,h,g),p(x.skewX,m.skewX,h,g),y(x.scaleX,x.scaleY,m.scaleX,m.scaleY,h,g),x=m=null,function(w){for(var S=-1,I=g.length,N;++S<I;)h[(N=g[S]).i]=N.x(w);return h.join("")}}}var xv=Gm(hv,"px, ","px)","deg)"),yv=Gm(gv,", ",")",")"),vv=1e-12;function Cp(t){return((t=Math.exp(t))+1/t)/2}function wv(t){return((t=Math.exp(t))-1/t)/2}function Sv(t){return((t=Math.exp(2*t))-1)/(t+1)}const pl=(function t(r,o,i){function l(u,c){var p=u[0],y=u[1],x=u[2],m=c[0],h=c[1],g=c[2],w=m-p,S=h-y,I=w*w+S*S,N,C;if(I<vv)C=Math.log(g/x)/r,N=function(W){return[p+W*w,y+W*S,x*Math.exp(r*W*C)]};else{var T=Math.sqrt(I),k=(g*g-x*x+i*I)/(2*x*o*T),P=(g*g-x*x-i*I)/(2*g*o*T),$=Math.log(Math.sqrt(k*k+1)-k),V=Math.log(Math.sqrt(P*P+1)-P);C=(V-$)/r,N=function(W){var K=W*C,q=Cp($),H=x/(o*T)*(q*Sv(r*K+$)-wv($));return[p+H*w,y+H*S,x*q/Cp(r*K+$)]}}return N.duration=C*1e3*r/Math.SQRT2,N}return l.rho=function(u){var c=Math.max(.001,+u),p=c*c,y=p*p;return t(c,p,y)},l})(Math.SQRT2,2,4);var po=0,ms=0,cs=0,Km=1e3,Nl,hs,kl=0,wr=0,Pl=0,Ss=typeof performance=="object"&&performance.now?performance:Date,qm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wc(){return wr||(qm(Nv),wr=Ss.now()+Pl)}function Nv(){wr=0}function Cl(){this._call=this._time=this._next=null}Cl.prototype=Zm.prototype={constructor:Cl,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?wc():+o)+(r==null?0:+r),!this._next&&hs!==this&&(hs?hs._next=this:Nl=this,hs=this),this._call=t,this._time=o,oc()},stop:function(){this._call&&(this._call=null,this._time=1/0,oc())}};function Zm(t,r,o){var i=new Cl;return i.restart(t,r,o),i}function kv(){wc(),++po;for(var t=Nl,r;t;)(r=wr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--po}function Ip(){wr=(kl=Ss.now())+Pl,po=ms=0;try{kv()}finally{po=0,Iv(),wr=0}}function Cv(){var t=Ss.now(),r=t-kl;r>Km&&(Pl-=r,kl=t)}function Iv(){for(var t,r=Nl,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:Nl=o);hs=t,oc(i)}function oc(t){if(!po){ms&&(ms=clearTimeout(ms));var r=t-wr;r>24?(t<1/0&&(ms=setTimeout(Ip,t-Ss.now()-Pl)),cs&&(cs=clearInterval(cs))):(cs||(kl=Ss.now(),cs=setInterval(Cv,Km)),po=1,qm(Ip))}}function Ep(t,r,o){var i=new Cl;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var Ev=Ml("start","end","cancel","interrupt"),_v=[],Jm=0,_p=1,sc=2,ml=3,jp=4,ic=5,hl=6;function Dl(t,r,o,i,l,u){var c=t.__transition;if(!c)t.__transition={};else if(o in c)return;jv(t,o,{name:r,index:i,group:l,on:Ev,tween:_v,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Jm})}function Sc(t,r){var o=Xt(t,r);if(o.state>Jm)throw new Error("too late; already scheduled");return o}function on(t,r){var o=Xt(t,r);if(o.state>ml)throw new Error("too late; already running");return o}function Xt(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function jv(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=Zm(u,0,o.time);function u(x){o.state=_p,o.timer.restart(c,o.delay,o.time),o.delay<=x&&c(x-o.delay)}function c(x){var m,h,g,w;if(o.state!==_p)return y();for(m in i)if(w=i[m],w.name===o.name){if(w.state===ml)return Ep(c);w.state===jp?(w.state=hl,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[m]):+m<r&&(w.state=hl,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[m])}if(Ep(function(){o.state===ml&&(o.state=jp,o.timer.restart(p,o.delay,o.time),p(x))}),o.state=sc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===sc){for(o.state=ml,l=new Array(g=o.tween.length),m=0,h=-1;m<g;++m)(w=o.tween[m].value.call(t,t.__data__,o.index,o.group))&&(l[++h]=w);l.length=h+1}}function p(x){for(var m=x<o.duration?o.ease.call(null,x/o.duration):(o.timer.restart(y),o.state=ic,1),h=-1,g=l.length;++h<g;)l[h].call(t,m);o.state===ic&&(o.on.call("end",t,t.__data__,o.index,o.group),y())}function y(){o.state=hl,o.timer.stop(),delete i[r];for(var x in i)return;delete t.__transition}}function gl(t,r){var o=t.__transition,i,l,u=!0,c;if(o){r=r==null?null:r+"";for(c in o){if((i=o[c]).name!==r){u=!1;continue}l=i.state>sc&&i.state<ic,i.state=hl,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[c]}u&&delete t.__transition}}function Mv(t){return this.each(function(){gl(this,t)})}function bv(t,r){var o,i;return function(){var l=on(this,t),u=l.tween;if(u!==o){i=o=u;for(var c=0,p=i.length;c<p;++c)if(i[c].name===r){i=i.slice(),i.splice(c,1);break}}l.tween=i}}function Pv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var u=on(this,t),c=u.tween;if(c!==i){l=(i=c).slice();for(var p={name:r,value:o},y=0,x=l.length;y<x;++y)if(l[y].name===r){l[y]=p;break}y===x&&l.push(p)}u.tween=l}}function Dv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=Xt(this.node(),o).tween,l=0,u=i.length,c;l<u;++l)if((c=i[l]).name===t)return c.value;return null}return this.each((r==null?bv:Pv)(o,t,r))}function Nc(t,r,o){var i=t._id;return t.each(function(){var l=on(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return Xt(l,i).value[r]}}function eh(t,r){var o;return(typeof r=="number"?en:r instanceof vr?Sl:(o=vr(r))?(r=o,Sl):Xm)(t,r)}function Tv(t){return function(){this.removeAttribute(t)}}function Ov(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Av(t,r,o){var i,l=o+"",u;return function(){var c=this.getAttribute(t);return c===l?null:c===i?u:u=r(i=c,o)}}function $v(t,r,o){var i,l=o+"",u;return function(){var c=this.getAttributeNS(t.space,t.local);return c===l?null:c===i?u:u=r(i=c,o)}}function Lv(t,r,o){var i,l,u;return function(){var c,p=o(this),y;return p==null?void this.removeAttribute(t):(c=this.getAttribute(t),y=p+"",c===y?null:c===i&&y===l?u:(l=y,u=r(i=c,p)))}}function zv(t,r,o){var i,l,u;return function(){var c,p=o(this),y;return p==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),y=p+"",c===y?null:c===i&&y===l?u:(l=y,u=r(i=c,p)))}}function Rv(t,r){var o=bl(t),i=o==="transform"?yv:eh;return this.attrTween(t,typeof r=="function"?(o.local?zv:Lv)(o,i,Nc(this,"attr."+t,r)):r==null?(o.local?Ov:Tv)(o):(o.local?$v:Av)(o,i,r))}function Fv(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function Hv(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function Vv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Hv(t,u)),o}return l._value=r,l}function Bv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Fv(t,u)),o}return l._value=r,l}function Wv(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=bl(t);return this.tween(o,(i.local?Vv:Bv)(i,r))}function Uv(t,r){return function(){Sc(this,t).delay=+r.apply(this,arguments)}}function Yv(t,r){return r=+r,function(){Sc(this,t).delay=r}}function Xv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Uv:Yv)(r,t)):Xt(this.node(),r).delay}function Qv(t,r){return function(){on(this,t).duration=+r.apply(this,arguments)}}function Gv(t,r){return r=+r,function(){on(this,t).duration=r}}function Kv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Qv:Gv)(r,t)):Xt(this.node(),r).duration}function qv(t,r){if(typeof r!="function")throw new Error;return function(){on(this,t).ease=r}}function Zv(t){var r=this._id;return arguments.length?this.each(qv(r,t)):Xt(this.node(),r).ease}function Jv(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;on(this,t).ease=o}}function ew(t){if(typeof t!="function")throw new Error;return this.each(Jv(this._id,t))}function tw(t){typeof t!="function"&&(t=Pm(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,p=i[l]=[],y,x=0;x<c;++x)(y=u[x])&&t.call(y,y.__data__,x,u)&&p.push(y);return new wn(i,this._parents,this._name,this._id)}function nw(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,u=Math.min(i,l),c=new Array(i),p=0;p<u;++p)for(var y=r[p],x=o[p],m=y.length,h=c[p]=new Array(m),g,w=0;w<m;++w)(g=y[w]||x[w])&&(h[w]=g);for(;p<i;++p)c[p]=r[p];return new wn(c,this._parents,this._name,this._id)}function rw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function ow(t,r,o){var i,l,u=rw(r)?Sc:on;return function(){var c=u(this,t),p=c.on;p!==i&&(l=(i=p).copy()).on(r,o),c.on=l}}function sw(t,r){var o=this._id;return arguments.length<2?Xt(this.node(),o).on.on(t):this.each(ow(o,t,r))}function iw(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function lw(){return this.on("end.remove",iw(this._id))}function aw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=gc(t));for(var i=this._groups,l=i.length,u=new Array(l),c=0;c<l;++c)for(var p=i[c],y=p.length,x=u[c]=new Array(y),m,h,g=0;g<y;++g)(m=p[g])&&(h=t.call(m,m.__data__,g,p))&&("__data__"in m&&(h.__data__=m.__data__),x[g]=h,Dl(x[g],r,o,g,x,Xt(m,o)));return new wn(u,this._parents,r,o)}function uw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=bm(t));for(var i=this._groups,l=i.length,u=[],c=[],p=0;p<l;++p)for(var y=i[p],x=y.length,m,h=0;h<x;++h)if(m=y[h]){for(var g=t.call(m,m.__data__,h,y),w,S=Xt(m,o),I=0,N=g.length;I<N;++I)(w=g[I])&&Dl(w,r,o,I,g,S);u.push(g),c.push(m)}return new wn(u,c,r,o)}var cw=js.prototype.constructor;function dw(){return new cw(this._groups,this._parents)}function fw(t,r){var o,i,l;return function(){var u=fo(this,t),c=(this.style.removeProperty(t),fo(this,t));return u===c?null:u===o&&c===i?l:l=r(o=u,i=c)}}function th(t){return function(){this.style.removeProperty(t)}}function pw(t,r,o){var i,l=o+"",u;return function(){var c=fo(this,t);return c===l?null:c===i?u:u=r(i=c,o)}}function mw(t,r,o){var i,l,u;return function(){var c=fo(this,t),p=o(this),y=p+"";return p==null&&(y=p=(this.style.removeProperty(t),fo(this,t))),c===y?null:c===i&&y===l?u:(l=y,u=r(i=c,p))}}function hw(t,r){var o,i,l,u="style."+r,c="end."+u,p;return function(){var y=on(this,t),x=y.on,m=y.value[u]==null?p||(p=th(r)):void 0;(x!==o||l!==m)&&(i=(o=x).copy()).on(c,l=m),y.on=i}}function gw(t,r,o){var i=(t+="")=="transform"?xv:eh;return r==null?this.styleTween(t,fw(t,i)).on("end.style."+t,th(t)):typeof r=="function"?this.styleTween(t,mw(t,i,Nc(this,"style."+t,r))).each(hw(this._id,t)):this.styleTween(t,pw(t,i,r),o).on("end.style."+t,null)}function xw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function yw(t,r,o){var i,l;function u(){var c=r.apply(this,arguments);return c!==l&&(i=(l=c)&&xw(t,c,o)),i}return u._value=r,u}function vw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,yw(t,r,o??""))}function ww(t){return function(){this.textContent=t}}function Sw(t){return function(){var r=t(this);this.textContent=r??""}}function Nw(t){return this.tween("text",typeof t=="function"?Sw(Nc(this,"text",t)):ww(t==null?"":t+""))}function kw(t){return function(r){this.textContent=t.call(this,r)}}function Cw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&kw(l)),r}return i._value=t,i}function Iw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cw(t))}function Ew(){for(var t=this._name,r=this._id,o=nh(),i=this._groups,l=i.length,u=0;u<l;++u)for(var c=i[u],p=c.length,y,x=0;x<p;++x)if(y=c[x]){var m=Xt(y,r);Dl(y,t,o,x,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new wn(i,this._parents,t,o)}function _w(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(u,c){var p={value:c},y={value:function(){--l===0&&u()}};o.each(function(){var x=on(this,i),m=x.on;m!==t&&(r=(t=m).copy(),r._.cancel.push(p),r._.interrupt.push(p),r._.end.push(y)),x.on=r}),l===0&&u()})}var jw=0;function wn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function nh(){return++jw}var yn=js.prototype;wn.prototype={constructor:wn,select:aw,selectAll:uw,selectChild:yn.selectChild,selectChildren:yn.selectChildren,filter:tw,merge:nw,selection:dw,transition:Ew,call:yn.call,nodes:yn.nodes,node:yn.node,size:yn.size,empty:yn.empty,each:yn.each,on:sw,attr:Rv,attrTween:Wv,style:gw,styleTween:vw,text:Nw,textTween:Iw,remove:lw,tween:Dv,delay:Xv,duration:Kv,ease:Zv,easeVarying:ew,end:_w,[Symbol.iterator]:yn[Symbol.iterator]};function Mw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bw={time:null,delay:0,duration:250,ease:Mw};function Pw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Dw(t){var r,o;t instanceof wn?(r=t._id,t=t._name):(r=nh(),(o=bw).time=wc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,u=0;u<l;++u)for(var c=i[u],p=c.length,y,x=0;x<p;++x)(y=c[x])&&Dl(y,t,r,x,c,o||Pw(y,r));return new wn(i,this._parents,t,r)}js.prototype.interrupt=Mv;js.prototype.transition=Dw;const rl=t=>()=>t;function Tw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function vn(t,r,o){this.k=t,this.x=r,this.y=o}vn.prototype={constructor:vn,scale:function(t){return t===1?this:new vn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new vn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tl=new vn(1,0,0);rh.prototype=vn.prototype;function rh(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Tl;return t.__zoom}function Bu(t){t.stopImmediatePropagation()}function ds(t){t.preventDefault(),t.stopImmediatePropagation()}function Ow(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Aw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Mp(){return this.__zoom||Tl}function $w(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Lw(){return navigator.maxTouchPoints||"ontouchstart"in this}function zw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],u=t.invertY(r[0][1])-o[0][1],c=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function oh(){var t=Ow,r=Aw,o=zw,i=$w,l=Lw,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],p=250,y=pl,x=Ml("start","zoom","end"),m,h,g,w=500,S=150,I=0,N=10;function C(A){A.property("__zoom",Mp).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",H).filter(l).on("touchstart.zoom",L).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(A,R,z,j){var D=A.selection?A.selection():A;D.property("__zoom",Mp),A!==D?$(A,R,z,j):D.interrupt().each(function(){V(this,arguments).event(j).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},C.scaleBy=function(A,R,z,j){C.scaleTo(A,function(){var D=this.__zoom.k,M=typeof R=="function"?R.apply(this,arguments):R;return D*M},z,j)},C.scaleTo=function(A,R,z,j){C.transform(A,function(){var D=r.apply(this,arguments),M=this.__zoom,b=z==null?P(D):typeof z=="function"?z.apply(this,arguments):z,E=M.invert(b),O=typeof R=="function"?R.apply(this,arguments):R;return o(k(T(M,O),b,E),D,c)},z,j)},C.translateBy=function(A,R,z,j){C.transform(A,function(){return o(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof z=="function"?z.apply(this,arguments):z),r.apply(this,arguments),c)},null,j)},C.translateTo=function(A,R,z,j,D){C.transform(A,function(){var M=r.apply(this,arguments),b=this.__zoom,E=j==null?P(M):typeof j=="function"?j.apply(this,arguments):j;return o(Tl.translate(E[0],E[1]).scale(b.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof z=="function"?-z.apply(this,arguments):-z),M,c)},j,D)};function T(A,R){return R=Math.max(u[0],Math.min(u[1],R)),R===A.k?A:new vn(R,A.x,A.y)}function k(A,R,z){var j=R[0]-z[0]*A.k,D=R[1]-z[1]*A.k;return j===A.x&&D===A.y?A:new vn(A.k,j,D)}function P(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function $(A,R,z,j){A.on("start.zoom",function(){V(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(j).end()}).tween("zoom",function(){var D=this,M=arguments,b=V(D,M).event(j),E=r.apply(D,M),O=z==null?P(E):typeof z=="function"?z.apply(D,M):z,G=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),Z=D.__zoom,ne=typeof R=="function"?R.apply(D,M):R,re=y(Z.invert(O).concat(G/Z.k),ne.invert(O).concat(G/ne.k));return function(ae){if(ae===1)ae=ne;else{var oe=re(ae),ue=G/oe[2];ae=new vn(ue,O[0]-oe[0]*ue,O[1]-oe[1]*ue)}b.zoom(null,ae)}})}function V(A,R,z){return!z&&A.__zooming||new W(A,R)}function W(A,R){this.that=A,this.args=R,this.active=0,this.sourceEvent=null,this.extent=r.apply(A,R),this.taps=0}W.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,R){return this.mouse&&A!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var R=Ct(this.that).datum();x.call(A,this.that,new Tw(A,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:x}),R)}};function K(A,...R){if(!t.apply(this,arguments))return;var z=V(this,R).event(A),j=this.__zoom,D=Math.max(u[0],Math.min(u[1],j.k*Math.pow(2,i.apply(this,arguments)))),M=Vt(A);if(z.wheel)(z.mouse[0][0]!==M[0]||z.mouse[0][1]!==M[1])&&(z.mouse[1]=j.invert(z.mouse[0]=M)),clearTimeout(z.wheel);else{if(j.k===D)return;z.mouse=[M,j.invert(M)],gl(this),z.start()}ds(A),z.wheel=setTimeout(b,S),z.zoom("mouse",o(k(T(j,D),z.mouse[0],z.mouse[1]),z.extent,c));function b(){z.wheel=null,z.end()}}function q(A,...R){if(g||!t.apply(this,arguments))return;var z=A.currentTarget,j=V(this,R,!0).event(A),D=Ct(A.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",G,!0),M=Vt(A,z),b=A.clientX,E=A.clientY;Hm(A.view),Bu(A),j.mouse=[M,this.__zoom.invert(M)],gl(this),j.start();function O(Z){if(ds(Z),!j.moved){var ne=Z.clientX-b,re=Z.clientY-E;j.moved=ne*ne+re*re>I}j.event(Z).zoom("mouse",o(k(j.that.__zoom,j.mouse[0]=Vt(Z,z),j.mouse[1]),j.extent,c))}function G(Z){D.on("mousemove.zoom mouseup.zoom",null),Vm(Z.view,j.moved),ds(Z),j.event(Z).end()}}function H(A,...R){if(t.apply(this,arguments)){var z=this.__zoom,j=Vt(A.changedTouches?A.changedTouches[0]:A,this),D=z.invert(j),M=z.k*(A.shiftKey?.5:2),b=o(k(T(z,M),j,D),r.apply(this,R),c);ds(A),p>0?Ct(this).transition().duration(p).call($,b,j,A):Ct(this).call(C.transform,b,j,A)}}function L(A,...R){if(t.apply(this,arguments)){var z=A.touches,j=z.length,D=V(this,R,A.changedTouches.length===j).event(A),M,b,E,O;for(Bu(A),b=0;b<j;++b)E=z[b],O=Vt(E,this),O=[O,this.__zoom.invert(O),E.identifier],D.touch0?!D.touch1&&D.touch0[2]!==O[2]&&(D.touch1=O,D.taps=0):(D.touch0=O,M=!0,D.taps=1+!!m);m&&(m=clearTimeout(m)),M&&(D.taps<2&&(h=O[0],m=setTimeout(function(){m=null},w)),gl(this),D.start())}}function X(A,...R){if(this.__zooming){var z=V(this,R).event(A),j=A.changedTouches,D=j.length,M,b,E,O;for(ds(A),M=0;M<D;++M)b=j[M],E=Vt(b,this),z.touch0&&z.touch0[2]===b.identifier?z.touch0[0]=E:z.touch1&&z.touch1[2]===b.identifier&&(z.touch1[0]=E);if(b=z.that.__zoom,z.touch1){var G=z.touch0[0],Z=z.touch0[1],ne=z.touch1[0],re=z.touch1[1],ae=(ae=ne[0]-G[0])*ae+(ae=ne[1]-G[1])*ae,oe=(oe=re[0]-Z[0])*oe+(oe=re[1]-Z[1])*oe;b=T(b,Math.sqrt(ae/oe)),E=[(G[0]+ne[0])/2,(G[1]+ne[1])/2],O=[(Z[0]+re[0])/2,(Z[1]+re[1])/2]}else if(z.touch0)E=z.touch0[0],O=z.touch0[1];else return;z.zoom("touch",o(k(b,E,O),z.extent,c))}}function Q(A,...R){if(this.__zooming){var z=V(this,R).event(A),j=A.changedTouches,D=j.length,M,b;for(Bu(A),g&&clearTimeout(g),g=setTimeout(function(){g=null},w),M=0;M<D;++M)b=j[M],z.touch0&&z.touch0[2]===b.identifier?delete z.touch0:z.touch1&&z.touch1[2]===b.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(b=Vt(b,this),Math.hypot(h[0]-b[0],h[1]-b[1])<N)){var E=Ct(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return C.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:rl(+A),C):i},C.filter=function(A){return arguments.length?(t=typeof A=="function"?A:rl(!!A),C):t},C.touchable=function(A){return arguments.length?(l=typeof A=="function"?A:rl(!!A),C):l},C.extent=function(A){return arguments.length?(r=typeof A=="function"?A:rl([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),C):r},C.scaleExtent=function(A){return arguments.length?(u[0]=+A[0],u[1]=+A[1],C):[u[0],u[1]]},C.translateExtent=function(A){return arguments.length?(c[0][0]=+A[0][0],c[1][0]=+A[1][0],c[0][1]=+A[0][1],c[1][1]=+A[1][1],C):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},C.constrain=function(A){return arguments.length?(o=A,C):o},C.duration=function(A){return arguments.length?(p=+A,C):p},C.interpolate=function(A){return arguments.length?(y=A,C):y},C.on=function(){var A=x.on.apply(x,arguments);return A===x?C:A},C.clickDistance=function(A){return arguments.length?(I=(A=+A)*A,C):Math.sqrt(I)},C.tapDistance=function(A){return arguments.length?(N=+A,C):N},C}const nn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ns=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],sh=["Enter"," ","Escape"],ih={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var mo;(function(t){t.Strict="strict",t.Loose="loose"})(mo||(mo={}));var yr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(yr||(yr={}));var ks;(function(t){t.Partial="partial",t.Full="full"})(ks||(ks={}));const lh={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Yn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Yn||(Yn={}));var Il;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Il||(Il={}));var ye;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ye||(ye={}));const bp={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function ah(t){return t===null?null:t?"valid":"invalid"}const uh=t=>"id"in t&&"source"in t&&"target"in t,Rw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),kc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),bs=(t,r=[0,0])=>{const{width:o,height:i}=Sn(t),l=t.origin??r,u=o*l[0],c=i*l[1];return{x:t.position.x-u,y:t.position.y-c}},Fw=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const u=typeof l=="string";let c=!r.nodeLookup&&!u?l:void 0;r.nodeLookup&&(c=u?r.nodeLookup.get(l):kc(l)?l:r.nodeLookup.get(l.id));const p=c?El(c,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ol(i,p)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Al(o)},Ps=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Ol(o,El(l)),i=!0)}),i?Al(o):{x:0,y:0,width:0,height:0}},Cc=(t,r,[o,i,l]=[0,0,1],u=!1,c=!1)=>{const p={...Ts(r,[o,i,l]),width:r.width/l,height:r.height/l},y=[];for(const x of t.values()){const{measured:m,selectable:h=!0,hidden:g=!1}=x;if(c&&!h||g)continue;const w=m.width??x.width??x.initialWidth??null,S=m.height??x.height??x.initialHeight??null,I=Cs(p,go(x)),N=(w??0)*(S??0),C=u&&I>0;(!x.internals.handleBounds||C||I>=N||x.dragging)&&y.push(x)}return y},Hw=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function Vw(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function Bw({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:u},c){if(t.size===0)return Promise.resolve(!0);const p=Vw(t,c),y=Ps(p),x=Ic(y,r,o,(c==null?void 0:c.minZoom)??l,(c==null?void 0:c.maxZoom)??u,(c==null?void 0:c.padding)??.1);return await i.setViewport(x,{duration:c==null?void 0:c.duration,ease:c==null?void 0:c.ease,interpolate:c==null?void 0:c.interpolate}),Promise.resolve(!0)}function ch({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:u}){const c=o.get(t),p=c.parentId?o.get(c.parentId):void 0,{x:y,y:x}=p?p.internals.positionAbsolute:{x:0,y:0},m=c.origin??i;let h=c.extent||l;if(c.extent==="parent"&&!c.expandParent)if(!p)u==null||u("005",nn.error005());else{const w=p.measured.width,S=p.measured.height;w&&S&&(h=[[y,x],[y+w,x+S]])}else p&&xo(c.extent)&&(h=[[c.extent[0][0]+y,c.extent[0][1]+x],[c.extent[1][0]+y,c.extent[1][1]+x]]);const g=xo(h)?Sr(r,h,c.measured):r;return(c.measured.width===void 0||c.measured.height===void 0)&&(u==null||u("015",nn.error015())),{position:{x:g.x-y+(c.measured.width??0)*m[0],y:g.y-x+(c.measured.height??0)*m[1]},positionAbsolute:g}}async function Ww({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const u=new Set(t.map(g=>g.id)),c=[];for(const g of o){if(g.deletable===!1)continue;const w=u.has(g.id),S=!w&&g.parentId&&c.find(I=>I.id===g.parentId);(w||S)&&c.push(g)}const p=new Set(r.map(g=>g.id)),y=i.filter(g=>g.deletable!==!1),m=Hw(c,y);for(const g of y)p.has(g.id)&&!m.find(S=>S.id===g.id)&&m.push(g);if(!l)return{edges:m,nodes:c};const h=await l({nodes:c,edges:m});return typeof h=="boolean"?h?{edges:m,nodes:c}:{edges:[],nodes:[]}:h}const ho=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),Sr=(t={x:0,y:0},r,o)=>({x:ho(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:ho(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function dh(t,r,o){const{width:i,height:l}=Sn(o),{x:u,y:c}=o.internals.positionAbsolute;return Sr(t,[[u,c],[u+i,c+l]],r)}const Pp=(t,r,o)=>t<r?ho(Math.abs(t-r),1,r)/r:t>o?-ho(Math.abs(t-o),1,r)/r:0,fh=(t,r,o=15,i=40)=>{const l=Pp(t.x,i,r.width-i)*o,u=Pp(t.y,i,r.height-i)*o;return[l,u]},Ol=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),lc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Al=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),go=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=kc(t)?t.internals.positionAbsolute:bs(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0}},El=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=kc(t)?t.internals.positionAbsolute:bs(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0)}},ph=(t,r)=>Al(Ol(lc(t),lc(r))),Cs=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Dp=t=>Ut(t.width)&&Ut(t.height)&&Ut(t.x)&&Ut(t.y),Ut=t=>!isNaN(t)&&isFinite(t),Uw=(t,r)=>{},Ds=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),Ts=({x:t,y:r},[o,i,l],u=!1,c=[1,1])=>{const p={x:(t-o)/l,y:(r-i)/l};return u?Ds(p,c):p},_l=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function oo(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Yw(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=oo(t,o),l=oo(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=oo(t.top??t.y??0,o),l=oo(t.bottom??t.y??0,o),u=oo(t.left??t.x??0,r),c=oo(t.right??t.x??0,r);return{top:i,right:c,bottom:l,left:u,x:u+c,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Xw(t,r,o,i,l,u){const{x:c,y:p}=_l(t,[r,o,i]),{x:y,y:x}=_l({x:t.x+t.width,y:t.y+t.height},[r,o,i]),m=l-y,h=u-x;return{left:Math.floor(c),top:Math.floor(p),right:Math.floor(m),bottom:Math.floor(h)}}const Ic=(t,r,o,i,l,u)=>{const c=Yw(u,r,o),p=(r-c.x)/t.width,y=(o-c.y)/t.height,x=Math.min(p,y),m=ho(x,i,l),h=t.x+t.width/2,g=t.y+t.height/2,w=r/2-h*m,S=o/2-g*m,I=Xw(t,w,S,m,r,o),N={left:Math.min(I.left-c.left,0),top:Math.min(I.top-c.top,0),right:Math.min(I.right-c.right,0),bottom:Math.min(I.bottom-c.bottom,0)};return{x:w-N.left+N.right,y:S-N.top+N.bottom,zoom:m}},Is=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function xo(t){return t!=null&&t!=="parent"}function Sn(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function mh(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function hh(t,r={width:0,height:0},o,i,l){const u={...t},c=i.get(o);if(c){const p=c.origin||l;u.x+=c.internals.positionAbsolute.x-(r.width??0)*p[0],u.y+=c.internals.positionAbsolute.y-(r.height??0)*p[1]}return u}function Tp(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function Qw(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function Gw(t){return{...ih,...t||{}}}function xs(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:u,y:c}=Yt(t),p=Ts({x:u-((l==null?void 0:l.left)??0),y:c-((l==null?void 0:l.top)??0)},i),{x:y,y:x}=o?Ds(p,r):p;return{xSnapped:y,ySnapped:x,...p}}const Ec=t=>({width:t.offsetWidth,height:t.offsetHeight}),gh=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},Kw=["INPUT","SELECT","TEXTAREA"];function xh(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:Kw.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const yh=t=>"clientX"in t,Yt=(t,r)=>{var u,c;const o=yh(t),i=o?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,l=o?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Op=(t,r,o,i,l)=>{const u=r.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(c=>{const p=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:l,position:c.getAttribute("data-handlepos"),x:(p.left-o.left)/i,y:(p.top-o.top)/i,...Ec(c)}})};function vh({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:p}){const y=t*.125+l*.375+c*.375+o*.125,x=r*.125+u*.375+p*.375+i*.125,m=Math.abs(y-t),h=Math.abs(x-r);return[y,x,m,h]}function ol(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Ap({pos:t,x1:r,y1:o,x2:i,y2:l,c:u}){switch(t){case ye.Left:return[r-ol(r-i,u),o];case ye.Right:return[r+ol(i-r,u),o];case ye.Top:return[r,o-ol(o-l,u)];case ye.Bottom:return[r,o+ol(l-o,u)]}}function $l({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top,curvature:c=.25}){const[p,y]=Ap({pos:o,x1:t,y1:r,x2:i,y2:l,c}),[x,m]=Ap({pos:u,x1:i,y1:l,x2:t,y2:r,c}),[h,g,w,S]=vh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:p,sourceControlY:y,targetControlX:x,targetControlY:m});return[`M${t},${r} C${p},${y} ${x},${m} ${i},${l}`,h,g,w,S]}function wh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,u=o<t?o+l:o-l,c=Math.abs(i-r)/2,p=i<r?i+c:i-c;return[u,p,l,c]}function qw({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const c=l&&o?i+1e3:i,p=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return c+p}function Zw({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const u=Ol(El(t),El(r));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return Cs(c,Al(u))>0}const Jw=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,e1=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),t1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||Jw;let l;return uh(t)?l={...t}:l={...t,id:i(t)},e1(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Sh({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,u,c,p]=wh({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,u,c,p]}const $p={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},n1=({source:t,sourcePosition:r=ye.Bottom,target:o})=>r===ye.Left||r===ye.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},Lp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function r1({source:t,sourcePosition:r=ye.Bottom,target:o,targetPosition:i=ye.Top,center:l,offset:u,stepPosition:c}){const p=$p[r],y=$p[i],x={x:t.x+p.x*u,y:t.y+p.y*u},m={x:o.x+y.x*u,y:o.y+y.y*u},h=n1({source:x,sourcePosition:r,target:m}),g=h.x!==0?"x":"y",w=h[g];let S=[],I,N;const C={x:0,y:0},T={x:0,y:0},[,,k,P]=wh({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(p[g]*y[g]===-1){g==="x"?(I=l.x??x.x+(m.x-x.x)*c,N=l.y??(x.y+m.y)/2):(I=l.x??(x.x+m.x)/2,N=l.y??x.y+(m.y-x.y)*c);const V=[{x:I,y:x.y},{x:I,y:m.y}],W=[{x:x.x,y:N},{x:m.x,y:N}];p[g]===w?S=g==="x"?V:W:S=g==="x"?W:V}else{const V=[{x:x.x,y:m.y}],W=[{x:m.x,y:x.y}];if(g==="x"?S=p.x===w?W:V:S=p.y===w?V:W,r===i){const X=Math.abs(t[g]-o[g]);if(X<=u){const Q=Math.min(u-1,u-X);p[g]===w?C[g]=(x[g]>t[g]?-1:1)*Q:T[g]=(m[g]>o[g]?-1:1)*Q}}if(r!==i){const X=g==="x"?"y":"x",Q=p[g]===y[X],A=x[X]>m[X],R=x[X]<m[X];(p[g]===1&&(!Q&&A||Q&&R)||p[g]!==1&&(!Q&&R||Q&&A))&&(S=g==="x"?V:W)}const K={x:x.x+C.x,y:x.y+C.y},q={x:m.x+T.x,y:m.y+T.y},H=Math.max(Math.abs(K.x-S[0].x),Math.abs(q.x-S[0].x)),L=Math.max(Math.abs(K.y-S[0].y),Math.abs(q.y-S[0].y));H>=L?(I=(K.x+q.x)/2,N=S[0].y):(I=S[0].x,N=(K.y+q.y)/2)}return[[t,{x:x.x+C.x,y:x.y+C.y},...S,{x:m.x+T.x,y:m.y+T.y},o],I,N,k,P]}function o1(t,r,o,i){const l=Math.min(Lp(t,r)/2,Lp(r,o)/2,i),{x:u,y:c}=r;if(t.x===u&&u===o.x||t.y===c&&c===o.y)return`L${u} ${c}`;if(t.y===c){const x=t.x<o.x?-1:1,m=t.y<o.y?1:-1;return`L ${u+l*x},${c}Q ${u},${c} ${u},${c+l*m}`}const p=t.x<o.x?1:-1,y=t.y<o.y?-1:1;return`L ${u},${c+l*y}Q ${u},${c} ${u+l*p},${c}`}function ac({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top,borderRadius:c=5,centerX:p,centerY:y,offset:x=20,stepPosition:m=.5}){const[h,g,w,S,I]=r1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:u,center:{x:p,y},offset:x,stepPosition:m});return[h.reduce((C,T,k)=>{let P="";return k>0&&k<h.length-1?P=o1(h[k-1],T,h[k+1],c):P=`${k===0?"M":"L"}${T.x} ${T.y}`,C+=P,C},""),g,w,S,I]}function zp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function s1(t){var h;const{sourceNode:r,targetNode:o}=t;if(!zp(r)||!zp(o))return null;const i=r.internals.handleBounds||Rp(r.handles),l=o.internals.handleBounds||Rp(o.handles),u=Fp((i==null?void 0:i.source)??[],t.sourceHandle),c=Fp(t.connectionMode===mo.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!u||!c)return(h=t.onError)==null||h.call(t,"008",nn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const p=(u==null?void 0:u.position)||ye.Bottom,y=(c==null?void 0:c.position)||ye.Top,x=Nr(r,u,p),m=Nr(o,c,y);return{sourceX:x.x,sourceY:x.y,targetX:m.x,targetY:m.y,sourcePosition:p,targetPosition:y}}function Rp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function Nr(t,r,o=ye.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,u=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:c,height:p}=r??Sn(t);if(i)return{x:l+c/2,y:u+p/2};switch((r==null?void 0:r.position)??o){case ye.Top:return{x:l+c/2,y:u};case ye.Right:return{x:l+c,y:u+p/2};case ye.Bottom:return{x:l+c/2,y:u+p};case ye.Left:return{x:l,y:u+p/2}}}function Fp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function uc(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function i1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const u=new Set;return t.reduce((c,p)=>([p.markerStart||i,p.markerEnd||l].forEach(y=>{if(y&&typeof y=="object"){const x=uc(y,r);u.has(x)||(c.push({id:x,color:y.color||o,...y}),u.add(x))}}),c),[]).sort((c,p)=>c.id.localeCompare(p.id))}const Nh=1e3,l1=10,_c={nodeOrigin:[0,0],nodeExtent:Ns,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},a1={..._c,checkEquality:!0};function jc(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function u1(t,r,o){const i=jc(_c,o);for(const l of t.values())if(l.parentId)bc(l,t,r,i);else{const u=bs(l,i.nodeOrigin),c=xo(l.extent)?l.extent:i.nodeExtent,p=Sr(u,c,Sn(l));l.internals.positionAbsolute=p}}function c1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(u):l.type==="target"&&i.push(u)}return{source:o,target:i}}function Mc(t){return t==="manual"}function cc(t,r,o,i={}){var x,m;const l=jc(a1,i),u={i:0},c=new Map(r),p=l!=null&&l.elevateNodesOnSelect&&!Mc(l.zIndexMode)?Nh:0;let y=t.length>0;r.clear(),o.clear();for(const h of t){let g=c.get(h.id);if(l.checkEquality&&h===(g==null?void 0:g.internals.userNode))r.set(h.id,g);else{const w=bs(h,l.nodeOrigin),S=xo(h.extent)?h.extent:l.nodeExtent,I=Sr(w,S,Sn(h));g={...l.defaults,...h,measured:{width:(x=h.measured)==null?void 0:x.width,height:(m=h.measured)==null?void 0:m.height},internals:{positionAbsolute:I,handleBounds:c1(h,g),z:kh(h,p,l.zIndexMode),userNode:h}},r.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(y=!1),h.parentId&&bc(g,r,o,i,u)}return y}function d1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function bc(t,r,o,i,l){const{elevateNodesOnSelect:u,nodeOrigin:c,nodeExtent:p,zIndexMode:y}=jc(_c,i),x=t.parentId,m=r.get(x);if(!m){console.warn(`Parent node ${x} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}d1(t,o),l&&!m.parentId&&m.internals.rootParentIndex===void 0&&y==="auto"&&(m.internals.rootParentIndex=++l.i,m.internals.z=m.internals.z+l.i*l1),l&&m.internals.rootParentIndex!==void 0&&(l.i=m.internals.rootParentIndex);const h=u&&!Mc(y)?Nh:0,{x:g,y:w,z:S}=f1(t,m,c,p,h,y),{positionAbsolute:I}=t.internals,N=g!==I.x||w!==I.y;(N||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:g,y:w}:I,z:S}})}function kh(t,r,o){const i=Ut(t.zIndex)?t.zIndex:0;return Mc(o)?i:i+(t.selected?r:0)}function f1(t,r,o,i,l,u){const{x:c,y:p}=r.internals.positionAbsolute,y=Sn(t),x=bs(t,o),m=xo(t.extent)?Sr(x,t.extent,y):x;let h=Sr({x:c+m.x,y:p+m.y},i,y);t.extent==="parent"&&(h=dh(h,y,r));const g=kh(t,l,u),w=r.internals.z??0;return{x:h.x,y:h.y,z:w>=g?w+1:g}}function Pc(t,r,o,i=[0,0]){var c;const l=[],u=new Map;for(const p of t){const y=r.get(p.parentId);if(!y)continue;const x=((c=u.get(p.parentId))==null?void 0:c.expandedRect)??go(y),m=ph(x,p.rect);u.set(p.parentId,{expandedRect:m,parent:y})}return u.size>0&&u.forEach(({expandedRect:p,parent:y},x)=>{var k;const m=y.internals.positionAbsolute,h=Sn(y),g=y.origin??i,w=p.x<m.x?Math.round(Math.abs(m.x-p.x)):0,S=p.y<m.y?Math.round(Math.abs(m.y-p.y)):0,I=Math.max(h.width,Math.round(p.width)),N=Math.max(h.height,Math.round(p.height)),C=(I-h.width)*g[0],T=(N-h.height)*g[1];(w>0||S>0||C||T)&&(l.push({id:x,type:"position",position:{x:y.position.x-w+C,y:y.position.y-S+T}}),(k=o.get(x))==null||k.forEach(P=>{t.some($=>$.id===P.id)||l.push({id:P.id,type:"position",position:{x:P.position.x+w,y:P.position.y+S}})})),(h.width<p.width||h.height<p.height||w||S)&&l.push({id:x,type:"dimensions",setAttributes:!0,dimensions:{width:I+(w?g[0]*w-C:0),height:N+(S?g[1]*S-T:0)}})}),l}function p1(t,r,o,i,l,u,c){const p=i==null?void 0:i.querySelector(".xyflow__viewport");let y=!1;if(!p)return{changes:[],updatedInternals:y};const x=[],m=window.getComputedStyle(p),{m22:h}=new window.DOMMatrixReadOnly(m.transform),g=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),y=!0;continue}const I=Ec(w.nodeElement),N=S.measured.width!==I.width||S.measured.height!==I.height;if(!!(I.width&&I.height&&(N||!S.internals.handleBounds||w.force))){const T=w.nodeElement.getBoundingClientRect(),k=xo(S.extent)?S.extent:u;let{positionAbsolute:P}=S.internals;S.parentId&&S.extent==="parent"?P=dh(P,I,r.get(S.parentId)):k&&(P=Sr(P,k,I));const $={...S,measured:I,internals:{...S.internals,positionAbsolute:P,handleBounds:{source:Op("source",w.nodeElement,T,h,S.id),target:Op("target",w.nodeElement,T,h,S.id)}}};r.set(S.id,$),S.parentId&&bc($,r,o,{nodeOrigin:l,zIndexMode:c}),y=!0,N&&(x.push({id:S.id,type:"dimensions",dimensions:I}),S.expandParent&&S.parentId&&g.push({id:S.id,parentId:S.parentId,rect:go($,l)}))}}if(g.length>0){const w=Pc(g,r,o,l);x.push(...w)}return{changes:x,updatedInternals:y}}async function m1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:u}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const c=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,u]],i),p=!!c&&(c.x!==o[0]||c.y!==o[1]||c.k!==o[2]);return Promise.resolve(p)}function Hp(t,r,o,i,l,u){let c=l;const p=i.get(c)||new Map;i.set(c,p.set(o,r)),c=`${l}-${t}`;const y=i.get(c)||new Map;if(i.set(c,y.set(o,r)),u){c=`${l}-${t}-${u}`;const x=i.get(c)||new Map;i.set(c,x.set(o,r))}}function Ch(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:u,sourceHandle:c=null,targetHandle:p=null}=i,y={edgeId:i.id,source:l,target:u,sourceHandle:c,targetHandle:p},x=`${l}-${c}--${u}-${p}`,m=`${u}-${p}--${l}-${c}`;Hp("source",y,m,t,l,c),Hp("target",y,x,t,u,p),r.set(i.id,i)}}function Ih(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:Ih(o,r):!1}function Vp(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function h1(t,r,o,i){const l=new Map;for(const[u,c]of t)if((c.selected||c.id===i)&&(!c.parentId||!Ih(c,t))&&(c.draggable||r&&typeof c.draggable>"u")){const p=t.get(u);p&&l.set(u,{id:u,position:p.position||{x:0,y:0},distance:{x:o.x-p.internals.positionAbsolute.x,y:o.y-p.internals.positionAbsolute.y},extent:p.extent,parentId:p.parentId,origin:p.origin,expandParent:p.expandParent,internals:{positionAbsolute:p.internals.positionAbsolute||{x:0,y:0}},measured:{width:p.measured.width??0,height:p.measured.height??0}})}return l}function Wu({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var c,p,y;const l=[];for(const[x,m]of r){const h=(c=o.get(x))==null?void 0:c.internals.userNode;h&&l.push({...h,position:m.position,dragging:i})}if(!t)return[l[0],l];const u=(p=o.get(t))==null?void 0:p.internals.userNode;return[u?{...u,position:((y=r.get(t))==null?void 0:y.position)||u.position,dragging:i}:l[0],l]}function g1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const u={x:o-l.distance.x,y:i-l.distance.y},c=Ds(u,r);return{x:c.x-u.x,y:c.y-u.y}}function x1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let u={x:null,y:null},c=0,p=new Map,y=!1,x={x:0,y:0},m=null,h=!1,g=null,w=!1,S=!1,I=null;function N({noDragClassName:T,handleSelector:k,domNode:P,isSelectable:$,nodeId:V,nodeClickDistance:W=0}){g=Ct(P);function K({x:X,y:Q}){const{nodeLookup:A,nodeExtent:R,snapGrid:z,snapToGrid:j,nodeOrigin:D,onNodeDrag:M,onSelectionDrag:b,onError:E,updateNodePositions:O}=r();u={x:X,y:Q};let G=!1;const Z=p.size>1,ne=Z&&R?lc(Ps(p)):null,re=Z&&j?g1({dragItems:p,snapGrid:z,x:X,y:Q}):null;for(const[ae,oe]of p){if(!A.has(ae))continue;let ue={x:X-oe.distance.x,y:Q-oe.distance.y};j&&(ue=re?{x:Math.round(ue.x+re.x),y:Math.round(ue.y+re.y)}:Ds(ue,z));let ve=null;if(Z&&R&&!oe.extent&&ne){const{positionAbsolute:we}=oe.internals,_e=we.x-ne.x+R[0][0],Te=we.x+oe.measured.width-ne.x2+R[1][0],je=we.y-ne.y+R[0][1],Xe=we.y+oe.measured.height-ne.y2+R[1][1];ve=[[_e,je],[Te,Xe]]}const{position:Se,positionAbsolute:Ce}=ch({nodeId:ae,nextPosition:ue,nodeLookup:A,nodeExtent:ve||R,nodeOrigin:D,onError:E});G=G||oe.position.x!==Se.x||oe.position.y!==Se.y,oe.position=Se,oe.internals.positionAbsolute=Ce}if(S=S||G,!!G&&(O(p,!0),I&&(i||M||!V&&b))){const[ae,oe]=Wu({nodeId:V,dragItems:p,nodeLookup:A});i==null||i(I,p,ae,oe),M==null||M(I,ae,oe),V||b==null||b(I,oe)}}async function q(){if(!m)return;const{transform:X,panBy:Q,autoPanSpeed:A,autoPanOnNodeDrag:R}=r();if(!R){y=!1,cancelAnimationFrame(c);return}const[z,j]=fh(x,m,A);(z!==0||j!==0)&&(u.x=(u.x??0)-z/X[2],u.y=(u.y??0)-j/X[2],await Q({x:z,y:j})&&K(u)),c=requestAnimationFrame(q)}function H(X){var Z;const{nodeLookup:Q,multiSelectionActive:A,nodesDraggable:R,transform:z,snapGrid:j,snapToGrid:D,selectNodesOnDrag:M,onNodeDragStart:b,onSelectionDragStart:E,unselectNodesAndEdges:O}=r();h=!0,(!M||!$)&&!A&&V&&((Z=Q.get(V))!=null&&Z.selected||O()),$&&M&&V&&(t==null||t(V));const G=xs(X.sourceEvent,{transform:z,snapGrid:j,snapToGrid:D,containerBounds:m});if(u=G,p=h1(Q,R,G,V),p.size>0&&(o||b||!V&&E)){const[ne,re]=Wu({nodeId:V,dragItems:p,nodeLookup:Q});o==null||o(X.sourceEvent,p,ne,re),b==null||b(X.sourceEvent,ne,re),V||E==null||E(X.sourceEvent,re)}}const L=Bm().clickDistance(W).on("start",X=>{const{domNode:Q,nodeDragThreshold:A,transform:R,snapGrid:z,snapToGrid:j}=r();m=(Q==null?void 0:Q.getBoundingClientRect())||null,w=!1,S=!1,I=X.sourceEvent,A===0&&H(X),u=xs(X.sourceEvent,{transform:R,snapGrid:z,snapToGrid:j,containerBounds:m}),x=Yt(X.sourceEvent,m)}).on("drag",X=>{const{autoPanOnNodeDrag:Q,transform:A,snapGrid:R,snapToGrid:z,nodeDragThreshold:j,nodeLookup:D}=r(),M=xs(X.sourceEvent,{transform:A,snapGrid:R,snapToGrid:z,containerBounds:m});if(I=X.sourceEvent,(X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1||V&&!D.has(V))&&(w=!0),!w){if(!y&&Q&&h&&(y=!0,q()),!h){const b=Yt(X.sourceEvent,m),E=b.x-x.x,O=b.y-x.y;Math.sqrt(E*E+O*O)>j&&H(X)}(u.x!==M.xSnapped||u.y!==M.ySnapped)&&p&&h&&(x=Yt(X.sourceEvent,m),K(M))}}).on("end",X=>{if(!(!h||w)&&(y=!1,h=!1,cancelAnimationFrame(c),p.size>0)){const{nodeLookup:Q,updateNodePositions:A,onNodeDragStop:R,onSelectionDragStop:z}=r();if(S&&(A(p,!1),S=!1),l||R||!V&&z){const[j,D]=Wu({nodeId:V,dragItems:p,nodeLookup:Q,dragging:!1});l==null||l(X.sourceEvent,p,j,D),R==null||R(X.sourceEvent,j,D),V||z==null||z(X.sourceEvent,D)}}}).filter(X=>{const Q=X.target;return!X.button&&(!T||!Vp(Q,`.${T}`,P))&&(!k||Vp(Q,k,P))});g.call(L)}function C(){g==null||g.on(".drag",null)}return{update:N,destroy:C}}function y1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const u of r.values())Cs(l,go(u))>0&&i.push(u);return i}const v1=250;function w1(t,r,o,i){var p,y;let l=[],u=1/0;const c=y1(t,o,r+v1);for(const x of c){const m=[...((p=x.internals.handleBounds)==null?void 0:p.source)??[],...((y=x.internals.handleBounds)==null?void 0:y.target)??[]];for(const h of m){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:g,y:w}=Nr(x,h,h.position,!0),S=Math.sqrt(Math.pow(g-t.x,2)+Math.pow(w-t.y,2));S>r||(S<u?(l=[{...h,x:g,y:w}],u=S):S===u&&l.push({...h,x:g,y:w}))}}if(!l.length)return null;if(l.length>1){const x=i.type==="source"?"target":"source";return l.find(m=>m.type===x)??l[0]}return l[0]}function Eh(t,r,o,i,l,u=!1){var x,m,h;const c=i.get(t);if(!c)return null;const p=l==="strict"?(x=c.internals.handleBounds)==null?void 0:x[r]:[...((m=c.internals.handleBounds)==null?void 0:m.source)??[],...((h=c.internals.handleBounds)==null?void 0:h.target)??[]],y=(o?p==null?void 0:p.find(g=>g.id===o):p==null?void 0:p[0])??null;return y&&u?{...y,...Nr(c,y,y.position,!0)}:y}function _h(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function S1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const jh=()=>!0;function N1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:u,isTarget:c,domNode:p,nodeLookup:y,lib:x,autoPanOnConnect:m,flowId:h,panBy:g,cancelConnection:w,onConnectStart:S,onConnect:I,onConnectEnd:N,isValidConnection:C=jh,onReconnectEnd:T,updateConnection:k,getTransform:P,getFromHandle:$,autoPanSpeed:V,dragThreshold:W=1,handleDomNode:K}){const q=gh(t.target);let H=0,L;const{x:X,y:Q}=Yt(t),A=_h(u,K),R=p==null?void 0:p.getBoundingClientRect();let z=!1;if(!R||!A)return;const j=Eh(l,A,i,y,r);if(!j)return;let D=Yt(t,R),M=!1,b=null,E=!1,O=null;function G(){if(!m||!R)return;const[Se,Ce]=fh(D,R,V);g({x:Se,y:Ce}),H=requestAnimationFrame(G)}const Z={...j,nodeId:l,type:A,position:j.position},ne=y.get(l);let ae={inProgress:!0,isValid:null,from:Nr(ne,Z,ye.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:ne,to:D,toHandle:null,toPosition:bp[Z.position],toNode:null,pointer:D};function oe(){z=!0,k(ae),S==null||S(t,{nodeId:l,handleId:i,handleType:A})}W===0&&oe();function ue(Se){if(!z){const{x:Xe,y:At}=Yt(Se),xt=Xe-X,yt=At-Q;if(!(xt*xt+yt*yt>W*W))return;oe()}if(!$()||!Z){ve(Se);return}const Ce=P();D=Yt(Se,R),L=w1(Ts(D,Ce,!1,[1,1]),o,y,Z),M||(G(),M=!0);const we=Mh(Se,{handle:L,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:c?"target":"source",isValidConnection:C,doc:q,lib:x,flowId:h,nodeLookup:y});O=we.handleDomNode,b=we.connection,E=S1(!!L,we.isValid);const _e=y.get(l),Te=_e?Nr(_e,Z,ye.Left,!0):ae.from,je={...ae,from:Te,isValid:E,to:we.toHandle&&E?_l({x:we.toHandle.x,y:we.toHandle.y},Ce):D,toHandle:we.toHandle,toPosition:E&&we.toHandle?we.toHandle.position:bp[Z.position],toNode:we.toHandle?y.get(we.toHandle.nodeId):null,pointer:D};k(je),ae=je}function ve(Se){if(!("touches"in Se&&Se.touches.length>0)){if(z){(L||O)&&b&&E&&(I==null||I(b));const{inProgress:Ce,...we}=ae,_e={...we,toPosition:ae.toHandle?ae.toPosition:null};N==null||N(Se,_e),u&&(T==null||T(Se,_e))}w(),cancelAnimationFrame(H),M=!1,E=!1,b=null,O=null,q.removeEventListener("mousemove",ue),q.removeEventListener("mouseup",ve),q.removeEventListener("touchmove",ue),q.removeEventListener("touchend",ve)}}q.addEventListener("mousemove",ue),q.addEventListener("mouseup",ve),q.addEventListener("touchmove",ue),q.addEventListener("touchend",ve)}function Mh(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:u,doc:c,lib:p,flowId:y,isValidConnection:x=jh,nodeLookup:m}){const h=u==="target",g=r?c.querySelector(`.${p}-flow__handle[data-id="${y}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=Yt(t),I=c.elementFromPoint(w,S),N=I!=null&&I.classList.contains(`${p}-flow__handle`)?I:g,C={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const T=_h(void 0,N),k=N.getAttribute("data-nodeid"),P=N.getAttribute("data-handleid"),$=N.classList.contains("connectable"),V=N.classList.contains("connectableend");if(!k||!T)return C;const W={source:h?k:i,sourceHandle:h?P:l,target:h?i:k,targetHandle:h?l:P};C.connection=W;const q=$&&V&&(o===mo.Strict?h&&T==="source"||!h&&T==="target":k!==i||P!==l);C.isValid=q&&x(W),C.toHandle=Eh(k,T,P,m,o,!0)}return C}const dc={onPointerDown:N1,isValid:Mh};function k1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=Ct(t);function u({translateExtent:p,width:y,height:x,zoomStep:m=1,pannable:h=!0,zoomable:g=!0,inversePan:w=!1}){const S=k=>{if(k.sourceEvent.type!=="wheel"||!r)return;const P=o(),$=k.sourceEvent.ctrlKey&&Is()?10:1,V=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*m,W=P[2]*Math.pow(2,V*$);r.scaleTo(W)};let I=[0,0];const N=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(I=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},C=k=>{const P=o();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!r)return;const $=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],V=[$[0]-I[0],$[1]-I[1]];I=$;const W=i()*Math.max(P[2],Math.log(P[2]))*(w?-1:1),K={x:P[0]-V[0]*W,y:P[1]-V[1]*W},q=[[0,0],[y,x]];r.setViewportConstrained({x:K.x,y:K.y,zoom:P[2]},q,p)},T=oh().on("start",N).on("zoom",h?C:null).on("zoom.wheel",g?S:null);l.call(T,{})}function c(){l.on("zoom",null)}return{update:u,destroy:c,pointer:Vt}}const Ll=t=>({x:t.x,y:t.y,zoom:t.k}),Uu=({x:t,y:r,zoom:o})=>Tl.translate(t,r).scale(o),lo=(t,r)=>t.target.closest(`.${r}`),bh=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),C1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Yu=(t,r=0,o=C1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},Ph=t=>{const r=t.ctrlKey&&Is()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function I1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:c,onPanZoomStart:p,onPanZoom:y,onPanZoomEnd:x}){return m=>{if(lo(m,r))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const h=o.property("__zoom").k||1;if(m.ctrlKey&&c){const N=Vt(m),C=Ph(m),T=h*Math.pow(2,C);i.scaleTo(o,T,N,m);return}const g=m.deltaMode===1?20:1;let w=l===yr.Vertical?0:m.deltaX*g,S=l===yr.Horizontal?0:m.deltaY*g;!Is()&&m.shiftKey&&l!==yr.Vertical&&(w=m.deltaY*g,S=0),i.translateBy(o,-(w/h)*u,-(S/h)*u,{internal:!0});const I=Ll(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(y==null||y(m,I),t.panScrollTimeout=setTimeout(()=>{x==null||x(m,I),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,p==null||p(m,I))}}function E1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const u=i.type==="wheel",c=!r&&u&&!i.ctrlKey,p=lo(i,t);if(i.ctrlKey&&u&&p&&i.preventDefault(),c||p)return null;i.preventDefault(),o.call(this,i,l)}}function _1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var u,c,p;if((u=i.sourceEvent)!=null&&u.internal)return;const l=Ll(i.transform);t.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((p=i.sourceEvent)==null?void 0:p.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function j1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return u=>{var c,p;t.usedRightMouseButton=!!(o&&bh(r,t.mouseButton??0)),(c=u.sourceEvent)!=null&&c.sync||i([u.transform.x,u.transform.y,u.transform.k]),l&&!((p=u.sourceEvent)!=null&&p.internal)&&(l==null||l(u.sourceEvent,Ll(u.transform)))}}function M1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:u}){return c=>{var p;if(!((p=c.sourceEvent)!=null&&p.internal)&&(t.isZoomingOrPanning=!1,u&&bh(r,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&u(c.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const y=Ll(c.transform);t.prevViewport=y,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(c.sourceEvent,y)},o?150:0)}}}function b1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:c,noWheelClassName:p,noPanClassName:y,lib:x,connectionInProgress:m}){return h=>{var N;const g=t||r,w=o&&h.ctrlKey,S=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(lo(h,`${x}-flow__node`)||lo(h,`${x}-flow__edge`)))return!0;if(!i&&!g&&!l&&!u&&!o||c||m&&!S||lo(h,p)&&S||lo(h,y)&&(!S||l&&S&&!t)||!o&&h.ctrlKey&&S)return!1;if(!o&&h.type==="touchstart"&&((N=h.touches)==null?void 0:N.length)>1)return h.preventDefault(),!1;if(!g&&!l&&!w&&S||!i&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(i)&&!i.includes(h.button)&&h.type==="mousedown")return!1;const I=Array.isArray(i)&&i.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||S)&&I}}function P1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:u,onPanZoomStart:c,onPanZoomEnd:p,onDraggingChange:y}){const x={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=t.getBoundingClientRect(),h=oh().scaleExtent([r,o]).translateExtent(i),g=Ct(t).call(h);T({x:l.x,y:l.y,zoom:ho(l.zoom,r,o)},[[0,0],[m.width,m.height]],i);const w=g.on("wheel.zoom"),S=g.on("dblclick.zoom");h.wheelDelta(Ph);function I(L,X){return g?new Promise(Q=>{h==null||h.interpolate((X==null?void 0:X.interpolate)==="linear"?gs:pl).transform(Yu(g,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>Q(!0)),L)}):Promise.resolve(!1)}function N({noWheelClassName:L,noPanClassName:X,onPaneContextMenu:Q,userSelectionActive:A,panOnScroll:R,panOnDrag:z,panOnScrollMode:j,panOnScrollSpeed:D,preventScrolling:M,zoomOnPinch:b,zoomOnScroll:E,zoomOnDoubleClick:O,zoomActivationKeyPressed:G,lib:Z,onTransformChange:ne,connectionInProgress:re,paneClickDistance:ae,selectionOnDrag:oe}){A&&!x.isZoomingOrPanning&&C();const ue=R&&!G&&!A;h.clickDistance(oe?1/0:!Ut(ae)||ae<0?0:ae);const ve=ue?I1({zoomPanValues:x,noWheelClassName:L,d3Selection:g,d3Zoom:h,panOnScrollMode:j,panOnScrollSpeed:D,zoomOnPinch:b,onPanZoomStart:c,onPanZoom:u,onPanZoomEnd:p}):E1({noWheelClassName:L,preventScrolling:M,d3ZoomHandler:w});if(g.on("wheel.zoom",ve,{passive:!1}),!A){const Ce=_1({zoomPanValues:x,onDraggingChange:y,onPanZoomStart:c});h.on("start",Ce);const we=j1({zoomPanValues:x,panOnDrag:z,onPaneContextMenu:!!Q,onPanZoom:u,onTransformChange:ne});h.on("zoom",we);const _e=M1({zoomPanValues:x,panOnDrag:z,panOnScroll:R,onPaneContextMenu:Q,onPanZoomEnd:p,onDraggingChange:y});h.on("end",_e)}const Se=b1({zoomActivationKeyPressed:G,panOnDrag:z,zoomOnScroll:E,panOnScroll:R,zoomOnDoubleClick:O,zoomOnPinch:b,userSelectionActive:A,noPanClassName:X,noWheelClassName:L,lib:Z,connectionInProgress:re});h.filter(Se),O?g.on("dblclick.zoom",S):g.on("dblclick.zoom",null)}function C(){h.on("zoom",null)}async function T(L,X,Q){const A=Uu(L),R=h==null?void 0:h.constrain()(A,X,Q);return R&&await I(R),new Promise(z=>z(R))}async function k(L,X){const Q=Uu(L);return await I(Q,X),new Promise(A=>A(Q))}function P(L){if(g){const X=Uu(L),Q=g.property("__zoom");(Q.k!==L.zoom||Q.x!==L.x||Q.y!==L.y)&&(h==null||h.transform(g,X,null,{sync:!0}))}}function $(){const L=g?rh(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function V(L,X){return g?new Promise(Q=>{h==null||h.interpolate((X==null?void 0:X.interpolate)==="linear"?gs:pl).scaleTo(Yu(g,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>Q(!0)),L)}):Promise.resolve(!1)}function W(L,X){return g?new Promise(Q=>{h==null||h.interpolate((X==null?void 0:X.interpolate)==="linear"?gs:pl).scaleBy(Yu(g,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>Q(!0)),L)}):Promise.resolve(!1)}function K(L){h==null||h.scaleExtent(L)}function q(L){h==null||h.translateExtent(L)}function H(L){const X=!Ut(L)||L<0?0:L;h==null||h.clickDistance(X)}return{update:N,destroy:C,setViewport:k,setViewportConstrained:T,getViewport:$,scaleTo:V,scaleBy:W,setScaleExtent:K,setTranslateExtent:q,syncViewport:P,setClickDistance:H}}var kr;(function(t){t.Line="line",t.Handle="handle"})(kr||(kr={}));const D1=["top-left","top-right","bottom-left","bottom-right"],T1=["top","right","bottom","left"];function O1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:u}){const c=t-r,p=o-i,y=[c>0?1:c<0?-1:0,p>0?1:p<0?-1:0];return c&&l&&(y[0]=y[0]*-1),p&&u&&(y[1]=y[1]*-1),y}function Bp(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Wn(t,r){return Math.max(0,r-t)}function Un(t,r){return Math.max(0,t-r)}function sl(t,r,o){return Math.max(0,r-t,t-o)}function Wp(t,r){return t?!r:r}function A1(t,r,o,i,l,u,c,p){let{affectsX:y,affectsY:x}=r;const{isHorizontal:m,isVertical:h}=r,g=m&&h,{xSnapped:w,ySnapped:S}=o,{minWidth:I,maxWidth:N,minHeight:C,maxHeight:T}=i,{x:k,y:P,width:$,height:V,aspectRatio:W}=t;let K=Math.floor(m?w-t.pointerX:0),q=Math.floor(h?S-t.pointerY:0);const H=$+(y?-K:K),L=V+(x?-q:q),X=-u[0]*$,Q=-u[1]*V;let A=sl(H,I,N),R=sl(L,C,T);if(c){let D=0,M=0;y&&K<0?D=Wn(k+K+X,c[0][0]):!y&&K>0&&(D=Un(k+H+X,c[1][0])),x&&q<0?M=Wn(P+q+Q,c[0][1]):!x&&q>0&&(M=Un(P+L+Q,c[1][1])),A=Math.max(A,D),R=Math.max(R,M)}if(p){let D=0,M=0;y&&K>0?D=Un(k+K,p[0][0]):!y&&K<0&&(D=Wn(k+H,p[1][0])),x&&q>0?M=Un(P+q,p[0][1]):!x&&q<0&&(M=Wn(P+L,p[1][1])),A=Math.max(A,D),R=Math.max(R,M)}if(l){if(m){const D=sl(H/W,C,T)*W;if(A=Math.max(A,D),c){let M=0;!y&&!x||y&&!x&&g?M=Un(P+Q+H/W,c[1][1])*W:M=Wn(P+Q+(y?K:-K)/W,c[0][1])*W,A=Math.max(A,M)}if(p){let M=0;!y&&!x||y&&!x&&g?M=Wn(P+H/W,p[1][1])*W:M=Un(P+(y?K:-K)/W,p[0][1])*W,A=Math.max(A,M)}}if(h){const D=sl(L*W,I,N)/W;if(R=Math.max(R,D),c){let M=0;!y&&!x||x&&!y&&g?M=Un(k+L*W+X,c[1][0])/W:M=Wn(k+(x?q:-q)*W+X,c[0][0])/W,R=Math.max(R,M)}if(p){let M=0;!y&&!x||x&&!y&&g?M=Wn(k+L*W,p[1][0])/W:M=Un(k+(x?q:-q)*W,p[0][0])/W,R=Math.max(R,M)}}}q=q+(q<0?R:-R),K=K+(K<0?A:-A),l&&(g?H>L*W?q=(Wp(y,x)?-K:K)/W:K=(Wp(y,x)?-q:q)*W:m?(q=K/W,x=y):(K=q*W,y=x));const z=y?k+K:k,j=x?P+q:P;return{width:$+(y?-K:K),height:V+(x?-q:q),x:u[0]*K*(y?-1:1)+z,y:u[1]*q*(x?-1:1)+j}}const Dh={width:0,height:0,x:0,y:0},$1={...Dh,pointerX:0,pointerY:0,aspectRatio:1};function L1(t){return[[0,0],[t.measured.width,t.measured.height]]}function z1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,u=t.measured.width??0,c=t.measured.height??0,p=o[0]*u,y=o[1]*c;return[[i-p,l-y],[i+u-p,l+c-y]]}function R1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const u=Ct(t);let c={controlDirection:Bp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function p({controlPosition:x,boundaries:m,keepAspectRatio:h,resizeDirection:g,onResizeStart:w,onResize:S,onResizeEnd:I,shouldResize:N}){let C={...Dh},T={...$1};c={boundaries:m,resizeDirection:g,keepAspectRatio:h,controlDirection:Bp(x)};let k,P=null,$=[],V,W,K,q=!1;const H=Bm().on("start",L=>{const{nodeLookup:X,transform:Q,snapGrid:A,snapToGrid:R,nodeOrigin:z,paneDomNode:j}=o();if(k=X.get(r),!k)return;P=(j==null?void 0:j.getBoundingClientRect())??null;const{xSnapped:D,ySnapped:M}=xs(L.sourceEvent,{transform:Q,snapGrid:A,snapToGrid:R,containerBounds:P});C={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},T={...C,pointerX:D,pointerY:M,aspectRatio:C.width/C.height},V=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(V=X.get(k.parentId),W=V&&k.extent==="parent"?L1(V):void 0),$=[],K=void 0;for(const[b,E]of X)if(E.parentId===r&&($.push({id:b,position:{...E.position},extent:E.extent}),E.extent==="parent"||E.expandParent)){const O=z1(E,k,E.origin??z);K?K=[[Math.min(O[0][0],K[0][0]),Math.min(O[0][1],K[0][1])],[Math.max(O[1][0],K[1][0]),Math.max(O[1][1],K[1][1])]]:K=O}w==null||w(L,{...C})}).on("drag",L=>{const{transform:X,snapGrid:Q,snapToGrid:A,nodeOrigin:R}=o(),z=xs(L.sourceEvent,{transform:X,snapGrid:Q,snapToGrid:A,containerBounds:P}),j=[];if(!k)return;const{x:D,y:M,width:b,height:E}=C,O={},G=k.origin??R,{width:Z,height:ne,x:re,y:ae}=A1(T,c.controlDirection,z,c.boundaries,c.keepAspectRatio,G,W,K),oe=Z!==b,ue=ne!==E,ve=re!==D&&oe,Se=ae!==M&&ue;if(!ve&&!Se&&!oe&&!ue)return;if((ve||Se||G[0]===1||G[1]===1)&&(O.x=ve?re:C.x,O.y=Se?ae:C.y,C.x=O.x,C.y=O.y,$.length>0)){const Te=re-D,je=ae-M;for(const Xe of $)Xe.position={x:Xe.position.x-Te+G[0]*(Z-b),y:Xe.position.y-je+G[1]*(ne-E)},j.push(Xe)}if((oe||ue)&&(O.width=oe&&(!c.resizeDirection||c.resizeDirection==="horizontal")?Z:C.width,O.height=ue&&(!c.resizeDirection||c.resizeDirection==="vertical")?ne:C.height,C.width=O.width,C.height=O.height),V&&k.expandParent){const Te=G[0]*(O.width??0);O.x&&O.x<Te&&(C.x=Te,T.x=T.x-(O.x-Te));const je=G[1]*(O.height??0);O.y&&O.y<je&&(C.y=je,T.y=T.y-(O.y-je))}const Ce=O1({width:C.width,prevWidth:b,height:C.height,prevHeight:E,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),we={...C,direction:Ce};(N==null?void 0:N(L,we))!==!1&&(q=!0,S==null||S(L,we),i(O,j))}).on("end",L=>{q&&(I==null||I(L,{...C}),l==null||l({...C}),q=!1)});u.call(H)}function y(){u.on(".drag",null)}return{update:p,destroy:y}}var Xu={exports:{}},Qu={},Gu={exports:{}},Ku={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function F1(){if(Up)return Ku;Up=1;var t=_s();function r(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,u=t.useLayoutEffect,c=t.useDebugValue;function p(h,g){var w=g(),S=i({inst:{value:w,getSnapshot:g}}),I=S[0].inst,N=S[1];return u(function(){I.value=w,I.getSnapshot=g,y(I)&&N({inst:I})},[h,w,g]),l(function(){return y(I)&&N({inst:I}),h(function(){y(I)&&N({inst:I})})},[h]),c(w),w}function y(h){var g=h.getSnapshot;h=h.value;try{var w=g();return!o(h,w)}catch{return!0}}function x(h,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:p;return Ku.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Ku}var Yp;function H1(){return Yp||(Yp=1,Gu.exports=F1()),Gu.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function V1(){if(Xp)return Qu;Xp=1;var t=_s(),r=H1();function o(x,m){return x===m&&(x!==0||1/x===1/m)||x!==x&&m!==m}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,u=t.useRef,c=t.useEffect,p=t.useMemo,y=t.useDebugValue;return Qu.useSyncExternalStoreWithSelector=function(x,m,h,g,w){var S=u(null);if(S.current===null){var I={hasValue:!1,value:null};S.current=I}else I=S.current;S=p(function(){function C(V){if(!T){if(T=!0,k=V,V=g(V),w!==void 0&&I.hasValue){var W=I.value;if(w(W,V))return P=W}return P=V}if(W=P,i(k,V))return W;var K=g(V);return w!==void 0&&w(W,K)?(k=V,W):(k=V,P=K)}var T=!1,k,P,$=h===void 0?null:h;return[function(){return C(m())},$===null?void 0:function(){return C($())}]},[m,h,g,w]);var N=l(x,S[0],S[1]);return c(function(){I.hasValue=!0,I.value=N},[N]),y(N),N},Qu}var Qp;function B1(){return Qp||(Qp=1,Xu.exports=V1()),Xu.exports}var W1=B1();const U1=_m(W1),Y1={},Gp=t=>{let r;const o=new Set,i=(m,h)=>{const g=typeof m=="function"?m(r):m;if(!Object.is(g,r)){const w=r;r=h??(typeof g!="object"||g===null)?g:Object.assign({},r,g),o.forEach(S=>S(r,w))}},l=()=>r,y={setState:i,getState:l,getInitialState:()=>x,subscribe:m=>(o.add(m),()=>o.delete(m)),destroy:()=>{(Y1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},x=r=t(i,l,y);return y},X1=t=>t?Gp(t):Gp,{useDebugValue:Q1}=ps,{useSyncExternalStoreWithSelector:G1}=U1,K1=t=>t;function Th(t,r=K1,o){const i=G1(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return Q1(i),i}const Kp=(t,r)=>{const o=X1(t),i=(l,u=r)=>Th(o,l,u);return Object.assign(i,o),i},q1=(t,r)=>t?Kp(t,r):Kp;function Re(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var Z1=jm();const zl=F.createContext(null),J1=zl.Provider,Oh=nn.error001();function Me(t,r){const o=F.useContext(zl);if(o===null)throw new Error(Oh);return Th(o,t,r)}function Fe(){const t=F.useContext(zl);if(t===null)throw new Error(Oh);return F.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const qp={display:"none"},eS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ah="react-flow__node-desc",$h="react-flow__edge-desc",tS="react-flow__aria-live",nS=t=>t.ariaLiveMessage,rS=t=>t.ariaLabelConfig;function oS({rfId:t}){const r=Me(nS);return d.jsx("div",{id:`${tS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:eS,children:r})}function sS({rfId:t,disableKeyboardA11y:r}){const o=Me(rS);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${Ah}-${t}`,style:qp,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${$h}-${t}`,style:qp,children:o["edge.a11yDescription.default"]}),!r&&d.jsx(oS,{rfId:t})]})}const Rl=F.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},u)=>{const c=`${t}`.split("-");return d.jsx("div",{className:Ge(["react-flow__panel",o,...c]),style:i,ref:u,...l,children:r})});Rl.displayName="Panel";function iS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:d.jsx(Rl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const lS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},il=t=>t.id;function aS(t,r){return Re(t.selectedNodes.map(il),r.selectedNodes.map(il))&&Re(t.selectedEdges.map(il),r.selectedEdges.map(il))}function uS({onSelectionChange:t}){const r=Fe(),{selectedNodes:o,selectedEdges:i}=Me(lS,aS);return F.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[o,i,t]),null}const cS=t=>!!t.onSelectionChangeHandlers;function dS({onSelectionChange:t}){const r=Me(cS);return t||r?d.jsx(uS,{onSelectionChange:t}):null}const Lh=[0,0],fS={x:0,y:0,zoom:1},pS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Zp=[...pS,"rfId"],mS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Jp={translateExtent:Ns,nodeOrigin:Lh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function hS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:c,reset:p,setDefaultNodesAndEdges:y}=Me(mS,Re),x=Fe();F.useEffect(()=>(y(t.defaultNodes,t.defaultEdges),()=>{m.current=Jp,p()}),[]);const m=F.useRef(Jp);return F.useEffect(()=>{for(const h of Zp){const g=t[h],w=m.current[h];g!==w&&(typeof t[h]>"u"||(h==="nodes"?r(g):h==="edges"?o(g):h==="minZoom"?i(g):h==="maxZoom"?l(g):h==="translateExtent"?u(g):h==="nodeExtent"?c(g):h==="ariaLabelConfig"?x.setState({ariaLabelConfig:Gw(g)}):h==="fitView"?x.setState({fitViewQueued:g}):h==="fitViewOptions"?x.setState({fitViewOptions:g}):x.setState({[h]:g})))}m.current=t},Zp.map(h=>t[h])),null}function em(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function gS(t){var i;const[r,o]=F.useState(t==="system"?null:t);return F.useEffect(()=>{if(t!=="system"){o(t);return}const l=em(),u=()=>o(l!=null&&l.matches?"dark":"light");return u(),l==null||l.addEventListener("change",u),()=>{l==null||l.removeEventListener("change",u)}},[t]),r!==null?r:(i=em())!=null&&i.matches?"dark":"light"}const tm=typeof document<"u"?document:null;function Es(t=null,r={target:tm,actInsideInputWithModifier:!0}){const[o,i]=F.useState(!1),l=F.useRef(!1),u=F.useRef(new Set([])),[c,p]=F.useMemo(()=>{if(t!==null){const x=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=x.reduce((h,g)=>h.concat(...g),[]);return[x,m]}return[[],[]]},[t]);return F.useEffect(()=>{const y=(r==null?void 0:r.target)??tm,x=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const m=w=>{var N,C;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!x)&&xh(w))return!1;const I=rm(w.code,p);if(u.current.add(w[I]),nm(c,u.current,!1)){const T=((C=(N=w.composedPath)==null?void 0:N.call(w))==null?void 0:C[0])||w.target,k=(T==null?void 0:T.nodeName)==="BUTTON"||(T==null?void 0:T.nodeName)==="A";r.preventDefault!==!1&&(l.current||!k)&&w.preventDefault(),i(!0)}},h=w=>{const S=rm(w.code,p);nm(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(w[S]),w.key==="Meta"&&u.current.clear(),l.current=!1},g=()=>{u.current.clear(),i(!1)};return y==null||y.addEventListener("keydown",m),y==null||y.addEventListener("keyup",h),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{y==null||y.removeEventListener("keydown",m),y==null||y.removeEventListener("keyup",h),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[t,i]),o}function nm(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function rm(t,r){return r.includes(t)?"code":"key"}const xS=()=>{const t=Fe();return F.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,u],panZoom:c}=t.getState();return c?(await c.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??u},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:u,maxZoom:c,panZoom:p}=t.getState(),y=Ic(r,i,l,u,c,(o==null?void 0:o.padding)??.1);return p?(await p.setViewport(y,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:u,domNode:c}=t.getState();if(!c)return r;const{x:p,y}=c.getBoundingClientRect(),x={x:r.x-p,y:r.y-y},m=o.snapGrid??l,h=o.snapToGrid??u;return Ts(x,i,h,m)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:u}=i.getBoundingClientRect(),c=_l(r,o);return{x:c.x+l,y:c.y+u}}}),[])};function zh(t,r){const o=[],i=new Map,l=[];for(const u of t)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const c=i.get(u.id);c?c.push(u):i.set(u.id,[u])}for(const u of r){const c=i.get(u.id);if(!c){o.push(u);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){o.push({...c[0].item});continue}const p={...u};for(const y of c)yS(y,p);o.push(p)}return l.length&&l.forEach(u=>{u.index!==void 0?o.splice(u.index,0,{...u.item}):o.push({...u.item})}),o}function yS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function vS(t,r){return zh(t,r)}function wS(t,r){return zh(t,r)}function mr(t,r){return{id:t,type:"select",selected:r}}function ao(t,r=new Set,o=!1){const i=[];for(const[l,u]of t){const c=r.has(l);!(u.selected===void 0&&!c)&&u.selected!==c&&(o&&(u.selected=c),i.push(mr(u.id,c)))}return i}function om({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(u=>[u.id,u]));for(const[u,c]of t.entries()){const p=r.get(c.id),y=((l=p==null?void 0:p.internals)==null?void 0:l.userNode)??p;y!==void 0&&y!==c&&o.push({id:c.id,item:c,type:"replace"}),y===void 0&&o.push({item:c,type:"add",index:u})}for(const[u]of r)i.get(u)===void 0&&o.push({id:u,type:"remove"});return o}function sm(t){return{id:t.id,type:"remove"}}const im=t=>Rw(t),SS=t=>uh(t);function Rh(t){return F.forwardRef(t)}const NS=typeof window<"u"?F.useLayoutEffect:F.useEffect;function lm(t){const[r,o]=F.useState(BigInt(0)),[i]=F.useState(()=>kS(()=>o(l=>l+BigInt(1))));return NS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function kS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const Fh=F.createContext(null);function CS({children:t}){const r=Fe(),o=F.useCallback(p=>{const{nodes:y=[],setNodes:x,hasDefaultNodes:m,onNodesChange:h,nodeLookup:g,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let I=y;for(const C of p)I=typeof C=="function"?C(I):C;let N=om({items:I,lookup:g});for(const C of S.values())N=C(N);m&&x(I),N.length>0?h==null||h(N):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:C,nodes:T,setNodes:k}=r.getState();C&&k(T)})},[]),i=lm(o),l=F.useCallback(p=>{const{edges:y=[],setEdges:x,hasDefaultEdges:m,onEdgesChange:h,edgeLookup:g}=r.getState();let w=y;for(const S of p)w=typeof S=="function"?S(w):S;m?x(w):h&&h(om({items:w,lookup:g}))},[]),u=lm(l),c=F.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return d.jsx(Fh.Provider,{value:c,children:t})}function IS(){const t=F.useContext(Fh);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const ES=t=>!!t.panZoom;function _r(){const t=xS(),r=Fe(),o=IS(),i=Me(ES),l=F.useMemo(()=>{const u=h=>r.getState().nodeLookup.get(h),c=h=>{o.nodeQueue.push(h)},p=h=>{o.edgeQueue.push(h)},y=h=>{var C,T;const{nodeLookup:g,nodeOrigin:w}=r.getState(),S=im(h)?h:g.get(h.id),I=S.parentId?hh(S.position,S.measured,S.parentId,g,w):S.position,N={...S,position:I,width:((C=S.measured)==null?void 0:C.width)??S.width,height:((T=S.measured)==null?void 0:T.height)??S.height};return go(N)},x=(h,g,w={replace:!1})=>{c(S=>S.map(I=>{if(I.id===h){const N=typeof g=="function"?g(I):g;return w.replace&&im(N)?N:{...I,...N}}return I}))},m=(h,g,w={replace:!1})=>{p(S=>S.map(I=>{if(I.id===h){const N=typeof g=="function"?g(I):g;return w.replace&&SS(N)?N:{...I,...N}}return I}))};return{getNodes:()=>r.getState().nodes.map(h=>({...h})),getNode:h=>{var g;return(g=u(h))==null?void 0:g.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:h=[]}=r.getState();return h.map(g=>({...g}))},getEdge:h=>r.getState().edgeLookup.get(h),setNodes:c,setEdges:p,addNodes:h=>{const g=Array.isArray(h)?h:[h];o.nodeQueue.push(w=>[...w,...g])},addEdges:h=>{const g=Array.isArray(h)?h:[h];o.edgeQueue.push(w=>[...w,...g])},toObject:()=>{const{nodes:h=[],edges:g=[],transform:w}=r.getState(),[S,I,N]=w;return{nodes:h.map(C=>({...C})),edges:g.map(C=>({...C})),viewport:{x:S,y:I,zoom:N}}},deleteElements:async({nodes:h=[],edges:g=[]})=>{const{nodes:w,edges:S,onNodesDelete:I,onEdgesDelete:N,triggerNodeChanges:C,triggerEdgeChanges:T,onDelete:k,onBeforeDelete:P}=r.getState(),{nodes:$,edges:V}=await Ww({nodesToRemove:h,edgesToRemove:g,nodes:w,edges:S,onBeforeDelete:P}),W=V.length>0,K=$.length>0;if(W){const q=V.map(sm);N==null||N(V),T(q)}if(K){const q=$.map(sm);I==null||I($),C(q)}return(K||W)&&(k==null||k({nodes:$,edges:V})),{deletedNodes:$,deletedEdges:V}},getIntersectingNodes:(h,g=!0,w)=>{const S=Dp(h),I=S?h:y(h),N=w!==void 0;return I?(w||r.getState().nodes).filter(C=>{const T=r.getState().nodeLookup.get(C.id);if(T&&!S&&(C.id===h.id||!T.internals.positionAbsolute))return!1;const k=go(N?C:T),P=Cs(k,I);return g&&P>0||P>=k.width*k.height||P>=I.width*I.height}):[]},isNodeIntersecting:(h,g,w=!0)=>{const I=Dp(h)?h:y(h);if(!I)return!1;const N=Cs(I,g);return w&&N>0||N>=g.width*g.height||N>=I.width*I.height},updateNode:x,updateNodeData:(h,g,w={replace:!1})=>{x(h,S=>{const I=typeof g=="function"?g(S):g;return w.replace?{...S,data:I}:{...S,data:{...S.data,...I}}},w)},updateEdge:m,updateEdgeData:(h,g,w={replace:!1})=>{m(h,S=>{const I=typeof g=="function"?g(S):g;return w.replace?{...S,data:I}:{...S,data:{...S.data,...I}}},w)},getNodesBounds:h=>{const{nodeLookup:g,nodeOrigin:w}=r.getState();return Fw(h,{nodeLookup:g,nodeOrigin:w})},getHandleConnections:({type:h,id:g,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${h}${g?`-${g}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:h,handleId:g,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${h?g?`-${h}-${g}`:`-${h}`:""}`))==null?void 0:S.values())??[])},fitView:async h=>{const g=r.getState().fitViewResolver??Qw();return r.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:g}),o.nodeQueue.push(w=>[...w]),g.promise}}},[]);return F.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const am=t=>t.selected,_S=typeof window<"u"?window:void 0;function jS({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=Fe(),{deleteElements:i}=_r(),l=Es(t,{actInsideInputWithModifier:!1}),u=Es(r,{target:_S});F.useEffect(()=>{if(l){const{edges:c,nodes:p}=o.getState();i({nodes:p.filter(am),edges:c.filter(am)}),o.setState({nodesSelectionActive:!1})}},[l]),F.useEffect(()=>{o.setState({multiSelectionActive:u})},[u])}function MS(t){const r=Fe();F.useEffect(()=>{const o=()=>{var l,u,c,p;if(!t.current||!(((u=(l=t.current).checkVisibility)==null?void 0:u.call(l))??!0))return!1;const i=Ec(t.current);(i.height===0||i.width===0)&&((p=(c=r.getState()).onError)==null||p.call(c,"004",nn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Fl={position:"absolute",width:"100%",height:"100%",top:0,left:0},bS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function PS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=yr.Free,zoomOnDoubleClick:c=!0,panOnDrag:p=!0,defaultViewport:y,translateExtent:x,minZoom:m,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:w=!0,children:S,noWheelClassName:I,noPanClassName:N,onViewportChange:C,isControlledViewport:T,paneClickDistance:k,selectionOnDrag:P}){const $=Fe(),V=F.useRef(null),{userSelectionActive:W,lib:K,connectionInProgress:q}=Me(bS,Re),H=Es(g),L=F.useRef();MS(V);const X=F.useCallback(Q=>{C==null||C({x:Q[0],y:Q[1],zoom:Q[2]}),T||$.setState({transform:Q})},[C,T]);return F.useEffect(()=>{if(V.current){L.current=P1({domNode:V.current,minZoom:m,maxZoom:h,translateExtent:x,viewport:y,onDraggingChange:z=>$.setState({paneDragging:z}),onPanZoomStart:(z,j)=>{const{onViewportChangeStart:D,onMoveStart:M}=$.getState();M==null||M(z,j),D==null||D(j)},onPanZoom:(z,j)=>{const{onViewportChange:D,onMove:M}=$.getState();M==null||M(z,j),D==null||D(j)},onPanZoomEnd:(z,j)=>{const{onViewportChangeEnd:D,onMoveEnd:M}=$.getState();M==null||M(z,j),D==null||D(j)}});const{x:Q,y:A,zoom:R}=L.current.getViewport();return $.setState({panZoom:L.current,transform:[Q,A,R],domNode:V.current.closest(".react-flow")}),()=>{var z;(z=L.current)==null||z.destroy()}}},[]),F.useEffect(()=>{var Q;(Q=L.current)==null||Q.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:c,panOnDrag:p,zoomActivationKeyPressed:H,preventScrolling:w,noPanClassName:N,userSelectionActive:W,noWheelClassName:I,lib:K,onTransformChange:X,connectionInProgress:q,selectionOnDrag:P,paneClickDistance:k})},[t,r,o,i,l,u,c,p,H,w,N,W,I,K,X,q,P,k]),d.jsx("div",{className:"react-flow__renderer",ref:V,style:Fl,children:S})}const DS=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function TS(){const{userSelectionActive:t,userSelectionRect:r}=Me(DS,Re);return t&&r?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const qu=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},OS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function AS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=ks.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:c,onSelectionEnd:p,onPaneClick:y,onPaneContextMenu:x,onPaneScroll:m,onPaneMouseEnter:h,onPaneMouseMove:g,onPaneMouseLeave:w,children:S}){const I=Fe(),{userSelectionActive:N,elementsSelectable:C,dragging:T,connectionInProgress:k}=Me(OS,Re),P=C&&(t||N),$=F.useRef(null),V=F.useRef(),W=F.useRef(new Set),K=F.useRef(new Set),q=F.useRef(!1),H=D=>{if(q.current||k){q.current=!1;return}y==null||y(D),I.getState().resetSelectedElements(),I.setState({nodesSelectionActive:!1})},L=D=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){D.preventDefault();return}x==null||x(D)},X=m?D=>m(D):void 0,Q=D=>{q.current&&(D.stopPropagation(),q.current=!1)},A=D=>{var ne,re;const{domNode:M}=I.getState();if(V.current=M==null?void 0:M.getBoundingClientRect(),!V.current)return;const b=D.target===$.current;if(!b&&!!D.target.closest(".nokey")||!t||!(u&&b||r)||D.button!==0||!D.isPrimary)return;(re=(ne=D.target)==null?void 0:ne.setPointerCapture)==null||re.call(ne,D.pointerId),q.current=!1;const{x:G,y:Z}=Yt(D.nativeEvent,V.current);I.setState({userSelectionRect:{width:0,height:0,startX:G,startY:Z,x:G,y:Z}}),b||(D.stopPropagation(),D.preventDefault())},R=D=>{const{userSelectionRect:M,transform:b,nodeLookup:E,edgeLookup:O,connectionLookup:G,triggerNodeChanges:Z,triggerEdgeChanges:ne,defaultEdgeOptions:re,resetSelectedElements:ae}=I.getState();if(!V.current||!M)return;const{x:oe,y:ue}=Yt(D.nativeEvent,V.current),{startX:ve,startY:Se}=M;if(!q.current){const je=r?0:l;if(Math.hypot(oe-ve,ue-Se)<=je)return;ae(),c==null||c(D)}q.current=!0;const Ce={startX:ve,startY:Se,x:oe<ve?oe:ve,y:ue<Se?ue:Se,width:Math.abs(oe-ve),height:Math.abs(ue-Se)},we=W.current,_e=K.current;W.current=new Set(Cc(E,Ce,b,o===ks.Partial,!0).map(je=>je.id)),K.current=new Set;const Te=(re==null?void 0:re.selectable)??!0;for(const je of W.current){const Xe=G.get(je);if(Xe)for(const{edgeId:At}of Xe.values()){const xt=O.get(At);xt&&(xt.selectable??Te)&&K.current.add(At)}}if(!Tp(we,W.current)){const je=ao(E,W.current,!0);Z(je)}if(!Tp(_e,K.current)){const je=ao(O,K.current);ne(je)}I.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},z=D=>{var M,b;D.button===0&&((b=(M=D.target)==null?void 0:M.releasePointerCapture)==null||b.call(M,D.pointerId),!N&&D.target===$.current&&I.getState().userSelectionRect&&(H==null||H(D)),I.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(p==null||p(D),I.setState({nodesSelectionActive:W.current.size>0})))},j=i===!0||Array.isArray(i)&&i.includes(0);return d.jsxs("div",{className:Ge(["react-flow__pane",{draggable:j,dragging:T,selection:t}]),onClick:P?void 0:qu(H,$),onContextMenu:qu(L,$),onWheel:qu(X,$),onPointerEnter:P?void 0:h,onPointerMove:P?R:g,onPointerUp:P?z:void 0,onPointerDownCapture:P?A:void 0,onClickCapture:P?Q:void 0,onPointerLeave:w,ref:$,style:Fl,children:[S,d.jsx(TS,{})]})}function fc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:c,nodeLookup:p,onError:y}=r.getState(),x=p.get(t);if(!x){y==null||y("012",nn.error012(t));return}r.setState({nodesSelectionActive:!1}),x.selected?(o||x.selected&&c)&&(u({nodes:[x],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):l([t])}function Hh({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:u,nodeClickDistance:c}){const p=Fe(),[y,x]=F.useState(!1),m=F.useRef();return F.useEffect(()=>{m.current=x1({getStoreItems:()=>p.getState(),onNodeMouseDown:h=>{fc({id:h,store:p,nodeRef:t})},onDragStart:()=>{x(!0)},onDragStop:()=>{x(!1)}})},[]),F.useEffect(()=>{var h,g;if(r)(h=m.current)==null||h.destroy();else if(t.current)return(g=m.current)==null||g.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:l,nodeClickDistance:c}),()=>{var w;(w=m.current)==null||w.destroy()}},[o,i,r,u,t,l]),y}const $S=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function Vh(){const t=Fe();return F.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:u,nodesDraggable:c,onError:p,updateNodePositions:y,nodeLookup:x,nodeOrigin:m}=t.getState(),h=new Map,g=$S(c),w=l?u[0]:5,S=l?u[1]:5,I=o.direction.x*w*o.factor,N=o.direction.y*S*o.factor;for(const[,C]of x){if(!g(C))continue;let T={x:C.internals.positionAbsolute.x+I,y:C.internals.positionAbsolute.y+N};l&&(T=Ds(T,u));const{position:k,positionAbsolute:P}=ch({nodeId:C.id,nextPosition:T,nodeLookup:x,nodeExtent:i,nodeOrigin:m,onError:p});C.position=k,C.internals.positionAbsolute=P,h.set(C.id,C)}y(h)},[])}const Dc=F.createContext(null),LS=Dc.Provider;Dc.Consumer;const Bh=()=>F.useContext(Dc),zS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),RS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:u,connection:c}=i,{fromHandle:p,toHandle:y,isValid:x}=c,m=(y==null?void 0:y.nodeId)===t&&(y==null?void 0:y.id)===r&&(y==null?void 0:y.type)===o;return{connectingFrom:(p==null?void 0:p.nodeId)===t&&(p==null?void 0:p.id)===r&&(p==null?void 0:p.type)===o,connectingTo:m,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:u===mo.Strict?(p==null?void 0:p.type)!==o:t!==(p==null?void 0:p.nodeId)||r!==(p==null?void 0:p.id),connectionInProcess:!!p,clickConnectionInProcess:!!l,valid:m&&x}};function FS({type:t="source",position:r=ye.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:c,onConnect:p,children:y,className:x,onMouseDown:m,onTouchStart:h,...g},w){var R,z;const S=c||null,I=t==="target",N=Fe(),C=Bh(),{connectOnClick:T,noPanClassName:k,rfId:P}=Me(zS,Re),{connectingFrom:$,connectingTo:V,clickConnecting:W,isPossibleEndHandle:K,connectionInProcess:q,clickConnectionInProcess:H,valid:L}=Me(RS(C,S,t),Re);C||(z=(R=N.getState()).onError)==null||z.call(R,"010",nn.error010());const X=j=>{const{defaultEdgeOptions:D,onConnect:M,hasDefaultEdges:b}=N.getState(),E={...D,...j};if(b){const{edges:O,setEdges:G}=N.getState();G(t1(E,O))}M==null||M(E),p==null||p(E)},Q=j=>{if(!C)return;const D=yh(j.nativeEvent);if(l&&(D&&j.button===0||!D)){const M=N.getState();dc.onPointerDown(j.nativeEvent,{handleDomNode:j.currentTarget,autoPanOnConnect:M.autoPanOnConnect,connectionMode:M.connectionMode,connectionRadius:M.connectionRadius,domNode:M.domNode,nodeLookup:M.nodeLookup,lib:M.lib,isTarget:I,handleId:S,nodeId:C,flowId:M.rfId,panBy:M.panBy,cancelConnection:M.cancelConnection,onConnectStart:M.onConnectStart,onConnectEnd:M.onConnectEnd,updateConnection:M.updateConnection,onConnect:X,isValidConnection:o||M.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:M.autoPanSpeed,dragThreshold:M.connectionDragThreshold})}D?m==null||m(j):h==null||h(j)},A=j=>{const{onClickConnectStart:D,onClickConnectEnd:M,connectionClickStartHandle:b,connectionMode:E,isValidConnection:O,lib:G,rfId:Z,nodeLookup:ne,connection:re}=N.getState();if(!C||!b&&!l)return;if(!b){D==null||D(j.nativeEvent,{nodeId:C,handleId:S,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:C,type:t,id:S}});return}const ae=gh(j.target),oe=o||O,{connection:ue,isValid:ve}=dc.isValid(j.nativeEvent,{handle:{nodeId:C,id:S,type:t},connectionMode:E,fromNodeId:b.nodeId,fromHandleId:b.id||null,fromType:b.type,isValidConnection:oe,flowId:Z,doc:ae,lib:G,nodeLookup:ne});ve&&ue&&X(ue);const Se=structuredClone(re);delete Se.inProgress,Se.toPosition=Se.toHandle?Se.toHandle.position:null,M==null||M(j,Se),N.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":S,"data-nodeid":C,"data-handlepos":r,"data-id":`${P}-${C}-${S}-${t}`,className:Ge(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",k,x,{source:!I,target:I,connectable:i,connectablestart:l,connectableend:u,clickconnecting:W,connectingfrom:$,connectingto:V,valid:L,connectionindicator:i&&(!q||K)&&(q||H?u:l)}]),onMouseDown:Q,onTouchStart:Q,onClick:T?A:void 0,ref:w,...g,children:y})}const Cr=F.memo(Rh(FS));function HS({data:t,isConnectable:r,sourcePosition:o=ye.Bottom}){return d.jsxs(d.Fragment,{children:[t==null?void 0:t.label,d.jsx(Cr,{type:"source",position:o,isConnectable:r})]})}function VS({data:t,isConnectable:r,targetPosition:o=ye.Top,sourcePosition:i=ye.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(Cr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,d.jsx(Cr,{type:"source",position:i,isConnectable:r})]})}function BS(){return null}function WS({data:t,isConnectable:r,targetPosition:o=ye.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(Cr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const jl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},um={input:HS,default:VS,output:WS,group:BS};function US(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const YS=t=>{const{width:r,height:o,x:i,y:l}=Ps(t.nodeLookup,{filter:u=>!!u.selected});return{width:Ut(r)?r:null,height:Ut(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function XS({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=Fe(),{width:l,height:u,transformString:c,userSelectionActive:p}=Me(YS,Re),y=Vh(),x=F.useRef(null);if(F.useEffect(()=>{var g;o||(g=x.current)==null||g.focus({preventScroll:!0})},[o]),Hh({nodeRef:x}),p||!l||!u)return null;const m=t?g=>{const w=i.getState().nodes.filter(S=>S.selected);t(g,w)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(jl,g.key)&&(g.preventDefault(),y({direction:jl[g.key],factor:g.shiftKey?4:1}))};return d.jsx("div",{className:Ge(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c},children:d.jsx("div",{ref:x,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:o?void 0:-1,onKeyDown:o?void 0:h,style:{width:l,height:u}})})}const cm=typeof window<"u"?window:void 0,QS=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Wh({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,paneClickDistance:p,deleteKeyCode:y,selectionKeyCode:x,selectionOnDrag:m,selectionMode:h,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:I,zoomActivationKeyCode:N,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:P,panOnScrollSpeed:$,panOnScrollMode:V,zoomOnDoubleClick:W,panOnDrag:K,defaultViewport:q,translateExtent:H,minZoom:L,maxZoom:X,preventScrolling:Q,onSelectionContextMenu:A,noWheelClassName:R,noPanClassName:z,disableKeyboardA11y:j,onViewportChange:D,isControlledViewport:M}){const{nodesSelectionActive:b,userSelectionActive:E}=Me(QS,Re),O=Es(x,{target:cm}),G=Es(I,{target:cm}),Z=G||K,ne=G||P,re=m&&Z!==!0,ae=O||E||re;return jS({deleteKeyCode:y,multiSelectionKeyCode:S}),d.jsx(PS,{onPaneContextMenu:u,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:ne,panOnScrollSpeed:$,panOnScrollMode:V,zoomOnDoubleClick:W,panOnDrag:!O&&Z,defaultViewport:q,translateExtent:H,minZoom:L,maxZoom:X,zoomActivationKeyCode:N,preventScrolling:Q,noWheelClassName:R,noPanClassName:z,onViewportChange:D,isControlledViewport:M,paneClickDistance:p,selectionOnDrag:re,children:d.jsxs(AS,{onSelectionStart:g,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:Z,isSelecting:!!ae,selectionMode:h,selectionKeyPressed:O,paneClickDistance:p,selectionOnDrag:re,children:[t,b&&d.jsx(XS,{onSelectionContextMenu:A,noPanClassName:z,disableKeyboardA11y:j})]})})}Wh.displayName="FlowRenderer";const GS=F.memo(Wh),KS=t=>r=>t?Cc(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function qS(t){return Me(F.useCallback(KS(t),[t]),Re)}const ZS=t=>t.updateNodeInternals;function JS(){const t=Me(ZS),[r]=F.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const u=l.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:l.target,force:!0})}),t(i)}));return F.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function eN({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=Fe(),u=F.useRef(null),c=F.useRef(null),p=F.useRef(t.sourcePosition),y=F.useRef(t.targetPosition),x=F.useRef(r),m=o&&!!t.internals.handleBounds;return F.useEffect(()=>{u.current&&!t.hidden&&(!m||c.current!==u.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(u.current),c.current=u.current)},[m,t.hidden]),F.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),F.useEffect(()=>{if(u.current){const h=x.current!==r,g=p.current!==t.sourcePosition,w=y.current!==t.targetPosition;(h||g||w)&&(x.current=r,p.current=t.sourcePosition,y.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),u}function tN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:u,onDoubleClick:c,nodesDraggable:p,elementsSelectable:y,nodesConnectable:x,nodesFocusable:m,resizeObserver:h,noDragClassName:g,noPanClassName:w,disableKeyboardA11y:S,rfId:I,nodeTypes:N,nodeClickDistance:C,onError:T}){const{node:k,internals:P,isParent:$}=Me(oe=>{const ue=oe.nodeLookup.get(t),ve=oe.parentLookup.has(t);return{node:ue,internals:ue.internals,isParent:ve}},Re);let V=k.type||"default",W=(N==null?void 0:N[V])||um[V];W===void 0&&(T==null||T("003",nn.error003(V)),V="default",W=(N==null?void 0:N.default)||um.default);const K=!!(k.draggable||p&&typeof k.draggable>"u"),q=!!(k.selectable||y&&typeof k.selectable>"u"),H=!!(k.connectable||x&&typeof k.connectable>"u"),L=!!(k.focusable||m&&typeof k.focusable>"u"),X=Fe(),Q=mh(k),A=eN({node:k,nodeType:V,hasDimensions:Q,resizeObserver:h}),R=Hh({nodeRef:A,disabled:k.hidden||!K,noDragClassName:g,handleSelector:k.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:C}),z=Vh();if(k.hidden)return null;const j=Sn(k),D=US(k),M=q||K||r||o||i||l,b=o?oe=>o(oe,{...P.userNode}):void 0,E=i?oe=>i(oe,{...P.userNode}):void 0,O=l?oe=>l(oe,{...P.userNode}):void 0,G=u?oe=>u(oe,{...P.userNode}):void 0,Z=c?oe=>c(oe,{...P.userNode}):void 0,ne=oe=>{const{selectNodesOnDrag:ue,nodeDragThreshold:ve}=X.getState();q&&(!ue||!K||ve>0)&&fc({id:t,store:X,nodeRef:A}),r&&r(oe,{...P.userNode})},re=oe=>{if(!(xh(oe.nativeEvent)||S)){if(sh.includes(oe.key)&&q){const ue=oe.key==="Escape";fc({id:t,store:X,unselect:ue,nodeRef:A})}else if(K&&k.selected&&Object.prototype.hasOwnProperty.call(jl,oe.key)){oe.preventDefault();const{ariaLabelConfig:ue}=X.getState();X.setState({ariaLiveMessage:ue["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~P.positionAbsolute.x,y:~~P.positionAbsolute.y})}),z({direction:jl[oe.key],factor:oe.shiftKey?4:1})}}},ae=()=>{var _e;if(S||!((_e=A.current)!=null&&_e.matches(":focus-visible")))return;const{transform:oe,width:ue,height:ve,autoPanOnNodeFocus:Se,setCenter:Ce}=X.getState();if(!Se)return;Cc(new Map([[t,k]]),{x:0,y:0,width:ue,height:ve},oe,!0).length>0||Ce(k.position.x+j.width/2,k.position.y+j.height/2,{zoom:oe[2]})};return d.jsx("div",{className:Ge(["react-flow__node",`react-flow__node-${V}`,{[w]:K},k.className,{selected:k.selected,selectable:q,parent:$,draggable:K,dragging:R}]),ref:A,style:{zIndex:P.z,transform:`translate(${P.positionAbsolute.x}px,${P.positionAbsolute.y}px)`,pointerEvents:M?"all":"none",visibility:Q?"visible":"hidden",...k.style,...D},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:b,onMouseMove:E,onMouseLeave:O,onContextMenu:G,onClick:ne,onDoubleClick:Z,onKeyDown:L?re:void 0,tabIndex:L?0:void 0,onFocus:L?ae:void 0,role:k.ariaRole??(L?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Ah}-${I}`,"aria-label":k.ariaLabel,...k.domAttributes,children:d.jsx(LS,{value:t,children:d.jsx(W,{id:t,data:k.data,type:V,positionAbsoluteX:P.positionAbsolute.x,positionAbsoluteY:P.positionAbsolute.y,selected:k.selected??!1,selectable:q,draggable:K,deletable:k.deletable??!0,isConnectable:H,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:R,dragHandle:k.dragHandle,zIndex:P.z,parentId:k.parentId,...j})})})}var nN=F.memo(tN);const rN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Uh(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:u}=Me(rN,Re),c=qS(t.onlyRenderVisibleElements),p=JS();return d.jsx("div",{className:"react-flow__nodes",style:Fl,children:c.map(y=>d.jsx(nN,{id:y,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:p,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:u},y))})}Uh.displayName="NodeRenderer";const oN=F.memo(Uh);function sN(t){return Me(F.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const u=o.nodeLookup.get(l.source),c=o.nodeLookup.get(l.target);u&&c&&Zw({sourceNode:u,targetNode:c,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),Re)}const iN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return d.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},lN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return d.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},dm={[Il.Arrow]:iN,[Il.ArrowClosed]:lN};function aN(t){const r=Fe();return F.useMemo(()=>{var l,u;return Object.prototype.hasOwnProperty.call(dm,t)?dm[t]:((u=(l=r.getState()).onError)==null||u.call(l,"009",nn.error009(t)),null)},[t])}const uN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:p="auto-start-reverse"})=>{const y=aN(r);return y?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:p,refX:"0",refY:"0",children:d.jsx(y,{color:o,strokeWidth:c})}):null},Yh=({defaultColor:t,rfId:r})=>{const o=Me(u=>u.edges),i=Me(u=>u.defaultEdgeOptions),l=F.useMemo(()=>i1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:l.map(u=>d.jsx(uN,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};Yh.displayName="MarkerDefinitions";var cN=F.memo(Yh);function Xh({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:c=[2,4],labelBgBorderRadius:p=2,children:y,className:x,...m}){const[h,g]=F.useState({x:1,y:0,width:0,height:0}),w=Ge(["react-flow__edge-textwrapper",x]),S=F.useRef(null);return F.useEffect(()=>{if(S.current){const I=S.current.getBBox();g({x:I.x,y:I.y,width:I.width,height:I.height})}},[o]),o?d.jsxs("g",{transform:`translate(${t-h.width/2} ${r-h.height/2})`,className:w,visibility:h.width?"visible":"hidden",...m,children:[l&&d.jsx("rect",{width:h.width+2*c[0],x:-c[0],y:-c[1],height:h.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:p,ry:p}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:S,style:i,children:o}),y]}):null}Xh.displayName="EdgeText";const dN=F.memo(Xh);function yo({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:p,labelBgBorderRadius:y,interactionWidth:x=20,...m}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...m,d:t,fill:"none",className:Ge(["react-flow__edge-path",m.className])}),x?d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}):null,i&&Ut(r)&&Ut(o)?d.jsx(dN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:p,labelBgBorderRadius:y}):null]})}function fm({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===ye.Left||t===ye.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function Qh({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top}){const[c,p]=fm({pos:o,x1:t,y1:r,x2:i,y2:l}),[y,x]=fm({pos:u,x1:i,y1:l,x2:t,y2:r}),[m,h,g,w]=vh({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:c,sourceControlY:p,targetControlX:y,targetControlY:x});return[`M${t},${r} C${c},${p} ${y},${x} ${i},${l}`,m,h,g,w]}function Gh(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:p,label:y,labelStyle:x,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:I,markerStart:N,interactionWidth:C})=>{const[T,k,P]=Qh({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p}),$=t.isInternal?void 0:r;return d.jsx(yo,{id:$,path:T,labelX:k,labelY:P,label:y,labelStyle:x,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:I,markerStart:N,interactionWidth:C})})}const fN=Gh({isInternal:!1}),Kh=Gh({isInternal:!0});fN.displayName="SimpleBezierEdge";Kh.displayName="SimpleBezierEdgeInternal";function qh(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:c,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:h,style:g,sourcePosition:w=ye.Bottom,targetPosition:S=ye.Top,markerEnd:I,markerStart:N,pathOptions:C,interactionWidth:T})=>{const[k,P,$]=ac({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:u,targetPosition:S,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset,stepPosition:C==null?void 0:C.stepPosition}),V=t.isInternal?void 0:r;return d.jsx(yo,{id:V,path:k,labelX:P,labelY:$,label:c,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:I,markerStart:N,interactionWidth:T})})}const Zh=qh({isInternal:!1}),Jh=qh({isInternal:!0});Zh.displayName="SmoothStepEdge";Jh.displayName="SmoothStepEdgeInternal";function eg(t){return F.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return d.jsx(Zh,{...o,id:i,pathOptions:F.useMemo(()=>{var u;return{borderRadius:0,offset:(u=o.pathOptions)==null?void 0:u.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const pN=eg({isInternal:!1}),tg=eg({isInternal:!0});pN.displayName="StepEdge";tg.displayName="StepEdgeInternal";function ng(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:c,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:w,markerStart:S,interactionWidth:I})=>{const[N,C,T]=Sh({sourceX:o,sourceY:i,targetX:l,targetY:u}),k=t.isInternal?void 0:r;return d.jsx(yo,{id:k,path:N,labelX:C,labelY:T,label:c,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:w,markerStart:S,interactionWidth:I})})}const mN=ng({isInternal:!1}),rg=ng({isInternal:!0});mN.displayName="StraightEdge";rg.displayName="StraightEdgeInternal";function og(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c=ye.Bottom,targetPosition:p=ye.Top,label:y,labelStyle:x,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:I,markerStart:N,pathOptions:C,interactionWidth:T})=>{const[k,P,$]=$l({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p,curvature:C==null?void 0:C.curvature}),V=t.isInternal?void 0:r;return d.jsx(yo,{id:V,path:k,labelX:P,labelY:$,label:y,labelStyle:x,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:w,style:S,markerEnd:I,markerStart:N,interactionWidth:T})})}const hN=og({isInternal:!1}),sg=og({isInternal:!0});hN.displayName="BezierEdge";sg.displayName="BezierEdgeInternal";const pm={default:sg,straight:rg,step:tg,smoothstep:Jh,simplebezier:Kh},mm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},gN=(t,r,o)=>o===ye.Left?t-r:o===ye.Right?t+r:t,xN=(t,r,o)=>o===ye.Top?t-r:o===ye.Bottom?t+r:t,hm="react-flow__edgeupdater";function gm({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:u,onMouseOut:c,type:p}){return d.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:c,className:Ge([hm,`${hm}-${p}`]),cx:gN(r,i,t),cy:xN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function yN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:u,targetY:c,sourcePosition:p,targetPosition:y,onReconnect:x,onReconnectStart:m,onReconnectEnd:h,setReconnecting:g,setUpdateHover:w}){const S=Fe(),I=(P,$)=>{if(P.button!==0)return;const{autoPanOnConnect:V,domNode:W,isValidConnection:K,connectionMode:q,connectionRadius:H,lib:L,onConnectStart:X,onConnectEnd:Q,cancelConnection:A,nodeLookup:R,rfId:z,panBy:j,updateConnection:D}=S.getState(),M=$.type==="target",b=(G,Z)=>{g(!1),h==null||h(G,o,$.type,Z)},E=G=>x==null?void 0:x(o,G),O=(G,Z)=>{g(!0),m==null||m(P,o,$.type),X==null||X(G,Z)};dc.onPointerDown(P.nativeEvent,{autoPanOnConnect:V,connectionMode:q,connectionRadius:H,domNode:W,handleId:$.id,nodeId:$.nodeId,nodeLookup:R,isTarget:M,edgeUpdaterType:$.type,lib:L,flowId:z,cancelConnection:A,panBy:j,isValidConnection:K,onConnect:E,onConnectStart:O,onConnectEnd:Q,onReconnectEnd:b,updateConnection:D,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:P.currentTarget})},N=P=>I(P,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),C=P=>I(P,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),T=()=>w(!0),k=()=>w(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(gm,{position:p,centerX:i,centerY:l,radius:r,onMouseDown:N,onMouseEnter:T,onMouseOut:k,type:"source"}),(t===!0||t==="target")&&d.jsx(gm,{position:y,centerX:u,centerY:c,radius:r,onMouseDown:C,onMouseEnter:T,onMouseOut:k,type:"target"})]})}function vN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:u,onContextMenu:c,onMouseEnter:p,onMouseMove:y,onMouseLeave:x,reconnectRadius:m,onReconnect:h,onReconnectStart:g,onReconnectEnd:w,rfId:S,edgeTypes:I,noPanClassName:N,onError:C,disableKeyboardA11y:T}){let k=Me(Ce=>Ce.edgeLookup.get(t));const P=Me(Ce=>Ce.defaultEdgeOptions);k=P?{...P,...k}:k;let $=k.type||"default",V=(I==null?void 0:I[$])||pm[$];V===void 0&&(C==null||C("011",nn.error011($)),$="default",V=(I==null?void 0:I.default)||pm.default);const W=!!(k.focusable||r&&typeof k.focusable>"u"),K=typeof h<"u"&&(k.reconnectable||o&&typeof k.reconnectable>"u"),q=!!(k.selectable||i&&typeof k.selectable>"u"),H=F.useRef(null),[L,X]=F.useState(!1),[Q,A]=F.useState(!1),R=Fe(),{zIndex:z,sourceX:j,sourceY:D,targetX:M,targetY:b,sourcePosition:E,targetPosition:O}=Me(F.useCallback(Ce=>{const we=Ce.nodeLookup.get(k.source),_e=Ce.nodeLookup.get(k.target);if(!we||!_e)return{zIndex:k.zIndex,...mm};const Te=s1({id:t,sourceNode:we,targetNode:_e,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:Ce.connectionMode,onError:C});return{zIndex:qw({selected:k.selected,zIndex:k.zIndex,sourceNode:we,targetNode:_e,elevateOnSelect:Ce.elevateEdgesOnSelect,zIndexMode:Ce.zIndexMode}),...Te||mm}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Re),G=F.useMemo(()=>k.markerStart?`url('#${uc(k.markerStart,S)}')`:void 0,[k.markerStart,S]),Z=F.useMemo(()=>k.markerEnd?`url('#${uc(k.markerEnd,S)}')`:void 0,[k.markerEnd,S]);if(k.hidden||j===null||D===null||M===null||b===null)return null;const ne=Ce=>{var je;const{addSelectedEdges:we,unselectNodesAndEdges:_e,multiSelectionActive:Te}=R.getState();q&&(R.setState({nodesSelectionActive:!1}),k.selected&&Te?(_e({nodes:[],edges:[k]}),(je=H.current)==null||je.blur()):we([t])),l&&l(Ce,k)},re=u?Ce=>{u(Ce,{...k})}:void 0,ae=c?Ce=>{c(Ce,{...k})}:void 0,oe=p?Ce=>{p(Ce,{...k})}:void 0,ue=y?Ce=>{y(Ce,{...k})}:void 0,ve=x?Ce=>{x(Ce,{...k})}:void 0,Se=Ce=>{var we;if(!T&&sh.includes(Ce.key)&&q){const{unselectNodesAndEdges:_e,addSelectedEdges:Te}=R.getState();Ce.key==="Escape"?((we=H.current)==null||we.blur(),_e({edges:[k]})):Te([t])}};return d.jsx("svg",{style:{zIndex:z},children:d.jsxs("g",{className:Ge(["react-flow__edge",`react-flow__edge-${$}`,k.className,N,{selected:k.selected,animated:k.animated,inactive:!q&&!l,updating:L,selectable:q}]),onClick:ne,onDoubleClick:re,onContextMenu:ae,onMouseEnter:oe,onMouseMove:ue,onMouseLeave:ve,onKeyDown:W?Se:void 0,tabIndex:W?0:void 0,role:k.ariaRole??(W?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":W?`${$h}-${S}`:void 0,ref:H,...k.domAttributes,children:[!Q&&d.jsx(V,{id:t,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:q,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:j,sourceY:D,targetX:M,targetY:b,sourcePosition:E,targetPosition:O,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:G,markerEnd:Z,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),K&&d.jsx(yN,{edge:k,isReconnectable:K,reconnectRadius:m,onReconnect:h,onReconnectStart:g,onReconnectEnd:w,sourceX:j,sourceY:D,targetX:M,targetY:b,sourcePosition:E,targetPosition:O,setUpdateHover:X,setReconnecting:A})]})})}var wN=F.memo(vN);const SN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function ig({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:u,onEdgeContextMenu:c,onEdgeMouseEnter:p,onEdgeMouseMove:y,onEdgeMouseLeave:x,onEdgeClick:m,reconnectRadius:h,onEdgeDoubleClick:g,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:I}){const{edgesFocusable:N,edgesReconnectable:C,elementsSelectable:T,onError:k}=Me(SN,Re),P=sN(r);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(cN,{defaultColor:t,rfId:o}),P.map($=>d.jsx(wN,{id:$,edgesFocusable:N,edgesReconnectable:C,elementsSelectable:T,noPanClassName:l,onReconnect:u,onContextMenu:c,onMouseEnter:p,onMouseMove:y,onMouseLeave:x,onClick:m,reconnectRadius:h,onDoubleClick:g,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:k,edgeTypes:i,disableKeyboardA11y:I},$))]})}ig.displayName="EdgeRenderer";const NN=F.memo(ig),kN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function CN({children:t}){const r=Me(kN);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function IN(t){const r=_r(),o=F.useRef(!1);F.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const EN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function _N(t){const r=Me(EN),o=Fe();return F.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function jN(t){return t.connection.inProgress?{...t.connection,to:Ts(t.connection.to,t.transform)}:{...t.connection}}function MN(t){return jN}function bN(t){const r=MN();return Me(r,Re)}const PN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function DN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:u,height:c,isValid:p,inProgress:y}=Me(PN,Re);return!(u&&l&&y)?null:d.jsx("svg",{style:t,width:u,height:c,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Ge(["react-flow__connection",ah(p)]),children:d.jsx(lg,{style:r,type:o,CustomComponent:i,isValid:p})})})}const lg=({style:t,type:r=Yn.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:u,fromNode:c,fromHandle:p,fromPosition:y,to:x,toNode:m,toHandle:h,toPosition:g,pointer:w}=bN();if(!l)return;if(o)return d.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:c,fromHandle:p,fromX:u.x,fromY:u.y,toX:x.x,toY:x.y,fromPosition:y,toPosition:g,connectionStatus:ah(i),toNode:m,toHandle:h,pointer:w});let S="";const I={sourceX:u.x,sourceY:u.y,sourcePosition:y,targetX:x.x,targetY:x.y,targetPosition:g};switch(r){case Yn.Bezier:[S]=$l(I);break;case Yn.SimpleBezier:[S]=Qh(I);break;case Yn.Step:[S]=ac({...I,borderRadius:0});break;case Yn.SmoothStep:[S]=ac(I);break;default:[S]=Sh(I)}return d.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};lg.displayName="ConnectionLine";const TN={};function xm(t=TN){F.useRef(t),Fe(),F.useEffect(()=>{},[t])}function ON(){Fe(),F.useRef(!1),F.useEffect(()=>{},[])}function ag({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:m,onSelectionContextMenu:h,onSelectionStart:g,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:I,connectionLineComponent:N,connectionLineContainerStyle:C,selectionKeyCode:T,selectionOnDrag:k,selectionMode:P,multiSelectionKeyCode:$,panActivationKeyCode:V,zoomActivationKeyCode:W,deleteKeyCode:K,onlyRenderVisibleElements:q,elementsSelectable:H,defaultViewport:L,translateExtent:X,minZoom:Q,maxZoom:A,preventScrolling:R,defaultMarkerColor:z,zoomOnScroll:j,zoomOnPinch:D,panOnScroll:M,panOnScrollSpeed:b,panOnScrollMode:E,zoomOnDoubleClick:O,panOnDrag:G,onPaneClick:Z,onPaneMouseEnter:ne,onPaneMouseMove:re,onPaneMouseLeave:ae,onPaneScroll:oe,onPaneContextMenu:ue,paneClickDistance:ve,nodeClickDistance:Se,onEdgeContextMenu:Ce,onEdgeMouseEnter:we,onEdgeMouseMove:_e,onEdgeMouseLeave:Te,reconnectRadius:je,onReconnect:Xe,onReconnectStart:At,onReconnectEnd:xt,noDragClassName:yt,noWheelClassName:_t,noPanClassName:sn,disableKeyboardA11y:Nn,nodeExtent:jr,rfId:Qn,viewport:ln,onViewportChange:an}){return xm(t),xm(r),ON(),IN(o),_N(ln),d.jsx(GS,{onPaneClick:Z,onPaneMouseEnter:ne,onPaneMouseMove:re,onPaneMouseLeave:ae,onPaneContextMenu:ue,onPaneScroll:oe,paneClickDistance:ve,deleteKeyCode:K,selectionKeyCode:T,selectionOnDrag:k,selectionMode:P,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:$,panActivationKeyCode:V,zoomActivationKeyCode:W,elementsSelectable:H,zoomOnScroll:j,zoomOnPinch:D,zoomOnDoubleClick:O,panOnScroll:M,panOnScrollSpeed:b,panOnScrollMode:E,panOnDrag:G,defaultViewport:L,translateExtent:X,minZoom:Q,maxZoom:A,onSelectionContextMenu:h,preventScrolling:R,noDragClassName:yt,noWheelClassName:_t,noPanClassName:sn,disableKeyboardA11y:Nn,onViewportChange:an,isControlledViewport:!!ln,children:d.jsxs(CN,{children:[d.jsx(NN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:c,onReconnect:Xe,onReconnectStart:At,onReconnectEnd:xt,onlyRenderVisibleElements:q,onEdgeContextMenu:Ce,onEdgeMouseEnter:we,onEdgeMouseMove:_e,onEdgeMouseLeave:Te,reconnectRadius:je,defaultMarkerColor:z,noPanClassName:sn,disableKeyboardA11y:Nn,rfId:Qn}),d.jsx(DN,{style:I,type:S,component:N,containerStyle:C}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(oN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:m,nodeClickDistance:Se,onlyRenderVisibleElements:q,noPanClassName:sn,noDragClassName:yt,disableKeyboardA11y:Nn,nodeExtent:jr,rfId:Qn}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}ag.displayName="GraphView";const AN=F.memo(ag),ym=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:c,fitViewOptions:p,minZoom:y=.5,maxZoom:x=2,nodeOrigin:m,nodeExtent:h,zIndexMode:g="basic"}={})=>{const w=new Map,S=new Map,I=new Map,N=new Map,C=i??r??[],T=o??t??[],k=m??[0,0],P=h??Ns;Ch(I,N,C);const $=cc(T,w,S,{nodeOrigin:k,nodeExtent:P,zIndexMode:g});let V=[0,0,1];if(c&&l&&u){const W=Ps(w,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:K,y:q,zoom:H}=Ic(W,l,u,y,x,(p==null?void 0:p.padding)??.1);V=[K,q,H]}return{rfId:"1",width:l??0,height:u??0,transform:V,nodes:T,nodesInitialized:$,nodeLookup:w,parentLookup:S,edges:C,edgeLookup:N,connectionLookup:I,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:y,maxZoom:x,translateExtent:Ns,nodeExtent:P,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:p,fitViewResolver:null,connection:{...lh},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Uw,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ih,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},$N=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:c,fitViewOptions:p,minZoom:y,maxZoom:x,nodeOrigin:m,nodeExtent:h,zIndexMode:g})=>q1((w,S)=>{async function I(){const{nodeLookup:N,panZoom:C,fitViewOptions:T,fitViewResolver:k,width:P,height:$,minZoom:V,maxZoom:W}=S();C&&(await Bw({nodes:N,width:P,height:$,panZoom:C,minZoom:V,maxZoom:W},T),k==null||k.resolve(!0),w({fitViewResolver:null}))}return{...ym({nodes:t,edges:r,width:l,height:u,fitView:c,fitViewOptions:p,minZoom:y,maxZoom:x,nodeOrigin:m,nodeExtent:h,defaultNodes:o,defaultEdges:i,zIndexMode:g}),setNodes:N=>{const{nodeLookup:C,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:P,fitViewQueued:$,zIndexMode:V}=S(),W=cc(N,C,T,{nodeOrigin:k,nodeExtent:h,elevateNodesOnSelect:P,checkEquality:!0,zIndexMode:V});$&&W?(I(),w({nodes:N,nodesInitialized:W,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:N,nodesInitialized:W})},setEdges:N=>{const{connectionLookup:C,edgeLookup:T}=S();Ch(C,T,N),w({edges:N})},setDefaultNodesAndEdges:(N,C)=>{if(N){const{setNodes:T}=S();T(N),w({hasDefaultNodes:!0})}if(C){const{setEdges:T}=S();T(C),w({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:C,nodeLookup:T,parentLookup:k,domNode:P,nodeOrigin:$,nodeExtent:V,debug:W,fitViewQueued:K,zIndexMode:q}=S(),{changes:H,updatedInternals:L}=p1(N,T,k,P,$,V,q);L&&(u1(T,k,{nodeOrigin:$,nodeExtent:V,zIndexMode:q}),K?(I(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(H==null?void 0:H.length)>0&&(W&&console.log("React Flow: trigger node changes",H),C==null||C(H)))},updateNodePositions:(N,C=!1)=>{const T=[];let k=[];const{nodeLookup:P,triggerNodeChanges:$,connection:V,updateConnection:W,onNodesChangeMiddlewareMap:K}=S();for(const[q,H]of N){const L=P.get(q),X=!!(L!=null&&L.expandParent&&(L!=null&&L.parentId)&&(H!=null&&H.position)),Q={id:q,type:"position",position:X?{x:Math.max(0,H.position.x),y:Math.max(0,H.position.y)}:H.position,dragging:C};if(L&&V.inProgress&&V.fromNode.id===L.id){const A=Nr(L,V.fromHandle,ye.Left,!0);W({...V,from:A})}X&&L.parentId&&T.push({id:q,parentId:L.parentId,rect:{...H.internals.positionAbsolute,width:H.measured.width??0,height:H.measured.height??0}}),k.push(Q)}if(T.length>0){const{parentLookup:q,nodeOrigin:H}=S(),L=Pc(T,P,q,H);k.push(...L)}for(const q of K.values())k=q(k);$(k)},triggerNodeChanges:N=>{const{onNodesChange:C,setNodes:T,nodes:k,hasDefaultNodes:P,debug:$}=S();if(N!=null&&N.length){if(P){const V=vS(N,k);T(V)}$&&console.log("React Flow: trigger node changes",N),C==null||C(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:C,setEdges:T,edges:k,hasDefaultEdges:P,debug:$}=S();if(N!=null&&N.length){if(P){const V=wS(N,k);T(V)}$&&console.log("React Flow: trigger edge changes",N),C==null||C(N)}},addSelectedNodes:N=>{const{multiSelectionActive:C,edgeLookup:T,nodeLookup:k,triggerNodeChanges:P,triggerEdgeChanges:$}=S();if(C){const V=N.map(W=>mr(W,!0));P(V);return}P(ao(k,new Set([...N]),!0)),$(ao(T))},addSelectedEdges:N=>{const{multiSelectionActive:C,edgeLookup:T,nodeLookup:k,triggerNodeChanges:P,triggerEdgeChanges:$}=S();if(C){const V=N.map(W=>mr(W,!0));$(V);return}$(ao(T,new Set([...N]))),P(ao(k,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:C}={})=>{const{edges:T,nodes:k,nodeLookup:P,triggerNodeChanges:$,triggerEdgeChanges:V}=S(),W=N||k,K=C||T,q=W.map(L=>{const X=P.get(L.id);return X&&(X.selected=!1),mr(L.id,!1)}),H=K.map(L=>mr(L.id,!1));$(q),V(H)},setMinZoom:N=>{const{panZoom:C,maxZoom:T}=S();C==null||C.setScaleExtent([N,T]),w({minZoom:N})},setMaxZoom:N=>{const{panZoom:C,minZoom:T}=S();C==null||C.setScaleExtent([T,N]),w({maxZoom:N})},setTranslateExtent:N=>{var C;(C=S().panZoom)==null||C.setTranslateExtent(N),w({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:C,triggerNodeChanges:T,triggerEdgeChanges:k,elementsSelectable:P}=S();if(!P)return;const $=C.reduce((W,K)=>K.selected?[...W,mr(K.id,!1)]:W,[]),V=N.reduce((W,K)=>K.selected?[...W,mr(K.id,!1)]:W,[]);T($),k(V)},setNodeExtent:N=>{const{nodes:C,nodeLookup:T,parentLookup:k,nodeOrigin:P,elevateNodesOnSelect:$,nodeExtent:V,zIndexMode:W}=S();N[0][0]===V[0][0]&&N[0][1]===V[0][1]&&N[1][0]===V[1][0]&&N[1][1]===V[1][1]||(cc(C,T,k,{nodeOrigin:P,nodeExtent:N,elevateNodesOnSelect:$,checkEquality:!1,zIndexMode:W}),w({nodeExtent:N}))},panBy:N=>{const{transform:C,width:T,height:k,panZoom:P,translateExtent:$}=S();return m1({delta:N,panZoom:P,transform:C,translateExtent:$,width:T,height:k})},setCenter:async(N,C,T)=>{const{width:k,height:P,maxZoom:$,panZoom:V}=S();if(!V)return Promise.resolve(!1);const W=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:$;return await V.setViewport({x:k/2-N*W,y:P/2-C*W,zoom:W},{duration:T==null?void 0:T.duration,ease:T==null?void 0:T.ease,interpolate:T==null?void 0:T.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...lh}})},updateConnection:N=>{w({connection:N})},reset:()=>w({...ym()})}},Object.is);function Hl({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:u,initialMinZoom:c,initialMaxZoom:p,initialFitViewOptions:y,fitView:x,nodeOrigin:m,nodeExtent:h,zIndexMode:g,children:w}){const[S]=F.useState(()=>$N({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:x,minZoom:c,maxZoom:p,fitViewOptions:y,nodeOrigin:m,nodeExtent:h,zIndexMode:g}));return d.jsx(J1,{value:S,children:d.jsx(CS,{children:w})})}function LN({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:u,height:c,fitView:p,fitViewOptions:y,minZoom:x,maxZoom:m,nodeOrigin:h,nodeExtent:g,zIndexMode:w}){return F.useContext(zl)?d.jsx(d.Fragment,{children:t}):d.jsx(Hl,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:u,initialHeight:c,fitView:p,initialFitViewOptions:y,initialMinZoom:x,initialMaxZoom:m,nodeOrigin:h,nodeExtent:g,zIndexMode:w,children:t})}const zN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function RN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:u,edgeTypes:c,onNodeClick:p,onEdgeClick:y,onInit:x,onMove:m,onMoveStart:h,onMoveEnd:g,onConnect:w,onConnectStart:S,onConnectEnd:I,onClickConnectStart:N,onClickConnectEnd:C,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:P,onNodeContextMenu:$,onNodeDoubleClick:V,onNodeDragStart:W,onNodeDrag:K,onNodeDragStop:q,onNodesDelete:H,onEdgesDelete:L,onDelete:X,onSelectionChange:Q,onSelectionDragStart:A,onSelectionDrag:R,onSelectionDragStop:z,onSelectionContextMenu:j,onSelectionStart:D,onSelectionEnd:M,onBeforeDelete:b,connectionMode:E,connectionLineType:O=Yn.Bezier,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:ne,deleteKeyCode:re="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:oe=!1,selectionMode:ue=ks.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:Se=Is()?"Meta":"Control",zoomActivationKeyCode:Ce=Is()?"Meta":"Control",snapToGrid:we,snapGrid:_e,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:je,nodesDraggable:Xe,autoPanOnNodeFocus:At,nodesConnectable:xt,nodesFocusable:yt,nodeOrigin:_t=Lh,edgesFocusable:sn,edgesReconnectable:Nn,elementsSelectable:jr=!0,defaultViewport:Qn=fS,minZoom:ln=.5,maxZoom:an=2,translateExtent:Gn=Ns,preventScrolling:Os=!0,nodeExtent:un,defaultMarkerColor:Kn="#b1b1b7",zoomOnScroll:Bl=!0,zoomOnPinch:As=!0,panOnScroll:$s=!1,panOnScrollSpeed:Wl=.5,panOnScrollMode:vo=yr.Free,zoomOnDoubleClick:wo=!0,panOnDrag:So=!0,onPaneClick:No,onPaneMouseEnter:ko,onPaneMouseMove:kn,onPaneMouseLeave:Cn,onPaneScroll:Ls,onPaneContextMenu:zs,paneClickDistance:Rs=1,nodeClickDistance:Fs=0,children:Hs,onReconnect:Co,onReconnectStart:Vs,onReconnectEnd:qn,onEdgeContextMenu:Io,onEdgeDoubleClick:Zn,onEdgeMouseEnter:Ul,onEdgeMouseMove:Jn,onEdgeMouseLeave:Mr,reconnectRadius:br=10,onNodesChange:Eo,onEdgesChange:Yl,noDragClassName:Xl="nodrag",noWheelClassName:Ql="nowheel",noPanClassName:Qt="nopan",fitView:_o,fitViewOptions:jo,connectOnClick:Gl,attributionPosition:Bs,proOptions:Ws,defaultEdgeOptions:Us,elevateNodesOnSelect:Ys=!0,elevateEdgesOnSelect:Kl=!1,disableKeyboardA11y:Xs=!1,autoPanOnConnect:He,autoPanOnNodeDrag:ql,autoPanSpeed:Mo,connectionRadius:Qs,isValidConnection:Pr,onError:Zl,style:Gs,id:er,nodeDragThreshold:jt,connectionDragThreshold:Jl,viewport:vt,onViewportChange:ea,width:ta,height:na,colorMode:Dr="light",debug:Tr,onScroll:Gt,ariaLabelConfig:Or,zIndexMode:Ks="basic",...ra},bo){const Ar=er||"1",Po=gS(Dr),tr=F.useCallback(qs=>{qs.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Gt==null||Gt(qs)},[Gt]);return d.jsx("div",{"data-testid":"rf__wrapper",...ra,onScroll:tr,style:{...Gs,...zN},ref:bo,className:Ge(["react-flow",l,Po]),id:er,role:"application",children:d.jsxs(LN,{nodes:t,edges:r,width:ta,height:na,fitView:_o,fitViewOptions:jo,minZoom:ln,maxZoom:an,nodeOrigin:_t,nodeExtent:un,zIndexMode:Ks,children:[d.jsx(AN,{onInit:x,onNodeClick:p,onEdgeClick:y,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:P,onNodeContextMenu:$,onNodeDoubleClick:V,nodeTypes:u,edgeTypes:c,connectionLineType:O,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:ne,selectionKeyCode:ae,selectionOnDrag:oe,selectionMode:ue,deleteKeyCode:re,multiSelectionKeyCode:Se,panActivationKeyCode:ve,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:Te,defaultViewport:Qn,translateExtent:Gn,minZoom:ln,maxZoom:an,preventScrolling:Os,zoomOnScroll:Bl,zoomOnPinch:As,zoomOnDoubleClick:wo,panOnScroll:$s,panOnScrollSpeed:Wl,panOnScrollMode:vo,panOnDrag:So,onPaneClick:No,onPaneMouseEnter:ko,onPaneMouseMove:kn,onPaneMouseLeave:Cn,onPaneScroll:Ls,onPaneContextMenu:zs,paneClickDistance:Rs,nodeClickDistance:Fs,onSelectionContextMenu:j,onSelectionStart:D,onSelectionEnd:M,onReconnect:Co,onReconnectStart:Vs,onReconnectEnd:qn,onEdgeContextMenu:Io,onEdgeDoubleClick:Zn,onEdgeMouseEnter:Ul,onEdgeMouseMove:Jn,onEdgeMouseLeave:Mr,reconnectRadius:br,defaultMarkerColor:Kn,noDragClassName:Xl,noWheelClassName:Ql,noPanClassName:Qt,rfId:Ar,disableKeyboardA11y:Xs,nodeExtent:un,viewport:vt,onViewportChange:ea}),d.jsx(hS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:I,onClickConnectStart:N,onClickConnectEnd:C,nodesDraggable:Xe,autoPanOnNodeFocus:At,nodesConnectable:xt,nodesFocusable:yt,edgesFocusable:sn,edgesReconnectable:Nn,elementsSelectable:jr,elevateNodesOnSelect:Ys,elevateEdgesOnSelect:Kl,minZoom:ln,maxZoom:an,nodeExtent:un,onNodesChange:Eo,onEdgesChange:Yl,snapToGrid:we,snapGrid:_e,connectionMode:E,translateExtent:Gn,connectOnClick:Gl,defaultEdgeOptions:Us,fitView:_o,fitViewOptions:jo,onNodesDelete:H,onEdgesDelete:L,onDelete:X,onNodeDragStart:W,onNodeDrag:K,onNodeDragStop:q,onSelectionDrag:R,onSelectionDragStart:A,onSelectionDragStop:z,onMove:m,onMoveStart:h,onMoveEnd:g,noPanClassName:Qt,nodeOrigin:_t,rfId:Ar,autoPanOnConnect:He,autoPanOnNodeDrag:ql,autoPanSpeed:Mo,onError:Zl,connectionRadius:Qs,isValidConnection:Pr,selectNodesOnDrag:je,nodeDragThreshold:jt,connectionDragThreshold:Jl,onBeforeDelete:b,debug:Tr,ariaLabelConfig:Or,zIndexMode:Ks}),d.jsx(dS,{onSelectionChange:Q}),Hs,d.jsx(iS,{proOptions:Ws,position:Bs}),d.jsx(sS,{rfId:Ar,disableKeyboardA11y:Xs})]})})}var ug=Rh(RN);const FN=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function cg({children:t}){const r=Me(FN);return r?Z1.createPortal(t,r):null}function HN({dimensions:t,lineWidth:r,variant:o,className:i}){return d.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ge(["react-flow__background-pattern",o,i])})}function VN({radius:t,className:r}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Ge(["react-flow__background-pattern","dots",r])})}var Xn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Xn||(Xn={}));const BN={[Xn.Dots]:1,[Xn.Lines]:1,[Xn.Cross]:6},WN=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function dg({id:t,variant:r=Xn.Dots,gap:o=20,size:i,lineWidth:l=1,offset:u=0,color:c,bgColor:p,style:y,className:x,patternClassName:m}){const h=F.useRef(null),{transform:g,patternId:w}=Me(WN,Re),S=i||BN[r],I=r===Xn.Dots,N=r===Xn.Cross,C=Array.isArray(o)?o:[o,o],T=[C[0]*g[2]||1,C[1]*g[2]||1],k=S*g[2],P=Array.isArray(u)?u:[u,u],$=N?[k,k]:T,V=[P[0]*g[2]||1+$[0]/2,P[1]*g[2]||1+$[1]/2],W=`${w}${t||""}`;return d.jsxs("svg",{className:Ge(["react-flow__background",x]),style:{...y,...Fl,"--xy-background-color-props":p,"--xy-background-pattern-color-props":c},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:W,x:g[0]%T[0],y:g[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${V[0]},-${V[1]})`,children:I?d.jsx(VN,{radius:k/2,className:m}):d.jsx(HN,{dimensions:$,lineWidth:l,variant:r,className:m})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}dg.displayName="Background";const fg=F.memo(dg);function UN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function YN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function XN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function QN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function GN(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ll({children:t,className:r,...o}){return d.jsx("button",{type:"button",className:Ge(["react-flow__controls-button",r]),...o,children:t})}const KN=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function pg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:c,onFitView:p,onInteractiveChange:y,className:x,children:m,position:h="bottom-left",orientation:g="vertical","aria-label":w}){const S=Fe(),{isInteractive:I,minZoomReached:N,maxZoomReached:C,ariaLabelConfig:T}=Me(KN,Re),{zoomIn:k,zoomOut:P,fitView:$}=_r(),V=()=>{k(),u==null||u()},W=()=>{P(),c==null||c()},K=()=>{$(l),p==null||p()},q=()=>{S.setState({nodesDraggable:!I,nodesConnectable:!I,elementsSelectable:!I}),y==null||y(!I)},H=g==="horizontal"?"horizontal":"vertical";return d.jsxs(Rl,{className:Ge(["react-flow__controls",H,x]),position:h,style:t,"data-testid":"rf__controls","aria-label":w??T["controls.ariaLabel"],children:[r&&d.jsxs(d.Fragment,{children:[d.jsx(ll,{onClick:V,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:C,children:d.jsx(UN,{})}),d.jsx(ll,{onClick:W,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:N,children:d.jsx(YN,{})})]}),o&&d.jsx(ll,{className:"react-flow__controls-fitview",onClick:K,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:d.jsx(XN,{})}),i&&d.jsx(ll,{className:"react-flow__controls-interactive",onClick:q,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:I?d.jsx(GN,{}):d.jsx(QN,{})}),m]})}pg.displayName="Controls";const mg=F.memo(pg);function qN({id:t,x:r,y:o,width:i,height:l,style:u,color:c,strokeColor:p,strokeWidth:y,className:x,borderRadius:m,shapeRendering:h,selected:g,onClick:w}){const{background:S,backgroundColor:I}=u||{},N=c||S||I;return d.jsx("rect",{className:Ge(["react-flow__minimap-node",{selected:g},x]),x:r,y:o,rx:m,ry:m,width:i,height:l,style:{fill:N,stroke:p,strokeWidth:y},shapeRendering:h,onClick:w?C=>w(C,t):void 0})}const ZN=F.memo(qN),JN=t=>t.nodes.map(r=>r.id),Zu=t=>t instanceof Function?t:()=>t;function ek({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:u=ZN,onClick:c}){const p=Me(JN,Re),y=Zu(r),x=Zu(t),m=Zu(o),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:p.map(g=>d.jsx(nk,{id:g,nodeColorFunc:y,nodeStrokeColorFunc:x,nodeClassNameFunc:m,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:u,onClick:c,shapeRendering:h},g))})}function tk({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:c,NodeComponent:p,onClick:y}){const{node:x,x:m,y:h,width:g,height:w}=Me(S=>{const{internals:I}=S.nodeLookup.get(t),N=I.userNode,{x:C,y:T}=I.positionAbsolute,{width:k,height:P}=Sn(N);return{node:N,x:C,y:T,width:k,height:P}},Re);return!x||x.hidden||!mh(x)?null:d.jsx(p,{x:m,y:h,width:g,height:w,style:x.style,selected:!!x.selected,className:i(x),color:r(x),borderRadius:l,strokeColor:o(x),strokeWidth:u,shapeRendering:c,onClick:y,id:x.id})}const nk=F.memo(tk);var rk=F.memo(ek);const ok=200,sk=150,ik=t=>!t.hidden,lk=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?ph(Ps(t.nodeLookup,{filter:ik}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},ak="react-flow__minimap-desc";function hg({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:p,bgColor:y,maskColor:x,maskStrokeColor:m,maskStrokeWidth:h,position:g="bottom-right",onClick:w,onNodeClick:S,pannable:I=!1,zoomable:N=!1,ariaLabel:C,inversePan:T,zoomStep:k=1,offsetScale:P=5}){const $=Fe(),V=F.useRef(null),{boundingRect:W,viewBB:K,rfId:q,panZoom:H,translateExtent:L,flowWidth:X,flowHeight:Q,ariaLabelConfig:A}=Me(lk,Re),R=(t==null?void 0:t.width)??ok,z=(t==null?void 0:t.height)??sk,j=W.width/R,D=W.height/z,M=Math.max(j,D),b=M*R,E=M*z,O=P*M,G=W.x-(b-W.width)/2-O,Z=W.y-(E-W.height)/2-O,ne=b+O*2,re=E+O*2,ae=`${ak}-${q}`,oe=F.useRef(0),ue=F.useRef();oe.current=M,F.useEffect(()=>{if(V.current&&H)return ue.current=k1({domNode:V.current,panZoom:H,getTransform:()=>$.getState().transform,getViewScale:()=>oe.current}),()=>{var we;(we=ue.current)==null||we.destroy()}},[H]),F.useEffect(()=>{var we;(we=ue.current)==null||we.update({translateExtent:L,width:X,height:Q,inversePan:T,pannable:I,zoomStep:k,zoomable:N})},[I,N,T,k,L,X,Q]);const ve=w?we=>{var je;const[_e,Te]=((je=ue.current)==null?void 0:je.pointer(we))||[0,0];w(we,{x:_e,y:Te})}:void 0,Se=S?F.useCallback((we,_e)=>{const Te=$.getState().nodeLookup.get(_e).internals.userNode;S(we,Te)},[]):void 0,Ce=C??A["minimap.ariaLabel"];return d.jsx(Rl,{position:g,style:{...t,"--xy-minimap-background-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-background-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*M:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Ge(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:R,height:z,viewBox:`${G} ${Z} ${ne} ${re}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:V,onClick:ve,children:[Ce&&d.jsx("title",{id:ae,children:Ce}),d.jsx(rk,{onClick:Se,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:c,nodeComponent:p}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${G-O},${Z-O}h${ne+O*2}v${re+O*2}h${-ne-O*2}z
        M${K.x},${K.y}h${K.width}v${K.height}h${-K.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}hg.displayName="MiniMap";const uk=F.memo(hg),ck=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,dk={[kr.Line]:"right",[kr.Handle]:"bottom-right"};function fk({nodeId:t,position:r,variant:o=kr.Handle,className:i,style:l=void 0,children:u,color:c,minWidth:p=10,minHeight:y=10,maxWidth:x=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:g,autoScale:w=!0,shouldResize:S,onResizeStart:I,onResize:N,onResizeEnd:C}){const T=Bh(),k=typeof t=="string"?t:T,P=Fe(),$=F.useRef(null),V=o===kr.Handle,W=Me(F.useCallback(ck(V&&w),[V,w]),Re),K=F.useRef(null),q=r??dk[o];F.useEffect(()=>{if(!(!$.current||!k))return K.current||(K.current=R1({domNode:$.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:L,transform:X,snapGrid:Q,snapToGrid:A,nodeOrigin:R,domNode:z}=P.getState();return{nodeLookup:L,transform:X,snapGrid:Q,snapToGrid:A,nodeOrigin:R,paneDomNode:z}},onChange:(L,X)=>{const{triggerNodeChanges:Q,nodeLookup:A,parentLookup:R,nodeOrigin:z}=P.getState(),j=[],D={x:L.x,y:L.y},M=A.get(k);if(M&&M.expandParent&&M.parentId){const b=M.origin??z,E=L.width??M.measured.width??0,O=L.height??M.measured.height??0,G={id:M.id,parentId:M.parentId,rect:{width:E,height:O,...hh({x:L.x??M.position.x,y:L.y??M.position.y},{width:E,height:O},M.parentId,A,b)}},Z=Pc([G],A,R,z);j.push(...Z),D.x=L.x?Math.max(b[0]*E,L.x):void 0,D.y=L.y?Math.max(b[1]*O,L.y):void 0}if(D.x!==void 0&&D.y!==void 0){const b={id:k,type:"position",position:{...D}};j.push(b)}if(L.width!==void 0&&L.height!==void 0){const E={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:L.width,height:L.height}};j.push(E)}for(const b of X){const E={...b,type:"position"};j.push(E)}Q(j)},onEnd:({width:L,height:X})=>{const Q={id:k,type:"dimensions",resizing:!1,dimensions:{width:L,height:X}};P.getState().triggerNodeChanges([Q])}})),K.current.update({controlPosition:q,boundaries:{minWidth:p,minHeight:y,maxWidth:x,maxHeight:m},keepAspectRatio:h,resizeDirection:g,onResizeStart:I,onResize:N,onResizeEnd:C,shouldResize:S}),()=>{var L;(L=K.current)==null||L.destroy()}},[q,p,y,x,m,h,I,N,C,S]);const H=q.split("-");return d.jsx("div",{className:Ge(["react-flow__resize-control","nodrag",...H,o,i]),ref:$,style:{...l,scale:W,...c&&{[V?"backgroundColor":"borderColor"]:c}},children:u})}const vm=F.memo(fk);function pk({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:u,color:c,minWidth:p=10,minHeight:y=10,maxWidth:x=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:h=!1,autoScale:g=!0,shouldResize:w,onResizeStart:S,onResize:I,onResizeEnd:N}){return r?d.jsxs(d.Fragment,{children:[T1.map(C=>d.jsx(vm,{className:l,style:u,nodeId:t,position:C,variant:kr.Line,color:c,minWidth:p,minHeight:y,maxWidth:x,maxHeight:m,onResizeStart:S,keepAspectRatio:h,autoScale:g,shouldResize:w,onResize:I,onResizeEnd:N},C)),D1.map(C=>d.jsx(vm,{className:o,style:i,nodeId:t,position:C,color:c,minWidth:p,minHeight:y,maxWidth:x,maxHeight:m,onResizeStart:S,keepAspectRatio:h,autoScale:g,shouldResize:w,onResize:I,onResizeEnd:N},C))]}):null}const wm=t=>{let r;const o=new Set,i=(x,m)=>{const h=typeof x=="function"?x(r):x;if(!Object.is(h,r)){const g=r;r=m??(typeof h!="object"||h===null)?h:Object.assign({},r,h),o.forEach(w=>w(r,g))}},l=()=>r,p={setState:i,getState:l,getInitialState:()=>y,subscribe:x=>(o.add(x),()=>o.delete(x))},y=r=t(i,l,p);return p},mk=(t=>t?wm(t):wm),hk=t=>t;function gk(t,r=hk){const o=ps.useSyncExternalStore(t.subscribe,ps.useCallback(()=>r(t.getState()),[t,r]),ps.useCallback(()=>r(t.getInitialState()),[t,r]));return ps.useDebugValue(o),o}const Sm=t=>{const r=mk(t),o=i=>gk(r,i);return Object.assign(o,r),o},Tc=(t=>t?Sm(t):Sm);function xk(t,r){let o;try{o=t()}catch{return}return{getItem:l=>{var u;const c=y=>y===null?null:JSON.parse(y,void 0),p=(u=o.getItem(l))!=null?u:null;return p instanceof Promise?p.then(c):c(p)},setItem:(l,u)=>o.setItem(l,JSON.stringify(u,void 0)),removeItem:l=>o.removeItem(l)}}const pc=t=>r=>{try{const o=t(r);return o instanceof Promise?o:{then(i){return pc(i)(o)},catch(i){return this}}}catch(o){return{then(i){return this},catch(i){return pc(i)(o)}}}},yk=(t,r)=>(o,i,l)=>{let u={storage:xk(()=>window.localStorage),partialize:N=>N,version:0,merge:(N,C)=>({...C,...N}),...r},c=!1,p=0;const y=new Set,x=new Set;let m=u.storage;if(!m)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...N)},i,l);const h=()=>{const N=u.partialize({...i()});return m.setItem(u.name,{state:N,version:u.version})},g=l.setState;l.setState=(N,C)=>(g(N,C),h());const w=t((...N)=>(o(...N),h()),i,l);l.getInitialState=()=>w;let S;const I=()=>{var N,C;if(!m)return;const T=++p;c=!1,y.forEach(P=>{var $;return P(($=i())!=null?$:w)});const k=((C=u.onRehydrateStorage)==null?void 0:C.call(u,(N=i())!=null?N:w))||void 0;return pc(m.getItem.bind(m))(u.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==u.version){if(u.migrate){const $=u.migrate(P.state,P.version);return $ instanceof Promise?$.then(V=>[!0,V]):[!0,$]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var $;if(T!==p)return;const[V,W]=P;if(S=u.merge(W,($=i())!=null?$:w),o(S,!0),V)return h()}).then(()=>{T===p&&(k==null||k(S,void 0),S=i(),c=!0,x.forEach(P=>P(S)))}).catch(P=>{T===p&&(k==null||k(void 0,P))})};return l.persist={setOptions:N=>{u={...u,...N},N.storage&&(m=N.storage)},clearStorage:()=>{m==null||m.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>I(),hasHydrated:()=>c,onHydrate:N=>(y.add(N),()=>{y.delete(N)}),onFinishHydration:N=>(x.add(N),()=>{x.delete(N)})},u.skipHydration||I(),S||w},vk=yk,wk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let io=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=wk[o[t]&63];return r};const It="__station_input__",Wt="__station_output__",Sk=100,Nk=["energycells"];function kk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return Sk}function Ck(t,r){return Nk.includes(t)?r/100:1}const gg=3600,fs={food:75,medical:45,per:200,cycle:600},al={food:50,medical:30,per:200},Ik="foodrations",Ek="medicalsupplies";function _k(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),u=Math.max(i-t,0),c=t>0?Math.min(i/t,1):0,p=l*(fs.food/fs.per),y=u*(al.food/al.per),x=l*(fs.medical/fs.per),m=u*(al.medical/al.per),h=gg/fs.cycle,g=(p+y)*h,w=(x+m)*h;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:u,workerRatio:c,foodDemand:g,medicalDemand:w}}function jk(t,r){return 1+t*r}function Mk(t){const r=[];return t.foodDemand>0&&r.push({wareId:Ik,amount:t.foodDemand}),t.medicalDemand>0&&r.push({wareId:Ek,amount:t.medicalDemand}),r}function bk(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const u=`${o}_default`;if(r[u])return r[u];for(const c of Object.values(r))if(c.wareId===o)return c;return null}function xg(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Pk(t,r,o,i){const l=xg(t.blueprintId,r),u=[],c=[];if(l==="production"){const p=r.modules.production[t.blueprintId];if(p){const y=bk(p,r.recipes);if(y){const x=Ck(p.producedWareId,o),m=jk(y.workforceBonus,i),h=x*m,g=gg/y.time,w=y.amount*t.count*h*g;c.push({wareId:p.producedWareId,amount:w});for(const S of y.inputs){const I=S.amount*t.count*h*g;u.push({wareId:S.ware,amount:I})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:u,grossOutputs:c,netInputs:[...u],netOutputs:[...c]}}function so(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Dk(t,r,o){const i=kk(t,r),l=t.fillHabitats??!1,u=t.moduleConnections??[];let c=0,p=0;for(const b of t.modules){const E=xg(b.blueprintId,o);if(E==="production"){const O=o.modules.production[b.blueprintId];O&&(c+=O.workforceMax*b.count)}else if(E==="habitat"){const O=o.modules.habitat[b.blueprintId];O&&(p+=O.workforceCapacity*b.count)}}const y=_k(c,p,l),x=t.modules.map(b=>Pk(b,o,i,y.workerRatio)),m=new Map;for(const b of x)m.set(b.moduleId,b);const h=new Map;for(const b of x)h.set(b.moduleId,new Map);const g=new Map;for(const b of x)g.set(b.moduleId,new Map);const w=new Map;for(const b of x){const E=new Map;for(const O of b.grossOutputs)E.set(O.wareId,O.amount);w.set(b.moduleId,E)}const S=new Map;for(const b of x){const E=new Map;for(const O of b.grossInputs)E.set(O.wareId,O.amount);S.set(b.moduleId,E)}const I=u.filter(b=>b.sourceModuleId!==It&&b.targetModuleId!==Wt),N=u.filter(b=>b.sourceModuleId===It),C=u.filter(b=>b.targetModuleId===Wt),T=[];for(const b of I){const E=b.mode??"auto",O=w.get(b.sourceModuleId),G=(O==null?void 0:O.get(b.wareId))??0,Z=S.get(b.targetModuleId),ne=(Z==null?void 0:Z.get(b.wareId))??0;let re,ae=!1,oe=!1;switch(E){case"custom":re=Math.min(b.amount,G,ne),ae=b.amount>G,oe=b.amount>ne;break;case"max":re=Math.min(G,ne),ae=G<ne,oe=ne<G;break;case"auto":default:re=Math.min(G,ne),ae=G<ne,oe=ne<G;break}T.push({connectionId:b.id,effectiveAmount:re,sourceConstrained:ae,targetConstrained:oe}),O&&O.set(b.wareId,G-re),Z&&Z.set(b.wareId,ne-re);const ue=h.get(b.targetModuleId);if(ue){const Se=ue.get(b.wareId)||0;ue.set(b.wareId,Se+re)}const ve=g.get(b.sourceModuleId);if(ve){const Se=ve.get(b.wareId)||0;ve.set(b.wareId,Se+re)}}for(const b of N){const E=b.mode??"auto",O=S.get(b.targetModuleId),G=(O==null?void 0:O.get(b.wareId))??0;let Z,ne=!1,re=!1;switch(E){case"custom":Z=Math.min(b.amount,G),re=b.amount>G;break;case"max":case"auto":default:Z=G;break}T.push({connectionId:b.id,effectiveAmount:Z,sourceConstrained:ne,targetConstrained:re}),O&&O.set(b.wareId,G-Z)}for(const b of C){const E=b.mode??"auto",O=w.get(b.sourceModuleId),G=(O==null?void 0:O.get(b.wareId))??0;let Z,ne=!1,re=!1;switch(E){case"custom":Z=Math.min(b.amount,G),ne=b.amount>G;break;case"max":case"auto":default:Z=G;break}T.push({connectionId:b.id,effectiveAmount:Z,sourceConstrained:ne,targetConstrained:re}),O&&O.set(b.wareId,G-Z)}for(const b of x){const E=h.get(b.moduleId)||new Map,O=g.get(b.moduleId)||new Map;b.netInputs=[];for(const G of b.grossInputs){const Z=E.get(G.wareId)||0,ne=G.amount-Z;ne>.01&&b.netInputs.push({wareId:G.wareId,amount:ne})}b.netOutputs=[];for(const G of b.grossOutputs){const Z=O.get(G.wareId)||0,ne=G.amount-Z;ne>.01&&b.netOutputs.push({wareId:G.wareId,amount:ne})}}const k=[],P=[],$=[],V=[];for(const b of x)k.push(...b.grossInputs),P.push(...b.grossOutputs),$.push(...b.netInputs),V.push(...b.netOutputs);const W=Mk(y);k.push(...W),$.push(...W);const K=so(k),q=so(P),H=so($),L=so(V),X=N.map(b=>{const E=T.find(O=>O.connectionId===b.id);return{wareId:b.wareId,amount:(E==null?void 0:E.effectiveAmount)??b.amount}}),Q=C.map(b=>{const E=T.find(O=>O.connectionId===b.id);return{wareId:b.wareId,amount:(E==null?void 0:E.effectiveAmount)??b.amount}}),A=so(X),R=so(Q),z=new Map;for(const b of A)z.set(b.wareId,b.amount);const j=new Map;for(const b of R)j.set(b.wareId,b.amount);const D=[];for(const b of H){const E=z.get(b.wareId)||0,O=b.amount-E;O>.01&&D.push({wareId:b.wareId,amount:O})}const M=[];for(const b of L){const E=j.get(b.wareId)||0,O=b.amount-E;O>.01&&M.push({wareId:b.wareId,amount:O})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:c,totalWorkforceCapacity:p,actualPopulation:y.actualPopulation,workforceFoodDemand:y.foodDemand,workforceMedicalDemand:y.medicalDemand,modules:x,grossInputs:K,grossOutputs:q,netInputs:H,netOutputs:L,availableForImport:D,availableForExport:M,stationInputs:A,stationOutputs:R,externallySupplied:[],externallyConsumed:[],remainingInputs:[...A],remainingOutputs:[...R],moduleConnections:T}}function Nm(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Tk(t,r){const o=t.stations.map(g=>Dk(g,t.sectors,r)),i=new Map;for(const g of o)i.set(g.stationId,g);const l=new Map,u=new Map,c=new Map,p=new Map;for(const g of t.stations)l.set(g.id,new Map),u.set(g.id,new Map),c.set(g.id,new Map),p.set(g.id,new Map);for(const g of o){const w=c.get(g.stationId),S=p.get(g.stationId);for(const I of g.stationOutputs){const N=g.netOutputs.find(T=>T.wareId===I.wareId),C=Math.min(I.amount,(N==null?void 0:N.amount)??I.amount);w.set(I.wareId,C)}for(const I of g.stationInputs)S.set(I.wareId,I.amount)}const y=[];for(const g of t.connections){const w=g.mode??"auto",S=c.get(g.sourceStationId),I=(S==null?void 0:S.get(g.wareId))??0,N=p.get(g.targetStationId),C=(N==null?void 0:N.get(g.wareId))??0;let T,k=!1,P=!1;switch(w){case"custom":T=Math.min(g.amount,I,C),k=g.amount>I,P=g.amount>C;break;case"max":T=Math.min(I,C),k=I<C,P=C<I;break;case"auto":default:T=Math.min(I,C),k=I<C,P=C<I;break}y.push({connectionId:g.id,effectiveAmount:T,sourceConstrained:k,targetConstrained:P}),S&&S.set(g.wareId,I-T),N&&N.set(g.wareId,C-T);const $=l.get(g.targetStationId);if($){const W=$.get(g.wareId)||0;$.set(g.wareId,W+T)}const V=u.get(g.sourceStationId);if(V){const W=V.get(g.wareId)||0;V.set(g.wareId,W+T)}}for(const g of o){const w=l.get(g.stationId)||new Map,S=u.get(g.stationId)||new Map;g.externallySupplied=Array.from(w.entries()).map(([N,C])=>({wareId:N,amount:C})).filter(N=>N.amount>.01),g.externallyConsumed=Array.from(S.entries()).map(([N,C])=>({wareId:N,amount:C})).filter(N=>N.amount>.01),g.remainingInputs=[];for(const N of g.stationInputs){const C=w.get(N.wareId)||0,T=N.amount-C;T>.01&&g.remainingInputs.push({wareId:N.wareId,amount:T})}g.remainingOutputs=[];for(const N of g.stationOutputs){const C=S.get(N.wareId)||0,T=N.amount-C;T>.01&&g.remainingOutputs.push({wareId:N.wareId,amount:T})}const I=t.stations.find(N=>N.id===g.stationId);if(I){const N=I.moduleConnections??[];for(const[C,T]of w.entries()){if(T<.01)continue;const k=N.filter(V=>V.sourceModuleId===It&&V.wareId===C);if(k.length===0)continue;const P=k.reduce((V,W)=>V+W.amount,0);if(P<.01)continue;const $=Math.min(T/P,1);for(const V of k){const W=g.modules.find(H=>H.moduleId===V.targetModuleId);if(!W)continue;const K=V.amount*$,q=W.netInputs.findIndex(H=>H.wareId===C);if(q!==-1){const L=W.netInputs[q].amount-K;L>.01?W.netInputs[q].amount=L:W.netInputs.splice(q,1)}}}for(const[C,T]of S.entries()){if(T<.01)continue;const k=N.filter(V=>V.targetModuleId===Wt&&V.wareId===C);if(k.length===0)continue;const P=k.reduce((V,W)=>V+W.amount,0);if(P<.01)continue;const $=Math.min(T/P,1);for(const V of k){const W=g.modules.find(H=>H.moduleId===V.sourceModuleId);if(!W)continue;const K=V.amount*$,q=W.netOutputs.findIndex(H=>H.wareId===C);if(q!==-1){const L=W.netOutputs[q].amount-K;L>.01?W.netOutputs[q].amount=L:W.netOutputs.splice(q,1)}}}}}const x=[];for(const g of o){const w=l.get(g.stationId)||new Map;for(const S of g.netInputs){const I=w.get(S.wareId)||0;I<S.amount&&x.push({wareId:S.wareId,stationId:g.stationId,required:S.amount,supplied:I,deficit:S.amount-I})}}const m=[],h=[];for(const g of o){const w=l.get(g.stationId)||new Map;for(const I of g.netInputs){const N=w.get(I.wareId)||0,C=I.amount-N;C>0&&m.push({wareId:I.wareId,amount:C})}const S=new Map;for(const I of t.connections)if(I.sourceStationId===g.stationId){const N=S.get(I.wareId)||0;S.set(I.wareId,N+I.amount)}for(const I of g.netOutputs){const N=S.get(I.wareId)||0,C=I.amount-N;C>0&&h.push({wareId:I.wareId,amount:C})}}return{stations:o,connections:y,totalInputs:Nm(m),totalOutputs:Nm(h),deficits:x}}function yg(t,r){return t.connections.find(o=>o.connectionId===r)}function Ir(t,r){return t.stations.find(o=>o.stationId===r)}function xl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function gr(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const We=Tc((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function km(t){const r=new Date().toISOString();return{id:io(),name:t,version:1,createdAt:r,updatedAt:r,sectors:[],stations:[],connections:[]}}function ul(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const de=Tc()(vk((t,r)=>({plan:km("New Plan"),computed:ul(),createPlan:o=>{t({plan:km(o),computed:ul()})},loadPlan:o=>{const i={...o,stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};t({plan:i,computed:ul()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:io(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(u=>({plan:{...u.plan,sectors:[...u.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:io(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(u=>({plan:{...u.plan,stations:[...u.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,sectorId:i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const u={id:io(),blueprintId:i,count:1,position:l};t(c=>({plan:{...c.plan,stations:c.plan.stations.map(p=>p.id===o?{...p,modules:[...p.modules,u]}:p),updatedAt:new Date().toISOString()}})),r().recompute()},updateModule:(o,i,l)=>{const c=r().plan.stations.find(x=>x.id===o),p=c==null?void 0:c.modules.find(x=>x.id===i);if(l.count!==void 0&&p&&l.count!==p.count&&p){const x=l.count/p.count,m=((c==null?void 0:c.moduleConnections)??[]).map(h=>h.sourceModuleId===i&&!h.locked?{...h,amount:h.amount*x}:h.targetModuleId===i&&h.sourceModuleId===It&&!h.locked?{...h,amount:h.amount*x}:h);t(h=>({plan:{...h.plan,stations:h.plan.stations.map(g=>g.id===o?{...g,modules:g.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:m}:g),updatedAt:new Date().toISOString()}}))}else t(x=>({plan:{...x.plan,stations:x.plan.stations.map(m=>m.id===o?{...m,modules:m.modules.map(h=>h.id===i?{...h,...l}:h)}:m),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,modules:u.modules.filter(c=>c.id!==i),moduleConnections:(u.moduleConnections??[]).filter(c=>c.sourceModuleId!==i&&c.targetModuleId!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:io(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:io(),...i};t(u=>({plan:{...u.plan,stations:u.plan.stations.map(c=>c.id===o?{...c,moduleConnections:[...c.moduleConnections??[],l]}:c),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(u=>({plan:{...u.plan,stations:u.plan.stations.map(c=>c.id===o?{...c,moduleConnections:(c.moduleConnections??[]).map(p=>p.id===i?{...p,...l}:p)}:c),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,moduleConnections:(u.moduleConnections??[]).filter(c=>c.id!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=We.getState().gameData;if(!i){t({computed:ul()});return}const l=Tk(o,i);t({computed:l})}}),{name:"x4-planner-plan",partialize:t=>({plan:t.plan}),onRehydrateStorage:()=>t=>{if(t){const r=t.plan;if(r.stations.some(i=>(i.moduleConnections??[]).some(l=>l.ratio===void 0||l.locked===void 0))){const i={...r,stations:r.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};de.setState({plan:i})}t.recompute()}}})),me=Tc(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,theme:"system",language:"en",contextMenu:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setTheme:r=>t({theme:r}),setLanguage:r=>t({language:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null})}));function Ok(){const t=de(m=>m.plan),r=de(m=>m.renamePlan),o=me(m=>m.toggleReport),i=me(m=>m.reportOpen),l=me(m=>m.theme),u=me(m=>m.setTheme),c=me(m=>m.language),p=me(m=>m.setLanguage),y=We(m=>m.gameData),x=()=>{u(l==="light"?"dark":l==="dark"?"system":"light")};return d.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"X4 SWI Station Planner"}),d.jsx("span",{className:"text-muted-foreground",children:"|"}),d.jsx("input",{type:"text",value:t.name,onChange:m=>r(m.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[(y==null?void 0:y.languages)&&d.jsx("select",{value:c,onChange:m=>p(m.target.value),className:"px-2 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors border-none cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring",title:"Language",children:Object.entries(y.languages).map(([m,h])=>d.jsx("option",{value:m,children:h},m))}),d.jsxs("button",{onClick:x,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${l}`,children:[l==="light"&&"",l==="dark"&&"",l==="system"&&"",d.jsx("span",{className:"text-xs",children:l.charAt(0).toUpperCase()+l.slice(1)})]}),d.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"}),d.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Export"}),d.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Import"})]})]})}function gt(){const t=me(o=>o.language);return{language:t,t:(o,i)=>o?typeof o=="string"?o:o[t]??o.en??Object.values(o)[0]??i??"":i??""}}function Ak({station:t}){const r=de(k=>k.updateStation),o=de(k=>k.removeStation),i=de(k=>k.plan),l=de(k=>k.computed),u=We(k=>k.gameData),{t:c}=gt(),p=t.sectorId?i.sectors.find(k=>k.id===t.sectorId):null,y=t.sunlightOverride??(p==null?void 0:p.sunlight)??100,x=Ir(l,t.id),m=k=>{r(t.id,{name:k.target.value})},h=k=>{const P=k.target.value;if(P==="")r(t.id,{sunlightOverride:null});else{const $=parseInt(P,10);!isNaN($)&&$>=0&&$<=500&&r(t.id,{sunlightOverride:$})}},g=()=>{r(t.id,{sunlightOverride:null})},w=k=>{r(t.id,{fillHabitats:k.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},I=k=>{var P;return c((P=u==null?void 0:u.wares[k])==null?void 0:P.name,k)},N=k=>k>=1e4?`${(k/1e3).toFixed(1)}k`:k>=1e3?`${(k/1e3).toFixed(2)}k`:k.toFixed(0),C=x&&x.totalWorkforceRequired>0,T=x&&x.totalWorkforceCapacity>0;return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),d.jsx("input",{type:"text",value:t.name,onChange:m,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:p?p.name:"Not assigned"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:h,placeholder:`${(p==null?void 0:p.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&d.jsx("button",{onClick:g,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",y,"%",t.sunlightOverride===null&&p&&" (from sector)",t.sunlightOverride===null&&!p&&" (default)"]})]}),(C||T)&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),x&&d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Required:"}),d.jsx("span",{children:x.totalWorkforceRequired.toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),d.jsx("span",{children:x.totalWorkforceCapacity.toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{className:"text-muted-foreground",children:"Population:"}),d.jsx("span",{children:x.actualPopulation.toLocaleString()})]})]}),T&&d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[d.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:w,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),d.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?d.jsx("p",{children:"No modules added yet."}):d.jsxs("p",{children:[t.modules.length," module(s)"]})}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),x&&(x.netOutputs.length>0||x.netInputs.length>0)&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),x.netOutputs.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),x.netOutputs.slice(0,5).map(k=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-green-500 truncate",children:I(k.wareId)}),d.jsxs("span",{className:"font-mono",children:["+",N(k.amount)]})]},k.wareId)),x.netOutputs.length>5&&d.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",x.netOutputs.length-5," more..."]})]}),x.netInputs.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),x.netInputs.slice(0,5).map(k=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-blue-400 truncate",children:I(k.wareId)}),d.jsxs("span",{className:"font-mono",children:["-",N(k.amount)]})]},k.wareId)),x.netInputs.length>5&&d.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",x.netInputs.length-5," more..."]})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function $k({sector:t}){const r=de(y=>y.updateSector),o=de(y=>y.removeSector),l=de(y=>y.plan).stations.filter(y=>y.sectorId===t.id),u=y=>{r(t.id,{name:y.target.value})},c=y=>{const x=parseInt(y.target.value,10);!isNaN(x)&&x>=0&&x<=500&&r(t.id,{sunlight:x})},p=()=>{const y=l.length,x=y>0?`Delete sector "${t.name}"? ${y} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(x)&&o(t.id)};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),d.jsx("input",{type:"text",value:t.name,onChange:u,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:c,className:"flex-1"}),d.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:c,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",l.length,")"]}),l.length===0?d.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):d.jsx("ul",{className:"text-sm space-y-1",children:l.map(y=>d.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[d.jsx("span",{className:"text-foreground",children:y.name}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.modules.length," modules"]})]},y.id))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:p,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const Cm={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function Lk(){const t=We(w=>w.gameData),r=de(w=>w.addModule),o=me(w=>w.activeStationId),i=de(w=>w.plan.stations),{t:l}=gt(),[u,c]=F.useState("production"),[p,y]=F.useState(""),x=F.useMemo(()=>i.find(w=>w.id===o),[i,o]),m=F.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const w=p.toLowerCase(),S=I=>Object.values(I).filter(N=>l(N.name).toLowerCase().includes(w));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,p,l]),h=w=>{if(!o||!x)return;const S=x.modules.length,I=S%3,N=Math.floor(S/3),C={x:I*220+50,y:N*150+50};r(o,w,C)},g=w=>{c(S=>S===w?null:w)};return t?d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{children:d.jsx("input",{type:"text",placeholder:"Search modules...",value:p,onChange:w=>y(w.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(Cm).map(w=>{const{label:S,icon:I}=Cm[w],N=m[w],C=u===w;return d.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[d.jsxs("button",{onClick:()=>g(w),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[d.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[d.jsx("span",{children:I}),S,d.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.length,")"]})]}),d.jsx("span",{className:"text-muted-foreground",children:C?"":"+"})]}),C&&d.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.length===0?d.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):N.map(T=>d.jsxs("button",{onClick:()=>h(T.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[d.jsx("span",{className:"text-foreground truncate",children:l(T.name)}),d.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},T.id))})]},w)}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):d.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function zk({stationId:t,module:r}){const o=We(N=>N.gameData),i=We(N=>N.getModule),l=We(N=>N.getModuleType),u=de(N=>N.updateModule),c=de(N=>N.removeModule),p=me(N=>N.clearSelection),{t:y}=gt(),x=i(r.blueprintId),m=l(r.blueprintId),h=F.useMemo(()=>{if(!o||!m)return[];const N=o.modules[m];return Object.values(N).sort((C,T)=>y(C.name).localeCompare(y(T.name)))},[o,m,y]),g=N=>{u(t,r.id,{blueprintId:N.target.value})},w=N=>{const C=Math.max(1,r.count+N);u(t,r.id,{count:C})},S=N=>{const C=parseInt(N.target.value,10);!isNaN(C)&&C>=1&&u(t,r.id,{count:C})},I=()=>{confirm(`Delete this ${y(x==null?void 0:x.name,"module")}?`)&&(c(t,r.id),p())};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-lg",children:m==="production"?"":m==="habitat"?"":""}),d.jsxs("span",{className:"text-muted-foreground capitalize",children:[m," Module"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),d.jsx("select",{value:r.blueprintId,onChange:g,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:h.map(N=>d.jsx("option",{value:N.id,children:y(N.name)},N.id))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>w(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),d.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),d.jsx("button",{onClick:()=>w(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),x&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),d.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[m==="production"&&"producedWareId"in x&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Produces: ",x.producedWareId]}),d.jsxs("p",{children:["Workforce: ",x.workforceMax*r.count]})]}),m==="habitat"&&"workforceCapacity"in x&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Race: ",x.race]}),d.jsxs("p",{children:["Capacity: ",x.workforceCapacity*r.count," workers"]})]}),m==="storage"&&"cargoMax"in x&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Type: ",x.cargoType]}),d.jsxs("p",{children:["Capacity: ",x.cargoMax*r.count]})]})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),d.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:I,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function Rk({connection:t}){var H;const r=de(L=>L.updateConnection),o=de(L=>L.removeConnection),i=de(L=>L.plan),l=de(L=>L.computed),u=We(L=>L.gameData),{t:c}=gt(),p=i.stations.find(L=>L.id===t.sourceStationId),y=i.stations.find(L=>L.id===t.targetStationId),x=F.useMemo(()=>Ir(l,t.sourceStationId),[l,t.sourceStationId]),m=F.useMemo(()=>Ir(l,t.targetStationId),[l,t.targetStationId]),h=t.wareId?c((H=u==null?void 0:u.wares[t.wareId])==null?void 0:H.name,t.wareId):"Unknown",g=x==null?void 0:x.netOutputs.find(L=>L.wareId===t.wareId),w=(g==null?void 0:g.amount)??0,S=m==null?void 0:m.netInputs.find(L=>L.wareId===t.wareId),I=(S==null?void 0:S.amount)??0,N=F.useMemo(()=>yg(l,t.id),[l,t.id]),C=(N==null?void 0:N.effectiveAmount)??t.amount,T=t.mode??"auto",k=L=>L>=1e4?`${(L/1e3).toFixed(1)}k`:L>=1e3?`${(L/1e3).toFixed(2)}k`:L.toFixed(0),P=L=>{r(t.id,{mode:L,amount:L==="custom"?C:t.amount})},$=L=>{const X=L.target.value;if(X==="")r(t.id,{amount:0});else{const Q=parseFloat(X);!isNaN(Q)&&Q>=0&&r(t.id,{amount:Q})}},V=()=>{r(t.id,{mode:"custom",amount:w})},W=()=>{const L=Math.min(w,I);r(t.id,{mode:"custom",amount:L})},K=()=>{confirm("Delete this connection?")&&o(t.id)},q=l.deficits.find(L=>L.stationId===t.targetStationId&&L.wareId===t.wareId);return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"From:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:(p==null?void 0:p.name)??"Unknown"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"To:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:(y==null?void 0:y.name)??"Unknown"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:h}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),d.jsxs("select",{value:T,onChange:L=>P(L.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[d.jsx("option",{value:"auto",children:"Auto (match availability)"}),d.jsx("option",{value:"max",children:"Max (take all available)"}),d.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[T==="auto"&&"Transfers min(source available, target need)",T==="max"&&"Takes all available from source up to target need",T==="custom"&&"Uses a fixed amount you specify"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:[T==="custom"?"Custom Amount":"Effective Amount"," ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),T==="custom"?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:$,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:k(C)}),T==="custom"&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:V,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",k(w),")"]}),I>0&&d.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",k(Math.min(w,I)),")"]})]}),d.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Source available:"}),d.jsxs("span",{className:"font-mono text-green-400",children:[k(w),"/hr"]})]}),I>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Target needs:"}),d.jsxs("span",{className:"font-mono text-blue-400",children:[k(I),"/hr"]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Transferring:"}),d.jsxs("span",{className:`font-mono ${N!=null&&N.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[k(C),"/hr"]})]}),T==="custom"&&t.amount!==C&&d.jsxs("div",{className:"flex justify-between text-yellow-400",children:[d.jsx("span",{children:"Configured:"}),d.jsxs("span",{className:"font-mono",children:[k(t.amount),"/hr"]})]}),(N==null?void 0:N.sourceConstrained)&&d.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(N==null?void 0:N.targetConstrained)&&d.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),q&&q.deficit>0&&d.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[d.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",k(q.deficit),"/hr still needed"]}),d.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",k(q.supplied),"/hr but needs"," ",k(q.required),"/hr"]})]}),t.wareId&&!q&&d.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:d.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:K,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Fk({stationId:t,connection:r}){var D;const o=de(M=>M.updateModuleConnection),i=de(M=>M.removeModuleConnection),l=de(M=>M.plan.stations),u=de(M=>M.computed),c=We(M=>M.gameData),p=me(M=>M.clearSelection),{t:y}=gt(),x=l.find(M=>M.id===t),m=x==null?void 0:x.modules.find(M=>M.id===r.sourceModuleId),h=x==null?void 0:x.modules.find(M=>M.id===r.targetModuleId),g=r.sourceModuleId===It,w=r.targetModuleId===Wt,S=M=>{var E,O,G;if(!M||!c)return"Unknown";const b=((E=c.modules.production[M])==null?void 0:E.name)??((O=c.modules.habitat[M])==null?void 0:O.name)??((G=c.modules.storage[M])==null?void 0:G.name);return y(b,M)},I=g?"Station Input":S(m==null?void 0:m.blueprintId),N=w?"Station Output":S(h==null?void 0:h.blueprintId),C=F.useMemo(()=>g?null:gr(u,t,r.sourceModuleId),[u,t,r.sourceModuleId,g]),T=F.useMemo(()=>w?null:gr(u,t,r.targetModuleId),[u,t,r.targetModuleId,w]),k=F.useMemo(()=>{const M=Ir(u,t);return M==null?void 0:M.moduleConnections.find(b=>b.connectionId===r.id)},[u,t,r.id]),P=(k==null?void 0:k.effectiveAmount)??r.amount,$=r.mode??"auto",V=y((D=c==null?void 0:c.wares[r.wareId])==null?void 0:D.name,r.wareId),W=C==null?void 0:C.grossOutputs.find(M=>M.wareId===r.wareId),K=(W==null?void 0:W.amount)??0,q=T==null?void 0:T.grossInputs.find(M=>M.wareId===r.wareId),H=(q==null?void 0:q.amount)??0,L=M=>M>=1e4?`${(M/1e3).toFixed(1)}k`:M>=1e3?`${(M/1e3).toFixed(2)}k`:M.toFixed(0),X=M=>{o(t,r.id,{mode:M,amount:M==="custom"?P:r.amount})},Q=M=>{const b=M.target.value;if(b==="")o(t,r.id,{amount:0});else{const E=parseFloat(b);if(!isNaN(E)&&E>=0){const O=!g&&K>0?E/K:r.ratio;o(t,r.id,{amount:E,ratio:O})}}},A=()=>{o(t,r.id,{locked:!r.locked})},R=()=>{o(t,r.id,{mode:"custom",amount:K,ratio:1})},z=()=>{const M=Math.min(K,H),b=K>0?M/K:0;o(t,r.id,{mode:"custom",amount:M,ratio:b})},j=()=>{confirm("Delete this connection?")&&(i(t,r.id),p())};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"From:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:I})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"To:"}),d.jsx("span",{className:"font-medium text-foreground truncate",children:N})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:V})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),d.jsxs("select",{value:$,onChange:M=>X(M.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[d.jsx("option",{value:"auto",children:"Auto (match availability)"}),d.jsx("option",{value:"max",children:"Max (take all available)"}),d.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[$==="auto"&&"Transfers min(source available, target need)",$==="max"&&"Takes all available from source up to target need",$==="custom"&&"Uses a fixed amount you specify"]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-sm font-medium text-foreground",children:[$==="custom"?"Custom Amount":"Effective Amount"," ",d.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),$==="custom"?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:Q,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):d.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:L(P)}),$==="custom"&&!g&&K>0&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:R,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",L(K),")"]}),!w&&H>0&&d.jsxs("button",{onClick:z,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",L(Math.min(K,H)),")"]})]}),d.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!g&&K>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Source produces:"}),d.jsxs("span",{className:"font-mono text-green-400",children:[L(K),"/hr"]})]}),!w&&H>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Target needs:"}),d.jsxs("span",{className:"font-mono text-blue-400",children:[L(H),"/hr"]})]}),d.jsxs("div",{className:"flex justify-between font-medium",children:[d.jsx("span",{children:"Transferring:"}),d.jsxs("span",{className:`font-mono ${k!=null&&k.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[L(P),"/hr"]})]}),$==="custom"&&r.amount!==P&&d.jsxs("div",{className:"flex justify-between text-yellow-400",children:[d.jsx("span",{children:"Configured:"}),d.jsxs("span",{className:"font-mono",children:[L(r.amount),"/hr"]})]}),(k==null?void 0:k.sourceConstrained)&&d.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(k==null?void 0:k.targetConstrained)&&d.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!g&&r.ratio!==void 0&&$==="custom"&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Ratio:"}),d.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),d.jsx("button",{onClick:A,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:d.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),d.jsx("div",{className:"pt-4 border-t border-border",children:d.jsx("button",{onClick:j,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Hk(){const t=me(S=>S.sidebarOpen),r=me(S=>S.selectedNodeId),o=me(S=>S.selectedEdgeId),i=me(S=>S.viewMode),l=me(S=>S.activeStationId),u=de(S=>S.plan);if(!t)return null;const c=i==="network"?u.stations.find(S=>S.id===r):null,p=i==="network"?u.sectors.find(S=>S.id===r):null,y=u.connections.find(S=>S.id===o),x=u.stations.find(S=>S.id===l),m=i==="station"&&x?x.modules.find(S=>S.id===r):null,h=i==="station"&&x&&o?(x.moduleConnections??[]).find(S=>S.id===o):null;let g="Network";i==="station"?h?g="Connection":m?g="Module":g="Add Modules":c?g="Station":p?g="Sector":y&&(g="Connection");const w=()=>i==="station"?h&&l?d.jsx(Fk,{stationId:l,connection:h}):m&&l?d.jsx(zk,{stationId:l,module:m}):d.jsx(Lk,{}):c?d.jsx(Ak,{station:c}):p?d.jsx($k,{sector:p}):y?d.jsx(Rk,{connection:y}):d.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[d.jsx("p",{children:"Select a station or sector to view details."}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),d.jsxs("ul",{className:"text-xs space-y-1",children:[d.jsx("li",{children:"Right-click on the canvas to add stations"}),d.jsx("li",{children:"Drag from one station handle to another to connect"}),d.jsx("li",{children:"Press Delete to remove selected items"}),d.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return d.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsx("h2",{className:"font-semibold text-foreground",children:g})}),d.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:w()}),d.jsx("div",{className:"p-4 border-t border-border",children:d.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:i==="station"&&x?d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Modules: ",x.modules.length]}),d.jsxs("p",{children:["Station: ",x.name]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Stations: ",u.stations.length]}),d.jsxs("p",{children:["Sectors: ",u.sectors.length]}),d.jsxs("p",{children:["Connections: ",u.connections.length]})]})})})]})}function Vk(){const t=me(c=>c.viewMode),r=me(c=>c.activeStationId),o=me(c=>c.exitStationView),i=de(c=>c.plan),l=i.stations.find(c=>c.id===r),u=l!=null&&l.sectorId?i.sectors.find(c=>c.id===l.sectorId):null;return t==="network"?null:d.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[d.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),u&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-muted-foreground",children:u.name})]}),l&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function Bk(){const t=de(m=>m.computed),r=We(m=>m.gameData),{t:o}=gt(),i=m=>{var h;return o((h=r==null?void 0:r.wares[m])==null?void 0:h.name,m)},l=m=>Math.abs(m)>=1e4?`${(m/1e3).toFixed(1)}k`:Math.abs(m)>=1e3?`${(m/1e3).toFixed(2)}k`:m.toFixed(0),u=F.useMemo(()=>{const m=new Map;for(const g of t.totalOutputs)m.set(g.wareId,(m.get(g.wareId)??0)+g.amount);for(const g of t.totalInputs)m.set(g.wareId,(m.get(g.wareId)??0)-g.amount);const h=[];for(const[g,w]of m)Math.abs(w)>.01&&h.push({wareId:g,amount:w});return h.sort((g,w)=>w.amount-g.amount)},[t.totalOutputs,t.totalInputs]),c=u.filter(m=>m.amount>0),p=u.filter(m=>m.amount<0),y=F.useMemo(()=>[...t.totalOutputs].sort((m,h)=>h.amount-m.amount),[t.totalOutputs]),x=F.useMemo(()=>[...t.totalInputs].sort((m,h)=>h.amount-m.amount),[t.totalInputs]);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{children:[d.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),c.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),d.jsx("div",{className:"space-y-1",children:c.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-green-400",children:i(m.wareId)}),d.jsxs("span",{className:"font-mono text-green-400",children:["+",l(m.amount),"/hr"]})]},m.wareId))})]}),p.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),d.jsx("div",{className:"space-y-1",children:p.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-red-400",children:i(m.wareId)}),d.jsxs("span",{className:"font-mono text-red-400",children:[l(m.amount),"/hr"]})]},m.wareId))})]}),c.length===0&&p.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",d.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",y.length," wares)"]})]}),y.length>0?d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:y.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-foreground",children:i(m.wareId)}),d.jsxs("span",{className:"font-mono text-green-400",children:["+",l(m.amount),"/hr"]})]},m.wareId))}):d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",d.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",x.length," wares)"]})]}),x.length>0?d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:x.map(m=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-foreground",children:i(m.wareId)}),d.jsxs("span",{className:"font-mono text-blue-400",children:["-",l(m.amount),"/hr"]})]},m.wareId))}):d.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&d.jsxs("section",{children:[d.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((m,h)=>d.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-red-400",children:i(m.wareId)}),d.jsxs("span",{className:"font-mono text-red-400",children:["-",l(m.deficit),"/hr"]})]}),d.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",l(m.required),", getting ",l(m.supplied)]})]},`${m.stationId}-${m.wareId}-${h}`))})]})]})}function Wk(){const t=de(x=>x.plan.stations),r=de(x=>x.plan.sectors),o=de(x=>x.computed),i=We(x=>x.gameData),{t:l}=gt(),u=x=>{var m;return l((m=i==null?void 0:i.wares[x])==null?void 0:m.name,x)},c=x=>Math.abs(x)>=1e4?`${(x/1e3).toFixed(1)}k`:Math.abs(x)>=1e3?`${(x/1e3).toFixed(2)}k`:x.toFixed(0),p=x=>{var m;return x?((m=r.find(h=>h.id===x))==null?void 0:m.name)??null:null},y=F.useMemo(()=>[...t].sort((x,m)=>{const h=xl(o,x.id),g=xl(o,m.id);return h!==g?g-h:x.name.localeCompare(m.name)}),[t,o]);return t.length===0?d.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):d.jsx("div",{className:"space-y-4",children:y.map(x=>{const m=Ir(o,x.id),h=xl(o,x.id),g=p(x.sectorId),w=o.deficits.filter(I=>I.stationId===x.id),S=m&&m.totalWorkforceRequired>0?Math.min(m.actualPopulation/m.totalWorkforceRequired,1):0;return d.jsxs("div",{className:`p-3 rounded-lg border ${h>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h4",{className:"font-medium text-foreground",children:x.name}),h>0&&d.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[h," deficit",h>1?"s":""]})]}),g&&d.jsx("span",{className:"text-xs text-muted-foreground",children:g})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),d.jsxs("span",{className:"text-yellow-500",children:[" ",(m==null?void 0:m.effectiveSunlight)??100,"%"]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Modules"}),d.jsx("span",{className:"text-foreground",children:x.modules.length})]}),m&&m.totalWorkforceRequired>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),d.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[m.actualPopulation,"/",m.totalWorkforceRequired]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),d.jsx("span",{className:"text-foreground",children:m.totalWorkforceCapacity})]})]})]}),m&&d.jsxs("div",{className:"space-y-2",children:[m.netOutputs.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),d.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:m.netOutputs.map(I=>d.jsxs("div",{className:"text-xs flex items-center gap-1",children:[d.jsx("span",{className:"text-green-400",children:u(I.wareId)}),d.jsxs("span",{className:"font-mono text-green-400/70",children:["+",c(I.amount)]})]},I.wareId))})]}),m.netInputs.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),d.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:m.netInputs.map(I=>{const N=w.some(C=>C.wareId===I.wareId);return d.jsxs("div",{className:"text-xs flex items-center gap-1",children:[d.jsx("span",{className:N?"text-red-400":"text-blue-400",children:u(I.wareId)}),d.jsxs("span",{className:`font-mono ${N?"text-red-400/70":"text-blue-400/70"}`,children:["-",c(I.amount)]})]},I.wareId)})})]}),w.length>0&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[d.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),d.jsx("div",{className:"space-y-1",children:w.map(I=>d.jsxs("div",{className:"text-xs flex items-center justify-between",children:[d.jsx("span",{className:"text-red-400",children:u(I.wareId)}),d.jsxs("span",{className:"text-muted-foreground",children:[c(I.supplied),"/",c(I.required),d.jsxs("span",{className:"text-red-400 ml-1",children:["(-",c(I.deficit),")"]})]})]},I.wareId))})]})]}),x.modules.length===0&&d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},x.id)})})}function Uk(){const t=me(l=>l.reportOpen),r=me(l=>l.setReportOpen),[o,i]=F.useState("network");return t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),d.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[d.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),d.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),d.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),d.jsxs("div",{className:"flex border-b border-border",children:[d.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),d.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?d.jsx(Bk,{}):d.jsx(Wk,{})}),d.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function Ae(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Oc(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const Yk={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},Xk={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},Qk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},Gk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function Vl({wareId:t,type:r,amount:o,status:i,preset:l,handleId:u,isDeficit:c=!1,drag:p,handleTooltip:y,amountTooltip:x}){const m=We($=>$.gameData),{t:h}=gt(),g=r==="input",w=g?l.inputColors:l.outputColors,I=($=>{var V;return h((V=m==null?void 0:m.wares[$])==null?void 0:V.name,$)})(t),N=()=>{const $=g?"handle-left":"handle-right",V="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${$} ${V} ${l.handle.colorClass}`;const W=i==="satisfied"?g?"handle-input-satisfied":"handle-output-satisfied":g?"handle-input":"handle-output";return`${l.handle.baseClass} ${$} ${V} ${W}`},C=()=>i==="satisfied"?w.satisfied:c&&w.deficit?w.deficit:w.default,T=()=>{const $=o.fulfilled??0,V=$>.01;if(g)if(i==="satisfied"){const W=$>.01?$:o.primary;return d.jsxs("span",{className:"text-green-600 font-bold",title:x,children:["",Ae(W)]})}else if(V){const W=i==="partial"?o.primary-$:o.primary;return d.jsxs("span",{className:"text-red-400 font-bold",title:x,children:["-",Ae(W)]})}else return d.jsxs("span",{className:"text-red-600/60",title:x,children:["",Ae(o.primary)]});else return V?d.jsx("span",{className:"text-gray-400",title:x,children:Ae(o.primary)}):d.jsx("span",{className:"text-gray-500/60",title:x,children:Ae(o.primary)})},k=()=>!l.hasDrag||!p?null:d.jsx("div",{draggable:!0,onDragStart:p.onDragStart,onDragEnd:p.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:d.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),P=()=>d.jsx(Cr,{type:g?"target":"source",position:g?ye.Left:ye.Right,id:u,className:N(),title:y??I});return d.jsxs("div",{onDragOver:p==null?void 0:p.onDragOver,onDragLeave:p==null?void 0:p.onDragLeave,onDrop:p==null?void 0:p.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${p!=null&&p.isDragging?"opacity-50":""}
        ${p!=null&&p.isDragOver?"bg-primary/20 rounded":""}
      `,children:[g&&l.handle.inline&&P(),!g&&l.hasDrag&&k(),g&&!l.handle.inline&&P(),d.jsxs("div",{className:`flex-1 flex items-center justify-between ${g?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[g&&d.jsx("span",{className:"font-mono ml-1",children:T()}),d.jsx("span",{className:`truncate ${l.nameMaxWidth} ${C()}`,children:I}),!g&&d.jsx("span",{className:"font-mono mr-2",children:T()})]}),g&&l.hasDrag&&k(),!g&&l.handle.inline&&P(),!g&&!l.handle.inline&&P()]})}const Kk=F.memo(function({data:r,selected:o}){const{station:i}=r,l=de(j=>j.plan.sectors),u=de(j=>j.computed),c=de(j=>j.updateStation),p=me(j=>j.drillIntoStation),[y,x]=F.useState(null),[m,h]=F.useState(null),g=i.sectorId?l.find(j=>j.id===i.sectorId):null,w=F.useMemo(()=>Ir(u,i.id),[u,i.id]),S=F.useMemo(()=>xl(u,i.id),[u,i.id]),I=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(g==null?void 0:g.sunlight)??100,N=F.useCallback(()=>{p(i.id)},[p,i.id]),C=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,T=w&&w.totalWorkforceRequired>0,k=F.useMemo(()=>u.deficits.filter(j=>j.stationId===i.id),[u.deficits,i.id]),P=j=>k.some(D=>D.wareId===j),$=F.useCallback((j,D)=>{if(!D||D.length===0)return j;const M=new Map(j.map(O=>[O.wareId,O])),b=[],E=new Set;for(const O of D){const G=M.get(O);G&&(b.push(G),E.add(O))}for(const O of j)E.has(O.wareId)||b.push(O);return b},[]),V=F.useMemo(()=>$((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,$]),W=F.useMemo(()=>$((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,$]),K=F.useMemo(()=>{const j=new Map;for(const D of(w==null?void 0:w.externallySupplied)??[])j.set(D.wareId,D.amount);return j},[w==null?void 0:w.externallySupplied]),q=F.useMemo(()=>{const j=new Map;for(const D of(w==null?void 0:w.externallyConsumed)??[])j.set(D.wareId,D.amount);return j},[w==null?void 0:w.externallyConsumed]),H=F.useCallback((j,D,M)=>{j.stopPropagation(),x(`${M}-${D}`),j.dataTransfer.effectAllowed="move",j.dataTransfer.setData("text/plain",`${M}-${D}`)},[]),L=F.useCallback((j,D,M)=>{j.preventDefault(),j.stopPropagation();const b=`${M}-${D}`;y&&y!==b&&y.startsWith(M)&&(h(b),j.dataTransfer.dropEffect="move")},[y]),X=F.useCallback(()=>{h(null)},[]),Q=F.useCallback((j,D,M)=>{if(j.preventDefault(),j.stopPropagation(),!y||!y.startsWith(M)){x(null),h(null);return}const b=y.replace(`${M}-`,"");if(b===D){x(null),h(null);return}const O=(M==="output"?V:W).map(re=>re.wareId),G=O.indexOf(b),Z=O.indexOf(D);if(G===-1||Z===-1){x(null),h(null);return}const ne=[...O];ne.splice(G,1),ne.splice(Z,0,b),M==="output"?c(i.id,{outputOrder:ne}):c(i.id,{inputOrder:ne}),x(null),h(null)},[y,V,W,c,i.id]),A=F.useCallback(()=>{x(null),h(null)},[]),R=F.useCallback((j,D)=>{const M=`${D}-${j}`;return{isDragging:y===M,isDragOver:m===M,onDragStart:b=>H(b,j,D),onDragEnd:A,onDragOver:b=>L(b,j,D),onDragLeave:X,onDrop:b=>Q(b,j,D)}},[y,m,H,A,L,X,Q]),z=(j,D)=>{const M=D==="input",b=`${D}-${j.wareId}`,E=M&&P(j.wareId),O=M?K.get(j.wareId)??0:0,G=M?0:q.get(j.wareId)??0,Z=M?O:G,ne=j.amount-Z,re=Oc(ne,Z),ae=M?"Need":"Export",oe=M?"Supplied":"Consumed";let ue;return re==="satisfied"?ue=`${ae}: ${Ae(j.amount)}, ${oe}: ${Ae(Z)}`:re==="partial"?ue=`${ae}: ${Ae(j.amount)}, ${oe}: ${Ae(Z)}, Remaining: ${Ae(ne)}`:ue=`${ae}: ${Ae(j.amount)}, No external ${M?"supply":"consumers"}`,d.jsx(Vl,{wareId:j.wareId,type:D,handleId:b,amount:{primary:j.amount,secondary:Z>.01?Z:void 0,fulfilled:Z},status:re,preset:Xk,isDeficit:E,drag:R(j.wareId,D),amountTooltip:ue},j.wareId)};return d.jsxs("div",{className:`
        min-w-[200px] max-w-[200px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:N,children:[S>0&&d.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),d.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("h3",{className:"font-medium text-sm text-foreground truncate flex-1",children:i.name}),g&&d.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:g.name})]})}),d.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),d.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[d.jsx("span",{className:"text-yellow-500",children:""}),I,"%",i.sunlightOverride===null&&g&&d.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),T&&d.jsxs("div",{className:"space-y-0.5",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Population"}),d.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),d.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all ${C>=1?"bg-green-500":C>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${C*100}%`}})})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Modules"}),d.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&d.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[V.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0 pr-2",children:V.map(j=>z(j,"output"))})]}),W.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0 pl-2",children:W.map(j=>z(j,"input"))})]})]}),i.modules.length===0&&d.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),qk=160,Zk=100,Jk=F.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,u=de(g=>g.updateSector),c=de(g=>g.plan.stations),p=de(g=>g.moveStationToSector),[y,x]=F.useState(!1),m=F.useCallback((g,w)=>{u(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,u]),h=F.useCallback((g,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};c.forEach(I=>{const N=I.position.x+qk/2,C=I.position.y+Zk/2,T=N>=S.left&&N<=S.right&&C>=S.top&&C<=S.bottom;T&&I.sectorId!==r?p(I.id,r):!T&&I.sectorId===r&&p(I.id,null)})},[r,c,p]);return d.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[d.jsx(pk,{minWidth:200,minHeight:150,isVisible:i||y,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:m,onResizeEnd:h}),d.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[d.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),d.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:d.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),eC={production:"",habitat:"",storage:""},Im={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},tC=F.memo(function({data:r,selected:o}){const{module:i}=r,l=me(E=>E.activeStationId),u=de(E=>E.computed),c=de(E=>E.updateModule),p=We(E=>E.getModule),y=We(E=>E.getModuleType),x=We(E=>E.gameData),{t:m}=gt(),[h,g]=F.useState(null),[w,S]=F.useState(null),[I,N]=F.useState(!1),C=p(i.blueprintId),T=y(i.blueprintId)??"production",k=Im[T]??Im.production,P=eC[T]??"",$=F.useMemo(()=>{if(l)return gr(u,l,i.id)},[u,l,i.id]),V=F.useCallback(E=>{var O;return m((O=x==null?void 0:x.wares[E])==null?void 0:O.name,E)},[x,m]),W=F.useCallback((E,O)=>{if(!O||O.length===0)return E;const G=new Map(E.map(re=>[re.wareId,re])),Z=[],ne=new Set;for(const re of O){const ae=G.get(re);ae&&(Z.push(ae),ne.add(re))}for(const re of E)ne.has(re.wareId)||Z.push(re);return Z},[]),K=F.useMemo(()=>W(($==null?void 0:$.netOutputs)??[],i.outputOrder),[$==null?void 0:$.netOutputs,i.outputOrder,W]),q=F.useMemo(()=>W(($==null?void 0:$.netInputs)??[],i.inputOrder),[$==null?void 0:$.netInputs,i.inputOrder,W]),H=F.useMemo(()=>W(($==null?void 0:$.grossOutputs)??[],i.outputOrder),[$==null?void 0:$.grossOutputs,i.outputOrder,W]),L=F.useMemo(()=>W(($==null?void 0:$.grossInputs)??[],i.inputOrder),[$==null?void 0:$.grossInputs,i.inputOrder,W]),X=F.useMemo(()=>{if(!$)return!1;const E=$.grossOutputs.reduce((ne,re)=>ne+re.amount,0),O=$.netOutputs.reduce((ne,re)=>ne+re.amount,0),G=$.grossInputs.reduce((ne,re)=>ne+re.amount,0),Z=$.netInputs.reduce((ne,re)=>ne+re.amount,0);return Math.abs(E-O)>.01||Math.abs(G-Z)>.01},[$]),Q=F.useCallback((E,O,G)=>{E.stopPropagation(),g(`${G}-${O}`),E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("text/plain",`${G}-${O}`)},[]),A=F.useCallback((E,O,G)=>{E.preventDefault(),E.stopPropagation();const Z=`${G}-${O}`;h&&h!==Z&&h.startsWith(G)&&(S(Z),E.dataTransfer.dropEffect="move")},[h]),R=F.useCallback(()=>{S(null)},[]),z=F.useCallback((E,O,G)=>{if(E.preventDefault(),E.stopPropagation(),!h||!h.startsWith(G)||!l){g(null),S(null);return}const Z=h.replace(`${G}-`,"");if(Z===O){g(null),S(null);return}const re=(G==="output"?H:L).map(ve=>ve.wareId),ae=re.indexOf(Z),oe=re.indexOf(O);if(ae===-1||oe===-1){g(null),S(null);return}const ue=[...re];ue.splice(ae,1),ue.splice(oe,0,Z),G==="output"?c(l,i.id,{outputOrder:ue}):c(l,i.id,{inputOrder:ue}),g(null),S(null)},[h,H,L,c,l,i.id]),j=F.useCallback(()=>{g(null),S(null)},[]),D=F.useCallback((E,O)=>{var Z;return $?((Z=(O==="output"?$.netOutputs:$.netInputs).find(ne=>ne.wareId===E))==null?void 0:Z.amount)??0:0},[$]),M=F.useCallback((E,O)=>{const G=`${O}-${E}`;return{isDragging:h===G,isDragOver:w===G,onDragStart:Z=>Q(Z,E,O),onDragEnd:j,onDragOver:Z=>A(Z,E,O),onDragLeave:R,onDrop:Z=>z(Z,E,O)}},[h,w,Q,j,A,R,z]),b=(E,O)=>{const G=`${O}-${E.wareId}`,Z=D(E.wareId,O),ne=Z<.01;return d.jsx(Vl,{wareId:E.wareId,type:O,handleId:G,amount:{primary:Z,fulfilled:E.amount-Z},status:ne?"satisfied":"unsatisfied",preset:Yk,drag:M(E.wareId,O),amountTooltip:`Full: ${Ae(E.amount)}/hr`},E.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":k.border}
      `,children:[d.jsx("div",{className:`px-3 py-2 border-b border-border ${k.bg} rounded-t-lg`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:P}),d.jsx("h3",{className:"font-medium text-sm text-foreground truncate flex-1",children:m(C==null?void 0:C.name,i.blueprintId)})]})}),d.jsxs("div",{className:"px-3 py-2 space-y-1",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Count"}),d.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),T==="habitat"&&C&&"workforceCapacity"in C&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),d.jsx("span",{className:"text-foreground",children:C.workforceCapacity*i.count})]}),T==="storage"&&C&&"cargoMax"in C&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),d.jsx("span",{className:"text-foreground",children:C.cargoMax*i.count})]}),T==="production"&&$&&d.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[H.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0",children:H.map(E=>b(E,"output"))})]}),L.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",d.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),d.jsx("div",{className:"space-y-0",children:L.map(E=>b(E,"input"))})]}),K.length===0&&q.length===0&&X&&d.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(H.length>0||L.length>0)&&d.jsxs("div",{className:"pt-1 border-t border-border/30",children:[d.jsxs("button",{onClick:E=>{E.stopPropagation(),N(!I)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[d.jsx("span",{children:I?"":""}),d.jsx("span",{children:"Full Production"})]}),I&&d.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[H.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),H.map(E=>d.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[d.jsx("span",{className:"truncate max-w-[70px]",children:V(E.wareId)}),d.jsxs("span",{className:"font-mono",children:["+",Ae(E.amount)]})]},E.wareId))]}),L.length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),L.map(E=>d.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[d.jsx("span",{className:"truncate max-w-[70px]",children:V(E.wareId)}),d.jsxs("span",{className:"font-mono",children:["-",Ae(E.amount)]})]},E.wareId))]})]})]})]}),T==="production"&&!$&&d.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),nC="generic-import",rC=F.memo(function({selected:r}){const o=me(H=>H.activeStationId),i=de(H=>H.computed),l=We(H=>H.gameData),u=de(H=>H.plan.stations),c=de(H=>H.updateStation),{t:p}=gt(),[y,x]=F.useState(null),[m,h]=F.useState(null),g=F.useMemo(()=>{if(o)return u.find(H=>H.id===o)},[u,o]),w=F.useMemo(()=>{if(!(!o||!i))return i.stations.find(H=>H.stationId===o)},[i,o]),S=H=>{var L;return p((L=l==null?void 0:l.wares[H])==null?void 0:L.name,H)},I=(w==null?void 0:w.stationInputs)??[],N=(w==null?void 0:w.externallySupplied)??[],C=(w==null?void 0:w.remainingInputs)??[],T=F.useMemo(()=>{const H=new Map;for(const Q of I){const A=H.get(Q.wareId)||{connected:0,supplied:0,remaining:0};A.connected=Q.amount,H.set(Q.wareId,A)}for(const Q of N){const A=H.get(Q.wareId);A&&(A.supplied=Q.amount)}for(const Q of C){const A=H.get(Q.wareId);A&&(A.remaining=Q.amount)}const L=Array.from(H.entries()).map(([Q,A])=>({wareId:Q,connected:A.connected,supplied:A.supplied,remaining:A.remaining})),X=g==null?void 0:g.inputOrder;if(X&&X.length>0){const Q=new Map(X.map((A,R)=>[A,R]));L.sort((A,R)=>{const z=Q.get(A.wareId)??1/0,j=Q.get(R.wareId)??1/0;return z!==j?z-j:R.connected-A.connected})}else L.sort((Q,A)=>A.connected-Q.connected);return L},[I,N,C,g==null?void 0:g.inputOrder]),k=F.useCallback((H,L)=>{H.stopPropagation(),x(L),H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",L)},[]),P=F.useCallback((H,L)=>{H.preventDefault(),H.stopPropagation(),y&&y!==L&&(h(L),H.dataTransfer.dropEffect="move")},[y]),$=F.useCallback(()=>{h(null)},[]),V=F.useCallback((H,L)=>{if(H.preventDefault(),H.stopPropagation(),!y||!o){x(null),h(null);return}const X=y;if(X===L){x(null),h(null);return}const Q=T.map(j=>j.wareId),A=Q.indexOf(X),R=Q.indexOf(L);if(A===-1||R===-1){x(null),h(null);return}const z=[...Q];z.splice(A,1),z.splice(R,0,X),c(o,{inputOrder:z}),x(null),h(null)},[y,T,c,o]),W=F.useCallback(()=>{x(null),h(null)},[]),K=F.useCallback(H=>({isDragging:y===H,isDragOver:m===H,onDragStart:L=>k(L,H),onDragEnd:W,onDragOver:L=>P(L,H),onDragLeave:$,onDrop:L=>V(L,H)}),[y,m,k,W,P,$,V]),q=H=>{const L=`output-${H.wareId}`,X=Oc(H.remaining,H.supplied);let Q;return X==="satisfied"?Q=`Need: ${Ae(H.connected)}, Supplied: ${Ae(H.supplied)}`:X==="partial"?Q=`Need: ${Ae(H.connected)}, Supplied: ${Ae(H.supplied)}, Remaining: ${Ae(H.remaining)}`:Q=`Need: ${Ae(H.connected)}, No external supply`,d.jsx(Vl,{wareId:H.wareId,type:"output",handleId:L,amount:{primary:H.supplied-H.connected?H.supplied-H.connected:H.supplied,secondary:H.supplied>.01?H.supplied:void 0,fulfilled:H.supplied},status:X,preset:Qk,drag:K(H.wareId),amountTooltip:Q,handleTooltip:`Import ${S(H.wareId)}`},H.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[d.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:""}),d.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),d.jsx("div",{className:"px-1 py-2",children:T.length>0?d.jsx("div",{className:"space-y-0 pr-3",children:T.map(H=>q(H))}):d.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),d.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[d.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),d.jsx(Cr,{type:"source",position:ye.Right,id:nC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),oC="generic-export",sC=F.memo(function({selected:r}){const o=me(H=>H.activeStationId),i=de(H=>H.computed),l=We(H=>H.gameData),u=de(H=>H.plan.stations),c=de(H=>H.updateStation),{t:p}=gt(),[y,x]=F.useState(null),[m,h]=F.useState(null),g=F.useMemo(()=>{if(o)return u.find(H=>H.id===o)},[u,o]),w=F.useMemo(()=>{if(!(!o||!i))return i.stations.find(H=>H.stationId===o)},[i,o]),S=H=>{var L;return p((L=l==null?void 0:l.wares[H])==null?void 0:L.name,H)},I=(w==null?void 0:w.stationOutputs)??[],N=(w==null?void 0:w.externallyConsumed)??[],C=(w==null?void 0:w.remainingOutputs)??[],T=F.useMemo(()=>{const H=new Map;for(const Q of I){const A=H.get(Q.wareId)||{connected:0,consumed:0,remaining:0};A.connected=Q.amount,H.set(Q.wareId,A)}for(const Q of N){const A=H.get(Q.wareId);A&&(A.consumed=Q.amount)}for(const Q of C){const A=H.get(Q.wareId);A&&(A.remaining=Q.amount)}const L=Array.from(H.entries()).map(([Q,A])=>({wareId:Q,connected:A.connected,consumed:A.consumed,remaining:A.remaining})),X=g==null?void 0:g.outputOrder;if(X&&X.length>0){const Q=new Map(X.map((A,R)=>[A,R]));L.sort((A,R)=>{const z=Q.get(A.wareId)??1/0,j=Q.get(R.wareId)??1/0;return z!==j?z-j:R.connected-A.connected})}else L.sort((Q,A)=>A.connected-Q.connected);return L},[I,N,C,g==null?void 0:g.outputOrder]),k=F.useCallback((H,L)=>{H.stopPropagation(),x(L),H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",L)},[]),P=F.useCallback((H,L)=>{H.preventDefault(),H.stopPropagation(),y&&y!==L&&(h(L),H.dataTransfer.dropEffect="move")},[y]),$=F.useCallback(()=>{h(null)},[]),V=F.useCallback((H,L)=>{if(H.preventDefault(),H.stopPropagation(),!y||!o){x(null),h(null);return}const X=y;if(X===L){x(null),h(null);return}const Q=T.map(j=>j.wareId),A=Q.indexOf(X),R=Q.indexOf(L);if(A===-1||R===-1){x(null),h(null);return}const z=[...Q];z.splice(A,1),z.splice(R,0,X),c(o,{outputOrder:z}),x(null),h(null)},[y,T,c,o]),W=F.useCallback(()=>{x(null),h(null)},[]),K=F.useCallback(H=>({isDragging:y===H,isDragOver:m===H,onDragStart:L=>k(L,H),onDragEnd:W,onDragOver:L=>P(L,H),onDragLeave:$,onDrop:L=>V(L,H)}),[y,m,k,W,P,$,V]),q=H=>{const L=`input-${H.wareId}`,X=Oc(H.remaining,H.consumed);let Q;return X==="satisfied"?Q=`Exporting: ${Ae(H.connected)}, Consumed: ${Ae(H.consumed)}`:X==="partial"?Q=`Exporting: ${Ae(H.connected)}, Consumed: ${Ae(H.consumed)}, Remaining: ${Ae(H.remaining)}`:Q=`Exporting: ${Ae(H.connected)}, No external consumers`,d.jsx(Vl,{wareId:H.wareId,type:"input",handleId:L,amount:{primary:H.connected,secondary:H.consumed>.01?H.consumed:void 0,fulfilled:H.consumed},status:X,preset:Gk,drag:K(H.wareId),amountTooltip:Q,handleTooltip:`Export ${S(H.wareId)}`},H.wareId)};return d.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[d.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:""}),d.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),d.jsx("div",{className:"px-1 py-2",children:T.length>0?d.jsx("div",{className:"space-y-0 pl-3",children:T.map(H=>q(H))}):d.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),d.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[d.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),d.jsx(Cr,{type:"target",position:ye.Left,id:oC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),iC=F.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:p,data:y,selected:x}){const m=de(k=>k.computed),h=y==null?void 0:y.connection,g=F.useMemo(()=>{if(h)return yg(m,h.id)},[m,h]),[w,S,I]=$l({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p}),N=k=>k>=1e3?`${(k/1e3).toFixed(1)}k`:k.toFixed(0),C=m.deficits.find(k=>k.stationId===(h==null?void 0:h.targetStationId)&&k.wareId===(h==null?void 0:h.wareId));let T="#64748b";return h!=null&&h.wareId?C?C.supplied/C.required>=.8?T="#eab308":T="#f97316":T="#22c55e":T="#ef4444",d.jsxs(d.Fragment,{children:[d.jsx(yo,{id:r,path:w,style:{stroke:T,strokeWidth:x?3:2,strokeDasharray:h!=null&&h.wareId?void 0:"5,5"}}),(h==null?void 0:h.wareId)&&d.jsx(cg,{children:d.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${I}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${x?"ring-2 ring-primary":""}
              ${g!=null&&g.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:h.mode==="custom"?`Custom: ${N(h.amount)}, Actual: ${N((g==null?void 0:g.effectiveAmount)??0)}`:`Auto: ${N((g==null?void 0:g.effectiveAmount)??0)}`,children:N((g==null?void 0:g.effectiveAmount)??0)})})]})}),lC=F.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:c,targetPosition:p,data:y,selected:x}){const m=y==null?void 0:y.connection,h=de(P=>P.computed),g=me(P=>P.activeStationId),w=F.useMemo(()=>{if(!m||!g)return;const P=Ir(h,g);return P==null?void 0:P.moduleConnections.find($=>$.connectionId===m.id)},[h,g,m]),[S,I,N]=$l({sourceX:o,sourceY:i,sourcePosition:c,targetX:l,targetY:u,targetPosition:p}),C=P=>P>=1e3?`${(P/1e3).toFixed(1)}k`:P.toFixed(0),T=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",k=(w==null?void 0:w.effectiveAmount)??(m==null?void 0:m.amount)??0;return d.jsxs(d.Fragment,{children:[d.jsx(yo,{id:r,path:S,style:{stroke:T,strokeWidth:x?3:2,strokeDasharray:m!=null&&m.wareId?void 0:"5,5"}}),(m==null?void 0:m.wareId)&&d.jsx(cg,{children:d.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${I}px,${N}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${x?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:m.mode==="custom"?`Custom: ${C(m.amount)}, Actual: ${C(k)}`:`${m.mode??"auto"}: ${C(k)}`,children:C(k)})})]})});function rn({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",u=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return d.jsxs("button",{onClick:c=>{c.stopPropagation(),i(c)},className:`${l} ${u}`,children:[r&&d.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function aC(){const{screenToFlowPosition:t}=_r(),r=me(y=>y.contextMenu),o=me(y=>y.closeContextMenu),i=de(y=>y.plan),l=de(y=>y.addStation),u=de(y=>y.addSector),c=F.useCallback(y=>{if(y.stopPropagation(),!r)return;const x=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,x),o()},[t,r,i.stations.length,l,o]),p=F.useCallback(y=>{if(y.stopPropagation(),!r)return;const x=t({x:r.x,y:r.y});u(`Sector ${i.sectors.length+1}`,x),o()},[t,r,i.sectors.length,u,o]);return d.jsxs(d.Fragment,{children:[d.jsx(rn,{label:"Add Station",icon:"+",onClick:c}),d.jsx(rn,{label:"Add Sector",icon:"",onClick:p})]})}const cl={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function uC(){const{screenToFlowPosition:t}=_r(),r=F.useRef(null),o=We(S=>S.gameData),i=de(S=>S.addModule),l=me(S=>S.activeStationId),u=me(S=>S.contextMenu),c=me(S=>S.closeContextMenu),{t:p}=gt(),[y,x]=F.useState(null),[m,h]=F.useState(""),g=F.useMemo(()=>{if(!o||!m.trim())return null;const S=m.toLowerCase(),I=[];return Object.keys(cl).forEach(N=>{Object.values(o.modules[N]).forEach(C=>{p(C.name).toLowerCase().includes(S)&&I.push({id:C.id,name:p(C.name),category:N})})}),I.slice(0,15)},[o,m,p]);F.useEffect(()=>{var S;(S=r.current)==null||S.focus()},[]);const w=F.useCallback((S,I)=>{if(S.stopPropagation(),!l||!u)return;const N=t({x:u.x,y:u.y});i(l,I,N),c()},[t,u,l,i,c]);return o?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"p-2 pb-0",children:d.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:m,onChange:S=>h(S.target.value),onKeyDown:S=>S.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),d.jsx("div",{className:"p-1 pt-1",children:g?d.jsx("div",{className:"max-h-64 overflow-y-auto",children:g.length===0?d.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):g.map(S=>d.jsxs("button",{onClick:I=>w(I,S.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:cl[S.category].icon}),d.jsx("span",{className:"truncate",children:S.name})]},S.id))}):d.jsx(d.Fragment,{children:Object.keys(cl).map(S=>{const{label:I,icon:N}=cl[S],C=Object.values(o.modules[S]),T=y===S;return d.jsxs("div",{children:[d.jsxs("button",{onClick:k=>{k.stopPropagation(),x(T?null:S)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("span",{children:N}),I]}),d.jsx("span",{className:"text-muted-foreground text-xs",children:T?"":""})]}),T&&d.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[C.slice(0,20).map(k=>d.jsx("button",{onClick:P=>w(P,k.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:p(k.name)},k.id)),C.length>20&&d.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",C.length-20," more (use search)"]})]})]},S)})})})]}):null}function Er(){return d.jsx("div",{className:"my-1 h-px bg-border"})}function mc({label:t,value:r,type:o="text",min:i,max:l,step:u,onSubmit:c}){const[p,y]=F.useState(!1),[x,m]=F.useState(String(r)),h=F.useRef(null);F.useEffect(()=>{var w,S;p&&((w=h.current)==null||w.focus(),(S=h.current)==null||S.select())},[p]);const g=()=>{c(x),y(!1)};return p?d.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:t}),d.jsx("input",{ref:h,type:o,min:i,max:l,step:u,value:x,onChange:w=>m(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&g(),w.key==="Escape"&&y(!1)},onBlur:g,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):d.jsxs("button",{onClick:w=>{w.stopPropagation(),m(String(r)),y(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:t}),d.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function cC({nodeId:t}){const r=de(y=>y.plan.stations),o=de(y=>y.updateStation),i=de(y=>y.removeStation),l=me(y=>y.drillIntoStation),u=me(y=>y.closeContextMenu),c=me(y=>y.clearSelection),p=r.find(y=>y.id===t);return p?d.jsxs(d.Fragment,{children:[d.jsx(rn,{label:"Open Station",onClick:()=>{l(t)}}),d.jsx(Er,{}),d.jsx(mc,{label:"Change Name",value:p.name,onSubmit:y=>{y.trim()&&o(t,{name:y.trim()})}}),d.jsx(mc,{label:"Sunlight Override",value:p.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:y=>{const x=parseInt(y,10);o(t,{sunlightOverride:isNaN(x)?void 0:x})}}),d.jsx(Er,{}),d.jsx(rn,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),c(),u()}})]}):null}function dC({value:t,onSelect:r}){const[o,i]=F.useState(!1),[l,u]=F.useState(t),c=F.useRef(null),p=We(m=>m.gameData),y=F.useMemo(()=>p!=null&&p.sectors?Object.values(p.sectors).sort((m,h)=>m.name.localeCompare(h.name)):[],[p]),x=F.useMemo(()=>{if(!l.trim())return y.slice(0,10);const m=l.toLowerCase();return y.filter(h=>h.name.toLowerCase().includes(m)).slice(0,10)},[y,l]);return F.useEffect(()=>{var m,h;o&&((m=c.current)==null||m.focus(),(h=c.current)==null||h.select())},[o]),o?d.jsxs("div",{className:"px-3 py-1.5",onClick:m=>m.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),d.jsx("input",{ref:c,type:"text",value:l,onChange:m=>u(m.target.value),onKeyDown:m=>{if(m.stopPropagation(),m.key==="Enter"){const h=y.find(g=>g.name.toLowerCase()===l.toLowerCase());r((h==null?void 0:h.name)??l,h==null?void 0:h.sunlight),i(!1)}m.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),x.length>0&&d.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:x.map(m=>d.jsxs("button",{onClick:h=>{h.stopPropagation(),r(m.name,m.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[d.jsx("span",{className:"truncate text-foreground",children:m.name}),d.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[m.sunlight,"%"]})]},m.id))})]}):d.jsxs("button",{onClick:m=>{m.stopPropagation(),u(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[d.jsx("span",{children:"Change Name"}),d.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function fC({nodeId:t}){const r=de(h=>h.plan),o=de(h=>h.updateSector),i=de(h=>h.removeSector),l=de(h=>h.addStation),u=de(h=>h.moveStationToSector),c=me(h=>h.contextMenu),p=me(h=>h.closeContextMenu),y=me(h=>h.clearSelection),x=r.sectors.find(h=>h.id===t);if(!x)return null;const m=r.stations.filter(h=>h.sectorId===t);return d.jsxs(d.Fragment,{children:[d.jsx(dC,{value:x.name,onSelect:(h,g)=>{const w={name:h};g!==void 0&&(w.sunlight=g),o(t,w)}}),d.jsx(mc,{label:"Sunlight",value:x.sunlight,type:"number",min:0,max:500,onSubmit:h=>{const g=parseInt(h,10);!isNaN(g)&&g>=0&&o(t,{sunlight:g})}}),d.jsx(Er,{}),d.jsx(rn,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const h=(c==null?void 0:c.flowPosition)??{x:x.position.x+50,y:x.position.y+80},g=`Station ${r.stations.length+1}`;l(g,h);const w=(S=de.getState().plan.stations.at(-1))==null?void 0:S.id;w&&u(w,t),p()}}),d.jsx(Er,{}),d.jsx(rn,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{m.length>0&&!confirm(`This sector contains ${m.length} station(s). They will be unassigned. Continue?`)||(i(t),y(),p())}})]})}function pC({label:t,value:r,min:o=1,onChange:i}){return d.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:t}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),d.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const u=parseInt(l.target.value,10);!isNaN(u)&&u>=o&&i(u)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),d.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function hc({label:t,value:r,options:o,onChange:i}){return d.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:t}),d.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>d.jsx("option",{value:l.value,children:l.label},l.value))})]})}function mC({nodeId:t}){const r=me(S=>S.activeStationId),o=me(S=>S.closeContextMenu),i=me(S=>S.clearSelection),l=de(S=>S.plan.stations),u=de(S=>S.updateModule),c=de(S=>S.removeModule),p=We(S=>S.gameData),y=We(S=>S.getModuleType),{t:x}=gt(),m=l.find(S=>S.id===r),h=m==null?void 0:m.modules.find(S=>S.id===t),g=h?y(h.blueprintId):null,w=F.useMemo(()=>{if(!p||!g)return[];const S=p.modules[g];return Object.values(S).sort((I,N)=>x(I.name).localeCompare(x(N.name))).map(I=>({value:I.id,label:x(I.name)}))},[p,g,x]);return!m||!h||!r?null:d.jsxs(d.Fragment,{children:[d.jsx(pC,{label:"Amount",value:h.count,min:1,onChange:S=>u(r,h.id,{count:S})}),g==="production"&&w.length>1&&d.jsx(hc,{label:"Blueprint",value:h.blueprintId,options:w,onChange:S=>u(r,h.id,{blueprintId:S})}),d.jsx(Er,{}),d.jsx(rn,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{c(r,h.id),i(),o()}})]})}function hC({nodeId:t}){const r=me(m=>m.activeStationId),o=me(m=>m.closeContextMenu),i=de(m=>m.plan.stations),l=de(m=>m.removeModuleConnection),u=i.find(m=>m.id===r);if(!u||!r)return null;const c=u.moduleConnections??[],p=t===It,y=p?"Station Input":"Station Output",x=c.filter(m=>p?m.sourceModuleId===It:m.targetModuleId===Wt);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[y,"  ",x.length," connection",x.length!==1?"s":""]}),d.jsx(rn,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{x.forEach(m=>{l(r,m.id)}),o()}})]})}const Em=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function gC({edgeId:t,viewMode:r}){var I,N;const o=me(C=>C.closeContextMenu),i=me(C=>C.clearSelection),l=me(C=>C.activeStationId),u=de(C=>C.plan),c=de(C=>C.updateConnection),p=de(C=>C.removeConnection),y=de(C=>C.updateModuleConnection),x=de(C=>C.removeModuleConnection),m=We(C=>C.gameData),{t:h}=gt();if(r==="network"){const C=u.connections.find(k=>k.id===t);if(!C)return null;const T=C.wareId?h((I=m==null?void 0:m.wares[C.wareId])==null?void 0:I.name,C.wareId):"Unknown";return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:T}),d.jsx(hc,{label:"Mode",value:C.mode??"auto",options:Em,onChange:k=>c(C.id,{mode:k})}),d.jsx(Er,{}),d.jsx(rn,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{p(C.id),i(),o()}})]})}if(!l)return null;const g=u.stations.find(C=>C.id===l),w=((g==null?void 0:g.moduleConnections)??[]).find(C=>C.id===t);if(!w)return null;const S=h((N=m==null?void 0:m.wares[w.wareId])==null?void 0:N.name,w.wareId);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:S}),d.jsx(hc,{label:"Mode",value:w.mode??"auto",options:Em,onChange:C=>y(l,w.id,{mode:C})}),d.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:C=>C.stopPropagation(),children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),y(l,w.id,{locked:!w.locked})},className:`w-10 h-5 rounded-full transition-colors ${w.locked?"bg-primary":"bg-muted"}`,children:d.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${w.locked?"translate-x-5":"translate-x-0.5"}`})})]}),d.jsx(Er,{}),d.jsx(rn,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{x(l,w.id),i(),o()}})]})}function vg(){const t=me(m=>m.contextMenu),r=me(m=>m.closeContextMenu),o=F.useRef(null),i=F.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const m=o.current.getBoundingClientRect();let{x:h,y:g}=t;return h+m.width>window.innerWidth&&(h=window.innerWidth-m.width-8),g+m.height>window.innerHeight&&(g=window.innerHeight-m.height-8),h<8&&(h=8),g<8&&(g=8),{left:h,top:g}},[t]);if(F.useEffect(()=>{if(!t)return;const m=g=>{o.current&&!o.current.contains(g.target)&&r()},h=setTimeout(()=>{document.addEventListener("mousedown",m)},0);return()=>{clearTimeout(h),document.removeEventListener("mousedown",m)}},[t,r]),F.useEffect(()=>{if(!t)return;const m=h=>{h.key==="Escape"&&r()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[t,r]),!t)return null;const{target:l}=t,c=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return d.jsx(aC,{});if(l.viewMode==="station")return d.jsx(uC,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return d.jsx(cC,{nodeId:l.nodeId});if(l.nodeType==="sector")return d.jsx(fC,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===It||l.nodeId===Wt)return d.jsx(hC,{nodeId:l.nodeId});if(l.nodeType==="module")return d.jsx(mC,{nodeId:l.nodeId})}}return l.type==="edge"?d.jsx(gC,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!c)return null;const y=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",x=i();return d.jsx("div",{ref:o,className:`fixed z-50 ${y} rounded-md border border-border bg-popover shadow-lg`,style:{left:x.left||t.x,top:x.top||t.y},onClick:m=>m.stopPropagation(),onMouseDown:m=>m.stopPropagation(),children:d.jsx("div",{className:"p-1",children:c})})}const xC={station:Kk,sector:Jk},yC={resource:iC};function vC(){const{setViewport:t,screenToFlowPosition:r}=_r(),o=de(j=>j.plan.stations),i=de(j=>j.plan.sectors),l=de(j=>j.plan.connections),u=de(j=>j.computed),c=de(j=>j.updateStation),p=de(j=>j.updateSector),y=de(j=>j.removeStation),x=de(j=>j.removeSector),m=de(j=>j.moveStationToSector),h=de(j=>j.addConnection),g=de(j=>j.removeConnection),w=me(j=>j.selectNode),S=me(j=>j.selectEdge),I=me(j=>j.clearSelection),N=me(j=>j.openContextMenu),C=me(j=>j.closeContextMenu),T=F.useRef(null),k=F.useMemo(()=>{const j=i.map(M=>({id:M.id,type:"sector",position:M.position,data:{sector:M},width:M.size.width,height:M.size.height,zIndex:-1})),D=o.map(M=>({id:M.id,type:"station",position:M.position,data:{station:M},zIndex:1}));return[...j,...D]},[i,o]),P=F.useMemo(()=>l.map(j=>({id:j.id,source:j.sourceStationId,target:j.targetStationId,sourceHandle:j.wareId?`output-${j.wareId}`:void 0,targetHandle:j.wareId?`input-${j.wareId}`:void 0,type:"resource",data:{connection:j}})),[l]),$=F.useCallback((j,D)=>{for(const M of i)if(j>=M.position.x&&j<=M.position.x+M.size.width&&D>=M.position.y&&D<=M.position.y+M.size.height)return M.id;return null},[i]),V=F.useCallback(j=>{j.forEach(D=>{if(D.type==="position"&&D.position){const M=o.find(E=>E.id===D.id),b=i.find(E=>E.id===D.id);if(M)c(D.id,{position:D.position});else if(b){const E=D.position.x-b.position.x,O=D.position.y-b.position.y;p(D.id,{position:D.position}),(E!==0||O!==0)&&o.filter(G=>G.sectorId===b.id).forEach(G=>{c(G.id,{position:{x:G.position.x+E,y:G.position.y+O}})})}}else if(D.type==="remove"){const M=o.find(E=>E.id===D.id),b=i.find(E=>E.id===D.id);M?y(D.id):b&&x(D.id)}else D.type==="select"&&D.selected&&w(D.id)})},[o,i,c,p,y,x,w]),W=F.useCallback((j,D)=>{const M=o.find(G=>G.id===D.id);if(!M)return;const b=D.position.x+80,E=D.position.y+50,O=$(b,E);O!==M.sectorId&&m(M.id,O)},[o,$,m]),K=F.useCallback(j=>{j.forEach(D=>{D.type==="remove"?g(D.id):D.type==="select"&&D.selected&&S(D.id)})},[g,S]),q=j=>j?j.split("-").slice(1).join("-"):"",H=F.useCallback(j=>{if(j.source&&j.target&&j.sourceHandle){const D=q(j.sourceHandle),M=u.stations.find(Z=>Z.stationId===j.source),b=M==null?void 0:M.remainingOutputs.find(Z=>Z.wareId===D),E=u.stations.find(Z=>Z.stationId===j.target),O=E==null?void 0:E.remainingInputs.find(Z=>Z.wareId===D),G=O?Math.min((b==null?void 0:b.amount)??0,O.amount):(b==null?void 0:b.amount)??0;h({sourceStationId:j.source,targetStationId:j.target,wareId:D,amount:G,mode:"auto"})}},[h,u.stations]),L=F.useCallback(()=>{I(),C()},[I,C]),X=F.useCallback(j=>{j.preventDefault(),N({x:j.clientX,y:j.clientY,flowPosition:r({x:j.clientX,y:j.clientY}),target:{type:"pane",viewMode:"network"}})},[N,r]),Q=F.useCallback((j,D)=>{j.preventDefault(),w(D.id),N({x:j.clientX,y:j.clientY,flowPosition:r({x:j.clientX,y:j.clientY}),target:{type:"node",nodeId:D.id,nodeType:D.type??"station",viewMode:"network"}})},[N,r,w]),A=F.useCallback((j,D)=>{j.preventDefault(),S(D.id),N({x:j.clientX,y:j.clientY,flowPosition:r({x:j.clientX,y:j.clientY}),target:{type:"edge",edgeId:D.id,edgeType:D.type??"resource",viewMode:"network"}})},[N,r,S]),R=F.useCallback(j=>{if(j.key==="Delete"||j.key==="Backspace"){const D=me.getState().selectedNodeId,M=me.getState().selectedEdgeId;if(D){const b=o.find(O=>O.id===D),E=i.find(O=>O.id===D);b?y(D):E&&x(D),I()}else M&&(g(M),I())}},[o,i,y,x,g,I]),z=F.useCallback(j=>{const D=Math.round(j.x),M=Math.round(j.y),b=Math.round(j.zoom*100)/100;(D!==j.x||M!==j.y||b!==j.zoom)&&t({x:D,y:M,zoom:b})},[t]);return d.jsxs("div",{ref:T,className:"flex-1 relative",onKeyDown:R,tabIndex:0,children:[d.jsxs(ug,{nodes:k,edges:P,onNodesChange:V,onEdgesChange:K,onConnect:H,onNodeDragStop:W,onPaneClick:L,onPaneContextMenu:X,onNodeContextMenu:Q,onEdgeContextMenu:A,onViewportChange:z,nodeTypes:xC,edgeTypes:yC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[d.jsx(fg,{gap:16,size:1}),d.jsx(mg,{}),d.jsx(uk,{nodeColor:j=>j.type==="sector"?j.selected?"#3b82f6":"#475569":j.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),d.jsx(vg,{})]})}function wC(){return d.jsx(Hl,{children:d.jsx(vC,{})})}const SC={module:tC,stationInput:rC,stationOutput:sC},NC={module:lC};function kC(){const{setViewport:t,screenToFlowPosition:r}=_r(),o=me(R=>R.activeStationId),i=de(R=>R.plan.stations),l=de(R=>R.computed),u=de(R=>R.updateModule),c=de(R=>R.removeModule),p=de(R=>R.addModuleConnection),y=de(R=>R.removeModuleConnection),x=me(R=>R.selectNode),m=me(R=>R.selectEdge),h=me(R=>R.clearSelection),g=me(R=>R.openContextMenu),w=me(R=>R.closeContextMenu),S=F.useRef(null),I=F.useMemo(()=>i.find(R=>R.id===o),[i,o]),N={x:-300,y:100},C={x:400,y:100},T=F.useMemo(()=>{if(!I)return[];const R=I.modules.map(D=>({id:D.id,type:"module",position:D.position,data:{module:D}})),z={id:It,type:"stationInput",position:I.stationInputPosition??N,data:{},deletable:!1},j={id:Wt,type:"stationOutput",position:I.stationOutputPosition??C,data:{},deletable:!1};return[z,...R,j]},[I]),k=F.useMemo(()=>I?(I.moduleConnections??[]).map(z=>({id:z.id,source:z.sourceModuleId,target:z.targetModuleId,sourceHandle:z.wareId?`output-${z.wareId}`:void 0,targetHandle:z.wareId?`input-${z.wareId}`:void 0,type:"module",data:{connection:z}})):[],[I]),P=de(R=>R.updateStation),$=F.useCallback(R=>{o&&R.forEach(z=>{z.type==="position"&&z.position?z.id===It?P(o,{stationInputPosition:z.position}):z.id===Wt?P(o,{stationOutputPosition:z.position}):u(o,z.id,{position:z.position}):z.type==="remove"?z.id!==It&&z.id!==Wt&&c(o,z.id):z.type==="select"&&z.selected&&x(z.id)})},[o,u,P,c,x]),V=F.useCallback(R=>{o&&R.forEach(z=>{z.type==="remove"?y(o,z.id):z.type==="select"&&z.selected&&m(z.id)})},[o,y,m]),W=R=>R?R.split("-").slice(1).join("-"):"",K=F.useCallback(R=>{if(!o||!R.source||!R.target)return;let z,j=0,D;if(R.source===It){if(!R.targetHandle)return;z=W(R.targetHandle);const M=gr(l,o,R.target),b=M==null?void 0:M.netInputs.find(E=>E.wareId===z);j=(b==null?void 0:b.amount)??0}else if(R.target===Wt){if(!R.sourceHandle)return;z=W(R.sourceHandle);const M=gr(l,o,R.source),b=M==null?void 0:M.netOutputs.find(E=>E.wareId===z);j=(b==null?void 0:b.amount)??0}else{if(!R.sourceHandle)return;z=W(R.sourceHandle);const M=gr(l,o,R.source),b=M==null?void 0:M.grossOutputs.find(Z=>Z.wareId===z),E=(b==null?void 0:b.amount)??0,O=gr(l,o,R.target),G=O==null?void 0:O.grossInputs.find(Z=>Z.wareId===z);j=G?Math.min(E,G.amount):E,D=E>0?j/E:0}z&&p(o,{sourceModuleId:R.source,targetModuleId:R.target,wareId:z,amount:j,mode:"auto",locked:!1,ratio:D})},[o,l,p]),q=F.useCallback(()=>{h(),w()},[h,w]),H=F.useCallback(R=>{R.preventDefault(),g({x:R.clientX,y:R.clientY,flowPosition:r({x:R.clientX,y:R.clientY}),target:{type:"pane",viewMode:"station"}})},[g,r]),L=F.useCallback((R,z)=>{R.preventDefault(),x(z.id),g({x:R.clientX,y:R.clientY,flowPosition:r({x:R.clientX,y:R.clientY}),target:{type:"node",nodeId:z.id,nodeType:z.type??"module",viewMode:"station"}})},[g,r,x]),X=F.useCallback((R,z)=>{R.preventDefault(),m(z.id),g({x:R.clientX,y:R.clientY,flowPosition:r({x:R.clientX,y:R.clientY}),target:{type:"edge",edgeId:z.id,edgeType:z.type??"module",viewMode:"station"}})},[g,r,m]),Q=F.useCallback(R=>{if(R.key==="Delete"||R.key==="Backspace"){const z=me.getState().selectedNodeId,j=me.getState().selectedEdgeId;z&&o?z!==It&&z!==Wt&&(c(o,z),h()):j&&o&&(y(o,j),h())}},[o,c,y,h]),A=F.useCallback(R=>{const z=Math.round(R.x),j=Math.round(R.y),D=Math.round(R.zoom*100)/100;(z!==R.x||j!==R.y||D!==R.zoom)&&t({x:z,y:j,zoom:D})},[t]);return I?d.jsxs("div",{ref:S,className:"flex-1 relative",onKeyDown:Q,tabIndex:0,children:[d.jsxs(ug,{nodes:T,edges:k,onNodesChange:$,onEdgesChange:V,onConnect:K,onPaneClick:q,onPaneContextMenu:H,onNodeContextMenu:L,onEdgeContextMenu:X,onViewportChange:A,nodeTypes:SC,edgeTypes:NC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[d.jsx(fg,{gap:16,size:1}),d.jsx(mg,{})]}),d.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[d.jsx("h2",{className:"font-medium text-foreground",children:I.name}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.modules.length," module",I.modules.length!==1?"s":"",","," ",(I.moduleConnections??[]).length," connection",(I.moduleConnections??[]).length!==1?"s":""]})]}),d.jsx(vg,{})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:d.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function CC(){return d.jsx(Hl,{children:d.jsx(kC,{})})}let dl=null;async function IC(){if(dl)return dl;const t=await fetch("/Station-Planner-For-X4-Foundations/gamedata.json");if(!t.ok)throw new Error(`Failed to load game data: ${t.statusText}`);return dl=await t.json(),dl}function EC(){const t=me(o=>o.theme),r=me(o=>o.setTheme);F.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),F.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const u=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",u)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function _C(){const t=me(o=>o.language),r=me(o=>o.setLanguage);F.useEffect(()=>{const o=localStorage.getItem("x4-planner-language");o&&r(o)},[r]),F.useEffect(()=>{localStorage.setItem("x4-planner-language",t)},[t])}function jC(){EC(),_C();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=We(),u=me(c=>c.viewMode);return F.useEffect(()=>{IC().then(c=>{i(c),de.getState().recompute()}).catch(c=>l(c.message))},[i,l]),r?d.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?d.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):d.jsx(Hl,{children:d.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[d.jsx(Ok,{}),d.jsx(Vk,{}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u==="network"?d.jsx(wC,{}):d.jsx(CC,{}),d.jsx(Hk,{})]}),d.jsx(Uk,{}),t&&d.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]})]})})}s0.createRoot(document.getElementById("root")).render(d.jsx(F.StrictMode,{children:d.jsx(jC,{})}));
