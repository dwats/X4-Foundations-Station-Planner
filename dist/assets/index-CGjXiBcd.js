(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();function _h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Au={exports:{}},us={},Lu={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Zx(){if(sp)return je;sp=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function x(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function k(E,T,Z){this.props=E,this.context=T,this.refs=j,this.updater=Z||w}k.prototype.isReactComponent={},k.prototype.setState=function(E,T){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,T,"setState")},k.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function I(){}I.prototype=k.prototype;function D(E,T,Z){this.props=E,this.context=T,this.refs=j,this.updater=Z||w}var C=D.prototype=new I;C.constructor=D,S(C,k.prototype),C.isPureReactComponent=!0;var P=Array.isArray,A=Object.prototype.hasOwnProperty,V={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function K(E,T,Z){var G,ne={},oe=null,ae=null;if(T!=null)for(G in T.ref!==void 0&&(ae=T.ref),T.key!==void 0&&(oe=""+T.key),T)A.call(T,G)&&!W.hasOwnProperty(G)&&(ne[G]=T[G]);var re=arguments.length-2;if(re===1)ne.children=Z;else if(1<re){for(var ue=Array(re),ve=0;ve<re;ve++)ue[ve]=arguments[ve+2];ne.children=ue}if(E&&E.defaultProps)for(G in re=E.defaultProps,re)ne[G]===void 0&&(ne[G]=re[G]);return{$$typeof:t,type:E,key:oe,ref:ae,props:ne,_owner:V.current}}function q(E,T){return{$$typeof:t,type:E.type,key:T,ref:E.ref,props:E.props,_owner:E._owner}}function H(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function $(E){var T={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Z){return T[Z]})}var X=/\/+/g;function Q(E,T){return typeof E=="object"&&E!==null&&E.key!=null?$(""+E.key):T.toString(36)}function O(E,T,Z,G,ne){var oe=typeof E;(oe==="undefined"||oe==="boolean")&&(E=null);var ae=!1;if(E===null)ae=!0;else switch(oe){case"string":case"number":ae=!0;break;case"object":switch(E.$$typeof){case t:case r:ae=!0}}if(ae)return ae=E,ne=ne(ae),E=G===""?"."+Q(ae,0):G,P(ne)?(Z="",E!=null&&(Z=E.replace(X,"$&/")+"/"),O(ne,T,Z,"",function(ve){return ve})):ne!=null&&(H(ne)&&(ne=q(ne,Z+(!ne.key||ae&&ae.key===ne.key?"":(""+ne.key).replace(X,"$&/")+"/")+E)),T.push(ne)),1;if(ae=0,G=G===""?".":G+":",P(E))for(var re=0;re<E.length;re++){oe=E[re];var ue=G+Q(oe,re);ae+=O(oe,T,Z,ue,ne)}else if(ue=x(E),typeof ue=="function")for(E=ue.call(E),re=0;!(oe=E.next()).done;)oe=oe.value,ue=G+Q(oe,re++),ae+=O(oe,T,Z,ue,ne);else if(oe==="object")throw T=String(E),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return ae}function R(E,T,Z){if(E==null)return E;var G=[],ne=0;return O(E,G,"","",function(oe){return T.call(Z,oe,ne++)}),G}function z(E){if(E._status===-1){var T=E._result;T=T(),T.then(function(Z){(E._status===0||E._status===-1)&&(E._status=1,E._result=Z)},function(Z){(E._status===0||E._status===-1)&&(E._status=2,E._result=Z)}),E._status===-1&&(E._status=0,E._result=T)}if(E._status===1)return E._result.default;throw E._result}var M={current:null},b={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:b,ReactCurrentOwner:V};function L(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:R,forEach:function(E,T,Z){R(E,function(){T.apply(this,arguments)},Z)},count:function(E){var T=0;return R(E,function(){T++}),T},toArray:function(E){return R(E,function(T){return T})||[]},only:function(E){if(!H(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},je.Component=k,je.Fragment=o,je.Profiler=l,je.PureComponent=D,je.StrictMode=i,je.Suspense=y,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,je.act=L,je.cloneElement=function(E,T,Z){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var G=S({},E.props),ne=E.key,oe=E.ref,ae=E._owner;if(T!=null){if(T.ref!==void 0&&(oe=T.ref,ae=V.current),T.key!==void 0&&(ne=""+T.key),E.type&&E.type.defaultProps)var re=E.type.defaultProps;for(ue in T)A.call(T,ue)&&!W.hasOwnProperty(ue)&&(G[ue]=T[ue]===void 0&&re!==void 0?re[ue]:T[ue])}var ue=arguments.length-2;if(ue===1)G.children=Z;else if(1<ue){re=Array(ue);for(var ve=0;ve<ue;ve++)re[ve]=arguments[ve+2];G.children=re}return{$$typeof:t,type:E.type,key:ne,ref:oe,props:G,_owner:ae}},je.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:u,_context:E},E.Consumer=E},je.createElement=K,je.createFactory=function(E){var T=K.bind(null,E);return T.type=E,T},je.createRef=function(){return{current:null}},je.forwardRef=function(E){return{$$typeof:p,render:E}},je.isValidElement=H,je.lazy=function(E){return{$$typeof:h,_payload:{_status:-1,_result:E},_init:z}},je.memo=function(E,T){return{$$typeof:g,type:E,compare:T===void 0?null:T}},je.startTransition=function(E){var T=b.transition;b.transition={};try{E()}finally{b.transition=T}},je.unstable_act=L,je.useCallback=function(E,T){return M.current.useCallback(E,T)},je.useContext=function(E){return M.current.useContext(E)},je.useDebugValue=function(){},je.useDeferredValue=function(E){return M.current.useDeferredValue(E)},je.useEffect=function(E,T){return M.current.useEffect(E,T)},je.useId=function(){return M.current.useId()},je.useImperativeHandle=function(E,T,Z){return M.current.useImperativeHandle(E,T,Z)},je.useInsertionEffect=function(E,T){return M.current.useInsertionEffect(E,T)},je.useLayoutEffect=function(E,T){return M.current.useLayoutEffect(E,T)},je.useMemo=function(E,T){return M.current.useMemo(E,T)},je.useReducer=function(E,T,Z){return M.current.useReducer(E,T,Z)},je.useRef=function(E){return M.current.useRef(E)},je.useState=function(E){return M.current.useState(E)},je.useSyncExternalStore=function(E,T,Z){return M.current.useSyncExternalStore(E,T,Z)},je.useTransition=function(){return M.current.useTransition()},je.version="18.3.1",je}var ip;function Es(){return ip||(ip=1,Lu.exports=Zx()),Lu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function Jx(){if(lp)return us;lp=1;var t=Es(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,g){var h,m={},x=null,w=null;g!==void 0&&(x=""+g),y.key!==void 0&&(x=""+y.key),y.ref!==void 0&&(w=y.ref);for(h in y)i.call(y,h)&&!u.hasOwnProperty(h)&&(m[h]=y[h]);if(p&&p.defaultProps)for(h in y=p.defaultProps,y)m[h]===void 0&&(m[h]=y[h]);return{$$typeof:r,type:p,key:x,ref:w,props:m,_owner:l.current}}return us.Fragment=o,us.jsx=d,us.jsxs=d,us}var ap;function e0(){return ap||(ap=1,Au.exports=Jx()),Au.exports}var c=e0(),F=Es();const ps=_h(F);var Zi={},$u={exports:{}},ht={},zu={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function t0(){return up||(up=1,(function(t){function r(b,N){var L=b.length;b.push(N);e:for(;0<L;){var E=L-1>>>1,T=b[E];if(0<l(T,N))b[E]=N,b[L]=T,L=E;else break e}}function o(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var N=b[0],L=b.pop();if(L!==N){b[0]=L;e:for(var E=0,T=b.length,Z=T>>>1;E<Z;){var G=2*(E+1)-1,ne=b[G],oe=G+1,ae=b[oe];if(0>l(ne,L))oe<T&&0>l(ae,ne)?(b[E]=ae,b[oe]=L,E=oe):(b[E]=ne,b[G]=L,E=G);else if(oe<T&&0>l(ae,L))b[E]=ae,b[oe]=L,E=oe;else break e}}return N}function l(b,N){var L=b.sortIndex-N.sortIndex;return L!==0?L:b.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var y=[],g=[],h=1,m=null,x=3,w=!1,S=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(b){for(var N=o(g);N!==null;){if(N.callback===null)i(g);else if(N.startTime<=b)i(g),N.sortIndex=N.expirationTime,r(y,N);else break;N=o(g)}}function P(b){if(j=!1,C(b),!S)if(o(y)!==null)S=!0,z(A);else{var N=o(g);N!==null&&M(P,N.startTime-b)}}function A(b,N){S=!1,j&&(j=!1,I(K),K=-1),w=!0;var L=x;try{for(C(N),m=o(y);m!==null&&(!(m.expirationTime>N)||b&&!$());){var E=m.callback;if(typeof E=="function"){m.callback=null,x=m.priorityLevel;var T=E(m.expirationTime<=N);N=t.unstable_now(),typeof T=="function"?m.callback=T:m===o(y)&&i(y),C(N)}else i(y);m=o(y)}if(m!==null)var Z=!0;else{var G=o(g);G!==null&&M(P,G.startTime-N),Z=!1}return Z}finally{m=null,x=L,w=!1}}var V=!1,W=null,K=-1,q=5,H=-1;function $(){return!(t.unstable_now()-H<q)}function X(){if(W!==null){var b=t.unstable_now();H=b;var N=!0;try{N=W(!0,b)}finally{N?Q():(V=!1,W=null)}}else V=!1}var Q;if(typeof D=="function")Q=function(){D(X)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=X,Q=function(){R.postMessage(null)}}else Q=function(){k(X,0)};function z(b){W=b,V||(V=!0,Q())}function M(b,N){K=k(function(){b(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,z(A))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return o(y)},t.unstable_next=function(b){switch(x){case 1:case 2:case 3:var N=3;break;default:N=x}var L=x;x=N;try{return b()}finally{x=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,N){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var L=x;x=b;try{return N()}finally{x=L}},t.unstable_scheduleCallback=function(b,N,L){var E=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?E+L:E):L=E,b){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=L+T,b={id:h++,callback:N,priorityLevel:b,startTime:L,expirationTime:T,sortIndex:-1},L>E?(b.sortIndex=L,r(g,b),o(y)===null&&b===o(g)&&(j?(I(K),K=-1):j=!0,M(P,L-E))):(b.sortIndex=T,r(y,b),S||w||(S=!0,z(A))),b},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(b){var N=x;return function(){var L=x;x=N;try{return b.apply(this,arguments)}finally{x=L}}}})(Ru)),Ru}var cp;function n0(){return cp||(cp=1,zu.exports=t0()),zu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function r0(){if(dp)return ht;dp=1;var t=Es(),r=n0();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function u(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function x(e){return y.call(m,e)?!0:y.call(h,e)?!1:g.test(e)?m[e]=!0:(h[e]=!0,!1)}function w(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,n,s,a){if(n===null||typeof n>"u"||w(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function j(e,n,s,a,f,v,_){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=_}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new j(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];k[n]=new j(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new j(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new j(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new j(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new j(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new j(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new j(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new j(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(I,D);k[n]=new j(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(I,D);k[n]=new j(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(I,D);k[n]=new j(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new j(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new j(e,1,!1,e.toLowerCase(),null,!0,!0)});function C(e,n,s,a){var f=k.hasOwnProperty(n)?k[n]:null;(f!==null?f.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,s,f,a)&&(s=null),a||f===null?x(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):f.mustUseProperty?e[f.propertyName]=s===null?f.type===3?!1:"":s:(n=f.attributeName,a=f.attributeNamespace,s===null?e.removeAttribute(n):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),V=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),$=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),b=Symbol.iterator;function N(e){return e===null||typeof e!="object"?null:(e=b&&e[b]||e["@@iterator"],typeof e=="function"?e:null)}var L=Object.assign,E;function T(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var Z=!1;function G(e,n){if(!e||Z)return"";Z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(te){var a=te}Reflect.construct(e,[],n)}else{try{n.call()}catch(te){a=te}e.call(n.prototype)}else{try{throw Error()}catch(te){a=te}e()}}catch(te){if(te&&a&&typeof te.stack=="string"){for(var f=te.stack.split(`
`),v=a.stack.split(`
`),_=f.length-1,B=v.length-1;1<=_&&0<=B&&f[_]!==v[B];)B--;for(;1<=_&&0<=B;_--,B--)if(f[_]!==v[B]){if(_!==1||B!==1)do if(_--,B--,0>B||f[_]!==v[B]){var U=`
`+f[_].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=_&&0<=B);break}}}finally{Z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?T(e):""}function ne(e){switch(e.tag){case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1),e;case 11:return e=G(e.type.render,!1),e;case 1:return e=G(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case V:return"Portal";case q:return"Profiler";case K:return"StrictMode";case Q:return"Suspense";case O:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case X:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case z:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}function ae(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function re(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ue(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ve(e){var n=ue(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,v.call(this,_)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ce(e){e._valueTracker||(e._valueTracker=ve(e))}function ke(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=ue(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function we(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ee(e,n){var s=n.checked;return L({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Te(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=re(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function _e(e,n){n=n.checked,n!=null&&C(e,"checked",n,!1)}function Xe(e,n){_e(e,n);var s=re(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?xt(e,n.type,s):n.hasOwnProperty("defaultValue")&&xt(e,n.type,re(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Lt(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function xt(e,n,s){(n!=="number"||we(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var yt=Array.isArray;function _t(e,n,s,a){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&a&&(e[s].defaultSelected=!0)}else{for(s=""+re(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function sn(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return L({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nn(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(yt(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:re(s)}}function _r(e,n){var s=re(n.value),a=re(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Qn(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function ln(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function an(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?ln(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gn,Os=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,f){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,f)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Gn=Gn||document.createElement("div"),Gn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Gn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function un(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bl=["Webkit","ms","Moz","O"];Object.keys(Kn).forEach(function(e){Bl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Kn[n]=Kn[e]})});function As(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Kn.hasOwnProperty(e)&&Kn[e]?(""+n).trim():n+"px"}function Ls(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,f=As(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,f):e[s]=f}}var Wl=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vo(e,n){if(n){if(Wl[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function wo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=null;function No(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ko=null,kn=null,Cn=null;function $s(e){if(e=Qo(e)){if(typeof ko!="function")throw Error(o(280));var n=e.stateNode;n&&(n=pi(n),ko(e.stateNode,e.type,n))}}function zs(e){kn?Cn?Cn.push(e):Cn=[e]:kn=e}function Rs(){if(kn){var e=kn,n=Cn;if(Cn=kn=null,$s(e),n)for(e=0;e<n.length;e++)$s(n[e])}}function Fs(e,n){return e(n)}function Hs(){}var Co=!1;function Vs(e,n,s){if(Co)return e(n,s);Co=!0;try{return Fs(e,n,s)}finally{Co=!1,(kn!==null||Cn!==null)&&(Hs(),Rs())}}function qn(e,n){var s=e.stateNode;if(s===null)return null;var a=pi(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Io=!1;if(p)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Io=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Io=!1}function Ul(e,n,s,a,f,v,_,B,U){var te=Array.prototype.slice.call(arguments,3);try{n.apply(s,te)}catch(ie){this.onError(ie)}}var Jn=!1,Mr=null,br=!1,jo=null,Yl={onError:function(e){Jn=!0,Mr=e}};function Xl(e,n,s,a,f,v,_,B,U){Jn=!1,Mr=null,Ul.apply(Yl,arguments)}function Ql(e,n,s,a,f,v,_,B,U){if(Xl.apply(this,arguments),Jn){if(Jn){var te=Mr;Jn=!1,Mr=null}else throw Error(o(198));br||(br=!0,jo=te)}}function Gt(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Eo(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _o(e){if(Gt(e)!==e)throw Error(o(188))}function Gl(e){var n=e.alternate;if(!n){if(n=Gt(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var f=s.return;if(f===null)break;var v=f.alternate;if(v===null){if(a=f.return,a!==null){s=a;continue}break}if(f.child===v.child){for(v=f.child;v;){if(v===s)return _o(f),e;if(v===a)return _o(f),n;v=v.sibling}throw Error(o(188))}if(s.return!==a.return)s=f,a=v;else{for(var _=!1,B=f.child;B;){if(B===s){_=!0,s=f,a=v;break}if(B===a){_=!0,a=f,s=v;break}B=B.sibling}if(!_){for(B=v.child;B;){if(B===s){_=!0,s=v,a=f;break}if(B===a){_=!0,a=v,s=f;break}B=B.sibling}if(!_)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Bs(e){return e=Gl(e),e!==null?Ws(e):null}function Ws(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Ws(e);if(n!==null)return n;e=e.sibling}return null}var Us=r.unstable_scheduleCallback,Ys=r.unstable_cancelCallback,Kl=r.unstable_shouldYield,Xs=r.unstable_requestPaint,He=r.unstable_now,ql=r.unstable_getCurrentPriorityLevel,Mo=r.unstable_ImmediatePriority,Qs=r.unstable_UserBlockingPriority,Pr=r.unstable_NormalPriority,Zl=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,er=null,Mt=null;function Jl(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(er,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:na,ea=Math.log,ta=Math.LN2;function na(e){return e>>>=0,e===0?32:31-(ea(e)/ta|0)|0}var Dr=64,Tr=4194304;function Kt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Or(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,f=e.suspendedLanes,v=e.pingedLanes,_=s&268435455;if(_!==0){var B=_&~f;B!==0?a=Kt(B):(v&=_,v!==0&&(a=Kt(v)))}else _=s&~f,_!==0?a=Kt(_):v!==0&&(a=Kt(v));if(a===0)return 0;if(n!==0&&n!==a&&(n&f)===0&&(f=a&-a,v=n&-n,f>=v||f===16&&(v&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-vt(n),f=1<<s,a|=e[s],n&=~f;return a}function Ks(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ra(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,v=e.pendingLanes;0<v;){var _=31-vt(v),B=1<<_,U=f[_];U===-1?((B&s)===0||(B&a)!==0)&&(f[_]=Ks(B,n)):U<=n&&(e.expiredLanes|=B),v&=~B}}function bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ar(){var e=Dr;return Dr<<=1,(Dr&4194240)===0&&(Dr=64),e}function Po(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function tr(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-vt(n),e[n]=s}function qs(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var f=31-vt(s),v=1<<f;n[f]=0,a[f]=-1,e[f]=-1,s&=~v}}function oa(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-vt(s),f=1<<a;f&n|e[a]&n&&(e[a]|=n),s&=~f}}var De=0;function Lc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var $c,sa,zc,Rc,Fc,ia=!1,Zs=[],In=null,jn=null,En=null,Do=new Map,To=new Map,_n=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hc(e,n){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Do.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":To.delete(n.pointerId)}}function Oo(e,n,s,a,f,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:v,targetContainers:[f]},n!==null&&(n=Qo(n),n!==null&&sa(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function Sg(e,n,s,a,f){switch(n){case"focusin":return In=Oo(In,e,n,s,a,f),!0;case"dragenter":return jn=Oo(jn,e,n,s,a,f),!0;case"mouseover":return En=Oo(En,e,n,s,a,f),!0;case"pointerover":var v=f.pointerId;return Do.set(v,Oo(Do.get(v)||null,e,n,s,a,f)),!0;case"gotpointercapture":return v=f.pointerId,To.set(v,Oo(To.get(v)||null,e,n,s,a,f)),!0}return!1}function Vc(e){var n=nr(e.target);if(n!==null){var s=Gt(n);if(s!==null){if(n=s.tag,n===13){if(n=Eo(s),n!==null){e.blockedOn=n,Fc(e.priority,function(){zc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Js(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=aa(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);So=a,s.target.dispatchEvent(a),So=null}else return n=Qo(s),n!==null&&sa(n),e.blockedOn=s,!1;n.shift()}return!0}function Bc(e,n,s){Js(e)&&s.delete(n)}function Ng(){ia=!1,In!==null&&Js(In)&&(In=null),jn!==null&&Js(jn)&&(jn=null),En!==null&&Js(En)&&(En=null),Do.forEach(Bc),To.forEach(Bc)}function Ao(e,n){e.blockedOn===n&&(e.blockedOn=null,ia||(ia=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ng)))}function Lo(e){function n(f){return Ao(f,e)}if(0<Zs.length){Ao(Zs[0],e);for(var s=1;s<Zs.length;s++){var a=Zs[s];a.blockedOn===e&&(a.blockedOn=null)}}for(In!==null&&Ao(In,e),jn!==null&&Ao(jn,e),En!==null&&Ao(En,e),Do.forEach(n),To.forEach(n),s=0;s<_n.length;s++)a=_n[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<_n.length&&(s=_n[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&_n.shift()}var Lr=P.ReactCurrentBatchConfig,ei=!0;function kg(e,n,s,a){var f=De,v=Lr.transition;Lr.transition=null;try{De=1,la(e,n,s,a)}finally{De=f,Lr.transition=v}}function Cg(e,n,s,a){var f=De,v=Lr.transition;Lr.transition=null;try{De=4,la(e,n,s,a)}finally{De=f,Lr.transition=v}}function la(e,n,s,a){if(ei){var f=aa(e,n,s,a);if(f===null)Ia(e,n,a,ti,s),Hc(e,a);else if(Sg(f,e,n,s,a))a.stopPropagation();else if(Hc(e,a),n&4&&-1<wg.indexOf(e)){for(;f!==null;){var v=Qo(f);if(v!==null&&$c(v),v=aa(e,n,s,a),v===null&&Ia(e,n,a,ti,s),v===f)break;f=v}f!==null&&a.stopPropagation()}else Ia(e,n,a,null,s)}}var ti=null;function aa(e,n,s,a){if(ti=null,e=No(a),e=nr(e),e!==null)if(n=Gt(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Eo(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ti=e,null}function Wc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case Mo:return 1;case Qs:return 4;case Pr:case Zl:return 16;case Gs:return 536870912;default:return 16}default:return 16}}var Mn=null,ua=null,ni=null;function Uc(){if(ni)return ni;var e,n=ua,s=n.length,a,f="value"in Mn?Mn.value:Mn.textContent,v=f.length;for(e=0;e<s&&n[e]===f[e];e++);var _=s-e;for(a=1;a<=_&&n[s-a]===f[v-a];a++);return ni=f.slice(e,1<a?1-a:void 0)}function ri(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function oi(){return!0}function Yc(){return!1}function wt(e){function n(s,a,f,v,_){this._reactName=s,this._targetInst=f,this.type=a,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(s=e[B],this[B]=s?s(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?oi:Yc,this.isPropagationStopped=Yc,this}return L(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),n}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=wt($r),$o=L({},$r,{view:0,detail:0}),Ig=wt($o),da,fa,zo,si=L({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zo&&(zo&&e.type==="mousemove"?(da=e.screenX-zo.screenX,fa=e.screenY-zo.screenY):fa=da=0,zo=e),da)},movementY:function(e){return"movementY"in e?e.movementY:fa}}),Xc=wt(si),jg=L({},si,{dataTransfer:0}),Eg=wt(jg),_g=L({},$o,{relatedTarget:0}),pa=wt(_g),Mg=L({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),bg=wt(Mg),Pg=L({},$r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dg=wt(Pg),Tg=L({},$r,{data:0}),Qc=wt(Tg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $g(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Lg[e])?!!n[e]:!1}function ha(){return $g}var zg=L({},$o,{key:function(e){if(e.key){var n=Og[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ag[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rg=wt(zg),Fg=L({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gc=wt(Fg),Hg=L({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),Vg=wt(Hg),Bg=L({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wg=wt(Bg),Ug=L({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yg=wt(Ug),Xg=[9,13,27,32],ma=p&&"CompositionEvent"in window,Ro=null;p&&"documentMode"in document&&(Ro=document.documentMode);var Qg=p&&"TextEvent"in window&&!Ro,Kc=p&&(!ma||Ro&&8<Ro&&11>=Ro),qc=" ",Zc=!1;function Jc(e,n){switch(e){case"keyup":return Xg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function Gg(e,n){switch(e){case"compositionend":return ed(n);case"keypress":return n.which!==32?null:(Zc=!0,qc);case"textInput":return e=n.data,e===qc&&Zc?null:e;default:return null}}function Kg(e,n){if(zr)return e==="compositionend"||!ma&&Jc(e,n)?(e=Uc(),ni=ua=Mn=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Kc&&n.locale!=="ko"?null:n.data;default:return null}}var qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!qg[e.type]:n==="textarea"}function nd(e,n,s,a){zs(a),n=ci(n,"onChange"),0<n.length&&(s=new ca("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Fo=null,Ho=null;function Zg(e){wd(e,0)}function ii(e){var n=Br(e);if(ke(n))return e}function Jg(e,n){if(e==="change")return n}var rd=!1;if(p){var ga;if(p){var xa="oninput"in document;if(!xa){var od=document.createElement("div");od.setAttribute("oninput","return;"),xa=typeof od.oninput=="function"}ga=xa}else ga=!1;rd=ga&&(!document.documentMode||9<document.documentMode)}function sd(){Fo&&(Fo.detachEvent("onpropertychange",id),Ho=Fo=null)}function id(e){if(e.propertyName==="value"&&ii(Ho)){var n=[];nd(n,Ho,e,No(e)),Vs(Zg,n)}}function ex(e,n,s){e==="focusin"?(sd(),Fo=n,Ho=s,Fo.attachEvent("onpropertychange",id)):e==="focusout"&&sd()}function tx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(Ho)}function nx(e,n){if(e==="click")return ii(n)}function rx(e,n){if(e==="input"||e==="change")return ii(n)}function ox(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var $t=typeof Object.is=="function"?Object.is:ox;function Vo(e,n){if($t(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var f=s[a];if(!y.call(n,f)||!$t(e[f],n[f]))return!1}return!0}function ld(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ad(e,n){var s=ld(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ld(s)}}function ud(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ud(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function cd(){for(var e=window,n=we();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=we(e.document)}return n}function ya(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function sx(e){var n=cd(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&ud(s.ownerDocument.documentElement,s)){if(a!==null&&ya(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var f=s.textContent.length,v=Math.min(a.start,f);a=a.end===void 0?v:Math.min(a.end,f),!e.extend&&v>a&&(f=a,a=v,v=f),f=ad(s,v);var _=ad(s,a);f&&_&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),e.removeAllRanges(),v>a?(e.addRange(n),e.extend(_.node,_.offset)):(n.setEnd(_.node,_.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ix=p&&"documentMode"in document&&11>=document.documentMode,Rr=null,va=null,Bo=null,wa=!1;function dd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;wa||Rr==null||Rr!==we(a)||(a=Rr,"selectionStart"in a&&ya(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Bo&&Vo(Bo,a)||(Bo=a,a=ci(va,"onSelect"),0<a.length&&(n=new ca("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Rr)))}function li(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Fr={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionend:li("Transition","TransitionEnd")},Sa={},fd={};p&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function ai(e){if(Sa[e])return Sa[e];if(!Fr[e])return e;var n=Fr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in fd)return Sa[e]=n[s];return e}var pd=ai("animationend"),hd=ai("animationiteration"),md=ai("animationstart"),gd=ai("transitionend"),xd=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(e,n){xd.set(e,n),u(n,[e])}for(var Na=0;Na<yd.length;Na++){var ka=yd[Na],lx=ka.toLowerCase(),ax=ka[0].toUpperCase()+ka.slice(1);bn(lx,"on"+ax)}bn(pd,"onAnimationEnd"),bn(hd,"onAnimationIteration"),bn(md,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(gd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function vd(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,Ql(a,n,void 0,e),e.currentTarget=null}function wd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],f=a.event;a=a.listeners;e:{var v=void 0;if(n)for(var _=a.length-1;0<=_;_--){var B=a[_],U=B.instance,te=B.currentTarget;if(B=B.listener,U!==v&&f.isPropagationStopped())break e;vd(f,B,te),v=U}else for(_=0;_<a.length;_++){if(B=a[_],U=B.instance,te=B.currentTarget,B=B.listener,U!==v&&f.isPropagationStopped())break e;vd(f,B,te),v=U}}}if(br)throw e=jo,br=!1,jo=null,e}function Le(e,n){var s=n[Pa];s===void 0&&(s=n[Pa]=new Set);var a=e+"__bubble";s.has(a)||(Sd(n,e,2,!1),s.add(a))}function Ca(e,n,s){var a=0;n&&(a|=4),Sd(s,e,a,n)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Uo(e){if(!e[ui]){e[ui]=!0,i.forEach(function(s){s!=="selectionchange"&&(ux.has(s)||Ca(s,!1,e),Ca(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ui]||(n[ui]=!0,Ca("selectionchange",!1,n))}}function Sd(e,n,s,a){switch(Wc(n)){case 1:var f=kg;break;case 4:f=Cg;break;default:f=la}s=f.bind(null,n,s,e),f=void 0,!Io||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function Ia(e,n,s,a,f){var v=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var _=a.tag;if(_===3||_===4){var B=a.stateNode.containerInfo;if(B===f||B.nodeType===8&&B.parentNode===f)break;if(_===4)for(_=a.return;_!==null;){var U=_.tag;if((U===3||U===4)&&(U=_.stateNode.containerInfo,U===f||U.nodeType===8&&U.parentNode===f))return;_=_.return}for(;B!==null;){if(_=nr(B),_===null)return;if(U=_.tag,U===5||U===6){a=v=_;continue e}B=B.parentNode}}a=a.return}Vs(function(){var te=v,ie=No(s),le=[];e:{var se=xd.get(e);if(se!==void 0){var fe=ca,me=e;switch(e){case"keypress":if(ri(s)===0)break e;case"keydown":case"keyup":fe=Rg;break;case"focusin":me="focus",fe=pa;break;case"focusout":me="blur",fe=pa;break;case"beforeblur":case"afterblur":fe=pa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Eg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Vg;break;case pd:case hd:case md:fe=bg;break;case gd:fe=Wg;break;case"scroll":fe=Ig;break;case"wheel":fe=Yg;break;case"copy":case"cut":case"paste":fe=Dg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Gc}var ge=(n&4)!==0,Ye=!ge&&e==="scroll",J=ge?se!==null?se+"Capture":null:se;ge=[];for(var Y=te,ee;Y!==null;){ee=Y;var ce=ee.stateNode;if(ee.tag===5&&ce!==null&&(ee=ce,J!==null&&(ce=qn(Y,J),ce!=null&&ge.push(Yo(Y,ce,ee)))),Ye)break;Y=Y.return}0<ge.length&&(se=new fe(se,me,null,s,ie),le.push({event:se,listeners:ge}))}}if((n&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",se&&s!==So&&(me=s.relatedTarget||s.fromElement)&&(nr(me)||me[cn]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(me=s.relatedTarget||s.toElement,fe=te,me=me?nr(me):null,me!==null&&(Ye=Gt(me),me!==Ye||me.tag!==5&&me.tag!==6)&&(me=null)):(fe=null,me=te),fe!==me)){if(ge=Xc,ce="onMouseLeave",J="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Gc,ce="onPointerLeave",J="onPointerEnter",Y="pointer"),Ye=fe==null?se:Br(fe),ee=me==null?se:Br(me),se=new ge(ce,Y+"leave",fe,s,ie),se.target=Ye,se.relatedTarget=ee,ce=null,nr(ie)===te&&(ge=new ge(J,Y+"enter",me,s,ie),ge.target=ee,ge.relatedTarget=Ye,ce=ge),Ye=ce,fe&&me)t:{for(ge=fe,J=me,Y=0,ee=ge;ee;ee=Hr(ee))Y++;for(ee=0,ce=J;ce;ce=Hr(ce))ee++;for(;0<Y-ee;)ge=Hr(ge),Y--;for(;0<ee-Y;)J=Hr(J),ee--;for(;Y--;){if(ge===J||J!==null&&ge===J.alternate)break t;ge=Hr(ge),J=Hr(J)}ge=null}else ge=null;fe!==null&&Nd(le,se,fe,ge,!1),me!==null&&Ye!==null&&Nd(le,Ye,me,ge,!0)}}e:{if(se=te?Br(te):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var xe=Jg;else if(td(se))if(rd)xe=rx;else{xe=tx;var Se=ex}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(xe=nx);if(xe&&(xe=xe(e,te))){nd(le,xe,s,ie);break e}Se&&Se(e,se,te),e==="focusout"&&(Se=se._wrapperState)&&Se.controlled&&se.type==="number"&&xt(se,"number",se.value)}switch(Se=te?Br(te):window,e){case"focusin":(td(Se)||Se.contentEditable==="true")&&(Rr=Se,va=te,Bo=null);break;case"focusout":Bo=va=Rr=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,dd(le,s,ie);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":dd(le,s,ie)}var Ne;if(ma)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else zr?Jc(e,s)&&(Ie="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ie="onCompositionStart");Ie&&(Kc&&s.locale!=="ko"&&(zr||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&zr&&(Ne=Uc()):(Mn=ie,ua="value"in Mn?Mn.value:Mn.textContent,zr=!0)),Se=ci(te,Ie),0<Se.length&&(Ie=new Qc(Ie,e,null,s,ie),le.push({event:Ie,listeners:Se}),Ne?Ie.data=Ne:(Ne=ed(s),Ne!==null&&(Ie.data=Ne)))),(Ne=Qg?Gg(e,s):Kg(e,s))&&(te=ci(te,"onBeforeInput"),0<te.length&&(ie=new Qc("onBeforeInput","beforeinput",null,s,ie),le.push({event:ie,listeners:te}),ie.data=Ne))}wd(le,n)})}function Yo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ci(e,n){for(var s=n+"Capture",a=[];e!==null;){var f=e,v=f.stateNode;f.tag===5&&v!==null&&(f=v,v=qn(e,s),v!=null&&a.unshift(Yo(e,v,f)),v=qn(e,n),v!=null&&a.push(Yo(e,v,f))),e=e.return}return a}function Hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nd(e,n,s,a,f){for(var v=n._reactName,_=[];s!==null&&s!==a;){var B=s,U=B.alternate,te=B.stateNode;if(U!==null&&U===a)break;B.tag===5&&te!==null&&(B=te,f?(U=qn(s,v),U!=null&&_.unshift(Yo(s,U,B))):f||(U=qn(s,v),U!=null&&_.push(Yo(s,U,B)))),s=s.return}_.length!==0&&e.push({event:n,listeners:_})}var cx=/\r\n?/g,dx=/\u0000|\uFFFD/g;function kd(e){return(typeof e=="string"?e:""+e).replace(cx,`
`).replace(dx,"")}function di(e,n,s){if(n=kd(n),kd(e)!==n&&s)throw Error(o(425))}function fi(){}var ja=null,Ea=null;function _a(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ma=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,Cd=typeof Promise=="function"?Promise:void 0,px=typeof queueMicrotask=="function"?queueMicrotask:typeof Cd<"u"?function(e){return Cd.resolve(null).then(e).catch(hx)}:Ma;function hx(e){setTimeout(function(){throw e})}function ba(e,n){var s=n,a=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(a===0){e.removeChild(f),Lo(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=f}while(s);Lo(n)}function Pn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Id(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),qt="__reactFiber$"+Vr,Xo="__reactProps$"+Vr,cn="__reactContainer$"+Vr,Pa="__reactEvents$"+Vr,mx="__reactListeners$"+Vr,gx="__reactHandles$"+Vr;function nr(e){var n=e[qt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[cn]||s[qt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Id(e);e!==null;){if(s=e[qt])return s;e=Id(e)}return n}e=s,s=e.parentNode}return null}function Qo(e){return e=e[qt]||e[cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function pi(e){return e[Xo]||null}var Da=[],Wr=-1;function Dn(e){return{current:e}}function $e(e){0>Wr||(e.current=Da[Wr],Da[Wr]=null,Wr--)}function Oe(e,n){Wr++,Da[Wr]=e.current,e.current=n}var Tn={},rt=Dn(Tn),ut=Dn(!1),rr=Tn;function Ur(e,n){var s=e.type.contextTypes;if(!s)return Tn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var f={},v;for(v in s)f[v]=n[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=f),f}function ct(e){return e=e.childContextTypes,e!=null}function hi(){$e(ut),$e(rt)}function jd(e,n,s){if(rt.current!==Tn)throw Error(o(168));Oe(rt,n),Oe(ut,s)}function Ed(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var f in a)if(!(f in n))throw Error(o(108,ae(e)||"Unknown",f));return L({},s,a)}function mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tn,rr=rt.current,Oe(rt,e),Oe(ut,ut.current),!0}function _d(e,n,s){var a=e.stateNode;if(!a)throw Error(o(169));s?(e=Ed(e,n,rr),a.__reactInternalMemoizedMergedChildContext=e,$e(ut),$e(rt),Oe(rt,e)):$e(ut),Oe(ut,s)}var dn=null,gi=!1,Ta=!1;function Md(e){dn===null?dn=[e]:dn.push(e)}function xx(e){gi=!0,Md(e)}function On(){if(!Ta&&dn!==null){Ta=!0;var e=0,n=De;try{var s=dn;for(De=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}dn=null,gi=!1}catch(f){throw dn!==null&&(dn=dn.slice(e+1)),Us(Mo,On),f}finally{De=n,Ta=!1}}return null}var Yr=[],Xr=0,xi=null,yi=0,bt=[],Pt=0,or=null,fn=1,pn="";function sr(e,n){Yr[Xr++]=yi,Yr[Xr++]=xi,xi=e,yi=n}function bd(e,n,s){bt[Pt++]=fn,bt[Pt++]=pn,bt[Pt++]=or,or=e;var a=fn;e=pn;var f=32-vt(a)-1;a&=~(1<<f),s+=1;var v=32-vt(n)+f;if(30<v){var _=f-f%5;v=(a&(1<<_)-1).toString(32),a>>=_,f-=_,fn=1<<32-vt(n)+f|s<<f|a,pn=v+e}else fn=1<<v|s<<f|a,pn=e}function Oa(e){e.return!==null&&(sr(e,1),bd(e,1,0))}function Aa(e){for(;e===xi;)xi=Yr[--Xr],Yr[Xr]=null,yi=Yr[--Xr],Yr[Xr]=null;for(;e===or;)or=bt[--Pt],bt[Pt]=null,pn=bt[--Pt],bt[Pt]=null,fn=bt[--Pt],bt[Pt]=null}var St=null,Nt=null,ze=!1,zt=null;function Pd(e,n){var s=At(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Dd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,St=e,Nt=Pn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,St=e,Nt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=or!==null?{id:fn,overflow:pn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=At(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,St=e,Nt=null,!0):!1;default:return!1}}function La(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $a(e){if(ze){var n=Nt;if(n){var s=n;if(!Dd(e,n)){if(La(e))throw Error(o(418));n=Pn(s.nextSibling);var a=St;n&&Dd(e,n)?Pd(a,s):(e.flags=e.flags&-4097|2,ze=!1,St=e)}}else{if(La(e))throw Error(o(418));e.flags=e.flags&-4097|2,ze=!1,St=e}}}function Td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function vi(e){if(e!==St)return!1;if(!ze)return Td(e),ze=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!_a(e.type,e.memoizedProps)),n&&(n=Nt)){if(La(e))throw Od(),Error(o(418));for(;n;)Pd(e,n),n=Pn(n.nextSibling)}if(Td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Nt=Pn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Nt=null}}else Nt=St?Pn(e.stateNode.nextSibling):null;return!0}function Od(){for(var e=Nt;e;)e=Pn(e.nextSibling)}function Qr(){Nt=St=null,ze=!1}function za(e){zt===null?zt=[e]:zt.push(e)}var yx=P.ReactCurrentBatchConfig;function Go(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var a=s.stateNode}if(!a)throw Error(o(147,e));var f=a,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(_){var B=f.refs;_===null?delete B[v]:B[v]=_},n._stringRef=v,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function wi(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Ad(e){var n=e._init;return n(e._payload)}function Ld(e){function n(J,Y){if(e){var ee=J.deletions;ee===null?(J.deletions=[Y],J.flags|=16):ee.push(Y)}}function s(J,Y){if(!e)return null;for(;Y!==null;)n(J,Y),Y=Y.sibling;return null}function a(J,Y){for(J=new Map;Y!==null;)Y.key!==null?J.set(Y.key,Y):J.set(Y.index,Y),Y=Y.sibling;return J}function f(J,Y){return J=Vn(J,Y),J.index=0,J.sibling=null,J}function v(J,Y,ee){return J.index=ee,e?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Y?(J.flags|=2,Y):ee):(J.flags|=2,Y)):(J.flags|=1048576,Y)}function _(J){return e&&J.alternate===null&&(J.flags|=2),J}function B(J,Y,ee,ce){return Y===null||Y.tag!==6?(Y=Mu(ee,J.mode,ce),Y.return=J,Y):(Y=f(Y,ee),Y.return=J,Y)}function U(J,Y,ee,ce){var xe=ee.type;return xe===W?ie(J,Y,ee.props.children,ce,ee.key):Y!==null&&(Y.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===z&&Ad(xe)===Y.type)?(ce=f(Y,ee.props),ce.ref=Go(J,Y,ee),ce.return=J,ce):(ce=Wi(ee.type,ee.key,ee.props,null,J.mode,ce),ce.ref=Go(J,Y,ee),ce.return=J,ce)}function te(J,Y,ee,ce){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=bu(ee,J.mode,ce),Y.return=J,Y):(Y=f(Y,ee.children||[]),Y.return=J,Y)}function ie(J,Y,ee,ce,xe){return Y===null||Y.tag!==7?(Y=pr(ee,J.mode,ce,xe),Y.return=J,Y):(Y=f(Y,ee),Y.return=J,Y)}function le(J,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=Mu(""+Y,J.mode,ee),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return ee=Wi(Y.type,Y.key,Y.props,null,J.mode,ee),ee.ref=Go(J,null,Y),ee.return=J,ee;case V:return Y=bu(Y,J.mode,ee),Y.return=J,Y;case z:var ce=Y._init;return le(J,ce(Y._payload),ee)}if(yt(Y)||N(Y))return Y=pr(Y,J.mode,ee,null),Y.return=J,Y;wi(J,Y)}return null}function se(J,Y,ee,ce){var xe=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return xe!==null?null:B(J,Y,""+ee,ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return ee.key===xe?U(J,Y,ee,ce):null;case V:return ee.key===xe?te(J,Y,ee,ce):null;case z:return xe=ee._init,se(J,Y,xe(ee._payload),ce)}if(yt(ee)||N(ee))return xe!==null?null:ie(J,Y,ee,ce,null);wi(J,ee)}return null}function fe(J,Y,ee,ce,xe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return J=J.get(ee)||null,B(Y,J,""+ce,xe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case A:return J=J.get(ce.key===null?ee:ce.key)||null,U(Y,J,ce,xe);case V:return J=J.get(ce.key===null?ee:ce.key)||null,te(Y,J,ce,xe);case z:var Se=ce._init;return fe(J,Y,ee,Se(ce._payload),xe)}if(yt(ce)||N(ce))return J=J.get(ee)||null,ie(Y,J,ce,xe,null);wi(Y,ce)}return null}function me(J,Y,ee,ce){for(var xe=null,Se=null,Ne=Y,Ie=Y=0,et=null;Ne!==null&&Ie<ee.length;Ie++){Ne.index>Ie?(et=Ne,Ne=null):et=Ne.sibling;var Pe=se(J,Ne,ee[Ie],ce);if(Pe===null){Ne===null&&(Ne=et);break}e&&Ne&&Pe.alternate===null&&n(J,Ne),Y=v(Pe,Y,Ie),Se===null?xe=Pe:Se.sibling=Pe,Se=Pe,Ne=et}if(Ie===ee.length)return s(J,Ne),ze&&sr(J,Ie),xe;if(Ne===null){for(;Ie<ee.length;Ie++)Ne=le(J,ee[Ie],ce),Ne!==null&&(Y=v(Ne,Y,Ie),Se===null?xe=Ne:Se.sibling=Ne,Se=Ne);return ze&&sr(J,Ie),xe}for(Ne=a(J,Ne);Ie<ee.length;Ie++)et=fe(Ne,J,Ie,ee[Ie],ce),et!==null&&(e&&et.alternate!==null&&Ne.delete(et.key===null?Ie:et.key),Y=v(et,Y,Ie),Se===null?xe=et:Se.sibling=et,Se=et);return e&&Ne.forEach(function(Bn){return n(J,Bn)}),ze&&sr(J,Ie),xe}function ge(J,Y,ee,ce){var xe=N(ee);if(typeof xe!="function")throw Error(o(150));if(ee=xe.call(ee),ee==null)throw Error(o(151));for(var Se=xe=null,Ne=Y,Ie=Y=0,et=null,Pe=ee.next();Ne!==null&&!Pe.done;Ie++,Pe=ee.next()){Ne.index>Ie?(et=Ne,Ne=null):et=Ne.sibling;var Bn=se(J,Ne,Pe.value,ce);if(Bn===null){Ne===null&&(Ne=et);break}e&&Ne&&Bn.alternate===null&&n(J,Ne),Y=v(Bn,Y,Ie),Se===null?xe=Bn:Se.sibling=Bn,Se=Bn,Ne=et}if(Pe.done)return s(J,Ne),ze&&sr(J,Ie),xe;if(Ne===null){for(;!Pe.done;Ie++,Pe=ee.next())Pe=le(J,Pe.value,ce),Pe!==null&&(Y=v(Pe,Y,Ie),Se===null?xe=Pe:Se.sibling=Pe,Se=Pe);return ze&&sr(J,Ie),xe}for(Ne=a(J,Ne);!Pe.done;Ie++,Pe=ee.next())Pe=fe(Ne,J,Ie,Pe.value,ce),Pe!==null&&(e&&Pe.alternate!==null&&Ne.delete(Pe.key===null?Ie:Pe.key),Y=v(Pe,Y,Ie),Se===null?xe=Pe:Se.sibling=Pe,Se=Pe);return e&&Ne.forEach(function(qx){return n(J,qx)}),ze&&sr(J,Ie),xe}function Ye(J,Y,ee,ce){if(typeof ee=="object"&&ee!==null&&ee.type===W&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:e:{for(var xe=ee.key,Se=Y;Se!==null;){if(Se.key===xe){if(xe=ee.type,xe===W){if(Se.tag===7){s(J,Se.sibling),Y=f(Se,ee.props.children),Y.return=J,J=Y;break e}}else if(Se.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===z&&Ad(xe)===Se.type){s(J,Se.sibling),Y=f(Se,ee.props),Y.ref=Go(J,Se,ee),Y.return=J,J=Y;break e}s(J,Se);break}else n(J,Se);Se=Se.sibling}ee.type===W?(Y=pr(ee.props.children,J.mode,ce,ee.key),Y.return=J,J=Y):(ce=Wi(ee.type,ee.key,ee.props,null,J.mode,ce),ce.ref=Go(J,Y,ee),ce.return=J,J=ce)}return _(J);case V:e:{for(Se=ee.key;Y!==null;){if(Y.key===Se)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){s(J,Y.sibling),Y=f(Y,ee.children||[]),Y.return=J,J=Y;break e}else{s(J,Y);break}else n(J,Y);Y=Y.sibling}Y=bu(ee,J.mode,ce),Y.return=J,J=Y}return _(J);case z:return Se=ee._init,Ye(J,Y,Se(ee._payload),ce)}if(yt(ee))return me(J,Y,ee,ce);if(N(ee))return ge(J,Y,ee,ce);wi(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Y!==null&&Y.tag===6?(s(J,Y.sibling),Y=f(Y,ee),Y.return=J,J=Y):(s(J,Y),Y=Mu(ee,J.mode,ce),Y.return=J,J=Y),_(J)):s(J,Y)}return Ye}var Gr=Ld(!0),$d=Ld(!1),Si=Dn(null),Ni=null,Kr=null,Ra=null;function Fa(){Ra=Kr=Ni=null}function Ha(e){var n=Si.current;$e(Si),e._currentValue=n}function Va(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function qr(e,n){Ni=e,Ra=Kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(dt=!0),e.firstContext=null)}function Dt(e){var n=e._currentValue;if(Ra!==e)if(e={context:e,memoizedValue:n,next:null},Kr===null){if(Ni===null)throw Error(o(308));Kr=e,Ni.dependencies={lanes:0,firstContext:e}}else Kr=Kr.next=e;return n}var ir=null;function Ba(e){ir===null?ir=[e]:ir.push(e)}function zd(e,n,s,a){var f=n.interleaved;return f===null?(s.next=s,Ba(n)):(s.next=f.next,f.next=s),n.interleaved=s,hn(e,a)}function hn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var An=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ln(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(be&2)!==0){var f=a.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),a.pending=n,hn(e,s)}return f=a.interleaved,f===null?(n.next=n,Ba(a)):(n.next=f.next,f.next=n),a.interleaved=n,hn(e,s)}function ki(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,oa(e,s)}}function Fd(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var f=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var _={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?f=v=_:v=v.next=_,s=s.next}while(s!==null);v===null?f=v=n:v=v.next=n}else f=v=n;s={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Ci(e,n,s,a){var f=e.updateQueue;An=!1;var v=f.firstBaseUpdate,_=f.lastBaseUpdate,B=f.shared.pending;if(B!==null){f.shared.pending=null;var U=B,te=U.next;U.next=null,_===null?v=te:_.next=te,_=U;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,B=ie.lastBaseUpdate,B!==_&&(B===null?ie.firstBaseUpdate=te:B.next=te,ie.lastBaseUpdate=U))}if(v!==null){var le=f.baseState;_=0,ie=te=U=null,B=v;do{var se=B.lane,fe=B.eventTime;if((a&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var me=e,ge=B;switch(se=n,fe=s,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){le=me.call(fe,le,se);break e}le=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,se=typeof me=="function"?me.call(fe,le,se):me,se==null)break e;le=L({},le,se);break e;case 2:An=!0}}B.callback!==null&&B.lane!==0&&(e.flags|=64,se=f.effects,se===null?f.effects=[B]:se.push(B))}else fe={eventTime:fe,lane:se,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ie===null?(te=ie=fe,U=le):ie=ie.next=fe,_|=se;if(B=B.next,B===null){if(B=f.shared.pending,B===null)break;se=B,B=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(ie===null&&(U=le),f.baseState=U,f.firstBaseUpdate=te,f.lastBaseUpdate=ie,n=f.shared.interleaved,n!==null){f=n;do _|=f.lane,f=f.next;while(f!==n)}else v===null&&(f.shared.lanes=0);ur|=_,e.lanes=_,e.memoizedState=le}}function Hd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],f=a.callback;if(f!==null){if(a.callback=null,a=s,typeof f!="function")throw Error(o(191,f));f.call(a)}}}var Ko={},Zt=Dn(Ko),qo=Dn(Ko),Zo=Dn(Ko);function lr(e){if(e===Ko)throw Error(o(174));return e}function Ua(e,n){switch(Oe(Zo,n),Oe(qo,e),Oe(Zt,Ko),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:an(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=an(n,e)}$e(Zt),Oe(Zt,n)}function Zr(){$e(Zt),$e(qo),$e(Zo)}function Vd(e){lr(Zo.current);var n=lr(Zt.current),s=an(n,e.type);n!==s&&(Oe(qo,e),Oe(Zt,s))}function Ya(e){qo.current===e&&($e(Zt),$e(qo))}var Ve=Dn(0);function Ii(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xa=[];function Qa(){for(var e=0;e<Xa.length;e++)Xa[e]._workInProgressVersionPrimary=null;Xa.length=0}var ji=P.ReactCurrentDispatcher,Ga=P.ReactCurrentBatchConfig,ar=0,Be=null,Ke=null,Ze=null,Ei=!1,Jo=!1,es=0,vx=0;function ot(){throw Error(o(321))}function Ka(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!$t(e[s],n[s]))return!1;return!0}function qa(e,n,s,a,f,v){if(ar=v,Be=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ji.current=e===null||e.memoizedState===null?kx:Cx,e=s(a,f),Jo){v=0;do{if(Jo=!1,es=0,25<=v)throw Error(o(301));v+=1,Ze=Ke=null,n.updateQueue=null,ji.current=Ix,e=s(a,f)}while(Jo)}if(ji.current=bi,n=Ke!==null&&Ke.next!==null,ar=0,Ze=Ke=Be=null,Ei=!1,n)throw Error(o(300));return e}function Za(){var e=es!==0;return es=0,e}function Jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Be.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Tt(){if(Ke===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var n=Ze===null?Be.memoizedState:Ze.next;if(n!==null)Ze=n,Ke=e;else{if(e===null)throw Error(o(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Be.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function ts(e,n){return typeof n=="function"?n(e):n}function Ja(e){var n=Tt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=Ke,f=a.baseQueue,v=s.pending;if(v!==null){if(f!==null){var _=f.next;f.next=v.next,v.next=_}a.baseQueue=f=v,s.pending=null}if(f!==null){v=f.next,a=a.baseState;var B=_=null,U=null,te=v;do{var ie=te.lane;if((ar&ie)===ie)U!==null&&(U=U.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),a=te.hasEagerState?te.eagerState:e(a,te.action);else{var le={lane:ie,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};U===null?(B=U=le,_=a):U=U.next=le,Be.lanes|=ie,ur|=ie}te=te.next}while(te!==null&&te!==v);U===null?_=a:U.next=B,$t(a,n.memoizedState)||(dt=!0),n.memoizedState=a,n.baseState=_,n.baseQueue=U,s.lastRenderedState=a}if(e=s.interleaved,e!==null){f=e;do v=f.lane,Be.lanes|=v,ur|=v,f=f.next;while(f!==e)}else f===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function eu(e){var n=Tt(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,f=s.pending,v=n.memoizedState;if(f!==null){s.pending=null;var _=f=f.next;do v=e(v,_.action),_=_.next;while(_!==f);$t(v,n.memoizedState)||(dt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,a]}function Bd(){}function Wd(e,n){var s=Be,a=Tt(),f=n(),v=!$t(a.memoizedState,f);if(v&&(a.memoizedState=f,dt=!0),a=a.queue,tu(Xd.bind(null,s,a,e),[e]),a.getSnapshot!==n||v||Ze!==null&&Ze.memoizedState.tag&1){if(s.flags|=2048,ns(9,Yd.bind(null,s,a,f,n),void 0,null),Je===null)throw Error(o(349));(ar&30)!==0||Ud(s,n,f)}return f}function Ud(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Yd(e,n,s,a){n.value=s,n.getSnapshot=a,Qd(n)&&Gd(e)}function Xd(e,n,s){return s(function(){Qd(n)&&Gd(e)})}function Qd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!$t(e,s)}catch{return!0}}function Gd(e){var n=hn(e,1);n!==null&&Vt(n,e,1,-1)}function Kd(e){var n=Jt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e},n.queue=e,e=e.dispatch=Nx.bind(null,Be,e),[n.memoizedState,e]}function ns(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=Be.updateQueue,n===null?(n={lastEffect:null,stores:null},Be.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function qd(){return Tt().memoizedState}function _i(e,n,s,a){var f=Jt();Be.flags|=e,f.memoizedState=ns(1|n,s,void 0,a===void 0?null:a)}function Mi(e,n,s,a){var f=Tt();a=a===void 0?null:a;var v=void 0;if(Ke!==null){var _=Ke.memoizedState;if(v=_.destroy,a!==null&&Ka(a,_.deps)){f.memoizedState=ns(n,s,v,a);return}}Be.flags|=e,f.memoizedState=ns(1|n,s,v,a)}function Zd(e,n){return _i(8390656,8,e,n)}function tu(e,n){return Mi(2048,8,e,n)}function Jd(e,n){return Mi(4,2,e,n)}function ef(e,n){return Mi(4,4,e,n)}function tf(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function nf(e,n,s){return s=s!=null?s.concat([e]):null,Mi(4,4,tf.bind(null,n,e),s)}function nu(){}function rf(e,n){var s=Tt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ka(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function of(e,n){var s=Tt();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ka(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function sf(e,n,s){return(ar&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s):($t(s,n)||(s=Ar(),Be.lanes|=s,ur|=s,e.baseState=!0),n)}function wx(e,n){var s=De;De=s!==0&&4>s?s:4,e(!0);var a=Ga.transition;Ga.transition={};try{e(!1),n()}finally{De=s,Ga.transition=a}}function lf(){return Tt().memoizedState}function Sx(e,n,s){var a=Fn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},af(e))uf(n,s);else if(s=zd(e,n,s,a),s!==null){var f=at();Vt(s,e,a,f),cf(s,n,a)}}function Nx(e,n,s){var a=Fn(e),f={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(af(e))uf(n,f);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var _=n.lastRenderedState,B=v(_,s);if(f.hasEagerState=!0,f.eagerState=B,$t(B,_)){var U=n.interleaved;U===null?(f.next=f,Ba(n)):(f.next=U.next,U.next=f),n.interleaved=f;return}}catch{}finally{}s=zd(e,n,f,a),s!==null&&(f=at(),Vt(s,e,a,f),cf(s,n,a))}}function af(e){var n=e.alternate;return e===Be||n!==null&&n===Be}function uf(e,n){Jo=Ei=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function cf(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,oa(e,s)}}var bi={readContext:Dt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},kx={readContext:Dt,useCallback:function(e,n){return Jt().memoizedState=[e,n===void 0?null:n],e},useContext:Dt,useEffect:Zd,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,_i(4194308,4,tf.bind(null,n,e),s)},useLayoutEffect:function(e,n){return _i(4194308,4,e,n)},useInsertionEffect:function(e,n){return _i(4,2,e,n)},useMemo:function(e,n){var s=Jt();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=Jt();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Sx.bind(null,Be,e),[a.memoizedState,e]},useRef:function(e){var n=Jt();return e={current:e},n.memoizedState=e},useState:Kd,useDebugValue:nu,useDeferredValue:function(e){return Jt().memoizedState=e},useTransition:function(){var e=Kd(!1),n=e[0];return e=wx.bind(null,e[1]),Jt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=Be,f=Jt();if(ze){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Je===null)throw Error(o(349));(ar&30)!==0||Ud(a,n,s)}f.memoizedState=s;var v={value:s,getSnapshot:n};return f.queue=v,Zd(Xd.bind(null,a,v,e),[e]),a.flags|=2048,ns(9,Yd.bind(null,a,v,s,n),void 0,null),s},useId:function(){var e=Jt(),n=Je.identifierPrefix;if(ze){var s=pn,a=fn;s=(a&~(1<<32-vt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=es++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=vx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Cx={readContext:Dt,useCallback:rf,useContext:Dt,useEffect:tu,useImperativeHandle:nf,useInsertionEffect:Jd,useLayoutEffect:ef,useMemo:of,useReducer:Ja,useRef:qd,useState:function(){return Ja(ts)},useDebugValue:nu,useDeferredValue:function(e){var n=Tt();return sf(n,Ke.memoizedState,e)},useTransition:function(){var e=Ja(ts)[0],n=Tt().memoizedState;return[e,n]},useMutableSource:Bd,useSyncExternalStore:Wd,useId:lf,unstable_isNewReconciler:!1},Ix={readContext:Dt,useCallback:rf,useContext:Dt,useEffect:tu,useImperativeHandle:nf,useInsertionEffect:Jd,useLayoutEffect:ef,useMemo:of,useReducer:eu,useRef:qd,useState:function(){return eu(ts)},useDebugValue:nu,useDeferredValue:function(e){var n=Tt();return Ke===null?n.memoizedState=e:sf(n,Ke.memoizedState,e)},useTransition:function(){var e=eu(ts)[0],n=Tt().memoizedState;return[e,n]},useMutableSource:Bd,useSyncExternalStore:Wd,useId:lf,unstable_isNewReconciler:!1};function Rt(e,n){if(e&&e.defaultProps){n=L({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function ru(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:L({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Pi={isMounted:function(e){return(e=e._reactInternals)?Gt(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=at(),f=Fn(e),v=mn(a,f);v.payload=n,s!=null&&(v.callback=s),n=Ln(e,v,f),n!==null&&(Vt(n,e,f,a),ki(n,e,f))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=at(),f=Fn(e),v=mn(a,f);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=Ln(e,v,f),n!==null&&(Vt(n,e,f,a),ki(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=at(),a=Fn(e),f=mn(s,a);f.tag=2,n!=null&&(f.callback=n),n=Ln(e,f,a),n!==null&&(Vt(n,e,a,s),ki(n,e,a))}};function df(e,n,s,a,f,v,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,_):n.prototype&&n.prototype.isPureReactComponent?!Vo(s,a)||!Vo(f,v):!0}function ff(e,n,s){var a=!1,f=Tn,v=n.contextType;return typeof v=="object"&&v!==null?v=Dt(v):(f=ct(n)?rr:rt.current,a=n.contextTypes,v=(a=a!=null)?Ur(e,f):Tn),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Pi,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=v),n}function pf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&Pi.enqueueReplaceState(n,n.state,null)}function ou(e,n,s,a){var f=e.stateNode;f.props=s,f.state=e.memoizedState,f.refs={},Wa(e);var v=n.contextType;typeof v=="object"&&v!==null?f.context=Dt(v):(v=ct(n)?rr:rt.current,f.context=Ur(e,v)),f.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(ru(e,n,v,s),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&Pi.enqueueReplaceState(f,f.state,null),Ci(e,s,f,a),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Jr(e,n){try{var s="",a=n;do s+=ne(a),a=a.return;while(a);var f=s}catch(v){f=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:f,digest:null}}function su(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function iu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function hf(e,n,s){s=mn(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){zi||(zi=!0,Su=a),iu(e,n)},s}function mf(e,n,s){s=mn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var f=n.value;s.payload=function(){return a(f)},s.callback=function(){iu(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){iu(e,n),typeof a!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})}),s}function gf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new jx;var f=new Set;a.set(n,f)}else f=a.get(n),f===void 0&&(f=new Set,a.set(n,f));f.has(s)||(f.add(s),e=Fx.bind(null,e,n,s),n.then(e,e))}function xf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function yf(e,n,s,a,f){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=mn(-1,1),n.tag=2,Ln(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var Ex=P.ReactCurrentOwner,dt=!1;function lt(e,n,s,a){n.child=e===null?$d(n,null,s,a):Gr(n,e.child,s,a)}function vf(e,n,s,a,f){s=s.render;var v=n.ref;return qr(n,f),a=qa(e,n,s,a,v,f),s=Za(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,gn(e,n,f)):(ze&&s&&Oa(n),n.flags|=1,lt(e,n,a,f),n.child)}function wf(e,n,s,a,f){if(e===null){var v=s.type;return typeof v=="function"&&!_u(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,Sf(e,n,v,a,f)):(e=Wi(s.type,null,a,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&f)===0){var _=v.memoizedProps;if(s=s.compare,s=s!==null?s:Vo,s(_,a)&&e.ref===n.ref)return gn(e,n,f)}return n.flags|=1,e=Vn(v,a),e.ref=n.ref,e.return=n,n.child=e}function Sf(e,n,s,a,f){if(e!==null){var v=e.memoizedProps;if(Vo(v,a)&&e.ref===n.ref)if(dt=!1,n.pendingProps=a=v,(e.lanes&f)!==0)(e.flags&131072)!==0&&(dt=!0);else return n.lanes=e.lanes,gn(e,n,f)}return lu(e,n,s,a,f)}function Nf(e,n,s){var a=n.pendingProps,f=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(to,kt),kt|=s;else{if((s&1073741824)===0)return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Oe(to,kt),kt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:s,Oe(to,kt),kt|=a}else v!==null?(a=v.baseLanes|s,n.memoizedState=null):a=s,Oe(to,kt),kt|=a;return lt(e,n,f,s),n.child}function kf(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function lu(e,n,s,a,f){var v=ct(s)?rr:rt.current;return v=Ur(n,v),qr(n,f),s=qa(e,n,s,a,v,f),a=Za(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,gn(e,n,f)):(ze&&a&&Oa(n),n.flags|=1,lt(e,n,s,f),n.child)}function Cf(e,n,s,a,f){if(ct(s)){var v=!0;mi(n)}else v=!1;if(qr(n,f),n.stateNode===null)Ti(e,n),ff(n,s,a),ou(n,s,a,f),a=!0;else if(e===null){var _=n.stateNode,B=n.memoizedProps;_.props=B;var U=_.context,te=s.contextType;typeof te=="object"&&te!==null?te=Dt(te):(te=ct(s)?rr:rt.current,te=Ur(n,te));var ie=s.getDerivedStateFromProps,le=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function";le||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B!==a||U!==te)&&pf(n,_,a,te),An=!1;var se=n.memoizedState;_.state=se,Ci(n,a,_,f),U=n.memoizedState,B!==a||se!==U||ut.current||An?(typeof ie=="function"&&(ru(n,s,ie,a),U=n.memoizedState),(B=An||df(n,s,B,a,se,U,te))?(le||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(n.flags|=4194308)):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=U),_.props=a,_.state=U,_.context=te,a=B):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{_=n.stateNode,Rd(e,n),B=n.memoizedProps,te=n.type===n.elementType?B:Rt(n.type,B),_.props=te,le=n.pendingProps,se=_.context,U=s.contextType,typeof U=="object"&&U!==null?U=Dt(U):(U=ct(s)?rr:rt.current,U=Ur(n,U));var fe=s.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B!==le||se!==U)&&pf(n,_,a,U),An=!1,se=n.memoizedState,_.state=se,Ci(n,a,_,f);var me=n.memoizedState;B!==le||se!==me||ut.current||An?(typeof fe=="function"&&(ru(n,s,fe,a),me=n.memoizedState),(te=An||df(n,s,te,a,se,me,U)||!1)?(ie||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(a,me,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(a,me,U)),typeof _.componentDidUpdate=="function"&&(n.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof _.componentDidUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=me),_.props=a,_.state=me,_.context=U,a=te):(typeof _.componentDidUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&se===e.memoizedState||(n.flags|=1024),a=!1)}return au(e,n,s,a,v,f)}function au(e,n,s,a,f,v){kf(e,n);var _=(n.flags&128)!==0;if(!a&&!_)return f&&_d(n,s,!1),gn(e,n,v);a=n.stateNode,Ex.current=n;var B=_&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&_?(n.child=Gr(n,e.child,null,v),n.child=Gr(n,null,B,v)):lt(e,n,B,v),n.memoizedState=a.state,f&&_d(n,s,!0),n.child}function If(e){var n=e.stateNode;n.pendingContext?jd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&jd(e,n.context,!1),Ua(e,n.containerInfo)}function jf(e,n,s,a,f){return Qr(),za(f),n.flags|=256,lt(e,n,s,a),n.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ef(e,n,s){var a=n.pendingProps,f=Ve.current,v=!1,_=(n.flags&128)!==0,B;if((B=_)||(B=e!==null&&e.memoizedState===null?!1:(f&2)!==0),B?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Oe(Ve,f&1),e===null)return $a(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(_=a.children,e=a.fallback,v?(a=n.mode,v=n.child,_={mode:"hidden",children:_},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=_):v=Ui(_,a,0,null),e=pr(e,a,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=cu(s),n.memoizedState=uu,e):du(n,_));if(f=e.memoizedState,f!==null&&(B=f.dehydrated,B!==null))return _x(e,n,_,a,B,f,s);if(v){v=a.fallback,_=n.mode,f=e.child,B=f.sibling;var U={mode:"hidden",children:a.children};return(_&1)===0&&n.child!==f?(a=n.child,a.childLanes=0,a.pendingProps=U,n.deletions=null):(a=Vn(f,U),a.subtreeFlags=f.subtreeFlags&14680064),B!==null?v=Vn(B,v):(v=pr(v,_,s,null),v.flags|=2),v.return=n,a.return=n,a.sibling=v,n.child=a,a=v,v=n.child,_=e.child.memoizedState,_=_===null?cu(s):{baseLanes:_.baseLanes|s,cachePool:null,transitions:_.transitions},v.memoizedState=_,v.childLanes=e.childLanes&~s,n.memoizedState=uu,a}return v=e.child,e=v.sibling,a=Vn(v,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function du(e,n){return n=Ui({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Di(e,n,s,a){return a!==null&&za(a),Gr(n,e.child,null,s),e=du(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function _x(e,n,s,a,f,v,_){if(s)return n.flags&256?(n.flags&=-257,a=su(Error(o(422))),Di(e,n,_,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=a.fallback,f=n.mode,a=Ui({mode:"visible",children:a.children},f,0,null),v=pr(v,f,_,null),v.flags|=2,a.return=n,v.return=n,a.sibling=v,n.child=a,(n.mode&1)!==0&&Gr(n,e.child,null,_),n.child.memoizedState=cu(_),n.memoizedState=uu,v);if((n.mode&1)===0)return Di(e,n,_,null);if(f.data==="$!"){if(a=f.nextSibling&&f.nextSibling.dataset,a)var B=a.dgst;return a=B,v=Error(o(419)),a=su(v,a,void 0),Di(e,n,_,a)}if(B=(_&e.childLanes)!==0,dt||B){if(a=Je,a!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(a.suspendedLanes|_))!==0?0:f,f!==0&&f!==v.retryLane&&(v.retryLane=f,hn(e,f),Vt(a,e,f,-1))}return Eu(),a=su(Error(o(421))),Di(e,n,_,a)}return f.data==="$?"?(n.flags|=128,n.child=e.child,n=Hx.bind(null,e),f._reactRetry=n,null):(e=v.treeContext,Nt=Pn(f.nextSibling),St=n,ze=!0,zt=null,e!==null&&(bt[Pt++]=fn,bt[Pt++]=pn,bt[Pt++]=or,fn=e.id,pn=e.overflow,or=n),n=du(n,a.children),n.flags|=4096,n)}function _f(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Va(e.return,n,s)}function fu(e,n,s,a,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:f}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=f)}function Mf(e,n,s){var a=n.pendingProps,f=a.revealOrder,v=a.tail;if(lt(e,n,a.children,s),a=Ve.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_f(e,s,n);else if(e.tag===19)_f(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Oe(Ve,a),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&Ii(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),fu(n,!1,f,s,v);break;case"backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Ii(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}fu(n,!0,s,null,v);break;case"together":fu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ti(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function gn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ur|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=Vn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Vn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Mx(e,n,s){switch(n.tag){case 3:If(n),Qr();break;case 5:Vd(n);break;case 1:ct(n.type)&&mi(n);break;case 4:Ua(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,f=n.memoizedProps.value;Oe(Si,a._currentValue),a._currentValue=f;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Oe(Ve,Ve.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Ef(e,n,s):(Oe(Ve,Ve.current&1),e=gn(e,n,s),e!==null?e.sibling:null);Oe(Ve,Ve.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return Mf(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Oe(Ve,Ve.current),a)break;return null;case 22:case 23:return n.lanes=0,Nf(e,n,s)}return gn(e,n,s)}var bf,pu,Pf,Df;bf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},pu=function(){},Pf=function(e,n,s,a){var f=e.memoizedProps;if(f!==a){e=n.stateNode,lr(Zt.current);var v=null;switch(s){case"input":f=Ee(e,f),a=Ee(e,a),v=[];break;case"select":f=L({},f,{value:void 0}),a=L({},a,{value:void 0}),v=[];break;case"textarea":f=sn(e,f),a=sn(e,a),v=[];break;default:typeof f.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=fi)}vo(s,a);var _;s=null;for(te in f)if(!a.hasOwnProperty(te)&&f.hasOwnProperty(te)&&f[te]!=null)if(te==="style"){var B=f[te];for(_ in B)B.hasOwnProperty(_)&&(s||(s={}),s[_]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(l.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in a){var U=a[te];if(B=f!=null?f[te]:void 0,a.hasOwnProperty(te)&&U!==B&&(U!=null||B!=null))if(te==="style")if(B){for(_ in B)!B.hasOwnProperty(_)||U&&U.hasOwnProperty(_)||(s||(s={}),s[_]="");for(_ in U)U.hasOwnProperty(_)&&B[_]!==U[_]&&(s||(s={}),s[_]=U[_])}else s||(v||(v=[]),v.push(te,s)),s=U;else te==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,B=B?B.__html:void 0,U!=null&&B!==U&&(v=v||[]).push(te,U)):te==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(te,""+U):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(l.hasOwnProperty(te)?(U!=null&&te==="onScroll"&&Le("scroll",e),v||B===U||(v=[])):(v=v||[]).push(te,U))}s&&(v=v||[]).push("style",s);var te=v;(n.updateQueue=te)&&(n.flags|=4)}},Df=function(e,n,s,a){s!==a&&(n.flags|=4)};function rs(e,n){if(!ze)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags&14680064,a|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function bx(e,n,s){var a=n.pendingProps;switch(Aa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(n),null;case 1:return ct(n.type)&&hi(),st(n),null;case 3:return a=n.stateNode,Zr(),$e(ut),$e(rt),Qa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(vi(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,zt!==null&&(Cu(zt),zt=null))),pu(e,n),st(n),null;case 5:Ya(n);var f=lr(Zo.current);if(s=n.type,e!==null&&n.stateNode!=null)Pf(e,n,s,a,f),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return st(n),null}if(e=lr(Zt.current),vi(n)){a=n.stateNode,s=n.type;var v=n.memoizedProps;switch(a[qt]=n,a[Xo]=v,e=(n.mode&1)!==0,s){case"dialog":Le("cancel",a),Le("close",a);break;case"iframe":case"object":case"embed":Le("load",a);break;case"video":case"audio":for(f=0;f<Wo.length;f++)Le(Wo[f],a);break;case"source":Le("error",a);break;case"img":case"image":case"link":Le("error",a),Le("load",a);break;case"details":Le("toggle",a);break;case"input":Te(a,v),Le("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},Le("invalid",a);break;case"textarea":Nn(a,v),Le("invalid",a)}vo(s,v),f=null;for(var _ in v)if(v.hasOwnProperty(_)){var B=v[_];_==="children"?typeof B=="string"?a.textContent!==B&&(v.suppressHydrationWarning!==!0&&di(a.textContent,B,e),f=["children",B]):typeof B=="number"&&a.textContent!==""+B&&(v.suppressHydrationWarning!==!0&&di(a.textContent,B,e),f=["children",""+B]):l.hasOwnProperty(_)&&B!=null&&_==="onScroll"&&Le("scroll",a)}switch(s){case"input":Ce(a),Lt(a,v,!0);break;case"textarea":Ce(a),Qn(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=fi)}a=f,n.updateQueue=a,a!==null&&(n.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ln(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=_.createElement(s,{is:a.is}):(e=_.createElement(s),s==="select"&&(_=e,a.multiple?_.multiple=!0:a.size&&(_.size=a.size))):e=_.createElementNS(e,s),e[qt]=n,e[Xo]=a,bf(e,n,!1,!1),n.stateNode=e;e:{switch(_=wo(s,a),s){case"dialog":Le("cancel",e),Le("close",e),f=a;break;case"iframe":case"object":case"embed":Le("load",e),f=a;break;case"video":case"audio":for(f=0;f<Wo.length;f++)Le(Wo[f],e);f=a;break;case"source":Le("error",e),f=a;break;case"img":case"image":case"link":Le("error",e),Le("load",e),f=a;break;case"details":Le("toggle",e),f=a;break;case"input":Te(e,a),f=Ee(e,a),Le("invalid",e);break;case"option":f=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},f=L({},a,{value:void 0}),Le("invalid",e);break;case"textarea":Nn(e,a),f=sn(e,a),Le("invalid",e);break;default:f=a}vo(s,f),B=f;for(v in B)if(B.hasOwnProperty(v)){var U=B[v];v==="style"?Ls(e,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Os(e,U)):v==="children"?typeof U=="string"?(s!=="textarea"||U!=="")&&un(e,U):typeof U=="number"&&un(e,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?U!=null&&v==="onScroll"&&Le("scroll",e):U!=null&&C(e,v,U,_))}switch(s){case"input":Ce(e),Lt(e,a,!1);break;case"textarea":Ce(e),Qn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+re(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?_t(e,!!a.multiple,v,!1):a.defaultValue!=null&&_t(e,!!a.multiple,a.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=fi)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return st(n),null;case 6:if(e&&n.stateNode!=null)Df(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(s=lr(Zo.current),lr(Zt.current),vi(n)){if(a=n.stateNode,s=n.memoizedProps,a[qt]=n,(v=a.nodeValue!==s)&&(e=St,e!==null))switch(e.tag){case 3:di(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&di(a.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[qt]=n,n.stateNode=a}return st(n),null;case 13:if($e(Ve),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Nt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Od(),Qr(),n.flags|=98560,v=!1;else if(v=vi(n),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[qt]=n}else Qr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;st(n),v=!1}else zt!==null&&(Cu(zt),zt=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ve.current&1)!==0?qe===0&&(qe=3):Eu())),n.updateQueue!==null&&(n.flags|=4),st(n),null);case 4:return Zr(),pu(e,n),e===null&&Uo(n.stateNode.containerInfo),st(n),null;case 10:return Ha(n.type._context),st(n),null;case 17:return ct(n.type)&&hi(),st(n),null;case 19:if($e(Ve),v=n.memoizedState,v===null)return st(n),null;if(a=(n.flags&128)!==0,_=v.rendering,_===null)if(a)rs(v,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(_=Ii(e),_!==null){for(n.flags|=128,rs(v,!1),a=_.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)v=s,e=a,v.flags&=14680066,_=v.alternate,_===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=_.childLanes,v.lanes=_.lanes,v.child=_.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=_.memoizedProps,v.memoizedState=_.memoizedState,v.updateQueue=_.updateQueue,v.type=_.type,e=_.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Oe(Ve,Ve.current&1|2),n.child}e=e.sibling}v.tail!==null&&He()>no&&(n.flags|=128,a=!0,rs(v,!1),n.lanes=4194304)}else{if(!a)if(e=Ii(_),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),rs(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!ze)return st(n),null}else 2*He()-v.renderingStartTime>no&&s!==1073741824&&(n.flags|=128,a=!0,rs(v,!1),n.lanes=4194304);v.isBackwards?(_.sibling=n.child,n.child=_):(s=v.last,s!==null?s.sibling=_:n.child=_,v.last=_)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=He(),n.sibling=null,s=Ve.current,Oe(Ve,a?s&1|2:s&1),n):(st(n),null);case 22:case 23:return ju(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(kt&1073741824)!==0&&(st(n),n.subtreeFlags&6&&(n.flags|=8192)):st(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Px(e,n){switch(Aa(n),n.tag){case 1:return ct(n.type)&&hi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Zr(),$e(ut),$e(rt),Qa(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Ya(n),null;case 13:if($e(Ve),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Qr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return $e(Ve),null;case 4:return Zr(),null;case 10:return Ha(n.type._context),null;case 22:case 23:return ju(),null;case 24:return null;default:return null}}var Oi=!1,it=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,pe=null;function eo(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Ue(e,n,a)}else s.current=null}function hu(e,n,s){try{s()}catch(a){Ue(e,n,a)}}var Tf=!1;function Tx(e,n){if(ja=ei,e=cd(),ya(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var f=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var _=0,B=-1,U=-1,te=0,ie=0,le=e,se=null;t:for(;;){for(var fe;le!==s||f!==0&&le.nodeType!==3||(B=_+f),le!==v||a!==0&&le.nodeType!==3||(U=_+a),le.nodeType===3&&(_+=le.nodeValue.length),(fe=le.firstChild)!==null;)se=le,le=fe;for(;;){if(le===e)break t;if(se===s&&++te===f&&(B=_),se===v&&++ie===a&&(U=_),(fe=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=fe}s=B===-1||U===-1?null:{start:B,end:U}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ea={focusedElem:e,selectionRange:s},ei=!1,pe=n;pe!==null;)if(n=pe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pe=e;else for(;pe!==null;){n=pe;try{var me=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,Ye=me.memoizedState,J=n.stateNode,Y=J.getSnapshotBeforeUpdate(n.elementType===n.type?ge:Rt(n.type,ge),Ye);J.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ce){Ue(n,n.return,ce)}if(e=n.sibling,e!==null){e.return=n.return,pe=e;break}pe=n.return}return me=Tf,Tf=!1,me}function os(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&e)===e){var v=f.destroy;f.destroy=void 0,v!==void 0&&hu(n,s,v)}f=f.next}while(f!==a)}}function Ai(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function mu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Of(e){var n=e.alternate;n!==null&&(e.alternate=null,Of(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[qt],delete n[Xo],delete n[Pa],delete n[mx],delete n[gx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Af(e){return e.tag===5||e.tag===3||e.tag===4}function Lf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=fi));else if(a!==4&&(e=e.child,e!==null))for(gu(e,n,s),e=e.sibling;e!==null;)gu(e,n,s),e=e.sibling}function xu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(xu(e,n,s),e=e.sibling;e!==null;)xu(e,n,s),e=e.sibling}var tt=null,Ft=!1;function $n(e,n,s){for(s=s.child;s!==null;)$f(e,n,s),s=s.sibling}function $f(e,n,s){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(er,s)}catch{}switch(s.tag){case 5:it||eo(s,n);case 6:var a=tt,f=Ft;tt=null,$n(e,n,s),tt=a,Ft=f,tt!==null&&(Ft?(e=tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):tt.removeChild(s.stateNode));break;case 18:tt!==null&&(Ft?(e=tt,s=s.stateNode,e.nodeType===8?ba(e.parentNode,s):e.nodeType===1&&ba(e,s),Lo(e)):ba(tt,s.stateNode));break;case 4:a=tt,f=Ft,tt=s.stateNode.containerInfo,Ft=!0,$n(e,n,s),tt=a,Ft=f;break;case 0:case 11:case 14:case 15:if(!it&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){f=a=a.next;do{var v=f,_=v.destroy;v=v.tag,_!==void 0&&((v&2)!==0||(v&4)!==0)&&hu(s,n,_),f=f.next}while(f!==a)}$n(e,n,s);break;case 1:if(!it&&(eo(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(B){Ue(s,n,B)}$n(e,n,s);break;case 21:$n(e,n,s);break;case 22:s.mode&1?(it=(a=it)||s.memoizedState!==null,$n(e,n,s),it=a):$n(e,n,s);break;default:$n(e,n,s)}}function zf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Dx),n.forEach(function(a){var f=Vx.bind(null,e,a);s.has(a)||(s.add(a),a.then(f,f))})}}function Ht(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var f=s[a];try{var v=e,_=n,B=_;e:for(;B!==null;){switch(B.tag){case 5:tt=B.stateNode,Ft=!1;break e;case 3:tt=B.stateNode.containerInfo,Ft=!0;break e;case 4:tt=B.stateNode.containerInfo,Ft=!0;break e}B=B.return}if(tt===null)throw Error(o(160));$f(v,_,f),tt=null,Ft=!1;var U=f.alternate;U!==null&&(U.return=null),f.return=null}catch(te){Ue(f,n,te)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Rf(n,e),n=n.sibling}function Rf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(n,e),en(e),a&4){try{os(3,e,e.return),Ai(3,e)}catch(ge){Ue(e,e.return,ge)}try{os(5,e,e.return)}catch(ge){Ue(e,e.return,ge)}}break;case 1:Ht(n,e),en(e),a&512&&s!==null&&eo(s,s.return);break;case 5:if(Ht(n,e),en(e),a&512&&s!==null&&eo(s,s.return),e.flags&32){var f=e.stateNode;try{un(f,"")}catch(ge){Ue(e,e.return,ge)}}if(a&4&&(f=e.stateNode,f!=null)){var v=e.memoizedProps,_=s!==null?s.memoizedProps:v,B=e.type,U=e.updateQueue;if(e.updateQueue=null,U!==null)try{B==="input"&&v.type==="radio"&&v.name!=null&&_e(f,v),wo(B,_);var te=wo(B,v);for(_=0;_<U.length;_+=2){var ie=U[_],le=U[_+1];ie==="style"?Ls(f,le):ie==="dangerouslySetInnerHTML"?Os(f,le):ie==="children"?un(f,le):C(f,ie,le,te)}switch(B){case"input":Xe(f,v);break;case"textarea":_r(f,v);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?_t(f,!!v.multiple,fe,!1):se!==!!v.multiple&&(v.defaultValue!=null?_t(f,!!v.multiple,v.defaultValue,!0):_t(f,!!v.multiple,v.multiple?[]:"",!1))}f[Xo]=v}catch(ge){Ue(e,e.return,ge)}}break;case 6:if(Ht(n,e),en(e),a&4){if(e.stateNode===null)throw Error(o(162));f=e.stateNode,v=e.memoizedProps;try{f.nodeValue=v}catch(ge){Ue(e,e.return,ge)}}break;case 3:if(Ht(n,e),en(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Lo(n.containerInfo)}catch(ge){Ue(e,e.return,ge)}break;case 4:Ht(n,e),en(e);break;case 13:Ht(n,e),en(e),f=e.child,f.flags&8192&&(v=f.memoizedState!==null,f.stateNode.isHidden=v,!v||f.alternate!==null&&f.alternate.memoizedState!==null||(wu=He())),a&4&&zf(e);break;case 22:if(ie=s!==null&&s.memoizedState!==null,e.mode&1?(it=(te=it)||ie,Ht(n,e),it=te):Ht(n,e),en(e),a&8192){if(te=e.memoizedState!==null,(e.stateNode.isHidden=te)&&!ie&&(e.mode&1)!==0)for(pe=e,ie=e.child;ie!==null;){for(le=pe=ie;pe!==null;){switch(se=pe,fe=se.child,se.tag){case 0:case 11:case 14:case 15:os(4,se,se.return);break;case 1:eo(se,se.return);var me=se.stateNode;if(typeof me.componentWillUnmount=="function"){a=se,s=se.return;try{n=a,me.props=n.memoizedProps,me.state=n.memoizedState,me.componentWillUnmount()}catch(ge){Ue(a,s,ge)}}break;case 5:eo(se,se.return);break;case 22:if(se.memoizedState!==null){Vf(le);continue}}fe!==null?(fe.return=se,pe=fe):Vf(le)}ie=ie.sibling}e:for(ie=null,le=e;;){if(le.tag===5){if(ie===null){ie=le;try{f=le.stateNode,te?(v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(B=le.stateNode,U=le.memoizedProps.style,_=U!=null&&U.hasOwnProperty("display")?U.display:null,B.style.display=As("display",_))}catch(ge){Ue(e,e.return,ge)}}}else if(le.tag===6){if(ie===null)try{le.stateNode.nodeValue=te?"":le.memoizedProps}catch(ge){Ue(e,e.return,ge)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;ie===le&&(ie=null),le=le.return}ie===le&&(ie=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Ht(n,e),en(e),a&4&&zf(e);break;case 21:break;default:Ht(n,e),en(e)}}function en(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Af(s)){var a=s;break e}s=s.return}throw Error(o(160))}switch(a.tag){case 5:var f=a.stateNode;a.flags&32&&(un(f,""),a.flags&=-33);var v=Lf(e);xu(e,v,f);break;case 3:case 4:var _=a.stateNode.containerInfo,B=Lf(e);gu(e,B,_);break;default:throw Error(o(161))}}catch(U){Ue(e,e.return,U)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ox(e,n,s){pe=e,Ff(e)}function Ff(e,n,s){for(var a=(e.mode&1)!==0;pe!==null;){var f=pe,v=f.child;if(f.tag===22&&a){var _=f.memoizedState!==null||Oi;if(!_){var B=f.alternate,U=B!==null&&B.memoizedState!==null||it;B=Oi;var te=it;if(Oi=_,(it=U)&&!te)for(pe=f;pe!==null;)_=pe,U=_.child,_.tag===22&&_.memoizedState!==null?Bf(f):U!==null?(U.return=_,pe=U):Bf(f);for(;v!==null;)pe=v,Ff(v),v=v.sibling;pe=f,Oi=B,it=te}Hf(e)}else(f.subtreeFlags&8772)!==0&&v!==null?(v.return=f,pe=v):Hf(e)}}function Hf(e){for(;pe!==null;){var n=pe;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:it||Ai(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!it)if(s===null)a.componentDidMount();else{var f=n.elementType===n.type?s.memoizedProps:Rt(n.type,s.memoizedProps);a.componentDidUpdate(f,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Hd(n,v,a);break;case 3:var _=n.updateQueue;if(_!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Hd(n,_,s)}break;case 5:var B=n.stateNode;if(s===null&&n.flags&4){s=B;var U=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&s.focus();break;case"img":U.src&&(s.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var te=n.alternate;if(te!==null){var ie=te.memoizedState;if(ie!==null){var le=ie.dehydrated;le!==null&&Lo(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}it||n.flags&512&&mu(n)}catch(se){Ue(n,n.return,se)}}if(n===e){pe=null;break}if(s=n.sibling,s!==null){s.return=n.return,pe=s;break}pe=n.return}}function Vf(e){for(;pe!==null;){var n=pe;if(n===e){pe=null;break}var s=n.sibling;if(s!==null){s.return=n.return,pe=s;break}pe=n.return}}function Bf(e){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Ai(4,n)}catch(U){Ue(n,s,U)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var f=n.return;try{a.componentDidMount()}catch(U){Ue(n,f,U)}}var v=n.return;try{mu(n)}catch(U){Ue(n,v,U)}break;case 5:var _=n.return;try{mu(n)}catch(U){Ue(n,_,U)}}}catch(U){Ue(n,n.return,U)}if(n===e){pe=null;break}var B=n.sibling;if(B!==null){B.return=n.return,pe=B;break}pe=n.return}}var Ax=Math.ceil,Li=P.ReactCurrentDispatcher,yu=P.ReactCurrentOwner,Ot=P.ReactCurrentBatchConfig,be=0,Je=null,Qe=null,nt=0,kt=0,to=Dn(0),qe=0,ss=null,ur=0,$i=0,vu=0,is=null,ft=null,wu=0,no=1/0,xn=null,zi=!1,Su=null,zn=null,Ri=!1,Rn=null,Fi=0,ls=0,Nu=null,Hi=-1,Vi=0;function at(){return(be&6)!==0?He():Hi!==-1?Hi:Hi=He()}function Fn(e){return(e.mode&1)===0?1:(be&2)!==0&&nt!==0?nt&-nt:yx.transition!==null?(Vi===0&&(Vi=Ar()),Vi):(e=De,e!==0||(e=window.event,e=e===void 0?16:Wc(e.type)),e)}function Vt(e,n,s,a){if(50<ls)throw ls=0,Nu=null,Error(o(185));tr(e,s,a),((be&2)===0||e!==Je)&&(e===Je&&((be&2)===0&&($i|=s),qe===4&&Hn(e,nt)),pt(e,a),s===1&&be===0&&(n.mode&1)===0&&(no=He()+500,gi&&On()))}function pt(e,n){var s=e.callbackNode;ra(e,n);var a=Or(e,e===Je?nt:0);if(a===0)s!==null&&Ys(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Ys(s),n===1)e.tag===0?xx(Uf.bind(null,e)):Md(Uf.bind(null,e)),px(function(){(be&6)===0&&On()}),s=null;else{switch(Lc(a)){case 1:s=Mo;break;case 4:s=Qs;break;case 16:s=Pr;break;case 536870912:s=Gs;break;default:s=Pr}s=Jf(s,Wf.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Wf(e,n){if(Hi=-1,Vi=0,(be&6)!==0)throw Error(o(327));var s=e.callbackNode;if(ro()&&e.callbackNode!==s)return null;var a=Or(e,e===Je?nt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=Bi(e,a);else{n=a;var f=be;be|=2;var v=Xf();(Je!==e||nt!==n)&&(xn=null,no=He()+500,dr(e,n));do try{zx();break}catch(B){Yf(e,B)}while(!0);Fa(),Li.current=v,be=f,Qe!==null?n=0:(Je=null,nt=0,n=qe)}if(n!==0){if(n===2&&(f=bo(e),f!==0&&(a=f,n=ku(e,f))),n===1)throw s=ss,dr(e,0),Hn(e,a),pt(e,He()),s;if(n===6)Hn(e,a);else{if(f=e.current.alternate,(a&30)===0&&!Lx(f)&&(n=Bi(e,a),n===2&&(v=bo(e),v!==0&&(a=v,n=ku(e,v))),n===1))throw s=ss,dr(e,0),Hn(e,a),pt(e,He()),s;switch(e.finishedWork=f,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:fr(e,ft,xn);break;case 3:if(Hn(e,a),(a&130023424)===a&&(n=wu+500-He(),10<n)){if(Or(e,0)!==0)break;if(f=e.suspendedLanes,(f&a)!==a){at(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=Ma(fr.bind(null,e,ft,xn),n);break}fr(e,ft,xn);break;case 4:if(Hn(e,a),(a&4194240)===a)break;for(n=e.eventTimes,f=-1;0<a;){var _=31-vt(a);v=1<<_,_=n[_],_>f&&(f=_),a&=~v}if(a=f,a=He()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ax(a/1960))-a,10<a){e.timeoutHandle=Ma(fr.bind(null,e,ft,xn),a);break}fr(e,ft,xn);break;case 5:fr(e,ft,xn);break;default:throw Error(o(329))}}}return pt(e,He()),e.callbackNode===s?Wf.bind(null,e):null}function ku(e,n){var s=is;return e.current.memoizedState.isDehydrated&&(dr(e,n).flags|=256),e=Bi(e,n),e!==2&&(n=ft,ft=s,n!==null&&Cu(n)),e}function Cu(e){ft===null?ft=e:ft.push.apply(ft,e)}function Lx(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var f=s[a],v=f.getSnapshot;f=f.value;try{if(!$t(v(),f))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Hn(e,n){for(n&=~vu,n&=~$i,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-vt(n),a=1<<s;e[s]=-1,n&=~a}}function Uf(e){if((be&6)!==0)throw Error(o(327));ro();var n=Or(e,0);if((n&1)===0)return pt(e,He()),null;var s=Bi(e,n);if(e.tag!==0&&s===2){var a=bo(e);a!==0&&(n=a,s=ku(e,a))}if(s===1)throw s=ss,dr(e,0),Hn(e,n),pt(e,He()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,fr(e,ft,xn),pt(e,He()),null}function Iu(e,n){var s=be;be|=1;try{return e(n)}finally{be=s,be===0&&(no=He()+500,gi&&On())}}function cr(e){Rn!==null&&Rn.tag===0&&(be&6)===0&&ro();var n=be;be|=1;var s=Ot.transition,a=De;try{if(Ot.transition=null,De=1,e)return e()}finally{De=a,Ot.transition=s,be=n,(be&6)===0&&On()}}function ju(){kt=to.current,$e(to)}function dr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,fx(s)),Qe!==null)for(s=Qe.return;s!==null;){var a=s;switch(Aa(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&hi();break;case 3:Zr(),$e(ut),$e(rt),Qa();break;case 5:Ya(a);break;case 4:Zr();break;case 13:$e(Ve);break;case 19:$e(Ve);break;case 10:Ha(a.type._context);break;case 22:case 23:ju()}s=s.return}if(Je=e,Qe=e=Vn(e.current,null),nt=kt=n,qe=0,ss=null,vu=$i=ur=0,ft=is=null,ir!==null){for(n=0;n<ir.length;n++)if(s=ir[n],a=s.interleaved,a!==null){s.interleaved=null;var f=a.next,v=s.pending;if(v!==null){var _=v.next;v.next=f,a.next=_}s.pending=a}ir=null}return e}function Yf(e,n){do{var s=Qe;try{if(Fa(),ji.current=bi,Ei){for(var a=Be.memoizedState;a!==null;){var f=a.queue;f!==null&&(f.pending=null),a=a.next}Ei=!1}if(ar=0,Ze=Ke=Be=null,Jo=!1,es=0,yu.current=null,s===null||s.return===null){qe=1,ss=n,Qe=null;break}e:{var v=e,_=s.return,B=s,U=n;if(n=nt,B.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var te=U,ie=B,le=ie.tag;if((ie.mode&1)===0&&(le===0||le===11||le===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=xf(_);if(fe!==null){fe.flags&=-257,yf(fe,_,B,v,n),fe.mode&1&&gf(v,te,n),n=fe,U=te;var me=n.updateQueue;if(me===null){var ge=new Set;ge.add(U),n.updateQueue=ge}else me.add(U);break e}else{if((n&1)===0){gf(v,te,n),Eu();break e}U=Error(o(426))}}else if(ze&&B.mode&1){var Ye=xf(_);if(Ye!==null){(Ye.flags&65536)===0&&(Ye.flags|=256),yf(Ye,_,B,v,n),za(Jr(U,B));break e}}v=U=Jr(U,B),qe!==4&&(qe=2),is===null?is=[v]:is.push(v),v=_;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var J=hf(v,U,n);Fd(v,J);break e;case 1:B=U;var Y=v.type,ee=v.stateNode;if((v.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(zn===null||!zn.has(ee)))){v.flags|=65536,n&=-n,v.lanes|=n;var ce=mf(v,B,n);Fd(v,ce);break e}}v=v.return}while(v!==null)}Gf(s)}catch(xe){n=xe,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(!0)}function Xf(){var e=Li.current;return Li.current=bi,e===null?bi:e}function Eu(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||(ur&268435455)===0&&($i&268435455)===0||Hn(Je,nt)}function Bi(e,n){var s=be;be|=2;var a=Xf();(Je!==e||nt!==n)&&(xn=null,dr(e,n));do try{$x();break}catch(f){Yf(e,f)}while(!0);if(Fa(),be=s,Li.current=a,Qe!==null)throw Error(o(261));return Je=null,nt=0,qe}function $x(){for(;Qe!==null;)Qf(Qe)}function zx(){for(;Qe!==null&&!Kl();)Qf(Qe)}function Qf(e){var n=Zf(e.alternate,e,kt);e.memoizedProps=e.pendingProps,n===null?Gf(e):Qe=n,yu.current=null}function Gf(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=bx(s,n,kt),s!==null){Qe=s;return}}else{if(s=Px(s,n),s!==null){s.flags&=32767,Qe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Qe=null;return}}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);qe===0&&(qe=5)}function fr(e,n,s){var a=De,f=Ot.transition;try{Ot.transition=null,De=1,Rx(e,n,s,a)}finally{Ot.transition=f,De=a}return null}function Rx(e,n,s,a){do ro();while(Rn!==null);if((be&6)!==0)throw Error(o(327));s=e.finishedWork;var f=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(qs(e,v),e===Je&&(Qe=Je=null,nt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ri||(Ri=!0,Jf(Pr,function(){return ro(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Ot.transition,Ot.transition=null;var _=De;De=1;var B=be;be|=4,yu.current=null,Tx(e,s),Rf(s,e),sx(Ea),ei=!!ja,Ea=ja=null,e.current=s,Ox(s),Xs(),be=B,De=_,Ot.transition=v}else e.current=s;if(Ri&&(Ri=!1,Rn=e,Fi=f),v=e.pendingLanes,v===0&&(zn=null),Jl(s.stateNode),pt(e,He()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)f=n[s],a(f.value,{componentStack:f.stack,digest:f.digest});if(zi)throw zi=!1,e=Su,Su=null,e;return(Fi&1)!==0&&e.tag!==0&&ro(),v=e.pendingLanes,(v&1)!==0?e===Nu?ls++:(ls=0,Nu=e):ls=0,On(),null}function ro(){if(Rn!==null){var e=Lc(Fi),n=Ot.transition,s=De;try{if(Ot.transition=null,De=16>e?16:e,Rn===null)var a=!1;else{if(e=Rn,Rn=null,Fi=0,(be&6)!==0)throw Error(o(331));var f=be;for(be|=4,pe=e.current;pe!==null;){var v=pe,_=v.child;if((pe.flags&16)!==0){var B=v.deletions;if(B!==null){for(var U=0;U<B.length;U++){var te=B[U];for(pe=te;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:os(8,ie,v)}var le=ie.child;if(le!==null)le.return=ie,pe=le;else for(;pe!==null;){ie=pe;var se=ie.sibling,fe=ie.return;if(Of(ie),ie===te){pe=null;break}if(se!==null){se.return=fe,pe=se;break}pe=fe}}}var me=v.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var Ye=ge.sibling;ge.sibling=null,ge=Ye}while(ge!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&_!==null)_.return=v,pe=_;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:os(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,pe=J;break e}pe=v.return}}var Y=e.current;for(pe=Y;pe!==null;){_=pe;var ee=_.child;if((_.subtreeFlags&2064)!==0&&ee!==null)ee.return=_,pe=ee;else e:for(_=Y;pe!==null;){if(B=pe,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Ai(9,B)}}catch(xe){Ue(B,B.return,xe)}if(B===_){pe=null;break e}var ce=B.sibling;if(ce!==null){ce.return=B.return,pe=ce;break e}pe=B.return}}if(be=f,On(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(er,e)}catch{}a=!0}return a}finally{De=s,Ot.transition=n}}return!1}function Kf(e,n,s){n=Jr(s,n),n=hf(e,n,1),e=Ln(e,n,1),n=at(),e!==null&&(tr(e,1,n),pt(e,n))}function Ue(e,n,s){if(e.tag===3)Kf(e,e,s);else for(;n!==null;){if(n.tag===3){Kf(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(zn===null||!zn.has(a))){e=Jr(s,e),e=mf(n,e,1),n=Ln(n,e,1),e=at(),n!==null&&(tr(n,1,e),pt(n,e));break}}n=n.return}}function Fx(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=at(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(nt&s)===s&&(qe===4||qe===3&&(nt&130023424)===nt&&500>He()-wu?dr(e,0):vu|=s),pt(e,n)}function qf(e,n){n===0&&((e.mode&1)===0?n=1:(n=Tr,Tr<<=1,(Tr&130023424)===0&&(Tr=4194304)));var s=at();e=hn(e,n),e!==null&&(tr(e,n,s),pt(e,s))}function Hx(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),qf(e,s)}function Vx(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),qf(e,s)}var Zf;Zf=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ut.current)dt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return dt=!1,Mx(e,n,s);dt=(e.flags&131072)!==0}else dt=!1,ze&&(n.flags&1048576)!==0&&bd(n,yi,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Ti(e,n),e=n.pendingProps;var f=Ur(n,rt.current);qr(n,s),f=qa(null,n,a,e,f,s);var v=Za();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(a)?(v=!0,mi(n)):v=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Wa(n),f.updater=Pi,n.stateNode=f,f._reactInternals=n,ou(n,a,e,s),n=au(null,n,a,!0,v,s)):(n.tag=0,ze&&v&&Oa(n),lt(null,n,f,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Ti(e,n),e=n.pendingProps,f=a._init,a=f(a._payload),n.type=a,f=n.tag=Wx(a),e=Rt(a,e),f){case 0:n=lu(null,n,a,e,s);break e;case 1:n=Cf(null,n,a,e,s);break e;case 11:n=vf(null,n,a,e,s);break e;case 14:n=wf(null,n,a,Rt(a.type,e),s);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:Rt(a,f),lu(e,n,a,f,s);case 1:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:Rt(a,f),Cf(e,n,a,f,s);case 3:e:{if(If(n),e===null)throw Error(o(387));a=n.pendingProps,v=n.memoizedState,f=v.element,Rd(e,n),Ci(n,a,null,s);var _=n.memoizedState;if(a=_.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){f=Jr(Error(o(423)),n),n=jf(e,n,a,s,f);break e}else if(a!==f){f=Jr(Error(o(424)),n),n=jf(e,n,a,s,f);break e}else for(Nt=Pn(n.stateNode.containerInfo.firstChild),St=n,ze=!0,zt=null,s=$d(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Qr(),a===f){n=gn(e,n,s);break e}lt(e,n,a,s)}n=n.child}return n;case 5:return Vd(n),e===null&&$a(n),a=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,_=f.children,_a(a,f)?_=null:v!==null&&_a(a,v)&&(n.flags|=32),kf(e,n),lt(e,n,_,s),n.child;case 6:return e===null&&$a(n),null;case 13:return Ef(e,n,s);case 4:return Ua(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Gr(n,null,a,s):lt(e,n,a,s),n.child;case 11:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:Rt(a,f),vf(e,n,a,f,s);case 7:return lt(e,n,n.pendingProps,s),n.child;case 8:return lt(e,n,n.pendingProps.children,s),n.child;case 12:return lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,f=n.pendingProps,v=n.memoizedProps,_=f.value,Oe(Si,a._currentValue),a._currentValue=_,v!==null)if($t(v.value,_)){if(v.children===f.children&&!ut.current){n=gn(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var B=v.dependencies;if(B!==null){_=v.child;for(var U=B.firstContext;U!==null;){if(U.context===a){if(v.tag===1){U=mn(-1,s&-s),U.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var ie=te.pending;ie===null?U.next=U:(U.next=ie.next,ie.next=U),te.pending=U}}v.lanes|=s,U=v.alternate,U!==null&&(U.lanes|=s),Va(v.return,s,n),B.lanes|=s;break}U=U.next}}else if(v.tag===10)_=v.type===n.type?null:v.child;else if(v.tag===18){if(_=v.return,_===null)throw Error(o(341));_.lanes|=s,B=_.alternate,B!==null&&(B.lanes|=s),Va(_,s,n),_=v.sibling}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===n){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}lt(e,n,f.children,s),n=n.child}return n;case 9:return f=n.type,a=n.pendingProps.children,qr(n,s),f=Dt(f),a=a(f),n.flags|=1,lt(e,n,a,s),n.child;case 14:return a=n.type,f=Rt(a,n.pendingProps),f=Rt(a.type,f),wf(e,n,a,f,s);case 15:return Sf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,f=n.pendingProps,f=n.elementType===a?f:Rt(a,f),Ti(e,n),n.tag=1,ct(a)?(e=!0,mi(n)):e=!1,qr(n,s),ff(n,a,f),ou(n,a,f,s),au(null,n,a,!0,e,s);case 19:return Mf(e,n,s);case 22:return Nf(e,n,s)}throw Error(o(156,n.tag))};function Jf(e,n){return Us(e,n)}function Bx(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,n,s,a){return new Bx(e,n,s,a)}function _u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wx(e){if(typeof e=="function")return _u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X)return 11;if(e===R)return 14}return 2}function Vn(e,n){var s=e.alternate;return s===null?(s=At(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Wi(e,n,s,a,f,v){var _=2;if(a=e,typeof e=="function")_u(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case W:return pr(s.children,f,v,n);case K:_=8,f|=8;break;case q:return e=At(12,s,n,f|2),e.elementType=q,e.lanes=v,e;case Q:return e=At(13,s,n,f),e.elementType=Q,e.lanes=v,e;case O:return e=At(19,s,n,f),e.elementType=O,e.lanes=v,e;case M:return Ui(s,f,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:_=10;break e;case $:_=9;break e;case X:_=11;break e;case R:_=14;break e;case z:_=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=At(_,s,n,f),n.elementType=e,n.type=a,n.lanes=v,n}function pr(e,n,s,a){return e=At(7,e,a,n),e.lanes=s,e}function Ui(e,n,s,a){return e=At(22,e,a,n),e.elementType=M,e.lanes=s,e.stateNode={isHidden:!1},e}function Mu(e,n,s){return e=At(6,e,null,n),e.lanes=s,e}function bu(e,n,s){return n=At(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Ux(e,n,s,a,f){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Po(0),this.expirationTimes=Po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Po(0),this.identifierPrefix=a,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Pu(e,n,s,a,f,v,_,B,U){return e=new Ux(e,n,s,B,U),n===1?(n=1,v===!0&&(n|=8)):n=0,v=At(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(v),e}function Yx(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function ep(e){if(!e)return Tn;e=e._reactInternals;e:{if(Gt(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(ct(s))return Ed(e,s,n)}return n}function tp(e,n,s,a,f,v,_,B,U){return e=Pu(s,a,!0,e,f,v,_,B,U),e.context=ep(null),s=e.current,a=at(),f=Fn(s),v=mn(a,f),v.callback=n??null,Ln(s,v,f),e.current.lanes=f,tr(e,f,a),pt(e,a),e}function Yi(e,n,s,a){var f=n.current,v=at(),_=Fn(f);return s=ep(s),n.context===null?n.context=s:n.pendingContext=s,n=mn(v,_),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Ln(f,n,_),e!==null&&(Vt(e,f,_,v),ki(e,f,_)),_}function Xi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function np(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Du(e,n){np(e,n),(e=e.alternate)&&np(e,n)}function Xx(){return null}var rp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tu(e){this._internalRoot=e}Qi.prototype.render=Tu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Yi(e,n,null,null)},Qi.prototype.unmount=Tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;cr(function(){Yi(null,e,null,null)}),n[cn]=null}};function Qi(e){this._internalRoot=e}Qi.prototype.unstable_scheduleHydration=function(e){if(e){var n=Rc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<_n.length&&n!==0&&n<_n[s].priority;s++);_n.splice(s,0,e),s===0&&Vc(e)}};function Ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function op(){}function Qx(e,n,s,a,f){if(f){if(typeof a=="function"){var v=a;a=function(){var te=Xi(_);v.call(te)}}var _=tp(n,a,e,0,null,!1,!1,"",op);return e._reactRootContainer=_,e[cn]=_.current,Uo(e.nodeType===8?e.parentNode:e),cr(),_}for(;f=e.lastChild;)e.removeChild(f);if(typeof a=="function"){var B=a;a=function(){var te=Xi(U);B.call(te)}}var U=Pu(e,0,!1,null,null,!1,!1,"",op);return e._reactRootContainer=U,e[cn]=U.current,Uo(e.nodeType===8?e.parentNode:e),cr(function(){Yi(n,U,s,a)}),U}function Ki(e,n,s,a,f){var v=s._reactRootContainer;if(v){var _=v;if(typeof f=="function"){var B=f;f=function(){var U=Xi(_);B.call(U)}}Yi(n,_,e,f)}else _=Qx(s,n,e,f,a);return Xi(_)}$c=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Kt(n.pendingLanes);s!==0&&(oa(n,s|1),pt(n,He()),(be&6)===0&&(no=He()+500,On()))}break;case 13:cr(function(){var a=hn(e,1);if(a!==null){var f=at();Vt(a,e,1,f)}}),Du(e,1)}},sa=function(e){if(e.tag===13){var n=hn(e,134217728);if(n!==null){var s=at();Vt(n,e,134217728,s)}Du(e,134217728)}},zc=function(e){if(e.tag===13){var n=Fn(e),s=hn(e,n);if(s!==null){var a=at();Vt(s,e,n,a)}Du(e,n)}},Rc=function(){return De},Fc=function(e,n){var s=De;try{return De=e,n()}finally{De=s}},ko=function(e,n,s){switch(n){case"input":if(Xe(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var f=pi(a);if(!f)throw Error(o(90));ke(a),Xe(a,f)}}}break;case"textarea":_r(e,s);break;case"select":n=s.value,n!=null&&_t(e,!!s.multiple,n,!1)}},Fs=Iu,Hs=cr;var Gx={usingClientEntryPoint:!1,Events:[Qo,Br,pi,zs,Rs,Iu]},as={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bs(e),e===null?null:e.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||Xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qi.isDisabled&&qi.supportsFiber)try{er=qi.inject(Kx),Mt=qi}catch{}}return ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx,ht.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(n))throw Error(o(200));return Yx(e,n,null,s)},ht.createRoot=function(e,n){if(!Ou(e))throw Error(o(299));var s=!1,a="",f=rp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=Pu(e,1,!1,null,null,s,!1,a,f),e[cn]=n.current,Uo(e.nodeType===8?e.parentNode:e),new Tu(n)},ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Bs(n),e=e===null?null:e.stateNode,e},ht.flushSync=function(e){return cr(e)},ht.hydrate=function(e,n,s){if(!Gi(n))throw Error(o(200));return Ki(null,e,n,!0,s)},ht.hydrateRoot=function(e,n,s){if(!Ou(e))throw Error(o(405));var a=s!=null&&s.hydratedSources||null,f=!1,v="",_=rp;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),n=tp(n,null,e,1,s??null,f,!1,v,_),e[cn]=n.current,Uo(e),a)for(e=0;e<a.length;e++)s=a[e],f=s._getVersion,f=f(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,f]:n.mutableSourceEagerHydrationData.push(s,f);return new Qi(n)},ht.render=function(e,n,s){if(!Gi(n))throw Error(o(200));return Ki(null,e,n,!1,s)},ht.unmountComponentAtNode=function(e){if(!Gi(e))throw Error(o(40));return e._reactRootContainer?(cr(function(){Ki(null,null,e,!1,function(){e._reactRootContainer=null,e[cn]=null})}),!0):!1},ht.unstable_batchedUpdates=Iu,ht.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!Gi(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Ki(e,n,s,!1,a)},ht.version="18.3.1-next-f1338f8080-20240426",ht}var fp;function Mh(){if(fp)return $u.exports;fp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),$u.exports=r0(),$u.exports}var pp;function o0(){if(pp)return Zi;pp=1;var t=Mh();return Zi.createRoot=t.createRoot,Zi.hydrateRoot=t.hydrateRoot,Zi}var s0=o0();function Ge(t){if(typeof t=="string"||typeof t=="number")return""+t;let r="";if(Array.isArray(t))for(let o=0,i;o<t.length;o++)(i=Ge(t[o]))!==""&&(r+=(r&&" ")+i);else for(let o in t)t[o]&&(r+=(r&&" ")+o);return r}var i0={value:()=>{}};function Ml(){for(var t=0,r=arguments.length,o={},i;t<r;++t){if(!(i=arguments[t]+"")||i in o||/[\s.]/.test(i))throw new Error("illegal type: "+i);o[i]=[]}return new fl(o)}function fl(t){this._=t}function l0(t,r){return t.trim().split(/^|\s+/).map(function(o){var i="",l=o.indexOf(".");if(l>=0&&(i=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:i}})}fl.prototype=Ml.prototype={constructor:fl,on:function(t,r){var o=this._,i=l0(t+"",o),l,u=-1,d=i.length;if(arguments.length<2){for(;++u<d;)if((l=(t=i[u]).type)&&(l=a0(o[l],t.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++u<d;)if(l=(t=i[u]).type)o[l]=hp(o[l],t.name,r);else if(r==null)for(l in o)o[l]=hp(o[l],t.name,null);return this},copy:function(){var t={},r=this._;for(var o in r)t[o]=r[o].slice();return new fl(t)},call:function(t,r){if((l=arguments.length-2)>0)for(var o=new Array(l),i=0,l,u;i<l;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,l=u.length;i<l;++i)u[i].value.apply(r,o)},apply:function(t,r,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],l=0,u=i.length;l<u;++l)i[l].value.apply(r,o)}};function a0(t,r){for(var o=0,i=t.length,l;o<i;++o)if((l=t[o]).name===r)return l.value}function hp(t,r,o){for(var i=0,l=t.length;i<l;++i)if(t[i].name===r){t[i]=i0,t=t.slice(0,i).concat(t.slice(i+1));break}return o!=null&&t.push({name:r,value:o}),t}var Ju="http://www.w3.org/1999/xhtml";const mp={svg:"http://www.w3.org/2000/svg",xhtml:Ju,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bl(t){var r=t+="",o=r.indexOf(":");return o>=0&&(r=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),mp.hasOwnProperty(r)?{space:mp[r],local:t}:t}function u0(t){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===Ju&&r.documentElement.namespaceURI===Ju?r.createElement(t):r.createElementNS(o,t)}}function c0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bh(t){var r=bl(t);return(r.local?c0:u0)(r)}function d0(){}function xc(t){return t==null?d0:function(){return this.querySelector(t)}}function f0(t){typeof t!="function"&&(t=xc(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],d=u.length,p=i[l]=new Array(d),y,g,h=0;h<d;++h)(y=u[h])&&(g=t.call(y,y.__data__,h,u))&&("__data__"in y&&(g.__data__=y.__data__),p[h]=g);return new Et(i,this._parents)}function p0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function h0(){return[]}function Ph(t){return t==null?h0:function(){return this.querySelectorAll(t)}}function m0(t){return function(){return p0(t.apply(this,arguments))}}function g0(t){typeof t=="function"?t=m0(t):t=Ph(t);for(var r=this._groups,o=r.length,i=[],l=[],u=0;u<o;++u)for(var d=r[u],p=d.length,y,g=0;g<p;++g)(y=d[g])&&(i.push(t.call(y,y.__data__,g,d)),l.push(y));return new Et(i,l)}function Dh(t){return function(){return this.matches(t)}}function Th(t){return function(r){return r.matches(t)}}var x0=Array.prototype.find;function y0(t){return function(){return x0.call(this.children,t)}}function v0(){return this.firstElementChild}function w0(t){return this.select(t==null?v0:y0(typeof t=="function"?t:Th(t)))}var S0=Array.prototype.filter;function N0(){return Array.from(this.children)}function k0(t){return function(){return S0.call(this.children,t)}}function C0(t){return this.selectAll(t==null?N0:k0(typeof t=="function"?t:Th(t)))}function I0(t){typeof t!="function"&&(t=Dh(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],d=u.length,p=i[l]=[],y,g=0;g<d;++g)(y=u[g])&&t.call(y,y.__data__,g,u)&&p.push(y);return new Et(i,this._parents)}function Oh(t){return new Array(t.length)}function j0(){return new Et(this._enter||this._groups.map(Oh),this._parents)}function yl(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}yl.prototype={constructor:yl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function E0(t){return function(){return t}}function _0(t,r,o,i,l,u){for(var d=0,p,y=r.length,g=u.length;d<g;++d)(p=r[d])?(p.__data__=u[d],i[d]=p):o[d]=new yl(t,u[d]);for(;d<y;++d)(p=r[d])&&(l[d]=p)}function M0(t,r,o,i,l,u,d){var p,y,g=new Map,h=r.length,m=u.length,x=new Array(h),w;for(p=0;p<h;++p)(y=r[p])&&(x[p]=w=d.call(y,y.__data__,p,r)+"",g.has(w)?l[p]=y:g.set(w,y));for(p=0;p<m;++p)w=d.call(t,u[p],p,u)+"",(y=g.get(w))?(i[p]=y,y.__data__=u[p],g.delete(w)):o[p]=new yl(t,u[p]);for(p=0;p<h;++p)(y=r[p])&&g.get(x[p])===y&&(l[p]=y)}function b0(t){return t.__data__}function P0(t,r){if(!arguments.length)return Array.from(this,b0);var o=r?M0:_0,i=this._parents,l=this._groups;typeof t!="function"&&(t=E0(t));for(var u=l.length,d=new Array(u),p=new Array(u),y=new Array(u),g=0;g<u;++g){var h=i[g],m=l[g],x=m.length,w=D0(t.call(h,h&&h.__data__,g,i)),S=w.length,j=p[g]=new Array(S),k=d[g]=new Array(S),I=y[g]=new Array(x);o(h,m,j,k,I,w,r);for(var D=0,C=0,P,A;D<S;++D)if(P=j[D]){for(D>=C&&(C=D+1);!(A=k[C])&&++C<S;);P._next=A||null}}return d=new Et(d,i),d._enter=p,d._exit=y,d}function D0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function T0(){return new Et(this._exit||this._groups.map(Oh),this._parents)}function O0(t,r,o){var i=this.enter(),l=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?u.remove():o(u),i&&l?i.merge(l).order():l}function A0(t){for(var r=t.selection?t.selection():t,o=this._groups,i=r._groups,l=o.length,u=i.length,d=Math.min(l,u),p=new Array(l),y=0;y<d;++y)for(var g=o[y],h=i[y],m=g.length,x=p[y]=new Array(m),w,S=0;S<m;++S)(w=g[S]||h[S])&&(x[S]=w);for(;y<l;++y)p[y]=o[y];return new Et(p,this._parents)}function L0(){for(var t=this._groups,r=-1,o=t.length;++r<o;)for(var i=t[r],l=i.length-1,u=i[l],d;--l>=0;)(d=i[l])&&(u&&d.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(d,u),u=d);return this}function $0(t){t||(t=z0);function r(m,x){return m&&x?t(m.__data__,x.__data__):!m-!x}for(var o=this._groups,i=o.length,l=new Array(i),u=0;u<i;++u){for(var d=o[u],p=d.length,y=l[u]=new Array(p),g,h=0;h<p;++h)(g=d[h])&&(y[h]=g);y.sort(r)}return new Et(l,this._parents).order()}function z0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function R0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function F0(){return Array.from(this)}function H0(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length;l<u;++l){var d=i[l];if(d)return d}return null}function V0(){let t=0;for(const r of this)++t;return t}function B0(){return!this.node()}function W0(t){for(var r=this._groups,o=0,i=r.length;o<i;++o)for(var l=r[o],u=0,d=l.length,p;u<d;++u)(p=l[u])&&t.call(p,p.__data__,u,l);return this}function U0(t){return function(){this.removeAttribute(t)}}function Y0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function X0(t,r){return function(){this.setAttribute(t,r)}}function Q0(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function G0(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function K0(t,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function q0(t,r){var o=bl(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((r==null?o.local?Y0:U0:typeof r=="function"?o.local?K0:G0:o.local?Q0:X0)(o,r))}function Ah(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Z0(t){return function(){this.style.removeProperty(t)}}function J0(t,r,o){return function(){this.style.setProperty(t,r,o)}}function ey(t,r,o){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function ty(t,r,o){return arguments.length>1?this.each((r==null?Z0:typeof r=="function"?ey:J0)(t,r,o??"")):fo(this.node(),t)}function fo(t,r){return t.style.getPropertyValue(r)||Ah(t).getComputedStyle(t,null).getPropertyValue(r)}function ny(t){return function(){delete this[t]}}function ry(t,r){return function(){this[t]=r}}function oy(t,r){return function(){var o=r.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function sy(t,r){return arguments.length>1?this.each((r==null?ny:typeof r=="function"?oy:ry)(t,r)):this.node()[t]}function Lh(t){return t.trim().split(/^|\s+/)}function yc(t){return t.classList||new $h(t)}function $h(t){this._node=t,this._names=Lh(t.getAttribute("class")||"")}$h.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function zh(t,r){for(var o=yc(t),i=-1,l=r.length;++i<l;)o.add(r[i])}function Rh(t,r){for(var o=yc(t),i=-1,l=r.length;++i<l;)o.remove(r[i])}function iy(t){return function(){zh(this,t)}}function ly(t){return function(){Rh(this,t)}}function ay(t,r){return function(){(r.apply(this,arguments)?zh:Rh)(this,t)}}function uy(t,r){var o=Lh(t+"");if(arguments.length<2){for(var i=yc(this.node()),l=-1,u=o.length;++l<u;)if(!i.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?ay:r?iy:ly)(o,r))}function cy(){this.textContent=""}function dy(t){return function(){this.textContent=t}}function fy(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function py(t){return arguments.length?this.each(t==null?cy:(typeof t=="function"?fy:dy)(t)):this.node().textContent}function hy(){this.innerHTML=""}function my(t){return function(){this.innerHTML=t}}function gy(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function xy(t){return arguments.length?this.each(t==null?hy:(typeof t=="function"?gy:my)(t)):this.node().innerHTML}function yy(){this.nextSibling&&this.parentNode.appendChild(this)}function vy(){return this.each(yy)}function wy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sy(){return this.each(wy)}function Ny(t){var r=typeof t=="function"?t:bh(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function ky(){return null}function Cy(t,r){var o=typeof t=="function"?t:bh(t),i=r==null?ky:typeof r=="function"?r:xc(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})}function Iy(){var t=this.parentNode;t&&t.removeChild(this)}function jy(){return this.each(Iy)}function Ey(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function _y(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function My(t){return this.select(t?_y:Ey)}function by(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Py(t){return function(r){t.call(this,r,this.__data__)}}function Dy(t){return t.trim().split(/^|\s+/).map(function(r){var o="",i=r.indexOf(".");return i>=0&&(o=r.slice(i+1),r=r.slice(0,i)),{type:r,name:o}})}function Ty(t){return function(){var r=this.__on;if(r){for(var o=0,i=-1,l=r.length,u;o<l;++o)u=r[o],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):r[++i]=u;++i?r.length=i:delete this.__on}}}function Oy(t,r,o){return function(){var i=this.__on,l,u=Py(r);if(i){for(var d=0,p=i.length;d<p;++d)if((l=i[d]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=o),l.value=r;return}}this.addEventListener(t.type,u,o),l={type:t.type,name:t.name,value:r,listener:u,options:o},i?i.push(l):this.__on=[l]}}function Ay(t,r,o){var i=Dy(t+""),l,u=i.length,d;if(arguments.length<2){var p=this.node().__on;if(p){for(var y=0,g=p.length,h;y<g;++y)for(l=0,h=p[y];l<u;++l)if((d=i[l]).type===h.type&&d.name===h.name)return h.value}return}for(p=r?Oy:Ty,l=0;l<u;++l)this.each(p(i[l],r,o));return this}function Fh(t,r,o){var i=Ah(t),l=i.CustomEvent;typeof l=="function"?l=new l(r,o):(l=i.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),t.dispatchEvent(l)}function Ly(t,r){return function(){return Fh(this,t,r)}}function $y(t,r){return function(){return Fh(this,t,r.apply(this,arguments))}}function zy(t,r){return this.each((typeof r=="function"?$y:Ly)(t,r))}function*Ry(){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var i=t[r],l=0,u=i.length,d;l<u;++l)(d=i[l])&&(yield d)}var Hh=[null];function Et(t,r){this._groups=t,this._parents=r}function _s(){return new Et([[document.documentElement]],Hh)}function Fy(){return this}Et.prototype=_s.prototype={constructor:Et,select:f0,selectAll:g0,selectChild:w0,selectChildren:C0,filter:I0,data:P0,enter:j0,exit:T0,join:O0,merge:A0,selection:Fy,order:L0,sort:$0,call:R0,nodes:F0,node:H0,size:V0,empty:B0,each:W0,attr:q0,style:ty,property:sy,classed:uy,text:py,html:xy,raise:vy,lower:Sy,append:Ny,insert:Cy,remove:jy,clone:My,datum:by,on:Ay,dispatch:zy,[Symbol.iterator]:Ry};function Ct(t){return typeof t=="string"?new Et([[document.querySelector(t)]],[document.documentElement]):new Et([[t]],Hh)}function Hy(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Bt(t,r){if(t=Hy(t),r===void 0&&(r=t.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[t.clientX-l.left-r.clientLeft,t.clientY-l.top-r.clientTop]}}return[t.pageX,t.pageY]}const Vy={passive:!1},ys={capture:!0,passive:!1};function Fu(t){t.stopImmediatePropagation()}function uo(t){t.preventDefault(),t.stopImmediatePropagation()}function Vh(t){var r=t.document.documentElement,o=Ct(t).on("dragstart.drag",uo,ys);"onselectstart"in r?o.on("selectstart.drag",uo,ys):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Bh(t,r){var o=t.document.documentElement,i=Ct(t).on("dragstart.drag",null);r&&(i.on("click.drag",uo,ys),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const Ji=t=>()=>t;function ec(t,{sourceEvent:r,subject:o,target:i,identifier:l,active:u,x:d,y:p,dx:y,dy:g,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:y,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:h}})}ec.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function By(t){return!t.ctrlKey&&!t.button}function Wy(){return this.parentNode}function Uy(t,r){return r??{x:t.x,y:t.y}}function Yy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wh(){var t=By,r=Wy,o=Uy,i=Yy,l={},u=Ml("start","drag","end"),d=0,p,y,g,h,m=0;function x(P){P.on("mousedown.drag",w).filter(i).on("touchstart.drag",k).on("touchmove.drag",I,Vy).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(P,A){if(!(h||!t.call(this,P,A))){var V=C(this,r.call(this,P,A),P,A,"mouse");V&&(Ct(P.view).on("mousemove.drag",S,ys).on("mouseup.drag",j,ys),Vh(P.view),Fu(P),g=!1,p=P.clientX,y=P.clientY,V("start",P))}}function S(P){if(uo(P),!g){var A=P.clientX-p,V=P.clientY-y;g=A*A+V*V>m}l.mouse("drag",P)}function j(P){Ct(P.view).on("mousemove.drag mouseup.drag",null),Bh(P.view,g),uo(P),l.mouse("end",P)}function k(P,A){if(t.call(this,P,A)){var V=P.changedTouches,W=r.call(this,P,A),K=V.length,q,H;for(q=0;q<K;++q)(H=C(this,W,P,A,V[q].identifier,V[q]))&&(Fu(P),H("start",P,V[q]))}}function I(P){var A=P.changedTouches,V=A.length,W,K;for(W=0;W<V;++W)(K=l[A[W].identifier])&&(uo(P),K("drag",P,A[W]))}function D(P){var A=P.changedTouches,V=A.length,W,K;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),W=0;W<V;++W)(K=l[A[W].identifier])&&(Fu(P),K("end",P,A[W]))}function C(P,A,V,W,K,q){var H=u.copy(),$=Bt(q||V,A),X,Q,O;if((O=o.call(P,new ec("beforestart",{sourceEvent:V,target:x,identifier:K,active:d,x:$[0],y:$[1],dx:0,dy:0,dispatch:H}),W))!=null)return X=O.x-$[0]||0,Q=O.y-$[1]||0,function R(z,M,b){var N=$,L;switch(z){case"start":l[K]=R,L=d++;break;case"end":delete l[K],--d;case"drag":$=Bt(b||M,A),L=d;break}H.call(z,P,new ec(z,{sourceEvent:M,subject:O,target:x,identifier:K,active:L,x:$[0]+X,y:$[1]+Q,dx:$[0]-N[0],dy:$[1]-N[1],dispatch:H}),W)}}return x.filter=function(P){return arguments.length?(t=typeof P=="function"?P:Ji(!!P),x):t},x.container=function(P){return arguments.length?(r=typeof P=="function"?P:Ji(P),x):r},x.subject=function(P){return arguments.length?(o=typeof P=="function"?P:Ji(P),x):o},x.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:Ji(!!P),x):i},x.on=function(){var P=u.on.apply(u,arguments);return P===u?x:P},x.clickDistance=function(P){return arguments.length?(m=(P=+P)*P,x):Math.sqrt(m)},x}function vc(t,r,o){t.prototype=r.prototype=o,o.constructor=t}function Uh(t,r){var o=Object.create(t.prototype);for(var i in r)o[i]=r[i];return o}function Ms(){}var vs=.7,vl=1/vs,co="\\s*([+-]?\\d+)\\s*",ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xy=/^#([0-9a-f]{3,8})$/,Qy=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),Gy=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),Ky=new RegExp(`^rgba\\(${co},${co},${co},${ws}\\)$`),qy=new RegExp(`^rgba\\(${nn},${nn},${nn},${ws}\\)$`),Zy=new RegExp(`^hsl\\(${ws},${nn},${nn}\\)$`),Jy=new RegExp(`^hsla\\(${ws},${nn},${nn},${ws}\\)$`),gp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vc(Ms,vr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xp,formatHex:xp,formatHex8:ev,formatHsl:tv,formatRgb:yp,toString:yp});function xp(){return this.rgb().formatHex()}function ev(){return this.rgb().formatHex8()}function tv(){return Yh(this).formatHsl()}function yp(){return this.rgb().formatRgb()}function vr(t){var r,o;return t=(t+"").trim().toLowerCase(),(r=Xy.exec(t))?(o=r[1].length,r=parseInt(r[1],16),o===6?vp(r):o===3?new mt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?el(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?el(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Qy.exec(t))?new mt(r[1],r[2],r[3],1):(r=Gy.exec(t))?new mt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Ky.exec(t))?el(r[1],r[2],r[3],r[4]):(r=qy.exec(t))?el(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Zy.exec(t))?Np(r[1],r[2]/100,r[3]/100,1):(r=Jy.exec(t))?Np(r[1],r[2]/100,r[3]/100,r[4]):gp.hasOwnProperty(t)?vp(gp[t]):t==="transparent"?new mt(NaN,NaN,NaN,0):null}function vp(t){return new mt(t>>16&255,t>>8&255,t&255,1)}function el(t,r,o,i){return i<=0&&(t=r=o=NaN),new mt(t,r,o,i)}function nv(t){return t instanceof Ms||(t=vr(t)),t?(t=t.rgb(),new mt(t.r,t.g,t.b,t.opacity)):new mt}function tc(t,r,o,i){return arguments.length===1?nv(t):new mt(t,r,o,i??1)}function mt(t,r,o,i){this.r=+t,this.g=+r,this.b=+o,this.opacity=+i}vc(mt,tc,Uh(Ms,{brighter(t){return t=t==null?vl:Math.pow(vl,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vs:Math.pow(vs,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mt(xr(this.r),xr(this.g),xr(this.b),wl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wp,formatHex:wp,formatHex8:rv,formatRgb:Sp,toString:Sp}));function wp(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}`}function rv(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}${mr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sp(){const t=wl(this.opacity);return`${t===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${t===1?")":`, ${t})`}`}function wl(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mr(t){return t=xr(t),(t<16?"0":"")+t.toString(16)}function Np(t,r,o,i){return i<=0?t=r=o=NaN:o<=0||o>=1?t=r=NaN:r<=0&&(t=NaN),new Wt(t,r,o,i)}function Yh(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof Ms||(t=vr(t)),!t)return new Wt;if(t instanceof Wt)return t;t=t.rgb();var r=t.r/255,o=t.g/255,i=t.b/255,l=Math.min(r,o,i),u=Math.max(r,o,i),d=NaN,p=u-l,y=(u+l)/2;return p?(r===u?d=(o-i)/p+(o<i)*6:o===u?d=(i-r)/p+2:d=(r-o)/p+4,p/=y<.5?u+l:2-u-l,d*=60):p=y>0&&y<1?0:d,new Wt(d,p,y,t.opacity)}function ov(t,r,o,i){return arguments.length===1?Yh(t):new Wt(t,r,o,i??1)}function Wt(t,r,o,i){this.h=+t,this.s=+r,this.l=+o,this.opacity=+i}vc(Wt,ov,Uh(Ms,{brighter(t){return t=t==null?vl:Math.pow(vl,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vs:Math.pow(vs,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*r,l=2*o-i;return new mt(Hu(t>=240?t-240:t+120,l,i),Hu(t,l,i),Hu(t<120?t+240:t-120,l,i),this.opacity)},clamp(){return new Wt(kp(this.h),tl(this.s),tl(this.l),wl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wl(this.opacity);return`${t===1?"hsl(":"hsla("}${kp(this.h)}, ${tl(this.s)*100}%, ${tl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function kp(t){return t=(t||0)%360,t<0?t+360:t}function tl(t){return Math.max(0,Math.min(1,t||0))}function Hu(t,r,o){return(t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r)*255}const wc=t=>()=>t;function sv(t,r){return function(o){return t+o*r}}function iv(t,r,o){return t=Math.pow(t,o),r=Math.pow(r,o)-t,o=1/o,function(i){return Math.pow(t+i*r,o)}}function lv(t){return(t=+t)==1?Xh:function(r,o){return o-r?iv(r,o,t):wc(isNaN(r)?o:r)}}function Xh(t,r){var o=r-t;return o?sv(t,o):wc(isNaN(t)?r:t)}const Sl=(function t(r){var o=lv(r);function i(l,u){var d=o((l=tc(l)).r,(u=tc(u)).r),p=o(l.g,u.g),y=o(l.b,u.b),g=Xh(l.opacity,u.opacity);return function(h){return l.r=d(h),l.g=p(h),l.b=y(h),l.opacity=g(h),l+""}}return i.gamma=t,i})(1);function av(t,r){r||(r=[]);var o=t?Math.min(r.length,t.length):0,i=r.slice(),l;return function(u){for(l=0;l<o;++l)i[l]=t[l]*(1-u)+r[l]*u;return i}}function uv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cv(t,r){var o=r?r.length:0,i=t?Math.min(o,t.length):0,l=new Array(i),u=new Array(o),d;for(d=0;d<i;++d)l[d]=gs(t[d],r[d]);for(;d<o;++d)u[d]=r[d];return function(p){for(d=0;d<i;++d)u[d]=l[d](p);return u}}function dv(t,r){var o=new Date;return t=+t,r=+r,function(i){return o.setTime(t*(1-i)+r*i),o}}function tn(t,r){return t=+t,r=+r,function(o){return t*(1-o)+r*o}}function fv(t,r){var o={},i={},l;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in t?o[l]=gs(t[l],r[l]):i[l]=r[l];return function(u){for(l in o)i[l]=o[l](u);return i}}var nc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vu=new RegExp(nc.source,"g");function pv(t){return function(){return t}}function hv(t){return function(r){return t(r)+""}}function Qh(t,r){var o=nc.lastIndex=Vu.lastIndex=0,i,l,u,d=-1,p=[],y=[];for(t=t+"",r=r+"";(i=nc.exec(t))&&(l=Vu.exec(r));)(u=l.index)>o&&(u=r.slice(o,u),p[d]?p[d]+=u:p[++d]=u),(i=i[0])===(l=l[0])?p[d]?p[d]+=l:p[++d]=l:(p[++d]=null,y.push({i:d,x:tn(i,l)})),o=Vu.lastIndex;return o<r.length&&(u=r.slice(o),p[d]?p[d]+=u:p[++d]=u),p.length<2?y[0]?hv(y[0].x):pv(r):(r=y.length,function(g){for(var h=0,m;h<r;++h)p[(m=y[h]).i]=m.x(g);return p.join("")})}function gs(t,r){var o=typeof r,i;return r==null||o==="boolean"?wc(r):(o==="number"?tn:o==="string"?(i=vr(r))?(r=i,Sl):Qh:r instanceof vr?Sl:r instanceof Date?dv:uv(r)?av:Array.isArray(r)?cv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?fv:tn)(t,r)}var Cp=180/Math.PI,rc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gh(t,r,o,i,l,u){var d,p,y;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(y=t*o+r*i)&&(o-=t*y,i-=r*y),(p=Math.sqrt(o*o+i*i))&&(o/=p,i/=p,y/=p),t*i<r*o&&(t=-t,r=-r,y=-y,d=-d),{translateX:l,translateY:u,rotate:Math.atan2(r,t)*Cp,skewX:Math.atan(y)*Cp,scaleX:d,scaleY:p}}var nl;function mv(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?rc:Gh(r.a,r.b,r.c,r.d,r.e,r.f)}function gv(t){return t==null||(nl||(nl=document.createElementNS("http://www.w3.org/2000/svg","g")),nl.setAttribute("transform",t),!(t=nl.transform.baseVal.consolidate()))?rc:(t=t.matrix,Gh(t.a,t.b,t.c,t.d,t.e,t.f))}function Kh(t,r,o,i){function l(g){return g.length?g.pop()+" ":""}function u(g,h,m,x,w,S){if(g!==m||h!==x){var j=w.push("translate(",null,r,null,o);S.push({i:j-4,x:tn(g,m)},{i:j-2,x:tn(h,x)})}else(m||x)&&w.push("translate("+m+r+x+o)}function d(g,h,m,x){g!==h?(g-h>180?h+=360:h-g>180&&(g+=360),x.push({i:m.push(l(m)+"rotate(",null,i)-2,x:tn(g,h)})):h&&m.push(l(m)+"rotate("+h+i)}function p(g,h,m,x){g!==h?x.push({i:m.push(l(m)+"skewX(",null,i)-2,x:tn(g,h)}):h&&m.push(l(m)+"skewX("+h+i)}function y(g,h,m,x,w,S){if(g!==m||h!==x){var j=w.push(l(w)+"scale(",null,",",null,")");S.push({i:j-4,x:tn(g,m)},{i:j-2,x:tn(h,x)})}else(m!==1||x!==1)&&w.push(l(w)+"scale("+m+","+x+")")}return function(g,h){var m=[],x=[];return g=t(g),h=t(h),u(g.translateX,g.translateY,h.translateX,h.translateY,m,x),d(g.rotate,h.rotate,m,x),p(g.skewX,h.skewX,m,x),y(g.scaleX,g.scaleY,h.scaleX,h.scaleY,m,x),g=h=null,function(w){for(var S=-1,j=x.length,k;++S<j;)m[(k=x[S]).i]=k.x(w);return m.join("")}}}var xv=Kh(mv,"px, ","px)","deg)"),yv=Kh(gv,", ",")",")"),vv=1e-12;function Ip(t){return((t=Math.exp(t))+1/t)/2}function wv(t){return((t=Math.exp(t))-1/t)/2}function Sv(t){return((t=Math.exp(2*t))-1)/(t+1)}const pl=(function t(r,o,i){function l(u,d){var p=u[0],y=u[1],g=u[2],h=d[0],m=d[1],x=d[2],w=h-p,S=m-y,j=w*w+S*S,k,I;if(j<vv)I=Math.log(x/g)/r,k=function(W){return[p+W*w,y+W*S,g*Math.exp(r*W*I)]};else{var D=Math.sqrt(j),C=(x*x-g*g+i*j)/(2*g*o*D),P=(x*x-g*g-i*j)/(2*x*o*D),A=Math.log(Math.sqrt(C*C+1)-C),V=Math.log(Math.sqrt(P*P+1)-P);I=(V-A)/r,k=function(W){var K=W*I,q=Ip(A),H=g/(o*D)*(q*Sv(r*K+A)-wv(A));return[p+H*w,y+H*S,g*q/Ip(r*K+A)]}}return k.duration=I*1e3*r/Math.SQRT2,k}return l.rho=function(u){var d=Math.max(.001,+u),p=d*d,y=p*p;return t(d,p,y)},l})(Math.SQRT2,2,4);var po=0,hs=0,cs=0,qh=1e3,Nl,ms,kl=0,wr=0,Pl=0,Ss=typeof performance=="object"&&performance.now?performance:Date,Zh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Sc(){return wr||(Zh(Nv),wr=Ss.now()+Pl)}function Nv(){wr=0}function Cl(){this._call=this._time=this._next=null}Cl.prototype=Jh.prototype={constructor:Cl,restart:function(t,r,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?Sc():+o)+(r==null?0:+r),!this._next&&ms!==this&&(ms?ms._next=this:Nl=this,ms=this),this._call=t,this._time=o,oc()},stop:function(){this._call&&(this._call=null,this._time=1/0,oc())}};function Jh(t,r,o){var i=new Cl;return i.restart(t,r,o),i}function kv(){Sc(),++po;for(var t=Nl,r;t;)(r=wr-t._time)>=0&&t._call.call(void 0,r),t=t._next;--po}function jp(){wr=(kl=Ss.now())+Pl,po=hs=0;try{kv()}finally{po=0,Iv(),wr=0}}function Cv(){var t=Ss.now(),r=t-kl;r>qh&&(Pl-=r,kl=t)}function Iv(){for(var t,r=Nl,o,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(o=r._next,r._next=null,r=t?t._next=o:Nl=o);ms=t,oc(i)}function oc(t){if(!po){hs&&(hs=clearTimeout(hs));var r=t-wr;r>24?(t<1/0&&(hs=setTimeout(jp,t-Ss.now()-Pl)),cs&&(cs=clearInterval(cs))):(cs||(kl=Ss.now(),cs=setInterval(Cv,qh)),po=1,Zh(jp))}}function Ep(t,r,o){var i=new Cl;return r=r==null?0:+r,i.restart(l=>{i.stop(),t(l+r)},r,o),i}var jv=Ml("start","end","cancel","interrupt"),Ev=[],em=0,_p=1,sc=2,hl=3,Mp=4,ic=5,ml=6;function Dl(t,r,o,i,l,u){var d=t.__transition;if(!d)t.__transition={};else if(o in d)return;_v(t,o,{name:r,index:i,group:l,on:jv,tween:Ev,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:em})}function Nc(t,r){var o=Qt(t,r);if(o.state>em)throw new Error("too late; already scheduled");return o}function on(t,r){var o=Qt(t,r);if(o.state>hl)throw new Error("too late; already running");return o}function Qt(t,r){var o=t.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function _v(t,r,o){var i=t.__transition,l;i[r]=o,o.timer=Jh(u,0,o.time);function u(g){o.state=_p,o.timer.restart(d,o.delay,o.time),o.delay<=g&&d(g-o.delay)}function d(g){var h,m,x,w;if(o.state!==_p)return y();for(h in i)if(w=i[h],w.name===o.name){if(w.state===hl)return Ep(d);w.state===Mp?(w.state=ml,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[h]):+h<r&&(w.state=ml,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[h])}if(Ep(function(){o.state===hl&&(o.state=Mp,o.timer.restart(p,o.delay,o.time),p(g))}),o.state=sc,o.on.call("start",t,t.__data__,o.index,o.group),o.state===sc){for(o.state=hl,l=new Array(x=o.tween.length),h=0,m=-1;h<x;++h)(w=o.tween[h].value.call(t,t.__data__,o.index,o.group))&&(l[++m]=w);l.length=m+1}}function p(g){for(var h=g<o.duration?o.ease.call(null,g/o.duration):(o.timer.restart(y),o.state=ic,1),m=-1,x=l.length;++m<x;)l[m].call(t,h);o.state===ic&&(o.on.call("end",t,t.__data__,o.index,o.group),y())}function y(){o.state=ml,o.timer.stop(),delete i[r];for(var g in i)return;delete t.__transition}}function gl(t,r){var o=t.__transition,i,l,u=!0,d;if(o){r=r==null?null:r+"";for(d in o){if((i=o[d]).name!==r){u=!1;continue}l=i.state>sc&&i.state<ic,i.state=ml,i.timer.stop(),i.on.call(l?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete o[d]}u&&delete t.__transition}}function Mv(t){return this.each(function(){gl(this,t)})}function bv(t,r){var o,i;return function(){var l=on(this,t),u=l.tween;if(u!==o){i=o=u;for(var d=0,p=i.length;d<p;++d)if(i[d].name===r){i=i.slice(),i.splice(d,1);break}}l.tween=i}}function Pv(t,r,o){var i,l;if(typeof o!="function")throw new Error;return function(){var u=on(this,t),d=u.tween;if(d!==i){l=(i=d).slice();for(var p={name:r,value:o},y=0,g=l.length;y<g;++y)if(l[y].name===r){l[y]=p;break}y===g&&l.push(p)}u.tween=l}}function Dv(t,r){var o=this._id;if(t+="",arguments.length<2){for(var i=Qt(this.node(),o).tween,l=0,u=i.length,d;l<u;++l)if((d=i[l]).name===t)return d.value;return null}return this.each((r==null?bv:Pv)(o,t,r))}function kc(t,r,o){var i=t._id;return t.each(function(){var l=on(this,i);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return Qt(l,i).value[r]}}function tm(t,r){var o;return(typeof r=="number"?tn:r instanceof vr?Sl:(o=vr(r))?(r=o,Sl):Qh)(t,r)}function Tv(t){return function(){this.removeAttribute(t)}}function Ov(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Av(t,r,o){var i,l=o+"",u;return function(){var d=this.getAttribute(t);return d===l?null:d===i?u:u=r(i=d,o)}}function Lv(t,r,o){var i,l=o+"",u;return function(){var d=this.getAttributeNS(t.space,t.local);return d===l?null:d===i?u:u=r(i=d,o)}}function $v(t,r,o){var i,l,u;return function(){var d,p=o(this),y;return p==null?void this.removeAttribute(t):(d=this.getAttribute(t),y=p+"",d===y?null:d===i&&y===l?u:(l=y,u=r(i=d,p)))}}function zv(t,r,o){var i,l,u;return function(){var d,p=o(this),y;return p==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),y=p+"",d===y?null:d===i&&y===l?u:(l=y,u=r(i=d,p)))}}function Rv(t,r){var o=bl(t),i=o==="transform"?yv:tm;return this.attrTween(t,typeof r=="function"?(o.local?zv:$v)(o,i,kc(this,"attr."+t,r)):r==null?(o.local?Ov:Tv)(o):(o.local?Lv:Av)(o,i,r))}function Fv(t,r){return function(o){this.setAttribute(t,r.call(this,o))}}function Hv(t,r){return function(o){this.setAttributeNS(t.space,t.local,r.call(this,o))}}function Vv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Hv(t,u)),o}return l._value=r,l}function Bv(t,r){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&Fv(t,u)),o}return l._value=r,l}function Wv(t,r){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var i=bl(t);return this.tween(o,(i.local?Vv:Bv)(i,r))}function Uv(t,r){return function(){Nc(this,t).delay=+r.apply(this,arguments)}}function Yv(t,r){return r=+r,function(){Nc(this,t).delay=r}}function Xv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Uv:Yv)(r,t)):Qt(this.node(),r).delay}function Qv(t,r){return function(){on(this,t).duration=+r.apply(this,arguments)}}function Gv(t,r){return r=+r,function(){on(this,t).duration=r}}function Kv(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Qv:Gv)(r,t)):Qt(this.node(),r).duration}function qv(t,r){if(typeof r!="function")throw new Error;return function(){on(this,t).ease=r}}function Zv(t){var r=this._id;return arguments.length?this.each(qv(r,t)):Qt(this.node(),r).ease}function Jv(t,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;on(this,t).ease=o}}function ew(t){if(typeof t!="function")throw new Error;return this.each(Jv(this._id,t))}function tw(t){typeof t!="function"&&(t=Dh(t));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var u=r[l],d=u.length,p=i[l]=[],y,g=0;g<d;++g)(y=u[g])&&t.call(y,y.__data__,g,u)&&p.push(y);return new wn(i,this._parents,this._name,this._id)}function nw(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,o=t._groups,i=r.length,l=o.length,u=Math.min(i,l),d=new Array(i),p=0;p<u;++p)for(var y=r[p],g=o[p],h=y.length,m=d[p]=new Array(h),x,w=0;w<h;++w)(x=y[w]||g[w])&&(m[w]=x);for(;p<i;++p)d[p]=r[p];return new wn(d,this._parents,this._name,this._id)}function rw(t){return(t+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function ow(t,r,o){var i,l,u=rw(r)?Nc:on;return function(){var d=u(this,t),p=d.on;p!==i&&(l=(i=p).copy()).on(r,o),d.on=l}}function sw(t,r){var o=this._id;return arguments.length<2?Qt(this.node(),o).on.on(t):this.each(ow(o,t,r))}function iw(t){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==t)return;r&&r.removeChild(this)}}function lw(){return this.on("end.remove",iw(this._id))}function aw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=xc(t));for(var i=this._groups,l=i.length,u=new Array(l),d=0;d<l;++d)for(var p=i[d],y=p.length,g=u[d]=new Array(y),h,m,x=0;x<y;++x)(h=p[x])&&(m=t.call(h,h.__data__,x,p))&&("__data__"in h&&(m.__data__=h.__data__),g[x]=m,Dl(g[x],r,o,x,g,Qt(h,o)));return new wn(u,this._parents,r,o)}function uw(t){var r=this._name,o=this._id;typeof t!="function"&&(t=Ph(t));for(var i=this._groups,l=i.length,u=[],d=[],p=0;p<l;++p)for(var y=i[p],g=y.length,h,m=0;m<g;++m)if(h=y[m]){for(var x=t.call(h,h.__data__,m,y),w,S=Qt(h,o),j=0,k=x.length;j<k;++j)(w=x[j])&&Dl(w,r,o,j,x,S);u.push(x),d.push(h)}return new wn(u,d,r,o)}var cw=_s.prototype.constructor;function dw(){return new cw(this._groups,this._parents)}function fw(t,r){var o,i,l;return function(){var u=fo(this,t),d=(this.style.removeProperty(t),fo(this,t));return u===d?null:u===o&&d===i?l:l=r(o=u,i=d)}}function nm(t){return function(){this.style.removeProperty(t)}}function pw(t,r,o){var i,l=o+"",u;return function(){var d=fo(this,t);return d===l?null:d===i?u:u=r(i=d,o)}}function hw(t,r,o){var i,l,u;return function(){var d=fo(this,t),p=o(this),y=p+"";return p==null&&(y=p=(this.style.removeProperty(t),fo(this,t))),d===y?null:d===i&&y===l?u:(l=y,u=r(i=d,p))}}function mw(t,r){var o,i,l,u="style."+r,d="end."+u,p;return function(){var y=on(this,t),g=y.on,h=y.value[u]==null?p||(p=nm(r)):void 0;(g!==o||l!==h)&&(i=(o=g).copy()).on(d,l=h),y.on=i}}function gw(t,r,o){var i=(t+="")=="transform"?xv:tm;return r==null?this.styleTween(t,fw(t,i)).on("end.style."+t,nm(t)):typeof r=="function"?this.styleTween(t,hw(t,i,kc(this,"style."+t,r))).each(mw(this._id,t)):this.styleTween(t,pw(t,i,r),o).on("end.style."+t,null)}function xw(t,r,o){return function(i){this.style.setProperty(t,r.call(this,i),o)}}function yw(t,r,o){var i,l;function u(){var d=r.apply(this,arguments);return d!==l&&(i=(l=d)&&xw(t,d,o)),i}return u._value=r,u}function vw(t,r,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,yw(t,r,o??""))}function ww(t){return function(){this.textContent=t}}function Sw(t){return function(){var r=t(this);this.textContent=r??""}}function Nw(t){return this.tween("text",typeof t=="function"?Sw(kc(this,"text",t)):ww(t==null?"":t+""))}function kw(t){return function(r){this.textContent=t.call(this,r)}}function Cw(t){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&kw(l)),r}return i._value=t,i}function Iw(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cw(t))}function jw(){for(var t=this._name,r=this._id,o=rm(),i=this._groups,l=i.length,u=0;u<l;++u)for(var d=i[u],p=d.length,y,g=0;g<p;++g)if(y=d[g]){var h=Qt(y,r);Dl(y,t,o,g,d,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new wn(i,this._parents,t,o)}function Ew(){var t,r,o=this,i=o._id,l=o.size();return new Promise(function(u,d){var p={value:d},y={value:function(){--l===0&&u()}};o.each(function(){var g=on(this,i),h=g.on;h!==t&&(r=(t=h).copy(),r._.cancel.push(p),r._.interrupt.push(p),r._.end.push(y)),g.on=r}),l===0&&u()})}var _w=0;function wn(t,r,o,i){this._groups=t,this._parents=r,this._name=o,this._id=i}function rm(){return++_w}var yn=_s.prototype;wn.prototype={constructor:wn,select:aw,selectAll:uw,selectChild:yn.selectChild,selectChildren:yn.selectChildren,filter:tw,merge:nw,selection:dw,transition:jw,call:yn.call,nodes:yn.nodes,node:yn.node,size:yn.size,empty:yn.empty,each:yn.each,on:sw,attr:Rv,attrTween:Wv,style:gw,styleTween:vw,text:Nw,textTween:Iw,remove:lw,tween:Dv,delay:Xv,duration:Kv,ease:Zv,easeVarying:ew,end:Ew,[Symbol.iterator]:yn[Symbol.iterator]};function Mw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bw={time:null,delay:0,duration:250,ease:Mw};function Pw(t,r){for(var o;!(o=t.__transition)||!(o=o[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return o}function Dw(t){var r,o;t instanceof wn?(r=t._id,t=t._name):(r=rm(),(o=bw).time=Sc(),t=t==null?null:t+"");for(var i=this._groups,l=i.length,u=0;u<l;++u)for(var d=i[u],p=d.length,y,g=0;g<p;++g)(y=d[g])&&Dl(y,t,r,g,d,o||Pw(y,r));return new wn(i,this._parents,t,r)}_s.prototype.interrupt=Mv;_s.prototype.transition=Dw;const rl=t=>()=>t;function Tw(t,{sourceEvent:r,target:o,transform:i,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:l}})}function vn(t,r,o){this.k=t,this.x=r,this.y=o}vn.prototype={constructor:vn,scale:function(t){return t===1?this:new vn(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new vn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tl=new vn(1,0,0);om.prototype=vn.prototype;function om(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Tl;return t.__zoom}function Bu(t){t.stopImmediatePropagation()}function ds(t){t.preventDefault(),t.stopImmediatePropagation()}function Ow(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Aw(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function bp(){return this.__zoom||Tl}function Lw(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function $w(){return navigator.maxTouchPoints||"ontouchstart"in this}function zw(t,r,o){var i=t.invertX(r[0][0])-o[0][0],l=t.invertX(r[1][0])-o[1][0],u=t.invertY(r[0][1])-o[0][1],d=t.invertY(r[1][1])-o[1][1];return t.translate(l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l),d>u?(u+d)/2:Math.min(0,u)||Math.max(0,d))}function sm(){var t=Ow,r=Aw,o=zw,i=Lw,l=$w,u=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],p=250,y=pl,g=Ml("start","zoom","end"),h,m,x,w=500,S=150,j=0,k=10;function I(O){O.property("__zoom",bp).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",H).filter(l).on("touchstart.zoom",$).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function(O,R,z,M){var b=O.selection?O.selection():O;b.property("__zoom",bp),O!==b?A(O,R,z,M):b.interrupt().each(function(){V(this,arguments).event(M).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},I.scaleBy=function(O,R,z,M){I.scaleTo(O,function(){var b=this.__zoom.k,N=typeof R=="function"?R.apply(this,arguments):R;return b*N},z,M)},I.scaleTo=function(O,R,z,M){I.transform(O,function(){var b=r.apply(this,arguments),N=this.__zoom,L=z==null?P(b):typeof z=="function"?z.apply(this,arguments):z,E=N.invert(L),T=typeof R=="function"?R.apply(this,arguments):R;return o(C(D(N,T),L,E),b,d)},z,M)},I.translateBy=function(O,R,z,M){I.transform(O,function(){return o(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof z=="function"?z.apply(this,arguments):z),r.apply(this,arguments),d)},null,M)},I.translateTo=function(O,R,z,M,b){I.transform(O,function(){var N=r.apply(this,arguments),L=this.__zoom,E=M==null?P(N):typeof M=="function"?M.apply(this,arguments):M;return o(Tl.translate(E[0],E[1]).scale(L.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof z=="function"?-z.apply(this,arguments):-z),N,d)},M,b)};function D(O,R){return R=Math.max(u[0],Math.min(u[1],R)),R===O.k?O:new vn(R,O.x,O.y)}function C(O,R,z){var M=R[0]-z[0]*O.k,b=R[1]-z[1]*O.k;return M===O.x&&b===O.y?O:new vn(O.k,M,b)}function P(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function A(O,R,z,M){O.on("start.zoom",function(){V(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(M).end()}).tween("zoom",function(){var b=this,N=arguments,L=V(b,N).event(M),E=r.apply(b,N),T=z==null?P(E):typeof z=="function"?z.apply(b,N):z,Z=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),G=b.__zoom,ne=typeof R=="function"?R.apply(b,N):R,oe=y(G.invert(T).concat(Z/G.k),ne.invert(T).concat(Z/ne.k));return function(ae){if(ae===1)ae=ne;else{var re=oe(ae),ue=Z/re[2];ae=new vn(ue,T[0]-re[0]*ue,T[1]-re[1]*ue)}L.zoom(null,ae)}})}function V(O,R,z){return!z&&O.__zooming||new W(O,R)}function W(O,R){this.that=O,this.args=R,this.active=0,this.sourceEvent=null,this.extent=r.apply(O,R),this.taps=0}W.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,R){return this.mouse&&O!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var R=Ct(this.that).datum();g.call(O,this.that,new Tw(O,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:g}),R)}};function K(O,...R){if(!t.apply(this,arguments))return;var z=V(this,R).event(O),M=this.__zoom,b=Math.max(u[0],Math.min(u[1],M.k*Math.pow(2,i.apply(this,arguments)))),N=Bt(O);if(z.wheel)(z.mouse[0][0]!==N[0]||z.mouse[0][1]!==N[1])&&(z.mouse[1]=M.invert(z.mouse[0]=N)),clearTimeout(z.wheel);else{if(M.k===b)return;z.mouse=[N,M.invert(N)],gl(this),z.start()}ds(O),z.wheel=setTimeout(L,S),z.zoom("mouse",o(C(D(M,b),z.mouse[0],z.mouse[1]),z.extent,d));function L(){z.wheel=null,z.end()}}function q(O,...R){if(x||!t.apply(this,arguments))return;var z=O.currentTarget,M=V(this,R,!0).event(O),b=Ct(O.view).on("mousemove.zoom",T,!0).on("mouseup.zoom",Z,!0),N=Bt(O,z),L=O.clientX,E=O.clientY;Vh(O.view),Bu(O),M.mouse=[N,this.__zoom.invert(N)],gl(this),M.start();function T(G){if(ds(G),!M.moved){var ne=G.clientX-L,oe=G.clientY-E;M.moved=ne*ne+oe*oe>j}M.event(G).zoom("mouse",o(C(M.that.__zoom,M.mouse[0]=Bt(G,z),M.mouse[1]),M.extent,d))}function Z(G){b.on("mousemove.zoom mouseup.zoom",null),Bh(G.view,M.moved),ds(G),M.event(G).end()}}function H(O,...R){if(t.apply(this,arguments)){var z=this.__zoom,M=Bt(O.changedTouches?O.changedTouches[0]:O,this),b=z.invert(M),N=z.k*(O.shiftKey?.5:2),L=o(C(D(z,N),M,b),r.apply(this,R),d);ds(O),p>0?Ct(this).transition().duration(p).call(A,L,M,O):Ct(this).call(I.transform,L,M,O)}}function $(O,...R){if(t.apply(this,arguments)){var z=O.touches,M=z.length,b=V(this,R,O.changedTouches.length===M).event(O),N,L,E,T;for(Bu(O),L=0;L<M;++L)E=z[L],T=Bt(E,this),T=[T,this.__zoom.invert(T),E.identifier],b.touch0?!b.touch1&&b.touch0[2]!==T[2]&&(b.touch1=T,b.taps=0):(b.touch0=T,N=!0,b.taps=1+!!h);h&&(h=clearTimeout(h)),N&&(b.taps<2&&(m=T[0],h=setTimeout(function(){h=null},w)),gl(this),b.start())}}function X(O,...R){if(this.__zooming){var z=V(this,R).event(O),M=O.changedTouches,b=M.length,N,L,E,T;for(ds(O),N=0;N<b;++N)L=M[N],E=Bt(L,this),z.touch0&&z.touch0[2]===L.identifier?z.touch0[0]=E:z.touch1&&z.touch1[2]===L.identifier&&(z.touch1[0]=E);if(L=z.that.__zoom,z.touch1){var Z=z.touch0[0],G=z.touch0[1],ne=z.touch1[0],oe=z.touch1[1],ae=(ae=ne[0]-Z[0])*ae+(ae=ne[1]-Z[1])*ae,re=(re=oe[0]-G[0])*re+(re=oe[1]-G[1])*re;L=D(L,Math.sqrt(ae/re)),E=[(Z[0]+ne[0])/2,(Z[1]+ne[1])/2],T=[(G[0]+oe[0])/2,(G[1]+oe[1])/2]}else if(z.touch0)E=z.touch0[0],T=z.touch0[1];else return;z.zoom("touch",o(C(L,E,T),z.extent,d))}}function Q(O,...R){if(this.__zooming){var z=V(this,R).event(O),M=O.changedTouches,b=M.length,N,L;for(Bu(O),x&&clearTimeout(x),x=setTimeout(function(){x=null},w),N=0;N<b;++N)L=M[N],z.touch0&&z.touch0[2]===L.identifier?delete z.touch0:z.touch1&&z.touch1[2]===L.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(L=Bt(L,this),Math.hypot(m[0]-L[0],m[1]-L[1])<k)){var E=Ct(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return I.wheelDelta=function(O){return arguments.length?(i=typeof O=="function"?O:rl(+O),I):i},I.filter=function(O){return arguments.length?(t=typeof O=="function"?O:rl(!!O),I):t},I.touchable=function(O){return arguments.length?(l=typeof O=="function"?O:rl(!!O),I):l},I.extent=function(O){return arguments.length?(r=typeof O=="function"?O:rl([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),I):r},I.scaleExtent=function(O){return arguments.length?(u[0]=+O[0],u[1]=+O[1],I):[u[0],u[1]]},I.translateExtent=function(O){return arguments.length?(d[0][0]=+O[0][0],d[1][0]=+O[1][0],d[0][1]=+O[0][1],d[1][1]=+O[1][1],I):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},I.constrain=function(O){return arguments.length?(o=O,I):o},I.duration=function(O){return arguments.length?(p=+O,I):p},I.interpolate=function(O){return arguments.length?(y=O,I):y},I.on=function(){var O=g.on.apply(g,arguments);return O===g?I:O},I.clickDistance=function(O){return arguments.length?(j=(O=+O)*O,I):Math.sqrt(j)},I.tapDistance=function(O){return arguments.length?(k=+O,I):k},I}const rn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:r,sourceHandle:o,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?o:i}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ns=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],im=["Enter"," ","Escape"],lm={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:r,y:o})=>`Moved selected node ${t}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ho;(function(t){t.Strict="strict",t.Loose="loose"})(ho||(ho={}));var yr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(yr||(yr={}));var ks;(function(t){t.Partial="partial",t.Full="full"})(ks||(ks={}));const am={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Yn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Yn||(Yn={}));var Il;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Il||(Il={}));var ye;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ye||(ye={}));const Pp={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function um(t){return t===null?null:t?"valid":"invalid"}const cm=t=>"id"in t&&"source"in t&&"target"in t,Rw=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Cc=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),bs=(t,r=[0,0])=>{const{width:o,height:i}=Sn(t),l=t.origin??r,u=o*l[0],d=i*l[1];return{x:t.position.x-u,y:t.position.y-d}},Fw=(t,r={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const o=t.reduce((i,l)=>{const u=typeof l=="string";let d=!r.nodeLookup&&!u?l:void 0;r.nodeLookup&&(d=u?r.nodeLookup.get(l):Cc(l)?l:r.nodeLookup.get(l.id));const p=d?jl(d,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ol(i,p)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Al(o)},Ps=(t,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Ol(o,jl(l)),i=!0)}),i?Al(o):{x:0,y:0,width:0,height:0}},Ic=(t,r,[o,i,l]=[0,0,1],u=!1,d=!1)=>{const p={...Ts(r,[o,i,l]),width:r.width/l,height:r.height/l},y=[];for(const g of t.values()){const{measured:h,selectable:m=!0,hidden:x=!1}=g;if(d&&!m||x)continue;const w=h.width??g.width??g.initialWidth??null,S=h.height??g.height??g.initialHeight??null,j=Cs(p,go(g)),k=(w??0)*(S??0),I=u&&j>0;(!g.internals.handleBounds||I||j>=k||g.dragging)&&y.push(g)}return y},Hw=(t,r)=>{const o=new Set;return t.forEach(i=>{o.add(i.id)}),r.filter(i=>o.has(i.source)||o.has(i.target))};function Vw(t,r){const o=new Map,i=r!=null&&r.nodes?new Set(r.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&((r==null?void 0:r.includeHiddenNodes)||!l.hidden)&&(!i||i.has(l.id))&&o.set(l.id,l)}),o}async function Bw({nodes:t,width:r,height:o,panZoom:i,minZoom:l,maxZoom:u},d){if(t.size===0)return Promise.resolve(!0);const p=Vw(t,d),y=Ps(p),g=jc(y,r,o,(d==null?void 0:d.minZoom)??l,(d==null?void 0:d.maxZoom)??u,(d==null?void 0:d.padding)??.1);return await i.setViewport(g,{duration:d==null?void 0:d.duration,ease:d==null?void 0:d.ease,interpolate:d==null?void 0:d.interpolate}),Promise.resolve(!0)}function dm({nodeId:t,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:l,onError:u}){const d=o.get(t),p=d.parentId?o.get(d.parentId):void 0,{x:y,y:g}=p?p.internals.positionAbsolute:{x:0,y:0},h=d.origin??i;let m=d.extent||l;if(d.extent==="parent"&&!d.expandParent)if(!p)u==null||u("005",rn.error005());else{const w=p.measured.width,S=p.measured.height;w&&S&&(m=[[y,g],[y+w,g+S]])}else p&&xo(d.extent)&&(m=[[d.extent[0][0]+y,d.extent[0][1]+g],[d.extent[1][0]+y,d.extent[1][1]+g]]);const x=xo(m)?Sr(r,m,d.measured):r;return(d.measured.width===void 0||d.measured.height===void 0)&&(u==null||u("015",rn.error015())),{position:{x:x.x-y+(d.measured.width??0)*h[0],y:x.y-g+(d.measured.height??0)*h[1]},positionAbsolute:x}}async function Ww({nodesToRemove:t=[],edgesToRemove:r=[],nodes:o,edges:i,onBeforeDelete:l}){const u=new Set(t.map(x=>x.id)),d=[];for(const x of o){if(x.deletable===!1)continue;const w=u.has(x.id),S=!w&&x.parentId&&d.find(j=>j.id===x.parentId);(w||S)&&d.push(x)}const p=new Set(r.map(x=>x.id)),y=i.filter(x=>x.deletable!==!1),h=Hw(d,y);for(const x of y)p.has(x.id)&&!h.find(S=>S.id===x.id)&&h.push(x);if(!l)return{edges:h,nodes:d};const m=await l({nodes:d,edges:h});return typeof m=="boolean"?m?{edges:h,nodes:d}:{edges:[],nodes:[]}:m}const mo=(t,r=0,o=1)=>Math.min(Math.max(t,r),o),Sr=(t={x:0,y:0},r,o)=>({x:mo(t.x,r[0][0],r[1][0]-((o==null?void 0:o.width)??0)),y:mo(t.y,r[0][1],r[1][1]-((o==null?void 0:o.height)??0))});function fm(t,r,o){const{width:i,height:l}=Sn(o),{x:u,y:d}=o.internals.positionAbsolute;return Sr(t,[[u,d],[u+i,d+l]],r)}const Dp=(t,r,o)=>t<r?mo(Math.abs(t-r),1,r)/r:t>o?-mo(Math.abs(t-o),1,r)/r:0,pm=(t,r,o=15,i=40)=>{const l=Dp(t.x,i,r.width-i)*o,u=Dp(t.y,i,r.height-i)*o;return[l,u]},Ol=(t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}),lc=({x:t,y:r,width:o,height:i})=>({x:t,y:r,x2:t+o,y2:r+i}),Al=({x:t,y:r,x2:o,y2:i})=>({x:t,y:r,width:o-t,height:i-r}),go=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=Cc(t)?t.internals.positionAbsolute:bs(t,r);return{x:o,y:i,width:((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0,height:((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0}},jl=(t,r=[0,0])=>{var l,u;const{x:o,y:i}=Cc(t)?t.internals.positionAbsolute:bs(t,r);return{x:o,y:i,x2:o+(((l=t.measured)==null?void 0:l.width)??t.width??t.initialWidth??0),y2:i+(((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0)}},hm=(t,r)=>Al(Ol(lc(t),lc(r))),Cs=(t,r)=>{const o=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(o*i)},Tp=t=>Yt(t.width)&&Yt(t.height)&&Yt(t.x)&&Yt(t.y),Yt=t=>!isNaN(t)&&isFinite(t),Uw=(t,r)=>{},Ds=(t,r=[1,1])=>({x:r[0]*Math.round(t.x/r[0]),y:r[1]*Math.round(t.y/r[1])}),Ts=({x:t,y:r},[o,i,l],u=!1,d=[1,1])=>{const p={x:(t-o)/l,y:(r-i)/l};return u?Ds(p,d):p},El=({x:t,y:r},[o,i,l])=>({x:t*l+o,y:r*l+i});function oo(t,r){if(typeof t=="number")return Math.floor((r-r/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(o)}if(typeof t=="string"&&t.endsWith("%")){const o=parseFloat(t);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Yw(t,r,o){if(typeof t=="string"||typeof t=="number"){const i=oo(t,o),l=oo(t,r);return{top:i,right:l,bottom:i,left:l,x:l*2,y:i*2}}if(typeof t=="object"){const i=oo(t.top??t.y??0,o),l=oo(t.bottom??t.y??0,o),u=oo(t.left??t.x??0,r),d=oo(t.right??t.x??0,r);return{top:i,right:d,bottom:l,left:u,x:u+d,y:i+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Xw(t,r,o,i,l,u){const{x:d,y:p}=El(t,[r,o,i]),{x:y,y:g}=El({x:t.x+t.width,y:t.y+t.height},[r,o,i]),h=l-y,m=u-g;return{left:Math.floor(d),top:Math.floor(p),right:Math.floor(h),bottom:Math.floor(m)}}const jc=(t,r,o,i,l,u)=>{const d=Yw(u,r,o),p=(r-d.x)/t.width,y=(o-d.y)/t.height,g=Math.min(p,y),h=mo(g,i,l),m=t.x+t.width/2,x=t.y+t.height/2,w=r/2-m*h,S=o/2-x*h,j=Xw(t,w,S,h,r,o),k={left:Math.min(j.left-d.left,0),top:Math.min(j.top-d.top,0),right:Math.min(j.right-d.right,0),bottom:Math.min(j.bottom-d.bottom,0)};return{x:w-k.left+k.right,y:S-k.top+k.bottom,zoom:h}},Is=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function xo(t){return t!=null&&t!=="parent"}function Sn(t){var r,o;return{width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}}function mm(t){var r,o;return(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth)!==void 0&&(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight)!==void 0}function gm(t,r={width:0,height:0},o,i,l){const u={...t},d=i.get(o);if(d){const p=d.origin||l;u.x+=d.internals.positionAbsolute.x-(r.width??0)*p[0],u.y+=d.internals.positionAbsolute.y-(r.height??0)*p[1]}return u}function Op(t,r){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}function Qw(){let t,r;return{promise:new Promise((i,l)=>{t=i,r=l}),resolve:t,reject:r}}function Gw(t){return{...lm,...t||{}}}function xs(t,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:i,containerBounds:l}){const{x:u,y:d}=Xt(t),p=Ts({x:u-((l==null?void 0:l.left)??0),y:d-((l==null?void 0:l.top)??0)},i),{x:y,y:g}=o?Ds(p,r):p;return{xSnapped:y,ySnapped:g,...p}}const Ec=t=>({width:t.offsetWidth,height:t.offsetHeight}),xm=t=>{var r;return((r=t==null?void 0:t.getRootNode)==null?void 0:r.call(t))||(window==null?void 0:window.document)},Kw=["INPUT","SELECT","TEXTAREA"];function ym(t){var i,l;const r=((l=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:l[0])||t.target;return(r==null?void 0:r.nodeType)!==1?!1:Kw.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const vm=t=>"clientX"in t,Xt=(t,r)=>{var u,d;const o=vm(t),i=o?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,l=o?t.clientY:(d=t.touches)==null?void 0:d[0].clientY;return{x:i-((r==null?void 0:r.left)??0),y:l-((r==null?void 0:r.top)??0)}},Ap=(t,r,o,i,l)=>{const u=r.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(d=>{const p=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:l,position:d.getAttribute("data-handlepos"),x:(p.left-o.left)/i,y:(p.top-o.top)/i,...Ec(d)}})};function wm({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:p}){const y=t*.125+l*.375+d*.375+o*.125,g=r*.125+u*.375+p*.375+i*.125,h=Math.abs(y-t),m=Math.abs(g-r);return[y,g,h,m]}function ol(t,r){return t>=0?.5*t:r*25*Math.sqrt(-t)}function Lp({pos:t,x1:r,y1:o,x2:i,y2:l,c:u}){switch(t){case ye.Left:return[r-ol(r-i,u),o];case ye.Right:return[r+ol(i-r,u),o];case ye.Top:return[r,o-ol(o-l,u)];case ye.Bottom:return[r,o+ol(l-o,u)]}}function Ll({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top,curvature:d=.25}){const[p,y]=Lp({pos:o,x1:t,y1:r,x2:i,y2:l,c:d}),[g,h]=Lp({pos:u,x1:i,y1:l,x2:t,y2:r,c:d}),[m,x,w,S]=wm({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:p,sourceControlY:y,targetControlX:g,targetControlY:h});return[`M${t},${r} C${p},${y} ${g},${h} ${i},${l}`,m,x,w,S]}function Sm({sourceX:t,sourceY:r,targetX:o,targetY:i}){const l=Math.abs(o-t)/2,u=o<t?o+l:o-l,d=Math.abs(i-r)/2,p=i<r?i+d:i-d;return[u,p,l,d]}function qw({sourceNode:t,targetNode:r,selected:o=!1,zIndex:i=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const d=l&&o?i+1e3:i,p=Math.max(t.parentId||l&&t.selected?t.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return d+p}function Zw({sourceNode:t,targetNode:r,width:o,height:i,transform:l}){const u=Ol(jl(t),jl(r));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:i/l[2]};return Cs(d,Al(u))>0}const Jw=({source:t,sourceHandle:r,target:o,targetHandle:i})=>`xy-edge__${t}${r||""}-${o}${i||""}`,e1=(t,r)=>r.some(o=>o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)),t1=(t,r,o={})=>{if(!t.source||!t.target)return r;const i=o.getEdgeId||Jw;let l;return cm(t)?l={...t}:l={...t,id:i(t)},e1(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Nm({sourceX:t,sourceY:r,targetX:o,targetY:i}){const[l,u,d,p]=Sm({sourceX:t,sourceY:r,targetX:o,targetY:i});return[`M ${t},${r}L ${o},${i}`,l,u,d,p]}const $p={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},n1=({source:t,sourcePosition:r=ye.Bottom,target:o})=>r===ye.Left||r===ye.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1},zp=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function r1({source:t,sourcePosition:r=ye.Bottom,target:o,targetPosition:i=ye.Top,center:l,offset:u,stepPosition:d}){const p=$p[r],y=$p[i],g={x:t.x+p.x*u,y:t.y+p.y*u},h={x:o.x+y.x*u,y:o.y+y.y*u},m=n1({source:g,sourcePosition:r,target:h}),x=m.x!==0?"x":"y",w=m[x];let S=[],j,k;const I={x:0,y:0},D={x:0,y:0},[,,C,P]=Sm({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(p[x]*y[x]===-1){x==="x"?(j=l.x??g.x+(h.x-g.x)*d,k=l.y??(g.y+h.y)/2):(j=l.x??(g.x+h.x)/2,k=l.y??g.y+(h.y-g.y)*d);const V=[{x:j,y:g.y},{x:j,y:h.y}],W=[{x:g.x,y:k},{x:h.x,y:k}];p[x]===w?S=x==="x"?V:W:S=x==="x"?W:V}else{const V=[{x:g.x,y:h.y}],W=[{x:h.x,y:g.y}];if(x==="x"?S=p.x===w?W:V:S=p.y===w?V:W,r===i){const X=Math.abs(t[x]-o[x]);if(X<=u){const Q=Math.min(u-1,u-X);p[x]===w?I[x]=(g[x]>t[x]?-1:1)*Q:D[x]=(h[x]>o[x]?-1:1)*Q}}if(r!==i){const X=x==="x"?"y":"x",Q=p[x]===y[X],O=g[X]>h[X],R=g[X]<h[X];(p[x]===1&&(!Q&&O||Q&&R)||p[x]!==1&&(!Q&&R||Q&&O))&&(S=x==="x"?V:W)}const K={x:g.x+I.x,y:g.y+I.y},q={x:h.x+D.x,y:h.y+D.y},H=Math.max(Math.abs(K.x-S[0].x),Math.abs(q.x-S[0].x)),$=Math.max(Math.abs(K.y-S[0].y),Math.abs(q.y-S[0].y));H>=$?(j=(K.x+q.x)/2,k=S[0].y):(j=S[0].x,k=(K.y+q.y)/2)}return[[t,{x:g.x+I.x,y:g.y+I.y},...S,{x:h.x+D.x,y:h.y+D.y},o],j,k,C,P]}function o1(t,r,o,i){const l=Math.min(zp(t,r)/2,zp(r,o)/2,i),{x:u,y:d}=r;if(t.x===u&&u===o.x||t.y===d&&d===o.y)return`L${u} ${d}`;if(t.y===d){const g=t.x<o.x?-1:1,h=t.y<o.y?1:-1;return`L ${u+l*g},${d}Q ${u},${d} ${u},${d+l*h}`}const p=t.x<o.x?1:-1,y=t.y<o.y?-1:1;return`L ${u},${d+l*y}Q ${u},${d} ${u+l*p},${d}`}function ac({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top,borderRadius:d=5,centerX:p,centerY:y,offset:g=20,stepPosition:h=.5}){const[m,x,w,S,j]=r1({source:{x:t,y:r},sourcePosition:o,target:{x:i,y:l},targetPosition:u,center:{x:p,y},offset:g,stepPosition:h});return[m.reduce((I,D,C)=>{let P="";return C>0&&C<m.length-1?P=o1(m[C-1],D,m[C+1],d):P=`${C===0?"M":"L"}${D.x} ${D.y}`,I+=P,I},""),x,w,S,j]}function Rp(t){var r;return t&&!!(t.internals.handleBounds||(r=t.handles)!=null&&r.length)&&!!(t.measured.width||t.width||t.initialWidth)}function s1(t){var m;const{sourceNode:r,targetNode:o}=t;if(!Rp(r)||!Rp(o))return null;const i=r.internals.handleBounds||Fp(r.handles),l=o.internals.handleBounds||Fp(o.handles),u=Hp((i==null?void 0:i.source)??[],t.sourceHandle),d=Hp(t.connectionMode===ho.Strict?(l==null?void 0:l.target)??[]:((l==null?void 0:l.target)??[]).concat((l==null?void 0:l.source)??[]),t.targetHandle);if(!u||!d)return(m=t.onError)==null||m.call(t,"008",rn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const p=(u==null?void 0:u.position)||ye.Bottom,y=(d==null?void 0:d.position)||ye.Top,g=Nr(r,u,p),h=Nr(o,d,y);return{sourceX:g.x,sourceY:g.y,targetX:h.x,targetY:h.y,sourcePosition:p,targetPosition:y}}function Fp(t){if(!t)return null;const r=[],o=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?r.push(i):i.type==="target"&&o.push(i);return{source:r,target:o}}function Nr(t,r,o=ye.Left,i=!1){const l=((r==null?void 0:r.x)??0)+t.internals.positionAbsolute.x,u=((r==null?void 0:r.y)??0)+t.internals.positionAbsolute.y,{width:d,height:p}=r??Sn(t);if(i)return{x:l+d/2,y:u+p/2};switch((r==null?void 0:r.position)??o){case ye.Top:return{x:l+d/2,y:u};case ye.Right:return{x:l+d,y:u+p/2};case ye.Bottom:return{x:l+d/2,y:u+p};case ye.Left:return{x:l,y:u+p/2}}}function Hp(t,r){return t&&(r?t.find(o=>o.id===r):t[0])||null}function uc(t,r){return t?typeof t=="string"?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function i1(t,{id:r,defaultColor:o,defaultMarkerStart:i,defaultMarkerEnd:l}){const u=new Set;return t.reduce((d,p)=>([p.markerStart||i,p.markerEnd||l].forEach(y=>{if(y&&typeof y=="object"){const g=uc(y,r);u.has(g)||(d.push({id:g,color:y.color||o,...y}),u.add(g))}}),d),[]).sort((d,p)=>d.id.localeCompare(p.id))}const km=1e3,l1=10,_c={nodeOrigin:[0,0],nodeExtent:Ns,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},a1={..._c,checkEquality:!0};function Mc(t,r){const o={...t};for(const i in r)r[i]!==void 0&&(o[i]=r[i]);return o}function u1(t,r,o){const i=Mc(_c,o);for(const l of t.values())if(l.parentId)Pc(l,t,r,i);else{const u=bs(l,i.nodeOrigin),d=xo(l.extent)?l.extent:i.nodeExtent,p=Sr(u,d,Sn(l));l.internals.positionAbsolute=p}}function c1(t,r){if(!t.handles)return t.measured?r==null?void 0:r.internals.handleBounds:void 0;const o=[],i=[];for(const l of t.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(u):l.type==="target"&&i.push(u)}return{source:o,target:i}}function bc(t){return t==="manual"}function cc(t,r,o,i={}){var g,h;const l=Mc(a1,i),u={i:0},d=new Map(r),p=l!=null&&l.elevateNodesOnSelect&&!bc(l.zIndexMode)?km:0;let y=t.length>0;r.clear(),o.clear();for(const m of t){let x=d.get(m.id);if(l.checkEquality&&m===(x==null?void 0:x.internals.userNode))r.set(m.id,x);else{const w=bs(m,l.nodeOrigin),S=xo(m.extent)?m.extent:l.nodeExtent,j=Sr(w,S,Sn(m));x={...l.defaults,...m,measured:{width:(g=m.measured)==null?void 0:g.width,height:(h=m.measured)==null?void 0:h.height},internals:{positionAbsolute:j,handleBounds:c1(m,x),z:Cm(m,p,l.zIndexMode),userNode:m}},r.set(m.id,x)}(x.measured===void 0||x.measured.width===void 0||x.measured.height===void 0)&&!x.hidden&&(y=!1),m.parentId&&Pc(x,r,o,i,u)}return y}function d1(t,r){if(!t.parentId)return;const o=r.get(t.parentId);o?o.set(t.id,t):r.set(t.parentId,new Map([[t.id,t]]))}function Pc(t,r,o,i,l){const{elevateNodesOnSelect:u,nodeOrigin:d,nodeExtent:p,zIndexMode:y}=Mc(_c,i),g=t.parentId,h=r.get(g);if(!h){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}d1(t,o),l&&!h.parentId&&h.internals.rootParentIndex===void 0&&y==="auto"&&(h.internals.rootParentIndex=++l.i,h.internals.z=h.internals.z+l.i*l1),l&&h.internals.rootParentIndex!==void 0&&(l.i=h.internals.rootParentIndex);const m=u&&!bc(y)?km:0,{x,y:w,z:S}=f1(t,h,d,p,m,y),{positionAbsolute:j}=t.internals,k=x!==j.x||w!==j.y;(k||S!==t.internals.z)&&r.set(t.id,{...t,internals:{...t.internals,positionAbsolute:k?{x,y:w}:j,z:S}})}function Cm(t,r,o){const i=Yt(t.zIndex)?t.zIndex:0;return bc(o)?i:i+(t.selected?r:0)}function f1(t,r,o,i,l,u){const{x:d,y:p}=r.internals.positionAbsolute,y=Sn(t),g=bs(t,o),h=xo(t.extent)?Sr(g,t.extent,y):g;let m=Sr({x:d+h.x,y:p+h.y},i,y);t.extent==="parent"&&(m=fm(m,y,r));const x=Cm(t,l,u),w=r.internals.z??0;return{x:m.x,y:m.y,z:w>=x?w+1:x}}function Dc(t,r,o,i=[0,0]){var d;const l=[],u=new Map;for(const p of t){const y=r.get(p.parentId);if(!y)continue;const g=((d=u.get(p.parentId))==null?void 0:d.expandedRect)??go(y),h=hm(g,p.rect);u.set(p.parentId,{expandedRect:h,parent:y})}return u.size>0&&u.forEach(({expandedRect:p,parent:y},g)=>{var C;const h=y.internals.positionAbsolute,m=Sn(y),x=y.origin??i,w=p.x<h.x?Math.round(Math.abs(h.x-p.x)):0,S=p.y<h.y?Math.round(Math.abs(h.y-p.y)):0,j=Math.max(m.width,Math.round(p.width)),k=Math.max(m.height,Math.round(p.height)),I=(j-m.width)*x[0],D=(k-m.height)*x[1];(w>0||S>0||I||D)&&(l.push({id:g,type:"position",position:{x:y.position.x-w+I,y:y.position.y-S+D}}),(C=o.get(g))==null||C.forEach(P=>{t.some(A=>A.id===P.id)||l.push({id:P.id,type:"position",position:{x:P.position.x+w,y:P.position.y+S}})})),(m.width<p.width||m.height<p.height||w||S)&&l.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:j+(w?x[0]*w-I:0),height:k+(S?x[1]*S-D:0)}})}),l}function p1(t,r,o,i,l,u,d){const p=i==null?void 0:i.querySelector(".xyflow__viewport");let y=!1;if(!p)return{changes:[],updatedInternals:y};const g=[],h=window.getComputedStyle(p),{m22:m}=new window.DOMMatrixReadOnly(h.transform),x=[];for(const w of t.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),y=!0;continue}const j=Ec(w.nodeElement),k=S.measured.width!==j.width||S.measured.height!==j.height;if(!!(j.width&&j.height&&(k||!S.internals.handleBounds||w.force))){const D=w.nodeElement.getBoundingClientRect(),C=xo(S.extent)?S.extent:u;let{positionAbsolute:P}=S.internals;S.parentId&&S.extent==="parent"?P=fm(P,j,r.get(S.parentId)):C&&(P=Sr(P,C,j));const A={...S,measured:j,internals:{...S.internals,positionAbsolute:P,handleBounds:{source:Ap("source",w.nodeElement,D,m,S.id),target:Ap("target",w.nodeElement,D,m,S.id)}}};r.set(S.id,A),S.parentId&&Pc(A,r,o,{nodeOrigin:l,zIndexMode:d}),y=!0,k&&(g.push({id:S.id,type:"dimensions",dimensions:j}),S.expandParent&&S.parentId&&x.push({id:S.id,parentId:S.parentId,rect:go(A,l)}))}}if(x.length>0){const w=Dc(x,r,o,l);g.push(...w)}return{changes:g,updatedInternals:y}}async function h1({delta:t,panZoom:r,transform:o,translateExtent:i,width:l,height:u}){if(!r||!t.x&&!t.y)return Promise.resolve(!1);const d=await r.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[l,u]],i),p=!!d&&(d.x!==o[0]||d.y!==o[1]||d.k!==o[2]);return Promise.resolve(p)}function Vp(t,r,o,i,l,u){let d=l;const p=i.get(d)||new Map;i.set(d,p.set(o,r)),d=`${l}-${t}`;const y=i.get(d)||new Map;if(i.set(d,y.set(o,r)),u){d=`${l}-${t}-${u}`;const g=i.get(d)||new Map;i.set(d,g.set(o,r))}}function Im(t,r,o){t.clear(),r.clear();for(const i of o){const{source:l,target:u,sourceHandle:d=null,targetHandle:p=null}=i,y={edgeId:i.id,source:l,target:u,sourceHandle:d,targetHandle:p},g=`${l}-${d}--${u}-${p}`,h=`${u}-${p}--${l}-${d}`;Vp("source",y,h,t,l,d),Vp("target",y,g,t,u,p),r.set(i.id,i)}}function jm(t,r){if(!t.parentId)return!1;const o=r.get(t.parentId);return o?o.selected?!0:jm(o,r):!1}function Bp(t,r,o){var l;let i=t;do{if((l=i==null?void 0:i.matches)!=null&&l.call(i,r))return!0;if(i===o)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function m1(t,r,o,i){const l=new Map;for(const[u,d]of t)if((d.selected||d.id===i)&&(!d.parentId||!jm(d,t))&&(d.draggable||r&&typeof d.draggable>"u")){const p=t.get(u);p&&l.set(u,{id:u,position:p.position||{x:0,y:0},distance:{x:o.x-p.internals.positionAbsolute.x,y:o.y-p.internals.positionAbsolute.y},extent:p.extent,parentId:p.parentId,origin:p.origin,expandParent:p.expandParent,internals:{positionAbsolute:p.internals.positionAbsolute||{x:0,y:0}},measured:{width:p.measured.width??0,height:p.measured.height??0}})}return l}function Wu({nodeId:t,dragItems:r,nodeLookup:o,dragging:i=!0}){var d,p,y;const l=[];for(const[g,h]of r){const m=(d=o.get(g))==null?void 0:d.internals.userNode;m&&l.push({...m,position:h.position,dragging:i})}if(!t)return[l[0],l];const u=(p=o.get(t))==null?void 0:p.internals.userNode;return[u?{...u,position:((y=r.get(t))==null?void 0:y.position)||u.position,dragging:i}:l[0],l]}function g1({dragItems:t,snapGrid:r,x:o,y:i}){const l=t.values().next().value;if(!l)return null;const u={x:o-l.distance.x,y:i-l.distance.y},d=Ds(u,r);return{x:d.x-u.x,y:d.y-u.y}}function x1({onNodeMouseDown:t,getStoreItems:r,onDragStart:o,onDrag:i,onDragStop:l}){let u={x:null,y:null},d=0,p=new Map,y=!1,g={x:0,y:0},h=null,m=!1,x=null,w=!1,S=!1,j=null;function k({noDragClassName:D,handleSelector:C,domNode:P,isSelectable:A,nodeId:V,nodeClickDistance:W=0}){x=Ct(P);function K({x:X,y:Q}){const{nodeLookup:O,nodeExtent:R,snapGrid:z,snapToGrid:M,nodeOrigin:b,onNodeDrag:N,onSelectionDrag:L,onError:E,updateNodePositions:T}=r();u={x:X,y:Q};let Z=!1;const G=p.size>1,ne=G&&R?lc(Ps(p)):null,oe=G&&M?g1({dragItems:p,snapGrid:z,x:X,y:Q}):null;for(const[ae,re]of p){if(!O.has(ae))continue;let ue={x:X-re.distance.x,y:Q-re.distance.y};M&&(ue=oe?{x:Math.round(ue.x+oe.x),y:Math.round(ue.y+oe.y)}:Ds(ue,z));let ve=null;if(G&&R&&!re.extent&&ne){const{positionAbsolute:we}=re.internals,Ee=we.x-ne.x+R[0][0],Te=we.x+re.measured.width-ne.x2+R[1][0],_e=we.y-ne.y+R[0][1],Xe=we.y+re.measured.height-ne.y2+R[1][1];ve=[[Ee,_e],[Te,Xe]]}const{position:Ce,positionAbsolute:ke}=dm({nodeId:ae,nextPosition:ue,nodeLookup:O,nodeExtent:ve||R,nodeOrigin:b,onError:E});Z=Z||re.position.x!==Ce.x||re.position.y!==Ce.y,re.position=Ce,re.internals.positionAbsolute=ke}if(S=S||Z,!!Z&&(T(p,!0),j&&(i||N||!V&&L))){const[ae,re]=Wu({nodeId:V,dragItems:p,nodeLookup:O});i==null||i(j,p,ae,re),N==null||N(j,ae,re),V||L==null||L(j,re)}}async function q(){if(!h)return;const{transform:X,panBy:Q,autoPanSpeed:O,autoPanOnNodeDrag:R}=r();if(!R){y=!1,cancelAnimationFrame(d);return}const[z,M]=pm(g,h,O);(z!==0||M!==0)&&(u.x=(u.x??0)-z/X[2],u.y=(u.y??0)-M/X[2],await Q({x:z,y:M})&&K(u)),d=requestAnimationFrame(q)}function H(X){var G;const{nodeLookup:Q,multiSelectionActive:O,nodesDraggable:R,transform:z,snapGrid:M,snapToGrid:b,selectNodesOnDrag:N,onNodeDragStart:L,onSelectionDragStart:E,unselectNodesAndEdges:T}=r();m=!0,(!N||!A)&&!O&&V&&((G=Q.get(V))!=null&&G.selected||T()),A&&N&&V&&(t==null||t(V));const Z=xs(X.sourceEvent,{transform:z,snapGrid:M,snapToGrid:b,containerBounds:h});if(u=Z,p=m1(Q,R,Z,V),p.size>0&&(o||L||!V&&E)){const[ne,oe]=Wu({nodeId:V,dragItems:p,nodeLookup:Q});o==null||o(X.sourceEvent,p,ne,oe),L==null||L(X.sourceEvent,ne,oe),V||E==null||E(X.sourceEvent,oe)}}const $=Wh().clickDistance(W).on("start",X=>{const{domNode:Q,nodeDragThreshold:O,transform:R,snapGrid:z,snapToGrid:M}=r();h=(Q==null?void 0:Q.getBoundingClientRect())||null,w=!1,S=!1,j=X.sourceEvent,O===0&&H(X),u=xs(X.sourceEvent,{transform:R,snapGrid:z,snapToGrid:M,containerBounds:h}),g=Xt(X.sourceEvent,h)}).on("drag",X=>{const{autoPanOnNodeDrag:Q,transform:O,snapGrid:R,snapToGrid:z,nodeDragThreshold:M,nodeLookup:b}=r(),N=xs(X.sourceEvent,{transform:O,snapGrid:R,snapToGrid:z,containerBounds:h});if(j=X.sourceEvent,(X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1||V&&!b.has(V))&&(w=!0),!w){if(!y&&Q&&m&&(y=!0,q()),!m){const L=Xt(X.sourceEvent,h),E=L.x-g.x,T=L.y-g.y;Math.sqrt(E*E+T*T)>M&&H(X)}(u.x!==N.xSnapped||u.y!==N.ySnapped)&&p&&m&&(g=Xt(X.sourceEvent,h),K(N))}}).on("end",X=>{if(!(!m||w)&&(y=!1,m=!1,cancelAnimationFrame(d),p.size>0)){const{nodeLookup:Q,updateNodePositions:O,onNodeDragStop:R,onSelectionDragStop:z}=r();if(S&&(O(p,!1),S=!1),l||R||!V&&z){const[M,b]=Wu({nodeId:V,dragItems:p,nodeLookup:Q,dragging:!1});l==null||l(X.sourceEvent,p,M,b),R==null||R(X.sourceEvent,M,b),V||z==null||z(X.sourceEvent,b)}}}).filter(X=>{const Q=X.target;return!X.button&&(!D||!Bp(Q,`.${D}`,P))&&(!C||Bp(Q,C,P))});x.call($)}function I(){x==null||x.on(".drag",null)}return{update:k,destroy:I}}function y1(t,r,o){const i=[],l={x:t.x-o,y:t.y-o,width:o*2,height:o*2};for(const u of r.values())Cs(l,go(u))>0&&i.push(u);return i}const v1=250;function w1(t,r,o,i){var p,y;let l=[],u=1/0;const d=y1(t,o,r+v1);for(const g of d){const h=[...((p=g.internals.handleBounds)==null?void 0:p.source)??[],...((y=g.internals.handleBounds)==null?void 0:y.target)??[]];for(const m of h){if(i.nodeId===m.nodeId&&i.type===m.type&&i.id===m.id)continue;const{x,y:w}=Nr(g,m,m.position,!0),S=Math.sqrt(Math.pow(x-t.x,2)+Math.pow(w-t.y,2));S>r||(S<u?(l=[{...m,x,y:w}],u=S):S===u&&l.push({...m,x,y:w}))}}if(!l.length)return null;if(l.length>1){const g=i.type==="source"?"target":"source";return l.find(h=>h.type===g)??l[0]}return l[0]}function Em(t,r,o,i,l,u=!1){var g,h,m;const d=i.get(t);if(!d)return null;const p=l==="strict"?(g=d.internals.handleBounds)==null?void 0:g[r]:[...((h=d.internals.handleBounds)==null?void 0:h.source)??[],...((m=d.internals.handleBounds)==null?void 0:m.target)??[]],y=(o?p==null?void 0:p.find(x=>x.id===o):p==null?void 0:p[0])??null;return y&&u?{...y,...Nr(d,y,y.position,!0)}:y}function _m(t,r){return t||(r!=null&&r.classList.contains("target")?"target":r!=null&&r.classList.contains("source")?"source":null)}function S1(t,r){let o=null;return r?o=!0:t&&!r&&(o=!1),o}const Mm=()=>!0;function N1(t,{connectionMode:r,connectionRadius:o,handleId:i,nodeId:l,edgeUpdaterType:u,isTarget:d,domNode:p,nodeLookup:y,lib:g,autoPanOnConnect:h,flowId:m,panBy:x,cancelConnection:w,onConnectStart:S,onConnect:j,onConnectEnd:k,isValidConnection:I=Mm,onReconnectEnd:D,updateConnection:C,getTransform:P,getFromHandle:A,autoPanSpeed:V,dragThreshold:W=1,handleDomNode:K}){const q=xm(t.target);let H=0,$;const{x:X,y:Q}=Xt(t),O=_m(u,K),R=p==null?void 0:p.getBoundingClientRect();let z=!1;if(!R||!O)return;const M=Em(l,O,i,y,r);if(!M)return;let b=Xt(t,R),N=!1,L=null,E=!1,T=null;function Z(){if(!h||!R)return;const[Ce,ke]=pm(b,R,V);x({x:Ce,y:ke}),H=requestAnimationFrame(Z)}const G={...M,nodeId:l,type:O,position:M.position},ne=y.get(l);let ae={inProgress:!0,isValid:null,from:Nr(ne,G,ye.Left,!0),fromHandle:G,fromPosition:G.position,fromNode:ne,to:b,toHandle:null,toPosition:Pp[G.position],toNode:null,pointer:b};function re(){z=!0,C(ae),S==null||S(t,{nodeId:l,handleId:i,handleType:O})}W===0&&re();function ue(Ce){if(!z){const{x:Xe,y:Lt}=Xt(Ce),xt=Xe-X,yt=Lt-Q;if(!(xt*xt+yt*yt>W*W))return;re()}if(!A()||!G){ve(Ce);return}const ke=P();b=Xt(Ce,R),$=w1(Ts(b,ke,!1,[1,1]),o,y,G),N||(Z(),N=!0);const we=bm(Ce,{handle:$,connectionMode:r,fromNodeId:l,fromHandleId:i,fromType:d?"target":"source",isValidConnection:I,doc:q,lib:g,flowId:m,nodeLookup:y});T=we.handleDomNode,L=we.connection,E=S1(!!$,we.isValid);const Ee=y.get(l),Te=Ee?Nr(Ee,G,ye.Left,!0):ae.from,_e={...ae,from:Te,isValid:E,to:we.toHandle&&E?El({x:we.toHandle.x,y:we.toHandle.y},ke):b,toHandle:we.toHandle,toPosition:E&&we.toHandle?we.toHandle.position:Pp[G.position],toNode:we.toHandle?y.get(we.toHandle.nodeId):null,pointer:b};C(_e),ae=_e}function ve(Ce){if(!("touches"in Ce&&Ce.touches.length>0)){if(z){($||T)&&L&&E&&(j==null||j(L));const{inProgress:ke,...we}=ae,Ee={...we,toPosition:ae.toHandle?ae.toPosition:null};k==null||k(Ce,Ee),u&&(D==null||D(Ce,Ee))}w(),cancelAnimationFrame(H),N=!1,E=!1,L=null,T=null,q.removeEventListener("mousemove",ue),q.removeEventListener("mouseup",ve),q.removeEventListener("touchmove",ue),q.removeEventListener("touchend",ve)}}q.addEventListener("mousemove",ue),q.addEventListener("mouseup",ve),q.addEventListener("touchmove",ue),q.addEventListener("touchend",ve)}function bm(t,{handle:r,connectionMode:o,fromNodeId:i,fromHandleId:l,fromType:u,doc:d,lib:p,flowId:y,isValidConnection:g=Mm,nodeLookup:h}){const m=u==="target",x=r?d.querySelector(`.${p}-flow__handle[data-id="${y}-${r==null?void 0:r.nodeId}-${r==null?void 0:r.id}-${r==null?void 0:r.type}"]`):null,{x:w,y:S}=Xt(t),j=d.elementFromPoint(w,S),k=j!=null&&j.classList.contains(`${p}-flow__handle`)?j:x,I={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const D=_m(void 0,k),C=k.getAttribute("data-nodeid"),P=k.getAttribute("data-handleid"),A=k.classList.contains("connectable"),V=k.classList.contains("connectableend");if(!C||!D)return I;const W={source:m?C:i,sourceHandle:m?P:l,target:m?i:C,targetHandle:m?l:P};I.connection=W;const q=A&&V&&(o===ho.Strict?m&&D==="source"||!m&&D==="target":C!==i||P!==l);I.isValid=q&&g(W),I.toHandle=Em(C,D,P,h,o,!0)}return I}const dc={onPointerDown:N1,isValid:bm};function k1({domNode:t,panZoom:r,getTransform:o,getViewScale:i}){const l=Ct(t);function u({translateExtent:p,width:y,height:g,zoomStep:h=1,pannable:m=!0,zoomable:x=!0,inversePan:w=!1}){const S=C=>{if(C.sourceEvent.type!=="wheel"||!r)return;const P=o(),A=C.sourceEvent.ctrlKey&&Is()?10:1,V=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*h,W=P[2]*Math.pow(2,V*A);r.scaleTo(W)};let j=[0,0];const k=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(j=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},I=C=>{const P=o();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!r)return;const A=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],V=[A[0]-j[0],A[1]-j[1]];j=A;const W=i()*Math.max(P[2],Math.log(P[2]))*(w?-1:1),K={x:P[0]-V[0]*W,y:P[1]-V[1]*W},q=[[0,0],[y,g]];r.setViewportConstrained({x:K.x,y:K.y,zoom:P[2]},q,p)},D=sm().on("start",k).on("zoom",m?I:null).on("zoom.wheel",x?S:null);l.call(D,{})}function d(){l.on("zoom",null)}return{update:u,destroy:d,pointer:Bt}}const $l=t=>({x:t.x,y:t.y,zoom:t.k}),Uu=({x:t,y:r,zoom:o})=>Tl.translate(t,r).scale(o),lo=(t,r)=>t.target.closest(`.${r}`),Pm=(t,r)=>r===2&&Array.isArray(t)&&t.includes(2),C1=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Yu=(t,r=0,o=C1,i=()=>{})=>{const l=typeof r=="number"&&r>0;return l||i(),l?t.transition().duration(r).ease(o).on("end",i):t},Dm=t=>{const r=t.ctrlKey&&Is()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*r};function I1({zoomPanValues:t,noWheelClassName:r,d3Selection:o,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:d,onPanZoomStart:p,onPanZoom:y,onPanZoomEnd:g}){return h=>{if(lo(h,r))return h.ctrlKey&&h.preventDefault(),!1;h.preventDefault(),h.stopImmediatePropagation();const m=o.property("__zoom").k||1;if(h.ctrlKey&&d){const k=Bt(h),I=Dm(h),D=m*Math.pow(2,I);i.scaleTo(o,D,k,h);return}const x=h.deltaMode===1?20:1;let w=l===yr.Vertical?0:h.deltaX*x,S=l===yr.Horizontal?0:h.deltaY*x;!Is()&&h.shiftKey&&l!==yr.Vertical&&(w=h.deltaY*x,S=0),i.translateBy(o,-(w/m)*u,-(S/m)*u,{internal:!0});const j=$l(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(y==null||y(h,j),t.panScrollTimeout=setTimeout(()=>{g==null||g(h,j),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,p==null||p(h,j))}}function j1({noWheelClassName:t,preventScrolling:r,d3ZoomHandler:o}){return function(i,l){const u=i.type==="wheel",d=!r&&u&&!i.ctrlKey,p=lo(i,t);if(i.ctrlKey&&u&&p&&i.preventDefault(),d||p)return null;i.preventDefault(),o.call(this,i,l)}}function E1({zoomPanValues:t,onDraggingChange:r,onPanZoomStart:o}){return i=>{var u,d,p;if((u=i.sourceEvent)!=null&&u.internal)return;const l=$l(i.transform);t.mouseButton=((d=i.sourceEvent)==null?void 0:d.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=l,((p=i.sourceEvent)==null?void 0:p.type)==="mousedown"&&r(!0),o&&(o==null||o(i.sourceEvent,l))}}function _1({zoomPanValues:t,panOnDrag:r,onPaneContextMenu:o,onTransformChange:i,onPanZoom:l}){return u=>{var d,p;t.usedRightMouseButton=!!(o&&Pm(r,t.mouseButton??0)),(d=u.sourceEvent)!=null&&d.sync||i([u.transform.x,u.transform.y,u.transform.k]),l&&!((p=u.sourceEvent)!=null&&p.internal)&&(l==null||l(u.sourceEvent,$l(u.transform)))}}function M1({zoomPanValues:t,panOnDrag:r,panOnScroll:o,onDraggingChange:i,onPanZoomEnd:l,onPaneContextMenu:u}){return d=>{var p;if(!((p=d.sourceEvent)!=null&&p.internal)&&(t.isZoomingOrPanning=!1,u&&Pm(r,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&u(d.sourceEvent),t.usedRightMouseButton=!1,i(!1),l)){const y=$l(d.transform);t.prevViewport=y,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l==null||l(d.sourceEvent,y)},o?150:0)}}}function b1({zoomActivationKeyPressed:t,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:i,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:d,noWheelClassName:p,noPanClassName:y,lib:g,connectionInProgress:h}){return m=>{var k;const x=t||r,w=o&&m.ctrlKey,S=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(lo(m,`${g}-flow__node`)||lo(m,`${g}-flow__edge`)))return!0;if(!i&&!x&&!l&&!u&&!o||d||h&&!S||lo(m,p)&&S||lo(m,y)&&(!S||l&&S&&!t)||!o&&m.ctrlKey&&S)return!1;if(!o&&m.type==="touchstart"&&((k=m.touches)==null?void 0:k.length)>1)return m.preventDefault(),!1;if(!x&&!l&&!w&&S||!i&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(i)&&!i.includes(m.button)&&m.type==="mousedown")return!1;const j=Array.isArray(i)&&i.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||S)&&j}}function P1({domNode:t,minZoom:r,maxZoom:o,translateExtent:i,viewport:l,onPanZoom:u,onPanZoomStart:d,onPanZoomEnd:p,onDraggingChange:y}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),m=sm().scaleExtent([r,o]).translateExtent(i),x=Ct(t).call(m);D({x:l.x,y:l.y,zoom:mo(l.zoom,r,o)},[[0,0],[h.width,h.height]],i);const w=x.on("wheel.zoom"),S=x.on("dblclick.zoom");m.wheelDelta(Dm);function j($,X){return x?new Promise(Q=>{m==null||m.interpolate((X==null?void 0:X.interpolate)==="linear"?gs:pl).transform(Yu(x,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>Q(!0)),$)}):Promise.resolve(!1)}function k({noWheelClassName:$,noPanClassName:X,onPaneContextMenu:Q,userSelectionActive:O,panOnScroll:R,panOnDrag:z,panOnScrollMode:M,panOnScrollSpeed:b,preventScrolling:N,zoomOnPinch:L,zoomOnScroll:E,zoomOnDoubleClick:T,zoomActivationKeyPressed:Z,lib:G,onTransformChange:ne,connectionInProgress:oe,paneClickDistance:ae,selectionOnDrag:re}){O&&!g.isZoomingOrPanning&&I();const ue=R&&!Z&&!O;m.clickDistance(re?1/0:!Yt(ae)||ae<0?0:ae);const ve=ue?I1({zoomPanValues:g,noWheelClassName:$,d3Selection:x,d3Zoom:m,panOnScrollMode:M,panOnScrollSpeed:b,zoomOnPinch:L,onPanZoomStart:d,onPanZoom:u,onPanZoomEnd:p}):j1({noWheelClassName:$,preventScrolling:N,d3ZoomHandler:w});if(x.on("wheel.zoom",ve,{passive:!1}),!O){const ke=E1({zoomPanValues:g,onDraggingChange:y,onPanZoomStart:d});m.on("start",ke);const we=_1({zoomPanValues:g,panOnDrag:z,onPaneContextMenu:!!Q,onPanZoom:u,onTransformChange:ne});m.on("zoom",we);const Ee=M1({zoomPanValues:g,panOnDrag:z,panOnScroll:R,onPaneContextMenu:Q,onPanZoomEnd:p,onDraggingChange:y});m.on("end",Ee)}const Ce=b1({zoomActivationKeyPressed:Z,panOnDrag:z,zoomOnScroll:E,panOnScroll:R,zoomOnDoubleClick:T,zoomOnPinch:L,userSelectionActive:O,noPanClassName:X,noWheelClassName:$,lib:G,connectionInProgress:oe});m.filter(Ce),T?x.on("dblclick.zoom",S):x.on("dblclick.zoom",null)}function I(){m.on("zoom",null)}async function D($,X,Q){const O=Uu($),R=m==null?void 0:m.constrain()(O,X,Q);return R&&await j(R),new Promise(z=>z(R))}async function C($,X){const Q=Uu($);return await j(Q,X),new Promise(O=>O(Q))}function P($){if(x){const X=Uu($),Q=x.property("__zoom");(Q.k!==$.zoom||Q.x!==$.x||Q.y!==$.y)&&(m==null||m.transform(x,X,null,{sync:!0}))}}function A(){const $=x?om(x.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function V($,X){return x?new Promise(Q=>{m==null||m.interpolate((X==null?void 0:X.interpolate)==="linear"?gs:pl).scaleTo(Yu(x,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>Q(!0)),$)}):Promise.resolve(!1)}function W($,X){return x?new Promise(Q=>{m==null||m.interpolate((X==null?void 0:X.interpolate)==="linear"?gs:pl).scaleBy(Yu(x,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>Q(!0)),$)}):Promise.resolve(!1)}function K($){m==null||m.scaleExtent($)}function q($){m==null||m.translateExtent($)}function H($){const X=!Yt($)||$<0?0:$;m==null||m.clickDistance(X)}return{update:k,destroy:I,setViewport:C,setViewportConstrained:D,getViewport:A,scaleTo:V,scaleBy:W,setScaleExtent:K,setTranslateExtent:q,syncViewport:P,setClickDistance:H}}var kr;(function(t){t.Line="line",t.Handle="handle"})(kr||(kr={}));const D1=["top-left","top-right","bottom-left","bottom-right"],T1=["top","right","bottom","left"];function O1({width:t,prevWidth:r,height:o,prevHeight:i,affectsX:l,affectsY:u}){const d=t-r,p=o-i,y=[d>0?1:d<0?-1:0,p>0?1:p<0?-1:0];return d&&l&&(y[0]=y[0]*-1),p&&u&&(y[1]=y[1]*-1),y}function Wp(t){const r=t.includes("right")||t.includes("left"),o=t.includes("bottom")||t.includes("top"),i=t.includes("left"),l=t.includes("top");return{isHorizontal:r,isVertical:o,affectsX:i,affectsY:l}}function Wn(t,r){return Math.max(0,r-t)}function Un(t,r){return Math.max(0,t-r)}function sl(t,r,o){return Math.max(0,r-t,t-o)}function Up(t,r){return t?!r:r}function A1(t,r,o,i,l,u,d,p){let{affectsX:y,affectsY:g}=r;const{isHorizontal:h,isVertical:m}=r,x=h&&m,{xSnapped:w,ySnapped:S}=o,{minWidth:j,maxWidth:k,minHeight:I,maxHeight:D}=i,{x:C,y:P,width:A,height:V,aspectRatio:W}=t;let K=Math.floor(h?w-t.pointerX:0),q=Math.floor(m?S-t.pointerY:0);const H=A+(y?-K:K),$=V+(g?-q:q),X=-u[0]*A,Q=-u[1]*V;let O=sl(H,j,k),R=sl($,I,D);if(d){let b=0,N=0;y&&K<0?b=Wn(C+K+X,d[0][0]):!y&&K>0&&(b=Un(C+H+X,d[1][0])),g&&q<0?N=Wn(P+q+Q,d[0][1]):!g&&q>0&&(N=Un(P+$+Q,d[1][1])),O=Math.max(O,b),R=Math.max(R,N)}if(p){let b=0,N=0;y&&K>0?b=Un(C+K,p[0][0]):!y&&K<0&&(b=Wn(C+H,p[1][0])),g&&q>0?N=Un(P+q,p[0][1]):!g&&q<0&&(N=Wn(P+$,p[1][1])),O=Math.max(O,b),R=Math.max(R,N)}if(l){if(h){const b=sl(H/W,I,D)*W;if(O=Math.max(O,b),d){let N=0;!y&&!g||y&&!g&&x?N=Un(P+Q+H/W,d[1][1])*W:N=Wn(P+Q+(y?K:-K)/W,d[0][1])*W,O=Math.max(O,N)}if(p){let N=0;!y&&!g||y&&!g&&x?N=Wn(P+H/W,p[1][1])*W:N=Un(P+(y?K:-K)/W,p[0][1])*W,O=Math.max(O,N)}}if(m){const b=sl($*W,j,k)/W;if(R=Math.max(R,b),d){let N=0;!y&&!g||g&&!y&&x?N=Un(C+$*W+X,d[1][0])/W:N=Wn(C+(g?q:-q)*W+X,d[0][0])/W,R=Math.max(R,N)}if(p){let N=0;!y&&!g||g&&!y&&x?N=Wn(C+$*W,p[1][0])/W:N=Un(C+(g?q:-q)*W,p[0][0])/W,R=Math.max(R,N)}}}q=q+(q<0?R:-R),K=K+(K<0?O:-O),l&&(x?H>$*W?q=(Up(y,g)?-K:K)/W:K=(Up(y,g)?-q:q)*W:h?(q=K/W,g=y):(K=q*W,y=g));const z=y?C+K:C,M=g?P+q:P;return{width:A+(y?-K:K),height:V+(g?-q:q),x:u[0]*K*(y?-1:1)+z,y:u[1]*q*(g?-1:1)+M}}const Tm={width:0,height:0,x:0,y:0},L1={...Tm,pointerX:0,pointerY:0,aspectRatio:1};function $1(t){return[[0,0],[t.measured.width,t.measured.height]]}function z1(t,r,o){const i=r.position.x+t.position.x,l=r.position.y+t.position.y,u=t.measured.width??0,d=t.measured.height??0,p=o[0]*u,y=o[1]*d;return[[i-p,l-y],[i+u-p,l+d-y]]}function R1({domNode:t,nodeId:r,getStoreItems:o,onChange:i,onEnd:l}){const u=Ct(t);let d={controlDirection:Wp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function p({controlPosition:g,boundaries:h,keepAspectRatio:m,resizeDirection:x,onResizeStart:w,onResize:S,onResizeEnd:j,shouldResize:k}){let I={...Tm},D={...L1};d={boundaries:h,resizeDirection:x,keepAspectRatio:m,controlDirection:Wp(g)};let C,P=null,A=[],V,W,K,q=!1;const H=Wh().on("start",$=>{const{nodeLookup:X,transform:Q,snapGrid:O,snapToGrid:R,nodeOrigin:z,paneDomNode:M}=o();if(C=X.get(r),!C)return;P=(M==null?void 0:M.getBoundingClientRect())??null;const{xSnapped:b,ySnapped:N}=xs($.sourceEvent,{transform:Q,snapGrid:O,snapToGrid:R,containerBounds:P});I={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},D={...I,pointerX:b,pointerY:N,aspectRatio:I.width/I.height},V=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(V=X.get(C.parentId),W=V&&C.extent==="parent"?$1(V):void 0),A=[],K=void 0;for(const[L,E]of X)if(E.parentId===r&&(A.push({id:L,position:{...E.position},extent:E.extent}),E.extent==="parent"||E.expandParent)){const T=z1(E,C,E.origin??z);K?K=[[Math.min(T[0][0],K[0][0]),Math.min(T[0][1],K[0][1])],[Math.max(T[1][0],K[1][0]),Math.max(T[1][1],K[1][1])]]:K=T}w==null||w($,{...I})}).on("drag",$=>{const{transform:X,snapGrid:Q,snapToGrid:O,nodeOrigin:R}=o(),z=xs($.sourceEvent,{transform:X,snapGrid:Q,snapToGrid:O,containerBounds:P}),M=[];if(!C)return;const{x:b,y:N,width:L,height:E}=I,T={},Z=C.origin??R,{width:G,height:ne,x:oe,y:ae}=A1(D,d.controlDirection,z,d.boundaries,d.keepAspectRatio,Z,W,K),re=G!==L,ue=ne!==E,ve=oe!==b&&re,Ce=ae!==N&&ue;if(!ve&&!Ce&&!re&&!ue)return;if((ve||Ce||Z[0]===1||Z[1]===1)&&(T.x=ve?oe:I.x,T.y=Ce?ae:I.y,I.x=T.x,I.y=T.y,A.length>0)){const Te=oe-b,_e=ae-N;for(const Xe of A)Xe.position={x:Xe.position.x-Te+Z[0]*(G-L),y:Xe.position.y-_e+Z[1]*(ne-E)},M.push(Xe)}if((re||ue)&&(T.width=re&&(!d.resizeDirection||d.resizeDirection==="horizontal")?G:I.width,T.height=ue&&(!d.resizeDirection||d.resizeDirection==="vertical")?ne:I.height,I.width=T.width,I.height=T.height),V&&C.expandParent){const Te=Z[0]*(T.width??0);T.x&&T.x<Te&&(I.x=Te,D.x=D.x-(T.x-Te));const _e=Z[1]*(T.height??0);T.y&&T.y<_e&&(I.y=_e,D.y=D.y-(T.y-_e))}const ke=O1({width:I.width,prevWidth:L,height:I.height,prevHeight:E,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),we={...I,direction:ke};(k==null?void 0:k($,we))!==!1&&(q=!0,S==null||S($,we),i(T,M))}).on("end",$=>{q&&(j==null||j($,{...I}),l==null||l({...I}),q=!1)});u.call(H)}function y(){u.on(".drag",null)}return{update:p,destroy:y}}var Xu={exports:{}},Qu={},Gu={exports:{}},Ku={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function F1(){if(Yp)return Ku;Yp=1;var t=Es();function r(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var o=typeof Object.is=="function"?Object.is:r,i=t.useState,l=t.useEffect,u=t.useLayoutEffect,d=t.useDebugValue;function p(m,x){var w=x(),S=i({inst:{value:w,getSnapshot:x}}),j=S[0].inst,k=S[1];return u(function(){j.value=w,j.getSnapshot=x,y(j)&&k({inst:j})},[m,w,x]),l(function(){return y(j)&&k({inst:j}),m(function(){y(j)&&k({inst:j})})},[m]),d(w),w}function y(m){var x=m.getSnapshot;m=m.value;try{var w=x();return!o(m,w)}catch{return!0}}function g(m,x){return x()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:p;return Ku.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Ku}var Xp;function H1(){return Xp||(Xp=1,Gu.exports=F1()),Gu.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function V1(){if(Qp)return Qu;Qp=1;var t=Es(),r=H1();function o(g,h){return g===h&&(g!==0||1/g===1/h)||g!==g&&h!==h}var i=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,u=t.useRef,d=t.useEffect,p=t.useMemo,y=t.useDebugValue;return Qu.useSyncExternalStoreWithSelector=function(g,h,m,x,w){var S=u(null);if(S.current===null){var j={hasValue:!1,value:null};S.current=j}else j=S.current;S=p(function(){function I(V){if(!D){if(D=!0,C=V,V=x(V),w!==void 0&&j.hasValue){var W=j.value;if(w(W,V))return P=W}return P=V}if(W=P,i(C,V))return W;var K=x(V);return w!==void 0&&w(W,K)?(C=V,W):(C=V,P=K)}var D=!1,C,P,A=m===void 0?null:m;return[function(){return I(h())},A===null?void 0:function(){return I(A())}]},[h,m,x,w]);var k=l(g,S[0],S[1]);return d(function(){j.hasValue=!0,j.value=k},[k]),y(k),k},Qu}var Gp;function B1(){return Gp||(Gp=1,Xu.exports=V1()),Xu.exports}var W1=B1();const U1=_h(W1),Y1={},Kp=t=>{let r;const o=new Set,i=(h,m)=>{const x=typeof h=="function"?h(r):h;if(!Object.is(x,r)){const w=r;r=m??(typeof x!="object"||x===null)?x:Object.assign({},r,x),o.forEach(S=>S(r,w))}},l=()=>r,y={setState:i,getState:l,getInitialState:()=>g,subscribe:h=>(o.add(h),()=>o.delete(h)),destroy:()=>{(Y1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},g=r=t(i,l,y);return y},X1=t=>t?Kp(t):Kp,{useDebugValue:Q1}=ps,{useSyncExternalStoreWithSelector:G1}=U1,K1=t=>t;function Om(t,r=K1,o){const i=G1(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return Q1(i),i}const qp=(t,r)=>{const o=X1(t),i=(l,u=r)=>Om(o,l,u);return Object.assign(i,o),i},q1=(t,r)=>t?qp(t,r):qp;function Re(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,l]of t)if(!Object.is(l,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const o=Object.keys(t);if(o.length!==Object.keys(r).length)return!1;for(const i of o)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var Z1=Mh();const zl=F.createContext(null),J1=zl.Provider,Am=rn.error001();function Me(t,r){const o=F.useContext(zl);if(o===null)throw new Error(Am);return Om(o,t,r)}function Fe(){const t=F.useContext(zl);if(t===null)throw new Error(Am);return F.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Zp={display:"none"},eS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lm="react-flow__node-desc",$m="react-flow__edge-desc",tS="react-flow__aria-live",nS=t=>t.ariaLiveMessage,rS=t=>t.ariaLabelConfig;function oS({rfId:t}){const r=Me(nS);return c.jsx("div",{id:`${tS}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:eS,children:r})}function sS({rfId:t,disableKeyboardA11y:r}){const o=Me(rS);return c.jsxs(c.Fragment,{children:[c.jsx("div",{id:`${Lm}-${t}`,style:Zp,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),c.jsx("div",{id:`${$m}-${t}`,style:Zp,children:o["edge.a11yDescription.default"]}),!r&&c.jsx(oS,{rfId:t})]})}const Rl=F.forwardRef(({position:t="top-left",children:r,className:o,style:i,...l},u)=>{const d=`${t}`.split("-");return c.jsx("div",{className:Ge(["react-flow__panel",o,...d]),style:i,ref:u,...l,children:r})});Rl.displayName="Panel";function iS({proOptions:t,position:r="bottom-right"}){return t!=null&&t.hideAttribution?null:c.jsx(Rl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:c.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const lS=t=>{const r=[],o=[];for(const[,i]of t.nodeLookup)i.selected&&r.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&o.push(i);return{selectedNodes:r,selectedEdges:o}},il=t=>t.id;function aS(t,r){return Re(t.selectedNodes.map(il),r.selectedNodes.map(il))&&Re(t.selectedEdges.map(il),r.selectedEdges.map(il))}function uS({onSelectionChange:t}){const r=Fe(),{selectedNodes:o,selectedEdges:i}=Me(lS,aS);return F.useEffect(()=>{const l={nodes:o,edges:i};t==null||t(l),r.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[o,i,t]),null}const cS=t=>!!t.onSelectionChangeHandlers;function dS({onSelectionChange:t}){const r=Me(cS);return t||r?c.jsx(uS,{onSelectionChange:t}):null}const zm=[0,0],fS={x:0,y:0,zoom:1},pS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Jp=[...pS,"rfId"],hS=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),eh={translateExtent:Ns,nodeOrigin:zm,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function mS(t){const{setNodes:r,setEdges:o,setMinZoom:i,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:d,reset:p,setDefaultNodesAndEdges:y}=Me(hS,Re),g=Fe();F.useEffect(()=>(y(t.defaultNodes,t.defaultEdges),()=>{h.current=eh,p()}),[]);const h=F.useRef(eh);return F.useEffect(()=>{for(const m of Jp){const x=t[m],w=h.current[m];x!==w&&(typeof t[m]>"u"||(m==="nodes"?r(x):m==="edges"?o(x):m==="minZoom"?i(x):m==="maxZoom"?l(x):m==="translateExtent"?u(x):m==="nodeExtent"?d(x):m==="ariaLabelConfig"?g.setState({ariaLabelConfig:Gw(x)}):m==="fitView"?g.setState({fitViewQueued:x}):m==="fitViewOptions"?g.setState({fitViewOptions:x}):g.setState({[m]:x})))}h.current=t},Jp.map(m=>t[m])),null}function th(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function gS(t){var i;const[r,o]=F.useState(t==="system"?null:t);return F.useEffect(()=>{if(t!=="system"){o(t);return}const l=th(),u=()=>o(l!=null&&l.matches?"dark":"light");return u(),l==null||l.addEventListener("change",u),()=>{l==null||l.removeEventListener("change",u)}},[t]),r!==null?r:(i=th())!=null&&i.matches?"dark":"light"}const nh=typeof document<"u"?document:null;function js(t=null,r={target:nh,actInsideInputWithModifier:!0}){const[o,i]=F.useState(!1),l=F.useRef(!1),u=F.useRef(new Set([])),[d,p]=F.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=g.reduce((m,x)=>m.concat(...x),[]);return[g,h]}return[[],[]]},[t]);return F.useEffect(()=>{const y=(r==null?void 0:r.target)??nh,g=(r==null?void 0:r.actInsideInputWithModifier)??!0;if(t!==null){const h=w=>{var k,I;if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!g)&&ym(w))return!1;const j=oh(w.code,p);if(u.current.add(w[j]),rh(d,u.current,!1)){const D=((I=(k=w.composedPath)==null?void 0:k.call(w))==null?void 0:I[0])||w.target,C=(D==null?void 0:D.nodeName)==="BUTTON"||(D==null?void 0:D.nodeName)==="A";r.preventDefault!==!1&&(l.current||!C)&&w.preventDefault(),i(!0)}},m=w=>{const S=oh(w.code,p);rh(d,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(w[S]),w.key==="Meta"&&u.current.clear(),l.current=!1},x=()=>{u.current.clear(),i(!1)};return y==null||y.addEventListener("keydown",h),y==null||y.addEventListener("keyup",m),window.addEventListener("blur",x),window.addEventListener("contextmenu",x),()=>{y==null||y.removeEventListener("keydown",h),y==null||y.removeEventListener("keyup",m),window.removeEventListener("blur",x),window.removeEventListener("contextmenu",x)}}},[t,i]),o}function rh(t,r,o){return t.filter(i=>o||i.length===r.size).some(i=>i.every(l=>r.has(l)))}function oh(t,r){return r.includes(t)?"code":"key"}const xS=()=>{const t=Fe();return F.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=t.getState();return o?o.scaleBy(1/1.2,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(r,{duration:o==null?void 0:o.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(r,o)=>{const{transform:[i,l,u],panZoom:d}=t.getState();return d?(await d.setViewport({x:r.x??i,y:r.y??l,zoom:r.zoom??u},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,i]=t.getState().transform;return{x:r,y:o,zoom:i}},setCenter:async(r,o,i)=>t.getState().setCenter(r,o,i),fitBounds:async(r,o)=>{const{width:i,height:l,minZoom:u,maxZoom:d,panZoom:p}=t.getState(),y=jc(r,i,l,u,d,(o==null?void 0:o.padding)??.1);return p?(await p.setViewport(y,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:i,snapGrid:l,snapToGrid:u,domNode:d}=t.getState();if(!d)return r;const{x:p,y}=d.getBoundingClientRect(),g={x:r.x-p,y:r.y-y},h=o.snapGrid??l,m=o.snapToGrid??u;return Ts(g,i,m,h)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=t.getState();if(!i)return r;const{x:l,y:u}=i.getBoundingClientRect(),d=El(r,o);return{x:d.x+l,y:d.y+u}}}),[])};function Rm(t,r){const o=[],i=new Map,l=[];for(const u of t)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const d=i.get(u.id);d?d.push(u):i.set(u.id,[u])}for(const u of r){const d=i.get(u.id);if(!d){o.push(u);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){o.push({...d[0].item});continue}const p={...u};for(const y of d)yS(y,p);o.push(p)}return l.length&&l.forEach(u=>{u.index!==void 0?o.splice(u.index,0,{...u.item}):o.push({...u.item})}),o}function yS(t,r){switch(t.type){case"select":{r.selected=t.selected;break}case"position":{typeof t.position<"u"&&(r.position=t.position),typeof t.dragging<"u"&&(r.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(r.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(r.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(r.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(r.resizing=t.resizing);break}}}function vS(t,r){return Rm(t,r)}function wS(t,r){return Rm(t,r)}function hr(t,r){return{id:t,type:"select",selected:r}}function ao(t,r=new Set,o=!1){const i=[];for(const[l,u]of t){const d=r.has(l);!(u.selected===void 0&&!d)&&u.selected!==d&&(o&&(u.selected=d),i.push(hr(u.id,d)))}return i}function sh({items:t=[],lookup:r}){var l;const o=[],i=new Map(t.map(u=>[u.id,u]));for(const[u,d]of t.entries()){const p=r.get(d.id),y=((l=p==null?void 0:p.internals)==null?void 0:l.userNode)??p;y!==void 0&&y!==d&&o.push({id:d.id,item:d,type:"replace"}),y===void 0&&o.push({item:d,type:"add",index:u})}for(const[u]of r)i.get(u)===void 0&&o.push({id:u,type:"remove"});return o}function ih(t){return{id:t.id,type:"remove"}}const lh=t=>Rw(t),SS=t=>cm(t);function Fm(t){return F.forwardRef(t)}const NS=typeof window<"u"?F.useLayoutEffect:F.useEffect;function ah(t){const[r,o]=F.useState(BigInt(0)),[i]=F.useState(()=>kS(()=>o(l=>l+BigInt(1))));return NS(()=>{const l=i.get();l.length&&(t(l),i.reset())},[r]),i}function kS(t){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),t()}}}const Hm=F.createContext(null);function CS({children:t}){const r=Fe(),o=F.useCallback(p=>{const{nodes:y=[],setNodes:g,hasDefaultNodes:h,onNodesChange:m,nodeLookup:x,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let j=y;for(const I of p)j=typeof I=="function"?I(j):I;let k=sh({items:j,lookup:x});for(const I of S.values())k=I(k);h&&g(j),k.length>0?m==null||m(k):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:I,nodes:D,setNodes:C}=r.getState();I&&C(D)})},[]),i=ah(o),l=F.useCallback(p=>{const{edges:y=[],setEdges:g,hasDefaultEdges:h,onEdgesChange:m,edgeLookup:x}=r.getState();let w=y;for(const S of p)w=typeof S=="function"?S(w):S;h?g(w):m&&m(sh({items:w,lookup:x}))},[]),u=ah(l),d=F.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return c.jsx(Hm.Provider,{value:d,children:t})}function IS(){const t=F.useContext(Hm);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const jS=t=>!!t.panZoom;function Er(){const t=xS(),r=Fe(),o=IS(),i=Me(jS),l=F.useMemo(()=>{const u=m=>r.getState().nodeLookup.get(m),d=m=>{o.nodeQueue.push(m)},p=m=>{o.edgeQueue.push(m)},y=m=>{var I,D;const{nodeLookup:x,nodeOrigin:w}=r.getState(),S=lh(m)?m:x.get(m.id),j=S.parentId?gm(S.position,S.measured,S.parentId,x,w):S.position,k={...S,position:j,width:((I=S.measured)==null?void 0:I.width)??S.width,height:((D=S.measured)==null?void 0:D.height)??S.height};return go(k)},g=(m,x,w={replace:!1})=>{d(S=>S.map(j=>{if(j.id===m){const k=typeof x=="function"?x(j):x;return w.replace&&lh(k)?k:{...j,...k}}return j}))},h=(m,x,w={replace:!1})=>{p(S=>S.map(j=>{if(j.id===m){const k=typeof x=="function"?x(j):x;return w.replace&&SS(k)?k:{...j,...k}}return j}))};return{getNodes:()=>r.getState().nodes.map(m=>({...m})),getNode:m=>{var x;return(x=u(m))==null?void 0:x.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:m=[]}=r.getState();return m.map(x=>({...x}))},getEdge:m=>r.getState().edgeLookup.get(m),setNodes:d,setEdges:p,addNodes:m=>{const x=Array.isArray(m)?m:[m];o.nodeQueue.push(w=>[...w,...x])},addEdges:m=>{const x=Array.isArray(m)?m:[m];o.edgeQueue.push(w=>[...w,...x])},toObject:()=>{const{nodes:m=[],edges:x=[],transform:w}=r.getState(),[S,j,k]=w;return{nodes:m.map(I=>({...I})),edges:x.map(I=>({...I})),viewport:{x:S,y:j,zoom:k}}},deleteElements:async({nodes:m=[],edges:x=[]})=>{const{nodes:w,edges:S,onNodesDelete:j,onEdgesDelete:k,triggerNodeChanges:I,triggerEdgeChanges:D,onDelete:C,onBeforeDelete:P}=r.getState(),{nodes:A,edges:V}=await Ww({nodesToRemove:m,edgesToRemove:x,nodes:w,edges:S,onBeforeDelete:P}),W=V.length>0,K=A.length>0;if(W){const q=V.map(ih);k==null||k(V),D(q)}if(K){const q=A.map(ih);j==null||j(A),I(q)}return(K||W)&&(C==null||C({nodes:A,edges:V})),{deletedNodes:A,deletedEdges:V}},getIntersectingNodes:(m,x=!0,w)=>{const S=Tp(m),j=S?m:y(m),k=w!==void 0;return j?(w||r.getState().nodes).filter(I=>{const D=r.getState().nodeLookup.get(I.id);if(D&&!S&&(I.id===m.id||!D.internals.positionAbsolute))return!1;const C=go(k?I:D),P=Cs(C,j);return x&&P>0||P>=C.width*C.height||P>=j.width*j.height}):[]},isNodeIntersecting:(m,x,w=!0)=>{const j=Tp(m)?m:y(m);if(!j)return!1;const k=Cs(j,x);return w&&k>0||k>=x.width*x.height||k>=j.width*j.height},updateNode:g,updateNodeData:(m,x,w={replace:!1})=>{g(m,S=>{const j=typeof x=="function"?x(S):x;return w.replace?{...S,data:j}:{...S,data:{...S.data,...j}}},w)},updateEdge:h,updateEdgeData:(m,x,w={replace:!1})=>{h(m,S=>{const j=typeof x=="function"?x(S):x;return w.replace?{...S,data:j}:{...S,data:{...S.data,...j}}},w)},getNodesBounds:m=>{const{nodeLookup:x,nodeOrigin:w}=r.getState();return Fw(m,{nodeLookup:x,nodeOrigin:w})},getHandleConnections:({type:m,id:x,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}-${m}${x?`-${x}`:""}`))==null?void 0:S.values())??[])},getNodeConnections:({type:m,handleId:x,nodeId:w})=>{var S;return Array.from(((S=r.getState().connectionLookup.get(`${w}${m?x?`-${m}-${x}`:`-${m}`:""}`))==null?void 0:S.values())??[])},fitView:async m=>{const x=r.getState().fitViewResolver??Qw();return r.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:x}),o.nodeQueue.push(w=>[...w]),x.promise}}},[]);return F.useMemo(()=>({...l,...t,viewportInitialized:i}),[i])}const uh=t=>t.selected,ES=typeof window<"u"?window:void 0;function _S({deleteKeyCode:t,multiSelectionKeyCode:r}){const o=Fe(),{deleteElements:i}=Er(),l=js(t,{actInsideInputWithModifier:!1}),u=js(r,{target:ES});F.useEffect(()=>{if(l){const{edges:d,nodes:p}=o.getState();i({nodes:p.filter(uh),edges:d.filter(uh)}),o.setState({nodesSelectionActive:!1})}},[l]),F.useEffect(()=>{o.setState({multiSelectionActive:u})},[u])}function MS(t){const r=Fe();F.useEffect(()=>{const o=()=>{var l,u,d,p;if(!t.current||!(((u=(l=t.current).checkVisibility)==null?void 0:u.call(l))??!0))return!1;const i=Ec(t.current);(i.height===0||i.width===0)&&((p=(d=r.getState()).onError)==null||p.call(d,"004",rn.error004())),r.setState({width:i.width||500,height:i.height||500})};if(t.current){o(),window.addEventListener("resize",o);const i=new ResizeObserver(()=>o());return i.observe(t.current),()=>{window.removeEventListener("resize",o),i&&t.current&&i.unobserve(t.current)}}},[])}const Fl={position:"absolute",width:"100%",height:"100%",top:0,left:0},bS=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function PS({onPaneContextMenu:t,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=yr.Free,zoomOnDoubleClick:d=!0,panOnDrag:p=!0,defaultViewport:y,translateExtent:g,minZoom:h,maxZoom:m,zoomActivationKeyCode:x,preventScrolling:w=!0,children:S,noWheelClassName:j,noPanClassName:k,onViewportChange:I,isControlledViewport:D,paneClickDistance:C,selectionOnDrag:P}){const A=Fe(),V=F.useRef(null),{userSelectionActive:W,lib:K,connectionInProgress:q}=Me(bS,Re),H=js(x),$=F.useRef();MS(V);const X=F.useCallback(Q=>{I==null||I({x:Q[0],y:Q[1],zoom:Q[2]}),D||A.setState({transform:Q})},[I,D]);return F.useEffect(()=>{if(V.current){$.current=P1({domNode:V.current,minZoom:h,maxZoom:m,translateExtent:g,viewport:y,onDraggingChange:z=>A.setState({paneDragging:z}),onPanZoomStart:(z,M)=>{const{onViewportChangeStart:b,onMoveStart:N}=A.getState();N==null||N(z,M),b==null||b(M)},onPanZoom:(z,M)=>{const{onViewportChange:b,onMove:N}=A.getState();N==null||N(z,M),b==null||b(M)},onPanZoomEnd:(z,M)=>{const{onViewportChangeEnd:b,onMoveEnd:N}=A.getState();N==null||N(z,M),b==null||b(M)}});const{x:Q,y:O,zoom:R}=$.current.getViewport();return A.setState({panZoom:$.current,transform:[Q,O,R],domNode:V.current.closest(".react-flow")}),()=>{var z;(z=$.current)==null||z.destroy()}}},[]),F.useEffect(()=>{var Q;(Q=$.current)==null||Q.update({onPaneContextMenu:t,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:d,panOnDrag:p,zoomActivationKeyPressed:H,preventScrolling:w,noPanClassName:k,userSelectionActive:W,noWheelClassName:j,lib:K,onTransformChange:X,connectionInProgress:q,selectionOnDrag:P,paneClickDistance:C})},[t,r,o,i,l,u,d,p,H,w,k,W,j,K,X,q,P,C]),c.jsx("div",{className:"react-flow__renderer",ref:V,style:Fl,children:S})}const DS=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function TS(){const{userSelectionActive:t,userSelectionRect:r}=Me(DS,Re);return t&&r?c.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const qu=(t,r)=>o=>{o.target===r.current&&(t==null||t(o))},OS=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function AS({isSelecting:t,selectionKeyPressed:r,selectionMode:o=ks.Full,panOnDrag:i,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:d,onSelectionEnd:p,onPaneClick:y,onPaneContextMenu:g,onPaneScroll:h,onPaneMouseEnter:m,onPaneMouseMove:x,onPaneMouseLeave:w,children:S}){const j=Fe(),{userSelectionActive:k,elementsSelectable:I,dragging:D,connectionInProgress:C}=Me(OS,Re),P=I&&(t||k),A=F.useRef(null),V=F.useRef(),W=F.useRef(new Set),K=F.useRef(new Set),q=F.useRef(!1),H=b=>{if(q.current||C){q.current=!1;return}y==null||y(b),j.getState().resetSelectedElements(),j.setState({nodesSelectionActive:!1})},$=b=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){b.preventDefault();return}g==null||g(b)},X=h?b=>h(b):void 0,Q=b=>{q.current&&(b.stopPropagation(),q.current=!1)},O=b=>{var ne,oe;const{domNode:N}=j.getState();if(V.current=N==null?void 0:N.getBoundingClientRect(),!V.current)return;const L=b.target===A.current;if(!L&&!!b.target.closest(".nokey")||!t||!(u&&L||r)||b.button!==0||!b.isPrimary)return;(oe=(ne=b.target)==null?void 0:ne.setPointerCapture)==null||oe.call(ne,b.pointerId),q.current=!1;const{x:Z,y:G}=Xt(b.nativeEvent,V.current);j.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:G,x:Z,y:G}}),L||(b.stopPropagation(),b.preventDefault())},R=b=>{const{userSelectionRect:N,transform:L,nodeLookup:E,edgeLookup:T,connectionLookup:Z,triggerNodeChanges:G,triggerEdgeChanges:ne,defaultEdgeOptions:oe,resetSelectedElements:ae}=j.getState();if(!V.current||!N)return;const{x:re,y:ue}=Xt(b.nativeEvent,V.current),{startX:ve,startY:Ce}=N;if(!q.current){const _e=r?0:l;if(Math.hypot(re-ve,ue-Ce)<=_e)return;ae(),d==null||d(b)}q.current=!0;const ke={startX:ve,startY:Ce,x:re<ve?re:ve,y:ue<Ce?ue:Ce,width:Math.abs(re-ve),height:Math.abs(ue-Ce)},we=W.current,Ee=K.current;W.current=new Set(Ic(E,ke,L,o===ks.Partial,!0).map(_e=>_e.id)),K.current=new Set;const Te=(oe==null?void 0:oe.selectable)??!0;for(const _e of W.current){const Xe=Z.get(_e);if(Xe)for(const{edgeId:Lt}of Xe.values()){const xt=T.get(Lt);xt&&(xt.selectable??Te)&&K.current.add(Lt)}}if(!Op(we,W.current)){const _e=ao(E,W.current,!0);G(_e)}if(!Op(Ee,K.current)){const _e=ao(T,K.current);ne(_e)}j.setState({userSelectionRect:ke,userSelectionActive:!0,nodesSelectionActive:!1})},z=b=>{var N,L;b.button===0&&((L=(N=b.target)==null?void 0:N.releasePointerCapture)==null||L.call(N,b.pointerId),!k&&b.target===A.current&&j.getState().userSelectionRect&&(H==null||H(b)),j.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(p==null||p(b),j.setState({nodesSelectionActive:W.current.size>0})))},M=i===!0||Array.isArray(i)&&i.includes(0);return c.jsxs("div",{className:Ge(["react-flow__pane",{draggable:M,dragging:D,selection:t}]),onClick:P?void 0:qu(H,A),onContextMenu:qu($,A),onWheel:qu(X,A),onPointerEnter:P?void 0:m,onPointerMove:P?R:x,onPointerUp:P?z:void 0,onPointerDownCapture:P?O:void 0,onClickCapture:P?Q:void 0,onPointerLeave:w,ref:A,style:Fl,children:[S,c.jsx(TS,{})]})}function fc({id:t,store:r,unselect:o=!1,nodeRef:i}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:d,nodeLookup:p,onError:y}=r.getState(),g=p.get(t);if(!g){y==null||y("012",rn.error012(t));return}r.setState({nodesSelectionActive:!1}),g.selected?(o||g.selected&&d)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var h;return(h=i==null?void 0:i.current)==null?void 0:h.blur()})):l([t])}function Vm({nodeRef:t,disabled:r=!1,noDragClassName:o,handleSelector:i,nodeId:l,isSelectable:u,nodeClickDistance:d}){const p=Fe(),[y,g]=F.useState(!1),h=F.useRef();return F.useEffect(()=>{h.current=x1({getStoreItems:()=>p.getState(),onNodeMouseDown:m=>{fc({id:m,store:p,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),F.useEffect(()=>{var m,x;if(r)(m=h.current)==null||m.destroy();else if(t.current)return(x=h.current)==null||x.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:l,nodeClickDistance:d}),()=>{var w;(w=h.current)==null||w.destroy()}},[o,i,r,u,t,l]),y}const LS=t=>r=>r.selected&&(r.draggable||t&&typeof r.draggable>"u");function Bm(){const t=Fe();return F.useCallback(o=>{const{nodeExtent:i,snapToGrid:l,snapGrid:u,nodesDraggable:d,onError:p,updateNodePositions:y,nodeLookup:g,nodeOrigin:h}=t.getState(),m=new Map,x=LS(d),w=l?u[0]:5,S=l?u[1]:5,j=o.direction.x*w*o.factor,k=o.direction.y*S*o.factor;for(const[,I]of g){if(!x(I))continue;let D={x:I.internals.positionAbsolute.x+j,y:I.internals.positionAbsolute.y+k};l&&(D=Ds(D,u));const{position:C,positionAbsolute:P}=dm({nodeId:I.id,nextPosition:D,nodeLookup:g,nodeExtent:i,nodeOrigin:h,onError:p});I.position=C,I.internals.positionAbsolute=P,m.set(I.id,I)}y(m)},[])}const Tc=F.createContext(null),$S=Tc.Provider;Tc.Consumer;const Wm=()=>F.useContext(Tc),zS=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),RS=(t,r,o)=>i=>{const{connectionClickStartHandle:l,connectionMode:u,connection:d}=i,{fromHandle:p,toHandle:y,isValid:g}=d,h=(y==null?void 0:y.nodeId)===t&&(y==null?void 0:y.id)===r&&(y==null?void 0:y.type)===o;return{connectingFrom:(p==null?void 0:p.nodeId)===t&&(p==null?void 0:p.id)===r&&(p==null?void 0:p.type)===o,connectingTo:h,clickConnecting:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===r&&(l==null?void 0:l.type)===o,isPossibleEndHandle:u===ho.Strict?(p==null?void 0:p.type)!==o:t!==(p==null?void 0:p.nodeId)||r!==(p==null?void 0:p.id),connectionInProcess:!!p,clickConnectionInProcess:!!l,valid:h&&g}};function FS({type:t="source",position:r=ye.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:d,onConnect:p,children:y,className:g,onMouseDown:h,onTouchStart:m,...x},w){var R,z;const S=d||null,j=t==="target",k=Fe(),I=Wm(),{connectOnClick:D,noPanClassName:C,rfId:P}=Me(zS,Re),{connectingFrom:A,connectingTo:V,clickConnecting:W,isPossibleEndHandle:K,connectionInProcess:q,clickConnectionInProcess:H,valid:$}=Me(RS(I,S,t),Re);I||(z=(R=k.getState()).onError)==null||z.call(R,"010",rn.error010());const X=M=>{const{defaultEdgeOptions:b,onConnect:N,hasDefaultEdges:L}=k.getState(),E={...b,...M};if(L){const{edges:T,setEdges:Z}=k.getState();Z(t1(E,T))}N==null||N(E),p==null||p(E)},Q=M=>{if(!I)return;const b=vm(M.nativeEvent);if(l&&(b&&M.button===0||!b)){const N=k.getState();dc.onPointerDown(M.nativeEvent,{handleDomNode:M.currentTarget,autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:j,handleId:S,nodeId:I,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:X,isValidConnection:o||N.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed,dragThreshold:N.connectionDragThreshold})}b?h==null||h(M):m==null||m(M)},O=M=>{const{onClickConnectStart:b,onClickConnectEnd:N,connectionClickStartHandle:L,connectionMode:E,isValidConnection:T,lib:Z,rfId:G,nodeLookup:ne,connection:oe}=k.getState();if(!I||!L&&!l)return;if(!L){b==null||b(M.nativeEvent,{nodeId:I,handleId:S,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:I,type:t,id:S}});return}const ae=xm(M.target),re=o||T,{connection:ue,isValid:ve}=dc.isValid(M.nativeEvent,{handle:{nodeId:I,id:S,type:t},connectionMode:E,fromNodeId:L.nodeId,fromHandleId:L.id||null,fromType:L.type,isValidConnection:re,flowId:G,doc:ae,lib:Z,nodeLookup:ne});ve&&ue&&X(ue);const Ce=structuredClone(oe);delete Ce.inProgress,Ce.toPosition=Ce.toHandle?Ce.toHandle.position:null,N==null||N(M,Ce),k.setState({connectionClickStartHandle:null})};return c.jsx("div",{"data-handleid":S,"data-nodeid":I,"data-handlepos":r,"data-id":`${P}-${I}-${S}-${t}`,className:Ge(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",C,g,{source:!j,target:j,connectable:i,connectablestart:l,connectableend:u,clickconnecting:W,connectingfrom:A,connectingto:V,valid:$,connectionindicator:i&&(!q||K)&&(q||H?u:l)}]),onMouseDown:Q,onTouchStart:Q,onClick:D?O:void 0,ref:w,...x,children:y})}const Cr=F.memo(Fm(FS));function HS({data:t,isConnectable:r,sourcePosition:o=ye.Bottom}){return c.jsxs(c.Fragment,{children:[t==null?void 0:t.label,c.jsx(Cr,{type:"source",position:o,isConnectable:r})]})}function VS({data:t,isConnectable:r,targetPosition:o=ye.Top,sourcePosition:i=ye.Bottom}){return c.jsxs(c.Fragment,{children:[c.jsx(Cr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label,c.jsx(Cr,{type:"source",position:i,isConnectable:r})]})}function BS(){return null}function WS({data:t,isConnectable:r,targetPosition:o=ye.Top}){return c.jsxs(c.Fragment,{children:[c.jsx(Cr,{type:"target",position:o,isConnectable:r}),t==null?void 0:t.label]})}const _l={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ch={input:HS,default:VS,output:WS,group:BS};function US(t){var r,o,i,l;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((r=t.style)==null?void 0:r.width),height:t.height??t.initialHeight??((o=t.style)==null?void 0:o.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((l=t.style)==null?void 0:l.height)}}const YS=t=>{const{width:r,height:o,x:i,y:l}=Ps(t.nodeLookup,{filter:u=>!!u.selected});return{width:Yt(r)?r:null,height:Yt(o)?o:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${l}px)`}};function XS({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:o}){const i=Fe(),{width:l,height:u,transformString:d,userSelectionActive:p}=Me(YS,Re),y=Bm(),g=F.useRef(null);if(F.useEffect(()=>{var x;o||(x=g.current)==null||x.focus({preventScroll:!0})},[o]),Vm({nodeRef:g}),p||!l||!u)return null;const h=t?x=>{const w=i.getState().nodes.filter(S=>S.selected);t(x,w)}:void 0,m=x=>{Object.prototype.hasOwnProperty.call(_l,x.key)&&(x.preventDefault(),y({direction:_l[x.key],factor:x.shiftKey?4:1}))};return c.jsx("div",{className:Ge(["react-flow__nodesselection","react-flow__container",r]),style:{transform:d},children:c.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:o?void 0:-1,onKeyDown:o?void 0:m,style:{width:l,height:u}})})}const dh=typeof window<"u"?window:void 0,QS=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Um({children:t,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:d,paneClickDistance:p,deleteKeyCode:y,selectionKeyCode:g,selectionOnDrag:h,selectionMode:m,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:D,zoomOnPinch:C,panOnScroll:P,panOnScrollSpeed:A,panOnScrollMode:V,zoomOnDoubleClick:W,panOnDrag:K,defaultViewport:q,translateExtent:H,minZoom:$,maxZoom:X,preventScrolling:Q,onSelectionContextMenu:O,noWheelClassName:R,noPanClassName:z,disableKeyboardA11y:M,onViewportChange:b,isControlledViewport:N}){const{nodesSelectionActive:L,userSelectionActive:E}=Me(QS,Re),T=js(g,{target:dh}),Z=js(j,{target:dh}),G=Z||K,ne=Z||P,oe=h&&G!==!0,ae=T||E||oe;return _S({deleteKeyCode:y,multiSelectionKeyCode:S}),c.jsx(PS,{onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:D,zoomOnPinch:C,panOnScroll:ne,panOnScrollSpeed:A,panOnScrollMode:V,zoomOnDoubleClick:W,panOnDrag:!T&&G,defaultViewport:q,translateExtent:H,minZoom:$,maxZoom:X,zoomActivationKeyCode:k,preventScrolling:Q,noWheelClassName:R,noPanClassName:z,onViewportChange:b,isControlledViewport:N,paneClickDistance:p,selectionOnDrag:oe,children:c.jsxs(AS,{onSelectionStart:x,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:d,panOnDrag:G,isSelecting:!!ae,selectionMode:m,selectionKeyPressed:T,paneClickDistance:p,selectionOnDrag:oe,children:[t,L&&c.jsx(XS,{onSelectionContextMenu:O,noPanClassName:z,disableKeyboardA11y:M})]})})}Um.displayName="FlowRenderer";const GS=F.memo(Um),KS=t=>r=>t?Ic(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function qS(t){return Me(F.useCallback(KS(t),[t]),Re)}const ZS=t=>t.updateNodeInternals;function JS(){const t=Me(ZS),[r]=F.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const i=new Map;o.forEach(l=>{const u=l.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:l.target,force:!0})}),t(i)}));return F.useEffect(()=>()=>{r==null||r.disconnect()},[r]),r}function eN({node:t,nodeType:r,hasDimensions:o,resizeObserver:i}){const l=Fe(),u=F.useRef(null),d=F.useRef(null),p=F.useRef(t.sourcePosition),y=F.useRef(t.targetPosition),g=F.useRef(r),h=o&&!!t.internals.handleBounds;return F.useEffect(()=>{u.current&&!t.hidden&&(!h||d.current!==u.current)&&(d.current&&(i==null||i.unobserve(d.current)),i==null||i.observe(u.current),d.current=u.current)},[h,t.hidden]),F.useEffect(()=>()=>{d.current&&(i==null||i.unobserve(d.current),d.current=null)},[]),F.useEffect(()=>{if(u.current){const m=g.current!==r,x=p.current!==t.sourcePosition,w=y.current!==t.targetPosition;(m||x||w)&&(g.current=r,p.current=t.sourcePosition,y.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,r,t.sourcePosition,t.targetPosition]),u}function tN({id:t,onClick:r,onMouseEnter:o,onMouseMove:i,onMouseLeave:l,onContextMenu:u,onDoubleClick:d,nodesDraggable:p,elementsSelectable:y,nodesConnectable:g,nodesFocusable:h,resizeObserver:m,noDragClassName:x,noPanClassName:w,disableKeyboardA11y:S,rfId:j,nodeTypes:k,nodeClickDistance:I,onError:D}){const{node:C,internals:P,isParent:A}=Me(re=>{const ue=re.nodeLookup.get(t),ve=re.parentLookup.has(t);return{node:ue,internals:ue.internals,isParent:ve}},Re);let V=C.type||"default",W=(k==null?void 0:k[V])||ch[V];W===void 0&&(D==null||D("003",rn.error003(V)),V="default",W=(k==null?void 0:k.default)||ch.default);const K=!!(C.draggable||p&&typeof C.draggable>"u"),q=!!(C.selectable||y&&typeof C.selectable>"u"),H=!!(C.connectable||g&&typeof C.connectable>"u"),$=!!(C.focusable||h&&typeof C.focusable>"u"),X=Fe(),Q=mm(C),O=eN({node:C,nodeType:V,hasDimensions:Q,resizeObserver:m}),R=Vm({nodeRef:O,disabled:C.hidden||!K,noDragClassName:x,handleSelector:C.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:I}),z=Bm();if(C.hidden)return null;const M=Sn(C),b=US(C),N=q||K||r||o||i||l,L=o?re=>o(re,{...P.userNode}):void 0,E=i?re=>i(re,{...P.userNode}):void 0,T=l?re=>l(re,{...P.userNode}):void 0,Z=u?re=>u(re,{...P.userNode}):void 0,G=d?re=>d(re,{...P.userNode}):void 0,ne=re=>{const{selectNodesOnDrag:ue,nodeDragThreshold:ve}=X.getState();q&&(!ue||!K||ve>0)&&fc({id:t,store:X,nodeRef:O}),r&&r(re,{...P.userNode})},oe=re=>{if(!(ym(re.nativeEvent)||S)){if(im.includes(re.key)&&q){const ue=re.key==="Escape";fc({id:t,store:X,unselect:ue,nodeRef:O})}else if(K&&C.selected&&Object.prototype.hasOwnProperty.call(_l,re.key)){re.preventDefault();const{ariaLabelConfig:ue}=X.getState();X.setState({ariaLiveMessage:ue["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~P.positionAbsolute.x,y:~~P.positionAbsolute.y})}),z({direction:_l[re.key],factor:re.shiftKey?4:1})}}},ae=()=>{var Ee;if(S||!((Ee=O.current)!=null&&Ee.matches(":focus-visible")))return;const{transform:re,width:ue,height:ve,autoPanOnNodeFocus:Ce,setCenter:ke}=X.getState();if(!Ce)return;Ic(new Map([[t,C]]),{x:0,y:0,width:ue,height:ve},re,!0).length>0||ke(C.position.x+M.width/2,C.position.y+M.height/2,{zoom:re[2]})};return c.jsx("div",{className:Ge(["react-flow__node",`react-flow__node-${V}`,{[w]:K},C.className,{selected:C.selected,selectable:q,parent:A,draggable:K,dragging:R}]),ref:O,style:{zIndex:P.z,transform:`translate(${P.positionAbsolute.x}px,${P.positionAbsolute.y}px)`,pointerEvents:N?"all":"none",visibility:Q?"visible":"hidden",...C.style,...b},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:L,onMouseMove:E,onMouseLeave:T,onContextMenu:Z,onClick:ne,onDoubleClick:G,onKeyDown:$?oe:void 0,tabIndex:$?0:void 0,onFocus:$?ae:void 0,role:C.ariaRole??($?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Lm}-${j}`,"aria-label":C.ariaLabel,...C.domAttributes,children:c.jsx($S,{value:t,children:c.jsx(W,{id:t,data:C.data,type:V,positionAbsoluteX:P.positionAbsolute.x,positionAbsoluteY:P.positionAbsolute.y,selected:C.selected??!1,selectable:q,draggable:K,deletable:C.deletable??!0,isConnectable:H,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:R,dragHandle:C.dragHandle,zIndex:P.z,parentId:C.parentId,...M})})})}var nN=F.memo(tN);const rN=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Ym(t){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,onError:u}=Me(rN,Re),d=qS(t.onlyRenderVisibleElements),p=JS();return c.jsx("div",{className:"react-flow__nodes",style:Fl,children:d.map(y=>c.jsx(nN,{id:y,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:p,nodesDraggable:r,nodesConnectable:o,nodesFocusable:i,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:u},y))})}Ym.displayName="NodeRenderer";const oN=F.memo(Ym);function sN(t){return Me(F.useCallback(o=>{if(!t)return o.edges.map(l=>l.id);const i=[];if(o.width&&o.height)for(const l of o.edges){const u=o.nodeLookup.get(l.source),d=o.nodeLookup.get(l.target);u&&d&&Zw({sourceNode:u,targetNode:d,width:o.width,height:o.height,transform:o.transform})&&i.push(l.id)}return i},[t]),Re)}const iN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t}};return c.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},lN=({color:t="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...t&&{stroke:t,fill:t}};return c.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},fh={[Il.Arrow]:iN,[Il.ArrowClosed]:lN};function aN(t){const r=Fe();return F.useMemo(()=>{var l,u;return Object.prototype.hasOwnProperty.call(fh,t)?fh[t]:((u=(l=r.getState()).onError)==null||u.call(l,"009",rn.error009(t)),null)},[t])}const uN=({id:t,type:r,color:o,width:i=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:d,orient:p="auto-start-reverse"})=>{const y=aN(r);return y?c.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:p,refX:"0",refY:"0",children:c.jsx(y,{color:o,strokeWidth:d})}):null},Xm=({defaultColor:t,rfId:r})=>{const o=Me(u=>u.edges),i=Me(u=>u.defaultEdgeOptions),l=F.useMemo(()=>i1(o,{id:r,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[o,i,r,t]);return l.length?c.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:c.jsx("defs",{children:l.map(u=>c.jsx(uN,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};Xm.displayName="MarkerDefinitions";var cN=F.memo(Xm);function Qm({x:t,y:r,label:o,labelStyle:i,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:d=[2,4],labelBgBorderRadius:p=2,children:y,className:g,...h}){const[m,x]=F.useState({x:1,y:0,width:0,height:0}),w=Ge(["react-flow__edge-textwrapper",g]),S=F.useRef(null);return F.useEffect(()=>{if(S.current){const j=S.current.getBBox();x({x:j.x,y:j.y,width:j.width,height:j.height})}},[o]),o?c.jsxs("g",{transform:`translate(${t-m.width/2} ${r-m.height/2})`,className:w,visibility:m.width?"visible":"hidden",...h,children:[l&&c.jsx("rect",{width:m.width+2*d[0],x:-d[0],y:-d[1],height:m.height+2*d[1],className:"react-flow__edge-textbg",style:u,rx:p,ry:p}),c.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:o}),y]}):null}Qm.displayName="EdgeText";const dN=F.memo(Qm);function yo({path:t,labelX:r,labelY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,interactionWidth:g=20,...h}){return c.jsxs(c.Fragment,{children:[c.jsx("path",{...h,d:t,fill:"none",className:Ge(["react-flow__edge-path",h.className])}),g?c.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,i&&Yt(r)&&Yt(o)?c.jsx(dN,{x:r,y:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y}):null]})}function ph({pos:t,x1:r,y1:o,x2:i,y2:l}){return t===ye.Left||t===ye.Right?[.5*(r+i),o]:[r,.5*(o+l)]}function Gm({sourceX:t,sourceY:r,sourcePosition:o=ye.Bottom,targetX:i,targetY:l,targetPosition:u=ye.Top}){const[d,p]=ph({pos:o,x1:t,y1:r,x2:i,y2:l}),[y,g]=ph({pos:u,x1:i,y1:l,x2:t,y2:r}),[h,m,x,w]=wm({sourceX:t,sourceY:r,targetX:i,targetY:l,sourceControlX:d,sourceControlY:p,targetControlX:y,targetControlY:g});return[`M${t},${r} C${d},${p} ${y},${g} ${i},${l}`,h,m,x,w]}function Km(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:d,targetPosition:p,label:y,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:x,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:k,interactionWidth:I})=>{const[D,C,P]=Gm({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:u,targetPosition:p}),A=t.isInternal?void 0:r;return c.jsx(yo,{id:A,path:D,labelX:C,labelY:P,label:y,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:x,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:k,interactionWidth:I})})}const fN=Km({isInternal:!1}),qm=Km({isInternal:!0});fN.displayName="SimpleBezierEdge";qm.displayName="SimpleBezierEdgeInternal";function Zm(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:d,labelStyle:p,labelShowBg:y,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:m,style:x,sourcePosition:w=ye.Bottom,targetPosition:S=ye.Top,markerEnd:j,markerStart:k,pathOptions:I,interactionWidth:D})=>{const[C,P,A]=ac({sourceX:o,sourceY:i,sourcePosition:w,targetX:l,targetY:u,targetPosition:S,borderRadius:I==null?void 0:I.borderRadius,offset:I==null?void 0:I.offset,stepPosition:I==null?void 0:I.stepPosition}),V=t.isInternal?void 0:r;return c.jsx(yo,{id:V,path:C,labelX:P,labelY:A,label:d,labelStyle:p,labelShowBg:y,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:m,style:x,markerEnd:j,markerStart:k,interactionWidth:D})})}const Jm=Zm({isInternal:!1}),eg=Zm({isInternal:!0});Jm.displayName="SmoothStepEdge";eg.displayName="SmoothStepEdgeInternal";function tg(t){return F.memo(({id:r,...o})=>{var l;const i=t.isInternal?void 0:r;return c.jsx(Jm,{...o,id:i,pathOptions:F.useMemo(()=>{var u;return{borderRadius:0,offset:(u=o.pathOptions)==null?void 0:u.offset}},[(l=o.pathOptions)==null?void 0:l.offset])})})}const pN=tg({isInternal:!1}),ng=tg({isInternal:!0});pN.displayName="StepEdge";ng.displayName="StepEdgeInternal";function rg(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,label:d,labelStyle:p,labelShowBg:y,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:m,style:x,markerEnd:w,markerStart:S,interactionWidth:j})=>{const[k,I,D]=Nm({sourceX:o,sourceY:i,targetX:l,targetY:u}),C=t.isInternal?void 0:r;return c.jsx(yo,{id:C,path:k,labelX:I,labelY:D,label:d,labelStyle:p,labelShowBg:y,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:m,style:x,markerEnd:w,markerStart:S,interactionWidth:j})})}const hN=rg({isInternal:!1}),og=rg({isInternal:!0});hN.displayName="StraightEdge";og.displayName="StraightEdgeInternal";function sg(t){return F.memo(({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:d=ye.Bottom,targetPosition:p=ye.Top,label:y,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:x,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:k,pathOptions:I,interactionWidth:D})=>{const[C,P,A]=Ll({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:u,targetPosition:p,curvature:I==null?void 0:I.curvature}),V=t.isInternal?void 0:r;return c.jsx(yo,{id:V,path:C,labelX:P,labelY:A,label:y,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:x,labelBgBorderRadius:w,style:S,markerEnd:j,markerStart:k,interactionWidth:D})})}const mN=sg({isInternal:!1}),ig=sg({isInternal:!0});mN.displayName="BezierEdge";ig.displayName="BezierEdgeInternal";const hh={default:ig,straight:og,step:ng,smoothstep:eg,simplebezier:qm},mh={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},gN=(t,r,o)=>o===ye.Left?t-r:o===ye.Right?t+r:t,xN=(t,r,o)=>o===ye.Top?t-r:o===ye.Bottom?t+r:t,gh="react-flow__edgeupdater";function xh({position:t,centerX:r,centerY:o,radius:i=10,onMouseDown:l,onMouseEnter:u,onMouseOut:d,type:p}){return c.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:d,className:Ge([gh,`${gh}-${p}`]),cx:gN(r,i,t),cy:xN(o,i,t),r:i,stroke:"transparent",fill:"transparent"})}function yN({isReconnectable:t,reconnectRadius:r,edge:o,sourceX:i,sourceY:l,targetX:u,targetY:d,sourcePosition:p,targetPosition:y,onReconnect:g,onReconnectStart:h,onReconnectEnd:m,setReconnecting:x,setUpdateHover:w}){const S=Fe(),j=(P,A)=>{if(P.button!==0)return;const{autoPanOnConnect:V,domNode:W,isValidConnection:K,connectionMode:q,connectionRadius:H,lib:$,onConnectStart:X,onConnectEnd:Q,cancelConnection:O,nodeLookup:R,rfId:z,panBy:M,updateConnection:b}=S.getState(),N=A.type==="target",L=(Z,G)=>{x(!1),m==null||m(Z,o,A.type,G)},E=Z=>g==null?void 0:g(o,Z),T=(Z,G)=>{x(!0),h==null||h(P,o,A.type),X==null||X(Z,G)};dc.onPointerDown(P.nativeEvent,{autoPanOnConnect:V,connectionMode:q,connectionRadius:H,domNode:W,handleId:A.id,nodeId:A.nodeId,nodeLookup:R,isTarget:N,edgeUpdaterType:A.type,lib:$,flowId:z,cancelConnection:O,panBy:M,isValidConnection:K,onConnect:E,onConnectStart:T,onConnectEnd:Q,onReconnectEnd:L,updateConnection:b,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:P.currentTarget})},k=P=>j(P,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),I=P=>j(P,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),D=()=>w(!0),C=()=>w(!1);return c.jsxs(c.Fragment,{children:[(t===!0||t==="source")&&c.jsx(xh,{position:p,centerX:i,centerY:l,radius:r,onMouseDown:k,onMouseEnter:D,onMouseOut:C,type:"source"}),(t===!0||t==="target")&&c.jsx(xh,{position:y,centerX:u,centerY:d,radius:r,onMouseDown:I,onMouseEnter:D,onMouseOut:C,type:"target"})]})}function vN({id:t,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:l,onDoubleClick:u,onContextMenu:d,onMouseEnter:p,onMouseMove:y,onMouseLeave:g,reconnectRadius:h,onReconnect:m,onReconnectStart:x,onReconnectEnd:w,rfId:S,edgeTypes:j,noPanClassName:k,onError:I,disableKeyboardA11y:D}){let C=Me(ke=>ke.edgeLookup.get(t));const P=Me(ke=>ke.defaultEdgeOptions);C=P?{...P,...C}:C;let A=C.type||"default",V=(j==null?void 0:j[A])||hh[A];V===void 0&&(I==null||I("011",rn.error011(A)),A="default",V=(j==null?void 0:j.default)||hh.default);const W=!!(C.focusable||r&&typeof C.focusable>"u"),K=typeof m<"u"&&(C.reconnectable||o&&typeof C.reconnectable>"u"),q=!!(C.selectable||i&&typeof C.selectable>"u"),H=F.useRef(null),[$,X]=F.useState(!1),[Q,O]=F.useState(!1),R=Fe(),{zIndex:z,sourceX:M,sourceY:b,targetX:N,targetY:L,sourcePosition:E,targetPosition:T}=Me(F.useCallback(ke=>{const we=ke.nodeLookup.get(C.source),Ee=ke.nodeLookup.get(C.target);if(!we||!Ee)return{zIndex:C.zIndex,...mh};const Te=s1({id:t,sourceNode:we,targetNode:Ee,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:ke.connectionMode,onError:I});return{zIndex:qw({selected:C.selected,zIndex:C.zIndex,sourceNode:we,targetNode:Ee,elevateOnSelect:ke.elevateEdgesOnSelect,zIndexMode:ke.zIndexMode}),...Te||mh}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),Re),Z=F.useMemo(()=>C.markerStart?`url('#${uc(C.markerStart,S)}')`:void 0,[C.markerStart,S]),G=F.useMemo(()=>C.markerEnd?`url('#${uc(C.markerEnd,S)}')`:void 0,[C.markerEnd,S]);if(C.hidden||M===null||b===null||N===null||L===null)return null;const ne=ke=>{var _e;const{addSelectedEdges:we,unselectNodesAndEdges:Ee,multiSelectionActive:Te}=R.getState();q&&(R.setState({nodesSelectionActive:!1}),C.selected&&Te?(Ee({nodes:[],edges:[C]}),(_e=H.current)==null||_e.blur()):we([t])),l&&l(ke,C)},oe=u?ke=>{u(ke,{...C})}:void 0,ae=d?ke=>{d(ke,{...C})}:void 0,re=p?ke=>{p(ke,{...C})}:void 0,ue=y?ke=>{y(ke,{...C})}:void 0,ve=g?ke=>{g(ke,{...C})}:void 0,Ce=ke=>{var we;if(!D&&im.includes(ke.key)&&q){const{unselectNodesAndEdges:Ee,addSelectedEdges:Te}=R.getState();ke.key==="Escape"?((we=H.current)==null||we.blur(),Ee({edges:[C]})):Te([t])}};return c.jsx("svg",{style:{zIndex:z},children:c.jsxs("g",{className:Ge(["react-flow__edge",`react-flow__edge-${A}`,C.className,k,{selected:C.selected,animated:C.animated,inactive:!q&&!l,updating:$,selectable:q}]),onClick:ne,onDoubleClick:oe,onContextMenu:ae,onMouseEnter:re,onMouseMove:ue,onMouseLeave:ve,onKeyDown:W?Ce:void 0,tabIndex:W?0:void 0,role:C.ariaRole??(W?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":W?`${$m}-${S}`:void 0,ref:H,...C.domAttributes,children:[!Q&&c.jsx(V,{id:t,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:q,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:M,sourceY:b,targetX:N,targetY:L,sourcePosition:E,targetPosition:T,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Z,markerEnd:G,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),K&&c.jsx(yN,{edge:C,isReconnectable:K,reconnectRadius:h,onReconnect:m,onReconnectStart:x,onReconnectEnd:w,sourceX:M,sourceY:b,targetX:N,targetY:L,sourcePosition:E,targetPosition:T,setUpdateHover:X,setReconnecting:O})]})})}var wN=F.memo(vN);const SN=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function lg({defaultMarkerColor:t,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:l,onReconnect:u,onEdgeContextMenu:d,onEdgeMouseEnter:p,onEdgeMouseMove:y,onEdgeMouseLeave:g,onEdgeClick:h,reconnectRadius:m,onEdgeDoubleClick:x,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:j}){const{edgesFocusable:k,edgesReconnectable:I,elementsSelectable:D,onError:C}=Me(SN,Re),P=sN(r);return c.jsxs("div",{className:"react-flow__edges",children:[c.jsx(cN,{defaultColor:t,rfId:o}),P.map(A=>c.jsx(wN,{id:A,edgesFocusable:k,edgesReconnectable:I,elementsSelectable:D,noPanClassName:l,onReconnect:u,onContextMenu:d,onMouseEnter:p,onMouseMove:y,onMouseLeave:g,onClick:h,reconnectRadius:m,onDoubleClick:x,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:C,edgeTypes:i,disableKeyboardA11y:j},A))]})}lg.displayName="EdgeRenderer";const NN=F.memo(lg),kN=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function CN({children:t}){const r=Me(kN);return c.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:t})}function IN(t){const r=Er(),o=F.useRef(!1);F.useEffect(()=>{!o.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),o.current=!0)},[t,r.viewportInitialized])}const jN=t=>{var r;return(r=t.panZoom)==null?void 0:r.syncViewport};function EN(t){const r=Me(jN),o=Fe();return F.useEffect(()=>{t&&(r==null||r(t),o.setState({transform:[t.x,t.y,t.zoom]}))},[t,r]),null}function _N(t){return t.connection.inProgress?{...t.connection,to:Ts(t.connection.to,t.transform)}:{...t.connection}}function MN(t){return _N}function bN(t){const r=MN();return Me(r,Re)}const PN=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function DN({containerStyle:t,style:r,type:o,component:i}){const{nodesConnectable:l,width:u,height:d,isValid:p,inProgress:y}=Me(PN,Re);return!(u&&l&&y)?null:c.jsx("svg",{style:t,width:u,height:d,className:"react-flow__connectionline react-flow__container",children:c.jsx("g",{className:Ge(["react-flow__connection",um(p)]),children:c.jsx(ag,{style:r,type:o,CustomComponent:i,isValid:p})})})}const ag=({style:t,type:r=Yn.Bezier,CustomComponent:o,isValid:i})=>{const{inProgress:l,from:u,fromNode:d,fromHandle:p,fromPosition:y,to:g,toNode:h,toHandle:m,toPosition:x,pointer:w}=bN();if(!l)return;if(o)return c.jsx(o,{connectionLineType:r,connectionLineStyle:t,fromNode:d,fromHandle:p,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:y,toPosition:x,connectionStatus:um(i),toNode:h,toHandle:m,pointer:w});let S="";const j={sourceX:u.x,sourceY:u.y,sourcePosition:y,targetX:g.x,targetY:g.y,targetPosition:x};switch(r){case Yn.Bezier:[S]=Ll(j);break;case Yn.SimpleBezier:[S]=Gm(j);break;case Yn.Step:[S]=ac({...j,borderRadius:0});break;case Yn.SmoothStep:[S]=ac(j);break;default:[S]=Nm(j)}return c.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:t})};ag.displayName="ConnectionLine";const TN={};function yh(t=TN){F.useRef(t),Fe(),F.useEffect(()=>{},[t])}function ON(){Fe(),F.useRef(!1),F.useEffect(()=>{},[])}function ug({nodeTypes:t,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:g,onNodeContextMenu:h,onSelectionContextMenu:m,onSelectionStart:x,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:j,connectionLineComponent:k,connectionLineContainerStyle:I,selectionKeyCode:D,selectionOnDrag:C,selectionMode:P,multiSelectionKeyCode:A,panActivationKeyCode:V,zoomActivationKeyCode:W,deleteKeyCode:K,onlyRenderVisibleElements:q,elementsSelectable:H,defaultViewport:$,translateExtent:X,minZoom:Q,maxZoom:O,preventScrolling:R,defaultMarkerColor:z,zoomOnScroll:M,zoomOnPinch:b,panOnScroll:N,panOnScrollSpeed:L,panOnScrollMode:E,zoomOnDoubleClick:T,panOnDrag:Z,onPaneClick:G,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneScroll:re,onPaneContextMenu:ue,paneClickDistance:ve,nodeClickDistance:Ce,onEdgeContextMenu:ke,onEdgeMouseEnter:we,onEdgeMouseMove:Ee,onEdgeMouseLeave:Te,reconnectRadius:_e,onReconnect:Xe,onReconnectStart:Lt,onReconnectEnd:xt,noDragClassName:yt,noWheelClassName:_t,noPanClassName:sn,disableKeyboardA11y:Nn,nodeExtent:_r,rfId:Qn,viewport:ln,onViewportChange:an}){return yh(t),yh(r),ON(),IN(o),EN(ln),c.jsx(GS,{onPaneClick:G,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ae,onPaneContextMenu:ue,onPaneScroll:re,paneClickDistance:ve,deleteKeyCode:K,selectionKeyCode:D,selectionOnDrag:C,selectionMode:P,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:A,panActivationKeyCode:V,zoomActivationKeyCode:W,elementsSelectable:H,zoomOnScroll:M,zoomOnPinch:b,zoomOnDoubleClick:T,panOnScroll:N,panOnScrollSpeed:L,panOnScrollMode:E,panOnDrag:Z,defaultViewport:$,translateExtent:X,minZoom:Q,maxZoom:O,onSelectionContextMenu:m,preventScrolling:R,noDragClassName:yt,noWheelClassName:_t,noPanClassName:sn,disableKeyboardA11y:Nn,onViewportChange:an,isControlledViewport:!!ln,children:c.jsxs(CN,{children:[c.jsx(NN,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:Xe,onReconnectStart:Lt,onReconnectEnd:xt,onlyRenderVisibleElements:q,onEdgeContextMenu:ke,onEdgeMouseEnter:we,onEdgeMouseMove:Ee,onEdgeMouseLeave:Te,reconnectRadius:_e,defaultMarkerColor:z,noPanClassName:sn,disableKeyboardA11y:Nn,rfId:Qn}),c.jsx(DN,{style:j,type:S,component:k,containerStyle:I}),c.jsx("div",{className:"react-flow__edgelabel-renderer"}),c.jsx(oN,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:g,onNodeContextMenu:h,nodeClickDistance:Ce,onlyRenderVisibleElements:q,noPanClassName:sn,noDragClassName:yt,disableKeyboardA11y:Nn,nodeExtent:_r,rfId:Qn}),c.jsx("div",{className:"react-flow__viewport-portal"})]})})}ug.displayName="GraphView";const AN=F.memo(ug),vh=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:d,fitViewOptions:p,minZoom:y=.5,maxZoom:g=2,nodeOrigin:h,nodeExtent:m,zIndexMode:x="basic"}={})=>{const w=new Map,S=new Map,j=new Map,k=new Map,I=i??r??[],D=o??t??[],C=h??[0,0],P=m??Ns;Im(j,k,I);const A=cc(D,w,S,{nodeOrigin:C,nodeExtent:P,zIndexMode:x});let V=[0,0,1];if(d&&l&&u){const W=Ps(w,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:K,y:q,zoom:H}=jc(W,l,u,y,g,(p==null?void 0:p.padding)??.1);V=[K,q,H]}return{rfId:"1",width:l??0,height:u??0,transform:V,nodes:D,nodesInitialized:A,nodeLookup:w,parentLookup:S,edges:I,edgeLookup:k,connectionLookup:j,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:y,maxZoom:g,translateExtent:Ns,nodeExtent:P,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ho.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:p,fitViewResolver:null,connection:{...am},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Uw,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:lm,zIndexMode:x,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},LN=({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:d,fitViewOptions:p,minZoom:y,maxZoom:g,nodeOrigin:h,nodeExtent:m,zIndexMode:x})=>q1((w,S)=>{async function j(){const{nodeLookup:k,panZoom:I,fitViewOptions:D,fitViewResolver:C,width:P,height:A,minZoom:V,maxZoom:W}=S();I&&(await Bw({nodes:k,width:P,height:A,panZoom:I,minZoom:V,maxZoom:W},D),C==null||C.resolve(!0),w({fitViewResolver:null}))}return{...vh({nodes:t,edges:r,width:l,height:u,fitView:d,fitViewOptions:p,minZoom:y,maxZoom:g,nodeOrigin:h,nodeExtent:m,defaultNodes:o,defaultEdges:i,zIndexMode:x}),setNodes:k=>{const{nodeLookup:I,parentLookup:D,nodeOrigin:C,elevateNodesOnSelect:P,fitViewQueued:A,zIndexMode:V}=S(),W=cc(k,I,D,{nodeOrigin:C,nodeExtent:m,elevateNodesOnSelect:P,checkEquality:!0,zIndexMode:V});A&&W?(j(),w({nodes:k,nodesInitialized:W,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:k,nodesInitialized:W})},setEdges:k=>{const{connectionLookup:I,edgeLookup:D}=S();Im(I,D,k),w({edges:k})},setDefaultNodesAndEdges:(k,I)=>{if(k){const{setNodes:D}=S();D(k),w({hasDefaultNodes:!0})}if(I){const{setEdges:D}=S();D(I),w({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:I,nodeLookup:D,parentLookup:C,domNode:P,nodeOrigin:A,nodeExtent:V,debug:W,fitViewQueued:K,zIndexMode:q}=S(),{changes:H,updatedInternals:$}=p1(k,D,C,P,A,V,q);$&&(u1(D,C,{nodeOrigin:A,nodeExtent:V,zIndexMode:q}),K?(j(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(H==null?void 0:H.length)>0&&(W&&console.log("React Flow: trigger node changes",H),I==null||I(H)))},updateNodePositions:(k,I=!1)=>{const D=[];let C=[];const{nodeLookup:P,triggerNodeChanges:A,connection:V,updateConnection:W,onNodesChangeMiddlewareMap:K}=S();for(const[q,H]of k){const $=P.get(q),X=!!($!=null&&$.expandParent&&($!=null&&$.parentId)&&(H!=null&&H.position)),Q={id:q,type:"position",position:X?{x:Math.max(0,H.position.x),y:Math.max(0,H.position.y)}:H.position,dragging:I};if($&&V.inProgress&&V.fromNode.id===$.id){const O=Nr($,V.fromHandle,ye.Left,!0);W({...V,from:O})}X&&$.parentId&&D.push({id:q,parentId:$.parentId,rect:{...H.internals.positionAbsolute,width:H.measured.width??0,height:H.measured.height??0}}),C.push(Q)}if(D.length>0){const{parentLookup:q,nodeOrigin:H}=S(),$=Dc(D,P,q,H);C.push(...$)}for(const q of K.values())C=q(C);A(C)},triggerNodeChanges:k=>{const{onNodesChange:I,setNodes:D,nodes:C,hasDefaultNodes:P,debug:A}=S();if(k!=null&&k.length){if(P){const V=vS(k,C);D(V)}A&&console.log("React Flow: trigger node changes",k),I==null||I(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:I,setEdges:D,edges:C,hasDefaultEdges:P,debug:A}=S();if(k!=null&&k.length){if(P){const V=wS(k,C);D(V)}A&&console.log("React Flow: trigger edge changes",k),I==null||I(k)}},addSelectedNodes:k=>{const{multiSelectionActive:I,edgeLookup:D,nodeLookup:C,triggerNodeChanges:P,triggerEdgeChanges:A}=S();if(I){const V=k.map(W=>hr(W,!0));P(V);return}P(ao(C,new Set([...k]),!0)),A(ao(D))},addSelectedEdges:k=>{const{multiSelectionActive:I,edgeLookup:D,nodeLookup:C,triggerNodeChanges:P,triggerEdgeChanges:A}=S();if(I){const V=k.map(W=>hr(W,!0));A(V);return}A(ao(D,new Set([...k]))),P(ao(C,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:I}={})=>{const{edges:D,nodes:C,nodeLookup:P,triggerNodeChanges:A,triggerEdgeChanges:V}=S(),W=k||C,K=I||D,q=W.map($=>{const X=P.get($.id);return X&&(X.selected=!1),hr($.id,!1)}),H=K.map($=>hr($.id,!1));A(q),V(H)},setMinZoom:k=>{const{panZoom:I,maxZoom:D}=S();I==null||I.setScaleExtent([k,D]),w({minZoom:k})},setMaxZoom:k=>{const{panZoom:I,minZoom:D}=S();I==null||I.setScaleExtent([D,k]),w({maxZoom:k})},setTranslateExtent:k=>{var I;(I=S().panZoom)==null||I.setTranslateExtent(k),w({translateExtent:k})},resetSelectedElements:()=>{const{edges:k,nodes:I,triggerNodeChanges:D,triggerEdgeChanges:C,elementsSelectable:P}=S();if(!P)return;const A=I.reduce((W,K)=>K.selected?[...W,hr(K.id,!1)]:W,[]),V=k.reduce((W,K)=>K.selected?[...W,hr(K.id,!1)]:W,[]);D(A),C(V)},setNodeExtent:k=>{const{nodes:I,nodeLookup:D,parentLookup:C,nodeOrigin:P,elevateNodesOnSelect:A,nodeExtent:V,zIndexMode:W}=S();k[0][0]===V[0][0]&&k[0][1]===V[0][1]&&k[1][0]===V[1][0]&&k[1][1]===V[1][1]||(cc(I,D,C,{nodeOrigin:P,nodeExtent:k,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:W}),w({nodeExtent:k}))},panBy:k=>{const{transform:I,width:D,height:C,panZoom:P,translateExtent:A}=S();return h1({delta:k,panZoom:P,transform:I,translateExtent:A,width:D,height:C})},setCenter:async(k,I,D)=>{const{width:C,height:P,maxZoom:A,panZoom:V}=S();if(!V)return Promise.resolve(!1);const W=typeof(D==null?void 0:D.zoom)<"u"?D.zoom:A;return await V.setViewport({x:C/2-k*W,y:P/2-I*W,zoom:W},{duration:D==null?void 0:D.duration,ease:D==null?void 0:D.ease,interpolate:D==null?void 0:D.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...am}})},updateConnection:k=>{w({connection:k})},reset:()=>w({...vh()})}},Object.is);function Hl({initialNodes:t,initialEdges:r,defaultNodes:o,defaultEdges:i,initialWidth:l,initialHeight:u,initialMinZoom:d,initialMaxZoom:p,initialFitViewOptions:y,fitView:g,nodeOrigin:h,nodeExtent:m,zIndexMode:x,children:w}){const[S]=F.useState(()=>LN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,width:l,height:u,fitView:g,minZoom:d,maxZoom:p,fitViewOptions:y,nodeOrigin:h,nodeExtent:m,zIndexMode:x}));return c.jsx(J1,{value:S,children:c.jsx(CS,{children:w})})}function $N({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:l,width:u,height:d,fitView:p,fitViewOptions:y,minZoom:g,maxZoom:h,nodeOrigin:m,nodeExtent:x,zIndexMode:w}){return F.useContext(zl)?c.jsx(c.Fragment,{children:t}):c.jsx(Hl,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:l,initialWidth:u,initialHeight:d,fitView:p,initialFitViewOptions:y,initialMinZoom:g,initialMaxZoom:h,nodeOrigin:m,nodeExtent:x,zIndexMode:w,children:t})}const zN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function RN({nodes:t,edges:r,defaultNodes:o,defaultEdges:i,className:l,nodeTypes:u,edgeTypes:d,onNodeClick:p,onEdgeClick:y,onInit:g,onMove:h,onMoveStart:m,onMoveEnd:x,onConnect:w,onConnectStart:S,onConnectEnd:j,onClickConnectStart:k,onClickConnectEnd:I,onNodeMouseEnter:D,onNodeMouseMove:C,onNodeMouseLeave:P,onNodeContextMenu:A,onNodeDoubleClick:V,onNodeDragStart:W,onNodeDrag:K,onNodeDragStop:q,onNodesDelete:H,onEdgesDelete:$,onDelete:X,onSelectionChange:Q,onSelectionDragStart:O,onSelectionDrag:R,onSelectionDragStop:z,onSelectionContextMenu:M,onSelectionStart:b,onSelectionEnd:N,onBeforeDelete:L,connectionMode:E,connectionLineType:T=Yn.Bezier,connectionLineStyle:Z,connectionLineComponent:G,connectionLineContainerStyle:ne,deleteKeyCode:oe="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:re=!1,selectionMode:ue=ks.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:Ce=Is()?"Meta":"Control",zoomActivationKeyCode:ke=Is()?"Meta":"Control",snapToGrid:we,snapGrid:Ee,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:_e,nodesDraggable:Xe,autoPanOnNodeFocus:Lt,nodesConnectable:xt,nodesFocusable:yt,nodeOrigin:_t=zm,edgesFocusable:sn,edgesReconnectable:Nn,elementsSelectable:_r=!0,defaultViewport:Qn=fS,minZoom:ln=.5,maxZoom:an=2,translateExtent:Gn=Ns,preventScrolling:Os=!0,nodeExtent:un,defaultMarkerColor:Kn="#b1b1b7",zoomOnScroll:Bl=!0,zoomOnPinch:As=!0,panOnScroll:Ls=!1,panOnScrollSpeed:Wl=.5,panOnScrollMode:vo=yr.Free,zoomOnDoubleClick:wo=!0,panOnDrag:So=!0,onPaneClick:No,onPaneMouseEnter:ko,onPaneMouseMove:kn,onPaneMouseLeave:Cn,onPaneScroll:$s,onPaneContextMenu:zs,paneClickDistance:Rs=1,nodeClickDistance:Fs=0,children:Hs,onReconnect:Co,onReconnectStart:Vs,onReconnectEnd:qn,onEdgeContextMenu:Io,onEdgeDoubleClick:Zn,onEdgeMouseEnter:Ul,onEdgeMouseMove:Jn,onEdgeMouseLeave:Mr,reconnectRadius:br=10,onNodesChange:jo,onEdgesChange:Yl,noDragClassName:Xl="nodrag",noWheelClassName:Ql="nowheel",noPanClassName:Gt="nopan",fitView:Eo,fitViewOptions:_o,connectOnClick:Gl,attributionPosition:Bs,proOptions:Ws,defaultEdgeOptions:Us,elevateNodesOnSelect:Ys=!0,elevateEdgesOnSelect:Kl=!1,disableKeyboardA11y:Xs=!1,autoPanOnConnect:He,autoPanOnNodeDrag:ql,autoPanSpeed:Mo,connectionRadius:Qs,isValidConnection:Pr,onError:Zl,style:Gs,id:er,nodeDragThreshold:Mt,connectionDragThreshold:Jl,viewport:vt,onViewportChange:ea,width:ta,height:na,colorMode:Dr="light",debug:Tr,onScroll:Kt,ariaLabelConfig:Or,zIndexMode:Ks="basic",...ra},bo){const Ar=er||"1",Po=gS(Dr),tr=F.useCallback(qs=>{qs.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Kt==null||Kt(qs)},[Kt]);return c.jsx("div",{"data-testid":"rf__wrapper",...ra,onScroll:tr,style:{...Gs,...zN},ref:bo,className:Ge(["react-flow",l,Po]),id:er,role:"application",children:c.jsxs($N,{nodes:t,edges:r,width:ta,height:na,fitView:Eo,fitViewOptions:_o,minZoom:ln,maxZoom:an,nodeOrigin:_t,nodeExtent:un,zIndexMode:Ks,children:[c.jsx(AN,{onInit:g,onNodeClick:p,onEdgeClick:y,onNodeMouseEnter:D,onNodeMouseMove:C,onNodeMouseLeave:P,onNodeContextMenu:A,onNodeDoubleClick:V,nodeTypes:u,edgeTypes:d,connectionLineType:T,connectionLineStyle:Z,connectionLineComponent:G,connectionLineContainerStyle:ne,selectionKeyCode:ae,selectionOnDrag:re,selectionMode:ue,deleteKeyCode:oe,multiSelectionKeyCode:Ce,panActivationKeyCode:ve,zoomActivationKeyCode:ke,onlyRenderVisibleElements:Te,defaultViewport:Qn,translateExtent:Gn,minZoom:ln,maxZoom:an,preventScrolling:Os,zoomOnScroll:Bl,zoomOnPinch:As,zoomOnDoubleClick:wo,panOnScroll:Ls,panOnScrollSpeed:Wl,panOnScrollMode:vo,panOnDrag:So,onPaneClick:No,onPaneMouseEnter:ko,onPaneMouseMove:kn,onPaneMouseLeave:Cn,onPaneScroll:$s,onPaneContextMenu:zs,paneClickDistance:Rs,nodeClickDistance:Fs,onSelectionContextMenu:M,onSelectionStart:b,onSelectionEnd:N,onReconnect:Co,onReconnectStart:Vs,onReconnectEnd:qn,onEdgeContextMenu:Io,onEdgeDoubleClick:Zn,onEdgeMouseEnter:Ul,onEdgeMouseMove:Jn,onEdgeMouseLeave:Mr,reconnectRadius:br,defaultMarkerColor:Kn,noDragClassName:Xl,noWheelClassName:Ql,noPanClassName:Gt,rfId:Ar,disableKeyboardA11y:Xs,nodeExtent:un,viewport:vt,onViewportChange:ea}),c.jsx(mS,{nodes:t,edges:r,defaultNodes:o,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:j,onClickConnectStart:k,onClickConnectEnd:I,nodesDraggable:Xe,autoPanOnNodeFocus:Lt,nodesConnectable:xt,nodesFocusable:yt,edgesFocusable:sn,edgesReconnectable:Nn,elementsSelectable:_r,elevateNodesOnSelect:Ys,elevateEdgesOnSelect:Kl,minZoom:ln,maxZoom:an,nodeExtent:un,onNodesChange:jo,onEdgesChange:Yl,snapToGrid:we,snapGrid:Ee,connectionMode:E,translateExtent:Gn,connectOnClick:Gl,defaultEdgeOptions:Us,fitView:Eo,fitViewOptions:_o,onNodesDelete:H,onEdgesDelete:$,onDelete:X,onNodeDragStart:W,onNodeDrag:K,onNodeDragStop:q,onSelectionDrag:R,onSelectionDragStart:O,onSelectionDragStop:z,onMove:h,onMoveStart:m,onMoveEnd:x,noPanClassName:Gt,nodeOrigin:_t,rfId:Ar,autoPanOnConnect:He,autoPanOnNodeDrag:ql,autoPanSpeed:Mo,onError:Zl,connectionRadius:Qs,isValidConnection:Pr,selectNodesOnDrag:_e,nodeDragThreshold:Mt,connectionDragThreshold:Jl,onBeforeDelete:L,debug:Tr,ariaLabelConfig:Or,zIndexMode:Ks}),c.jsx(dS,{onSelectionChange:Q}),Hs,c.jsx(iS,{proOptions:Ws,position:Bs}),c.jsx(sS,{rfId:Ar,disableKeyboardA11y:Xs})]})})}var cg=Fm(RN);const FN=t=>{var r;return(r=t.domNode)==null?void 0:r.querySelector(".react-flow__edgelabel-renderer")};function dg({children:t}){const r=Me(FN);return r?Z1.createPortal(t,r):null}function HN({dimensions:t,lineWidth:r,variant:o,className:i}){return c.jsx("path",{strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ge(["react-flow__background-pattern",o,i])})}function VN({radius:t,className:r}){return c.jsx("circle",{cx:t,cy:t,r:t,className:Ge(["react-flow__background-pattern","dots",r])})}var Xn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Xn||(Xn={}));const BN={[Xn.Dots]:1,[Xn.Lines]:1,[Xn.Cross]:6},WN=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function fg({id:t,variant:r=Xn.Dots,gap:o=20,size:i,lineWidth:l=1,offset:u=0,color:d,bgColor:p,style:y,className:g,patternClassName:h}){const m=F.useRef(null),{transform:x,patternId:w}=Me(WN,Re),S=i||BN[r],j=r===Xn.Dots,k=r===Xn.Cross,I=Array.isArray(o)?o:[o,o],D=[I[0]*x[2]||1,I[1]*x[2]||1],C=S*x[2],P=Array.isArray(u)?u:[u,u],A=k?[C,C]:D,V=[P[0]*x[2]||1+A[0]/2,P[1]*x[2]||1+A[1]/2],W=`${w}${t||""}`;return c.jsxs("svg",{className:Ge(["react-flow__background",g]),style:{...y,...Fl,"--xy-background-color-props":p,"--xy-background-pattern-color-props":d},ref:m,"data-testid":"rf__background",children:[c.jsx("pattern",{id:W,x:x[0]%D[0],y:x[1]%D[1],width:D[0],height:D[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${V[0]},-${V[1]})`,children:j?c.jsx(VN,{radius:C/2,className:h}):c.jsx(HN,{dimensions:A,lineWidth:l,variant:r,className:h})}),c.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}fg.displayName="Background";const pg=F.memo(fg);function UN(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:c.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function YN(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:c.jsx("path",{d:"M0 0h32v4.2H0z"})})}function XN(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:c.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function QN(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function GN(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ll({children:t,className:r,...o}){return c.jsx("button",{type:"button",className:Ge(["react-flow__controls-button",r]),...o,children:t})}const KN=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function hg({style:t,showZoom:r=!0,showFitView:o=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:d,onFitView:p,onInteractiveChange:y,className:g,children:h,position:m="bottom-left",orientation:x="vertical","aria-label":w}){const S=Fe(),{isInteractive:j,minZoomReached:k,maxZoomReached:I,ariaLabelConfig:D}=Me(KN,Re),{zoomIn:C,zoomOut:P,fitView:A}=Er(),V=()=>{C(),u==null||u()},W=()=>{P(),d==null||d()},K=()=>{A(l),p==null||p()},q=()=>{S.setState({nodesDraggable:!j,nodesConnectable:!j,elementsSelectable:!j}),y==null||y(!j)},H=x==="horizontal"?"horizontal":"vertical";return c.jsxs(Rl,{className:Ge(["react-flow__controls",H,g]),position:m,style:t,"data-testid":"rf__controls","aria-label":w??D["controls.ariaLabel"],children:[r&&c.jsxs(c.Fragment,{children:[c.jsx(ll,{onClick:V,className:"react-flow__controls-zoomin",title:D["controls.zoomIn.ariaLabel"],"aria-label":D["controls.zoomIn.ariaLabel"],disabled:I,children:c.jsx(UN,{})}),c.jsx(ll,{onClick:W,className:"react-flow__controls-zoomout",title:D["controls.zoomOut.ariaLabel"],"aria-label":D["controls.zoomOut.ariaLabel"],disabled:k,children:c.jsx(YN,{})})]}),o&&c.jsx(ll,{className:"react-flow__controls-fitview",onClick:K,title:D["controls.fitView.ariaLabel"],"aria-label":D["controls.fitView.ariaLabel"],children:c.jsx(XN,{})}),i&&c.jsx(ll,{className:"react-flow__controls-interactive",onClick:q,title:D["controls.interactive.ariaLabel"],"aria-label":D["controls.interactive.ariaLabel"],children:j?c.jsx(GN,{}):c.jsx(QN,{})}),h]})}hg.displayName="Controls";const mg=F.memo(hg);function qN({id:t,x:r,y:o,width:i,height:l,style:u,color:d,strokeColor:p,strokeWidth:y,className:g,borderRadius:h,shapeRendering:m,selected:x,onClick:w}){const{background:S,backgroundColor:j}=u||{},k=d||S||j;return c.jsx("rect",{className:Ge(["react-flow__minimap-node",{selected:x},g]),x:r,y:o,rx:h,ry:h,width:i,height:l,style:{fill:k,stroke:p,strokeWidth:y},shapeRendering:m,onClick:w?I=>w(I,t):void 0})}const ZN=F.memo(qN),JN=t=>t.nodes.map(r=>r.id),Zu=t=>t instanceof Function?t:()=>t;function ek({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:u=ZN,onClick:d}){const p=Me(JN,Re),y=Zu(r),g=Zu(t),h=Zu(o),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return c.jsx(c.Fragment,{children:p.map(x=>c.jsx(nk,{id:x,nodeColorFunc:y,nodeStrokeColorFunc:g,nodeClassNameFunc:h,nodeBorderRadius:i,nodeStrokeWidth:l,NodeComponent:u,onClick:d,shapeRendering:m},x))})}function tk({id:t,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:i,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:d,NodeComponent:p,onClick:y}){const{node:g,x:h,y:m,width:x,height:w}=Me(S=>{const{internals:j}=S.nodeLookup.get(t),k=j.userNode,{x:I,y:D}=j.positionAbsolute,{width:C,height:P}=Sn(k);return{node:k,x:I,y:D,width:C,height:P}},Re);return!g||g.hidden||!mm(g)?null:c.jsx(p,{x:h,y:m,width:x,height:w,style:g.style,selected:!!g.selected,className:i(g),color:r(g),borderRadius:l,strokeColor:o(g),strokeWidth:u,shapeRendering:d,onClick:y,id:g.id})}const nk=F.memo(tk);var rk=F.memo(ek);const ok=200,sk=150,ik=t=>!t.hidden,lk=t=>{const r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:t.nodeLookup.size>0?hm(Ps(t.nodeLookup,{filter:ik}),r):r,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},ak="react-flow__minimap-desc";function gg({style:t,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:d,nodeComponent:p,bgColor:y,maskColor:g,maskStrokeColor:h,maskStrokeWidth:m,position:x="bottom-right",onClick:w,onNodeClick:S,pannable:j=!1,zoomable:k=!1,ariaLabel:I,inversePan:D,zoomStep:C=1,offsetScale:P=5}){const A=Fe(),V=F.useRef(null),{boundingRect:W,viewBB:K,rfId:q,panZoom:H,translateExtent:$,flowWidth:X,flowHeight:Q,ariaLabelConfig:O}=Me(lk,Re),R=(t==null?void 0:t.width)??ok,z=(t==null?void 0:t.height)??sk,M=W.width/R,b=W.height/z,N=Math.max(M,b),L=N*R,E=N*z,T=P*N,Z=W.x-(L-W.width)/2-T,G=W.y-(E-W.height)/2-T,ne=L+T*2,oe=E+T*2,ae=`${ak}-${q}`,re=F.useRef(0),ue=F.useRef();re.current=N,F.useEffect(()=>{if(V.current&&H)return ue.current=k1({domNode:V.current,panZoom:H,getTransform:()=>A.getState().transform,getViewScale:()=>re.current}),()=>{var we;(we=ue.current)==null||we.destroy()}},[H]),F.useEffect(()=>{var we;(we=ue.current)==null||we.update({translateExtent:$,width:X,height:Q,inversePan:D,pannable:j,zoomStep:C,zoomable:k})},[j,k,D,C,$,X,Q]);const ve=w?we=>{var _e;const[Ee,Te]=((_e=ue.current)==null?void 0:_e.pointer(we))||[0,0];w(we,{x:Ee,y:Te})}:void 0,Ce=S?F.useCallback((we,Ee)=>{const Te=A.getState().nodeLookup.get(Ee).internals.userNode;S(we,Te)},[]):void 0,ke=I??O["minimap.ariaLabel"];return c.jsx(Rl,{position:x,style:{...t,"--xy-minimap-background-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*N:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:Ge(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:c.jsxs("svg",{width:R,height:z,viewBox:`${Z} ${G} ${ne} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:V,onClick:ve,children:[ke&&c.jsx("title",{id:ae,children:ke}),c.jsx(rk,{onClick:Ce,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:p}),c.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-T},${G-T}h${ne+T*2}v${oe+T*2}h${-ne-T*2}z
        M${K.x},${K.y}h${K.width}v${K.height}h${-K.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}gg.displayName="MiniMap";const uk=F.memo(gg),ck=t=>r=>t?`${Math.max(1/r.transform[2],1)}`:void 0,dk={[kr.Line]:"right",[kr.Handle]:"bottom-right"};function fk({nodeId:t,position:r,variant:o=kr.Handle,className:i,style:l=void 0,children:u,color:d,minWidth:p=10,minHeight:y=10,maxWidth:g=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:x,autoScale:w=!0,shouldResize:S,onResizeStart:j,onResize:k,onResizeEnd:I}){const D=Wm(),C=typeof t=="string"?t:D,P=Fe(),A=F.useRef(null),V=o===kr.Handle,W=Me(F.useCallback(ck(V&&w),[V,w]),Re),K=F.useRef(null),q=r??dk[o];F.useEffect(()=>{if(!(!A.current||!C))return K.current||(K.current=R1({domNode:A.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:$,transform:X,snapGrid:Q,snapToGrid:O,nodeOrigin:R,domNode:z}=P.getState();return{nodeLookup:$,transform:X,snapGrid:Q,snapToGrid:O,nodeOrigin:R,paneDomNode:z}},onChange:($,X)=>{const{triggerNodeChanges:Q,nodeLookup:O,parentLookup:R,nodeOrigin:z}=P.getState(),M=[],b={x:$.x,y:$.y},N=O.get(C);if(N&&N.expandParent&&N.parentId){const L=N.origin??z,E=$.width??N.measured.width??0,T=$.height??N.measured.height??0,Z={id:N.id,parentId:N.parentId,rect:{width:E,height:T,...gm({x:$.x??N.position.x,y:$.y??N.position.y},{width:E,height:T},N.parentId,O,L)}},G=Dc([Z],O,R,z);M.push(...G),b.x=$.x?Math.max(L[0]*E,$.x):void 0,b.y=$.y?Math.max(L[1]*T,$.y):void 0}if(b.x!==void 0&&b.y!==void 0){const L={id:C,type:"position",position:{...b}};M.push(L)}if($.width!==void 0&&$.height!==void 0){const E={id:C,type:"dimensions",resizing:!0,setAttributes:x?x==="horizontal"?"width":"height":!0,dimensions:{width:$.width,height:$.height}};M.push(E)}for(const L of X){const E={...L,type:"position"};M.push(E)}Q(M)},onEnd:({width:$,height:X})=>{const Q={id:C,type:"dimensions",resizing:!1,dimensions:{width:$,height:X}};P.getState().triggerNodeChanges([Q])}})),K.current.update({controlPosition:q,boundaries:{minWidth:p,minHeight:y,maxWidth:g,maxHeight:h},keepAspectRatio:m,resizeDirection:x,onResizeStart:j,onResize:k,onResizeEnd:I,shouldResize:S}),()=>{var $;($=K.current)==null||$.destroy()}},[q,p,y,g,h,m,j,k,I,S]);const H=q.split("-");return c.jsx("div",{className:Ge(["react-flow__resize-control","nodrag",...H,o,i]),ref:A,style:{...l,scale:W,...d&&{[V?"backgroundColor":"borderColor"]:d}},children:u})}const wh=F.memo(fk);function pk({nodeId:t,isVisible:r=!0,handleClassName:o,handleStyle:i,lineClassName:l,lineStyle:u,color:d,minWidth:p=10,minHeight:y=10,maxWidth:g=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:m=!1,autoScale:x=!0,shouldResize:w,onResizeStart:S,onResize:j,onResizeEnd:k}){return r?c.jsxs(c.Fragment,{children:[T1.map(I=>c.jsx(wh,{className:l,style:u,nodeId:t,position:I,variant:kr.Line,color:d,minWidth:p,minHeight:y,maxWidth:g,maxHeight:h,onResizeStart:S,keepAspectRatio:m,autoScale:x,shouldResize:w,onResize:j,onResizeEnd:k},I)),D1.map(I=>c.jsx(wh,{className:o,style:i,nodeId:t,position:I,color:d,minWidth:p,minHeight:y,maxWidth:g,maxHeight:h,onResizeStart:S,keepAspectRatio:m,autoScale:x,shouldResize:w,onResize:j,onResizeEnd:k},I))]}):null}const Sh=t=>{let r;const o=new Set,i=(g,h)=>{const m=typeof g=="function"?g(r):g;if(!Object.is(m,r)){const x=r;r=h??(typeof m!="object"||m===null)?m:Object.assign({},r,m),o.forEach(w=>w(r,x))}},l=()=>r,p={setState:i,getState:l,getInitialState:()=>y,subscribe:g=>(o.add(g),()=>o.delete(g))},y=r=t(i,l,p);return p},hk=(t=>t?Sh(t):Sh),mk=t=>t;function gk(t,r=mk){const o=ps.useSyncExternalStore(t.subscribe,ps.useCallback(()=>r(t.getState()),[t,r]),ps.useCallback(()=>r(t.getInitialState()),[t,r]));return ps.useDebugValue(o),o}const Nh=t=>{const r=hk(t),o=i=>gk(r,i);return Object.assign(o,r),o},Oc=(t=>t?Nh(t):Nh);function xk(t,r){let o;try{o=t()}catch{return}return{getItem:l=>{var u;const d=y=>y===null?null:JSON.parse(y,void 0),p=(u=o.getItem(l))!=null?u:null;return p instanceof Promise?p.then(d):d(p)},setItem:(l,u)=>o.setItem(l,JSON.stringify(u,void 0)),removeItem:l=>o.removeItem(l)}}const pc=t=>r=>{try{const o=t(r);return o instanceof Promise?o:{then(i){return pc(i)(o)},catch(i){return this}}}catch(o){return{then(i){return this},catch(i){return pc(i)(o)}}}},yk=(t,r)=>(o,i,l)=>{let u={storage:xk(()=>window.localStorage),partialize:k=>k,version:0,merge:(k,I)=>({...I,...k}),...r},d=!1,p=0;const y=new Set,g=new Set;let h=u.storage;if(!h)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...k)},i,l);const m=()=>{const k=u.partialize({...i()});return h.setItem(u.name,{state:k,version:u.version})},x=l.setState;l.setState=(k,I)=>(x(k,I),m());const w=t((...k)=>(o(...k),m()),i,l);l.getInitialState=()=>w;let S;const j=()=>{var k,I;if(!h)return;const D=++p;d=!1,y.forEach(P=>{var A;return P((A=i())!=null?A:w)});const C=((I=u.onRehydrateStorage)==null?void 0:I.call(u,(k=i())!=null?k:w))||void 0;return pc(h.getItem.bind(h))(u.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==u.version){if(u.migrate){const A=u.migrate(P.state,P.version);return A instanceof Promise?A.then(V=>[!0,V]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var A;if(D!==p)return;const[V,W]=P;if(S=u.merge(W,(A=i())!=null?A:w),o(S,!0),V)return m()}).then(()=>{D===p&&(C==null||C(S,void 0),S=i(),d=!0,g.forEach(P=>P(S)))}).catch(P=>{D===p&&(C==null||C(void 0,P))})};return l.persist={setOptions:k=>{u={...u,...k},k.storage&&(h=k.storage)},clearStorage:()=>{h==null||h.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>j(),hasHydrated:()=>d,onHydrate:k=>(y.add(k),()=>{y.delete(k)}),onFinishHydration:k=>(g.add(k),()=>{g.delete(k)})},u.skipHydration||j(),S||w},vk=yk,wk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let io=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=wk[o[t]&63];return r};const It="__station_input__",Ut="__station_output__",Sk=100,Nk=["energycells"];function kk(t,r){if(t.sunlightOverride!==null)return t.sunlightOverride;if(t.sectorId){const o=r.find(i=>i.id===t.sectorId);if(o)return o.sunlight}return Sk}function Ck(t,r){return Nk.includes(t)?r/100:1}const xg=3600,fs={food:75,medical:45,per:200,cycle:600},al={food:50,medical:30,per:200},Ik="foodrations",jk="medicalsupplies";function Ek(t,r,o=!1){let i;o?i=r:i=Math.min(t,r);const l=Math.min(i,t),u=Math.max(i-t,0),d=t>0?Math.min(i/t,1):0,p=l*(fs.food/fs.per),y=u*(al.food/al.per),g=l*(fs.medical/fs.per),h=u*(al.medical/al.per),m=xg/fs.cycle,x=(p+y)*m,w=(g+h)*m;return{totalRequired:t,totalCapacity:r,actualPopulation:i,busyWorkers:l,idleWorkers:u,workerRatio:d,foodDemand:x,medicalDemand:w}}function _k(t,r){return 1+t*r}function Mk(t,r){if(t.totalCapacity<=0||r<=0)return[];const o=r/t.totalCapacity,i=[];return t.foodDemand>0&&i.push({wareId:Ik,amount:t.foodDemand*o}),t.medicalDemand>0&&i.push({wareId:jk,amount:t.medicalDemand*o}),i}function bk(t,r){const o=t.producedWareId;let i="default";t.id.includes("_imp_")?i="imperial":t.id.includes("_sith_")?i="sith":t.id.includes("_ter_")&&(i="terran");const l=`${o}_${i}`;if(r[l])return r[l];const u=`${o}_default`;if(r[u])return r[u];for(const d of Object.values(r))if(d.wareId===o)return d;return null}function hc(t,r){return r.modules.production[t]?"production":r.modules.habitat[t]?"habitat":r.modules.storage[t]?"storage":null}function Pk(t,r,o,i){const l=hc(t.blueprintId,r),u=[],d=[];if(l==="production"){const p=r.modules.production[t.blueprintId];if(p){const y=bk(p,r.recipes);if(y){const g=Ck(p.producedWareId,o),h=_k(y.workforceBonus,i),m=g*h,x=xg/y.time,w=y.amount*t.count*m*x;d.push({wareId:p.producedWareId,amount:w});for(const S of y.inputs){const j=S.amount*t.count*x;u.push({wareId:S.ware,amount:j})}}}}return{moduleId:t.id,blueprintId:t.blueprintId,grossInputs:u,grossOutputs:d,netInputs:[...u],netOutputs:[...d]}}function so(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>.01).sort((o,i)=>i.amount-o.amount)}function Dk(t,r,o){const i=kk(t,r),l=t.fillHabitats??!1,u=t.moduleConnections??[];let d=0,p=0;for(const N of t.modules){const L=hc(N.blueprintId,o);if(L==="production"){const E=o.modules.production[N.blueprintId];E&&(d+=E.workforceMax*N.count)}else if(L==="habitat"){const E=o.modules.habitat[N.blueprintId];E&&(p+=E.workforceCapacity*N.count)}}const y=Ek(d,p,l),g=t.modules.map(N=>Pk(N,o,i,y.workerRatio)),h=new Map;for(const N of g)h.set(N.moduleId,N);for(const N of t.modules)if(hc(N.blueprintId,o)==="habitat"){const E=o.modules.habitat[N.blueprintId],T=h.get(N.id);if(E&&T){const Z=E.workforceCapacity*N.count,G=Mk(y,Z);T.grossInputs.push(...G),T.netInputs=[...T.grossInputs]}}const m=new Map;for(const N of g)m.set(N.moduleId,new Map);const x=new Map;for(const N of g)x.set(N.moduleId,new Map);const w=new Map;for(const N of g){const L=new Map;for(const E of N.grossOutputs)L.set(E.wareId,E.amount);w.set(N.moduleId,L)}const S=new Map;for(const N of g){const L=new Map;for(const E of N.grossInputs)L.set(E.wareId,E.amount);S.set(N.moduleId,L)}const j=u.filter(N=>N.sourceModuleId!==It&&N.targetModuleId!==Ut),k=u.filter(N=>N.sourceModuleId===It),I=u.filter(N=>N.targetModuleId===Ut),D=[];for(const N of j){const L=N.mode??"auto",E=w.get(N.sourceModuleId),T=(E==null?void 0:E.get(N.wareId))??0,Z=S.get(N.targetModuleId),G=(Z==null?void 0:Z.get(N.wareId))??0;let ne,oe=!1,ae=!1;switch(L){case"custom":ne=Math.min(N.amount,T,G),oe=N.amount>T,ae=N.amount>G;break;case"max":ne=Math.min(T,G),oe=T<G,ae=G<T;break;case"auto":default:ne=Math.min(T,G),oe=T<G,ae=G<T;break}D.push({connectionId:N.id,effectiveAmount:ne,sourceConstrained:oe,targetConstrained:ae}),E&&E.set(N.wareId,T-ne),Z&&Z.set(N.wareId,G-ne);const re=m.get(N.targetModuleId);if(re){const ve=re.get(N.wareId)||0;re.set(N.wareId,ve+ne)}const ue=x.get(N.sourceModuleId);if(ue){const ve=ue.get(N.wareId)||0;ue.set(N.wareId,ve+ne)}}for(const N of k){const L=N.mode??"auto",E=S.get(N.targetModuleId),T=(E==null?void 0:E.get(N.wareId))??0;let Z,G=!1,ne=!1;switch(L){case"custom":Z=Math.min(N.amount,T),ne=N.amount>T;break;case"max":case"auto":default:Z=T;break}D.push({connectionId:N.id,effectiveAmount:Z,sourceConstrained:G,targetConstrained:ne}),E&&E.set(N.wareId,T-Z)}for(const N of I){const L=N.mode??"auto",E=w.get(N.sourceModuleId),T=(E==null?void 0:E.get(N.wareId))??0;let Z,G=!1,ne=!1;switch(L){case"custom":Z=Math.min(N.amount,T),G=N.amount>T;break;case"max":case"auto":default:Z=T;break}D.push({connectionId:N.id,effectiveAmount:Z,sourceConstrained:G,targetConstrained:ne}),E&&E.set(N.wareId,T-Z)}for(const N of g){const L=m.get(N.moduleId)||new Map,E=x.get(N.moduleId)||new Map;N.netInputs=[];for(const T of N.grossInputs){const Z=L.get(T.wareId)||0,G=T.amount-Z;G>.01&&N.netInputs.push({wareId:T.wareId,amount:G})}N.netOutputs=[];for(const T of N.grossOutputs){const Z=E.get(T.wareId)||0,G=T.amount-Z;G>.01&&N.netOutputs.push({wareId:T.wareId,amount:G})}}const C=[],P=[],A=[],V=[];for(const N of g)C.push(...N.grossInputs),P.push(...N.grossOutputs),A.push(...N.netInputs),V.push(...N.netOutputs);const W=so(C),K=so(P),q=so(A),H=so(V),$=k.map(N=>{const L=D.find(E=>E.connectionId===N.id);return{wareId:N.wareId,amount:(L==null?void 0:L.effectiveAmount)??N.amount}}),X=I.map(N=>{const L=D.find(E=>E.connectionId===N.id);return{wareId:N.wareId,amount:(L==null?void 0:L.effectiveAmount)??N.amount}}),Q=so($),O=so(X),R=new Map;for(const N of Q)R.set(N.wareId,N.amount);const z=new Map;for(const N of O)z.set(N.wareId,N.amount);const M=[];for(const N of q){const L=R.get(N.wareId)||0,E=N.amount-L;E>.01&&M.push({wareId:N.wareId,amount:E})}const b=[];for(const N of H){const L=z.get(N.wareId)||0,E=N.amount-L;E>.01&&b.push({wareId:N.wareId,amount:E})}return{stationId:t.id,effectiveSunlight:i,totalWorkforceRequired:d,totalWorkforceCapacity:p,actualPopulation:y.actualPopulation,workforceFoodDemand:y.foodDemand,workforceMedicalDemand:y.medicalDemand,modules:g,grossInputs:W,grossOutputs:K,netInputs:q,netOutputs:H,availableForImport:M,availableForExport:b,stationInputs:Q,stationOutputs:O,externallySupplied:[],externallyConsumed:[],remainingInputs:[...Q],remainingOutputs:[...O],moduleConnections:D}}function kh(t){const r=new Map;for(const o of t){const i=r.get(o.wareId)||0;r.set(o.wareId,i+o.amount)}return Array.from(r.entries()).map(([o,i])=>({wareId:o,amount:i})).filter(o=>o.amount>0).sort((o,i)=>i.amount-o.amount)}function Tk(t,r){const o=t.stations.map(x=>Dk(x,t.sectors,r)),i=new Map;for(const x of o)i.set(x.stationId,x);const l=new Map,u=new Map,d=new Map,p=new Map;for(const x of t.stations)l.set(x.id,new Map),u.set(x.id,new Map),d.set(x.id,new Map),p.set(x.id,new Map);for(const x of o){const w=d.get(x.stationId),S=p.get(x.stationId);for(const j of x.stationOutputs){const k=x.netOutputs.find(D=>D.wareId===j.wareId),I=Math.min(j.amount,(k==null?void 0:k.amount)??j.amount);w.set(j.wareId,I)}for(const j of x.stationInputs)S.set(j.wareId,j.amount)}const y=[];for(const x of t.connections){const w=x.mode??"auto",S=d.get(x.sourceStationId),j=(S==null?void 0:S.get(x.wareId))??0,k=p.get(x.targetStationId),I=(k==null?void 0:k.get(x.wareId))??0;let D,C=!1,P=!1;switch(w){case"custom":D=Math.min(x.amount,j,I),C=x.amount>j,P=x.amount>I;break;case"max":D=Math.min(j,I),C=j<I,P=I<j;break;case"auto":default:D=Math.min(j,I),C=j<I,P=I<j;break}y.push({connectionId:x.id,effectiveAmount:D,sourceConstrained:C,targetConstrained:P}),S&&S.set(x.wareId,j-D),k&&k.set(x.wareId,I-D);const A=l.get(x.targetStationId);if(A){const W=A.get(x.wareId)||0;A.set(x.wareId,W+D)}const V=u.get(x.sourceStationId);if(V){const W=V.get(x.wareId)||0;V.set(x.wareId,W+D)}}for(const x of o){const w=l.get(x.stationId)||new Map,S=u.get(x.stationId)||new Map;x.externallySupplied=Array.from(w.entries()).map(([k,I])=>({wareId:k,amount:I})).filter(k=>k.amount>.01),x.externallyConsumed=Array.from(S.entries()).map(([k,I])=>({wareId:k,amount:I})).filter(k=>k.amount>.01),x.remainingInputs=[];for(const k of x.stationInputs){const I=w.get(k.wareId)||0,D=k.amount-I;D>.01&&x.remainingInputs.push({wareId:k.wareId,amount:D})}x.remainingOutputs=[];for(const k of x.stationOutputs){const I=S.get(k.wareId)||0,D=k.amount-I;D>.01&&x.remainingOutputs.push({wareId:k.wareId,amount:D})}const j=t.stations.find(k=>k.id===x.stationId);if(j){const k=j.moduleConnections??[];for(const[I,D]of w.entries()){if(D<.01)continue;const C=k.filter(V=>V.sourceModuleId===It&&V.wareId===I);if(C.length===0)continue;const P=C.reduce((V,W)=>V+W.amount,0);if(P<.01)continue;const A=Math.min(D/P,1);for(const V of C){const W=x.modules.find(H=>H.moduleId===V.targetModuleId);if(!W)continue;const K=V.amount*A,q=W.netInputs.findIndex(H=>H.wareId===I);if(q!==-1){const $=W.netInputs[q].amount-K;$>.01?W.netInputs[q].amount=$:W.netInputs.splice(q,1)}}}for(const[I,D]of S.entries()){if(D<.01)continue;const C=k.filter(V=>V.targetModuleId===Ut&&V.wareId===I);if(C.length===0)continue;const P=C.reduce((V,W)=>V+W.amount,0);if(P<.01)continue;const A=Math.min(D/P,1);for(const V of C){const W=x.modules.find(H=>H.moduleId===V.sourceModuleId);if(!W)continue;const K=V.amount*A,q=W.netOutputs.findIndex(H=>H.wareId===I);if(q!==-1){const $=W.netOutputs[q].amount-K;$>.01?W.netOutputs[q].amount=$:W.netOutputs.splice(q,1)}}}}}const g=[];for(const x of o){const w=l.get(x.stationId)||new Map;for(const S of x.stationInputs){const j=w.get(S.wareId)||0;j<S.amount-.01&&g.push({wareId:S.wareId,stationId:x.stationId,required:S.amount,supplied:j,deficit:S.amount-j})}}const h=[],m=[];for(const x of o){const w=l.get(x.stationId)||new Map;for(const j of x.netInputs){const k=w.get(j.wareId)||0,I=j.amount-k;I>0&&h.push({wareId:j.wareId,amount:I})}const S=new Map;for(const j of t.connections)if(j.sourceStationId===x.stationId){const k=S.get(j.wareId)||0;S.set(j.wareId,k+j.amount)}for(const j of x.netOutputs){const k=S.get(j.wareId)||0,I=j.amount-k;I>0&&m.push({wareId:j.wareId,amount:I})}}return{stations:o,connections:y,totalInputs:kh(h),totalOutputs:kh(m),deficits:g}}function yg(t,r){return t.connections.find(o=>o.connectionId===r)}function Ir(t,r){return t.stations.find(o=>o.stationId===r)}function xl(t,r){return t.deficits.filter(o=>o.stationId===r).length}function gr(t,r,o){const i=t.stations.find(l=>l.stationId===r);if(i)return i.modules.find(l=>l.moduleId===o)}const We=Oc((t,r)=>({gameData:null,loading:!0,error:null,setGameData:o=>t({gameData:o,loading:!1,error:null}),setLoading:o=>t({loading:o}),setError:o=>t({error:o,loading:!1}),getModule:o=>{const{gameData:i}=r();return i?i.modules.production[o]?i.modules.production[o]:i.modules.habitat[o]?i.modules.habitat[o]:i.modules.storage[o]?i.modules.storage[o]:null:null},getModuleType:o=>{const{gameData:i}=r();return i?i.modules.production[o]?"production":i.modules.habitat[o]?"habitat":i.modules.storage[o]?"storage":null:null}}));function Ch(t){const r=new Date().toISOString();return{id:io(),name:t,version:1,createdAt:r,updatedAt:r,sectors:[],stations:[],connections:[]}}function ul(){return{stations:[],connections:[],totalInputs:[],totalOutputs:[],deficits:[]}}const de=Oc()(vk((t,r)=>({plan:Ch("New Plan"),computed:ul(),createPlan:o=>{t({plan:Ch(o),computed:ul()})},loadPlan:o=>{const i={...o,stations:o.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};t({plan:i,computed:ul()}),r().recompute()},renamePlan:o=>{t(i=>({plan:{...i.plan,name:o,updatedAt:new Date().toISOString()}}))},addSector:(o,i)=>{const l={id:io(),name:o,sunlight:100,position:i,size:{width:400,height:300}};t(u=>({plan:{...u.plan,sectors:[...u.plan.sectors,l],updatedAt:new Date().toISOString()}}))},updateSector:(o,i)=>{t(l=>({plan:{...l.plan,sectors:l.plan.sectors.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeSector:o=>{t(i=>({plan:{...i.plan,sectors:i.plan.sectors.filter(l=>l.id!==o),stations:i.plan.stations.map(l=>l.sectorId===o?{...l,sectorId:null}:l),updatedAt:new Date().toISOString()}})),r().recompute()},addStation:(o,i)=>{const l={id:io(),name:o,sectorId:null,position:i,sunlightOverride:null,modules:[],moduleConnections:[]};t(u=>({plan:{...u.plan,stations:[...u.plan.stations,l],updatedAt:new Date().toISOString()}}))},updateStation:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeStation:o=>{t(i=>({plan:{...i.plan,stations:i.plan.stations.filter(l=>l.id!==o),connections:i.plan.connections.filter(l=>l.sourceStationId!==o&&l.targetStationId!==o),updatedAt:new Date().toISOString()}})),r().recompute()},moveStationToSector:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,sectorId:i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addModule:(o,i,l)=>{const u={id:io(),blueprintId:i,count:1,position:l};t(d=>({plan:{...d.plan,stations:d.plan.stations.map(p=>p.id===o?{...p,modules:[...p.modules,u]}:p),updatedAt:new Date().toISOString()}})),r().recompute()},updateModule:(o,i,l)=>{const d=r().plan.stations.find(g=>g.id===o),p=d==null?void 0:d.modules.find(g=>g.id===i);if(l.count!==void 0&&p&&l.count!==p.count&&p){const g=l.count/p.count,h=((d==null?void 0:d.moduleConnections)??[]).map(m=>m.sourceModuleId===i&&!m.locked?{...m,amount:m.amount*g}:m.targetModuleId===i&&m.sourceModuleId===It&&!m.locked?{...m,amount:m.amount*g}:m);t(m=>({plan:{...m.plan,stations:m.plan.stations.map(x=>x.id===o?{...x,modules:x.modules.map(w=>w.id===i?{...w,...l}:w),moduleConnections:h}:x),updatedAt:new Date().toISOString()}}))}else t(g=>({plan:{...g.plan,stations:g.plan.stations.map(h=>h.id===o?{...h,modules:h.modules.map(m=>m.id===i?{...m,...l}:m)}:h),updatedAt:new Date().toISOString()}}));r().recompute()},removeModule:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,modules:u.modules.filter(d=>d.id!==i),moduleConnections:(u.moduleConnections??[]).filter(d=>d.sourceModuleId!==i&&d.targetModuleId!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},addConnection:o=>{const i={id:io(),...o};t(l=>({plan:{...l.plan,connections:[...l.plan.connections,i],updatedAt:new Date().toISOString()}})),r().recompute()},updateConnection:(o,i)=>{t(l=>({plan:{...l.plan,connections:l.plan.connections.map(u=>u.id===o?{...u,...i}:u),updatedAt:new Date().toISOString()}})),r().recompute()},removeConnection:o=>{t(i=>({plan:{...i.plan,connections:i.plan.connections.filter(l=>l.id!==o),updatedAt:new Date().toISOString()}})),r().recompute()},addModuleConnection:(o,i)=>{const l={id:io(),...i};t(u=>({plan:{...u.plan,stations:u.plan.stations.map(d=>d.id===o?{...d,moduleConnections:[...d.moduleConnections??[],l]}:d),updatedAt:new Date().toISOString()}})),r().recompute()},updateModuleConnection:(o,i,l)=>{t(u=>({plan:{...u.plan,stations:u.plan.stations.map(d=>d.id===o?{...d,moduleConnections:(d.moduleConnections??[]).map(p=>p.id===i?{...p,...l}:p)}:d),updatedAt:new Date().toISOString()}})),r().recompute()},removeModuleConnection:(o,i)=>{t(l=>({plan:{...l.plan,stations:l.plan.stations.map(u=>u.id===o?{...u,moduleConnections:(u.moduleConnections??[]).filter(d=>d.id!==i)}:u),updatedAt:new Date().toISOString()}})),r().recompute()},recompute:()=>{const{plan:o}=r(),i=We.getState().gameData;if(!i){t({computed:ul()});return}const l=Tk(o,i);t({computed:l})}}),{name:"x4-planner-plan",partialize:t=>({plan:t.plan}),onRehydrateStorage:()=>t=>{if(t){const r=t.plan;if(r.stations.some(i=>(i.moduleConnections??[]).some(l=>l.ratio===void 0||l.locked===void 0))){const i={...r,stations:r.stations.map(l=>({...l,moduleConnections:(l.moduleConnections??[]).map(u=>({...u,locked:u.locked??!1,ratio:u.ratio??1}))}))};de.setState({plan:i})}t.recompute()}}})),he=Oc(t=>({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,sidebarOpen:!0,reportOpen:!1,theme:"system",language:"en",contextMenu:null,setViewMode:r=>t({viewMode:r}),drillIntoStation:r=>t({viewMode:"station",activeStationId:r,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),exitStationView:()=>t({viewMode:"network",activeStationId:null,selectedNodeId:null,selectedEdgeId:null,contextMenu:null}),selectNode:r=>t({selectedNodeId:r,selectedEdgeId:null}),selectEdge:r=>t({selectedNodeId:null,selectedEdgeId:r}),clearSelection:()=>t({selectedNodeId:null,selectedEdgeId:null}),toggleSidebar:()=>t(r=>({sidebarOpen:!r.sidebarOpen})),setSidebarOpen:r=>t({sidebarOpen:r}),toggleReport:()=>t(r=>({reportOpen:!r.reportOpen})),setReportOpen:r=>t({reportOpen:r}),setTheme:r=>t({theme:r}),setLanguage:r=>t({language:r}),openContextMenu:r=>t({contextMenu:r}),closeContextMenu:()=>t({contextMenu:null})}));function Ok(){const t=de(h=>h.plan),r=de(h=>h.renamePlan),o=he(h=>h.toggleReport),i=he(h=>h.reportOpen),l=he(h=>h.theme),u=he(h=>h.setTheme),d=he(h=>h.language),p=he(h=>h.setLanguage),y=We(h=>h.gameData),g=()=>{u(l==="light"?"dark":l==="dark"?"system":"light")};return c.jsxs("header",{className:"h-12 border-b border-border bg-card flex items-center justify-between px-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"X4 SWI Station Planner"}),c.jsx("span",{className:"text-muted-foreground",children:"|"}),c.jsx("input",{type:"text",value:t.name,onChange:h=>r(h.target.value),className:"bg-transparent border-none text-foreground focus:outline-none focus:ring-1 focus:ring-ring rounded px-2 py-1"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[(y==null?void 0:y.languages)&&c.jsx("select",{value:d,onChange:h=>p(h.target.value),className:"px-2 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors border-none cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring",title:"Language",children:Object.entries(y.languages).map(([h,m])=>c.jsx("option",{value:h,children:m},h))}),c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors flex items-center gap-1.5",title:`Theme: ${l}`,children:[l==="light"&&"",l==="dark"&&"",l==="system"&&"",c.jsx("span",{className:"text-xs",children:l.charAt(0).toUpperCase()+l.slice(1)})]}),c.jsx("button",{onClick:o,className:`px-3 py-1.5 text-sm rounded transition-colors ${i?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"Report"}),c.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Export"}),c.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors",children:"Import"})]})]})}function gt(){const t=he(o=>o.language);return{language:t,t:(o,i)=>o?typeof o=="string"?o:o[t]??o.en??Object.values(o)[0]??i??"":i??""}}function Ak({station:t}){const r=de(C=>C.updateStation),o=de(C=>C.removeStation),i=de(C=>C.plan),l=de(C=>C.computed),u=We(C=>C.gameData),{t:d}=gt(),p=t.sectorId?i.sectors.find(C=>C.id===t.sectorId):null,y=t.sunlightOverride??(p==null?void 0:p.sunlight)??100,g=Ir(l,t.id),h=C=>{r(t.id,{name:C.target.value})},m=C=>{const P=C.target.value;if(P==="")r(t.id,{sunlightOverride:null});else{const A=parseInt(P,10);!isNaN(A)&&A>=0&&A<=500&&r(t.id,{sunlightOverride:A})}},x=()=>{r(t.id,{sunlightOverride:null})},w=C=>{r(t.id,{fillHabitats:C.target.checked})},S=()=>{confirm(`Delete station "${t.name}"?`)&&o(t.id)},j=C=>{var P;return d((P=u==null?void 0:u.wares[C])==null?void 0:P.name,C)},k=C=>C>=1e4?`${(C/1e3).toFixed(1)}k`:C>=1e3?`${(C/1e3).toFixed(2)}k`:C.toFixed(0),I=g&&g.totalWorkforceRequired>0,D=g&&g.totalWorkforceCapacity>0;return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Station Name"}),c.jsx("input",{type:"text",value:t.name,onChange:h,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:p?p.name:"Not assigned"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the station into a sector to assign it."})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight Override"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:0,max:500,value:t.sunlightOverride??"",onChange:m,placeholder:`${(p==null?void 0:p.sunlight)??100}`,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"%"}),t.sunlightOverride!==null&&c.jsx("button",{onClick:x,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",title:"Use sector default",children:"Reset"})]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",y,"%",t.sunlightOverride===null&&p&&" (from sector)",t.sunlightOverride===null&&!p&&" (default)"]})]}),(I||D)&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Workforce"}),g&&c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Required:"}),c.jsx("span",{children:g.totalWorkforceRequired.toLocaleString()})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),c.jsx("span",{children:g.totalWorkforceCapacity.toLocaleString()})]}),c.jsxs("div",{className:"flex justify-between font-medium",children:[c.jsx("span",{className:"text-muted-foreground",children:"Population:"}),c.jsx("span",{children:g.actualPopulation.toLocaleString()})]})]}),D&&c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[c.jsx("input",{type:"checkbox",checked:t.fillHabitats??!1,onChange:w,className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),c.jsx("span",{className:"text-sm",children:"Fill all habitat capacity"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:t.fillHabitats?"Population fills all habitats (idle workers consume food/medical).":"Population capped to production needs (no idle workers)."})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Modules"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:t.modules.length===0?c.jsx("p",{children:"No modules added yet."}):c.jsxs("p",{children:[t.modules.length," module(s)"]})}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Double-click the station to add and configure modules."})]}),g&&(g.netOutputs.length>0||g.netInputs.length>0)&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium text-foreground",children:["I/O Summary ",c.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),g.netOutputs.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"text-xs text-muted-foreground",children:"Outputs:"}),g.netOutputs.slice(0,5).map(C=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-green-500 truncate",children:j(C.wareId)}),c.jsxs("span",{className:"font-mono",children:["+",k(C.amount)]})]},C.wareId)),g.netOutputs.length>5&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",g.netOutputs.length-5," more..."]})]}),g.netInputs.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"text-xs text-muted-foreground",children:"Inputs:"}),g.netInputs.slice(0,5).map(C=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-blue-400 truncate",children:j(C.wareId)}),c.jsxs("span",{className:"font-mono",children:["-",k(C.amount)]})]},C.wareId)),g.netInputs.length>5&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",g.netInputs.length-5," more..."]})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:C=>r(t.id,{locked:C.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),c.jsx("span",{className:"text-sm",children:"Lock position"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),c.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),c.jsx("div",{className:"pt-4 border-t border-border",children:c.jsx("button",{onClick:S,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Station"})})]})}function Lk({sector:t}){const r=de(y=>y.updateSector),o=de(y=>y.removeSector),l=de(y=>y.plan).stations.filter(y=>y.sectorId===t.id),u=y=>{r(t.id,{name:y.target.value})},d=y=>{const g=parseInt(y.target.value,10);!isNaN(g)&&g>=0&&g<=500&&r(t.id,{sunlight:g})},p=()=>{const y=l.length,g=y>0?`Delete sector "${t.name}"? ${y} station(s) will be unassigned.`:`Delete sector "${t.name}"?`;confirm(g)&&o(t.id)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sector Name"}),c.jsx("input",{type:"text",value:t.name,onChange:u,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Sunlight"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:0,max:200,value:t.sunlight,onChange:d,className:"flex-1"}),c.jsx("input",{type:"number",min:0,max:500,value:t.sunlight,onChange:d,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Affects energy cell production for stations without sunlight override."})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Stations (",l.length,")"]}),l.length===0?c.jsx("p",{className:"text-sm text-muted-foreground",children:"No stations in this sector. Drag stations into the sector to assign them."}):c.jsx("ul",{className:"text-sm space-y-1",children:l.map(y=>c.jsxs("li",{className:"flex items-center justify-between px-2 py-1 rounded bg-muted/50",children:[c.jsx("span",{className:"text-foreground",children:y.name}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.modules.length," modules"]})]},y.id))})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Size"}),c.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[Math.round(t.size.width),"  ",Math.round(t.size.height)]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag the corner handles to resize when selected."})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:t.locked??!1,onChange:y=>r(t.id,{locked:y.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),c.jsx("span",{className:"text-sm",children:"Lock position"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),c.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(t.position.x),", y: ",Math.round(t.position.y)]})]}),c.jsx("div",{className:"pt-4 border-t border-border",children:c.jsx("button",{onClick:p,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Sector"})})]})}const Ih={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function $k(){const t=We(w=>w.gameData),r=de(w=>w.addModule),o=he(w=>w.activeStationId),i=de(w=>w.plan.stations),{t:l}=gt(),[u,d]=F.useState("production"),[p,y]=F.useState(""),g=F.useMemo(()=>i.find(w=>w.id===o),[i,o]),h=F.useMemo(()=>{if(!t)return{production:[],habitat:[],storage:[]};const w=p.toLowerCase(),S=j=>Object.values(j).filter(k=>l(k.name).toLowerCase().includes(w));return{production:S(t.modules.production),habitat:S(t.modules.habitat),storage:S(t.modules.storage)}},[t,p,l]),m=w=>{if(!o||!g)return;const S=g.modules.length,j=S%3,k=Math.floor(S/3),I={x:j*220+50,y:k*150+50};r(o,w,I)},x=w=>{d(S=>S===w?null:w)};return t?c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Search modules...",value:p,onChange:w=>y(w.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}),Object.keys(Ih).map(w=>{const{label:S,icon:j}=Ih[w],k=h[w],I=u===w;return c.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[c.jsxs("button",{onClick:()=>x(w),className:"w-full flex items-center justify-between px-3 py-2 bg-muted/50 hover:bg-muted transition-colors text-left",children:[c.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[c.jsx("span",{children:j}),S,c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",k.length,")"]})]}),c.jsx("span",{className:"text-muted-foreground",children:I?"":"+"})]}),I&&c.jsx("div",{className:"max-h-48 overflow-y-auto",children:k.length===0?c.jsx("p",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No modules found"}):k.map(D=>c.jsxs("button",{onClick:()=>m(D.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-accent transition-colors border-t border-border flex items-center justify-between group",children:[c.jsx("span",{className:"text-foreground truncate",children:l(D.name)}),c.jsx("span",{className:"text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:"+ Add"})]},D.id))})]},w)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a module to add it to the station."})]}):c.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading modules..."})}function zk({stationId:t,module:r}){const o=We(k=>k.gameData),i=We(k=>k.getModule),l=We(k=>k.getModuleType),u=de(k=>k.updateModule),d=de(k=>k.removeModule),p=he(k=>k.clearSelection),{t:y}=gt(),g=i(r.blueprintId),h=l(r.blueprintId),m=F.useMemo(()=>{if(!o||!h)return[];const k=o.modules[h];return Object.values(k).sort((I,D)=>y(I.name).localeCompare(y(D.name)))},[o,h,y]),x=k=>{u(t,r.id,{blueprintId:k.target.value})},w=k=>{const I=Math.max(1,r.count+k);u(t,r.id,{count:I})},S=k=>{const I=parseInt(k.target.value,10);!isNaN(I)&&I>=1&&u(t,r.id,{count:I})},j=()=>{confirm(`Delete this ${y(g==null?void 0:g.name,"module")}?`)&&(d(t,r.id),p())};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-lg",children:h==="production"?"":h==="habitat"?"":""}),c.jsxs("span",{className:"text-muted-foreground capitalize",children:[h," Module"]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Blueprint"}),c.jsx("select",{value:r.blueprintId,onChange:x,className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:m.map(k=>c.jsx("option",{value:k.id,children:y(k.name)},k.id))})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Count"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>w(-1),disabled:r.count<=1,className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),c.jsx("input",{type:"number",min:1,value:r.count,onChange:S,className:"w-16 px-2 py-1 text-sm text-center rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),c.jsx("button",{onClick:()=>w(1),className:"w-8 h-8 rounded-md border border-input bg-background text-foreground hover:bg-accent transition-colors",children:"+"})]})]}),g&&c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Info"}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-2 rounded",children:[h==="production"&&"producedWareId"in g&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["Produces: ",g.producedWareId]}),c.jsxs("p",{children:["Workforce: ",g.workforceMax*r.count]})]}),h==="habitat"&&"workforceCapacity"in g&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["Race: ",g.race]}),c.jsxs("p",{children:["Capacity: ",g.workforceCapacity*r.count," workers"]})]}),h==="storage"&&"cargoMax"in g&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["Type: ",g.cargoType]}),c.jsxs("p",{children:["Capacity: ",g.cargoMax*r.count]})]})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r.locked??!1,onChange:k=>u(t,r.id,{locked:k.target.checked}),className:"w-4 h-4 rounded border-input text-primary focus:ring-primary"}),c.jsx("span",{className:"text-sm",children:"Lock position"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Position"}),c.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["x: ",Math.round(r.position.x),", y: ",Math.round(r.position.y)]})]}),c.jsx("div",{className:"pt-4 border-t border-border",children:c.jsx("button",{onClick:j,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Module"})})]})}function Rk({connection:t}){var H;const r=de($=>$.updateConnection),o=de($=>$.removeConnection),i=de($=>$.plan),l=de($=>$.computed),u=We($=>$.gameData),{t:d}=gt(),p=i.stations.find($=>$.id===t.sourceStationId),y=i.stations.find($=>$.id===t.targetStationId),g=F.useMemo(()=>Ir(l,t.sourceStationId),[l,t.sourceStationId]),h=F.useMemo(()=>Ir(l,t.targetStationId),[l,t.targetStationId]),m=t.wareId?d((H=u==null?void 0:u.wares[t.wareId])==null?void 0:H.name,t.wareId):"Unknown",x=g==null?void 0:g.netOutputs.find($=>$.wareId===t.wareId),w=(x==null?void 0:x.amount)??0,S=h==null?void 0:h.netInputs.find($=>$.wareId===t.wareId),j=(S==null?void 0:S.amount)??0,k=F.useMemo(()=>yg(l,t.id),[l,t.id]),I=(k==null?void 0:k.effectiveAmount)??t.amount,D=t.mode??"auto",C=$=>$>=1e4?`${($/1e3).toFixed(1)}k`:$>=1e3?`${($/1e3).toFixed(2)}k`:$.toFixed(0),P=$=>{r(t.id,{mode:$,amount:$==="custom"?I:t.amount})},A=$=>{const X=$.target.value;if(X==="")r(t.id,{amount:0});else{const Q=parseFloat(X);!isNaN(Q)&&Q>=0&&r(t.id,{amount:Q})}},V=()=>{r(t.id,{mode:"custom",amount:w})},W=()=>{const $=Math.min(w,j);r(t.id,{mode:"custom",amount:$})},K=()=>{confirm("Delete this connection?")&&o(t.id)},q=l.deficits.find($=>$.stationId===t.targetStationId&&$.wareId===t.wareId);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"From:"}),c.jsx("span",{className:"font-medium text-foreground truncate",children:(p==null?void 0:p.name)??"Unknown"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"To:"}),c.jsx("span",{className:"font-medium text-foreground truncate",children:(y==null?void 0:y.name)??"Unknown"})]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),c.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:m}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource is determined by the connected handles."})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),c.jsxs("select",{value:D,onChange:$=>P($.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[c.jsx("option",{value:"auto",children:"Auto (match availability)"}),c.jsx("option",{value:"max",children:"Max (take all available)"}),c.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[D==="auto"&&"Transfers min(source available, target need)",D==="max"&&"Takes all available from source up to target need",D==="custom"&&"Uses a fixed amount you specify"]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-sm font-medium text-foreground",children:[D==="custom"?"Custom Amount":"Effective Amount"," ",c.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),D==="custom"?c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{type:"number",min:0,step:1,value:t.amount,onChange:A,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):c.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:C(I)}),D==="custom"&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:V,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",C(w),")"]}),j>0&&c.jsxs("button",{onClick:W,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",C(Math.min(w,j)),")"]})]}),c.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Source available:"}),c.jsxs("span",{className:"font-mono text-green-400",children:[C(w),"/hr"]})]}),j>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Target needs:"}),c.jsxs("span",{className:"font-mono text-blue-400",children:[C(j),"/hr"]})]}),c.jsxs("div",{className:"flex justify-between font-medium",children:[c.jsx("span",{children:"Transferring:"}),c.jsxs("span",{className:`font-mono ${k!=null&&k.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[C(I),"/hr"]})]}),D==="custom"&&t.amount!==I&&c.jsxs("div",{className:"flex justify-between text-yellow-400",children:[c.jsx("span",{children:"Configured:"}),c.jsxs("span",{className:"font-mono",children:[C(t.amount),"/hr"]})]}),(k==null?void 0:k.sourceConstrained)&&c.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(k==null?void 0:k.targetConstrained)&&c.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"})]}),q&&q.deficit>0&&c.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[c.jsxs("div",{className:"text-xs text-red-400",children:["Deficit: ",C(q.deficit),"/hr still needed"]}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Target receives ",C(q.supplied),"/hr but needs"," ",C(q.required),"/hr"]})]}),t.wareId&&!q&&c.jsx("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/30",children:c.jsx("div",{className:"text-xs text-green-400",children:"Fully supplied"})})]}),c.jsx("div",{className:"pt-4 border-t border-border",children:c.jsx("button",{onClick:K,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Fk({stationId:t,connection:r}){var b;const o=de(N=>N.updateModuleConnection),i=de(N=>N.removeModuleConnection),l=de(N=>N.plan.stations),u=de(N=>N.computed),d=We(N=>N.gameData),p=he(N=>N.clearSelection),{t:y}=gt(),g=l.find(N=>N.id===t),h=g==null?void 0:g.modules.find(N=>N.id===r.sourceModuleId),m=g==null?void 0:g.modules.find(N=>N.id===r.targetModuleId),x=r.sourceModuleId===It,w=r.targetModuleId===Ut,S=N=>{var E,T,Z;if(!N||!d)return"Unknown";const L=((E=d.modules.production[N])==null?void 0:E.name)??((T=d.modules.habitat[N])==null?void 0:T.name)??((Z=d.modules.storage[N])==null?void 0:Z.name);return y(L,N)},j=x?"Station Input":S(h==null?void 0:h.blueprintId),k=w?"Station Output":S(m==null?void 0:m.blueprintId),I=F.useMemo(()=>x?null:gr(u,t,r.sourceModuleId),[u,t,r.sourceModuleId,x]),D=F.useMemo(()=>w?null:gr(u,t,r.targetModuleId),[u,t,r.targetModuleId,w]),C=F.useMemo(()=>{const N=Ir(u,t);return N==null?void 0:N.moduleConnections.find(L=>L.connectionId===r.id)},[u,t,r.id]),P=(C==null?void 0:C.effectiveAmount)??r.amount,A=r.mode??"auto",V=y((b=d==null?void 0:d.wares[r.wareId])==null?void 0:b.name,r.wareId),W=I==null?void 0:I.grossOutputs.find(N=>N.wareId===r.wareId),K=(W==null?void 0:W.amount)??0,q=D==null?void 0:D.grossInputs.find(N=>N.wareId===r.wareId),H=(q==null?void 0:q.amount)??0,$=N=>N>=1e4?`${(N/1e3).toFixed(1)}k`:N>=1e3?`${(N/1e3).toFixed(2)}k`:N.toFixed(0),X=N=>{o(t,r.id,{mode:N,amount:N==="custom"?P:r.amount})},Q=N=>{const L=N.target.value;if(L==="")o(t,r.id,{amount:0});else{const E=parseFloat(L);if(!isNaN(E)&&E>=0){const T=!x&&K>0?E/K:r.ratio;o(t,r.id,{amount:E,ratio:T})}}},O=()=>{o(t,r.id,{locked:!r.locked})},R=()=>{o(t,r.id,{mode:"custom",amount:K,ratio:1})},z=()=>{const N=Math.min(K,H),L=K>0?N/K:0;o(t,r.id,{mode:"custom",amount:N,ratio:L})},M=()=>{confirm("Delete this connection?")&&(i(t,r.id),p())};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"From:"}),c.jsx("span",{className:"font-medium text-foreground truncate",children:j})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"To:"}),c.jsx("span",{className:"font-medium text-foreground truncate",children:k})]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Resource"}),c.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground",children:V})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Mode"}),c.jsxs("select",{value:A,onChange:N=>X(N.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[c.jsx("option",{value:"auto",children:"Auto (match availability)"}),c.jsx("option",{value:"max",children:"Max (take all available)"}),c.jsx("option",{value:"custom",children:"Custom (fixed amount)"})]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[A==="auto"&&"Transfers min(source available, target need)",A==="max"&&"Takes all available from source up to target need",A==="custom"&&"Uses a fixed amount you specify"]})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-sm font-medium text-foreground",children:[A==="custom"?"Custom Amount":"Effective Amount"," ",c.jsx("span",{className:"text-muted-foreground font-normal",children:"(per hour)"})]}),A==="custom"?c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{type:"number",min:0,step:1,value:r.amount,onChange:Q,className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})}):c.jsx("div",{className:"px-3 py-2 text-sm rounded-md border border-input bg-muted/50 text-foreground font-mono",children:$(P)}),A==="custom"&&!x&&K>0&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:R,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Max (",$(K),")"]}),!w&&H>0&&c.jsxs("button",{onClick:z,className:"px-2 py-1 text-xs rounded bg-secondary text-secondary-foreground hover:bg-secondary/80",children:["Match Need (",$(Math.min(K,H)),")"]})]}),c.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[!x&&K>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Source produces:"}),c.jsxs("span",{className:"font-mono text-green-400",children:[$(K),"/hr"]})]}),!w&&H>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Target needs:"}),c.jsxs("span",{className:"font-mono text-blue-400",children:[$(H),"/hr"]})]}),c.jsxs("div",{className:"flex justify-between font-medium",children:[c.jsx("span",{children:"Transferring:"}),c.jsxs("span",{className:`font-mono ${C!=null&&C.sourceConstrained?"text-yellow-400":"text-foreground"}`,children:[$(P),"/hr"]})]}),A==="custom"&&r.amount!==P&&c.jsxs("div",{className:"flex justify-between text-yellow-400",children:[c.jsx("span",{children:"Configured:"}),c.jsxs("span",{className:"font-mono",children:[$(r.amount),"/hr"]})]}),(C==null?void 0:C.sourceConstrained)&&c.jsx("div",{className:"text-yellow-400 mt-1",children:" Limited by source availability"}),(C==null?void 0:C.targetConstrained)&&c.jsx("div",{className:"text-blue-400 mt-1",children:" Target needs less than available"}),!x&&r.ratio!==void 0&&A==="custom"&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Ratio:"}),c.jsxs("span",{className:"font-mono",children:[(r.ratio*100).toFixed(1),"%"]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Lock Amount"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Locked connections don't auto-scale"})]}),c.jsx("button",{onClick:O,className:`w-12 h-6 rounded-full transition-colors ${r.locked?"bg-primary":"bg-muted"}`,children:c.jsx("span",{className:`block w-5 h-5 rounded-full bg-white shadow transition-transform ${r.locked?"translate-x-6":"translate-x-0.5"}`})})]}),c.jsx("div",{className:"pt-4 border-t border-border",children:c.jsx("button",{onClick:M,className:"w-full px-3 py-2 text-sm rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors",children:"Delete Connection"})})]})}function Hk(){const t=he(S=>S.sidebarOpen),r=he(S=>S.selectedNodeId),o=he(S=>S.selectedEdgeId),i=he(S=>S.viewMode),l=he(S=>S.activeStationId),u=de(S=>S.plan);if(!t)return null;const d=i==="network"?u.stations.find(S=>S.id===r):null,p=i==="network"?u.sectors.find(S=>S.id===r):null,y=u.connections.find(S=>S.id===o),g=u.stations.find(S=>S.id===l),h=i==="station"&&g?g.modules.find(S=>S.id===r):null,m=i==="station"&&g&&o?(g.moduleConnections??[]).find(S=>S.id===o):null;let x="Network";i==="station"?m?x="Connection":h?x="Module":x="Add Modules":d?x="Station":p?x="Sector":y&&(x="Connection");const w=()=>i==="station"?m&&l?c.jsx(Fk,{stationId:l,connection:m}):h&&l?c.jsx(zk,{stationId:l,module:h}):c.jsx($k,{}):d?c.jsx(Ak,{station:d}):p?c.jsx(Lk,{sector:p}):y?c.jsx(Rk,{connection:y}):c.jsxs("div",{className:"text-sm text-muted-foreground space-y-4",children:[c.jsx("p",{children:"Select a station or sector to view details."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-foreground",children:"Quick Actions"}),c.jsxs("ul",{className:"text-xs space-y-1",children:[c.jsx("li",{children:"Right-click on the canvas to add stations"}),c.jsx("li",{children:"Drag from one station handle to another to connect"}),c.jsx("li",{children:"Press Delete to remove selected items"}),c.jsx("li",{children:"Double-click a station to configure modules"})]})]})]});return c.jsxs("aside",{className:"w-72 border-l border-border bg-card flex flex-col",children:[c.jsx("div",{className:"p-4 border-b border-border",children:c.jsx("h2",{className:"font-semibold text-foreground",children:x})}),c.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:w()}),c.jsx("div",{className:"p-4 border-t border-border",children:c.jsx("div",{className:"text-xs text-muted-foreground space-y-0.5",children:i==="station"&&g?c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["Modules: ",g.modules.length]}),c.jsxs("p",{children:["Station: ",g.name]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["Stations: ",u.stations.length]}),c.jsxs("p",{children:["Sectors: ",u.sectors.length]}),c.jsxs("p",{children:["Connections: ",u.connections.length]})]})})})]})}function Vk(){const t=he(d=>d.viewMode),r=he(d=>d.activeStationId),o=he(d=>d.exitStationView),i=de(d=>d.plan),l=i.stations.find(d=>d.id===r),u=l!=null&&l.sectorId?i.sectors.find(d=>d.id===l.sectorId):null;return t==="network"?null:c.jsxs("nav",{className:"h-10 border-b border-border bg-muted/50 flex items-center px-4 text-sm",children:[c.jsx("button",{onClick:o,className:"text-primary hover:underline",children:i.name}),u&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),c.jsx("span",{className:"text-muted-foreground",children:u.name})]}),l&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mx-2 text-muted-foreground",children:"/"}),c.jsx("span",{className:"text-foreground font-medium",children:l.name})]})]})}function Bk(){const t=de(h=>h.computed),r=We(h=>h.gameData),{t:o}=gt(),i=h=>{var m;return o((m=r==null?void 0:r.wares[h])==null?void 0:m.name,h)},l=h=>Math.abs(h)>=1e4?`${(h/1e3).toFixed(1)}k`:Math.abs(h)>=1e3?`${(h/1e3).toFixed(2)}k`:h.toFixed(0),u=F.useMemo(()=>{const h=new Map;for(const x of t.totalOutputs)h.set(x.wareId,(h.get(x.wareId)??0)+x.amount);for(const x of t.totalInputs)h.set(x.wareId,(h.get(x.wareId)??0)-x.amount);const m=[];for(const[x,w]of h)Math.abs(w)>.01&&m.push({wareId:x,amount:w});return m.sort((x,w)=>w.amount-x.amount)},[t.totalOutputs,t.totalInputs]),d=u.filter(h=>h.amount>0),p=u.filter(h=>h.amount<0),y=F.useMemo(()=>[...t.totalOutputs].sort((h,m)=>m.amount-h.amount),[t.totalOutputs]),g=F.useMemo(()=>[...t.totalInputs].sort((h,m)=>m.amount-h.amount),[t.totalInputs]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Net Balance"}),d.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Surpluses (available for export)"}),c.jsx("div",{className:"space-y-1",children:d.map(h=>c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-green-400",children:i(h.wareId)}),c.jsxs("span",{className:"font-mono text-green-400",children:["+",l(h.amount),"/hr"]})]},h.wareId))})]}),p.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs text-muted-foreground mb-2",children:"Deficits (need import)"}),c.jsx("div",{className:"space-y-1",children:p.map(h=>c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-red-400",children:i(h.wareId)}),c.jsxs("span",{className:"font-mono text-red-400",children:[l(h.amount),"/hr"]})]},h.wareId))})]}),d.length===0&&p.length===0&&c.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources tracked yet. Add modules to stations."})]}),c.jsxs("section",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Production",c.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",y.length," wares)"]})]}),y.length>0?c.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:y.map(h=>c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-foreground",children:i(h.wareId)}),c.jsxs("span",{className:"font-mono text-green-400",children:["+",l(h.amount),"/hr"]})]},h.wareId))}):c.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No production yet."})]}),c.jsxs("section",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3",children:["Total Consumption",c.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",g.length," wares)"]})]}),g.length>0?c.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(h=>c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-foreground",children:i(h.wareId)}),c.jsxs("span",{className:"font-mono text-blue-400",children:["-",l(h.amount),"/hr"]})]},h.wareId))}):c.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No consumption yet."})]}),t.deficits.length>0&&c.jsxs("section",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-red-400 mb-3",children:["Unsupplied Inputs (",t.deficits.length,")"]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.deficits.map((h,m)=>c.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/30",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-red-400",children:i(h.wareId)}),c.jsxs("span",{className:"font-mono text-red-400",children:["-",l(h.deficit),"/hr"]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Needs ",l(h.required),", getting ",l(h.supplied)]})]},`${h.stationId}-${h.wareId}-${m}`))})]})]})}function Wk(){const t=de(g=>g.plan.stations),r=de(g=>g.plan.sectors),o=de(g=>g.computed),i=We(g=>g.gameData),{t:l}=gt(),u=g=>{var h;return l((h=i==null?void 0:i.wares[g])==null?void 0:h.name,g)},d=g=>Math.abs(g)>=1e4?`${(g/1e3).toFixed(1)}k`:Math.abs(g)>=1e3?`${(g/1e3).toFixed(2)}k`:g.toFixed(0),p=g=>{var h;return g?((h=r.find(m=>m.id===g))==null?void 0:h.name)??null:null},y=F.useMemo(()=>[...t].sort((g,h)=>{const m=xl(o,g.id),x=xl(o,h.id);return m!==x?x-m:g.name.localeCompare(h.name)}),[t,o]);return t.length===0?c.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No stations yet. Right-click on the canvas to add one."}):c.jsx("div",{className:"space-y-4",children:y.map(g=>{const h=Ir(o,g.id),m=xl(o,g.id),x=p(g.sectorId),w=o.deficits.filter(j=>j.stationId===g.id),S=h&&h.totalWorkforceRequired>0?Math.min(h.actualPopulation/h.totalWorkforceRequired,1):0;return c.jsxs("div",{className:`p-3 rounded-lg border ${m>0?"border-red-500/50 bg-red-500/5":"border-border bg-card"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center text-[10px] ${g.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/30"}`,children:g.completed&&c.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),c.jsx("h4",{className:`font-medium ${g.completed?"text-muted-foreground line-through":"text-foreground"}`,children:g.name}),m>0&&c.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-red-500 text-white",children:[m," deficit",m>1?"s":""]})]}),x&&c.jsx("span",{className:"text-xs text-muted-foreground",children:x})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),c.jsxs("span",{className:"text-yellow-500",children:[" ",(h==null?void 0:h.effectiveSunlight)??100,"%"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Modules"}),c.jsx("span",{className:"text-foreground",children:g.modules.length})]}),h&&h.totalWorkforceRequired>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),c.jsxs("span",{className:S>=1?"text-green-400":S>=.5?"text-yellow-400":"text-red-400",children:[h.actualPopulation,"/",h.totalWorkforceRequired]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),c.jsx("span",{className:"text-foreground",children:h.totalWorkforceCapacity})]})]})]}),h&&c.jsxs("div",{className:"space-y-2",children:[h.netOutputs.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Outputs:"}),c.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:h.netOutputs.map(j=>c.jsxs("div",{className:"text-xs flex items-center gap-1",children:[c.jsx("span",{className:"text-green-400",children:u(j.wareId)}),c.jsxs("span",{className:"font-mono text-green-400/70",children:["+",d(j.amount)]})]},j.wareId))})]}),h.netInputs.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Inputs:"}),c.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5",children:h.netInputs.map(j=>{const k=w.some(I=>I.wareId===j.wareId);return c.jsxs("div",{className:"text-xs flex items-center gap-1",children:[c.jsx("span",{className:k?"text-red-400":"text-blue-400",children:u(j.wareId)}),c.jsxs("span",{className:`font-mono ${k?"text-red-400/70":"text-blue-400/70"}`,children:["-",d(j.amount)]})]},j.wareId)})})]}),w.length>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[c.jsx("div",{className:"text-[10px] text-red-400 mb-1",children:"Unsupplied:"}),c.jsx("div",{className:"space-y-1",children:w.map(j=>c.jsxs("div",{className:"text-xs flex items-center justify-between",children:[c.jsx("span",{className:"text-red-400",children:u(j.wareId)}),c.jsxs("span",{className:"text-muted-foreground",children:[d(j.supplied),"/",d(j.required),c.jsxs("span",{className:"text-red-400 ml-1",children:["(-",d(j.deficit),")"]})]})]},j.wareId))})]})]}),g.modules.length===0&&c.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No modules configured"})]},g.id)})})}function Uk(){const t=he(l=>l.reportOpen),r=he(l=>l.setReportOpen),[o,i]=F.useState("network");return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>r(!1)}),c.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[c.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Report"}),c.jsx("button",{onClick:()=>r(!1),className:"p-1 rounded hover:bg-muted transition-colors","aria-label":"Close report",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsxs("div",{className:"flex border-b border-border",children:[c.jsx("button",{onClick:()=>i("network"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="network"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Network Summary"}),c.jsx("button",{onClick:()=>i("stations"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${o==="stations"?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:"Per Station"})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="network"?c.jsx(Bk,{}):c.jsx(Wk,{})}),c.jsx("div",{className:"px-4 py-3 border-t border-border text-xs text-muted-foreground",children:"All values are per hour (3600 game seconds)"})]})]}):null}function Ae(t){return t>=1e4?`${(t/1e3).toFixed(1)}k`:t.toFixed(0)}function Ac(t,r){return t<.01?"satisfied":r>.01?"partial":"unsatisfied"}const Yk={handle:{baseClass:"handle-module",inline:!0},inputColors:{default:"text-yellow-600",satisfied:"text-muted-foreground"},outputColors:{default:"text-green-700",satisfied:"text-muted-foreground"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[90px]"},Xk={handle:{baseClass:"handle-base",inline:!0},inputColors:{default:"text-blue-400",satisfied:"text-green-400",deficit:"text-red-400"},outputColors:{default:"text-green-400",satisfied:"text-green-400"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"},Qk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-import"},inputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},outputColors:{default:"text-purple-400",satisfied:"text-purple-300/60"},hasDrag:!0,fontSize:"text-[12px]",nameMaxWidth:"max-w-[90px]"},Gk={handle:{baseClass:"handle-module",inline:!0,colorClass:"handle-export"},inputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},outputColors:{default:"text-teal-400",satisfied:"text-teal-300/60"},hasDrag:!0,fontSize:"text-[10px]",nameMaxWidth:"max-w-[80px]"};function Vl({wareId:t,type:r,amount:o,status:i,preset:l,handleId:u,isDeficit:d=!1,drag:p,handleTooltip:y,amountTooltip:g}){const h=We(A=>A.gameData),{t:m}=gt(),x=r==="input",w=x?l.inputColors:l.outputColors,j=(A=>{var V;return m((V=h==null?void 0:h.wares[A])==null?void 0:V.name,A)})(t),k=()=>{const A=x?"handle-left":"handle-right",V="handle-sm";if(l.handle.colorClass)return`${l.handle.baseClass} ${A} ${V} ${l.handle.colorClass}`;const W=i==="satisfied"?x?"handle-input-satisfied":"handle-output-satisfied":x?"handle-input":"handle-output";return`${l.handle.baseClass} ${A} ${V} ${W}`},I=()=>i==="satisfied"?w.satisfied:d&&w.deficit?w.deficit:w.default,D=()=>{const A=o.fulfilled??0,V=A>.01;if(x)if(i==="satisfied"){const W=A>.01?A:o.primary;return c.jsxs("span",{className:"text-green-600 font-bold",title:g,children:["",Ae(W)]})}else if(V){const W=i==="partial"?o.primary-A:o.primary;return c.jsxs("span",{className:"text-red-400 font-bold",title:g,children:["-",Ae(W)]})}else return c.jsxs("span",{className:"text-red-600/60",title:g,children:["",Ae(o.primary)]});else return V?c.jsx("span",{className:"text-gray-400",title:g,children:Ae(o.primary)}):c.jsx("span",{className:"text-gray-500/60",title:g,children:Ae(o.primary)})},C=()=>!l.hasDrag||!p?null:c.jsx("div",{draggable:!0,onDragStart:p.onDragStart,onDragEnd:p.onDragEnd,className:"nopan nodrag flex-shrink-0 w-4 flex items-center justify-center cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-50 hover:!opacity-100",title:"Drag to reorder",children:c.jsx("span",{className:"text-[8px] text-muted-foreground select-none",children:""})}),P=()=>c.jsx(Cr,{type:x?"target":"source",position:x?ye.Left:ye.Right,id:u,className:k(),title:y??j});return c.jsxs("div",{onDragOver:p==null?void 0:p.onDragOver,onDragLeave:p==null?void 0:p.onDragLeave,onDrop:p==null?void 0:p.onDrop,className:`
        relative flex items-center ${l.fontSize} py-0.5 group
        ${p!=null&&p.isDragging?"opacity-50":""}
        ${p!=null&&p.isDragOver?"bg-primary/20 rounded":""}
      `,children:[x&&l.handle.inline&&P(),!x&&l.hasDrag&&C(),x&&!l.handle.inline&&P(),c.jsxs("div",{className:`flex-1 flex items-center justify-between ${x?l.handle.inline?"":"pl-4 pr-2":l.handle.inline?"":"pl-2 pr-4"}`,children:[x&&c.jsx("span",{className:"font-mono ml-1",children:D()}),c.jsx("span",{className:`truncate ${l.nameMaxWidth} ${I()}`,children:j}),!x&&c.jsx("span",{className:"font-mono mr-2",children:D()})]}),x&&l.hasDrag&&C(),!x&&l.handle.inline&&P(),!x&&!l.handle.inline&&P()]})}const Kk=F.memo(function({data:r,selected:o}){const{station:i}=r,l=de(M=>M.plan.sectors),u=de(M=>M.computed),d=de(M=>M.updateStation),p=he(M=>M.drillIntoStation),[y,g]=F.useState(null),[h,m]=F.useState(null),x=i.sectorId?l.find(M=>M.id===i.sectorId):null,w=F.useMemo(()=>Ir(u,i.id),[u,i.id]),S=F.useMemo(()=>xl(u,i.id),[u,i.id]),j=(w==null?void 0:w.effectiveSunlight)??i.sunlightOverride??(x==null?void 0:x.sunlight)??100,k=F.useCallback(()=>{p(i.id)},[p,i.id]),I=w&&w.totalWorkforceRequired>0?Math.min(w.actualPopulation/w.totalWorkforceRequired,1):0,D=w&&w.totalWorkforceRequired>0,C=F.useMemo(()=>u.deficits.filter(M=>M.stationId===i.id),[u.deficits,i.id]),P=M=>C.some(b=>b.wareId===M),A=F.useCallback((M,b)=>{if(!b||b.length===0)return M;const N=new Map(M.map(T=>[T.wareId,T])),L=[],E=new Set;for(const T of b){const Z=N.get(T);Z&&(L.push(Z),E.add(T))}for(const T of M)E.has(T.wareId)||L.push(T);return L},[]),V=F.useMemo(()=>A((w==null?void 0:w.stationOutputs)??[],i.outputOrder),[w==null?void 0:w.stationOutputs,i.outputOrder,A]),W=F.useMemo(()=>A((w==null?void 0:w.stationInputs)??[],i.inputOrder),[w==null?void 0:w.stationInputs,i.inputOrder,A]),K=F.useMemo(()=>{const M=new Map;for(const b of(w==null?void 0:w.externallySupplied)??[])M.set(b.wareId,b.amount);return M},[w==null?void 0:w.externallySupplied]),q=F.useMemo(()=>{const M=new Map;for(const b of(w==null?void 0:w.externallyConsumed)??[])M.set(b.wareId,b.amount);return M},[w==null?void 0:w.externallyConsumed]),H=F.useCallback((M,b,N)=>{M.stopPropagation(),g(`${N}-${b}`),M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",`${N}-${b}`)},[]),$=F.useCallback((M,b,N)=>{M.preventDefault(),M.stopPropagation();const L=`${N}-${b}`;y&&y!==L&&y.startsWith(N)&&(m(L),M.dataTransfer.dropEffect="move")},[y]),X=F.useCallback(()=>{m(null)},[]),Q=F.useCallback((M,b,N)=>{if(M.preventDefault(),M.stopPropagation(),!y||!y.startsWith(N)){g(null),m(null);return}const L=y.replace(`${N}-`,"");if(L===b){g(null),m(null);return}const T=(N==="output"?V:W).map(oe=>oe.wareId),Z=T.indexOf(L),G=T.indexOf(b);if(Z===-1||G===-1){g(null),m(null);return}const ne=[...T];ne.splice(Z,1),ne.splice(G,0,L),N==="output"?d(i.id,{outputOrder:ne}):d(i.id,{inputOrder:ne}),g(null),m(null)},[y,V,W,d,i.id]),O=F.useCallback(()=>{g(null),m(null)},[]),R=F.useCallback((M,b)=>{const N=`${b}-${M}`;return{isDragging:y===N,isDragOver:h===N,onDragStart:L=>H(L,M,b),onDragEnd:O,onDragOver:L=>$(L,M,b),onDragLeave:X,onDrop:L=>Q(L,M,b)}},[y,h,H,O,$,X,Q]),z=(M,b)=>{const N=b==="input",L=`${b}-${M.wareId}`,E=N&&P(M.wareId),T=N?K.get(M.wareId)??0:0,Z=N?0:q.get(M.wareId)??0,G=N?T:Z,ne=M.amount-G,oe=Ac(ne,G),ae=N?"Need":"Export",re=N?"Supplied":"Consumed";let ue;return oe==="satisfied"?ue=`${ae}: ${Ae(M.amount)}, ${re}: ${Ae(G)}`:oe==="partial"?ue=`${ae}: ${Ae(M.amount)}, ${re}: ${Ae(G)}, Remaining: ${Ae(ne)}`:ue=`${ae}: ${Ae(M.amount)}, No external ${N?"supply":"consumers"}`,c.jsx(Vl,{wareId:M.wareId,type:b,handleId:L,amount:{primary:M.amount,secondary:G>.01?G:void 0,fulfilled:G},status:oe,preset:Xk,isDeficit:E,drag:R(M.wareId,b),amountTooltip:ue},M.wareId)};return c.jsxs("div",{className:`
        min-w-[240px] max-w-[240px] rounded-lg border-2 bg-card shadow-md cursor-pointer relative
        ${o?"border-primary ring-2 ring-primary/20":"border-border"}
        ${S>0?"border-red-500/50":""}
      `,onDoubleClick:k,children:[S>0&&c.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md z-10",children:S}),c.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/30 rounded-t-lg",children:c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("button",{onClick:M=>{M.stopPropagation(),d(i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&c.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),c.jsx("h3",{className:`font-medium text-sm truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:i.name}),x&&c.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-primary/10 text-primary truncate max-w-[60px]",children:x.name})]})}),c.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Sunlight"}),c.jsxs("span",{className:"text-foreground flex items-center gap-1",children:[c.jsx("span",{className:"text-yellow-500",children:""}),j,"%",i.sunlightOverride===null&&x&&c.jsx("span",{className:"text-muted-foreground text-[10px]",children:"(sector)"})]})]}),D&&c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Population"}),c.jsxs("span",{className:"text-foreground text-[10px]",children:[w.actualPopulation,"/",w.totalWorkforceRequired]})]}),c.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full transition-all ${I>=1?"bg-green-500":I>=.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${I*100}%`}})})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Modules"}),c.jsx("span",{className:"text-foreground",children:i.modules.length})]}),w&&(w.stationInputs.length>0||w.stationOutputs.length>0)&&c.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[V.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",c.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),c.jsx("div",{className:"space-y-0 pr-2",children:V.map(M=>z(M,"output"))})]}),W.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",c.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),c.jsx("div",{className:"space-y-0 pl-2",children:W.map(M=>z(M,"input"))})]})]}),i.modules.length===0&&c.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:c.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Double-click to add modules"})})]})]})}),qk=160,Zk=100,Jk=F.memo(function({id:r,data:o,selected:i}){const{sector:l}=o,u=de(x=>x.updateSector),d=de(x=>x.plan.stations),p=de(x=>x.moveStationToSector),[y,g]=F.useState(!1),h=F.useCallback((x,w)=>{u(r,{position:{x:w.x,y:w.y},size:{width:w.width,height:w.height}})},[r,u]),m=F.useCallback((x,w)=>{const S={left:w.x,right:w.x+w.width,top:w.y,bottom:w.y+w.height};d.forEach(j=>{const k=j.position.x+qk/2,I=j.position.y+Zk/2,D=k>=S.left&&k<=S.right&&I>=S.top&&I<=S.bottom;D&&j.sectorId!==r?p(j.id,r):!D&&j.sectorId===r&&p(j.id,null)})},[r,d,p]);return c.jsxs("div",{className:"w-full h-full",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[c.jsx(pk,{minWidth:200,minHeight:150,isVisible:i||y,lineClassName:i?"!border-primary":"!border-muted-foreground/50",handleClassName:`!w-2.5 !h-2.5 !border-2 !border-background ${i?"!bg-primary":"!bg-muted-foreground"}`,onResize:h,onResizeEnd:m}),c.jsxs("div",{className:`
          w-full h-full rounded-lg border-2 border-dashed
          ${i?"border-primary bg-primary/5":"border-border bg-muted/20"}
        `,children:[c.jsx("div",{className:`
            absolute -top-6 left-2 px-2 py-0.5 rounded text-xs font-medium
            ${i?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
          `,children:l.name}),c.jsxs("div",{className:`
            absolute -top-6 right-2 px-2 py-0.5 rounded text-xs
            ${i?"bg-yellow-500/20 text-yellow-600":"bg-muted text-muted-foreground"}
          `,children:[" ",l.sunlight,"%"]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:c.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Drag stations here"})})]})]})}),eC={production:"",habitat:"",storage:""},jh={production:{border:"border-orange-400",bg:"bg-orange-500/10"},habitat:{border:"border-green-500",bg:"bg-green-500/10"},storage:{border:"border-blue-500",bg:"bg-blue-500/10"}},tC=F.memo(function({data:r,selected:o}){const{module:i}=r,l=he(E=>E.activeStationId),u=de(E=>E.computed),d=de(E=>E.updateModule),p=We(E=>E.getModule),y=We(E=>E.getModuleType),g=We(E=>E.gameData),{t:h}=gt(),[m,x]=F.useState(null),[w,S]=F.useState(null),[j,k]=F.useState(!1),I=p(i.blueprintId),D=y(i.blueprintId)??"production",C=jh[D]??jh.production,P=eC[D]??"",A=F.useMemo(()=>{if(l)return gr(u,l,i.id)},[u,l,i.id]),V=F.useCallback(E=>{var T;return h((T=g==null?void 0:g.wares[E])==null?void 0:T.name,E)},[g,h]),W=F.useCallback((E,T)=>{if(!T||T.length===0)return E;const Z=new Map(E.map(oe=>[oe.wareId,oe])),G=[],ne=new Set;for(const oe of T){const ae=Z.get(oe);ae&&(G.push(ae),ne.add(oe))}for(const oe of E)ne.has(oe.wareId)||G.push(oe);return G},[]),K=F.useMemo(()=>W((A==null?void 0:A.netOutputs)??[],i.outputOrder),[A==null?void 0:A.netOutputs,i.outputOrder,W]),q=F.useMemo(()=>W((A==null?void 0:A.netInputs)??[],i.inputOrder),[A==null?void 0:A.netInputs,i.inputOrder,W]),H=F.useMemo(()=>W((A==null?void 0:A.grossOutputs)??[],i.outputOrder),[A==null?void 0:A.grossOutputs,i.outputOrder,W]),$=F.useMemo(()=>W((A==null?void 0:A.grossInputs)??[],i.inputOrder),[A==null?void 0:A.grossInputs,i.inputOrder,W]),X=F.useMemo(()=>{if(!A)return!1;const E=A.grossOutputs.reduce((ne,oe)=>ne+oe.amount,0),T=A.netOutputs.reduce((ne,oe)=>ne+oe.amount,0),Z=A.grossInputs.reduce((ne,oe)=>ne+oe.amount,0),G=A.netInputs.reduce((ne,oe)=>ne+oe.amount,0);return Math.abs(E-T)>.01||Math.abs(Z-G)>.01},[A]),Q=F.useCallback((E,T,Z)=>{E.stopPropagation(),x(`${Z}-${T}`),E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("text/plain",`${Z}-${T}`)},[]),O=F.useCallback((E,T,Z)=>{E.preventDefault(),E.stopPropagation();const G=`${Z}-${T}`;m&&m!==G&&m.startsWith(Z)&&(S(G),E.dataTransfer.dropEffect="move")},[m]),R=F.useCallback(()=>{S(null)},[]),z=F.useCallback((E,T,Z)=>{if(E.preventDefault(),E.stopPropagation(),!m||!m.startsWith(Z)||!l){x(null),S(null);return}const G=m.replace(`${Z}-`,"");if(G===T){x(null),S(null);return}const oe=(Z==="output"?H:$).map(ve=>ve.wareId),ae=oe.indexOf(G),re=oe.indexOf(T);if(ae===-1||re===-1){x(null),S(null);return}const ue=[...oe];ue.splice(ae,1),ue.splice(re,0,G),Z==="output"?d(l,i.id,{outputOrder:ue}):d(l,i.id,{inputOrder:ue}),x(null),S(null)},[m,H,$,d,l,i.id]),M=F.useCallback(()=>{x(null),S(null)},[]),b=F.useCallback((E,T)=>{var G;return A?((G=(T==="output"?A.netOutputs:A.netInputs).find(ne=>ne.wareId===E))==null?void 0:G.amount)??0:0},[A]),N=F.useCallback((E,T)=>{const Z=`${T}-${E}`;return{isDragging:m===Z,isDragOver:w===Z,onDragStart:G=>Q(G,E,T),onDragEnd:M,onDragOver:G=>O(G,E,T),onDragLeave:R,onDrop:G=>z(G,E,T)}},[m,w,Q,M,O,R,z]),L=(E,T)=>{const Z=`${T}-${E.wareId}`,G=b(E.wareId,T),ne=G<.01;return c.jsx(Vl,{wareId:E.wareId,type:T,handleId:Z,amount:{primary:G,fulfilled:E.amount-G},status:ne?"satisfied":"unsatisfied",preset:Yk,drag:N(E.wareId,T),amountTooltip:`Full: ${Ae(E.amount)}/hr`},E.wareId)};return c.jsxs("div",{className:`
        w-[240px] rounded-lg border-2 bg-card shadow-md
        ${o?"border-primary ring-2 ring-primary/20":C.border}
      `,children:[c.jsx("div",{className:`px-3 py-2 border-b border-border ${C.bg} rounded-t-lg`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:E=>{E.stopPropagation(),l&&d(l,i.id,{completed:!i.completed})},className:`nopan nodrag flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${i.completed?"bg-green-500 border-green-600 text-white":"border-muted-foreground/40 hover:border-muted-foreground"}`,title:i.completed?"Mark incomplete":"Mark complete",children:i.completed&&c.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M2 5.5L4 7.5L8 3"})})}),c.jsx("span",{className:"text-base",children:P}),c.jsx("h3",{className:`text-xs truncate flex-1 ${i.completed?"text-muted-foreground line-through":"text-foreground"}`,children:h(I==null?void 0:I.name,i.blueprintId)})]})}),c.jsxs("div",{className:"px-3 py-2 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Count"}),c.jsx("span",{className:"text-foreground font-medium",children:i.count})]}),D==="habitat"&&I&&"workforceCapacity"in I&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Workforce"}),c.jsx("span",{className:"text-foreground",children:I.workforceCapacity*i.count})]}),D==="storage"&&I&&"cargoMax"in I&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Capacity"}),c.jsx("span",{className:"text-foreground",children:I.cargoMax*i.count})]}),(D==="production"||D==="habitat")&&A&&c.jsxs("div",{className:"pt-1.5 mt-1 border-t border-border/50 space-y-2",children:[H.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Outputs ",c.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),c.jsx("div",{className:"space-y-0",children:H.map(E=>L(E,"output"))})]}),$.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:["Inputs ",c.jsx("span",{className:"opacity-60",children:"/hr"}),":"]}),c.jsx("div",{className:"space-y-0",children:$.map(E=>L(E,"input"))})]}),K.length===0&&q.length===0&&X&&c.jsx("div",{className:"text-[10px] text-green-400 italic",children:" Fully utilized"}),(H.length>0||$.length>0)&&c.jsxs("div",{className:"pt-1 border-t border-border/30",children:[c.jsxs("button",{onClick:E=>{E.stopPropagation(),k(!j)},className:"nopan nodrag w-full text-[9px] text-muted-foreground hover:text-foreground flex items-center gap-1",children:[c.jsx("span",{children:j?"":""}),c.jsx("span",{children:"Full Production"})]}),j&&c.jsxs("div",{className:"mt-1 pl-2 border-l border-border/30 space-y-1",children:[H.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Outputs:"}),H.map(E=>c.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[c.jsx("span",{className:"truncate max-w-[70px]",children:V(E.wareId)}),c.jsxs("span",{className:"font-mono",children:["+",Ae(E.amount)]})]},E.wareId))]}),$.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-[9px] text-muted-foreground/70 mb-0.5",children:"Inputs:"}),$.map(E=>c.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground/80",children:[c.jsx("span",{className:"truncate max-w-[70px]",children:V(E.wareId)}),c.jsxs("span",{className:"font-mono",children:["-",Ae(E.amount)]})]},E.wareId))]})]})]})]}),(D==="production"||D==="habitat")&&!A&&c.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:c.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Loading I/O..."})})]})]})}),nC="generic-import",rC=F.memo(function({selected:r}){const o=he(H=>H.activeStationId),i=de(H=>H.computed),l=We(H=>H.gameData),u=de(H=>H.plan.stations),d=de(H=>H.updateStation),{t:p}=gt(),[y,g]=F.useState(null),[h,m]=F.useState(null),x=F.useMemo(()=>{if(o)return u.find(H=>H.id===o)},[u,o]),w=F.useMemo(()=>{if(!(!o||!i))return i.stations.find(H=>H.stationId===o)},[i,o]),S=H=>{var $;return p(($=l==null?void 0:l.wares[H])==null?void 0:$.name,H)},j=(w==null?void 0:w.stationInputs)??[],k=(w==null?void 0:w.externallySupplied)??[],I=(w==null?void 0:w.remainingInputs)??[],D=F.useMemo(()=>{const H=new Map;for(const Q of j){const O=H.get(Q.wareId)||{connected:0,supplied:0,remaining:0};O.connected=Q.amount,H.set(Q.wareId,O)}for(const Q of k){const O=H.get(Q.wareId);O&&(O.supplied=Q.amount)}for(const Q of I){const O=H.get(Q.wareId);O&&(O.remaining=Q.amount)}const $=Array.from(H.entries()).map(([Q,O])=>({wareId:Q,connected:O.connected,supplied:O.supplied,remaining:O.remaining})),X=x==null?void 0:x.inputOrder;if(X&&X.length>0){const Q=new Map(X.map((O,R)=>[O,R]));$.sort((O,R)=>{const z=Q.get(O.wareId)??1/0,M=Q.get(R.wareId)??1/0;return z!==M?z-M:R.connected-O.connected})}else $.sort((Q,O)=>O.connected-Q.connected);return $},[j,k,I,x==null?void 0:x.inputOrder]),C=F.useCallback((H,$)=>{H.stopPropagation(),g($),H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",$)},[]),P=F.useCallback((H,$)=>{H.preventDefault(),H.stopPropagation(),y&&y!==$&&(m($),H.dataTransfer.dropEffect="move")},[y]),A=F.useCallback(()=>{m(null)},[]),V=F.useCallback((H,$)=>{if(H.preventDefault(),H.stopPropagation(),!y||!o){g(null),m(null);return}const X=y;if(X===$){g(null),m(null);return}const Q=D.map(M=>M.wareId),O=Q.indexOf(X),R=Q.indexOf($);if(O===-1||R===-1){g(null),m(null);return}const z=[...Q];z.splice(O,1),z.splice(R,0,X),d(o,{inputOrder:z}),g(null),m(null)},[y,D,d,o]),W=F.useCallback(()=>{g(null),m(null)},[]),K=F.useCallback(H=>({isDragging:y===H,isDragOver:h===H,onDragStart:$=>C($,H),onDragEnd:W,onDragOver:$=>P($,H),onDragLeave:A,onDrop:$=>V($,H)}),[y,h,C,W,P,A,V]),q=H=>{const $=`output-${H.wareId}`,X=Ac(H.remaining,H.supplied);let Q;return X==="satisfied"?Q=`Need: ${Ae(H.connected)}, Supplied: ${Ae(H.supplied)}`:X==="partial"?Q=`Need: ${Ae(H.connected)}, Supplied: ${Ae(H.supplied)}, Remaining: ${Ae(H.remaining)}`:Q=`Need: ${Ae(H.connected)}, No external supply`,c.jsx(Vl,{wareId:H.wareId,type:"output",handleId:$,amount:{primary:H.supplied-H.connected?H.supplied-H.connected:H.supplied,secondary:H.supplied>.01?H.supplied:void 0,fulfilled:H.supplied},status:X,preset:Qk,drag:K(H.wareId),amountTooltip:Q,handleTooltip:`Import ${S(H.wareId)}`},H.wareId)};return c.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-purple-500"}
      `,children:[c.jsx("div",{className:"px-3 py-2 border-b border-border bg-purple-500/10 rounded-t-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-base",children:""}),c.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Input"})]})}),c.jsx("div",{className:"px-1 py-2",children:D.length>0?c.jsx("div",{className:"space-y-0 pr-3",children:D.map(H=>q(H))}):c.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No imports configured"})}),c.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[c.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Drag  to module input"}),c.jsx(Cr,{type:"source",position:ye.Right,id:nC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drag to a module input to import that ware"})]})]})}),oC="generic-export",sC=F.memo(function({selected:r}){const o=he(H=>H.activeStationId),i=de(H=>H.computed),l=We(H=>H.gameData),u=de(H=>H.plan.stations),d=de(H=>H.updateStation),{t:p}=gt(),[y,g]=F.useState(null),[h,m]=F.useState(null),x=F.useMemo(()=>{if(o)return u.find(H=>H.id===o)},[u,o]),w=F.useMemo(()=>{if(!(!o||!i))return i.stations.find(H=>H.stationId===o)},[i,o]),S=H=>{var $;return p(($=l==null?void 0:l.wares[H])==null?void 0:$.name,H)},j=(w==null?void 0:w.stationOutputs)??[],k=(w==null?void 0:w.externallyConsumed)??[],I=(w==null?void 0:w.remainingOutputs)??[],D=F.useMemo(()=>{const H=new Map;for(const Q of j){const O=H.get(Q.wareId)||{connected:0,consumed:0,remaining:0};O.connected=Q.amount,H.set(Q.wareId,O)}for(const Q of k){const O=H.get(Q.wareId);O&&(O.consumed=Q.amount)}for(const Q of I){const O=H.get(Q.wareId);O&&(O.remaining=Q.amount)}const $=Array.from(H.entries()).map(([Q,O])=>({wareId:Q,connected:O.connected,consumed:O.consumed,remaining:O.remaining})),X=x==null?void 0:x.outputOrder;if(X&&X.length>0){const Q=new Map(X.map((O,R)=>[O,R]));$.sort((O,R)=>{const z=Q.get(O.wareId)??1/0,M=Q.get(R.wareId)??1/0;return z!==M?z-M:R.connected-O.connected})}else $.sort((Q,O)=>O.connected-Q.connected);return $},[j,k,I,x==null?void 0:x.outputOrder]),C=F.useCallback((H,$)=>{H.stopPropagation(),g($),H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",$)},[]),P=F.useCallback((H,$)=>{H.preventDefault(),H.stopPropagation(),y&&y!==$&&(m($),H.dataTransfer.dropEffect="move")},[y]),A=F.useCallback(()=>{m(null)},[]),V=F.useCallback((H,$)=>{if(H.preventDefault(),H.stopPropagation(),!y||!o){g(null),m(null);return}const X=y;if(X===$){g(null),m(null);return}const Q=D.map(M=>M.wareId),O=Q.indexOf(X),R=Q.indexOf($);if(O===-1||R===-1){g(null),m(null);return}const z=[...Q];z.splice(O,1),z.splice(R,0,X),d(o,{outputOrder:z}),g(null),m(null)},[y,D,d,o]),W=F.useCallback(()=>{g(null),m(null)},[]),K=F.useCallback(H=>({isDragging:y===H,isDragOver:h===H,onDragStart:$=>C($,H),onDragEnd:W,onDragOver:$=>P($,H),onDragLeave:A,onDrop:$=>V($,H)}),[y,h,C,W,P,A,V]),q=H=>{const $=`input-${H.wareId}`,X=Ac(H.remaining,H.consumed);let Q;return X==="satisfied"?Q=`Exporting: ${Ae(H.connected)}, Consumed: ${Ae(H.consumed)}`:X==="partial"?Q=`Exporting: ${Ae(H.connected)}, Consumed: ${Ae(H.consumed)}, Remaining: ${Ae(H.remaining)}`:Q=`Exporting: ${Ae(H.connected)}, No external consumers`,c.jsx(Vl,{wareId:H.wareId,type:"input",handleId:$,amount:{primary:H.connected,secondary:H.consumed>.01?H.consumed:void 0,fulfilled:H.consumed},status:X,preset:Gk,drag:K(H.wareId),amountTooltip:Q,handleTooltip:`Export ${S(H.wareId)}`},H.wareId)};return c.jsxs("div",{className:`
        w-[200px] rounded-lg border-2 bg-card shadow-md
        ${r?"border-primary ring-2 ring-primary/20":"border-teal-500"}
      `,children:[c.jsx("div",{className:"px-3 py-2 border-b border-border bg-teal-500/10 rounded-t-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-base",children:""}),c.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Station Output"})]})}),c.jsx("div",{className:"px-1 py-2",children:D.length>0?c.jsx("div",{className:"space-y-0 pl-3",children:D.map(H=>q(H))}):c.jsx("p",{className:"text-xs text-muted-foreground italic px-2 py-1",children:"No exports configured"})}),c.jsxs("div",{className:"relative px-2 py-1 border-t border-border/50 bg-muted/30 rounded-b-lg",children:[c.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:" Drag from module output"}),c.jsx(Cr,{type:"target",position:ye.Left,id:oC,className:"!absolute !inset-0 !w-full !h-full !transform-none !rounded-b-lg !border-0 !bg-transparent !opacity-0",title:"Drop a module output here to export that ware"})]})]})}),iC=F.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:d,targetPosition:p,data:y,selected:g}){const h=de(C=>C.computed),m=y==null?void 0:y.connection,x=F.useMemo(()=>{if(m)return yg(h,m.id)},[h,m]),[w,S,j]=Ll({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:u,targetPosition:p}),k=C=>C>=1e3?`${(C/1e3).toFixed(1)}k`:C.toFixed(0),I=h.deficits.find(C=>C.stationId===(m==null?void 0:m.targetStationId)&&C.wareId===(m==null?void 0:m.wareId));let D="#64748b";return m!=null&&m.wareId?I?I.supplied/I.required>=.8?D="#eab308":D="#f97316":D="#22c55e":D="#ef4444",c.jsxs(c.Fragment,{children:[c.jsx(yo,{id:r,path:w,style:{stroke:D,strokeWidth:g?3:2,strokeDasharray:m!=null&&m.wareId?void 0:"5,5"}}),(m==null?void 0:m.wareId)&&c.jsx(dg,{children:c.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${j}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border border-border
              ${g?"ring-2 ring-primary":""}
              ${x!=null&&x.sourceConstrained?"border-orange-500":""}
              transition-all cursor-pointer
            `,title:m.mode==="custom"?`Custom: ${k(m.amount)}, Actual: ${k((x==null?void 0:x.effectiveAmount)??0)}`:`Auto: ${k((x==null?void 0:x.effectiveAmount)??0)}`,children:k((x==null?void 0:x.effectiveAmount)??0)})})]})}),lC=F.memo(function({id:r,sourceX:o,sourceY:i,targetX:l,targetY:u,sourcePosition:d,targetPosition:p,data:y,selected:g}){const h=y==null?void 0:y.connection,m=de(P=>P.computed),x=he(P=>P.activeStationId),w=F.useMemo(()=>{if(!h||!x)return;const P=Ir(m,x);return P==null?void 0:P.moduleConnections.find(A=>A.connectionId===h.id)},[m,x,h]),[S,j,k]=Ll({sourceX:o,sourceY:i,sourcePosition:d,targetX:l,targetY:u,targetPosition:p}),I=P=>P>=1e3?`${(P/1e3).toFixed(1)}k`:P.toFixed(0),D=w!=null&&w.sourceConstrained?"#ff6666":"#88bb88",C=(w==null?void 0:w.effectiveAmount)??(h==null?void 0:h.amount)??0;return c.jsxs(c.Fragment,{children:[c.jsx(yo,{id:r,path:S,style:{stroke:D,strokeWidth:g?3:2,strokeDasharray:h!=null&&h.wareId?void 0:"5,5"}}),(h==null?void 0:h.wareId)&&c.jsx(dg,{children:c.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${j}px,${k}px)`,pointerEvents:"all"},className:`
              px-1.5 py-0.5 rounded-full text-[10px] font-mono font-medium
              bg-background/90 border
              ${w!=null&&w.sourceConstrained?"border-yellow-500":"border-orange-500/50"}
              ${g?"ring-2 ring-primary":""}
              transition-all cursor-pointer
            `,title:h.mode==="custom"?`Custom: ${I(h.amount)}, Actual: ${I(C)}`:`${h.mode??"auto"}: ${I(C)}`,children:I(C)})})]})});function jt({label:t,icon:r,variant:o="default",onClick:i}){const l="w-full flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors text-left",u=o==="destructive"?"text-destructive hover:bg-destructive/10":"text-foreground hover:bg-accent";return c.jsxs("button",{onClick:d=>{d.stopPropagation(),i(d)},className:`${l} ${u}`,children:[r&&c.jsx("span",{className:"text-lg leading-none",children:r}),t]})}function aC(){const{screenToFlowPosition:t}=Er(),r=he(y=>y.contextMenu),o=he(y=>y.closeContextMenu),i=de(y=>y.plan),l=de(y=>y.addStation),u=de(y=>y.addSector),d=F.useCallback(y=>{if(y.stopPropagation(),!r)return;const g=t({x:r.x,y:r.y});l(`Station ${i.stations.length+1}`,g),o()},[t,r,i.stations.length,l,o]),p=F.useCallback(y=>{if(y.stopPropagation(),!r)return;const g=t({x:r.x,y:r.y});u(`Sector ${i.sectors.length+1}`,g),o()},[t,r,i.sectors.length,u,o]);return c.jsxs(c.Fragment,{children:[c.jsx(jt,{label:"Add Station",icon:"+",onClick:d}),c.jsx(jt,{label:"Add Sector",icon:"",onClick:p})]})}const cl={production:{label:"Production",icon:""},habitat:{label:"Habitats",icon:""},storage:{label:"Storage",icon:""}};function uC(){const{screenToFlowPosition:t}=Er(),r=F.useRef(null),o=We(S=>S.gameData),i=de(S=>S.addModule),l=he(S=>S.activeStationId),u=he(S=>S.contextMenu),d=he(S=>S.closeContextMenu),{t:p}=gt(),[y,g]=F.useState(null),[h,m]=F.useState(""),x=F.useMemo(()=>{if(!o||!h.trim())return null;const S=h.toLowerCase(),j=[];return Object.keys(cl).forEach(k=>{Object.values(o.modules[k]).forEach(I=>{p(I.name).toLowerCase().includes(S)&&j.push({id:I.id,name:p(I.name),category:k})})}),j.slice(0,15)},[o,h,p]);F.useEffect(()=>{var S;(S=r.current)==null||S.focus()},[]);const w=F.useCallback((S,j)=>{if(S.stopPropagation(),!l||!u)return;const k=t({x:u.x,y:u.y});i(l,j,k),d()},[t,u,l,i,d]);return o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-2 pb-0",children:c.jsx("input",{ref:r,type:"text",placeholder:"Search modules...",value:h,onChange:S=>m(S.target.value),onKeyDown:S=>S.stopPropagation(),className:"w-full px-3 py-1.5 text-sm rounded border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring"})}),c.jsx("div",{className:"p-1 pt-1",children:x?c.jsx("div",{className:"max-h-64 overflow-y-auto",children:x.length===0?c.jsx("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:"No modules found"}):x.map(S=>c.jsxs("button",{onClick:j=>w(j,S.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-accent transition-colors text-left",children:[c.jsx("span",{children:cl[S.category].icon}),c.jsx("span",{className:"truncate",children:S.name})]},S.id))}):c.jsx(c.Fragment,{children:Object.keys(cl).map(S=>{const{label:j,icon:k}=cl[S],I=Object.values(o.modules[S]),D=y===S;return c.jsxs("div",{children:[c.jsxs("button",{onClick:C=>{C.stopPropagation(),g(D?null:S)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("span",{children:k}),j]}),c.jsx("span",{className:"text-muted-foreground text-xs",children:D?"":""})]}),D&&c.jsxs("div",{className:"ml-4 max-h-48 overflow-y-auto border-l border-border",children:[I.slice(0,20).map(C=>c.jsx("button",{onClick:P=>w(P,C.id),className:"w-full px-3 py-1.5 text-sm text-foreground/80 hover:bg-accent hover:text-foreground transition-colors text-left truncate",children:p(C.name)},C.id)),I.length>20&&c.jsxs("p",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:["+",I.length-20," more (use search)"]})]})]},S)})})})]}):null}function jr(){return c.jsx("div",{className:"my-1 h-px bg-border"})}function mc({label:t,value:r,type:o="text",min:i,max:l,step:u,onSubmit:d}){const[p,y]=F.useState(!1),[g,h]=F.useState(String(r)),m=F.useRef(null);F.useEffect(()=>{var w,S;p&&((w=m.current)==null||w.focus(),(S=m.current)==null||S.select())},[p]);const x=()=>{d(g),y(!1)};return p?c.jsxs("div",{className:"px-3 py-1.5",onClick:w=>w.stopPropagation(),children:[c.jsx("label",{className:"text-xs text-muted-foreground",children:t}),c.jsx("input",{ref:m,type:o,min:i,max:l,step:u,value:g,onChange:w=>h(w.target.value),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&x(),w.key==="Escape"&&y(!1)},onBlur:x,className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"})]}):c.jsxs("button",{onClick:w=>{w.stopPropagation(),h(String(r)),y(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[c.jsx("span",{children:t}),c.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate max-w-[100px]",children:r})]})}function cC({nodeId:t}){const r=de(y=>y.plan.stations),o=de(y=>y.updateStation),i=de(y=>y.removeStation),l=he(y=>y.drillIntoStation),u=he(y=>y.closeContextMenu),d=he(y=>y.clearSelection),p=r.find(y=>y.id===t);return p?c.jsxs(c.Fragment,{children:[c.jsx(jt,{label:"Open Station",onClick:()=>{l(t)}}),c.jsx(jr,{}),c.jsx(mc,{label:"Change Name",value:p.name,onSubmit:y=>{y.trim()&&o(t,{name:y.trim()})}}),c.jsx(mc,{label:"Sunlight Override",value:p.sunlightOverride??"",type:"number",min:0,max:500,onSubmit:y=>{const g=parseInt(y,10);o(t,{sunlightOverride:isNaN(g)?void 0:g})}}),c.jsx(jt,{label:p.locked?"Unlock Position":"Lock Position",icon:p.locked?"":"",onClick:()=>{o(t,{locked:!p.locked}),u()}}),c.jsx(jr,{}),c.jsx(jt,{label:"Delete Station",icon:"",variant:"destructive",onClick:()=>{i(t),d(),u()}})]}):null}function dC({value:t,onSelect:r}){const[o,i]=F.useState(!1),[l,u]=F.useState(t),d=F.useRef(null),p=We(h=>h.gameData),y=F.useMemo(()=>p!=null&&p.sectors?Object.values(p.sectors).sort((h,m)=>h.name.localeCompare(m.name)):[],[p]),g=F.useMemo(()=>{if(!l.trim())return y.slice(0,10);const h=l.toLowerCase();return y.filter(m=>m.name.toLowerCase().includes(h)).slice(0,10)},[y,l]);return F.useEffect(()=>{var h,m;o&&((h=d.current)==null||h.focus(),(m=d.current)==null||m.select())},[o]),o?c.jsxs("div",{className:"px-3 py-1.5",onClick:h=>h.stopPropagation(),children:[c.jsx("label",{className:"text-xs text-muted-foreground",children:"Sector Name"}),c.jsx("input",{ref:d,type:"text",value:l,onChange:h=>u(h.target.value),onKeyDown:h=>{if(h.stopPropagation(),h.key==="Enter"){const m=y.find(x=>x.name.toLowerCase()===l.toLowerCase());r((m==null?void 0:m.name)??l,m==null?void 0:m.sunlight),i(!1)}h.key==="Escape"&&i(!1)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),g.length>0&&c.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto rounded border border-border bg-background",children:g.map(h=>c.jsxs("button",{onClick:m=>{m.stopPropagation(),r(h.name,h.sunlight),i(!1)},className:"w-full flex items-center justify-between px-2 py-1 text-xs hover:bg-accent transition-colors text-left",children:[c.jsx("span",{className:"truncate text-foreground",children:h.name}),c.jsxs("span",{className:"text-muted-foreground ml-1 shrink-0",children:[h.sunlight,"%"]})]},h.id))})]}):c.jsxs("button",{onClick:h=>{h.stopPropagation(),u(t),i(!0)},className:"w-full flex items-center justify-between gap-2 px-3 py-2 text-sm text-foreground rounded hover:bg-accent transition-colors text-left",children:[c.jsx("span",{children:"Change Name"}),c.jsx("span",{className:"text-muted-foreground text-xs truncate max-w-[100px]",children:t})]})}function fC({nodeId:t}){const r=de(m=>m.plan),o=de(m=>m.updateSector),i=de(m=>m.removeSector),l=de(m=>m.addStation),u=de(m=>m.moveStationToSector),d=he(m=>m.contextMenu),p=he(m=>m.closeContextMenu),y=he(m=>m.clearSelection),g=r.sectors.find(m=>m.id===t);if(!g)return null;const h=r.stations.filter(m=>m.sectorId===t);return c.jsxs(c.Fragment,{children:[c.jsx(dC,{value:g.name,onSelect:(m,x)=>{const w={name:m};x!==void 0&&(w.sunlight=x),o(t,w)}}),c.jsx(mc,{label:"Sunlight",value:g.sunlight,type:"number",min:0,max:500,onSubmit:m=>{const x=parseInt(m,10);!isNaN(x)&&x>=0&&o(t,{sunlight:x})}}),c.jsx(jr,{}),c.jsx(jt,{label:"Create Station in Sector",icon:"+",onClick:()=>{var S;const m=(d==null?void 0:d.flowPosition)??{x:g.position.x+50,y:g.position.y+80},x=`Station ${r.stations.length+1}`;l(x,m);const w=(S=de.getState().plan.stations.at(-1))==null?void 0:S.id;w&&u(w,t),p()}}),c.jsx(jt,{label:g.locked?"Unlock Position":"Lock Position",icon:g.locked?"":"",onClick:()=>{o(t,{locked:!g.locked}),p()}}),c.jsx(jr,{}),c.jsx(jt,{label:"Delete Sector",icon:"",variant:"destructive",onClick:()=>{h.length>0&&!confirm(`This sector contains ${h.length} station(s). They will be unassigned. Continue?`)||(i(t),y(),p())}})]})}function pC({label:t,value:r,min:o=1,onChange:i}){return c.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[c.jsx("label",{className:"text-xs text-muted-foreground",children:t}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("button",{onClick:l=>{l.stopPropagation(),r>o&&i(r-1)},disabled:r<=o,className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:""}),c.jsx("input",{type:"number",min:o,value:r,onChange:l=>{l.stopPropagation();const u=parseInt(l.target.value,10);!isNaN(u)&&u>=o&&i(u)},onKeyDown:l=>l.stopPropagation(),className:"w-14 px-2 py-1 text-sm text-center rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring"}),c.jsx("button",{onClick:l=>{l.stopPropagation(),i(r+1)},className:"w-7 h-7 rounded border border-input bg-background text-foreground hover:bg-accent transition-colors text-sm",children:"+"})]})]})}function gc({label:t,value:r,options:o,onChange:i}){return c.jsxs("div",{className:"px-3 py-1.5",onClick:l=>l.stopPropagation(),children:[c.jsx("label",{className:"text-xs text-muted-foreground",children:t}),c.jsx("select",{value:r,onChange:l=>{l.stopPropagation(),i(l.target.value)},className:"w-full mt-1 px-2 py-1 text-sm rounded border border-input bg-background text-foreground focus:outline-none focus:ring-1 focus:ring-ring",children:o.map(l=>c.jsx("option",{value:l.value,children:l.label},l.value))})]})}function hC({nodeId:t}){const r=he(S=>S.activeStationId),o=he(S=>S.closeContextMenu),i=he(S=>S.clearSelection),l=de(S=>S.plan.stations),u=de(S=>S.updateModule),d=de(S=>S.removeModule),p=We(S=>S.gameData),y=We(S=>S.getModuleType),{t:g}=gt(),h=l.find(S=>S.id===r),m=h==null?void 0:h.modules.find(S=>S.id===t),x=m?y(m.blueprintId):null,w=F.useMemo(()=>{if(!p||!x)return[];const S=p.modules[x];return Object.values(S).sort((j,k)=>g(j.name).localeCompare(g(k.name))).map(j=>({value:j.id,label:g(j.name)}))},[p,x,g]);return!h||!m||!r?null:c.jsxs(c.Fragment,{children:[c.jsx(pC,{label:"Amount",value:m.count,min:1,onChange:S=>u(r,m.id,{count:S})}),x==="production"&&w.length>1&&c.jsx(gc,{label:"Blueprint",value:m.blueprintId,options:w,onChange:S=>u(r,m.id,{blueprintId:S})}),c.jsx(jt,{label:m.locked?"Unlock Position":"Lock Position",icon:m.locked?"":"",onClick:()=>{u(r,m.id,{locked:!m.locked}),o()}}),c.jsx(jr,{}),c.jsx(jt,{label:"Delete Module",icon:"",variant:"destructive",onClick:()=>{d(r,m.id),i(),o()}})]})}function mC({nodeId:t}){const r=he(h=>h.activeStationId),o=he(h=>h.closeContextMenu),i=de(h=>h.plan.stations),l=de(h=>h.removeModuleConnection),u=i.find(h=>h.id===r);if(!u||!r)return null;const d=u.moduleConnections??[],p=t===It,y=p?"Station Input":"Station Output",g=d.filter(h=>p?h.sourceModuleId===It:h.targetModuleId===Ut);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground",children:[y,"  ",g.length," connection",g.length!==1?"s":""]}),c.jsx(jt,{label:"Reset (clear all connections)",variant:"destructive",onClick:()=>{g.forEach(h=>{l(r,h.id)}),o()}})]})}const Eh=[{value:"auto",label:"Auto (match availability)"},{value:"max",label:"Max (take all available)"},{value:"custom",label:"Custom (fixed amount)"}];function gC({edgeId:t,viewMode:r}){var j,k;const o=he(I=>I.closeContextMenu),i=he(I=>I.clearSelection),l=he(I=>I.activeStationId),u=de(I=>I.plan),d=de(I=>I.updateConnection),p=de(I=>I.removeConnection),y=de(I=>I.updateModuleConnection),g=de(I=>I.removeModuleConnection),h=We(I=>I.gameData),{t:m}=gt();if(r==="network"){const I=u.connections.find(C=>C.id===t);if(!I)return null;const D=I.wareId?m((j=h==null?void 0:h.wares[I.wareId])==null?void 0:j.name,I.wareId):"Unknown";return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:D}),c.jsx(gc,{label:"Mode",value:I.mode??"auto",options:Eh,onChange:C=>d(I.id,{mode:C})}),c.jsx(jr,{}),c.jsx(jt,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{p(I.id),i(),o()}})]})}if(!l)return null;const x=u.stations.find(I=>I.id===l),w=((x==null?void 0:x.moduleConnections)??[]).find(I=>I.id===t);if(!w)return null;const S=m((k=h==null?void 0:h.wares[w.wareId])==null?void 0:k.name,w.wareId);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground truncate",children:S}),c.jsx(gc,{label:"Mode",value:w.mode??"auto",options:Eh,onChange:I=>y(l,w.id,{mode:I})}),c.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between",onClick:I=>I.stopPropagation(),children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Lock Amount"}),c.jsx("button",{onClick:I=>{I.stopPropagation(),y(l,w.id,{locked:!w.locked})},className:`w-10 h-5 rounded-full transition-colors ${w.locked?"bg-primary":"bg-muted"}`,children:c.jsx("span",{className:`block w-4 h-4 rounded-full bg-white shadow transition-transform ${w.locked?"translate-x-5":"translate-x-0.5"}`})})]}),c.jsx(jr,{}),c.jsx(jt,{label:"Delete Connection",icon:"",variant:"destructive",onClick:()=>{g(l,w.id),i(),o()}})]})}function vg(){const t=he(h=>h.contextMenu),r=he(h=>h.closeContextMenu),o=F.useRef(null),i=F.useCallback(()=>{if(!t||!o.current)return{left:0,top:0};const h=o.current.getBoundingClientRect();let{x:m,y:x}=t;return m+h.width>window.innerWidth&&(m=window.innerWidth-h.width-8),x+h.height>window.innerHeight&&(x=window.innerHeight-h.height-8),m<8&&(m=8),x<8&&(x=8),{left:m,top:x}},[t]);if(F.useEffect(()=>{if(!t)return;const h=x=>{o.current&&!o.current.contains(x.target)&&r()},m=setTimeout(()=>{document.addEventListener("mousedown",h)},0);return()=>{clearTimeout(m),document.removeEventListener("mousedown",h)}},[t,r]),F.useEffect(()=>{if(!t)return;const h=m=>{m.key==="Escape"&&r()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[t,r]),!t)return null;const{target:l}=t,d=(()=>{if(l.type==="pane"){if(l.viewMode==="network")return c.jsx(aC,{});if(l.viewMode==="station")return c.jsx(uC,{})}if(l.type==="node"){if(l.viewMode==="network"){if(l.nodeType==="station")return c.jsx(cC,{nodeId:l.nodeId});if(l.nodeType==="sector")return c.jsx(fC,{nodeId:l.nodeId})}if(l.viewMode==="station"){if(l.nodeId===It||l.nodeId===Ut)return c.jsx(mC,{nodeId:l.nodeId});if(l.nodeType==="module")return c.jsx(hC,{nodeId:l.nodeId})}}return l.type==="edge"?c.jsx(gC,{edgeId:l.edgeId,viewMode:l.viewMode}):null})();if(!d)return null;const y=l.type==="pane"&&l.viewMode==="station"?"min-w-[240px] max-w-[280px]":"min-w-[160px]",g=i();return c.jsx("div",{ref:o,className:`fixed z-50 ${y} rounded-md border border-border bg-popover shadow-lg`,style:{left:g.left||t.x,top:g.top||t.y},onClick:h=>h.stopPropagation(),onMouseDown:h=>h.stopPropagation(),children:c.jsx("div",{className:"p-1",children:d})})}const xC={station:Kk,sector:Jk},yC={resource:iC};function vC(){const{setViewport:t,screenToFlowPosition:r}=Er(),o=de(M=>M.plan.stations),i=de(M=>M.plan.sectors),l=de(M=>M.plan.connections),u=de(M=>M.computed),d=de(M=>M.updateStation),p=de(M=>M.updateSector),y=de(M=>M.removeStation),g=de(M=>M.removeSector),h=de(M=>M.moveStationToSector),m=de(M=>M.addConnection),x=de(M=>M.removeConnection),w=he(M=>M.selectNode),S=he(M=>M.selectEdge),j=he(M=>M.clearSelection),k=he(M=>M.openContextMenu),I=he(M=>M.closeContextMenu),D=F.useRef(null),C=F.useMemo(()=>{const M=i.map(N=>({id:N.id,type:"sector",position:N.position,data:{sector:N},width:N.size.width,height:N.size.height,zIndex:-1,draggable:!N.locked})),b=o.map(N=>({id:N.id,type:"station",position:N.position,data:{station:N},zIndex:1,draggable:!N.locked}));return[...M,...b]},[i,o]),P=F.useMemo(()=>l.map(M=>({id:M.id,source:M.sourceStationId,target:M.targetStationId,sourceHandle:M.wareId?`output-${M.wareId}`:void 0,targetHandle:M.wareId?`input-${M.wareId}`:void 0,type:"resource",data:{connection:M}})),[l]),A=F.useCallback((M,b)=>{for(const N of i)if(M>=N.position.x&&M<=N.position.x+N.size.width&&b>=N.position.y&&b<=N.position.y+N.size.height)return N.id;return null},[i]),V=F.useCallback(M=>{M.forEach(b=>{if(b.type==="position"&&b.position){const N=o.find(E=>E.id===b.id),L=i.find(E=>E.id===b.id);if(N)d(b.id,{position:b.position});else if(L){const E=b.position.x-L.position.x,T=b.position.y-L.position.y;p(b.id,{position:b.position}),(E!==0||T!==0)&&o.filter(Z=>Z.sectorId===L.id).forEach(Z=>{d(Z.id,{position:{x:Z.position.x+E,y:Z.position.y+T}})})}}else if(b.type==="remove"){const N=o.find(E=>E.id===b.id),L=i.find(E=>E.id===b.id);N?y(b.id):L&&g(b.id)}else b.type==="select"&&b.selected&&w(b.id)})},[o,i,d,p,y,g,w]),W=F.useCallback((M,b)=>{const N=o.find(Z=>Z.id===b.id);if(!N)return;const L=b.position.x+80,E=b.position.y+50,T=A(L,E);T!==N.sectorId&&h(N.id,T)},[o,A,h]),K=F.useCallback(M=>{M.forEach(b=>{b.type==="remove"?x(b.id):b.type==="select"&&b.selected&&S(b.id)})},[x,S]),q=M=>M?M.split("-").slice(1).join("-"):"",H=F.useCallback(M=>{if(M.source&&M.target&&M.sourceHandle){const b=q(M.sourceHandle),N=u.stations.find(G=>G.stationId===M.source),L=N==null?void 0:N.remainingOutputs.find(G=>G.wareId===b),E=u.stations.find(G=>G.stationId===M.target),T=E==null?void 0:E.remainingInputs.find(G=>G.wareId===b),Z=T?Math.min((L==null?void 0:L.amount)??0,T.amount):(L==null?void 0:L.amount)??0;m({sourceStationId:M.source,targetStationId:M.target,wareId:b,amount:Z,mode:"auto"})}},[m,u.stations]),$=F.useCallback(()=>{j(),I()},[j,I]),X=F.useCallback(M=>{M.preventDefault(),k({x:M.clientX,y:M.clientY,flowPosition:r({x:M.clientX,y:M.clientY}),target:{type:"pane",viewMode:"network"}})},[k,r]),Q=F.useCallback((M,b)=>{M.preventDefault(),w(b.id),k({x:M.clientX,y:M.clientY,flowPosition:r({x:M.clientX,y:M.clientY}),target:{type:"node",nodeId:b.id,nodeType:b.type??"station",viewMode:"network"}})},[k,r,w]),O=F.useCallback((M,b)=>{M.preventDefault(),S(b.id),k({x:M.clientX,y:M.clientY,flowPosition:r({x:M.clientX,y:M.clientY}),target:{type:"edge",edgeId:b.id,edgeType:b.type??"resource",viewMode:"network"}})},[k,r,S]),R=F.useCallback(M=>{if(M.key==="Delete"||M.key==="Backspace"){const b=he.getState().selectedNodeId,N=he.getState().selectedEdgeId;if(b){const L=o.find(T=>T.id===b),E=i.find(T=>T.id===b);L?y(b):E&&g(b),j()}else N&&(x(N),j())}},[o,i,y,g,x,j]),z=F.useCallback(M=>{const b=Math.round(M.x),N=Math.round(M.y),L=Math.round(M.zoom*100)/100;(b!==M.x||N!==M.y||L!==M.zoom)&&t({x:b,y:N,zoom:L})},[t]);return c.jsxs("div",{ref:D,className:"flex-1 relative",onKeyDown:R,tabIndex:0,children:[c.jsxs(cg,{nodes:C,edges:P,onNodesChange:V,onEdgesChange:K,onConnect:H,onNodeDragStop:W,onPaneClick:$,onPaneContextMenu:X,onNodeContextMenu:Q,onEdgeContextMenu:O,onViewportChange:z,nodeTypes:xC,edgeTypes:yC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[c.jsx(pg,{gap:16,size:1}),c.jsx(mg,{}),c.jsx(uk,{nodeColor:M=>M.type==="sector"?M.selected?"#3b82f6":"#475569":M.selected?"#3b82f6":"#64748b",maskColor:"rgba(0, 0, 0, 0.4)"})]}),c.jsx(vg,{})]})}function wC(){return c.jsx(Hl,{children:c.jsx(vC,{})})}const SC={module:tC,stationInput:rC,stationOutput:sC},NC={module:lC};function kC(){const{setViewport:t,screenToFlowPosition:r}=Er(),o=he(R=>R.activeStationId),i=de(R=>R.plan.stations),l=de(R=>R.computed),u=de(R=>R.updateModule),d=de(R=>R.removeModule),p=de(R=>R.addModuleConnection),y=de(R=>R.removeModuleConnection),g=he(R=>R.selectNode),h=he(R=>R.selectEdge),m=he(R=>R.clearSelection),x=he(R=>R.openContextMenu),w=he(R=>R.closeContextMenu),S=F.useRef(null),j=F.useMemo(()=>i.find(R=>R.id===o),[i,o]),k={x:-300,y:100},I={x:400,y:100},D=F.useMemo(()=>{if(!j)return[];const R=j.modules.map(b=>({id:b.id,type:"module",position:b.position,data:{module:b},draggable:!b.locked})),z={id:It,type:"stationInput",position:j.stationInputPosition??k,data:{},deletable:!1},M={id:Ut,type:"stationOutput",position:j.stationOutputPosition??I,data:{},deletable:!1};return[z,...R,M]},[j]),C=F.useMemo(()=>j?(j.moduleConnections??[]).map(z=>({id:z.id,source:z.sourceModuleId,target:z.targetModuleId,sourceHandle:z.wareId?`output-${z.wareId}`:void 0,targetHandle:z.wareId?`input-${z.wareId}`:void 0,type:"module",data:{connection:z}})):[],[j]),P=de(R=>R.updateStation),A=F.useCallback(R=>{o&&R.forEach(z=>{z.type==="position"&&z.position?z.id===It?P(o,{stationInputPosition:z.position}):z.id===Ut?P(o,{stationOutputPosition:z.position}):u(o,z.id,{position:z.position}):z.type==="remove"?z.id!==It&&z.id!==Ut&&d(o,z.id):z.type==="select"&&z.selected&&g(z.id)})},[o,u,P,d,g]),V=F.useCallback(R=>{o&&R.forEach(z=>{z.type==="remove"?y(o,z.id):z.type==="select"&&z.selected&&h(z.id)})},[o,y,h]),W=R=>R?R.split("-").slice(1).join("-"):"",K=F.useCallback(R=>{if(!o||!R.source||!R.target)return;let z,M=0,b;if(R.source===It){if(!R.targetHandle)return;z=W(R.targetHandle);const N=gr(l,o,R.target),L=N==null?void 0:N.netInputs.find(E=>E.wareId===z);M=(L==null?void 0:L.amount)??0}else if(R.target===Ut){if(!R.sourceHandle)return;z=W(R.sourceHandle);const N=gr(l,o,R.source),L=N==null?void 0:N.netOutputs.find(E=>E.wareId===z);M=(L==null?void 0:L.amount)??0}else{if(!R.sourceHandle)return;z=W(R.sourceHandle);const N=gr(l,o,R.source),L=N==null?void 0:N.grossOutputs.find(G=>G.wareId===z),E=(L==null?void 0:L.amount)??0,T=gr(l,o,R.target),Z=T==null?void 0:T.grossInputs.find(G=>G.wareId===z);M=Z?Math.min(E,Z.amount):E,b=E>0?M/E:0}z&&p(o,{sourceModuleId:R.source,targetModuleId:R.target,wareId:z,amount:M,mode:"auto",locked:!1,ratio:b})},[o,l,p]),q=F.useCallback(()=>{m(),w()},[m,w]),H=F.useCallback(R=>{R.preventDefault(),x({x:R.clientX,y:R.clientY,flowPosition:r({x:R.clientX,y:R.clientY}),target:{type:"pane",viewMode:"station"}})},[x,r]),$=F.useCallback((R,z)=>{R.preventDefault(),g(z.id),x({x:R.clientX,y:R.clientY,flowPosition:r({x:R.clientX,y:R.clientY}),target:{type:"node",nodeId:z.id,nodeType:z.type??"module",viewMode:"station"}})},[x,r,g]),X=F.useCallback((R,z)=>{R.preventDefault(),h(z.id),x({x:R.clientX,y:R.clientY,flowPosition:r({x:R.clientX,y:R.clientY}),target:{type:"edge",edgeId:z.id,edgeType:z.type??"module",viewMode:"station"}})},[x,r,h]),Q=F.useCallback(R=>{if(R.key==="Delete"||R.key==="Backspace"){const z=he.getState().selectedNodeId,M=he.getState().selectedEdgeId;z&&o?z!==It&&z!==Ut&&(d(o,z),m()):M&&o&&(y(o,M),m())}},[o,d,y,m]),O=F.useCallback(R=>{const z=Math.round(R.x),M=Math.round(R.y),b=Math.round(R.zoom*100)/100;(z!==R.x||M!==R.y||b!==R.zoom)&&t({x:z,y:M,zoom:b})},[t]);return j?c.jsxs("div",{ref:S,className:"flex-1 relative",onKeyDown:Q,tabIndex:0,children:[c.jsxs(cg,{nodes:D,edges:C,onNodesChange:A,onEdgesChange:V,onConnect:K,onPaneClick:q,onPaneContextMenu:H,onNodeContextMenu:$,onEdgeContextMenu:X,onViewportChange:O,nodeTypes:SC,edgeTypes:NC,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:["Delete","Backspace"],selectionKeyCode:null,children:[c.jsx(pg,{gap:16,size:1}),c.jsx(mg,{})]}),c.jsxs("div",{className:"absolute top-4 left-4 bg-card/90 border border-border rounded-lg px-3 py-2 shadow-sm",children:[c.jsx("h2",{className:"font-medium text-foreground",children:j.name}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.modules.length," module",j.modules.length!==1?"s":"",","," ",(j.moduleConnections??[]).length," connection",(j.moduleConnections??[]).length!==1?"s":""]})]}),c.jsx(vg,{})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:c.jsx("p",{className:"text-muted-foreground",children:"Station not found"})})}function CC(){return c.jsx(Hl,{children:c.jsx(kC,{})})}let dl=null;async function IC(){if(dl)return dl;const t=await fetch("/Station-Planner-For-X4-Foundations/gamedata.json");if(!t.ok)throw new Error(`Failed to load game data: ${t.statusText}`);return dl=await t.json(),dl}function jC(){const t=he(o=>o.theme),r=he(o=>o.setTheme);F.useEffect(()=>{const o=localStorage.getItem("theme");o&&["light","dark","system"].includes(o)&&r(o)},[r]),F.useEffect(()=>{const o=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const u=t==="dark"||t==="system"&&i.matches;o.classList.toggle("dark",u)};if(l(),localStorage.setItem("theme",t),t==="system")return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[t])}function EC(){const t=he(o=>o.language),r=he(o=>o.setLanguage);F.useEffect(()=>{const o=localStorage.getItem("x4-planner-language");o&&r(o)},[r]),F.useEffect(()=>{localStorage.setItem("x4-planner-language",t)},[t])}function _C(){jC(),EC();const{gameData:t,loading:r,error:o,setGameData:i,setError:l}=We(),u=he(d=>d.viewMode);return F.useEffect(()=>{IC().then(d=>{i(d),de.getState().recompute()}).catch(d=>l(d.message))},[i,l]),r?c.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading game data..."})]})}):o?c.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-destructive mb-2",children:"Failed to load game data"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})}):c.jsx(Hl,{children:c.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[c.jsx(Ok,{}),c.jsx(Vk,{}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u==="network"?c.jsx(wC,{}):c.jsx(CC,{}),c.jsx(Hk,{})]}),c.jsx(Uk,{}),t&&c.jsxs("div",{className:"absolute bottom-4 left-4 text-xs text-muted-foreground bg-card/80 p-2 rounded",children:["Loaded: ",Object.keys(t.wares).length," wares,"," ",Object.keys(t.sectors).length," sectors"]})]})})}s0.createRoot(document.getElementById("root")).render(c.jsx(F.StrictMode,{children:c.jsx(_C,{})}));
